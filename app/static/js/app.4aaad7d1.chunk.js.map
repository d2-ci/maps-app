{"version":3,"file":"static/js/app.4aaad7d1.chunk.js","mappings":"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","sources":["D2App/constants/actionTypes.js","D2App/util/time.js","D2App/constants/layers.js","D2App/constants/dimension.js","D2App/constants/periods.js","D2App/util/periods.js","D2App/util/analytics.js","D2App/util/favorites.js","D2App/util/numbers.js","D2App/util/classify.js","D2App/constants/colorbrewer.js","D2App/util/colors.js","D2App/util/legend.js","D2App/util/analyticalObject.js","D2App/actions/layers.js","D2App/actions/analyticalObject.js","D2App/constants/basemaps.js","D2App/constants/settings.js","D2App/util/api.js","D2App/util/getMigratedMapConfig.js","D2App/util/helpers.js","D2App/util/requests.js","D2App/util/external.js","D2App/actions/externalLayers.js","D2App/actions/basemap.js","D2App/actions/map.js","D2App/components/alerts/AlertStack.js","D2App/util/alerts.js","D2App/actions/dataTable.js","D2App/actions/feature.js","D2App/actions/orgUnits.js","D2App/constants/valueTypes.js","D2App/util/filter.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/ColorCell.module.css?7f44","D2App/components/datatable/ColorCell.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/FilterInput.module.css?ed88","D2App/components/datatable/FilterInput.js","D2App/actions/dataFilters.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/ColumnHeader.module.css?b35c","D2App/components/datatable/ColumnHeader.js","D2App/components/map/mapLocale.js","D2App/components/map/MapApi.js","D2App/constants/earthEngine.js","D2App/util/earthEngine.js","D2App/components/datatable/EarthEngineColumns.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/DataTable.module.css?76ec","D2App/components/datatable/DataTable.js","D2App/components/WindowDimensionsProvider.js","D2App/components/core/icons.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/ResizeHandle.module.css?98ea","D2App/components/datatable/ResizeHandle.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/BottomPanel.module.css?541b","D2App/components/datatable/BottomPanel.js","D2App/constants/layout.js","D2App/components/SystemSettingsProvider.js","D2App/actions/layerEdit.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Checkbox.module.css?81c6","D2App/components/core/Checkbox.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorButton.module.css?efe6","D2App/components/core/ColorButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorPicker.module.css?df28","D2App/components/core/ColorPicker.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorScale.module.css?53ca","D2App/components/core/ColorScale.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorScaleSelect.module.css?0787","D2App/components/core/ColorScaleSelect.js","D2App/components/core/ConditionalWrapper.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/DatePicker.module.css?517f","D2App/components/core/DatePicker.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/InputField.module.css?d4da","D2App/components/core/NumberField.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/FontStyle.module.css?47fc","D2App/components/core/FontStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Help.module.css?8a16","D2App/components/core/Help.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/IconButton.module.css?a7af","D2App/components/core/IconButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ImageSelect.module.css?360c","D2App/components/core/ImageSelect.js","D2App/components/core/LabelDisplayOptions.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/MenuButton.module.css?7804","D2App/components/core/MenuButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/RadioGroup.module.css?3082","D2App/components/core/RadioGroup.js","D2App/components/core/Radio.js","D2App/components/core/SelectField.js","D2App/components/core/Tabs.js","D2App/components/core/Tab.js","D2App/components/core/TextField.js","D2App/constants/colors.js","D2App/util/orgUnits.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/AssociatedGeometrySelect.module.css?87db","D2App/components/orgunits/AssociatedGeometrySelect.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitSelectMode.module.css?b186","D2App/components/orgunits/OrgUnitSelectMode.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitSelect.module.css?7aff","D2App/components/orgunits/OrgUnitSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/styles/LayerDialog.module.css?f8dd","D2App/constants/aggregationTypes.js","D2App/components/edit/earthEngine/AggregationSelect.js","D2App/components/edit/earthEngine/BandSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/earthEngine/styles/PeriodSelect.module.css?e39b","D2App/components/edit/earthEngine/PeriodSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/shared/styles/BufferRadius.module.css?1852","D2App/components/edit/shared/BufferRadius.js","D2App/util/map.js","D2App/loaders/earthEngineLoader.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/LegendItemRange.module.css?8d27","D2App/components/legend/LegendItemRange.js","D2App/components/legend/LineSymbol.js","D2App/components/legend/PolygonSymbol.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/LegendItem.module.css?1f16","D2App/components/legend/LegendItem.js","D2App/components/edit/earthEngine/LegendPreview.js","D2App/components/edit/earthEngine/StyleSelect.js","D2App/components/edit/earthEngine/StyleTab.js","D2App/components/edit/earthEngine/EarthEngineDialog.js","D2App/components/UserSettingsProvider.js","D2App/hooks/useProgramStageDataElements.js","D2App/hooks/useProgramTrackedEntityAttributes.js","D2App/hooks/useEventDataItems.js","D2App/components/dataItem/CoordinateField.js","webpack://@dhis2/app-shell/./src/D2App/components/filter/styles/RemoveFilter.module.css?e69f","D2App/components/filter/RemoveFilter.js","D2App/hooks/useOptionSet.js","D2App/components/optionSet/OptionSetSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterSelect.module.css?2d11","D2App/components/dataItem/filter/FilterSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterRow.module.css?a2c3","D2App/components/dataItem/filter/FilterRow.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterGroup.module.css?bedd","D2App/components/dataItem/filter/FilterGroup.js","webpack://@dhis2/app-shell/./src/D2App/components/classification/styles/Classification.module.css?2828","D2App/components/classification/Classification.js","D2App/components/classification/LegendSetSelect.js","D2App/components/classification/LegendTypeSelect.js","D2App/components/classification/SingleColor.js","D2App/components/classification/NumericLegendStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/optionSet/styles/OptionStyle.module.css?2060","D2App/components/optionSet/OptionStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/optionSet/styles/OptionSetStyle.module.css?352a","D2App/components/optionSet/OptionSetStyle.js","D2App/components/dataItem/BooleanStyle.js","D2App/components/dataItem/DataItemStyle.js","D2App/components/dataItem/StyleByDataItem.js","D2App/components/periods/RelativePeriodSelect.js","D2App/components/periods/StartEndDates.js","D2App/components/program/ProgramSelect.js","D2App/components/program/ProgramStageSelect.js","D2App/constants/eventStatuses.js","D2App/components/edit/event/EventStatusSelect.js","D2App/components/edit/event/EventDialog.js","D2App/components/groupSet/GroupSetSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/groupSet/styles/GroupStyle.module.css?34d9","D2App/components/groupSet/GroupStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/groupSet/styles/GroupSetStyle.module.css?90af","D2App/components/groupSet/GroupSetStyle.js","D2App/components/groupSet/StyleByGroupSet.js","D2App/components/edit/shared/Labels.js","D2App/components/edit/FacilityDialog.js","D2App/components/edit/orgUnit/OrgUnitDialog.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/styles/LayerEdit.module.css?c2be","D2App/components/dataElement/DataElementGroupSelect.js","D2App/components/dataElement/DataElementOperandSelect.js","D2App/components/dataElement/DataElementSelect.js","D2App/components/dataElement/TotalsDetailsSelect.js","D2App/components/dataItem/EventDataItemSelect.js","D2App/components/dataSets/DataSetsSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionItemsSelect.module.css?a59e","D2App/components/dimensions/DimensionItemsSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionSelect.module.css?5588","D2App/components/dimensions/DimensionSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionFilterRow.module.css?2c67","D2App/components/dimensions/DimensionFilterRow.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionFilter.module.css?2d92","D2App/components/dimensions/DimensionFilter.js","D2App/components/indicator/IndicatorGroupSelect.js","D2App/components/indicator/IndicatorSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/PeriodSelect.module.css?36c8","D2App/components/periods/PeriodSelect.js","D2App/components/periods/PeriodTypeSelect.js","D2App/components/periods/RenderingStrategy.js","D2App/components/program/ProgramIndicatorSelect.js","D2App/components/edit/thematic/AggregationTypeSelect.js","D2App/components/edit/thematic/CompletedOnlyCheckbox.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/thematic/styles/NoDataColor.module.css?98db","D2App/components/edit/thematic/NoDataColor.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/thematic/styles/RadiusSelect.module.css?28ca","D2App/components/edit/thematic/RadiusSelect.js","D2App/components/edit/thematic/ThematicMapTypeSelect.js","D2App/components/edit/thematic/ValueTypeSelect.js","D2App/components/edit/thematic/ThematicDialog.js","D2App/components/trackedEntity/TrackedEntityTypeSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/trackedEntity/styles/PeriodTypeSelect.module.css?206f","D2App/components/edit/trackedEntity/PeriodTypeSelect.js","D2App/constants/programStatuses.js","D2App/components/edit/trackedEntity/ProgramStatusSelect.js","D2App/components/edit/trackedEntity/TrackedEntityRelationshipTypeSelect.js","D2App/components/edit/trackedEntity/TrackedEntityDialog.js","D2App/components/edit/LayerEdit.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Drawer.module.css?1c01","D2App/components/core/Drawer.js","D2App/components/loaders/EarthEngineLoader.js","D2App/util/geojson.js","D2App/util/event.js","D2App/util/styleByDataItem.js","D2App/loaders/eventLoader.js","D2App/components/loaders/EventLoader.js","D2App/loaders/externalLoader.js","D2App/components/loaders/ExternalLoader.js","D2App/loaders/facilityLoader.js","D2App/components/loaders/FacilityLoader.js","D2App/loaders/orgUnitLoader.js","D2App/components/loaders/OrgUnitLoader.js","D2App/loaders/thematicLoader.js","D2App/components/loaders/ThematicLoader.js","D2App/util/teiRelationshipsParser.js","D2App/loaders/trackedEntityLoader.js","D2App/components/loaders/TrackedEntityLoader.js","D2App/components/loaders/LayerLoader.js","D2App/constants/mapControls.js","D2App/util/mapControls.js","D2App/components/BaseUrlProvider.js","D2App/constants/alerts.js","D2App/components/map/layers/BasemapLayer.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapLoadingMask.module.css?0ea5","D2App/components/map/MapLoadingMask.js","webpack://@dhis2/app-shell/./src/D2App/components/map/layers/styles/Alert.module.css?d875","D2App/components/map/layers/Alert.js","D2App/components/map/layers/Layer.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitButton.module.css?f02c","D2App/components/orgunits/OrgUnitButton.js","D2App/components/map/Popup.js","webpack://@dhis2/app-shell/./src/D2App/components/map/layers/earthEngine/styles/EarthEnginePopup.module.css?f052","D2App/components/map/layers/earthEngine/EarthEnginePopup.js","D2App/components/map/layers/earthEngine/EarthEngineLayer.js","D2App/components/map/layers/EventPopup.js","D2App/components/map/layers/EventLayer.js","D2App/util/labels.js","D2App/components/map/layers/FacilityLayer.js","D2App/components/map/layers/OrgUnitLayer.js","D2App/util/timeTicks.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/Timeline.module.css?1955","D2App/components/periods/Timeline.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/PeriodName.module.css?a0ba","D2App/components/map/PeriodName.js","D2App/components/map/layers/ThematicLayer.js","D2App/components/BaseUrlShim.js","D2App/components/map/layers/TrackedEntityLayer.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/Map.module.css?c12a","D2App/components/map/Map.js","D2App/components/map/layers/ExternalLayer.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapItem.module.css?1a5e","D2App/components/map/MapItem.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/SplitView.module.css?a876","D2App/components/map/SplitView.js","D2App/components/map/MapView.js","webpack://@dhis2/app-shell/./src/D2App/components/plugin/styles/ContextMenu.module.css?44df","D2App/components/plugin/ContextMenu.js","D2App/components/legend/Bubble.js","D2App/components/legend/Bubbles.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/Legend.module.css?d865","D2App/components/legend/Legend.js","D2App/components/plugin/LegendLayer.js","D2App/components/plugin/Legend.js","webpack://@dhis2/app-shell/./src/D2App/components/plugin/styles/MapName.module.css?ceb4","D2App/components/plugin/MapName.js","webpack://@dhis2/app-shell/./src/D2App/components/plugin/styles/Plugin.module.css?012a","D2App/components/plugin/Plugin.js","webpack://@dhis2/app-shell/./src/D2App/components/interpretations/styles/InterpretationMap.module.css?a079","D2App/components/interpretations/InterpretationMap.js","D2App/components/interpretations/InterpretationsPanel.js","D2App/actions/interpretations.js","D2App/reducers/map.js","D2App/hooks/useBasemapConfig.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/SortableHandle.module.css?6182","D2App/components/layers/SortableHandle.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayerCard.module.css?d7f6","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/LayerToolbarMore.module.css?6050","D2App/components/layers/toolbar/LayerToolbarMoreMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/OpacitySlider.module.css?88b0","D2App/components/layers/toolbar/OpacitySlider.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/LayerToolbar.module.css?9f24","D2App/components/layers/toolbar/LayerToolbar.js","D2App/components/layers/LayerCard.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/basemaps/styles/Basemap.module.css?c36c","D2App/components/layers/basemaps/Basemap.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/basemaps/styles/BasemapList.module.css?e0bc","D2App/components/layers/basemaps/BasemapList.js","D2App/components/layers/basemaps/BasemapCard.js","D2App/util/dataDownload.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/download/styles/DataDownloadDialogActions.module.css?ee09","D2App/components/layers/download/DataDownloadDialogActions.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/download/styles/DataDownloadDialog.module.css?4f52","D2App/components/layers/download/DataDownloadDialog.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/OverlayCard.module.css?1a36","D2App/components/layers/overlays/OverlayCard.js","D2App/components/layers/LayersPanel.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayersToggle.module.css?991c","D2App/components/layers/LayersToggle.js","D2App/actions/ui.js","D2App/components/loaders/LayersLoader.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/ContextMenu.module.css?92cf","D2App/components/map/ContextMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/LegendPosition.module.css?59a1","D2App/components/download/LegendPosition.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadLegend.module.css?2308","D2App/components/download/DownloadLegend.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapName.module.css?be08","D2App/components/map/MapName.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapContainer.module.css?22c1","D2App/components/map/MapContainer.js","D2App/actions/aggregations.js","webpack://@dhis2/app-shell/./src/D2App/components/openAs/styles/OpenAsMapDialog.module.css?f069","D2App/components/openAs/OpenAsMapDialog.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitData.module.css?43a7","D2App/components/orgunits/OrgUnitData.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ListItem.module.css?ab97","D2App/components/core/ListItem.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitInfo.module.css?de1e","D2App/components/orgunits/OrgUnitInfo.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitProfile.module.css?26b3","D2App/components/orgunits/OrgUnitProfile.js","D2App/actions/download.js","D2App/util/export-image.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadDialog.module.css?2020","D2App/components/download/DownloadDialog.js","D2App/components/download/DownloadButton.js","webpack://@dhis2/app-shell/./src/D2App/components/interpretations/styles/InterpretationsToggle.module.css?07b9","D2App/components/interpretations/InterpretationsToggle.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/Layer.module.css?8e48","D2App/components/layers/overlays/Layer.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/LayerList.module.css?b312","D2App/components/layers/overlays/LayerList.js","D2App/components/layers/overlays/AddLayerPopover.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/AddLayerButton.module.css?d3e0","D2App/components/layers/overlays/AddLayerButton.js","D2App/components/app/FileMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/app/styles/AppMenu.module.css?0edf","D2App/components/app/AppMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/app/styles/App.module.css?085e","D2App/components/app/App.js","D2App/reducers/aggregations.js","D2App/reducers/analyticalObject.js","D2App/reducers/basemaps.js","D2App/reducers/contextMenu.js","D2App/reducers/dataTable.js","D2App/reducers/download.js","D2App/reducers/feature.js","D2App/reducers/interpretation.js","D2App/reducers/layerEdit.js","D2App/reducers/layers.js","D2App/reducers/orgUnitProfile.js","D2App/reducers/ui.js","D2App/reducers/index.js","D2App/store/index.js","D2App/locales/index.js","D2App/AppWrapper.js"],"sourcesContent":["/* MAP */\nexport const MAP_NEW = 'MAP_NEW';\nexport const MAP_SET = 'MAP_SET';\nexport const MAP_PROPS_SET = 'MAP_PROPS_SET';\nexport const MAP_CONTEXT_MENU_OPEN = 'MAP_CONTEXT_MENU_OPEN';\nexport const MAP_CONTEXT_MENU_CLOSE = 'MAP_CONTEXT_MENU_CLOSE';\nexport const MAP_COORDINATE_OPEN = 'MAP_COORDINATE_OPEN';\nexport const MAP_COORDINATE_CLOSE = 'MAP_COORDINATE_CLOSE';\nexport const MAP_EARTH_ENGINE_VALUE_SHOW = 'MAP_EARTH_ENGINE_VALUE_SHOW';\nexport const MAP_ALERTS_CLEAR = 'MAP_ALERT_CLEAR';\n\n/* BASEMAP */\nexport const BASEMAPS_ADD = 'BASEMAPS_ADD';\nexport const BASEMAP_REMOVE = 'BASEMAP_REMOVE';\nexport const BASEMAP_SELECTED = 'BASEMAP_SELECTED';\nexport const BASEMAP_TOGGLE_EXPAND = 'BASEMAP_TOGGLE_EXPAND';\nexport const BASEMAP_TOGGLE_VISIBILITY = 'BASEMAP_TOGGLE_VISIBILITY';\nexport const BASEMAP_CHANGE_OPACITY = 'BASEMAP_CHANGE_OPACITY';\nexport const BASEMAP_BING_KEY_SET = 'BASEMAP_BING_KEY_SET';\nexport const BASEMAP_REMOVE_BING_MAPS = 'BASEMAP_REMOVE_BING_MAPS';\n\n/* LAYER */\nexport const LAYER_ADD = 'LAYER_ADD';\nexport const LAYER_REMOVE = 'LAYER_REMOVE';\nexport const LAYER_CHANGE_OPACITY = 'LAYER_CHANGE_OPACITY';\nexport const LAYER_EDIT = 'LAYER_EDIT';\nexport const LAYER_EDIT_SUCCESS = 'LAYER_EDIT_SUCCESS';\nexport const LAYER_CANCEL = 'LAYER_CANCEL';\nexport const LAYER_LOAD = 'LAYER_LOAD';\nexport const LAYER_LOADING_SET = 'LAYER_LOADING_SET';\nexport const LAYER_LOAD_SUCCESS = 'LAYER_LOAD_SUCCESS';\nexport const LAYER_SORT = 'LAYER_SORT';\nexport const LAYER_TOGGLE_EXPAND = 'LAYER_TOGGLE_EXPAND';\nexport const LAYER_TOGGLE_VISIBILITY = 'LAYER_TOGGLE_VISIBILITY';\nexport const LAYER_UPDATE = 'LAYER_UPDATE';\nexport const LAYER_DRILL = 'LAYER_DRILL';\n\n/* EXTERNAL LAYERS */\nexport const EXTERNAL_LAYER_ADD = 'EXTERNAL_LAYER_ADD';\n\n/* DATA TABLE */\nexport const DATA_TABLE_OPEN = 'DATA_TABLE_OPEN';\nexport const DATA_TABLE_CLOSE = 'DATA_TABLE_CLOSE';\nexport const DATA_TABLE_TOGGLE = 'DATA_TABLE_TOGGLE';\nexport const DATA_TABLE_RESIZE = 'DATA_TABLE_RESIZE';\n\n/* DATA FILTER */\nexport const DATA_FILTER_SET = 'DATA_FILTER_SET';\nexport const DATA_FILTER_CLEAR = 'DATA_FILTER_CLEAR';\n\n/* ORGANISATION UNITS */\nexport const ORGANISATION_UNIT_PROFILE_SET = 'ORGANISATION_UNIT_PROFILE_SET';\nexport const ORGANISATION_UNIT_PROFILE_CLOSE = 'ORGANISATION_UNIT_PROFILE_CLOSE';\n\n/* USER INTERFACE */\nexport const LAYERS_PANEL_OPEN = 'LAYERS_PANEL_OPEN';\nexport const LAYERS_PANEL_CLOSE = 'LAYERS_PANEL_CLOSE';\nexport const INTERPRETATIONS_PANEL_OPEN = 'INTERPRETATIONS_PANEL_OPEN';\nexport const INTERPRETATIONS_PANEL_CLOSE = 'INTERPRETATIONS_PANEL_CLOSE';\n\n/* LAYER EDIT */\nexport const LAYER_EDIT_PROGRAM_SET = 'LAYER_EDIT_PROGRAM_SET';\nexport const LAYER_EDIT_PROGRAM_STAGE_SET = 'LAYER_EDIT_PROGRAM_STAGE_SET';\nexport const LAYER_EDIT_PROGRAM_INDICATOR_SET = 'LAYER_EDIT_PROGRAM_INDICATOR_SET';\nexport const LAYER_EDIT_PERIOD_NAME_SET = 'LAYER_EDIT_PERIOD_NAME_SET';\nexport const LAYER_EDIT_PERIOD_SET = 'LAYER_EDIT_PERIOD_SET';\nexport const LAYER_EDIT_START_DATE_SET = 'LAYER_EDIT_START_DATE_SET';\nexport const LAYER_EDIT_END_DATE_SET = 'LAYER_EDIT_END_DATE_SET';\nexport const LAYER_EDIT_FILTER_ADD = 'LAYER_EDIT_FILTER_ADD';\nexport const LAYER_EDIT_FILTER_REMOVE = 'LAYER_EDIT_FILTER_REMOVE';\nexport const LAYER_EDIT_FILTER_CHANGE = 'LAYER_EDIT_FILTER_CHANGE';\nexport const LAYER_EDIT_DIMENSION_FILTER_ADD = 'LAYER_EDIT_DIMENSION_FILTER_ADD';\nexport const LAYER_EDIT_DIMENSION_FILTER_REMOVE = 'LAYER_EDIT_DIMENSION_FILTER_REMOVE';\nexport const LAYER_EDIT_DIMENSION_FILTER_CHANGE = 'LAYER_EDIT_DIMENSION_FILTER_CHANGE';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_SET';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET';\nexport const LAYER_EDIT_THEMATIC_MAP_TYPE_SET = 'LAYER_EDIT_THEMATIC_MAP_TYPE_SET';\nexport const LAYER_EDIT_CLASSIFICATION_SET = 'LAYER_EDIT_CLASSIFICATION_SET';\nexport const LAYER_EDIT_COLOR_SCALE_SET = 'LAYER_EDIT_COLOR_SCALE_SET';\nexport const LAYER_EDIT_DATA_ITEM_SET = 'LAYER_EDIT_DATA_ITEM_SET';\nexport const LAYER_EDIT_EVENT_STATUS_SET = 'LAYER_EDIT_EVENT_STATUS_SET';\nexport const LAYER_EDIT_EVENT_COORDINATE_FIELD_SET = 'LAYER_EDIT_EVENT_COORDINATE_FIELD_SET';\nexport const LAYER_EDIT_EVENT_CLUSTERING_SET = 'LAYER_EDIT_EVENT_CLUSTERING_SET';\nexport const LAYER_EDIT_EVENT_POINT_RADIUS_SET = 'LAYER_EDIT_EVENT_POINT_RADIUS_SET';\nexport const LAYER_EDIT_EVENT_POINT_COLOR_SET = 'LAYER_EDIT_EVENT_POINT_COLOR_SET';\nexport const LAYER_EDIT_RELATED_POINT_COLOR_SET = 'LAYER_EDIT_RELATED_POINT_COLOR_SET';\nexport const LAYER_EDIT_RELATED_POINT_RADIUS_SET = 'LAYER_EDIT_RELATED_POINT_RADIUS_SET';\nexport const LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET = 'LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET';\nexport const LAYER_EDIT_ORGANISATION_UNITS_SET = 'LAYER_EDIT_ORGANISATION_UNITS_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET = 'LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_MODE_SET = 'LAYER_EDIT_ORGANISATION_UNIT_MODE_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET = 'LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET = 'LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET';\nexport const LAYER_EDIT_VALUE_TYPE_SET = 'LAYER_EDIT_VALUE_TYPE_SET';\nexport const LAYER_EDIT_INDICATOR_GROUP_SET = 'LAYER_EDIT_INDICATOR_GROUP_SET';\nexport const LAYER_EDIT_PERIOD_TYPE_SET = 'LAYER_EDIT_PERIOD_TYPE_SET';\nexport const LAYER_EDIT_RENDERING_STRATEGY_SET = 'LAYER_EDIT_RENDERING_STRATEGY_SET';\nexport const LAYER_EDIT_AGGREGATION_TYPE_SET = 'LAYER_EDIT_AGGREGATION_TYPE_SET';\nexport const LAYER_EDIT_DATA_ELEMENT_GROUP_SET = 'LAYER_EDIT_DATA_ELEMENT_GROUP_SET';\nexport const LAYER_EDIT_PARAMS_SET = 'LAYER_EDIT_PARAMS_SET';\nexport const LAYER_EDIT_FILTER_SET = 'LAYER_EDIT_FILTER_SET';\nexport const LAYER_EDIT_LABELS_SET = 'LAYER_EDIT_LABELS_SET';\nexport const LAYER_EDIT_LABEL_TEMPLATE = 'LAYER_EDIT_LABEL_TEMPLATE';\nexport const LAYER_EDIT_LABEL_FONT_SIZE_SET = 'LAYER_EDIT_LABEL_FONT_SIZE_SET';\nexport const LAYER_EDIT_LABEL_FONT_WEIGHT_SET = 'LAYER_EDIT_LABEL_FONT_WEIGHT_SET';\nexport const LAYER_EDIT_LABEL_FONT_STYLE_SET = 'LAYER_EDIT_LABEL_FONT_STYLE_SET';\nexport const LAYER_EDIT_LABEL_FONT_COLOR_SET = 'LAYER_EDIT_LABEL_FONT_COLOR_SET';\nexport const LAYER_EDIT_BUFFER_RADIUS_SET = 'LAYER_EDIT_BUFFER_RADIUS_SET';\nexport const LAYER_EDIT_RADIUS_LOW_SET = 'LAYER_EDIT_RADIUS_LOW_SET';\nexport const LAYER_EDIT_RADIUS_HIGH_SET = 'LAYER_EDIT_RADIUS_HIGH_SET';\nexport const LAYER_EDIT_LEGEND_SET_SET = 'LAYER_EDIT_LEGEND_SET_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_PATH_SET = 'LAYER_EDIT_ORGANISATION_UNIT_PATH_SET'; // Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const LAYER_EDIT_ORGANISATION_UNIT_PATH_LOAD = 'LAYER_EDIT_ORGANISATION_UNIT_PATH_LOAD'; // Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const LAYER_EDIT_OPERAND_SET = 'OPERAND_SET'; // Data element operands (details)\nexport const LAYER_EDIT_TRACKED_ENTITY_TYPE_SET = 'LAYER_EDIT_TRACKED_ENTITY_TYPE_SET';\nexport const LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET = 'LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET';\nexport const LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET = 'LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET';\nexport const LAYER_EDIT_PROGRAM_STATUS_SET = 'LAYER_EDIT_PROGRAM_STATUS_SET';\nexport const LAYER_EDIT_FOLLOW_UP_SET = 'LAYER_EDIT_FOLLOW_UP_SET';\nexport const LAYER_EDIT_NO_DATA_COLOR_SET = 'LAYER_EDIT_NO_DATA_COLOR_SET';\nexport const LAYER_EDIT_BAND_SET = 'LAYER_EDIT_BAND_SET';\n\n/* PERIODS */\nexport const RELATIVE_PERIODS_SET = 'RELATIVE_PERIODS_SET';\nexport const RELATIVE_PERIODS_TRANSLATE = 'RELATIVE_PERIODS_TRANSLATE';\n\n/* INTERPRETATIONS */\nexport const INTERPRETATION_SET = 'INTERPRETATION_SET';\n\n/* DOWNLOAD (PNG) */\nexport const DOWNLOAD_DIALOG_TOGGLE = 'DOWNLOAD_DIALOG_TOGGLE';\nexport const DOWNLOAD_NAME_SHOW_TOGGLE = 'DOWNLOAD_NAME_SHOW_TOGGLE';\nexport const DOWNLOAD_LEGEND_SHOW_TOGGLE = 'DOWNLOAD_LEGEND_SHOW_TOGGLE';\nexport const DOWNLOAD_LEGEND_POSITION_SET = 'DOWNLOAD_LEGEND_POSITION_SET';\n\n/* ANALYTICAL OBJECTS (BETWEEN APPS) */\nexport const ANALYTICAL_OBJECT_SET = 'ANALYTICAL_OBJECT_SET';\nexport const ANALYTICAL_OBJECT_CLEAR = 'ANALYTICAL_OBJECT_CLEAR';\n\n/* FEATURE */\nexport const FEATURE_HIGHLIGHT = 'FEATURE_HIGHLIGHT';\n\n/* AGGREGATIONS */\nexport const AGGREGATIONS_SET = 'AGGREGATIONS_SET';","import i18n from '@dhis2/d2-i18n';\nconst DEFAULT_LOCALE = 'en';\n\n// BCP 47 locale format\nconst dateLocale = locale => locale && locale.includes('_') ? locale.replace('_', '-') : locale;\n\n/**\n * Converts a date string or timestamp to a date object\n * @param {String|Number|Array|Date} date\n * @returns {String}\n */\nconst toDate = date => {\n  if (Array.isArray(date)) {\n    return new Date(date[0], date[1], date[2]);\n  }\n  return new Date(date);\n};\n\n// Simple check if the date part is correctly formatted\nconst shortDateRegexp = /^\\d{4}-\\d{2}-\\d{2}$/;\n\n/**\n * Checks if the date format is valid\n * @param {String} dateString\n * @returns {String}\n */\nconst isValidDateFormat = dateString => shortDateRegexp.test(dateString.substr(0, 10));\n\n/**\n * Formats a date string, timestamp or date array into format used by DHIS2 and <input> date\n * @param {String|Number|Array|Date} date\n * @returns {String}\n */\nexport const formatDate = date => {\n  const dateObj = toDate(date);\n  const year = dateObj.getFullYear();\n  const month = ('0' + (dateObj.getMonth() + 1)).slice(-2);\n  const day = ('0' + dateObj.getDate()).slice(-2);\n  return `${year}-${month}-${day}`; // xxxx-xx-xx\n};\n\n/**\n * Simple fallback date format if Intl is not supported\n * @param {String} dateString\n * @returns {String}\n */\nconst fallbackDateFormat = dateString => dateString.substr(0, 10);\n\n/**\n * Returns true if the Internationalization API is supported\n * @returns {Boolean}\n */\nconst hasIntlSupport = typeof global.Intl !== 'undefined' && Intl.DateTimeFormat;\n\n/**\n * Formats a date string or timestamp to the default display format: 13 Aug 2018 (en locale)\n * @param {String} dateString\n * @param {String} locale\n * @param {Boolean} showYear\n * @returns {String}\n */\nexport const formatLocaleDate = function (dateString, locale) {\n  let showYear = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return hasIntlSupport ? new Intl.DateTimeFormat(dateLocale(locale || i18n.language || DEFAULT_LOCALE), {\n    year: showYear ? 'numeric' : undefined,\n    month: 'short',\n    day: 'numeric'\n  }).format(toDate(dateString)) : fallbackDateFormat(dateString);\n};\n\n/**\n * Formats a date range\n * @param {String|Array|Number} startDate\n * @param {String|Array|Number} endDate\n * @param {String} locale\n * @param {Boolean} showYear\n * @returns {String}\n */\n//eslint-disable-next-line max-params\nexport const formatStartEndDate = (startDate, endDate, locale, showYear) => {\n  const loc = locale || i18n.language || DEFAULT_LOCALE;\n  return `${formatLocaleDate(startDate, loc, showYear)} - ${formatLocaleDate(endDate, locale, showYear)}`;\n};\n\n/**\n * @param {String} dateString\n * @returns {Array}\n */\nexport const getDateArray = dateString => {\n  const year = parseInt(dateString.substring(0, 4));\n  const month = parseInt(dateString.substring(5, 7)) - 1;\n  const day = parseInt(dateString.substring(8, 10));\n  return [year, month, day];\n};\n\n/**\n * Checks for errors for start and end date strings or timestamps\n * @param {String} startDateStr\n * @param {String} endDateStr\n * @returns {String|null}\n */\nexport const getStartEndDateError = (startDateStr, endDateStr) => {\n  if (!isValidDateFormat(startDateStr)) {\n    return i18n.t('Start date is invalid');\n  } else if (!isValidDateFormat(endDateStr)) {\n    return i18n.t('End date is invalid');\n  }\n  const startDateArr = getDateArray(startDateStr);\n  const endDateArr = getDateArray(endDateStr);\n  if (toDate(endDateArr) < toDate(startDateArr)) {\n    return i18n.t('End date cannot be earlier than start date');\n  }\n  return null;\n};\n\n/**\n * Returns the year of the date, or the current year of no date is passed\n * @param {String|Number|Array|Date} startDate\n * @returns {Number}\n */\nexport const getYear = date => toDate(date || new Date()).getFullYear();","import i18n from '@dhis2/d2-i18n';\nimport { formatDate } from '../util/time.js';\nexport const VECTOR_STYLE = 'vectorStyle';\nexport const TILE_LAYER = 'tileLayer';\nexport const WMS_LAYER = 'wmsLayer';\nexport const GOOGLE_LAYER = 'googleLayer';\nexport const BING_LAYER = 'bingLayer';\nexport const EVENT_LAYER = 'event';\nexport const THEMATIC_LAYER = 'thematic';\nexport const FACILITY_LAYER = 'facility';\nexport const BOUNDARY_LAYER = 'boundary';\nexport const ORG_UNIT_LAYER = 'orgUnit';\nexport const EXTERNAL_LAYER = 'external';\nexport const EARTH_ENGINE_LAYER = 'earthEngine';\nexport const TRACKED_ENTITY_LAYER = 'trackedEntity';\nexport const GEOJSON_LAYER = 'geoJson';\nexport const GROUP_LAYER = 'group';\nexport const DOWNLOADABLE_LAYER_TYPES = [FACILITY_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EVENT_LAYER, EARTH_ENGINE_LAYER];\nexport const DATA_TABLE_LAYER_TYPES = [FACILITY_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EVENT_LAYER, EARTH_ENGINE_LAYER];\nexport const OPEN_AS_LAYER_TYPES = [THEMATIC_LAYER];\nexport const DEFAULT_START_DATE = formatDate(new Date().setFullYear(new Date().getFullYear() - 1));\nexport const DEFAULT_END_DATE = formatDate(new Date());\nexport const DEFAULT_ORG_UNIT_LEVEL = 1; // 0 is root level\n\n/* RENDERING STRATEGY */\nexport const RENDERING_STRATEGY_SINGLE = 'SINGLE';\nexport const RENDERING_STRATEGY_TIMELINE = 'TIMELINE';\nexport const RENDERING_STRATEGY_SPLIT_BY_PERIOD = 'SPLIT_BY_PERIOD';\n\n/* THEMATIC LAYER */\nexport const THEMATIC_CHOROPLETH = 'CHOROPLETH';\nexport const THEMATIC_BUBBLE = 'BUBBLE';\nexport const THEMATIC_RADIUS_LOW = 5;\nexport const THEMATIC_RADIUS_HIGH = 30;\nexport const THEMATIC_RADIUS_MIN = 0;\nexport const THEMATIC_RADIUS_MAX = 50;\nexport const THEMATIC_COLOR = '#558CC0';\nexport const THEMATIC_BUFFER = 5000;\nexport const getThematicMapTypes = () => [{\n  id: THEMATIC_CHOROPLETH,\n  name: i18n.t('Choropleth'),\n  image: 'images/choropleth.png'\n}, {\n  id: THEMATIC_BUBBLE,\n  name: i18n.t('Bubble map'),\n  image: 'images/bubble.png'\n}];\n\n/* EVENT LAYER */\nexport const EVENT_CLIENT_PAGE_SIZE = 100000;\nexport const EVENT_SERVER_CLUSTER_COUNT = 2000;\nexport const EVENT_COLOR = '#333333';\nexport const EVENT_RADIUS = 6;\nexport const EVENT_BUFFER = 100;\n\n/* TEI LAYER */\nexport const TEI_COLOR = '#BB0000';\nexport const TEI_RADIUS = 6;\nexport const TEI_BUFFER = 100;\nexport const TEI_RELATED_COLOR = '#000000';\nexport const TEI_RELATED_RADIUS = 3;\nexport const TEI_RELATIONSHIP_LINE_COLOR = '#0000BB';\n\n/* FACILITY LAYER */\nexport const FACILITY_BUFFER = 5000;\n\n/* ORG UNIT LAYER */\nexport const ORG_UNIT_COLOR = '#333333';\nexport const ORG_UNIT_RADIUS = 6;\nexport const ORG_UNIT_RADIUS_SMALL = 1;\n\n/* EARTH ENGINE LAYER */\nexport const EE_BUFFER = 5000;\n\n/* CLASSIFICATION */\nexport const CLASSIFICATION_PREDEFINED = 1;\nexport const CLASSIFICATION_EQUAL_INTERVALS = 2;\nexport const CLASSIFICATION_EQUAL_COUNTS = 3;\nexport const CLASSIFICATION_SINGLE_COLOR = 10;\nexport const getLegendTypes = isBubble => [{\n  id: CLASSIFICATION_EQUAL_INTERVALS,\n  name: i18n.t('Automatic color legend')\n}, {\n  id: CLASSIFICATION_PREDEFINED,\n  name: i18n.t('Predefined color legend')\n}, ...(isBubble ? [{\n  id: CLASSIFICATION_SINGLE_COLOR,\n  name: i18n.t('Single color legend')\n}] : [])];\nexport const getClassificationTypes = () => [{\n  id: CLASSIFICATION_EQUAL_INTERVALS,\n  name: i18n.t('Equal intervals')\n}, {\n  id: CLASSIFICATION_EQUAL_COUNTS,\n  name: i18n.t('Equal counts')\n}];\nexport const STYLE_TYPE_COLOR = 'COLOR';\nexport const STYLE_TYPE_SYMBOL = 'SYMBOL';\nexport const getGroupSetStyleTypes = () => [{\n  id: STYLE_TYPE_COLOR,\n  name: i18n.t('Color')\n}, {\n  id: STYLE_TYPE_SYMBOL,\n  name: i18n.t('Symbol')\n}];\n\n/* LABEL TEMPLATES */\nexport const LABEL_TEMPLATE_NAME_ONLY = '{name}';\nexport const LABEL_TEMPLATE_NAME_AND_VALUE = '{name}\\n{value}';\nexport const LABEL_TEMPLATE_VALUE_ONLY = '{value}';\n\n/* LABEL STYLES */\nexport const LABEL_FONT_SIZE = '14px';\nexport const LABEL_FONT_SIZE_MIN = 6;\nexport const LABEL_FONT_SIZE_MAX = 100;\nexport const LABEL_FONT_STYLE = 'normal';\nexport const LABEL_FONT_WEIGHT = 'normal';\nexport const LABEL_FONT_COLOR = '#333333';\nexport const NO_DATA_COLOR = '#CCCCCC';\n\n/* POINT RADIUS */\nexport const MIN_RADIUS = 1;\nexport const MAX_RADIUS = 100;\nexport const NONE = 'none';","export const dimConf = {\n  data: {\n    id: 'data',\n    value: 'data',\n    param: 'dx',\n    dimensionName: 'dx',\n    objectName: 'dx'\n  },\n  category: {\n    name: 'categories',\n    dimensionName: 'co',\n    objectName: 'co'\n  },\n  indicator: {\n    id: 'indicator',\n    value: 'indicators',\n    param: 'in',\n    dimensionName: 'dx',\n    objectName: 'in',\n    itemType: 'INDICATOR'\n  },\n  dataElement: {\n    id: 'dataElement',\n    value: 'dataElement',\n    param: 'de',\n    dimensionName: 'dx',\n    objectName: 'de',\n    itemType: 'DATA_ELEMENT' // AGGREGATE_DATA_ELEMENT\n  },\n\n  operand: {\n    id: 'operand',\n    value: 'operand',\n    param: 'dc',\n    dimensionName: 'dx',\n    objectName: 'dc',\n    itemType: 'DATA_ELEMENT_OPERAND'\n  },\n  dataSet: {\n    value: 'dataSets',\n    dimensionName: 'dx',\n    objectName: 'ds',\n    itemType: 'DATA_SET'\n  },\n  eventDataItem: {\n    value: 'eventDataItem',\n    dimensionName: 'dx',\n    objectName: 'di'\n  },\n  programDataElement: {\n    value: 'programDataElement',\n    dimensionName: 'dx',\n    objectName: 'di',\n    itemType: 'PROGRAM_DATA_ELEMENT'\n  },\n  programAttribute: {\n    value: 'programAttribute',\n    dimensionName: 'dx',\n    objectName: 'di',\n    itemType: 'PROGRAM_ATTRIBUTE'\n  },\n  programIndicator: {\n    value: 'programIndicator',\n    dimensionName: 'dx',\n    objectName: 'pi',\n    itemType: 'PROGRAM_INDICATOR'\n  },\n  period: {\n    id: 'period',\n    value: 'period',\n    param: 'pe',\n    dimensionName: 'pe',\n    objectName: 'pe'\n  },\n  organisationUnit: {\n    id: 'organisationUnit',\n    value: 'organisationUnit',\n    param: 'ou',\n    dimensionName: 'ou',\n    objectName: 'ou'\n  },\n  reportingRate: {\n    value: 'reportingRate',\n    dimensionName: 'dx',\n    objectName: 'ds',\n    itemType: 'REPORTING_RATE'\n  },\n  value: {\n    id: 'value',\n    value: 'value',\n    param: 'value',\n    dimensionName: 'value',\n    objectName: 'value'\n  }\n};","import { DAILY, WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, SIXMONTHLYAPR, YEARLY, FINANCIAL, FYNOV, FYOCT, FYJUL, FYAPR } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nexport const periodGroups = [DAILY, WEEKLY, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, YEARLY, FINANCIAL];\n\n// TODO: import from @dhis2/analytics (needs to be defined)\nconst TODAY = 'TODAY';\nconst YESTERDAY = 'YESTERDAY';\nconst LAST_14_DAYS = 'LAST_14_DAYS';\nconst LAST_30_DAYS = 'LAST_30_DAYS';\nconst LAST_60_DAYS = 'LAST_60_DAYS';\nconst LAST_90_DAYS = 'LAST_90_DAYS';\nconst LAST_180_DAYS = 'LAST_180_DAYS';\nconst THIS_WEEK = 'THIS_WEEK';\nconst LAST_WEEK = 'LAST_WEEK';\nconst LAST_52_WEEKS = 'LAST_52_WEEKS';\nconst WEEKS_THIS_YEAR = 'WEEKS_THIS_YEAR';\nconst THIS_BIWEEK = 'THIS_BIWEEK';\nconst LAST_BIWEEK = 'LAST_BIWEEK';\nconst THIS_MONTH = 'THIS_MONTH';\nconst LAST_MONTH = 'LAST_MONTH';\nconst THIS_BIMONTH = 'THIS_BIMONTH';\nconst LAST_BIMONTH = 'LAST_BIMONTH';\nconst THIS_QUARTER = 'THIS_QUARTER';\nconst LAST_QUARTER = 'LAST_QUARTER';\nconst THIS_YEAR = 'THIS_YEAR';\nconst LAST_YEAR = 'LAST_YEAR';\nconst THIS_FINANCIAL_YEAR = 'THIS_FINANCIAL_YEAR';\nconst LAST_FINANCIAL_YEAR = 'LAST_FINANCIAL_YEAR';\nexport const RELATIVE_PERIODS = 'RELATIVE_PERIODS';\nexport const START_END_DATES = 'START_END_DATES';\nexport const periodTypes = () => [{\n  id: RELATIVE_PERIODS,\n  name: i18n.t('Relative')\n}, {\n  id: DAILY,\n  name: i18n.t('Daily'),\n  group: DAILY\n}, {\n  id: WEEKLY,\n  name: i18n.t('Weekly'),\n  group: WEEKLY\n}, {\n  id: WEEKLYWED,\n  name: i18n.t('Weekly (Start Wednesday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYTHU,\n  name: i18n.t('Weekly (Start Thursday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYSAT,\n  name: i18n.t('Weekly (Start Saturday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYSUN,\n  name: i18n.t('Weekly (Start Sunday)'),\n  group: WEEKLY\n}, {\n  id: BIWEEKLY,\n  name: i18n.t('Bi-weekly'),\n  group: BIWEEKLY\n}, {\n  id: MONTHLY,\n  name: i18n.t('Monthly'),\n  group: MONTHLY\n}, {\n  id: BIMONTHLY,\n  name: i18n.t('Bi-monthly'),\n  group: BIMONTHLY\n}, {\n  id: QUARTERLY,\n  name: i18n.t('Quarterly'),\n  group: QUARTERLY\n}, {\n  id: SIXMONTHLY,\n  name: i18n.t('Six-monthly'),\n  group: SIXMONTHLY\n}, {\n  id: SIXMONTHLYAPR,\n  name: i18n.t('Six-monthly April'),\n  group: SIXMONTHLY\n}, {\n  id: YEARLY,\n  name: i18n.t('Yearly'),\n  group: YEARLY\n}, {\n  id: FYNOV,\n  name: i18n.t('Financial year (Start November)'),\n  group: FINANCIAL\n}, {\n  id: FYOCT,\n  name: i18n.t('Financial year (Start October)'),\n  group: FINANCIAL\n}, {\n  id: FYJUL,\n  name: i18n.t('Financial year (Start July)'),\n  group: FINANCIAL\n}, {\n  id: FYAPR,\n  name: i18n.t('Financial year (Start April)'),\n  group: FINANCIAL\n}, {\n  id: START_END_DATES,\n  name: i18n.t('Start/end dates')\n}];\n\n// Periods that will only produce a single map (not for timeline/split view)\nexport const singleMapPeriods = [TODAY, YESTERDAY, THIS_WEEK, LAST_WEEK, THIS_BIWEEK, LAST_BIWEEK, THIS_MONTH, LAST_MONTH, THIS_BIMONTH, LAST_BIMONTH, THIS_QUARTER, LAST_QUARTER, THIS_YEAR, LAST_YEAR, THIS_FINANCIAL_YEAR, LAST_FINANCIAL_YEAR];\n\n// Periods not supported for split view (maximum 12 maps)\nexport const invalidSplitViewPeriods = [LAST_14_DAYS, LAST_30_DAYS, LAST_60_DAYS, LAST_90_DAYS, LAST_180_DAYS, LAST_52_WEEKS, WEEKS_THIS_YEAR];","import { getFixedPeriodsOptionsById, getRelativePeriodsOptionsById } from '@dhis2/analytics';\nimport { periodTypes, periodGroups } from '../constants/periods.js';\nconst getYearOffsetFromNow = year => year - new Date(Date.now()).getFullYear();\nexport const getPeriodTypes = function () {\n  let hiddenPeriods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return periodTypes().filter(_ref => {\n    let {\n      group\n    } = _ref;\n    return !hiddenPeriods.includes(group);\n  });\n};\nexport const getFixedPeriodsByType = (periodType, year) => {\n  const period = getFixedPeriodsOptionsById(periodType);\n  const offset = getYearOffsetFromNow(year);\n  const reversePeriods = true;\n  return period ? period.getPeriods({\n    offset,\n    reversePeriods\n  }) : null;\n};\nexport const getRelativePeriods = function () {\n  let hiddenPeriods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return periodGroups.filter(id => !hiddenPeriods.includes(id)).map(id => getRelativePeriodsOptionsById(id).getPeriods()).flat();\n};\nexport const isPeriodAvailable = (id, hiddenPeriods) => !!getRelativePeriods(hiddenPeriods).find(p => p.id === id);\n\n// All period names\nexport const getPeriodNames = () => ({\n  ...getPeriodTypes().reduce((obj, _ref2) => {\n    let {\n      id,\n      name\n    } = _ref2;\n    obj[id] = name;\n    return obj;\n  }, {}),\n  ...getRelativePeriods().reduce((obj, _ref3) => {\n    let {\n      id,\n      name\n    } = _ref3;\n    obj[id] = name;\n    return obj;\n  }, {})\n});\nexport const filterFuturePeriods = periods => {\n  const now = new Date(Date.now());\n  return periods.filter(_ref4 => {\n    let {\n      startDate\n    } = _ref4;\n    return new Date(startDate) < now;\n  });\n};","import i18n from '@dhis2/d2-i18n';\nimport { isValidUid } from 'd2/uid';\nimport { sortBy } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nimport { RENDERING_STRATEGY_TIMELINE, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../constants/layers.js';\nimport { getPeriodNames } from './periods.js';\n\n/* DIMENSIONS */\n\nconst createDimension = (dimension, items, props) => ({\n  dimension,\n  items,\n  ...props\n});\nconst getDimension = (dimension, arr) => arr.filter(item => item.dimension === dimension)[0];\nconst getDimensionItems = (dimension, arr) => {\n  const dataItems = getDimension(dimension, arr);\n  return dataItems && dataItems.items ? dataItems.items : [];\n};\n\n/* DATA ITEM */\n\nexport const getDataItemFromColumns = function () {\n  let columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('dx', columns)[0];\n};\nexport const setDataItemInColumns = (dataItem, dimension) => {\n  const dim = dimConf[dimension];\n  return dim ? [createDimension(dim.dimensionName, [{\n    id: dataItem.id + (dimension === 'reportingRate' ? '.REPORTING_RATE' : ''),\n    name: dataItem.name,\n    dimensionItemType: dim.itemType,\n    legendSet: dataItem.legendSet // TODO: Keep outside of columns?\n  }], {\n    objectName: dim.objectName\n  })] : [];\n};\n\n/* ORGANISATION UNIT */\n\nexport const getOrgUnitsFromRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('ou', rows) || [];\n};\n\n/* ORGANISATION UNIT NODES */\n\nconst isOrgUnitNode = ou => isValidUid(ou.id);\nexport const getOrgUnitNodesFromRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getOrgUnitsFromRows(rows).filter(isOrgUnitNode);\n};\n\n/* ORGANISATION UNIT PATH */\n// Set organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const setOrgUnitPathInRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let id = arguments.length > 1 ? arguments[1] : undefined;\n  let path = arguments.length > 2 ? arguments[2] : undefined;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const orgUnit = orgUnits.find(ou => ou.id === id);\n  return [createDimension('ou', [...orgUnits.filter(ou => ou.id !== id), {\n    ...orgUnit,\n    path\n  }])];\n};\n\n/* PERIODS */\n\nexport const getPeriodFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('pe', filters)[0];\n};\nexport const removePeriodFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return [...filters.filter(f => f.dimension !== 'pe')];\n};\nexport const getPeriodNameFromId = id => getPeriodNames()[id];\nexport const setFiltersFromPeriod = (filters, period) => [...removePeriodFromFilters(filters), createDimension('pe', [{\n  ...period\n}])];\n\n/* DYNAMIC DIMENSION FILTERS */\n\nexport const getDimensionsFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filters.filter(d => isValidUid(d.dimension) || d.dimension === null);\n};\nexport const getValidDimensionsFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filters.filter(d => isValidUid(d.dimension) && d.items && d.items.length);\n};\nexport const removeDimensionFromFilters = (filters, index) => {\n  const dimensions = getDimensionsFromFilters(filters);\n  if (!dimensions || !dimensions[index]) {\n    return filters;\n  }\n  return [...filters.filter(f => f.dimension === 'pe'), ...dimensions.filter((d, i) => i !== index)];\n};\nexport const changeDimensionInFilters = (filters, index, filter) => {\n  const dimensions = getDimensionsFromFilters(filters);\n  if (!dimensions || !dimensions[index]) {\n    return filters;\n  }\n  dimensions[index] = filter;\n  return [...filters.filter(f => f.dimension === 'pe'), ...dimensions];\n};\n\n/* FILTERS */\n\nexport const getFiltersFromColumns = function () {\n  let columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const filters = columns.filter(item => item.filter);\n  return filters.length ? filters : null;\n};\n\n// Returns list of filters in a readable format\nexport const getFiltersAsText = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let names = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return filters.map(_ref => {\n    let {\n      dimension,\n      filter\n    } = _ref;\n    const [operator, value] = filter.split(':');\n    const filterName = names[dimension];\n    const filterOperator = getFilterOperatorAsText(operator, value);\n    const filterValue = getFilterValueName(value, operator, names);\n    return `${filterName} ${filterOperator} ${filterValue}`;\n  });\n};\n\n// Returns filter operator in a readable format\nexport const getFilterOperatorAsText = (operator, value) => {\n  // If only one value, use is / is not\n  if (!value.includes(';')) {\n    if (operator === 'IN') {\n      return i18n.t('is');\n    } else if (operator === '!IN') {\n      return i18n.t('is not');\n    }\n  }\n  return {\n    EQ: '=',\n    GT: '>',\n    GE: '>=',\n    LT: '<',\n    LE: '<=',\n    NE: '!=',\n    IN: i18n.t('one of'),\n    '!IN': i18n.t('not one of'),\n    LIKE: i18n.t('contains'),\n    '!LIKE': i18n.t(\"doesn't contains\")\n  }[operator];\n};\n\n// Returns filter value is a readable fromat\nexport const getFilterValueName = (value, operator, names) => {\n  if (operator === 'IN') {\n    if (value === '1') {\n      return i18n.t('true');\n    } else if (value === '0') {\n      return i18n.t('false');\n    }\n  }\n  return value.split(';').map(val => names[val] || val).join(', ');\n};\n\n// Combine data items into one array and exclude certain value types\n/* eslint-disable max-params */\nexport const combineDataItems = function () {\n  let dataItemsA = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let dataItemsB = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let includeTypes = arguments.length > 2 ? arguments[2] : undefined;\n  let excludeTypes = arguments.length > 3 ? arguments[3] : undefined;\n  return sortBy('name', [...dataItemsA, ...dataItemsB].filter(item => (!includeTypes || includeTypes.includes(item.valueType)) && (!excludeTypes || !excludeTypes.includes(item.valueType))));\n};\n\n/* eslint-enable max-params */\n\n// TODO: This is VERY expensive because metaData.items can have 100000+ elements.  Consider removing.\n// Builds an object with key/names pairs from an API response\nexport const getApiResponseNames = _ref2 => {\n  let {\n    metaData,\n    headers\n  } = _ref2;\n  return {\n    ...Object.keys(metaData.items).reduce((names, key) => ({\n      ...names,\n      [key]: metaData.items[key].name\n    }), {}),\n    ...headers.reduce((names, header) => ({\n      ...names,\n      [header.name]: header.column\n    }), {}),\n    true: i18n.t('Yes'),\n    false: i18n.t('No')\n  };\n};\n\n// Returns the rendering strategy used\nexport const getRenderingStrategy = _ref3 => {\n  let {\n    mapViews\n  } = _ref3;\n  if (Array.isArray(mapViews)) {\n    if (mapViews.some(view => view.renderingStrategy === RENDERING_STRATEGY_TIMELINE)) {\n      return 'timeline';\n    } else if (mapViews.some(view => view.renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD)) {\n      return 'split-by-period';\n    }\n  }\n  return 'single';\n};","import { isNil, omitBy, pick, isObject, omit } from 'lodash/fp';\nimport { EARTH_ENGINE_LAYER, TRACKED_ENTITY_LAYER } from '../constants/layers.js';\n\n// TODO: get latitude, longitude, zoom from map + basemap: 'none'\nconst validMapProperties = ['basemap', 'id', 'latitude', 'longitude', 'mapViews', 'name', 'description', 'user', 'zoom', 'publicAccess', 'created', 'lastUpdated'];\nconst validLayerProperties = ['aggregationType', 'areaRadius', 'band', 'classes', 'colorHigh',\n// Deprecated\n'colorLow',\n// Deprecated\n'colorScale', 'columns', 'config', 'created', 'datasetId', 'displayName', 'endDate', 'eventCoordinateField', 'eventClustering', 'eventPointColor', 'eventPointRadius', 'eventStatus', 'filter', 'filters', 'followUp', 'id', 'labels', 'labelFontSize', 'labelFontStyle', 'labelFontWeight', 'labelFontColor', 'labelTemplate', 'lastUpdated', 'layer', 'legendSet', 'method', 'name', 'noDataColor', 'opacity', 'organisationUnitColor', 'organisationUnitGroupSet', 'organisationUnitSelectionMode', 'orgUnitField', 'orgUnitFieldDisplayName', 'params', 'periodName', 'periodType', 'renderingStrategy', 'program', 'programStage', 'programStatus', 'radiusHigh', 'radiusLow', 'rows', 'serverCluster', 'startDate', 'styleDataItem', 'thematicMapType', 'trackedEntityType', 'valueType', 'relationshipType', 'relatedPointColor', 'relatedPointRadius', 'relationshipLineColor', 'relationshipOutsideProgram'];\nconst models = ['program', 'programStage', 'organisationUnitGroupSet'];\nconst validModelProperties = ['id', 'name', 'dimensionType', 'dimensionItemType'];\nexport const cleanMapConfig = _ref => {\n  let {\n    config,\n    defaultBasemapId\n  } = _ref;\n  return {\n    ...omitBy(isNil, pick(validMapProperties, config)),\n    basemap: getBasemapString(config.basemap, defaultBasemapId),\n    mapViews: config.mapViews.map(cleanLayerConfig)\n  };\n};\nconst getBasemapString = (basemap, defaultBasemapId) => {\n  if (!basemap) {\n    return defaultBasemapId;\n  }\n  if (basemap.isVisible === false) {\n    return 'none';\n  }\n  return basemap.id || defaultBasemapId;\n};\nconst cleanLayerConfig = config => ({\n  ...models2objects(pick(validLayerProperties, config))\n});\n\n// TODO: This feels hacky, find better way to clean map configs before saving\nconst models2objects = config => {\n  const {\n    layer\n  } = config;\n  Object.keys(config).forEach(key => {\n    config[key] = models.includes(key) ? pick(validModelProperties, config[key]) : config[key];\n  });\n  if (config.rows) {\n    config.rows = config.rows.map(cleanDimension);\n  }\n  if (layer === EARTH_ENGINE_LAYER) {\n    const {\n      datasetId: id,\n      band,\n      params,\n      aggregationType,\n      filter\n    } = config;\n    const eeConfig = {\n      id,\n      params,\n      band,\n      aggregationType,\n      filter\n    };\n\n    // Removes undefined keys before stringify\n    Object.keys(eeConfig).forEach(key => eeConfig[key] === undefined && delete eeConfig[key]);\n    config.config = JSON.stringify(eeConfig);\n    delete config.datasetId;\n    delete config.params;\n    delete config.filter;\n    delete config.filters;\n    delete config.periodType;\n    delete config.periodName;\n    delete config.aggregationType;\n    delete config.band;\n  } else if (layer === TRACKED_ENTITY_LAYER) {\n    config.config = JSON.stringify({\n      relationships: config.relationshipType ? {\n        type: config.relationshipType,\n        pointColor: config.relatedPointColor,\n        pointRadius: config.relatedPointRadius,\n        lineColor: config.relationshipLineColor,\n        relationshipOutsideProgram: config.relationshipOutsideProgram\n      } : null,\n      periodType: config.periodType\n    });\n    delete config.relationshipType;\n    delete config.relatedPointColor;\n    delete config.relatedPointRadius;\n    delete config.relationshipLineColor;\n    delete config.relationshipOutsideProgram;\n    delete config.periodType;\n  }\n  if (isObject(config.config)) {\n    config.config = JSON.stringify(config.config); // External overlay\n  }\n\n  if (config.styleDataItem) {\n    // Remove legendSet from styleDataItem as this is stored in a separate property\n    // Remove names as these can be translated and will be fetched on layer load\n    config.styleDataItem = omit(['legendSet', 'name', 'optionSet.name'], config.styleDataItem);\n    if (config.styleDataItem.optionSet) {\n      // Remove name and code from options as these are not persistent\n      config.styleDataItem.optionSet.options.forEach(option => {\n        delete option.name;\n        delete option.code;\n      });\n    }\n  }\n  return config;\n};\nexport const cleanDimension = dim => ({\n  ...dim,\n  items: dim.items.map(item => pick(validModelProperties, item))\n});","export const formatCount = count => {\n  let num;\n  if (count >= 1000 && count < 9500) {\n    num = (count / 1000).toFixed(1) + 'k'; // 3.3k\n  } else if (count >= 9500 && count < 999500) {\n    num = Math.round(count / 1000) + 'k'; // 33k\n  } else if (count >= 999500 && count < 1950000) {\n    num = (count / 1000000).toFixed(1) + 'M'; // 3.3M\n  } else if (count > 1950000) {\n    num = Math.round(count / 1000000) + 'M'; // 33M\n  }\n\n  return num || count;\n};\n\n// Rounds a number to d decimals\nexport const numberPrecision = d => {\n  if (d === undefined) {\n    return n => n;\n  }\n  const m = Math.pow(10, d);\n  return n => Math.round(n * m) / m;\n};","// Utils for thematic mapping\nimport { precisionRound } from 'd3-format';\nimport { CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS } from '../constants/layers.js';\nimport { numberPrecision } from './numbers.js';\n\n// Returns legend item where a value belongs\nexport const getLegendItemForValue = (legendItems, value) => {\n  const isLast = index => index === legendItems.length - 1;\n  return legendItems.find((item, index) => value >= item.startValue && (value < item.endValue || isLast(index) && value == item.endValue));\n};\nexport const getLegendItems = (values, method, numClasses) => {\n  const minValue = values[0];\n  const maxValue = values[values.length - 1];\n  let bins;\n  if (method === CLASSIFICATION_EQUAL_INTERVALS) {\n    bins = getEqualIntervals(minValue, maxValue, numClasses);\n  } else if (method === CLASSIFICATION_EQUAL_COUNTS) {\n    bins = getQuantiles(values, numClasses);\n  }\n  return bins;\n};\nexport const getClassBins = (values, method, numClasses) => {\n  const minValue = values[0];\n  const maxValue = values[values.length - 1];\n  let bins;\n  if (method === CLASSIFICATION_EQUAL_INTERVALS) {\n    bins = getEqualIntervals(minValue, maxValue, numClasses);\n  } else if (method === CLASSIFICATION_EQUAL_COUNTS) {\n    bins = getQuantiles(values, numClasses);\n  }\n  return bins;\n};\nexport const getEqualIntervals = (minValue, maxValue, numClasses) => {\n  const bins = [];\n  const binSize = (maxValue - minValue) / numClasses;\n  const precision = precisionRound(binSize, maxValue);\n  const valueFormat = numberPrecision(precision);\n  for (let i = 0; i < numClasses; i++) {\n    const startValue = minValue + i * binSize;\n    const endValue = i < numClasses - 1 ? startValue + binSize : maxValue;\n    bins.push({\n      startValue: valueFormat(startValue),\n      endValue: valueFormat(endValue)\n    });\n  }\n  return bins;\n};\nexport const getQuantiles = (values, numClasses) => {\n  const minValue = values[0];\n  const maxValue = values[values.length - 1];\n  const bins = [];\n  const binCount = values.length / numClasses;\n  const precision = precisionRound((maxValue - minValue) / numClasses, maxValue);\n  const valueFormat = numberPrecision(precision);\n  let binLastValPos = binCount === 0 ? 0 : binCount;\n  if (values.length > 0) {\n    bins[0] = minValue;\n    for (let i = 1; i < numClasses; i++) {\n      bins[i] = values[Math.round(binLastValPos)];\n      binLastValPos += binCount;\n    }\n  }\n\n  // bin can be undefined if few values\n  return bins.filter(bin => bin !== undefined).map((value, index) => ({\n    startValue: valueFormat(value),\n    endValue: valueFormat(bins[index + 1] || maxValue)\n  }));\n};","// This product includes color specifications and designs developed by Cynthia Brewer (http://colorbrewer.org/).\n// Please see license at http://colorbrewer.org/export/LICENSE.txt\nexport default {\n  YlGn: {\n    3: ['#f7fcb9', '#addd8e', '#31a354'],\n    4: ['#ffffcc', '#c2e699', '#78c679', '#238443'],\n    5: ['#ffffcc', '#c2e699', '#78c679', '#31a354', '#006837'],\n    6: ['#ffffcc', '#d9f0a3', '#addd8e', '#78c679', '#31a354', '#006837'],\n    7: ['#ffffcc', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#005a32'],\n    8: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#005a32'],\n    9: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529']\n  },\n  YlGnBu: {\n    3: ['#edf8b1', '#7fcdbb', '#2c7fb8'],\n    4: ['#ffffcc', '#a1dab4', '#41b6c4', '#225ea8'],\n    5: ['#ffffcc', '#a1dab4', '#41b6c4', '#2c7fb8', '#253494'],\n    6: ['#ffffcc', '#c7e9b4', '#7fcdbb', '#41b6c4', '#2c7fb8', '#253494'],\n    7: ['#ffffcc', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],\n    8: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],\n    9: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58']\n  },\n  GnBu: {\n    3: ['#e0f3db', '#a8ddb5', '#43a2ca'],\n    4: ['#f0f9e8', '#bae4bc', '#7bccc4', '#2b8cbe'],\n    5: ['#f0f9e8', '#bae4bc', '#7bccc4', '#43a2ca', '#0868ac'],\n    6: ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#43a2ca', '#0868ac'],\n    7: ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],\n    8: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],\n    9: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081']\n  },\n  BuGn: {\n    3: ['#e5f5f9', '#99d8c9', '#2ca25f'],\n    4: ['#edf8fb', '#b2e2e2', '#66c2a4', '#238b45'],\n    5: ['#edf8fb', '#b2e2e2', '#66c2a4', '#2ca25f', '#006d2c'],\n    6: ['#edf8fb', '#ccece6', '#99d8c9', '#66c2a4', '#2ca25f', '#006d2c'],\n    7: ['#edf8fb', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#005824'],\n    8: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#005824'],\n    9: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b']\n  },\n  PuBuGn: {\n    3: ['#ece2f0', '#a6bddb', '#1c9099'],\n    4: ['#f6eff7', '#bdc9e1', '#67a9cf', '#02818a'],\n    5: ['#f6eff7', '#bdc9e1', '#67a9cf', '#1c9099', '#016c59'],\n    6: ['#f6eff7', '#d0d1e6', '#a6bddb', '#67a9cf', '#1c9099', '#016c59'],\n    7: ['#f6eff7', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016450'],\n    8: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016450'],\n    9: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636']\n  },\n  PuBu: {\n    3: ['#ece7f2', '#a6bddb', '#2b8cbe'],\n    4: ['#f1eef6', '#bdc9e1', '#74a9cf', '#0570b0'],\n    5: ['#f1eef6', '#bdc9e1', '#74a9cf', '#2b8cbe', '#045a8d'],\n    6: ['#f1eef6', '#d0d1e6', '#a6bddb', '#74a9cf', '#2b8cbe', '#045a8d'],\n    7: ['#f1eef6', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#034e7b'],\n    8: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#034e7b'],\n    9: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858']\n  },\n  BuPu: {\n    3: ['#e0ecf4', '#9ebcda', '#8856a7'],\n    4: ['#edf8fb', '#b3cde3', '#8c96c6', '#88419d'],\n    5: ['#edf8fb', '#b3cde3', '#8c96c6', '#8856a7', '#810f7c'],\n    6: ['#edf8fb', '#bfd3e6', '#9ebcda', '#8c96c6', '#8856a7', '#810f7c'],\n    7: ['#edf8fb', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#6e016b'],\n    8: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#6e016b'],\n    9: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b']\n  },\n  RdPu: {\n    3: ['#fde0dd', '#fa9fb5', '#c51b8a'],\n    4: ['#feebe2', '#fbb4b9', '#f768a1', '#ae017e'],\n    5: ['#feebe2', '#fbb4b9', '#f768a1', '#c51b8a', '#7a0177'],\n    6: ['#feebe2', '#fcc5c0', '#fa9fb5', '#f768a1', '#c51b8a', '#7a0177'],\n    7: ['#feebe2', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177'],\n    8: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177'],\n    9: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a']\n  },\n  PuRd: {\n    3: ['#e7e1ef', '#c994c7', '#dd1c77'],\n    4: ['#f1eef6', '#d7b5d8', '#df65b0', '#ce1256'],\n    5: ['#f1eef6', '#d7b5d8', '#df65b0', '#dd1c77', '#980043'],\n    6: ['#f1eef6', '#d4b9da', '#c994c7', '#df65b0', '#dd1c77', '#980043'],\n    7: ['#f1eef6', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#91003f'],\n    8: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#91003f'],\n    9: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f']\n  },\n  OrRd: {\n    3: ['#fee8c8', '#fdbb84', '#e34a33'],\n    4: ['#fef0d9', '#fdcc8a', '#fc8d59', '#d7301f'],\n    5: ['#fef0d9', '#fdcc8a', '#fc8d59', '#e34a33', '#b30000'],\n    6: ['#fef0d9', '#fdd49e', '#fdbb84', '#fc8d59', '#e34a33', '#b30000'],\n    7: ['#fef0d9', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#990000'],\n    8: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#990000'],\n    9: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000']\n  },\n  YlOrRd: {\n    3: ['#ffeda0', '#feb24c', '#f03b20'],\n    4: ['#ffffb2', '#fecc5c', '#fd8d3c', '#e31a1c'],\n    5: ['#ffffb2', '#fecc5c', '#fd8d3c', '#f03b20', '#bd0026'],\n    6: ['#ffffb2', '#fed976', '#feb24c', '#fd8d3c', '#f03b20', '#bd0026'],\n    7: ['#ffffb2', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#b10026'],\n    8: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#b10026'],\n    9: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026']\n  },\n  YlOrBr: {\n    3: ['#fff7bc', '#fec44f', '#d95f0e'],\n    4: ['#ffffd4', '#fed98e', '#fe9929', '#cc4c02'],\n    5: ['#ffffd4', '#fed98e', '#fe9929', '#d95f0e', '#993404'],\n    6: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#d95f0e', '#993404'],\n    7: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#8c2d04'],\n    8: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#8c2d04'],\n    9: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506']\n  },\n  Purples: {\n    3: ['#efedf5', '#bcbddc', '#756bb1'],\n    4: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#6a51a3'],\n    5: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#756bb1', '#54278f'],\n    6: ['#f2f0f7', '#dadaeb', '#bcbddc', '#9e9ac8', '#756bb1', '#54278f'],\n    7: ['#f2f0f7', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#4a1486'],\n    8: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#4a1486'],\n    9: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d']\n  },\n  Blues: {\n    3: ['#deebf7', '#9ecae1', '#3182bd'],\n    4: ['#eff3ff', '#bdd7e7', '#6baed6', '#2171b5'],\n    5: ['#eff3ff', '#bdd7e7', '#6baed6', '#3182bd', '#08519c'],\n    6: ['#eff3ff', '#c6dbef', '#9ecae1', '#6baed6', '#3182bd', '#08519c'],\n    7: ['#eff3ff', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#084594'],\n    8: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#084594'],\n    9: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b']\n  },\n  Greens: {\n    3: ['#e5f5e0', '#a1d99b', '#31a354'],\n    4: ['#edf8e9', '#bae4b3', '#74c476', '#238b45'],\n    5: ['#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c'],\n    6: ['#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#31a354', '#006d2c'],\n    7: ['#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32'],\n    8: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32'],\n    9: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b']\n  },\n  Oranges: {\n    3: ['#fee6ce', '#fdae6b', '#e6550d'],\n    4: ['#feedde', '#fdbe85', '#fd8d3c', '#d94701'],\n    5: ['#feedde', '#fdbe85', '#fd8d3c', '#e6550d', '#a63603'],\n    6: ['#feedde', '#fdd0a2', '#fdae6b', '#fd8d3c', '#e6550d', '#a63603'],\n    7: ['#feedde', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#8c2d04'],\n    8: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#8c2d04'],\n    9: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704']\n  },\n  Reds: {\n    3: ['#fee0d2', '#fc9272', '#de2d26'],\n    4: ['#fee5d9', '#fcae91', '#fb6a4a', '#cb181d'],\n    5: ['#fee5d9', '#fcae91', '#fb6a4a', '#de2d26', '#a50f15'],\n    6: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#de2d26', '#a50f15'],\n    7: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#99000d'],\n    8: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#99000d'],\n    9: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d']\n  },\n  Greys: {\n    3: ['#f0f0f0', '#bdbdbd', '#636363'],\n    4: ['#f7f7f7', '#cccccc', '#969696', '#525252'],\n    5: ['#f7f7f7', '#cccccc', '#969696', '#636363', '#252525'],\n    6: ['#f7f7f7', '#d9d9d9', '#bdbdbd', '#969696', '#636363', '#252525'],\n    7: ['#f7f7f7', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525'],\n    8: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525'],\n    9: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000']\n  },\n  PuOr: {\n    3: ['#f1a340', '#f7f7f7', '#998ec3'],\n    4: ['#e66101', '#fdb863', '#b2abd2', '#5e3c99'],\n    5: ['#e66101', '#fdb863', '#f7f7f7', '#b2abd2', '#5e3c99'],\n    6: ['#b35806', '#f1a340', '#fee0b6', '#d8daeb', '#998ec3', '#542788'],\n    7: ['#b35806', '#f1a340', '#fee0b6', '#f7f7f7', '#d8daeb', '#998ec3', '#542788'],\n    8: ['#b35806', '#e08214', '#fdb863', '#fee0b6', '#d8daeb', '#b2abd2', '#8073ac', '#542788'],\n    9: ['#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788'],\n    10: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    11: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b']\n  },\n  BrBG: {\n    3: ['#d8b365', '#f5f5f5', '#5ab4ac'],\n    4: ['#a6611a', '#dfc27d', '#80cdc1', '#018571'],\n    5: ['#a6611a', '#dfc27d', '#f5f5f5', '#80cdc1', '#018571'],\n    6: ['#8c510a', '#d8b365', '#f6e8c3', '#c7eae5', '#5ab4ac', '#01665e'],\n    7: ['#8c510a', '#d8b365', '#f6e8c3', '#f5f5f5', '#c7eae5', '#5ab4ac', '#01665e'],\n    8: ['#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#c7eae5', '#80cdc1', '#35978f', '#01665e'],\n    9: ['#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e'],\n    10: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    11: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30']\n  },\n  PRGn: {\n    3: ['#af8dc3', '#f7f7f7', '#7fbf7b'],\n    4: ['#7b3294', '#c2a5cf', '#a6dba0', '#008837'],\n    5: ['#7b3294', '#c2a5cf', '#f7f7f7', '#a6dba0', '#008837'],\n    6: ['#762a83', '#af8dc3', '#e7d4e8', '#d9f0d3', '#7fbf7b', '#1b7837'],\n    7: ['#762a83', '#af8dc3', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#7fbf7b', '#1b7837'],\n    8: ['#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837'],\n    9: ['#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837'],\n    10: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    11: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b']\n  },\n  PiYG: {\n    3: ['#e9a3c9', '#f7f7f7', '#a1d76a'],\n    4: ['#d01c8b', '#f1b6da', '#b8e186', '#4dac26'],\n    5: ['#d01c8b', '#f1b6da', '#f7f7f7', '#b8e186', '#4dac26'],\n    6: ['#c51b7d', '#e9a3c9', '#fde0ef', '#e6f5d0', '#a1d76a', '#4d9221'],\n    7: ['#c51b7d', '#e9a3c9', '#fde0ef', '#f7f7f7', '#e6f5d0', '#a1d76a', '#4d9221'],\n    8: ['#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221'],\n    9: ['#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221'],\n    10: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    11: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419']\n  },\n  RdBu: {\n    3: ['#ef8a62', '#f7f7f7', '#67a9cf'],\n    4: ['#ca0020', '#f4a582', '#92c5de', '#0571b0'],\n    5: ['#ca0020', '#f4a582', '#f7f7f7', '#92c5de', '#0571b0'],\n    6: ['#b2182b', '#ef8a62', '#fddbc7', '#d1e5f0', '#67a9cf', '#2166ac'],\n    7: ['#b2182b', '#ef8a62', '#fddbc7', '#f7f7f7', '#d1e5f0', '#67a9cf', '#2166ac'],\n    8: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac'],\n    9: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac'],\n    10: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    11: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061']\n  },\n  RdGy: {\n    3: ['#ef8a62', '#ffffff', '#999999'],\n    4: ['#ca0020', '#f4a582', '#bababa', '#404040'],\n    5: ['#ca0020', '#f4a582', '#ffffff', '#bababa', '#404040'],\n    6: ['#b2182b', '#ef8a62', '#fddbc7', '#e0e0e0', '#999999', '#4d4d4d'],\n    7: ['#b2182b', '#ef8a62', '#fddbc7', '#ffffff', '#e0e0e0', '#999999', '#4d4d4d'],\n    8: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#e0e0e0', '#bababa', '#878787', '#4d4d4d'],\n    9: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d'],\n    10: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    11: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a']\n  },\n  RdYlBu: {\n    3: ['#fc8d59', '#ffffbf', '#91bfdb'],\n    4: ['#d7191c', '#fdae61', '#abd9e9', '#2c7bb6'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#abd9e9', '#2c7bb6'],\n    6: ['#d73027', '#fc8d59', '#fee090', '#e0f3f8', '#91bfdb', '#4575b4'],\n    7: ['#d73027', '#fc8d59', '#fee090', '#ffffbf', '#e0f3f8', '#91bfdb', '#4575b4'],\n    8: ['#d73027', '#f46d43', '#fdae61', '#fee090', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4'],\n    9: ['#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4'],\n    10: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    11: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695']\n  },\n  Spectral: {\n    3: ['#fc8d59', '#ffffbf', '#99d594'],\n    4: ['#d7191c', '#fdae61', '#abdda4', '#2b83ba'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#abdda4', '#2b83ba'],\n    6: ['#d53e4f', '#fc8d59', '#fee08b', '#e6f598', '#99d594', '#3288bd'],\n    7: ['#d53e4f', '#fc8d59', '#fee08b', '#ffffbf', '#e6f598', '#99d594', '#3288bd'],\n    8: ['#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd'],\n    9: ['#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd'],\n    10: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    11: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2']\n  },\n  RdYlGn: {\n    3: ['#fc8d59', '#ffffbf', '#91cf60'],\n    4: ['#d7191c', '#fdae61', '#a6d96a', '#1a9641'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#a6d96a', '#1a9641'],\n    6: ['#d73027', '#fc8d59', '#fee08b', '#d9ef8b', '#91cf60', '#1a9850'],\n    7: ['#d73027', '#fc8d59', '#fee08b', '#ffffbf', '#d9ef8b', '#91cf60', '#1a9850'],\n    8: ['#d73027', '#f46d43', '#fdae61', '#fee08b', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850'],\n    9: ['#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850'],\n    10: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    11: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837']\n  },\n  Accent: {\n    3: ['#7fc97f', '#beaed4', '#fdc086'],\n    4: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99'],\n    5: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0'],\n    6: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f'],\n    7: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17'],\n    8: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666']\n  },\n  Dark2: {\n    3: ['#1b9e77', '#d95f02', '#7570b3'],\n    4: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a'],\n    5: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e'],\n    6: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02'],\n    7: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d'],\n    8: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666']\n  },\n  Paired: {\n    3: ['#a6cee3', '#1f78b4', '#b2df8a'],\n    4: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c'],\n    5: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99'],\n    6: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c'],\n    7: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f'],\n    8: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00'],\n    9: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6'],\n    10: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a'],\n    11: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99'],\n    12: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928']\n  },\n  Pastel1: {\n    3: ['#fbb4ae', '#b3cde3', '#ccebc5'],\n    4: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4'],\n    5: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6'],\n    6: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc'],\n    7: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd'],\n    8: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec'],\n    9: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  },\n  Pastel2: {\n    3: ['#b3e2cd', '#fdcdac', '#cbd5e8'],\n    4: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4'],\n    5: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9'],\n    6: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae'],\n    7: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc'],\n    8: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc']\n  },\n  Set1: {\n    3: ['#e41a1c', '#377eb8', '#4daf4a'],\n    4: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3'],\n    5: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00'],\n    6: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33'],\n    7: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628'],\n    8: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf'],\n    9: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999']\n  },\n  Set2: {\n    3: ['#66c2a5', '#fc8d62', '#8da0cb'],\n    4: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3'],\n    5: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854'],\n    6: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f'],\n    7: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494'],\n    8: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3']\n  },\n  Set3: {\n    3: ['#8dd3c7', '#ffffb3', '#bebada'],\n    4: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072'],\n    5: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3'],\n    6: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462'],\n    7: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69'],\n    8: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5'],\n    9: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9'],\n    10: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd'],\n    11: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5'],\n    12: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f']\n  },\n  YlOrBr_reverse: {\n    3: ['#d95f0e', '#fec44f', '#fff7bc'],\n    4: ['#cc4c02', '#fe9929', '#fed98e', '#ffffd4'],\n    5: ['#993404', '#d95f0e', '#fe9929', '#fed98e', '#ffffd4'],\n    6: ['#993404', '#d95f0e', '#fe9929', '#fec44f', '#fee391', '#ffffd4'],\n    7: ['#8c2d04', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#ffffd4'],\n    8: ['#8c2d04', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#fff7bc', '#ffffe5'],\n    9: ['#662506', '#993404', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#fff7bc', '#ffffe5']\n  },\n  Reds_reverse: {\n    3: ['#de2d26', '#fc9272', '#fee0d2'],\n    4: ['#cb181d', '#fb6a4a', '#fcae91', '#fee5d9'],\n    5: ['#a50f15', '#de2d26', '#fb6a4a', '#fcae91', '#fee5d9'],\n    6: ['#a50f15', '#de2d26', '#fb6a4a', '#fc9272', '#fcbba1', '#fee5d9'],\n    7: ['#99000d', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee5d9'],\n    8: ['#99000d', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee0d2', '#fff5f0'],\n    9: ['#67000d', '#a50f15', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee0d2', '#fff5f0']\n  },\n  YlGn_reverse: {\n    3: ['#31a354', '#addd8e', '#f7fcb9'],\n    4: ['#238443', '#78c679', '#c2e699', '#ffffcc'],\n    5: ['#006837', '#31a354', '#78c679', '#c2e699', '#ffffcc'],\n    6: ['#006837', '#31a354', '#78c679', '#addd8e', '#d9f0a3', '#ffffcc'],\n    7: ['#005a32', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#ffffcc'],\n    8: ['#005a32', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#f7fcb9', '#ffffe5'],\n    9: ['#004529', '#006837', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#f7fcb9', '#ffffe5']\n  },\n  Greens_reverse: {\n    3: ['#31a354', '#a1d99b', '#e5f5e0'],\n    4: ['#238b45', '#74c476', '#bae4b3', '#edf8e9'],\n    5: ['#006d2c', '#31a354', '#74c476', '#bae4b3', '#edf8e9'],\n    6: ['#006d2c', '#31a354', '#74c476', '#a1d99b', '#c7e9c0', '#edf8e9'],\n    7: ['#005a32', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#edf8e9'],\n    8: ['#005a32', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#e5f5e0', '#f7fcf5'],\n    9: ['#00441b', '#006d2c', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#e5f5e0', '#f7fcf5']\n  },\n  Blues_reverse: {\n    3: ['#3182bd', '#9ecae1', '#deebf7'],\n    4: ['#2171b5', '#6baed6', '#bdd7e7', '#eff3ff'],\n    5: ['#08519c', '#3182bd', '#6baed6', '#bdd7e7', '#eff3ff'],\n    6: ['#08519c', '#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#eff3ff'],\n    7: ['#084594', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#eff3ff'],\n    8: ['#084594', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#deebf7', '#f7fbff'],\n    9: ['#08306b', '#08519c', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#deebf7', '#f7fbff']\n  },\n  BuPu_reverse: {\n    3: ['#8856a7', '#9ebcda', '#e0ecf4'],\n    4: ['#88419d', '#8c96c6', '#b3cde3', '#edf8fb'],\n    5: ['#810f7c', '#8856a7', '#8c96c6', '#b3cde3', '#edf8fb'],\n    6: ['#810f7c', '#8856a7', '#8c96c6', '#9ebcda', '#bfd3e6', '#edf8fb'],\n    7: ['#6e016b', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#edf8fb'],\n    8: ['#6e016b', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#e0ecf4', '#f7fcfd'],\n    9: ['#4d004b', '#810f7c', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#e0ecf4', '#f7fcfd']\n  },\n  RdPu_reverse: {\n    3: ['#c51b8a', '#fa9fb5', '#fde0dd'],\n    4: ['#ae017e', '#f768a1', '#fbb4b9', '#feebe2'],\n    5: ['#7a0177', '#c51b8a', '#f768a1', '#fbb4b9', '#feebe2'],\n    6: ['#7a0177', '#c51b8a', '#f768a1', '#fa9fb5', '#fcc5c0', '#feebe2'],\n    7: ['#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#feebe2'],\n    8: ['#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#fde0dd', '#fff7f3'],\n    9: ['#49006a', '#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#fde0dd', '#fff7f3']\n  },\n  PuRd_reverse: {\n    3: ['#dd1c77', '#c994c7', '#e7e1ef'],\n    4: ['#ce1256', '#df65b0', '#d7b5d8', '#f1eef6'],\n    5: ['#980043', '#dd1c77', '#df65b0', '#d7b5d8', '#f1eef6'],\n    6: ['#980043', '#dd1c77', '#df65b0', '#c994c7', '#d4b9da', '#f1eef6'],\n    7: ['#91003f', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#f1eef6'],\n    8: ['#91003f', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#e7e1ef', '#f7f4f9'],\n    9: ['#67001f', '#980043', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#e7e1ef', '#f7f4f9']\n  },\n  Greys_reverse: {\n    3: ['#636363', '#bdbdbd', '#f0f0f0'],\n    4: ['#525252', '#969696', '#cccccc', '#f7f7f7'],\n    5: ['#252525', '#636363', '#969696', '#cccccc', '#f7f7f7'],\n    6: ['#252525', '#636363', '#969696', '#bdbdbd', '#d9d9d9', '#f7f7f7'],\n    7: ['#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f7f7f7'],\n    8: ['#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f0f0f0', '#ffffff'],\n    9: ['#000000', '#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f0f0f0', '#ffffff']\n  }\n};","import { hcl } from 'd3-color';\nimport { isString } from 'lodash/fp';\nimport colorbrewer from '../constants/colorbrewer.js';\n\n// Allowed color scales from ColorBrewer for EE (needs to have at least 9 classes)\nexport const colorScales = ['YlOrBr', 'Reds', 'YlGn', 'Greens', 'Blues', 'BuPu', 'RdPu', 'PuRd', 'Greys', 'YlOrBr_reverse', 'Reds_reverse', 'YlGn_reverse', 'Greens_reverse', 'Blues_reverse', 'BuPu_reverse', 'RdPu_reverse', 'PuRd_reverse', 'Greys_reverse', 'PuOr', 'BrBG', 'PRGn', 'PiYG', 'RdBu', 'RdGy', 'RdYlBu', 'Spectral', 'RdYlGn', 'Paired', 'Pastel1', 'Set1', 'Set3'];\n\n// Returns a color brewer scale for a number of classes\nexport const getColorPalette = (scale, classes) => {\n  return colorbrewer[scale][classes].join(',');\n};\n\n// Returns color scale name for a palette\nexport const getColorScale = palette => {\n  const classes = palette.split(',').length;\n  return colorScales.find(name => colorbrewer[name][classes].join(',') === palette);\n};\nexport const defaultColorScaleName = 'YlOrBr';\nexport const defaultClasses = 5;\nexport const defaultColorScale = getColorPalette(defaultColorScaleName, defaultClasses);\n\n// Correct colors not adhering to the css standard (add missing #)\nexport const cssColor = color => {\n  if (!isString(color)) {\n    return color;\n  } else if (color === '##normal') {\n    // ##normal is used in old map favorites\n    return null; // Will apply default color\n  }\n\n  return (/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(color) ? '#' : '') + color;\n};\n\n// Returns an unique color (first from an array, then random but still unique)\nexport const getUniqueColor = defaultColors => {\n  const colors = [...defaultColors];\n  function randomColor() {\n    const color = '#000000'.replace(/0/g, () => (~~(Math.random() * 16)).toString(16));\n\n    // Recursive until color is unique\n    if (colors.includes(color)) {\n      return randomColor();\n    }\n    colors.push(color);\n    return color;\n  }\n  return index => colors[index] || randomColor();\n};\n\n// Returns true if a color is dark\nexport const isDarkColor = color => hcl(color).l < 70;\n\n// Returns constrasting color\nexport const getContrastColor = color => isDarkColor(color) ? '#fff' : '#000';","import { getInstance as getD2 } from 'd2';\nimport { sortBy, pick } from 'lodash/fp';\nimport { CLASSIFICATION_EQUAL_INTERVALS } from '../constants/layers.js';\nimport { getLegendItems } from '../util/classify.js';\nimport { defaultClasses, defaultColorScale } from '../util/colors.js';\nexport const loadLegendSet = async legendSet => {\n  const d2 = await getD2();\n  return d2.models.legendSet.get(legendSet.id); // TODO: Restrict loading fields\n};\n\nexport const loadDataItemLegendSet = async dataItem => {\n  const type = (dataItem.dimensionItemType || '').toLowerCase();\n  const d2 = await getD2();\n  if (!type || !d2.models[type]) {\n    return;\n  }\n  return d2.models[type].get(dataItem.id, {\n    fields: 'legendSet[id,displayName~rename(name)]'\n  }).then(model => model.legendSet);\n};\nexport const formatLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => ({\n    color: item.color,\n    name: item.name,\n    range: item.startValue + ' - ' + item.endValue\n  }));\n};\nexport const getBinsFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  const lastItem = sortedItems[sortedItems.length - 1];\n  const bins = sortedItems.map(item => item.startValue);\n  bins.push(lastItem.endValue);\n  return bins;\n};\nexport const getColorScaleFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => item.color);\n};\nexport const getLabelsFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => item.name);\n};\n\n// Returns a legend created from a pre-defined legend set\nexport const getPredefinedLegendItems = legendSet => {\n  const pickSome = pick(['name', 'startValue', 'endValue', 'color']);\n  return sortBy('startValue', legendSet.legends).map(pickSome).map(item => item.name === `${item.startValue} - ${item.endValue}` ? {\n    ...item,\n    name: ''\n  } // Clear name if same as startValue - endValue\n  : item);\n};\n\n/* eslint-disable max-params */\nexport const getAutomaticLegendItems = function (data) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : CLASSIFICATION_EQUAL_INTERVALS;\n  let classes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultClasses;\n  let colorScale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : defaultColorScale;\n  const items = data.length ? getLegendItems(data, method, classes) : [];\n  const colors = colorScale.split(',');\n  return items.map((item, index) => ({\n    ...item,\n    color: colors[index]\n  }));\n};\n/* eslint-enable max-params */","import { THEMATIC_LAYER } from '../constants/layers.js';\nimport { getPeriodNameFromId, getDimensionsFromFilters } from './analytics.js';\nimport { cleanDimension } from './favorites.js';\nimport { loadDataItemLegendSet } from './legend.js';\nexport const NAMESPACE = 'analytics';\nexport const CURRENT_AO_KEY = 'currentAnalyticalObject';\nexport const APP_URLS = {\n  CHART: 'dhis-web-data-visualizer',\n  PIVOT: 'dhis-web-pivot'\n};\n\n// Combines all dimensions in columns, rows and filters\nconst getDimensionsFromAnalyticalObject = ao => {\n  const {\n    columns = [],\n    rows = [],\n    filters = []\n  } = ao;\n  return [...columns, ...rows, ...filters];\n};\n\n// Returns the data items of the first dx dimension in an analytical object\nexport const getDataDimensionsFromAnalyticalObject = ao => {\n  const dims = getDimensionsFromAnalyticalObject(ao);\n  const dataDim = dims.find(i => i.dimension === 'dx');\n\n  // We only use the first dx dimension\n  return dataDim ? dataDim.items : [];\n};\n\n// Returns true if analytical object contains a single data dimension item\nexport const hasSingleDataDimension = ao => {\n  const dataItems = getDataDimensionsFromAnalyticalObject(ao);\n  return dataItems.length === 1;\n};\n\n// Returns a thematic layer config from an analytical object\nexport const getThematicLayerFromAnalyticalObject = async function () {\n  let ao = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let dataId = arguments.length > 1 ? arguments[1] : undefined;\n  let isVisible = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  const {\n    yearlySeries,\n    aggregationType = 'DEFAULT'\n  } = ao;\n  const dataDims = getDataDimensionsFromAnalyticalObject(ao);\n  const dims = getDimensionsFromAnalyticalObject(ao);\n  const orgUnits = dims.find(i => i.dimension === 'ou');\n  const filters = getDimensionsFromFilters(dims); // Dynamic dimension filters\n  let period = dims.find(i => i.dimension === 'pe');\n  let dataDim = dataDims[0];\n  if (dataId) {\n    dataDim = dataDims.find(item => item.id === dataId);\n  }\n  if (!dataDim || !orgUnits || !period) {\n    return;\n  }\n\n  // Load default legend set for selected data dimension\n  const legendSet = await loadDataItemLegendSet(dataDim);\n\n  // Currently we only support one period in map filters so we select the first\n  if (yearlySeries && yearlySeries.length) {\n    period = {\n      dimension: 'pe',\n      items: [{\n        id: yearlySeries[0],\n        name: getPeriodNameFromId(yearlySeries[0])\n      }]\n    };\n  }\n  return {\n    layer: THEMATIC_LAYER,\n    columns: [{\n      dimension: 'dx',\n      items: [dataDim]\n    }],\n    rows: [orgUnits],\n    filters: [period, ...filters],\n    aggregationType,\n    legendSet,\n    isVisible,\n    opacity: 0.9\n  };\n};\n\n// Translates a thematic layer to an analytical object\nexport const getAnalyticalObjectFromThematicLayer = function () {\n  let layer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    columns = [],\n    rows = [],\n    filters = [],\n    aggregationType = 'DEFAULT'\n  } = layer;\n  return {\n    columns,\n    rows: rows.map(cleanDimension),\n    filters,\n    aggregationType\n  };\n};\n\n// Temporary fix until we switch to hash and react router\nexport const clearAnalyticalObjectFromUrl = () => {\n  const [base, params] = window.location.href.split('?');\n  if (params && history && history.pushState) {\n    const leftParams = params.split('&').filter(p => !p.includes('currentAnalyticalObject'));\n    const url = base + (leftParams.length ? `?${leftParams.join('&')}` : '');\n    history.pushState({}, null, url);\n  }\n};","import * as types from '../constants/actionTypes.js';\n\n// Add new layer\nexport const addLayer = config => ({\n  type: types.LAYER_ADD,\n  payload: config\n});\n\n// Remove an overlay\nexport const removeLayer = id => ({\n  type: types.LAYER_REMOVE,\n  id\n});\n\n// Edit overlay\nexport const editLayer = layer => ({\n  type: types.LAYER_EDIT,\n  payload: layer\n});\n\n// Cancel overlay (stop editing)\nexport const cancelLayer = () => ({\n  type: types.LAYER_CANCEL\n});\n\n// Update existing overlay\nexport const updateLayer = layer => ({\n  type: types.LAYER_UPDATE,\n  payload: layer\n});\n\n// Expand/collapse overlay card\nexport const toggleLayerExpand = id => ({\n  type: types.LAYER_TOGGLE_EXPAND,\n  id\n});\n\n// Show/hide overlay on map\nexport const toggleLayerVisibility = id => ({\n  type: types.LAYER_TOGGLE_VISIBILITY,\n  id\n});\n\n// Set overlay opacity\nexport const changeLayerOpacity = (id, opacity) => ({\n  type: types.LAYER_CHANGE_OPACITY,\n  id,\n  opacity\n});\n\n// Change ordering of overlays\nexport const sortLayers = _ref => {\n  let {\n    oldIndex,\n    newIndex\n  } = _ref;\n  return {\n    type: types.LAYER_SORT,\n    oldIndex,\n    newIndex\n  };\n};\n\n// Set that layer is loading\nexport const setLayerLoading = id => ({\n  type: types.LAYER_LOADING_SET,\n  id\n});","import log from 'loglevel';\nimport * as types from '../constants/actionTypes.js';\nimport { clearAnalyticalObjectFromUrl, hasSingleDataDimension, getThematicLayerFromAnalyticalObject } from '../util/analyticalObject.js';\nimport { addLayer } from './layers.js';\nexport const setAnalyticalObject = ao => ({\n  type: types.ANALYTICAL_OBJECT_SET,\n  payload: ao\n});\nexport const clearAnalyticalObject = () => ({\n  type: types.ANALYTICAL_OBJECT_CLEAR\n});\nexport const tSetAnalyticalObject = ao => async dispatch => {\n  try {\n    clearAnalyticalObjectFromUrl();\n    return hasSingleDataDimension(ao) ? getThematicLayerFromAnalyticalObject(ao).then(layer => dispatch(addLayer(layer))) : dispatch(setAnalyticalObject(ao));\n  } catch (e) {\n    log.error('Could not load current analytical object');\n    return e;\n  }\n};","import i18n from '@dhis2/d2-i18n';\nimport { TILE_LAYER, GOOGLE_LAYER, BING_LAYER } from '../constants/layers.js';\nexport const FALLBACK_BASEMAP_ID = 'osmLight';\nexport const getFallbackBasemap = () => defaultBasemaps()[0];\nexport const getBasemap = id => defaultBasemaps().find(map => map.id === id);\nexport const defaultBasemaps = () => [{\n  id: FALLBACK_BASEMAP_ID,\n  name: i18n.t('OSM Light'),\n  img: 'images/osmlight.png',\n  config: {\n    type: TILE_LAYER,\n    url: '//cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',\n    attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>'\n  }\n}, {\n  id: 'openStreetMap',\n  name: i18n.t('OSM Detailed'),\n  img: 'images/osm.png',\n  config: {\n    type: TILE_LAYER,\n    url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n  }\n}, {\n  id: 'googleStreets',\n  name: i18n.t('Google Streets'),\n  img: 'images/googlestreets.png',\n  config: {\n    type: GOOGLE_LAYER,\n    style: 'ROADMAP'\n  }\n}, {\n  id: 'googleHybrid',\n  name: i18n.t('Google Hybrid'),\n  img: 'images/googlehybrid.jpeg',\n  config: {\n    type: GOOGLE_LAYER,\n    style: 'HYBRID'\n  }\n}, {\n  id: 'bingLight',\n  name: i18n.t('Bing Road'),\n  img: 'images/bingroad.png',\n  config: {\n    type: BING_LAYER,\n    style: 'CanvasLight',\n    apiKey: 'AotYGLQC0RDcofHC5pWLaW7k854n-6T9mTunsev9LEFwVqGaVnG8b4KERNY9PeKA' // TODO: Read from db\n  }\n}, {\n  id: 'bingDark',\n  name: i18n.t('Bing Dark'),\n  img: 'images/bingdark.png',\n  config: {\n    type: BING_LAYER,\n    style: 'CanvasDark'\n  }\n}, {\n  id: 'bingAerial',\n  name: i18n.t('Bing Aerial'),\n  img: 'images/bingaerial.jpeg',\n  config: {\n    type: BING_LAYER,\n    style: 'Aerial'\n  }\n}, {\n  id: 'bingHybrid',\n  name: i18n.t('Bing Aerial Labels'),\n  img: 'images/binghybrid.jpeg',\n  config: {\n    type: BING_LAYER,\n    style: 'AerialWithLabelsOnDemand'\n  }\n}];","import { FALLBACK_BASEMAP_ID } from './basemaps.js';\nexport const apiVersion = 40;\nexport const DEFAULT_SYSTEM_SETTINGS = {\n  keyDefaultBaseMap: FALLBACK_BASEMAP_ID\n};\nexport const SYSTEM_SETTINGS = ['keyAnalysisRelativePeriod', 'keyBingMapsApiKey', 'keyHideDailyPeriods', 'keyHideWeeklyPeriods', 'keyHideBiWeeklyPeriods', 'keyHideMonthlyPeriods', 'keyHideBiMonthlyPeriods', 'keyDefaultBaseMap'];","import { config } from 'd2';\nimport { isString, isObject } from 'lodash/fp';\n\n// The api/configuration/xx endpoints returns an empty body if the config is not set\n// This is a replacement for response.json() which gives error if body is empty\n// https://stackoverflow.com/a/51320025\nconst getJsonResponse = async response => {\n  const string = await response.text();\n  const json = string === '' ? undefined : JSON.parse(string);\n  return json;\n};\nexport const apiFetchWithBaseUrl = async _ref => {\n  let {\n    url,\n    method,\n    body,\n    baseUrl\n  } = _ref;\n  const options = {\n    headers: {\n      'Content-Type': 'application/json' // Default API response\n    },\n\n    credentials: 'include'\n  };\n  if (method && body) {\n    options.method = method;\n    if (isString(body)) {\n      options.headers['Content-Type'] = 'text/html';\n      options.body = body;\n    } else if (isObject(body)) {\n      options.body = JSON.stringify(body);\n    }\n  }\n\n  // TODO: Better error handling\n  return fetch(encodeURI(baseUrl + url), options).then(response => ['POST', 'PUT', 'PATCH'].includes(method) ? response : getJsonResponse(response)).catch(error => console.log('Error: ', error));\n};\nexport const apiFetch = async (url, method, body) => {\n  const options = {\n    headers: {\n      'Content-Type': 'application/json' // Default API response\n    }\n  };\n\n  options.credentials = 'include';\n  if (method && body) {\n    options.method = method;\n    if (isString(body)) {\n      options.headers['Content-Type'] = 'text/html';\n      options.body = body;\n    } else if (isObject(body)) {\n      options.body = JSON.stringify(body);\n    }\n  }\n\n  // TODO: Better error handling\n  return fetch(encodeURI(config.baseUrl + url), options).then(response => ['POST', 'PUT', 'PATCH'].includes(method) ? response : getJsonResponse(response)).catch(error => console.log('Error: ', error));\n};","import { isString, isObject, sortBy } from 'lodash/fp';\nimport { EXTERNAL_LAYER } from '../constants/layers.js';\nexport const getMigratedMapConfig = (config, defaultBasemapId) => renameBoundaryLayerToOrgUnitLayer(upgradeGisAppLayers(extractBasemap(config, defaultBasemapId)));\n\n// Different ways of specifying a basemap - TODO: simplify!\nconst extractBasemap = (config, defaultBasemapId) => {\n  const externalBasemap = config.mapViews.find(view => view.layer === EXTERNAL_LAYER && JSON.parse(view.config || {}).mapLayerPosition === 'BASEMAP');\n  let basemap;\n  let mapViews = config.mapViews;\n  if (externalBasemap) {\n    basemap = JSON.parse(externalBasemap.config);\n    mapViews = config.mapViews.filter(view => view.id !== externalBasemap.id);\n  } else if (isString(config.basemap)) {\n    basemap = config.basemap === 'none' ? {\n      id: defaultBasemapId,\n      isVisible: false\n    } : {\n      id: config.basemap\n    };\n  } else if (isObject(config.basemap)) {\n    basemap = config.basemap;\n  } else {\n    basemap = {\n      id: defaultBasemapId\n    };\n  }\n  return {\n    ...config,\n    basemap: basemap,\n    mapViews: mapViews\n  };\n};\n\n// Detection if map config is from previous GIS app\n// TODO: Better to store app version as part of config object?\n\n// Layer order in the previous GIS app (bottom to top)\nconst gisAppLayerOrder = {\n  externalLayer: 1,\n  // TODO: Distinguish between basemaps and overlays\n  earthEngine: 2,\n  thematic4: 3,\n  thematic3: 4,\n  thematic2: 5,\n  thematic1: 6,\n  boundary: 7,\n  facility: 8,\n  event: 9\n};\nconst isGisAppFormat = layers => layers.some(config => config.layer.match(/thematic[1-4]/));\nconst upgradeGisAppLayers = config => {\n  const {\n    mapViews\n  } = config;\n  if (!isGisAppFormat(mapViews)) {\n    return config;\n  }\n  const updatedMapViews = sortBy(mapView => gisAppLayerOrder[mapView.layer], mapViews).map(orderedMapView => ({\n    ...orderedMapView,\n    layer: orderedMapView.layer.replace(/\\d$/, '') // Remove thematic number used in previous versions\n  }));\n\n  return {\n    ...config,\n    mapViews: updatedMapViews\n  };\n};\n\n// Change layer name from boundary to orgUnit when loading an old map\n// TODO: Change in db with an upgrade script\nconst renameBoundaryLayerToOrgUnitLayer = config => ({\n  ...config,\n  mapViews: config.mapViews.map(v => v.layer === 'boundary' ? {\n    ...v,\n    layer: 'orgUnit'\n  } : v)\n});","import { isObject } from 'lodash/fp';\nimport { RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../constants/layers.js';\nconst propertyMap = {\n  name: 'name',\n  displayName: 'name',\n  shortName: 'shortName',\n  displayShortName: 'shortName'\n};\nexport const getDisplayProperty = (d2, displayProperty) => {\n  const keyAnalysisDisplayProperty = d2.currentUser.settings.keyAnalysisDisplayProperty;\n  return propertyMap[keyAnalysisDisplayProperty] || propertyMap[displayProperty] || 'name'; // TODO: check\n};\n\n/*\nexport const getDisplayPropertyUrl = d2 => {\n    return `${getDisplayProperty(d2)}~rename(name)`; // TODO\n};\n*/\n\nexport const getDisplayPropertyUrl = () => `displayName~rename(name)`;\nconst baseFields = ['id', 'user', 'displayName~rename(name)', 'description', 'longitude', 'latitude', 'zoom', 'basemap', 'publicAccess', 'created', 'lastUpdated', 'access', 'update', 'manage', 'delete', 'href'];\nconst analysisFields = () => {\n  const namePropertyUrl = getDisplayPropertyUrl();\n  return ['*', `columns[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${namePropertyUrl}]]`, `rows[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${namePropertyUrl}]]`, `filters[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${namePropertyUrl}]]`, 'organisationUnits[id,path]',\n  // Added to retrieve org unit paths\n  'dataDimensionItems', `program[id,${namePropertyUrl}]`, 'programStage[id,displayName~rename(name)]', 'legendSet[id,displayName~rename(name)]', 'trackedEntityType[id,displayName~rename(name)]', 'organisationUnitSelectionMode', '!href', '!publicAccess', '!rewindRelativePeriods', '!userOrganisationUnit', '!userOrganisationUnitChildren', '!userOrganisationUnitGrandChildren', '!externalAccess', '!access', '!relativePeriods', '!columnDimensions', '!rowDimensions', '!filterDimensions', '!user', '!organisationUnitGroups', '!itemOrganisationUnitGroups', '!userGroupAccesses', '!indicators', '!dataElements', '!dataElementOperands', '!dataElementGroups', '!dataSets', '!periods', '!organisationUnitLevels', '!sortOrder', '!topLimit'];\n};\nexport const mapFields = () => {\n  const fields = analysisFields();\n  return `${baseFields.join(',')}, mapViews[${fields.join(',')}]`;\n};\nexport const legendFields = ['*', '!created', '!lastUpdated', '!displayName', '!externalAccess', '!access', '!userGroupAccesses'];\nexport const legendSetFields = ['id,displayName~rename(name),legends[' + legendFields.join(',') + ']'];\n\n// Add path to org unit dimension  - https://jira.dhis2.org/browse/DHIS2-4212\nexport const addOrgUnitPaths = mapViews => mapViews.map(view => view.rows && view.organisationUnits ? {\n  ...view,\n  rows: view.rows.map(dim => ({\n    ...dim,\n    items: dim.items.map(orgUnit => ({\n      ...orgUnit,\n      path: (view.organisationUnits.find(ou => ou.id === orgUnit.id) || {}).path\n    }))\n  }))\n} : view);\nconst mandatoryDataItemAttributes = ['id', 'name', 'valueType'];\n\n// Checks if a data item is valid (program stage data elements and tracked entity attributes)\nexport const getValidDataItems = items => items.filter(item => isObject(item) && mandatoryDataItemAttributes.every(prop => prop in item));\n\n// Returns split view layer if exist\nexport const getSplitViewLayer = layers => layers.find(layer => layer.renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD);\n\n// Checks if split view map\nexport const isSplitViewMap = layers => !!getSplitViewLayer(layers);\nexport const formatCoordinate = value => {\n  try {\n    return JSON.parse(value).map(v => v.toFixed(6)).join(', ');\n  } catch (e) {\n    return value;\n  }\n};\n\n// Formats a DHIS2 time string\nexport const formatTime = time => `${time.substring(0, 10)} ${time.substring(11, 16)}`;\n\n// Get the longest text length from an object property in an array\nexport const getLongestTextLength = (array, key) => array.reduce((text, curr) => curr[key] && String(curr[key]).length > text.length ? String(curr[key]) : text, '').length;\n\n//  Copied from https://github.com/dhis2/d2/blob/master/src/uid.js\nconst CODE_PATTERN = /^[a-zA-Z]{1}[a-zA-Z0-9]{10}$/;\nexport const isValidUid = code => code ? CODE_PATTERN.test(code) : false;","import { getInstance as getD2 } from 'd2';\nimport { DEFAULT_SYSTEM_SETTINGS } from '../constants/settings.js';\nimport { apiFetch } from './api.js';\nimport { getMigratedMapConfig } from './getMigratedMapConfig.js';\nimport { mapFields } from './helpers.js';\n// API requests\n\n// Fetch one favorite\nexport const mapRequest = async (id, keyDefaultBaseMap) => {\n  const d2 = await getD2();\n  return d2.models.map.get(id, {\n    fields: mapFields()\n  }).then(map => getMigratedMapConfig(map, keyDefaultBaseMap));\n};\nconst fetchMapQuery = {\n  resource: 'maps',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: {\n    fields: mapFields()\n  }\n};\nexport const fetchMap = async (id, engine, keyDefaultBaseMap) => engine.query({\n  map: fetchMapQuery\n}, {\n  variables: {\n    id\n  }\n}).then(map => getMigratedMapConfig(map.map, keyDefaultBaseMap)).catch(() => {\n  throw new Error(`Could not load map with id \"${id}\"`);\n});\nconst fetchExternalLayersQuery = {\n  resource: 'externalMapLayers',\n  params: {\n    paging: false,\n    fields: 'id,displayName~rename(name),service,url,attribution,mapService,layers,imageFormat,mapLayerPosition,legendSet,legendSetUrl'\n  }\n};\nexport const fetchExternalLayers = async engine => engine.query({\n  externalLayers: fetchExternalLayersQuery\n});\n\n// For plugin - use d2\nexport const fetchExternalLayersD2 = async () => {\n  const d2 = await getD2();\n  const layers = await d2.models.externalMapLayers.list();\n  return layers.toArray();\n};\n\n// Fetch a single externalLayer\nexport const getExternalLayer = async id => {\n  const d2 = await getD2();\n  return d2.models.externalMapLayers.get(id);\n};\nexport const fetchSystemSettings = keys => apiFetch(`/systemSettings/?key=${keys.join(',')}`).then(settings => Object.assign({}, DEFAULT_SYSTEM_SETTINGS, settings));\n\n// https://davidwalsh.name/query-string-javascript\nexport const getUrlParameter = name => {\n  name = name.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n  const results = regex.exec(location.search);\n  return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n};","import { EXTERNAL_LAYER, TILE_LAYER, WMS_LAYER, VECTOR_STYLE } from '../constants/layers.js';\nimport { getExternalLayer } from './requests.js';\nconst MAP_SERVICE_WMS = 'WMS';\nconst MAP_SERVICE_TMS = 'TMS';\nconst MAP_SERVICE_XYZ = 'XYZ';\nconst MAP_SERVICE_VECTOR_STYLE = 'VECTOR_STYLE';\nconst mapServiceToTypeMap = {\n  [MAP_SERVICE_WMS]: WMS_LAYER,\n  [MAP_SERVICE_XYZ]: TILE_LAYER,\n  [MAP_SERVICE_TMS]: TILE_LAYER,\n  [MAP_SERVICE_VECTOR_STYLE]: VECTOR_STYLE\n};\n\n// Create external layer from a model\nexport const createExternalLayer = model => ({\n  layer: EXTERNAL_LAYER,\n  id: model.id,\n  name: model.name,\n  opacity: 1,\n  config: createExternalLayerConfig(model)\n});\n\n// Create external layer config\nexport const createExternalLayerConfig = model => {\n  const {\n    id,\n    name,\n    attribution,\n    mapService,\n    url,\n    layers,\n    imageFormat,\n    legendSet,\n    legendSetUrl\n  } = model;\n  const type = mapServiceToTypeMap[mapService];\n  const format = imageFormat === 'JPG' ? 'image/jpeg' : 'image/png';\n  const tms = mapService === MAP_SERVICE_TMS;\n  return {\n    id,\n    type,\n    url,\n    attribution,\n    name,\n    layers,\n    tms,\n    format,\n    legendSet,\n    legendSetUrl\n  };\n};\n\n// Parse external layer config returned as a string in ao\nexport const parseLayerConfig = async layerConfig => {\n  let config;\n  try {\n    config = JSON.parse(layerConfig);\n  } catch (evt) {\n    return;\n  }\n\n  // We could use the config object as stored, but better to\n  // use a fresh layer config from the API\n  if (config.id) {\n    try {\n      const layer = await getExternalLayer(config.id);\n      return createExternalLayerConfig(layer);\n    } catch (evt) {\n      return config;\n    }\n  }\n  return config;\n};","import log from 'loglevel';\nimport * as types from '../constants/actionTypes.js';\nimport { createExternalLayer } from '../util/external.js';\nimport { fetchExternalLayers } from '../util/requests.js';\nimport { addBasemaps } from './basemap.js';\nconst isBasemap = layer => layer.mapLayerPosition === 'BASEMAP';\nconst isOverlay = layer => !isBasemap(layer);\n\n// Add external overlay\nexport const addExternalLayer = layer => ({\n  type: types.EXTERNAL_LAYER_ADD,\n  payload: layer\n});\nexport const tSetExternalLayers = engine => async dispatch => {\n  try {\n    const externalLayers = await fetchExternalLayers(engine);\n    const externalBasemaps = externalLayers.externalLayers.externalMapLayers.filter(isBasemap).map(createExternalLayer);\n    dispatch(addBasemaps(externalBasemaps));\n    externalLayers.externalLayers.externalMapLayers.filter(isOverlay).map(createExternalLayer).map(layer => dispatch(addExternalLayer(layer)));\n  } catch (e) {\n    log.error('Could not load external map layers');\n    return e;\n  }\n};","import * as types from '../constants/actionTypes.js';\nexport const addBasemaps = basemaps => ({\n  type: types.BASEMAPS_ADD,\n  payload: basemaps\n});\nexport const selectBasemap = id => ({\n  type: types.BASEMAP_SELECTED,\n  id\n});\nexport const toggleBasemapExpand = () => ({\n  type: types.BASEMAP_TOGGLE_EXPAND\n});\nexport const toggleBasemapVisibility = () => ({\n  type: types.BASEMAP_TOGGLE_VISIBILITY\n});\nexport const changeBasemapOpacity = opacity => ({\n  type: types.BASEMAP_CHANGE_OPACITY,\n  opacity\n});\nexport const setBingMapsApiKey = key => ({\n  type: types.BASEMAP_BING_KEY_SET,\n  key\n});\nexport const removeBingBasemaps = () => ({\n  type: types.BASEMAP_REMOVE_BING_MAPS\n});","import log from 'loglevel';\nimport * as types from '../constants/actionTypes.js';\nimport { getFallbackBasemap } from '../constants/basemaps.js';\nimport { addOrgUnitPaths } from '../util/helpers.js';\nimport { fetchMap } from '../util/requests.js';\nexport const newMap = () => ({\n  type: types.MAP_NEW\n});\nexport const setMap = config => ({\n  type: types.MAP_SET,\n  payload: config\n});\nexport const setMapProps = props => ({\n  type: types.MAP_PROPS_SET,\n  payload: props\n});\nexport const openCoordinatePopup = coord => ({\n  type: types.MAP_COORDINATE_OPEN,\n  payload: coord\n});\nexport const closeCoordinatePopup = () => ({\n  type: types.MAP_COORDINATE_CLOSE\n});\nexport const openContextMenu = payload => ({\n  type: types.MAP_CONTEXT_MENU_OPEN,\n  payload\n});\nexport const closeContextMenu = () => ({\n  type: types.MAP_CONTEXT_MENU_CLOSE\n});\nexport const showEarthEngineValue = (layerId, coordinate) => ({\n  type: types.MAP_EARTH_ENGINE_VALUE_SHOW,\n  layerId,\n  coordinate\n});\nexport const clearAlerts = () => ({\n  type: types.MAP_ALERTS_CLEAR\n});\nexport const tOpenMap = (mapId, keyDefaultBaseMap, dataEngine) => async (dispatch, getState) => {\n  try {\n    const map = await fetchMap(mapId, dataEngine, keyDefaultBaseMap);\n    const basemapConfig = getState().basemaps.find(bm => bm.id === map.basemap.id) || getFallbackBasemap();\n    const basemap = {\n      ...map.basemap,\n      ...basemapConfig\n    };\n    dispatch(setMap({\n      ...map,\n      mapViews: addOrgUnitPaths(map.mapViews),\n      basemap\n    }));\n  } catch (e) {\n    log.error(e);\n    return e;\n  }\n};","import { useAlerts } from '@dhis2/app-service-alerts';\nimport { AlertStack as UiAlertStack, AlertBar } from '@dhis2/ui';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clearAlerts } from '../../actions/map.js';\nimport { getMapAlerts } from '../../util/alerts.js';\nconst DEFAULT_DURATION = 6000;\nconst AlertStack = () => {\n  const alerts = useAlerts();\n  const mapAlerts = useSelector(state => getMapAlerts(state.map));\n  const dispatch = useDispatch();\n  const clearMapAlerts = useCallback(() => {\n    dispatch(clearAlerts());\n  }, [dispatch]);\n  return alerts.length || mapAlerts.length ? /*#__PURE__*/React.createElement(UiAlertStack, null, alerts.map((_ref, index) => {\n    let {\n      message,\n      options,\n      remove\n    } = _ref;\n    return /*#__PURE__*/React.createElement(AlertBar, {\n      key: `appalert-${index}`,\n      success: options.success,\n      warning: options.warning,\n      critical: options.critical,\n      duration: options.duration || DEFAULT_DURATION,\n      onHidden: remove\n    }, message);\n  }).concat(mapAlerts.map((_ref2, index) => {\n    let {\n      message,\n      success,\n      warning,\n      critical,\n      duration\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(AlertBar, {\n      key: `mapalert-${index}`,\n      success: success,\n      warning: warning,\n      critical: critical,\n      duration: duration || DEFAULT_DURATION,\n      onHidden: clearMapAlerts\n    }, message);\n  }))) : null;\n};\nexport default AlertStack;","// Returns array of all alerts from map config and layers (mapViews)\nexport const getMapAlerts = mapConfig => [].concat(...(mapConfig && mapConfig.alerts ? mapConfig.alerts : [])).concat(...(mapConfig && mapConfig.mapViews && mapConfig.mapViews.filter(layer => layer.alerts).map(layer => layer.alerts)));","import * as types from '../constants/actionTypes.js';\nexport const openDataTable = id => ({\n  type: types.DATA_TABLE_OPEN,\n  id\n});\nexport const closeDataTable = () => ({\n  type: types.DATA_TABLE_CLOSE\n});\nexport const toggleDataTable = id => ({\n  type: types.DATA_TABLE_TOGGLE,\n  id\n});\nexport const resizeDataTable = height => ({\n  type: types.DATA_TABLE_RESIZE,\n  height\n});","import * as types from '../constants/actionTypes.js';\nexport const highlightFeature = payload => ({\n  type: types.FEATURE_HIGHLIGHT,\n  payload\n});","import * as types from '../constants/actionTypes.js';\nexport const setOrgUnitProfile = id => ({\n  type: types.ORGANISATION_UNIT_PROFILE_SET,\n  payload: id\n});\nexport const closeOrgUnitProfile = () => ({\n  type: types.ORGANISATION_UNIT_PROFILE_CLOSE\n});","// Valid value types:\n// https://docs.dhis2.org/master/en/user/html/manage_data_element.html\n// https://play.dhis2.org/demo/api/schemas/dataElement\n\n// Number values types used for style by data item\nexport const numberValueTypes = ['AGE', 'INTEGER', 'INTEGER_NEGATIVE', 'INTEGER_POSITIVE', 'INTEGER_ZERO_OR_POSITIVE', 'NUMBER', 'PERCENTAGE', 'UNIT_INTERVAL'];\n\n// Text value types\nexport const textValueTypes = ['EMAIL', 'LETTER', 'LONG_TEXT', 'PHONE_NUMBER', 'TEXT', 'USERNAME'];\n\n// Boolean value types\nexport const booleanValueTypes = ['BOOLEAN', 'TRUE_ONLY'];","import isNumeric from 'd2-utilizr/lib/isNumeric';\n\n// Filters an array of object with a set of filters\nexport const filterData = (data, filters) => {\n  if (!filters) {\n    return data;\n  }\n  let filteredData = [...data];\n  Object.keys(filters).forEach(field => {\n    // Loop through all filters\n    const filter = filters[field];\n    filteredData = filteredData.filter(d => {\n      // Loop through all data items\n      const props = d.properties || d; // GeoJSON or plain object\n      const value = props[field];\n      return isNumeric(value) ? numericFilter(value, filter) : stringFilter(value, filter);\n    });\n  });\n  return filteredData;\n};\n\n// Simple check if string contains another string\nexport const stringFilter = (string, filter) => {\n  return ('' + string).toLowerCase().includes(filter.toLowerCase());\n};\n\n// Numeric filter supporting AND, OR, GREATER THAN, LESS THAN or equal number\nexport const numericFilter = (value, filter) => {\n  // TODO: Syntax error handling\n  return filter.split(',').some(orFilter => {\n    // OR filter\n    return orFilter.split('&').every(filter => isTrueFilter(value, filter)); // AND filter\n  });\n};\n\n// Returns true if the filter is true\nconst isTrueFilter = (value, filter) => {\n  if (filter.includes('>')) {\n    // GREATER THAN\n    return value >= Number(filter.split('>')[1]);\n  }\n  if (filter.includes('<')) {\n    // LESS THAN\n    return value <= Number(filter.split('<')[1]);\n  }\n  return value === Number(filter); // Equal number\n};","// extracted by mini-css-extract-plugin\nexport default {\"colorCell\":\"ColorCell_colorCell__e2FdZ\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { getContrastColor } from '../../util/colors.js';\nimport styles from './styles/ColorCell.module.css';\nconst ColorCell = _ref => {\n  let {\n    cellData = ''\n  } = _ref;\n  const style = {\n    backgroundColor: cellData,\n    color: getContrastColor(cellData)\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.colorCell,\n    style: style\n  }, cellData.toLowerCase());\n};\nColorCell.propTypes = {\n  cellData: PropTypes.string.isRequired\n};\nexport default ColorCell;","// extracted by mini-css-extract-plugin\nexport default {\"filterInput\":\"FilterInput_filterInput__6UfaN\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setDataFilter, clearDataFilter } from '../../actions/dataFilters.js';\nimport styles from './styles/FilterInput.module.css';\n\n// http://adazzle.github.io/react-data-grid/examples.html#/custom-filters\n// https://github.com/adazzle/react-data-grid/tree/master/packages/react-data-grid-addons/src/cells/headerCells/filters\nconst FilterInput = _ref => {\n  let {\n    layerId,\n    type,\n    dataKey,\n    filters,\n    setDataFilter,\n    clearDataFilter\n  } = _ref;\n  const filterValue = filters[dataKey] || '';\n\n  // https://stackoverflow.com/questions/36683770/react-how-to-get-the-value-of-an-input-field\n  const onChange = evt => {\n    const value = evt.target.value;\n    if (value !== '') {\n      setDataFilter(layerId, dataKey, value);\n    } else {\n      clearDataFilter(layerId, dataKey, value);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"input\", {\n    className: styles.filterInput,\n    placeholder: type === 'number' ? '2,>3&<8' : 'Search' // TODO: Support more field types\n    ,\n    value: filterValue,\n    onClick: evt => evt.stopPropagation(),\n    onChange: onChange\n  });\n};\nFilterInput.propTypes = {\n  clearDataFilter: PropTypes.func.isRequired,\n  dataKey: PropTypes.string.isRequired,\n  filters: PropTypes.object.isRequired,\n  layerId: PropTypes.string.isRequired,\n  setDataFilter: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired\n};\n\n// Avoid needing to pass filter and actions to every input field\nconst mapStateToProps = _ref2 => {\n  let {\n    dataTable,\n    map\n  } = _ref2;\n  const overlay = dataTable ? map.mapViews.filter(layer => layer.id === dataTable)[0] : null;\n  if (overlay) {\n    return {\n      layerId: overlay.id,\n      filters: overlay.dataFilters || {}\n    };\n  }\n  return null;\n};\nexport default connect(mapStateToProps, {\n  setDataFilter,\n  clearDataFilter\n})(FilterInput);","import * as types from '../constants/actionTypes.js';\nexport const setDataFilter = (layerId, fieldId, filter) => ({\n  type: types.DATA_FILTER_SET,\n  layerId,\n  fieldId,\n  filter\n});\nexport const clearDataFilter = (layerId, fieldId) => ({\n  type: types.DATA_FILTER_CLEAR,\n  layerId,\n  fieldId\n});","// extracted by mini-css-extract-plugin\nexport default {\"columnHeader\":\"ColumnHeader_columnHeader__noMR7\",\"label\":\"ColumnHeader_label__qASPr\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { SortIndicator } from 'react-virtualized';\nimport FilterInput from './FilterInput.js';\nimport styles from './styles/ColumnHeader.module.css';\n\n// Replacement for https://github.com/bvaughn/react-virtualized/blob/master/source/Table/defaultHeaderRenderer.js\n\nconst ColumnHeader = _ref => {\n  let {\n    dataKey,\n    label,\n    type,\n    sortBy,\n    sortDirection\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    title: label,\n    className: styles.columnHeader\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, label), sortBy === dataKey ? /*#__PURE__*/React.createElement(SortIndicator, {\n    sortDirection: sortDirection\n  }) : null, /*#__PURE__*/React.createElement(FilterInput, {\n    type: type,\n    dataKey: dataKey\n  }));\n};\nColumnHeader.propTypes = {\n  dataKey: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortDirection: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired\n};\nexport default ColumnHeader;","import i18n from '@dhis2/d2-i18n';\nconst getMapLocale = () => ({\n  acres: i18n.t('acres'),\n  Area: i18n.t('Area'),\n  Cancel: i18n.t('Cancel'),\n  'Center map on area': i18n.t('Center map on area'),\n  'Center map on line': i18n.t('Center map on line'),\n  'Click the next position': i18n.t('Click the next position'),\n  'Click where you want to start the measurement': i18n.t('Click where you want to start the measurement'),\n  Delete: i18n.t('Delete'),\n  Distance: i18n.t('Distance'),\n  'Enter fullscreen': i18n.t('Enter fullscreen'),\n  'Exit fullscreen': i18n.t('Exit fullscreen'),\n  'Finish measurement': i18n.t('Finish measurement'),\n  ha: i18n.t('ha'),\n  km: i18n.t('km'),\n  'Measure distances and areas': i18n.t('Measure distances and areas'),\n  mi: i18n.t('mi'),\n  Perimeter: i18n.t('Perimeter'),\n  'Reset bearing to north': i18n.t('Reset bearing to north'),\n  'Search for place or address': i18n.t('Search for place or address'),\n  'Zoom in': i18n.t('Zoom in'),\n  'Zoom out': i18n.t('Zoom out'),\n  'Zoom to content': i18n.t('Zoom to content')\n});\nexport default getMapLocale;","import MapApi, { layerTypes, controlTypes, loadEarthEngineWorker, poleOfInaccessibility } from '@dhis2/maps-gl';\nimport getMapLocale from './mapLocale.js';\n\n// Returns a new map instance\nconst map = options => {\n  const baseUrl = process.env.DHIS2_BASE_URL;\n  const glyphs = `${baseUrl}/dhis-web-maps/fonts/{fontstack}/{range}.pbf`;\n  const div = document.createElement('div');\n  div.className = 'dhis2-map';\n  div.style.width = '100%';\n  div.style.height = '100%';\n  return new MapApi(div, {\n    ...options,\n    locale: getMapLocale(),\n    glyphs\n  });\n};\nexport { layerTypes, controlTypes, loadEarthEngineWorker, poleOfInaccessibility };\nexport default map;","import i18n from '@dhis2/d2-i18n';\nimport { defaultFilters } from '../util/earthEngine.js';\nimport { EARTH_ENGINE_LAYER } from './layers.js';\nexport const earthEngineLayers = () => [{\n  layer: EARTH_ENGINE_LAYER,\n  datasetId: 'WorldPop/GP/100m/pop',\n  name: i18n.t('Population'),\n  unit: i18n.t('people per hectare'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop',\n  img: 'images/population.png',\n  defaultAggregations: ['sum', 'mean'],\n  periodType: 'Yearly',\n  filters: _ref => {\n    let {\n      id,\n      name,\n      year\n    } = _ref;\n    return [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }];\n  },\n  mosaic: true,\n  params: {\n    min: 0,\n    max: 10,\n    palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  datasetId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj',\n  name: i18n.t('Population age groups'),\n  unit: i18n.t('people per hectare'),\n  description: i18n.t('Estimated number of people living in an area, grouped by age and gender.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop_age_sex_cons_unadj',\n  img: 'images/population.png',\n  periodType: 'Yearly',\n  defaultAggregations: ['sum', 'mean'],\n  bands: [{\n    id: 'M_0',\n    name: i18n.t('Male 0 - 1 years')\n  }, {\n    id: 'M_1',\n    name: i18n.t('Male 1 - 4 years')\n  }, {\n    id: 'M_5',\n    name: i18n.t('Male 5 - 9 years')\n  }, {\n    id: 'M_10',\n    name: i18n.t('Male 10 - 14 years')\n  }, {\n    id: 'M_15',\n    name: i18n.t('Male 15 - 19 years')\n  }, {\n    id: 'M_20',\n    name: i18n.t('Male 20 - 24 years')\n  }, {\n    id: 'M_25',\n    name: i18n.t('Male 25 - 29 years')\n  }, {\n    id: 'M_30',\n    name: i18n.t('Male 30 - 34 years')\n  }, {\n    id: 'M_35',\n    name: i18n.t('Male 35 - 39 years')\n  }, {\n    id: 'M_40',\n    name: i18n.t('Male 40 - 44 years')\n  }, {\n    id: 'M_45',\n    name: i18n.t('Male 45 - 49 years')\n  }, {\n    id: 'M_50',\n    name: i18n.t('Male 50 - 54 years')\n  }, {\n    id: 'M_55',\n    name: i18n.t('Male 55 - 59 years')\n  }, {\n    id: 'M_60',\n    name: i18n.t('Male 60 - 64 years')\n  }, {\n    id: 'M_65',\n    name: i18n.t('Male 65 - 69 years')\n  }, {\n    id: 'M_70',\n    name: i18n.t('Male 70 - 74 years')\n  }, {\n    id: 'M_75',\n    name: i18n.t('Male 75 - 79 years')\n  }, {\n    id: 'M_80',\n    name: i18n.t('Male 80 years and above')\n  }, {\n    id: 'F_0',\n    name: i18n.t('Female 0 - 1 years')\n  }, {\n    id: 'F_1',\n    name: i18n.t('Female 1 - 4 years')\n  }, {\n    id: 'F_5',\n    name: i18n.t('Female 5 - 9 years')\n  }, {\n    id: 'F_10',\n    name: i18n.t('Female 10 - 14 years')\n  }, {\n    id: 'F_15',\n    name: i18n.t('Female 15 - 19 years')\n  }, {\n    id: 'F_20',\n    name: i18n.t('Female 20 - 24 years')\n  }, {\n    id: 'F_25',\n    name: i18n.t('Female 25 - 29 years')\n  }, {\n    id: 'F_30',\n    name: i18n.t('Female 30 - 34 years')\n  }, {\n    id: 'F_35',\n    name: i18n.t('Female 35 - 39 years')\n  }, {\n    id: 'F_40',\n    name: i18n.t('Female 40 - 44 years')\n  }, {\n    id: 'F_45',\n    name: i18n.t('Female 45 - 49 years')\n  }, {\n    id: 'F_50',\n    name: i18n.t('Female 50 - 54 years')\n  }, {\n    id: 'F_55',\n    name: i18n.t('Female 55 - 59 years')\n  }, {\n    id: 'F_60',\n    name: i18n.t('Female 60 - 64 years')\n  }, {\n    id: 'F_65',\n    name: i18n.t('Female 65 - 69 years')\n  }, {\n    id: 'F_70',\n    name: i18n.t('Female 70 - 74 years'),\n    multiple: true\n  }, {\n    id: 'F_75',\n    name: i18n.t('Female 75 - 79 years')\n  }, {\n    id: 'F_80',\n    name: i18n.t('Female 80 years and above')\n  }],\n  filters: _ref2 => {\n    let {\n      id,\n      name,\n      year\n    } = _ref2;\n    return [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }];\n  },\n  mosaic: true,\n  params: {\n    min: 0,\n    max: 10,\n    palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n  },\n\n  opacity: 0.9,\n  tileScale: 4\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  datasetId: 'GOOGLE/Research/open-buildings/v1/polygons',\n  format: 'FeatureCollection',\n  name: i18n.t('Building footprints'),\n  unit: i18n.t('Number of buildings'),\n  description: i18n.t('The outlines of buildings derived from high-resolution satellite imagery. Only for the continent of Africa.'),\n  notice: i18n.t('Building counts are only available for smaller organisation unit areas.'),\n  error: i18n.t('Select a smaller area or single organization unit to see the count of buildings.'),\n  source: 'NASA / USGS / JPL-Caltech / Google Earth Engine',\n  sourceUrl: 'https://sites.research.google/open-buildings/',\n  img: 'images/buildings.png',\n  aggregations: ['count'],\n  defaultAggregations: ['count'],\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  datasetId: 'USGS/SRTMGL1_003',\n  name: i18n.t('Elevation'),\n  unit: i18n.t('meters'),\n  description: i18n.t('Elevation above sea-level.'),\n  source: 'NASA / USGS / JPL-Caltech / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/USGS%2FSRTMGL1_003',\n  img: 'images/elevation.png',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  band: 'elevation',\n  params: {\n    min: 0,\n    max: 1500,\n    palette: '#ffffd4,#fee391,#fec44f,#fe9929,#d95f0e,#993404' // YlOrBr\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  datasetId: 'UCSB-CHG/CHIRPS/PENTAD',\n  name: i18n.t('Precipitation'),\n  unit: i18n.t('millimeter'),\n  description: i18n.t('Precipitation collected from satellite and weather stations on the ground. The values are in millimeters within 5 days periods. Updated monthly, during the 3rd week of the following month.'),\n  source: 'UCSB / CHG / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/UCSB-CHG%2FCHIRPS%2FPENTAD',\n  periodType: 'Custom',\n  band: 'precipitation',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  mask: true,\n  img: 'images/precipitation.png',\n  params: {\n    min: 0,\n    max: 100,\n    palette: '#eff3ff,#c6dbef,#9ecae1,#6baed6,#3182bd,#08519c' // Blues\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  datasetId: 'MODIS/006/MOD11A2',\n  name: i18n.t('Temperature'),\n  unit: i18n.t('°C during daytime'),\n  description: i18n.t('Land surface temperatures collected from satellite. Blank spots will appear in areas with a persistent cloud cover.'),\n  source: 'NASA LP DAAC / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/MODIS%2FMOD11A2',\n  img: 'images/temperature.png',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  periodType: 'Custom',\n  band: 'LST_Day_1km',\n  mask: true,\n  methods: {\n    toFloat: [],\n    multiply: [0.02],\n    subtract: [273.15]\n  },\n  params: {\n    min: 0,\n    max: 40,\n    palette: '#fff5f0,#fee0d2,#fcbba1,#fc9272,#fb6a4a,#ef3b2c,#cb181d,#a50f15,#67000d' // Reds\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  datasetId: 'MODIS/006/MCD12Q1',\n  // No longer in use: 'MODIS/051/MCD12Q1',\n  name: i18n.t('Landcover'),\n  description: i18n.t('Distinct landcover types collected from satellites.'),\n  source: 'NASA LP DAAC / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/MODIS_006_MCD12Q1',\n  periodType: 'Yearly',\n  band: 'LC_Type1',\n  filters: defaultFilters,\n  defaultAggregations: 'percentage',\n  legend: {\n    items: [\n    // http://www.eomf.ou.edu/static/IGBP.pdf\n    {\n      id: 1,\n      name: i18n.t('Evergreen Needleleaf forest'),\n      color: '#162103'\n    }, {\n      id: 2,\n      name: i18n.t('Evergreen Broadleaf forest'),\n      color: '#235123'\n    }, {\n      id: 3,\n      name: i18n.t('Deciduous Needleleaf forest'),\n      color: '#399b38'\n    }, {\n      id: 4,\n      name: i18n.t('Deciduous Broadleaf forest'),\n      color: '#38eb38'\n    }, {\n      id: 5,\n      name: i18n.t('Mixed forest'),\n      color: '#39723b'\n    }, {\n      id: 6,\n      name: i18n.t('Closed shrublands'),\n      color: '#6a2424'\n    }, {\n      id: 7,\n      name: i18n.t('Open shrublands'),\n      color: '#c3a55f'\n    }, {\n      id: 8,\n      name: i18n.t('Woody savannas'),\n      color: '#b76124'\n    }, {\n      id: 9,\n      name: i18n.t('Savannas'),\n      color: '#d99125'\n    }, {\n      id: 10,\n      name: i18n.t('Grasslands'),\n      color: '#92af1f'\n    }, {\n      id: 11,\n      name: i18n.t('Permanent wetlands'),\n      color: '#10104c'\n    }, {\n      id: 12,\n      name: i18n.t('Croplands'),\n      color: '#cdb400'\n    }, {\n      id: 13,\n      name: i18n.t('Urban and built-up'),\n      color: '#cc0202'\n    }, {\n      id: 14,\n      name: i18n.t('Cropland/Natural vegetation mosaic'),\n      color: '#332808'\n    }, {\n      id: 15,\n      name: i18n.t('Snow and ice'),\n      color: '#d7cdcc'\n    }, {\n      id: 16,\n      name: i18n.t('Barren or sparsely vegetated'),\n      color: '#f7e174'\n    }, {\n      id: 17,\n      name: i18n.t('Water'),\n      color: '#aec3d6'\n    }]\n  },\n  mask: false,\n  popup: '{name}: {value}',\n  img: 'images/landcover.png',\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  legacy: true,\n  // Kept for backward compability\n  datasetId: 'WorldPop/POP',\n  name: i18n.t('Population'),\n  unit: i18n.t('people per km²'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/WorldPop%2FPOP',\n  img: 'images/population.png',\n  periodType: 'Yearly',\n  filters: _ref3 => {\n    let {\n      id,\n      name,\n      year\n    } = _ref3;\n    return [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }, {\n      type: 'eq',\n      arguments: ['UNadj', 'yes']\n    }];\n  },\n  mosaic: true,\n  params: {\n    min: 0,\n    max: 1000,\n    palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n  },\n\n  methods: {\n    multiply: [100] // Convert from people/hectare to people/km2\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  legacy: true,\n  // Kept for backward compability\n  datasetId: 'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS',\n  name: i18n.t('Nighttime lights'),\n  unit: i18n.t('light intensity'),\n  description: i18n.t('Light intensity from cities, towns, and other sites with persistent lighting, including gas flares.'),\n  source: 'NOAA / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/NOAA%2FDMSP-OLS%2FNIGHTTIME_LIGHTS',\n  periodType: 'Yearly',\n  band: 'stable_lights',\n  mask: true,\n  img: 'images/nighttime.png',\n  params: {\n    min: 0,\n    max: 63,\n    palette: '#ffffd4,#fee391,#fec44f,#fe9929,#ec7014,#cc4c02,#8c2d04' // YlOrBr\n  },\n\n  opacity: 0.9\n}];\nexport const getEarthEngineLayer = id => earthEngineLayers().find(l => l.datasetId === id);","import i18n from '@dhis2/d2-i18n';\nimport { loadEarthEngineWorker } from '../components/map/MapApi.js';\nimport { getEarthEngineLayer } from '../constants/earthEngine.js';\nimport { apiFetch } from './api.js';\nimport { formatStartEndDate } from './time.js';\nexport const classAggregation = ['percentage', 'hectares', 'acres'];\nexport const hasClasses = type => classAggregation.includes(type);\nexport const getStartEndDate = data => formatStartEndDate(data['system:time_start'], data['system:time_end'],\n// - 7200001, // Minus 2 hrs to end the day before\nnull, false);\nexport const getPeriodFromFilter = filter => {\n  if (!Array.isArray(filter) || !filter.length) {\n    return null;\n  }\n  const {\n    id,\n    name,\n    year,\n    arguments: args\n  } = filter[0];\n  return {\n    id: id || args[1],\n    name,\n    year\n  };\n};\n\n// Returns period name from filter\nexport const getPeriodNameFromFilter = filter => {\n  const period = getPeriodFromFilter(filter);\n  if (!period) {\n    return null;\n  }\n  const {\n    name,\n    year\n  } = period;\n  const showYear = year && String(year) !== name;\n  return `${name}${showYear ? ` ${year}` : ''}`;\n};\n\n// Returns auth token for EE API as a promise\n/* eslint-disable no-async-promise-executor */\nexport const getAuthToken = () => new Promise(async (resolve, reject) => {\n  const token = await apiFetch('/tokens/google').catch(() => reject(new Error(i18n.t('Cannot get authorization token for Google Earth Engine.'))));\n  if (token && token.status === 'ERROR') {\n    reject(new Error(i18n.t('This layer requires a Google Earth Engine account. Check the DHIS2 documentation for more information.')));\n  }\n  resolve({\n    token_type: 'Bearer',\n    ...token\n  });\n});\n\n/* eslint-enable no-async-promise-executor */\n\nlet workerPromise;\n\n// Load EE worker and set token\nconst getWorkerInstance = async () => {\n  workerPromise = workerPromise || (async () => {\n    const EarthEngineWorker = await loadEarthEngineWorker(getAuthToken);\n    return await new EarthEngineWorker();\n  })();\n  return workerPromise;\n};\nexport const getPeriods = async eeId => {\n  const {\n    periodType\n  } = getEarthEngineLayer(eeId);\n  const getPeriod = _ref => {\n    let {\n      id,\n      properties\n    } = _ref;\n    const year = new Date(properties['system:time_start']).getFullYear();\n    const name = periodType === 'Yearly' ? String(year) : getStartEndDate(properties);\n\n    // Remove when old population should not be supported\n    if (eeId === 'WorldPop/POP') {\n      return {\n        id: name,\n        name,\n        year\n      };\n    }\n    return {\n      id,\n      name,\n      year\n    };\n  };\n  const eeWorker = await getWorkerInstance();\n  const {\n    features\n  } = await eeWorker.getPeriods(eeId);\n  return features.map(getPeriod);\n};\nexport const defaultFilters = _ref2 => {\n  let {\n    id,\n    name,\n    year\n  } = _ref2;\n  return [{\n    type: 'eq',\n    arguments: ['system:index', String(id)],\n    name,\n    year\n  }];\n};\nexport const getPrecision = function () {\n  let values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  if (values.length) {\n    const sortedValues = [...values].sort((a, b) => a - b);\n    const minValue = sortedValues[0];\n    const maxValue = sortedValues[sortedValues.length - 1];\n    const gapValue = maxValue - minValue;\n    const absValue = Math.abs(maxValue);\n    if (absValue >= 10000) {\n      return 0;\n    }\n    if (absValue >= 1000) {\n      return gapValue > 10 ? 0 : 1;\n    }\n    if (absValue >= 100) {\n      return gapValue > 1 ? 1 : 2;\n    }\n    if (absValue >= 10) {\n      return gapValue > 0.1 ? 2 : 3;\n    }\n    if (absValue >= 1) {\n      return gapValue > 0.01 ? 3 : 4;\n    }\n    return gapValue > 0.001 ? 4 : 5;\n  }\n  return 0;\n};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Column } from 'react-virtualized';\nimport { hasClasses, getPrecision } from '../../util/earthEngine.js';\nimport { numberPrecision } from '../../util/numbers.js';\nimport ColumnHeader from './ColumnHeader.js';\nconst EarthEngineColumns = _ref => {\n  let {\n    aggregationType,\n    legend,\n    data\n  } = _ref;\n  const {\n    title,\n    items\n  } = legend;\n  if (hasClasses(aggregationType) && items) {\n    const valueFormat = numberPrecision(2);\n    return items.map(_ref2 => {\n      let {\n        id,\n        name\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(Column, {\n        key: id,\n        dataKey: String(id),\n        label: name,\n        width: 100,\n        className: \"right\",\n        headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n          type: \"number\"\n        }, props)),\n        cellRenderer: d => d.cellData !== undefined ? valueFormat(d.cellData) : ''\n      });\n    });\n  } else if (Array.isArray(aggregationType) && aggregationType.length) {\n    return aggregationType.map(type => {\n      const label = `${type} ${title}`.toUpperCase(); // Already translated\n      const precision = getPrecision(data.map(d => d[type]));\n      const valueFormat = numberPrecision(precision);\n      return /*#__PURE__*/React.createElement(Column, {\n        key: type,\n        dataKey: type,\n        label: label,\n        width: 100,\n        className: \"right\",\n        headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n          type: \"number\"\n        }, props)),\n        cellRenderer: d => d.cellData !== undefined ? valueFormat(d.cellData) : ''\n      });\n    });\n  }\n  return null;\n};\nEarthEngineColumns.propTypes = {\n  aggregationType: PropTypes.array,\n  aggregations: PropTypes.object,\n  classes: PropTypes.bool,\n  data: PropTypes.array,\n  legend: PropTypes.object\n};\nexport default EarthEngineColumns;","// extracted by mini-css-extract-plugin\nexport default {\"dataTable\":\"DataTable_dataTable__+C-oU\",\"noSupport\":\"DataTable_noSupport__ljTk-\",\"loader\":\"DataTable_loader__TZ+hH\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader } from '@dhis2/ui';\nimport { isValidUid } from 'd2/uid';\nimport { debounce } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Table, Column } from 'react-virtualized';\nimport { closeDataTable } from '../../actions/dataTable.js';\nimport { highlightFeature } from '../../actions/feature.js';\nimport { updateLayer } from '../../actions/layers.js';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport { EVENT_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EARTH_ENGINE_LAYER } from '../../constants/layers.js';\nimport { numberValueTypes } from '../../constants/valueTypes.js';\nimport { filterData } from '../../util/filter.js';\nimport { formatTime } from '../../util/helpers.js';\nimport ColorCell from './ColorCell.js';\nimport ColumnHeader from './ColumnHeader.js';\nimport EarthEngineColumns from './EarthEngineColumns.js';\nimport styles from './styles/DataTable.module.css';\nimport 'react-virtualized/styles.css';\n\n// Using react component to keep sorting state, which is only used within the data table.\nclass DataTable extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    // Default sort\n    _defineProperty(this, \"state\", {});\n    // Debounce needed as event is triggered multiple times for the same row\n    _defineProperty(this, \"highlightFeature\", debounce(50, id => {\n      const {\n        feature,\n        layer\n      } = this.props;\n\n      // If not the same feature as already highlighted\n      if (!id || !feature || id !== feature.id) {\n        this.props.highlightFeature(id ? {\n          id,\n          layerId: layer.id,\n          origin: 'table'\n        } : null);\n      }\n    }));\n    _defineProperty(this, \"onRowClick\", evt => this.props.setOrgUnitProfile(evt.rowData.id));\n    _defineProperty(this, \"onRowMouseOver\", evt => this.highlightFeature(evt.rowData.id));\n    _defineProperty(this, \"onRowMouseOut\", () => this.highlightFeature());\n    const sortBy = 'index';\n    const sortDirection = 'ASC';\n    const data = this.sort(this.filter(), sortBy, sortDirection);\n    this.state = {\n      sortBy,\n      sortDirection,\n      data\n    };\n  }\n  componentDidMount() {\n    this.loadExtendedData();\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      layer,\n      aggregations,\n      closeDataTable\n    } = this.props;\n    const {\n      data,\n      dataFilters\n    } = layer;\n    const prev = prevProps.layer;\n    if (!data) {\n      closeDataTable();\n    } else if (data !== prev.data || dataFilters !== prev.dataFilters || aggregations !== prevProps.aggregations) {\n      const {\n        sortBy,\n        sortDirection\n      } = this.state;\n      this.setState({\n        data: this.sort(this.filter(), sortBy, sortDirection)\n      });\n    }\n  }\n  loadExtendedData() {\n    const {\n      layer,\n      updateLayer\n    } = this.props;\n    const {\n      layer: layerType,\n      isExtended,\n      serverCluster\n    } = layer;\n    if (layerType === EVENT_LAYER && !isExtended && !serverCluster) {\n      updateLayer({\n        ...layer,\n        showDataTable: true\n      });\n    }\n  }\n  filter() {\n    const {\n      layer,\n      aggregations = {}\n    } = this.props;\n    const {\n      dataFilters\n    } = layer;\n    const data = layer.data.filter(d => !d.properties.hasAdditionalGeometry);\n    return filterData(data.map((d, index) => ({\n      ...(d.properties || d),\n      ...aggregations[d.id],\n      index\n    })), dataFilters);\n  }\n\n  // TODO: Make sure sorting works across different locales - use lib method\n  sort(data, sortBy, sortDirection) {\n    return data.sort((a, b) => {\n      a = a[sortBy];\n      b = b[sortBy];\n      if (typeof a === 'number') {\n        return sortDirection === 'ASC' ? a - b : b - a;\n      }\n      if (a !== undefined) {\n        return sortDirection === 'ASC' ? a.localeCompare(b) : b.localeCompare(a);\n      }\n      return 0;\n    });\n  }\n  onSort(sortBy, sortDirection) {\n    const {\n      data\n    } = this.state;\n    this.setState({\n      sortBy,\n      sortDirection,\n      data: this.sort(data, sortBy, sortDirection)\n    });\n  }\n\n  // Return event data items used for styling, filters or \"display in reports\"\n  getEventDataItems() {\n    const {\n      headers = []\n    } = this.props.layer;\n    return headers.filter(_ref => {\n      let {\n        name\n      } = _ref;\n      return isValidUid(name);\n    }).map(_ref2 => {\n      let {\n        name,\n        column,\n        valueType\n      } = _ref2;\n      return {\n        key: name,\n        label: column,\n        type: numberValueTypes.includes(valueType) ? 'number' : 'string'\n      };\n    });\n  }\n  render() {\n    const {\n      data,\n      sortBy,\n      sortDirection\n    } = this.state;\n    const {\n      width,\n      height,\n      layer,\n      aggregations\n    } = this.props;\n    const {\n      layer: layerType,\n      styleDataItem,\n      serverCluster,\n      aggregationType,\n      legend\n    } = layer;\n    const isThematic = layerType === THEMATIC_LAYER;\n    const isOrgUnit = layerType === ORG_UNIT_LAYER;\n    const isEvent = layerType === EVENT_LAYER;\n    const isEarthEngine = layerType === EARTH_ENGINE_LAYER;\n    const isLoading = isEarthEngine && (aggregationType === null || aggregationType === void 0 ? void 0 : aggregationType.length) && !aggregations;\n    return !serverCluster ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Table, {\n      className: styles.dataTable,\n      width: width,\n      height: height,\n      headerHeight: 48,\n      rowHeight: 32,\n      rowCount: data.length,\n      rowGetter: _ref3 => {\n        let {\n          index\n        } = _ref3;\n        return data[index];\n      },\n      sort: _ref4 => {\n        let {\n          sortBy,\n          sortDirection\n        } = _ref4;\n        return this.onSort(sortBy, sortDirection);\n      },\n      sortBy: sortBy,\n      sortDirection: sortDirection,\n      useDynamicRowHeight: false,\n      hideIndexRow: false,\n      onRowClick: !isEvent ? this.onRowClick : undefined,\n      onRowMouseOver: this.onRowMouseOver,\n      onRowMouseOut: this.onRowMouseOut\n    }, /*#__PURE__*/React.createElement(Column, {\n      cellDataGetter: _ref5 => {\n        let {\n          rowData\n        } = _ref5;\n        return rowData.index;\n      },\n      dataKey: \"index\",\n      label: i18n.t('Index'),\n      width: 72,\n      className: \"right\"\n    }), /*#__PURE__*/React.createElement(Column, {\n      dataKey: isEvent ? 'ouname' : 'name',\n      label: isEvent ? i18n.t('Org unit') : i18n.t('Name'),\n      width: 100,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"string\"\n      }, props))\n    }), /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"id\",\n      label: i18n.t('Id'),\n      width: 100,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"string\"\n      }, props))\n    }), isEvent && /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"eventdate\",\n      label: i18n.t('Event time'),\n      width: 100,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"date\"\n      }, props)),\n      cellRenderer: _ref6 => {\n        let {\n          cellData\n        } = _ref6;\n        return cellData ? formatTime(cellData) : '';\n      }\n    }), isEvent && this.getEventDataItems().map(_ref7 => {\n      let {\n        key,\n        label,\n        type\n      } = _ref7;\n      return /*#__PURE__*/React.createElement(Column, {\n        key: key,\n        dataKey: key,\n        label: label,\n        width: 100,\n        className: type === 'number' ? 'right' : 'left',\n        headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n          type: type\n        }, props))\n      });\n    }), isThematic && /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"value\",\n      label: i18n.t('Value'),\n      width: 72,\n      className: \"right\",\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"number\"\n      }, props))\n    }), isThematic && /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"legend\",\n      label: i18n.t('Legend'),\n      width: 100,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"string\"\n      }, props))\n    }), isThematic && /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"range\",\n      label: i18n.t('Range'),\n      width: 72,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"string\"\n      }, props))\n    }), (isThematic || isOrgUnit) && /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"level\",\n      label: i18n.t('Level'),\n      width: 72,\n      className: \"right\",\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"number\"\n      }, props))\n    }), (isThematic || isOrgUnit) && /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"parentName\",\n      label: i18n.t('Parent'),\n      width: 100,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"string\"\n      }, props))\n    }), /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"type\",\n      label: i18n.t('Type'),\n      width: 100,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"string\"\n      }, props))\n    }), (isThematic || styleDataItem) && /*#__PURE__*/React.createElement(Column, {\n      dataKey: \"color\",\n      label: i18n.t('Color'),\n      width: 100,\n      headerRenderer: props => /*#__PURE__*/React.createElement(ColumnHeader, _extends({\n        type: \"string\"\n      }, props)),\n      cellRenderer: ColorCell\n    }), isEarthEngine && EarthEngineColumns({\n      aggregationType,\n      legend,\n      data\n    })), isLoading === true && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.loader\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noSupport\n    }, i18n.t('Data table is not supported when events are grouped on the server.'));\n  }\n}\n_defineProperty(DataTable, \"propTypes\", {\n  closeDataTable: PropTypes.func.isRequired,\n  height: PropTypes.number.isRequired,\n  highlightFeature: PropTypes.func.isRequired,\n  layer: PropTypes.object.isRequired,\n  setOrgUnitProfile: PropTypes.func.isRequired,\n  updateLayer: PropTypes.func.isRequired,\n  width: PropTypes.number.isRequired,\n  aggregations: PropTypes.object,\n  feature: PropTypes.object\n});\n_defineProperty(DataTable, \"defaultProps\", {\n  data: []\n});\nexport default connect(_ref8 => {\n  let {\n    dataTable,\n    map,\n    aggregations = {},\n    feature\n  } = _ref8;\n  const layer = map.mapViews.find(l => l.id === dataTable);\n  return layer ? {\n    layer,\n    feature,\n    aggregations: aggregations[layer.id]\n  } : {};\n}, {\n  closeDataTable,\n  updateLayer,\n  setOrgUnitProfile,\n  highlightFeature\n})(DataTable);","import { debounce } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nexport const WindowDimensionsCtx = /*#__PURE__*/createContext(null);\nconst windowDims = () => ({\n  height: window.innerHeight,\n  width: window.innerWidth\n});\nconst WindowDimensionsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [dimensions, setDimensions] = useState(windowDims());\n  useEffect(() => {\n    const handleResize = debounce(150, () => {\n      setDimensions(windowDims());\n    });\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(WindowDimensionsCtx.Provider, {\n    value: dimensions\n  }, children);\n};\nWindowDimensionsProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default WindowDimensionsProvider;\nexport const useWindowDimensions = () => useContext(WindowDimensionsCtx);","import React from 'react';\nexport const IconDrag = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"8\",\n  viewBox: \"0 0 15 8\",\n  width: \"15\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m1.5 5c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm6 0c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm6 0c.8284271 0 1.5.67157288 1.5 1.5s-.6715729 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.6715729-1.5 1.5-1.5zm-6-5c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm-6 0c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm12 0c.8284271 0 1.5.67157288 1.5 1.5s-.6715729 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.6715729-1.5 1.5-1.5z\",\n  fill: \"#6e7a8a\",\n  fillRule: \"evenodd\"\n}));","// extracted by mini-css-extract-plugin\nexport default {\"resizeHandle\":\"ResizeHandle_resizeHandle__688px\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconDrag } from '../core/icons.js';\nimport styles from './styles/ResizeHandle.module.css';\n\n// TODO: Remove globe cursor in chrome\n// https://stackoverflow.com/questions/6771196/stopping-chrome-from-changing-cursor-to-a-globe-while-dragging-a-link\n\nconst ResizeHandle = _ref => {\n  let {\n    onResize,\n    onResizeEnd,\n    minHeight,\n    maxHeight\n  } = _ref;\n  let dragHeight = 0;\n  const onDragStart = evt => {\n    // Set the drag ghost image to a transparent 1x1px\n    // https://stackoverflow.com/questions/7680285/how-do-you-turn-off-setdragimage\n    const img = document.createElement('img');\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    evt.dataTransfer.setDragImage(img, 0, 0);\n    evt.dataTransfer.setData('text/plain', 'node'); // Required to initialize dragging in Firefox\n\n    // https://stackoverflow.com/questions/23992091/drag-and-drop-directive-no-e-clientx-or-e-clienty-on-drag-event-in-firefox\n    document.ondragover = onDrag;\n  };\n  const onDrag = evt => {\n    const height = getHeight(evt || window.event);\n    if (height && onResize) {\n      onResize(height);\n      dragHeight = height;\n    }\n  };\n  const onDragEnd = evt => {\n    const height = getHeight(evt);\n    if (height && onResizeEnd) {\n      onResizeEnd(height);\n    }\n    document.ondragover = null;\n  };\n  const getHeight = evt => {\n    if (evt.pageY) {\n      const height = window.innerHeight - evt.pageY;\n      dragHeight = height < minHeight ? minHeight : height > maxHeight ? maxHeight : height;\n    }\n    return dragHeight;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.resizeHandle,\n    draggable: true,\n    onDragStart: evt => onDragStart(evt),\n    onDragEnd: evt => onDragEnd(evt)\n  }, /*#__PURE__*/React.createElement(IconDrag, null));\n};\nResizeHandle.propTypes = {\n  maxHeight: PropTypes.number.isRequired,\n  minHeight: PropTypes.number.isRequired,\n  onResize: PropTypes.func,\n  onResizeEnd: PropTypes.func\n};\nResizeHandle.defaultProps = {\n  minHeight: 50,\n  maxHeight: 500\n};\nexport default ResizeHandle;","// extracted by mini-css-extract-plugin\nexport default {\"bottomPanel\":\"BottomPanel_bottomPanel__v8ypx\",\"closeIcon\":\"BottomPanel_closeIcon__bVSfa\"};","import { IconCross16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { closeDataTable, resizeDataTable } from '../../actions/dataTable.js';\nimport { HEADER_HEIGHT, LAYERS_PANEL_WIDTH, RIGHT_PANEL_WIDTH } from '../../constants/layout.js';\nimport DataTable from '../datatable/DataTable.js';\nimport { useWindowDimensions } from '../WindowDimensionsProvider.js';\nimport ResizeHandle from './ResizeHandle.js';\nimport styles from './styles/BottomPanel.module.css';\n\n// Container for DataTable\nconst BottomPanel = _ref => {\n  let {\n    layersPanelOpen,\n    rightPanelOpen,\n    dataTableOpen,\n    dataTableHeight,\n    resizeDataTable,\n    closeDataTable\n  } = _ref;\n  const {\n    width,\n    height\n  } = useWindowDimensions();\n  const node = useRef(null);\n  const onResize = useCallback(h => node.current.style.height = `${h}px`, [node]);\n  if (dataTableOpen) {\n    const maxHeight = height - HEADER_HEIGHT - 20;\n    const tableHeight = dataTableHeight < maxHeight ? dataTableHeight : maxHeight;\n    const layersWidth = layersPanelOpen ? LAYERS_PANEL_WIDTH : 0;\n    const rightPanelWidth = rightPanelOpen ? RIGHT_PANEL_WIDTH : 0;\n    const tableWidth = width - layersWidth - rightPanelWidth;\n    const style = {\n      height: tableHeight,\n      left: layersWidth,\n      right: rightPanelWidth\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: node,\n      className: styles.bottomPanel,\n      style: style\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.closeIcon,\n      onClick: closeDataTable\n    }, /*#__PURE__*/React.createElement(IconCross16, null)), /*#__PURE__*/React.createElement(ResizeHandle, {\n      maxHeight: maxHeight,\n      onResize: onResize,\n      onResizeEnd: resizeDataTable\n    }), /*#__PURE__*/React.createElement(DataTable, {\n      width: tableWidth,\n      height: tableHeight\n    }));\n  }\n  return null;\n};\nBottomPanel.propTypes = {\n  closeDataTable: PropTypes.func.isRequired,\n  dataTableHeight: PropTypes.number.isRequired,\n  dataTableOpen: PropTypes.bool.isRequired,\n  layersPanelOpen: PropTypes.bool.isRequired,\n  resizeDataTable: PropTypes.func.isRequired,\n  rightPanelOpen: PropTypes.bool.isRequired\n};\nexport default connect(_ref2 => {\n  let {\n    dataTable,\n    ui\n  } = _ref2;\n  return {\n    dataTableOpen: !!dataTable,\n    dataTableHeight: ui.dataTableHeight,\n    layersPanelOpen: ui.layersPanelOpen,\n    rightPanelOpen: ui.rightPanelOpen\n  };\n}, {\n  closeDataTable,\n  resizeDataTable\n})(BottomPanel);","export const HEADER_HEIGHT = 86;\nexport const LAYERS_PANEL_WIDTH = 300;\nexport const RIGHT_PANEL_WIDTH = 380;","import { useDataEngine } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useState, useEffect, createContext } from 'react';\nimport { DEFAULT_SYSTEM_SETTINGS, SYSTEM_SETTINGS } from '../constants/settings.js';\nexport const systemSettingsQuery = {\n  resource: 'systemSettings',\n  params: {\n    key: SYSTEM_SETTINGS\n  }\n};\nexport const SystemSettingsCtx = /*#__PURE__*/createContext({});\nconst periodSetting = /keyHide(.*)Periods/;\nconst getHiddenPeriods = systemSettings => {\n  return Object.keys(systemSettings).filter(setting => periodSetting.test(setting) && systemSettings[setting]).map(setting => setting.match(periodSetting)[1].toUpperCase());\n};\nconst SystemSettingsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [settings, setSettings] = useState({});\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        systemSettings\n      } = await engine.query({\n        systemSettings: systemSettingsQuery\n      });\n      setSettings(Object.assign({}, DEFAULT_SYSTEM_SETTINGS, systemSettings, {\n        hiddenPeriods: getHiddenPeriods(systemSettings)\n      }));\n    }\n    fetchData();\n  }, [engine]);\n  return /*#__PURE__*/React.createElement(SystemSettingsCtx.Provider, {\n    value: settings\n  }, children);\n};\nSystemSettingsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default SystemSettingsProvider;\nexport const useSystemSettings = () => useContext(SystemSettingsCtx);","import * as types from '../constants/actionTypes.js';\n\n// Add dimension filter\nexport const addDimensionFilter = filter => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_ADD,\n  filter\n});\n\n// Remove dimension filter\nexport const removeDimensionFilter = index => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_REMOVE,\n  index\n});\n\n// Chenge a dimension filter in an array\nexport const changeDimensionFilter = (index, filter) => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_CHANGE,\n  index,\n  filter\n});\n\n// Add event filter\nexport const addFilter = filter => ({\n  type: types.LAYER_EDIT_FILTER_ADD,\n  filter\n});\n\n// Remove event filter\nexport const removeFilter = index => ({\n  type: types.LAYER_EDIT_FILTER_REMOVE,\n  index\n});\n\n// Change event filter\nexport const changeFilter = (index, filter) => ({\n  type: types.LAYER_EDIT_FILTER_CHANGE,\n  index,\n  filter\n});\n\n// Set program used (event and thematic)\nexport const setProgram = program => ({\n  type: types.LAYER_EDIT_PROGRAM_SET,\n  program\n});\n\n// Set program stage used (event)\nexport const setProgramStage = programStage => ({\n  type: types.LAYER_EDIT_PROGRAM_STAGE_SET,\n  programStage\n});\n\n// Set data item (thematic)\nexport const setDataItem = (dataItem, dimension) => ({\n  type: types.LAYER_EDIT_DATA_ITEM_SET,\n  dataItem,\n  dimension\n});\n\n// Set program indicator used (thematic)\nexport const setDataElementGroup = dataElementGroup => ({\n  type: types.LAYER_EDIT_DATA_ELEMENT_GROUP_SET,\n  dataElementGroup\n});\n\n// Set data element operand (operand = true = details, operand = false = totals)\nexport const setOperand = operand => ({\n  type: types.LAYER_EDIT_OPERAND_SET,\n  operand\n});\n\n// Set data element used for styling (event)\nexport const setStyleDataItem = dataItem => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_SET,\n  dataItem\n});\n\n// Set options for style data element with option set (options are loaded separately) (event layer)\nexport const setOptionStyle = options => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET,\n  options\n});\nexport const setBooleanStyle = (value, color) => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET,\n  value,\n  color\n});\n\n// Set thematic map type (choropleth, bubble map)\nexport const setThematicMapType = type => ({\n  type: types.LAYER_EDIT_THEMATIC_MAP_TYPE_SET,\n  payload: type\n});\n\n// Set classification style (method, classes, colorScale)\nexport const setClassification = method => ({\n  type: types.LAYER_EDIT_CLASSIFICATION_SET,\n  method\n});\nexport const setColorScale = colorScale => ({\n  type: types.LAYER_EDIT_COLOR_SCALE_SET,\n  colorScale\n});\n\n// Set event status\nexport const setEventStatus = status => ({\n  type: types.LAYER_EDIT_EVENT_STATUS_SET,\n  status\n});\n\n// Set coordinate field\nexport const setEventCoordinateField = fieldId => ({\n  type: types.LAYER_EDIT_EVENT_COORDINATE_FIELD_SET,\n  fieldId\n});\n\n// Set if event clustering should be used (event)\nexport const setEventClustering = checked => ({\n  type: types.LAYER_EDIT_EVENT_CLUSTERING_SET,\n  checked\n});\n\n// Set event point radius (event layer)\nexport const setEventPointRadius = radius => ({\n  type: types.LAYER_EDIT_EVENT_POINT_RADIUS_SET,\n  radius\n});\n\n// Set event point color (event layer)\nexport const setEventPointColor = color => ({\n  type: types.LAYER_EDIT_EVENT_POINT_COLOR_SET,\n  color\n});\nexport const setRelatedPointColor = color => ({\n  type: types.LAYER_EDIT_RELATED_POINT_COLOR_SET,\n  color\n});\nexport const setRelatedPointRadius = radius => ({\n  type: types.LAYER_EDIT_RELATED_POINT_RADIUS_SET,\n  radius\n});\nexport const setRelationshipLineColor = color => ({\n  type: types.LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET,\n  color\n});\n\n// Set organisation unit group set (facility and org unit layer)\nexport const setOrganisationUnitGroupSet = organisationUnitGroupSet => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET,\n  organisationUnitGroupSet\n});\n\n// Set organisation unit color (org unit and facility layer)\nexport const setOrganisationUnitColor = color => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET,\n  color\n});\nexport const setOrganisationUnitField = payload => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET,\n  payload\n});\n\n// Set period label (earth engine)\nexport const setPeriodName = periodName => ({\n  type: types.LAYER_EDIT_PERIOD_NAME_SET,\n  periodName\n});\n\n// Set period type (thematic)\nexport const setPeriodType = function (periodType) {\n  let clearPeriod = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return {\n    type: types.LAYER_EDIT_PERIOD_TYPE_SET,\n    periodType,\n    clearPeriod\n  };\n};\n\n// Set period (event & thematic)\nexport const setPeriod = period => ({\n  type: types.LAYER_EDIT_PERIOD_SET,\n  period\n});\n\n// Set start date (event)\nexport const setStartDate = startDate => ({\n  type: types.LAYER_EDIT_START_DATE_SET,\n  startDate\n});\n\n// Set end date (event)\nexport const setEndDate = endDate => ({\n  type: types.LAYER_EDIT_END_DATE_SET,\n  endDate\n});\n\n// Set value type (thematic)\nexport const setValueType = (valueType, keepColumns) => ({\n  type: types.LAYER_EDIT_VALUE_TYPE_SET,\n  valueType,\n  keepColumns // Kept if favorite is loaded\n});\n\n// Set indicator group (thematic)\nexport const setIndicatorGroup = indicatorGroup => ({\n  type: types.LAYER_EDIT_INDICATOR_GROUP_SET,\n  indicatorGroup\n});\n\n// Set aggregation type (thematic/earth engine)\nexport const setAggregationType = aggregationType => ({\n  type: types.LAYER_EDIT_AGGREGATION_TYPE_SET,\n  aggregationType\n});\n\n// Set organisation units\nexport const setOrgUnits = payload => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNITS_SET,\n  payload\n});\n\n// Set org. unit mode\nexport const setOrgUnitMode = mode => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_MODE_SET,\n  payload: mode\n});\n\n// Set layer params (EE)\nexport const setParams = params => ({\n  type: types.LAYER_EDIT_PARAMS_SET,\n  payload: params\n});\n\n// Set collection filter (EE)\nexport const setFilter = filter => ({\n  type: types.LAYER_EDIT_FILTER_SET,\n  filter\n});\n\n// Set band (EE)\nexport const setBand = band => ({\n  type: types.LAYER_EDIT_BAND_SET,\n  payload: band\n});\n\n// Set label visibility\nexport const setLabels = isChecked => ({\n  type: types.LAYER_EDIT_LABELS_SET,\n  isChecked\n});\nexport const setLabelTemplate = template => ({\n  type: types.LAYER_EDIT_LABEL_TEMPLATE,\n  template\n});\n\n// Set label font style (italic)\nexport const setLabelFontSize = size => ({\n  type: types.LAYER_EDIT_LABEL_FONT_SIZE_SET,\n  size\n});\n\n// Set label font weight (bold)\nexport const setLabelFontWeight = weight => ({\n  type: types.LAYER_EDIT_LABEL_FONT_WEIGHT_SET,\n  weight\n});\n\n// Set label font style\nexport const setLabelFontStyle = style => ({\n  type: types.LAYER_EDIT_LABEL_FONT_STYLE_SET,\n  style\n});\n\n// Set label font color\nexport const setLabelFontColor = color => ({\n  type: types.LAYER_EDIT_LABEL_FONT_COLOR_SET,\n  color\n});\n\n// Set area radius (facility)\nexport const setBufferRadius = radius => ({\n  type: types.LAYER_EDIT_BUFFER_RADIUS_SET,\n  radius\n});\n\n// Set point radius low (thematic, org unit)\nexport const setRadiusLow = radius => ({\n  type: types.LAYER_EDIT_RADIUS_LOW_SET,\n  radius\n});\n\n// Set point radius high (thematic)\nexport const setRadiusHigh = radius => ({\n  type: types.LAYER_EDIT_RADIUS_HIGH_SET,\n  radius\n});\n\n// Set legend set (event, thematic)\nexport const setLegendSet = legendSet => ({\n  type: types.LAYER_EDIT_LEGEND_SET_SET,\n  legendSet\n});\n\n// Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const setOrgUnitPath = (id, path) => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_PATH_SET,\n  id,\n  path\n});\n\n// Set the tracked entity type\nexport const setTrackedEntityType = trackedEntityType => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_TYPE_SET,\n  trackedEntityType\n});\n\n// Set the type of tracked entity relationship to render\nexport const setTrackedEntityRelationshipType = relationshipType => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET,\n  relationshipType\n});\nexport const setTrackedEntityRelationshipOutsideProgram = checked => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET,\n  payload: checked\n});\n\n// Set program status for a TEI\nexport const setProgramStatus = status => ({\n  type: types.LAYER_EDIT_PROGRAM_STATUS_SET,\n  payload: status\n});\n\n// Set follow up status of a TEI for a given program\nexport const setFollowUpStatus = checked => ({\n  type: types.LAYER_EDIT_FOLLOW_UP_SET,\n  payload: checked\n});\n\n// Set display mode for periods\nexport const setRenderingStrategy = display => ({\n  type: types.LAYER_EDIT_RENDERING_STRATEGY_SET,\n  payload: display\n});\n\n// Set no data color\nexport const setNoDataColor = color => ({\n  type: types.LAYER_EDIT_NO_DATA_COLOR_SET,\n  payload: color\n});","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"Checkbox_checkbox__7HlL+\"};","import { Checkbox as UiCheckbox } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Checkbox.module.css';\n\n// Wrapper around @dhis2/ui checkbox for unified handling and styling\nconst Checkbox = _ref => {\n  let {\n    label,\n    checked = false,\n    disabled,\n    dense = true,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.checkbox, className)\n  }, /*#__PURE__*/React.createElement(UiCheckbox, {\n    label: label,\n    checked: checked,\n    dense: dense,\n    disabled: disabled,\n    onChange: _ref2 => {\n      let {\n        checked\n      } = _ref2;\n      return onChange(checked);\n    }\n  }));\n};\nCheckbox.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  checked: PropTypes.bool,\n  className: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  label: PropTypes.string\n};\nexport default Checkbox;","// extracted by mini-css-extract-plugin\nexport default {\"colorButton\":\"ColorButton_colorButton__-dp85\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ColorButton.module.css';\nconst ColorButton = _ref => {\n  let {\n    color,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"label\", {\n    className: cx(styles.colorButton, className),\n    style: {\n      backgroundImage: `radial-gradient(\n                        circle, ${color} 35%, transparent 40%\n                    )`\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"color\",\n    value: color,\n    onChange: e => onChange(e.target.value.toUpperCase())\n  }));\n};\nColorButton.propTypes = {\n  color: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string\n};\nexport default ColorButton;","// extracted by mini-css-extract-plugin\nexport default {\"colorPicker\":\"ColorPicker_colorPicker__C84HM\",\"label\":\"ColorPicker_label__VNgc2\",\"icon\":\"ColorPicker_icon__mL6n4\",\"dark\":\"ColorPicker_dark__09ZgO\"};","import { IconChevronDown24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { isDarkColor } from '../../util/colors.js';\nimport styles from './styles/ColorPicker.module.css';\nconst ColorPicker = _ref => {\n  let {\n    color,\n    label,\n    width,\n    height,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.colorPicker, className)\n  }, label && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, label), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      backgroundColor: color,\n      width: width || '100%',\n      height: height || 32\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.icon, {\n      [styles.dark]: !isDarkColor(color)\n    })\n  }, /*#__PURE__*/React.createElement(IconChevronDown24, null)), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"color\",\n    value: color,\n    onChange: e => onChange(e.target.value.toUpperCase())\n  }))));\n};\nColorPicker.propTypes = {\n  color: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  label: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default ColorPicker;","// extracted by mini-css-extract-plugin\nexport default {\"colorScale\":\"ColorScale_colorScale__pimdd\",\"item\":\"ColorScale_item__zK7Rn\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport colorbrewer from '../../constants/colorbrewer.js';\nimport styles from './styles/ColorScale.module.css';\n\n// Returns one color scale based on a code and number of classes\nconst ColorScale = _ref => {\n  let {\n    scale,\n    bins,\n    width,\n    onClick\n  } = _ref;\n  const colors = colorbrewer[scale][bins];\n  const itemWidth = width ? width / bins : 36;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    onClick: () => onClick(scale),\n    className: styles.colorScale,\n    style: {\n      ...(width && {\n        width\n      })\n    }\n  }, colors.map((color, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: styles.item,\n    style: {\n      backgroundColor: color,\n      width: itemWidth\n    }\n  })));\n};\nColorScale.propTypes = {\n  bins: PropTypes.number.isRequired,\n  scale: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  width: PropTypes.number\n};\nexport default ColorScale;","// extracted by mini-css-extract-plugin\nexport default {\"colorScale\":\"ColorScaleSelect_colorScale__VHsxt\",\"popover\":\"ColorScaleSelect_popover__i1BE6\"};","import { Popover } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useState, useRef } from 'react';\nimport { colorScales, getColorScale, getColorPalette } from '../../util/colors.js';\nimport ColorScale from './ColorScale.js';\nimport styles from './styles/ColorScaleSelect.module.css';\nconst ColorScaleSelect = _ref => {\n  let {\n    palette,\n    width,\n    onChange,\n    className\n  } = _ref;\n  const [isOpen, setIsOpen] = useState(false);\n  const anchorRef = useRef();\n  const bins = palette.split(',').length;\n  const scale = getColorScale(palette);\n  const onColorScaleSelect = scale => {\n    const classes = palette.split(',').length;\n    onChange(getColorPalette(scale, classes));\n    setIsOpen(false);\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: cx(styles.colorScale, className)\n  }, /*#__PURE__*/React.createElement(ColorScale, {\n    bins: bins,\n    scale: scale,\n    onClick: () => setIsOpen(true),\n    width: width || 260\n  })), isOpen && /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.popover,\n    style: {\n      width: width + 24 || 260\n    }\n  }, colorScales.map((scale, index) => /*#__PURE__*/React.createElement(ColorScale, {\n    key: index,\n    scale: scale,\n    bins: bins,\n    onClick: onColorScaleSelect,\n    width: width || 260\n  })))));\n};\nColorScaleSelect.propTypes = {\n  palette: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  width: PropTypes.number\n};\nexport default ColorScaleSelect;","import PropTypes from 'prop-types';\nconst ConditionalWrapper = _ref => {\n  let {\n    condition,\n    wrapper,\n    children\n  } = _ref;\n  return condition ? wrapper(children) : children;\n};\nConditionalWrapper.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  condition: PropTypes.bool.isRequired,\n  wrapper: PropTypes.elementType.isRequired\n};\nexport default ConditionalWrapper;","// extracted by mini-css-extract-plugin\nexport default {\"datePicker\":\"DatePicker_datePicker__QumBO\",\"label\":\"DatePicker_label__+Ajvr\",\"content\":\"DatePicker_content__psb1W\",\"box\":\"DatePicker_box__BB-cV\",\"inputDiv\":\"DatePicker_inputDiv__zcYR+\",\"input\":\"DatePicker_input__LTL60\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useEffect } from 'react';\nimport styles from './styles/DatePicker.module.css';\n\n// Fallback on browser native until full DatePicker support in @dhis2/ui\nconst DatePicker = _ref => {\n  let {\n    label,\n    name,\n    defaultVal,\n    onBlur,\n    className\n  } = _ref;\n  const inputEl = useRef(null);\n  useEffect(() => {\n    if (inputEl.current) {\n      inputEl.current.defaultValue = defaultVal;\n    }\n  }, [defaultVal]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.datePicker, className)\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: styles.label\n  }, label), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.box\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputDiv\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: styles.input,\n    ref: inputEl,\n    type: \"date\",\n    name: name,\n    onBlur: e => onBlur(e.target.value)\n  })))));\n};\nDatePicker.propTypes = {\n  label: PropTypes.string.isRequired,\n  onBlur: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  defaultVal: PropTypes.string,\n  name: PropTypes.string\n};\nexport default DatePicker;","// extracted by mini-css-extract-plugin\nexport default {\"inputField\":\"InputField_inputField__wKerC\"};","import { InputField } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/InputField.module.css';\nconst NumberField = _ref => {\n  let {\n    label,\n    value,\n    min,\n    max,\n    step = 1,\n    dense = true,\n    disabled,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(InputField, {\n    dense: dense,\n    type: \"number\",\n    min: String(min),\n    max: String(max),\n    step: String(step),\n    label: label,\n    value: Number.isNaN(value) ? '' : String(value),\n    disabled: disabled,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onChange(value);\n    }\n  }));\n};\nNumberField.propTypes = {\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  max: PropTypes.number,\n  min: PropTypes.number,\n  step: PropTypes.number,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nexport default NumberField;","// extracted by mini-css-extract-plugin\nexport default {\"fontStyle\":\"FontStyle_fontStyle__3-gC4\",\"textSize\":\"FontStyle_textSize__1uiRc\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, IconTextBold24, IconTextItalic24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { LABEL_FONT_SIZE, LABEL_FONT_SIZE_MIN, LABEL_FONT_SIZE_MAX, LABEL_FONT_COLOR } from '../../constants/layers.js';\nimport { cssColor } from '../../util/colors.js';\nimport ColorButton from './ColorButton.js';\nimport NumberField from './NumberField.js';\nimport styles from './styles/FontStyle.module.css';\nconst FontStyle = _ref => {\n  let {\n    color,\n    size,\n    weight,\n    fontStyle,\n    onColorChange,\n    onSizeChange,\n    onWeightChange,\n    onStyleChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.fontStyle, className)\n  }, onSizeChange && /*#__PURE__*/React.createElement(NumberField, {\n    dense: true,\n    label: i18n.t('Size'),\n    min: LABEL_FONT_SIZE_MIN,\n    max: LABEL_FONT_SIZE_MAX,\n    value: parseInt(size !== undefined ? size : LABEL_FONT_SIZE, 10),\n    onChange: value => onSizeChange(value + 'px'),\n    className: styles.textSize\n  }), onColorChange && /*#__PURE__*/React.createElement(ColorButton, {\n    color: cssColor(color) || LABEL_FONT_COLOR,\n    onChange: onColorChange,\n    button: true\n  }), onWeightChange && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(IconTextBold24, null),\n    onClick: () => {\n      onWeightChange(weight === 'bold' ? 'normal' : 'bold');\n    },\n    secondary: true,\n    toggled: weight === 'bold'\n  }), onStyleChange && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(IconTextItalic24, null),\n    onClick: () => {\n      onStyleChange(fontStyle === 'italic' ? 'normal' : 'italic');\n    },\n    secondary: true,\n    toggled: fontStyle === 'italic'\n  }));\n};\nFontStyle.propTypes = {\n  className: PropTypes.string,\n  color: PropTypes.string,\n  fontStyle: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  weight: PropTypes.string,\n  onColorChange: PropTypes.func,\n  onSizeChange: PropTypes.func,\n  onStyleChange: PropTypes.func,\n  onWeightChange: PropTypes.func\n};\nexport default FontStyle;","// extracted by mini-css-extract-plugin\nexport default {\"help\":\"Help_help__NuORs\",\"content\":\"Help_content__tANr9\"};","import { IconInfo16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Help.module.css';\n\n// Adds info icon next to help content\nconst HelpWithIcon = _ref => {\n  let {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.help\n  }, /*#__PURE__*/React.createElement(IconInfo16, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, children));\n};\nHelpWithIcon.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default HelpWithIcon;","// extracted by mini-css-extract-plugin\nexport default {\"iconButton\":\"IconButton_iconButton__2JNZa\",\"icon\":\"IconButton_icon__SRU86\"};","import { Tooltip } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/IconButton.module.css';\nconst IconButton = _ref => {\n  let {\n    tooltip,\n    onClick,\n    className,\n    children,\n    dataTest\n  } = _ref;\n  const icon = /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.icon\n  }, children);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onClick: onClick,\n    className: cx(styles.iconButton, className),\n    \"data-test\": dataTest\n  }, tooltip ? /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltip\n  }, icon) : icon);\n};\nIconButton.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  tooltip: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default IconButton;","// extracted by mini-css-extract-plugin\nexport default {\"imageSelect\":\"ImageSelect_imageSelect__wmj1K\",\"title\":\"ImageSelect_title__QUmHA\",\"imageContainer\":\"ImageSelect_imageContainer__7YHVp\",\"imageContainerSelected\":\"ImageSelect_imageContainerSelected__hGrAW\",\"image\":\"ImageSelect_image__j5GA1\",\"noImage\":\"ImageSelect_noImage__ZJ8Qm\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ImageSelect.module.css';\nconst ImageSelect = _ref => {\n  let {\n    id,\n    img,\n    title,\n    isSelected,\n    onClick,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageSelect, className),\n    title: title,\n    onClick: () => onClick(id)\n  }, title ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title\n  }, title) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageContainer, {\n      [styles.imageContainerSelected]: isSelected\n    })\n  }, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  })));\n};\nImageSelect.propTypes = {\n  id: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  img: PropTypes.string,\n  isSelected: PropTypes.bool,\n  title: PropTypes.string\n};\nexport default ImageSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { LABEL_TEMPLATE_NAME_ONLY, LABEL_TEMPLATE_NAME_AND_VALUE, LABEL_TEMPLATE_VALUE_ONLY } from '../../constants/layers.js';\nimport { SelectField } from '.';\nconst getLabelDisplayOptions = () => [{\n  id: LABEL_TEMPLATE_NAME_ONLY,\n  name: i18n.t('Name')\n}, {\n  id: LABEL_TEMPLATE_NAME_AND_VALUE,\n  name: i18n.t('Name and value')\n}, {\n  id: LABEL_TEMPLATE_VALUE_ONLY,\n  name: i18n.t('Value')\n}];\nconst LabelDisplayOptions = _ref => {\n  let {\n    option,\n    onDisplayOptionChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Display'),\n    loading: false,\n    items: getLabelDisplayOptions(),\n    value: option || null,\n    onChange: _ref2 => {\n      let {\n        id\n      } = _ref2;\n      return onDisplayOptionChange(id);\n    }\n  });\n};\nLabelDisplayOptions.propTypes = {\n  onDisplayOptionChange: PropTypes.func.isRequired,\n  option: PropTypes.string\n};\nexport default LabelDisplayOptions;","// extracted by mini-css-extract-plugin\nexport default {\"menuButton\":\"MenuButton_menuButton__EbGCn\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/MenuButton.module.css';\n\n/* Copied from https://github.com/dhis2/data-visualizer-app/blob/master/packages/app/src/components/MenuButton/MenuButton.js */\nconst MenuButton = _ref => {\n  let {\n    children,\n    dataTest,\n    disabled,\n    name,\n    onBlur,\n    onClick,\n    onFocus\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.menuButton,\n    \"data-test\": dataTest,\n    disabled: disabled,\n    name: name,\n    onBlur: onBlur,\n    onClick: onClick,\n    onFocus: onFocus\n  }, children);\n};\nMenuButton.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default MenuButton;","// extracted by mini-css-extract-plugin\nexport default {\"radioGroup\":\"RadioGroup_radioGroup__B8D+1\",\"row\":\"RadioGroup_row__D+3T7\"};","import { FieldGroup } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport styles from './styles/RadioGroup.module.css';\nexport const RadioContext = /*#__PURE__*/React.createContext();\nconst RadioGroup = _ref => {\n  let {\n    value,\n    label,\n    helpText,\n    display,\n    onChange,\n    children,\n    dataTest\n  } = _ref;\n  const [radio, setRadio] = useState(value);\n  useEffect(() => {\n    if (value !== radio) {\n      setRadio(value);\n    }\n  }, [value, radio]);\n  return /*#__PURE__*/React.createElement(RadioContext.Provider, {\n    value: {\n      radio,\n      onChange\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.radioGroup, {\n      [styles.row]: display === 'row'\n    })\n  }, /*#__PURE__*/React.createElement(FieldGroup, {\n    label: label,\n    helpText: helpText,\n    dataTest: dataTest\n  }, children)));\n};\nRadioGroup.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  children: PropTypes.arrayOf(PropTypes.node),\n  dataTest: PropTypes.string,\n  display: PropTypes.string,\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default RadioGroup;","import { Radio as UiRadio } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useContext } from 'react';\nimport { RadioContext } from './RadioGroup.js';\nconst Radio = _ref => {\n  let {\n    value,\n    disabled,\n    dense = true,\n    dataTest,\n    label\n  } = _ref;\n  const {\n    radio,\n    onChange\n  } = useContext(RadioContext);\n\n  // onChange is from the parent component\n  const onClick = () => {\n    if (value !== radio) {\n      onChange(value);\n    }\n  };\n  return /*#__PURE__*/React.createElement(UiRadio, {\n    label: label,\n    dense: dense,\n    disabled: disabled,\n    checked: value === radio,\n    onChange: onClick,\n    dataTest: dataTest\n  });\n};\nRadio.propTypes = {\n  label: PropTypes.string.isRequired,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default Radio;","import { SingleSelectField, SingleSelectOption, MultiSelectField, MultiSelectOption } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport styles from './styles/InputField.module.css';\n\n/**\n * Wrapper component around @dhis2/ui SingleSelectField and MultiSelectField\n * Allows options to be created from an array of models (containing id and name properties)\n * id can be numbers, although @dhis2/ui requires option values to be strings.\n */\nconst SelectField = props => {\n  const {\n    dense = true,\n    errorText,\n    helpText,\n    warning,\n    items,\n    label,\n    prefix,\n    loading,\n    multiple,\n    disabled,\n    onChange,\n    className,\n    value,\n    dataTest\n  } = props;\n  const isLoading = loading === true;\n  const Select = multiple ? MultiSelectField : SingleSelectField;\n  const Option = multiple ? MultiSelectOption : SingleSelectOption;\n  let selected;\n  if (multiple) {\n    selected = Array.isArray(value) ? value.map(v => String(v)) : [];\n  } else {\n    selected = value !== undefined && value !== null ? String(value) : '';\n  }\n\n  // Returns selected items in the original format\n  const onSelectChange = useCallback(_ref => {\n    let {\n      selected\n    } = _ref;\n    return onChange(multiple ? items.filter(item => selected.includes(String(item.id))).map(item => item.id) : items.find(item => String(item.id) === selected));\n  }, [items, multiple, onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(Select, {\n    dense: dense,\n    label: label,\n    prefix: prefix,\n    selected: !isLoading ? selected : undefined,\n    disabled: disabled,\n    loading: isLoading,\n    error: !!errorText,\n    warning: !!warning,\n    validationText: warning ? warning : errorText,\n    helpText: helpText,\n    onChange: onSelectChange,\n    dataTest: dataTest\n  }, items && items.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Option, {\n      key: id,\n      value: String(id),\n      label: name\n    });\n  })));\n};\nSelectField.propTypes = {\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  errorText: PropTypes.string,\n  // If set, shows the error message below the SelectField\n  helpText: PropTypes.string,\n  // If set, shows the help text below the SelectField\n  items: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    name: PropTypes.string\n  })),\n  label: PropTypes.string,\n  // If true, spinner will be shown in the select menu. If string, the text will be shown\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  // If true, then use multiple selection. Adds a checkbox to each menu item.\n  multiple: PropTypes.bool,\n  prefix: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number]))]),\n  warning: PropTypes.string,\n  // If set, shows the warning message below the SelectField\n  onChange: PropTypes.func\n};\nexport default SelectField;","import { TabBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nexport const TabContext = /*#__PURE__*/React.createContext();\nconst Tabs = _ref => {\n  let {\n    value,\n    onChange,\n    children\n  } = _ref;\n  const [tab, setTab] = useState(value);\n  useEffect(() => {\n    if (value !== tab) {\n      setTab(value);\n    }\n  }, [value, tab]);\n  return /*#__PURE__*/React.createElement(TabContext.Provider, {\n    value: {\n      tab,\n      onChange\n    }\n  }, /*#__PURE__*/React.createElement(TabBar, {\n    fixed: true\n  }, children));\n};\nTabs.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default Tabs;","import { Tab as UiTab } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useContext } from 'react';\nimport { TabContext } from './Tabs.js';\nconst Tab = _ref => {\n  let {\n    value,\n    dataTest,\n    children\n  } = _ref;\n  const {\n    tab,\n    onChange\n  } = useContext(TabContext);\n\n  // onChange is from the parent component\n  const onClick = () => {\n    if (value !== tab) {\n      onChange(value);\n    }\n  };\n  return /*#__PURE__*/React.createElement(UiTab, {\n    selected: value === tab,\n    onClick: onClick,\n    dataTest: dataTest\n  }, children);\n};\nTab.propTypes = {\n  children: PropTypes.node.isRequired,\n  value: PropTypes.string.isRequired,\n  dataTest: PropTypes.string\n};\nexport default Tab;","import { InputField } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/InputField.module.css';\n\n// Wrapper component around @dhis2/ui InputField\nconst TextField = _ref => {\n  let {\n    type,\n    label,\n    value,\n    dense = true,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(InputField, {\n    dense: dense,\n    type: type,\n    label: label,\n    value: value,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onChange(value);\n    }\n  }));\n};\nTextField.propTypes = {\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dense: PropTypes.bool,\n  type: PropTypes.string,\n  value: PropTypes.string\n};\nexport default TextField;","// Qualitative colors From ColorBrewer (reordered 12-class)\nexport const qualitativeColors = ['#1f78b4', '#ff7f00', '#33a02c', '#a6cee3', '#b2df8a', '#fb9a99', '#fdbf6f', '#cab2d6', '#ffff99', '#b15928', '#6a3d9a', '#e31a1c'];","import i18n from '@dhis2/d2-i18n';\nimport { uniqBy } from 'lodash/fp';\nimport { qualitativeColors } from '../constants/colors.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, ORG_UNIT_RADIUS_SMALL, STYLE_TYPE_COLOR, STYLE_TYPE_SYMBOL, NONE } from '../constants/layers.js';\nimport { apiFetch } from './api.js';\nimport { getUniqueColor } from './colors.js';\nimport { getDisplayPropertyUrl } from './helpers.js';\nconst getGroupColor = groups => {\n  const groupsWithoutColors = groups.filter(g => !g.color);\n  const colors = getUniqueColor(qualitativeColors);\n  return group => {\n    const index = groupsWithoutColors.findIndex(g => g.id === group.id);\n    return colors(index);\n  };\n};\n\n// Default symbol 21-25 are coloured circles\nconst getGroupSymbol = groups => {\n  const groupsWithoutSymbols = groups.filter(g => !g.symbol);\n  return group => {\n    const index = groupsWithoutSymbols.findIndex(g => g.id === group.id);\n    return index < 5 ? `${21 + index}.png` : '25.png';\n  };\n};\nexport const parseGroupSet = _ref => {\n  let {\n    organisationUnitGroups: groups\n  } = _ref;\n  groups.sort((a, b) => a.name.localeCompare(b.name));\n  const getColor = getGroupColor(groups);\n  const getSymbol = getGroupSymbol(groups);\n  return groups.map(group => ({\n    ...group,\n    color: group.color || getColor(group),\n    symbol: group.symbol || getSymbol(group)\n  }));\n};\nexport const fetchOrgUnitGroupSet = id => apiFetch(`/organisationUnitGroupSets/${id}?fields=organisationUnitGroups[id,name,color,symbol]`).then(parseGroupSet);\nexport const getPointItems = data => data.filter(d => d.ty === 1);\nexport const getPolygonItems = data => data.filter(d => d.ty === 2);\nexport const getOrgUnitStyle = (dimensions, groupSet) => groupSet && groupSet.organisationUnitGroups && dimensions && dimensions[groupSet.id] ? groupSet.organisationUnitGroups.find(g => g.id === dimensions[groupSet.id]) : {};\nexport const getOrgUnitGroupLegendItems = function () {\n  let groups = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let useColor = arguments.length > 1 ? arguments[1] : undefined;\n  let contextPath = arguments.length > 2 ? arguments[2] : undefined;\n  return groups.map(_ref2 => {\n    let {\n      name,\n      color = true,\n      symbol\n    } = _ref2;\n    return useColor ? {\n      name,\n      color\n    } : {\n      name,\n      image: `${contextPath}/images/orgunitgroup/${symbol}`\n    };\n  });\n};\n\n/* eslint-disable max-params */\nexport const getStyledOrgUnits = function () {\n  let features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let groupSet = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let {\n    organisationUnitColor = ORG_UNIT_COLOR,\n    radiusLow = ORG_UNIT_RADIUS\n  } = arguments.length > 2 ? arguments[2] : undefined;\n  let contextPath = arguments.length > 3 ? arguments[3] : undefined;\n  let orgUnitLevels = arguments.length > 4 ? arguments[4] : undefined;\n  const {\n    name,\n    styleType = orgUnitLevels ? STYLE_TYPE_COLOR : STYLE_TYPE_SYMBOL,\n    organisationUnitGroups = []\n  } = groupSet;\n  const isFacilityLayer = !orgUnitLevels;\n  let levelWeight;\n  let levelItems = [];\n  if (!isFacilityLayer) {\n    const levels = uniqBy(f => f.properties.level, features).map(f => f.properties.level).sort();\n    levelWeight = level => Math.pow(levels.length - levels.indexOf(level), 1.2);\n    levelItems = levels.map(level => ({\n      name: orgUnitLevels[level],\n      color: organisationUnitColor,\n      weight: levelWeight(level)\n    }));\n  }\n  const useColor = styleType === STYLE_TYPE_COLOR;\n  let styledFeatures = features.map(f => {\n    const isPoint = f.geometry.type === 'Point';\n    const {\n      hasAdditionalGeometry\n    } = f.properties;\n    const {\n      color,\n      symbol\n    } = getOrgUnitStyle(f.properties.dimensions, groupSet);\n    let radius;\n    if (isPoint) {\n      radius = hasAdditionalGeometry ? ORG_UNIT_RADIUS_SMALL + 1 : radiusLow;\n    }\n    const properties = {\n      ...f.properties,\n      radius\n    };\n    if (useColor && color) {\n      properties.color = hasAdditionalGeometry ? ORG_UNIT_COLOR : color;\n    } else if (symbol) {\n      properties.iconUrl = `${contextPath}/images/orgunitgroup/${symbol}`;\n    }\n    if (properties.level && levelWeight) {\n      properties.weight = levelWeight(f.properties.level);\n    }\n    return {\n      ...f,\n      properties\n    };\n  });\n\n  // Only include facilities having a group membership\n  if (isFacilityLayer && groupSet.id && !useColor) {\n    styledFeatures = styledFeatures.filter(f => f.properties.iconUrl);\n  }\n  const groupItems = getOrgUnitGroupLegendItems(organisationUnitGroups, useColor, contextPath);\n  const facilityItems = isFacilityLayer && !groupSet.id ? [{\n    name: i18n.t('Facility'),\n    color: organisationUnitColor,\n    radius: radiusLow\n  }] : [];\n  return {\n    styledFeatures,\n    legend: {\n      unit: name,\n      items: [...levelItems, ...groupItems, ...facilityItems]\n    }\n  };\n};\n/* eslint-enable max-params */\n\n// This function returns the org unit level names used in the legend\nexport const getOrgUnitLevels = async d2 => {\n  const orgUnitLevels = await d2.models.organisationUnitLevels.list({\n    fields: `id,${getDisplayPropertyUrl(d2)},level`,\n    paging: false\n  });\n  return orgUnitLevels ? orgUnitLevels.toArray().reduce((obj, item) => ({\n    ...obj,\n    [item.level]: item.name\n  }), {}) : {};\n};\n\n// Converts \"LEVEL-x\" to newer \"LEVEL-uid\" format\nexport const translateOrgUnitLevels = function (orgUnits) {\n  let orgUnitLevels = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  const items = (orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.items) || [];\n  return items.map(item => {\n    const levelNumber = item.id.match(/^LEVEL-([0-9])+$/);\n    if (levelNumber) {\n      const level = orgUnitLevels.find(l => l.level === Number(levelNumber[1]));\n      if (level) {\n        return {\n          id: `LEVEL-${level.id}`\n        };\n      }\n    }\n    return item;\n  });\n};\n\n// Returns coordinate field from layer config\nexport const getCoordinateField = _ref3 => {\n  let {\n    orgUnitField,\n    orgUnitFieldDisplayName\n  } = _ref3;\n  return orgUnitField && orgUnitField !== NONE ? {\n    id: orgUnitField,\n    name: orgUnitFieldDisplayName\n  } : null;\n};\n\n// Combines main org unit features with associated geometries\nexport const addAssociatedGeometries = (mainFeatures, associatedGeometries) => {\n  // Return main features if there are no associated geomteries\n  if (!associatedGeometries) {\n    return mainFeatures;\n  }\n\n  // If there are associated geometries we only return main features that are\n  // points - and only if the associated geometry is not existing or not a point.\n  // The returned main feature points with an associated geometry gets an extra\n  // \"hasAdditionalGeometry\" property (used to only show the same org unit once\n  // in the data table).\n  return mainFeatures.filter(f => {\n    const associated = associatedGeometries.find(a => a.id === f.id);\n    if (f.geometry.type === 'Point') {\n      return associated ? associated.geometry.type !== 'Point' : true;\n    } else {\n      return false;\n    }\n  }).map(f => {\n    const associated = associatedGeometries.find(a => a.id === f.id);\n    return associated ? {\n      ...f,\n      properties: {\n        ...f.properties,\n        hasAdditionalGeometry: true\n      }\n    } : f;\n  }).concat(associatedGeometries);\n};","// extracted by mini-css-extract-plugin\nexport default {\"geometryField\":\"AssociatedGeometrySelect_geometryField__v81Df\",\"geometryDescription\":\"AssociatedGeometrySelect_geometryDescription__cOr4n\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrganisationUnitField } from '../../actions/layerEdit.js';\nimport { NONE } from '../../constants/layers.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/AssociatedGeometrySelect.module.css';\nconst AssociatedGeometrySelect = () => {\n  const geometryField = useSelector(state => state.layerEdit.orgUnitField);\n  const [attributes, setAttributes] = useState([]);\n  const dispatch = useDispatch();\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        fetchedAttributes\n      } = await engine.query({\n        fetchedAttributes: {\n          resource: '/attributes.json?fields=id,name,description&filter=valueType:eq:GEOJSON&filter=organisationUnitAttribute:eq:true'\n        }\n      });\n      setAttributes(fetchedAttributes.attributes);\n    }\n    fetchData();\n  }, [engine]);\n  if (!attributes.length) {\n    return null;\n  }\n  const attribute = attributes.find(a => a.id === geometryField);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.geometryField\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    prefix: i18n.t('Use associated geometry'),\n    items: [{\n      id: NONE,\n      name: i18n.t('None (default)')\n    }, ...attributes],\n    value: geometryField || NONE,\n    onChange: val => dispatch(setOrganisationUnitField(val)),\n    \"data-test\": \"orgunitfieldselect\"\n  }), (attribute === null || attribute === void 0 ? void 0 : attribute.description) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.geometryDescription\n  }, attribute.description));\n};\nexport default AssociatedGeometrySelect;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitSelectMode\":\"OrgUnitSelectMode_orgUnitSelectMode__T7yqh\",\"selectField\":\"OrgUnitSelectMode_selectField__StkPV\"};","import i18n from '@dhis2/d2-i18n';\nimport React, { useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrgUnitMode } from '../../actions/layerEdit.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/OrgUnitSelectMode.module.css';\nconst OrgUnitSelectMode = () => {\n  const organisationUnitSelectionMode = useSelector(state => state.layerEdit.organisationUnitSelectionMode);\n  const dispatch = useDispatch();\n  const items = useMemo(() => [{\n    id: 'SELECTED',\n    name: i18n.t('Selected only')\n  }, {\n    id: 'CHILDREN',\n    name: i18n.t('Selected and below')\n  }, {\n    id: 'DESCENDANTS',\n    name: i18n.t('Selected and all below')\n  }], []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitSelectMode\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    prefix: i18n.t('Selection mode'),\n    items: items,\n    value: organisationUnitSelectionMode || 'SELECTED',\n    onChange: mode => dispatch(setOrgUnitMode(mode.id)),\n    className: styles.selectField\n  }));\n};\nOrgUnitSelectMode.propTypes = {};\nexport default OrgUnitSelectMode;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitSelect\":\"OrgUnitSelect_orgUnitSelect__TMlTS\",\"two\":\"OrgUnitSelect_two__sXMjW\",\"one\":\"OrgUnitSelect_one__Q4dms\",\"none\":\"OrgUnitSelect_none__eXtbq\",\"loader\":\"OrgUnitSelect_loader__xfr0j\"};","import { OrgUnitDimension } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { CenteredContent, CircularLoader, Help } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrgUnits } from '../../actions/layerEdit.js';\nimport { DEFAULT_ORG_UNIT_LEVEL } from '../../constants/layers.js';\nimport { translateOrgUnitLevels } from '../../util/orgUnits.js';\nimport AssociatedGeometrySelect from './AssociatedGeometrySelect.js';\nimport OrgUnitSelectMode from './OrgUnitSelectMode.js';\nimport styles from './styles/OrgUnitSelect.module.css';\n\n// Fetches the root org units associated with the current user with fallback to data capture org units\nconst ORG_UNIT_TREE_QUERY = {\n  tree: {\n    resource: 'organisationUnits',\n    params: () => ({\n      fields: ['id', 'displayName~rename(name)', 'path'],\n      userDataViewFallback: true\n    })\n  },\n  levels: {\n    resource: 'organisationUnitLevels',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'level'],\n      order: 'level:asc',\n      paging: false\n    }\n  }\n};\nconst TWO_OTHER_SELECTS = 'two';\nconst ONE_OTHER_SELECT = 'one';\nconst NO_OTHER_SELECTS = 'none';\nconst OrgUnitSelect = _ref => {\n  let {\n    hideUserOrgUnits = false,\n    hideAssociatedGeometry = false,\n    hideSelectMode = true,\n    hideLevelSelect = false,\n    hideGroupSelect = false,\n    selectDefaultLevel = false,\n    selectRoots = false,\n    warning\n  } = _ref;\n  const {\n    loading,\n    data,\n    error\n  } = useDataQuery(ORG_UNIT_TREE_QUERY);\n  const rows = useSelector(state => state.layerEdit.rows);\n  const dispatch = useDispatch();\n  const setOrgUnitItems = useCallback(_ref2 => {\n    let {\n      items\n    } = _ref2;\n    return dispatch(setOrgUnits({\n      dimension: 'ou',\n      items\n    }));\n  }, [dispatch]);\n  const roots = data === null || data === void 0 ? void 0 : data.tree.organisationUnits;\n  const orgUnitLevels = data === null || data === void 0 ? void 0 : data.levels.organisationUnitLevels;\n  const defaultLevel = orgUnitLevels === null || orgUnitLevels === void 0 ? void 0 : orgUnitLevels[DEFAULT_ORG_UNIT_LEVEL];\n  const orgUnits = translateOrgUnitLevels(rows === null || rows === void 0 ? void 0 : rows.find(r => r.dimension === 'ou'), orgUnitLevels);\n  const hasOrgUnits = !!orgUnits.length;\n  useEffect(() => {\n    if (!rows && !hasOrgUnits && selectRoots && roots) {\n      setOrgUnitItems({\n        items: roots\n      });\n    }\n  }, [rows, selectRoots, roots, hasOrgUnits, setOrgUnitItems]);\n  useEffect(() => {\n    if (!rows && !hasOrgUnits && selectDefaultLevel && defaultLevel) {\n      setOrgUnitItems({\n        items: [{\n          id: `LEVEL-${defaultLevel.id}`\n        }]\n      });\n    }\n  }, [rows, selectDefaultLevel, defaultLevel, hasOrgUnits, setOrgUnitItems]);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.loader\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  } else if (error !== null && error !== void 0 && error.message) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, error.message);\n  }\n  const numOtherSelects = !hideAssociatedGeometry && !hideSelectMode ? TWO_OTHER_SELECTS : !hideAssociatedGeometry || !hideSelectMode ? ONE_OTHER_SELECT : NO_OTHER_SELECTS;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitSelect,\n    \"data-test\": \"org-unit-select\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx({\n      [styles.two]: numOtherSelects === TWO_OTHER_SELECTS,\n      [styles.one]: numOtherSelects === ONE_OTHER_SELECT,\n      [styles.none]: numOtherSelects === NO_OTHER_SELECTS\n    })\n  }, /*#__PURE__*/React.createElement(OrgUnitDimension, {\n    roots: roots === null || roots === void 0 ? void 0 : roots.map(r => r.id),\n    selected: orgUnits,\n    onSelect: setOrgUnitItems,\n    hideUserOrgUnits: hideUserOrgUnits,\n    hideLevelSelect: hideLevelSelect,\n    hideGroupSelect: hideGroupSelect,\n    warning: !hasOrgUnits ? warning : null\n  })), !hideAssociatedGeometry && /*#__PURE__*/React.createElement(AssociatedGeometrySelect, null), !hideSelectMode && /*#__PURE__*/React.createElement(OrgUnitSelectMode, null));\n};\nOrgUnitSelect.propTypes = {\n  hideAssociatedGeometry: PropTypes.bool,\n  hideGroupSelect: PropTypes.bool,\n  hideLevelSelect: PropTypes.bool,\n  hideSelectMode: PropTypes.bool,\n  hideUserOrgUnits: PropTypes.bool,\n  selectDefaultLevel: PropTypes.bool,\n  selectRoots: PropTypes.bool,\n  warning: PropTypes.string\n};\nexport default OrgUnitSelect;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"LayerDialog_content__yOwhz\",\"select\":\"LayerDialog_select__H+aQO\",\"periodSelect\":\"LayerDialog_periodSelect__Lu3bu\",\"tabContent\":\"LayerDialog_tabContent__YB2EL\",\"flexColumnFlow\":\"LayerDialog_flexColumnFlow__MxiUL\",\"flexRowFlow\":\"LayerDialog_flexRowFlow__rzZm6\",\"flexColumn\":\"LayerDialog_flexColumn__U-zxX\",\"flexInnerColumnFlow\":\"LayerDialog_flexInnerColumnFlow__NlPmr\",\"flexInnerColumn\":\"LayerDialog_flexInnerColumn__rp2dZ\",\"singleColumn\":\"LayerDialog_singleColumn__9aH-s\",\"header\":\"LayerDialog_header__wWtIV LayerDialog_flexInnerColumnFlow__NlPmr\",\"paragraph\":\"LayerDialog_paragraph__5ylxD\",\"notice\":\"LayerDialog_notice__NqDBr\",\"error\":\"LayerDialog_error__X8IM+\",\"indent\":\"LayerDialog_indent__SOwnw\",\"orgUnitTree\":\"LayerDialog_orgUnitTree__mz+A8 LayerDialog_flexColumn__U-zxX\",\"checkboxInline\":\"LayerDialog_checkboxInline__+o-r3\",\"fontInline\":\"LayerDialog_fontInline__pjIQS\",\"numberField\":\"LayerDialog_numberField__xao0N LayerDialog_flexInnerColumn__rp2dZ\",\"checkbox\":\"LayerDialog_checkbox__Q+Bjn\",\"teiCheckbox\":\"LayerDialog_teiCheckbox__gydpM\",\"marginBottom\":\"LayerDialog_marginBottom__eDy3G\",\"narrowField\":\"LayerDialog_narrowField__8zheb\",\"narrowFieldIcon\":\"LayerDialog_narrowFieldIcon__tnbg+\",\"eeFlexFull\":\"LayerDialog_eeFlexFull__RVO9s\",\"legend\":\"LayerDialog_legend__2dtDS Legend_legend__b62xP\",\"legendTitle\":\"LayerDialog_legendTitle__QpOGC\",\"scale\":\"LayerDialog_scale__XqTMm\",\"eeError\":\"LayerDialog_eeError__cyeZB\",\"eeNotice\":\"LayerDialog_eeNotice__8G1Xx\",\"labelDisplayOptions\":\"LayerDialog_labelDisplayOptions__F3Rt9\"};","import i18n from '@dhis2/d2-i18n';\n\n// Thematic layer\nexport const getThematicAggregationTypes = () => [{\n  id: 'DEFAULT',\n  name: i18n.t('By data element')\n}, {\n  id: 'COUNT',\n  name: i18n.t('Count')\n}, {\n  id: 'AVERAGE',\n  name: i18n.t('Average')\n}, {\n  id: 'SUM',\n  name: i18n.t('Sum')\n}, {\n  id: 'STDDEV',\n  name: i18n.t('Standard deviation')\n}, {\n  id: 'VARIANCE',\n  name: i18n.t('Variance')\n}, {\n  id: 'MIN',\n  name: i18n.t('Min')\n}, {\n  id: 'MAX',\n  name: i18n.t('Max')\n}];\n\n// Earth Engine layer\nexport const getEarthEngineStatisticTypes = () => [{\n  id: 'percentage',\n  name: i18n.t('Percentage')\n}, {\n  id: 'hectares',\n  name: i18n.t('Hectares')\n}, {\n  id: 'acres',\n  name: i18n.t('Acres')\n}];\n\n// Earth Engine layer\nexport const getEarthEngineAggregationTypes = filter => {\n  const types = [{\n    id: 'count',\n    name: i18n.t('Count')\n  }, {\n    id: 'min',\n    name: i18n.t('Min')\n  }, {\n    id: 'max',\n    name: i18n.t('Max')\n  }, {\n    id: 'mean',\n    name: i18n.t('Mean')\n  }, {\n    id: 'median',\n    name: i18n.t('Median')\n  }, {\n    id: 'sum',\n    name: i18n.t('Sum')\n  }, {\n    id: 'stdDev',\n    name: i18n.t('Standard deviation'),\n    shortName: i18n.t('Std dev')\n  }, {\n    id: 'variance',\n    name: i18n.t('Variance')\n  }];\n  return filter ? types.filter(_ref => {\n    let {\n      id\n    } = _ref;\n    return filter.includes(id);\n  }) : types;\n};\nexport const getEarthEngineStatisticType = id => (getEarthEngineStatisticTypes().find(t => t.id === id) || {}).name;\nexport const getEarthEngineAggregationType = id => {\n  const {\n    name,\n    shortName\n  } = getEarthEngineAggregationTypes().find(t => t.id === id) || {};\n  return shortName || name;\n};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setAggregationType } from '../../../actions/layerEdit.js';\nimport { getEarthEngineAggregationTypes, getEarthEngineStatisticTypes } from '../../../constants/aggregationTypes.js';\nimport { hasClasses } from '../../../util/earthEngine.js';\nimport { SelectField } from '../../core/index.js';\nconst AggregationSelect = _ref => {\n  let {\n    aggregations,\n    defaultAggregations,\n    aggregationType,\n    setAggregationType\n  } = _ref;\n  const classes = hasClasses(defaultAggregations);\n  const types = classes ? getEarthEngineStatisticTypes() : getEarthEngineAggregationTypes(aggregations);\n  useEffect(() => {\n    if (!aggregationType && defaultAggregations) {\n      setAggregationType(defaultAggregations);\n    }\n  }, [aggregationType, defaultAggregations, setAggregationType]);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Aggregation method'),\n    items: types,\n    multiple: !classes,\n    value: aggregationType,\n    onChange: type => setAggregationType(classes ? type.id : type)\n  });\n};\nAggregationSelect.propTypes = {\n  setAggregationType: PropTypes.func.isRequired,\n  aggregationType: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  aggregations: PropTypes.array,\n  defaultAggregations: PropTypes.oneOfType([PropTypes.string, PropTypes.array])\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    aggregations: layerEdit.aggregations,\n    defaultAggregations: layerEdit.defaultAggregations,\n    aggregationType: layerEdit.aggregationType\n  };\n}, {\n  setAggregationType\n})(AggregationSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setBand } from '../../../actions/layerEdit.js';\nimport { SelectField } from '../../core/index.js';\nconst BandSelect = _ref => {\n  let {\n    band = [],\n    bands,\n    setBand,\n    errorText\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Groups'),\n    items: bands,\n    multiple: true,\n    value: band,\n    onChange: setBand,\n    errorText: errorText\n  });\n};\nBandSelect.propTypes = {\n  bands: PropTypes.array.isRequired,\n  setBand: PropTypes.func.isRequired,\n  band: PropTypes.array,\n  errorText: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    band: layerEdit.band,\n    bands: layerEdit.bands\n  };\n}, {\n  setBand\n})(BandSelect);","// extracted by mini-css-extract-plugin\nexport default {\"periodSelect\":\"PeriodSelect_periodSelect__3wn47\",\"year\":\"PeriodSelect_year__Mw4c0\",\"period\":\"PeriodSelect_period__EU6E+\",\"loading\":\"PeriodSelect_loading__5jmo+\"};","import i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { SelectField } from '../../core/index.js';\nimport styles from './styles/PeriodSelect.module.css';\n\n// http://localhost:8080/api/periodTypes.json\nconst EarthEnginePeriodSelect = _ref => {\n  let {\n    periodType,\n    period,\n    periods,\n    onChange,\n    errorText,\n    className\n  } = _ref;\n  const [year, setYear] = useState();\n  const byYear = periodType === 'Custom';\n  const years = useMemo(() => byYear && periods ? [...new Set(periods.map(p => p.year))].map(year => ({\n    id: year,\n    name: String(year)\n  })) : null, [byYear, periods]);\n  const byYearPeriods = useMemo(() => byYear && year && periods ? periods.filter(p => p.year === year) : null, [byYear, year, periods]);\n  const onYearChange = useCallback(_ref2 => {\n    let {\n      id\n    } = _ref2;\n    onChange(null);\n    setYear(id);\n  }, [onChange]);\n  useEffect(() => {\n    if (byYear && period) {\n      setYear(period.year);\n    }\n  }, [byYear, period]);\n  const items = byYear ? byYearPeriods : periods;\n  return items ? /*#__PURE__*/React.createElement(\"div\", {\n    className: className\n  }, byYear && /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Year'),\n    items: years,\n    value: year,\n    onChange: onYearChange,\n    className: styles.year\n  }), /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period'),\n    loading: !periods,\n    items: items,\n    value: items && period && period.id,\n    onChange: onChange,\n    helpText: i18n.t('Available periods are set by the source data'),\n    errorText: !period && errorText ? errorText : null,\n    className: styles.period\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), i18n.t('Loading periods'));\n};\nEarthEnginePeriodSelect.propTypes = {\n  periodType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  period: PropTypes.object,\n  periods: PropTypes.oneOfType([PropTypes.array, PropTypes.object])\n};\nexport default EarthEnginePeriodSelect;","// extracted by mini-css-extract-plugin\nexport default {\"buffer\":\"BufferRadius_buffer__y-0RL\",\"numberField\":\"BufferRadius_numberField__leghw\",\"info\":\"BufferRadius_info__fNRZ1\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setBufferRadius } from '../../../actions/layerEdit.js';\nimport Checkbox from '../../core/Checkbox.js';\nimport NumberField from '../../core/NumberField.js';\nimport styles from './styles/BufferRadius.module.css';\n\n// Component to set buffer radius (checkbox toggle and number field)\n// radius will be undefined when a layer dialog is opened (can be used to set default value)\n// it will be null when the checkbox is unchecked\n// it will be empty string when the value is deleted\n// it will have a number value when a buffer is typed, or a default set\nconst BufferRadius = _ref => {\n  let {\n    radius,\n    defaultRadius = 1000,\n    hasOrgUnitField,\n    disabled,\n    className,\n    setBufferRadius\n  } = _ref;\n  const showBuffer = radius !== undefined && radius !== null;\n  const isDisabled = disabled || hasOrgUnitField;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.buffer, className)\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Buffer'),\n    checked: showBuffer,\n    disabled: isDisabled,\n    onChange: isChecked => setBufferRadius(isChecked ? radius || defaultRadius : null)\n  }), showBuffer && /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Radius in meters'),\n    value: Number.isInteger(radius) ? radius : '',\n    disabled: isDisabled,\n    onChange: value => setBufferRadius(value !== '' ? parseInt(value, 10) : ''),\n    min: 0,\n    className: styles.numberField\n  }), hasOrgUnitField && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.info\n  }, i18n.t(\"Buffer can't be combined with associated geometry.\")));\n};\nBufferRadius.propTypes = {\n  setBufferRadius: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  defaultRadius: PropTypes.number,\n  disabled: PropTypes.bool,\n  hasOrgUnitField: PropTypes.bool,\n  radius: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    radius: layerEdit.areaRadius\n  };\n}, {\n  setBufferRadius\n})(BufferRadius);","import { compact, sortBy, isString } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nexport const isValidCoordinate = coord => Array.isArray(coord) && coord.length === 2 && coord[0] >= -180 && coord[0] <= 180 && coord[1] >= -90 && coord[1] <= 90;\nexport const toGeoJson = organisationUnits => sortBy('le', organisationUnits).map(ou => {\n  const coord = JSON.parse(ou.co);\n  let gpid = '';\n  let gppg = '';\n  let type = 'Point';\n  if (ou.ty === 2) {\n    type = 'Polygon';\n    if (ou.co.substring(0, 4) === '[[[[') {\n      type = 'MultiPolygon';\n    }\n  }\n\n  // Grand parent\n  if (isString(ou.pg) && ou.pg.length) {\n    const ids = compact(ou.pg.split('/'));\n\n    // Grand parent id\n    if (ids.length >= 2) {\n      gpid = ids[ids.length - 2];\n    }\n\n    // Grand parent parent graph\n    if (ids.length > 2) {\n      gppg = '/' + ids.slice(0, ids.length - 2).join('/');\n    }\n  }\n  return {\n    type: 'Feature',\n    id: ou.id,\n    geometry: {\n      type,\n      coordinates: coord\n    },\n    properties: {\n      type,\n      id: ou.id,\n      name: ou.na,\n      hasCoordinatesDown: ou.hcd,\n      hasCoordinatesUp: ou.hcu,\n      level: ou.le,\n      grandParentParentGraph: gppg,\n      grandParentId: gpid,\n      parentGraph: ou.pg,\n      parentId: ou.pi,\n      parentName: ou.pn,\n      dimensions: ou.dimensions\n    }\n  };\n}).filter(_ref => {\n  let {\n    geometry\n  } = _ref;\n  return Array.isArray(geometry.coordinates) && geometry.coordinates.length && geometry.coordinates.flat().length;\n});\n\n//eslint-disable-next-line max-params\nexport const drillUpDown = (layerConfig, parentId, parentGraph, level) => ({\n  ...layerConfig,\n  rows: [{\n    dimension: dimConf.organisationUnit.objectName,\n    items: [{\n      id: parentId,\n      path: `${parentGraph}/${parentId}`\n    }, {\n      id: 'LEVEL-' + level\n    }]\n  }],\n  isLoaded: false\n});\n\n// Called when plugin maps enter or exit fullscreen\nexport const onFullscreenChange = function (map) {\n  let isFullscreen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  map.resize();\n  if (!isFullscreen) {\n    const bounds = map.getLayersBounds();\n    if (Array.isArray(bounds)) {\n      map.fitBounds(bounds);\n    }\n  }\n  map.toggleMultiTouch(!isFullscreen);\n  map.toggleScrollZoom(isFullscreen);\n};","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { precisionRound } from 'd3-format';\nimport { getEarthEngineLayer } from '../constants/earthEngine.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { hasClasses, getPeriodNameFromFilter } from '../util/earthEngine.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { toGeoJson } from '../util/map.js';\nimport { numberPrecision } from '../util/numbers.js';\nimport { getCoordinateField, addAssociatedGeometries } from '../util/orgUnits.js';\n\n// Returns a promise\nconst earthEngineLoader = async config => {\n  const {\n    rows,\n    aggregationType\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const coordinateField = getCoordinateField(config);\n  const alerts = [];\n  let layerConfig = {};\n  let dataset;\n  let features;\n  if (orgUnits && orgUnits.length) {\n    const d2 = await getD2();\n    const displayProperty = getDisplayProperty(d2).toUpperCase();\n    const orgUnitParams = orgUnits.map(item => item.id);\n    let mainFeatures;\n    let associatedGeometries;\n    const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayProperty);\n    try {\n      mainFeatures = await featuresRequest.getAll().then(toGeoJson);\n      if (coordinateField) {\n        associatedGeometries = await featuresRequest.getAll({\n          coordinateField: coordinateField.id\n        }).then(toGeoJson);\n        if (!associatedGeometries.length) {\n          alerts.push({\n            warning: true,\n            message: i18n.t('{{name}}: No coordinates found', {\n              name: coordinateField.name,\n              nsSeparator: ';'\n            })\n          });\n        }\n      }\n      features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n      if (!features.length) {\n        alerts.push({\n          warning: true,\n          message: i18n.t('Selected org units: No coordinates found', {\n            nsSeparator: ';'\n          })\n        });\n      }\n    } catch (error) {\n      alerts.push({\n        critical: true,\n        message: i18n.t('Error: {{message}}', {\n          message: error.message,\n          nsSeparator: ';'\n        })\n      });\n    }\n  }\n  if (typeof config.config === 'string') {\n    // From database as favorite\n    layerConfig = JSON.parse(config.config);\n\n    // Backward compability for temperature layer (could also be fixed in a db update script)\n    if (layerConfig.id === 'MODIS/MOD11A2' && layerConfig.filter) {\n      const period = layerConfig.image.slice(-10);\n      layerConfig.id = 'MODIS/006/MOD11A2';\n      layerConfig.image = period;\n      layerConfig.filter[0].arguments[1] = period;\n    }\n\n    // Backward compability for layers with periods saved before 2.36\n    // (could also be fixed in a db update script)\n    if (layerConfig.image) {\n      var _layerConfig$filter;\n      const filter = (_layerConfig$filter = layerConfig.filter) === null || _layerConfig$filter === void 0 ? void 0 : _layerConfig$filter[0];\n      if (filter) {\n        var _filter$arguments;\n        const period = (_filter$arguments = filter.arguments) === null || _filter$arguments === void 0 ? void 0 : _filter$arguments[1];\n        let name = String(layerConfig.image);\n        if (typeof period === 'string' && period.length > 4) {\n          const year = period.substring(0, 4);\n          filter.year = parseInt(year, 10);\n          if (name.slice(-4) === year) {\n            name = name.slice(0, -4);\n          }\n        }\n        filter.name = name;\n      }\n    }\n    dataset = getEarthEngineLayer(layerConfig.id);\n    if (dataset) {\n      dataset.datasetId = layerConfig.id;\n      delete layerConfig.id;\n    }\n    delete config.config;\n  } else {\n    dataset = getEarthEngineLayer(layerConfig.id);\n  }\n  const layer = {\n    ...dataset,\n    ...config,\n    ...layerConfig\n  };\n  const {\n    unit,\n    filter,\n    description,\n    source,\n    sourceUrl,\n    band,\n    bands\n  } = layer;\n  const {\n    name\n  } = dataset || config;\n  const period = getPeriodNameFromFilter(filter);\n  const data = Array.isArray(features) && features.length ? features : undefined;\n  const hasBand = b => Array.isArray(band) ? band.includes(b.id) : band === b.id;\n  const groups = band && Array.isArray(bands) && bands.length ? bands.filter(hasBand) : null;\n  const legend = {\n    ...layer.legend,\n    title: name,\n    period,\n    groups,\n    unit,\n    description,\n    source,\n    sourceUrl\n  };\n\n  // Create/update legend items from params\n  if (!hasClasses(aggregationType) && layer.params) {\n    legend.items = createLegend(layer.params);\n  }\n  return {\n    ...layer,\n    legend,\n    name,\n    data,\n    alerts,\n    isLoaded: true,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport const createLegend = _ref => {\n  let {\n    min,\n    max,\n    palette\n  } = _ref;\n  const colors = palette.split(',');\n  const step = (max - min) / (colors.length - (min > 0 ? 2 : 1));\n  const precision = precisionRound(step, max);\n  const valueFormat = numberPrecision(precision);\n  let from = min;\n  let to = valueFormat(min + step);\n  return colors.map((color, index) => {\n    const item = {\n      color\n    };\n    if (index === 0 && min > 0) {\n      // Less than min\n      item.from = 0;\n      item.to = min;\n      item.name = '< ' + min;\n      to = min;\n    } else if (from < max) {\n      item.from = from;\n      item.to = to;\n      item.name = from + ' - ' + to;\n    } else {\n      // Higher than max\n      item.from = from;\n      item.name = '> ' + from;\n    }\n    from = to;\n    to = valueFormat(min + step * (index + (min > 0 ? 1 : 2)));\n    return item;\n  });\n};\nexport default earthEngineLoader;","// extracted by mini-css-extract-plugin\nexport default {\"legendItemRange\":\"LegendItemRange_legendItemRange__21prC\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/LegendItemRange.module.css';\nconst LegendItemRange = _ref => {\n  let {\n    name = '',\n    startValue,\n    endValue,\n    count\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"td\", {\n    className: styles.legendItemRange\n  }, isNaN(startValue) ? name : `${name} ${startValue} - ${endValue}`, count !== undefined ? ` (${count})` : '');\n};\nLegendItemRange.propTypes = {\n  count: PropTypes.number,\n  endValue: PropTypes.number,\n  name: PropTypes.string,\n  startValue: PropTypes.number\n};\nexport default LegendItemRange;","import PropTypes from 'prop-types';\nimport React from 'react';\nconst LineSymbol = _ref => {\n  let {\n    color,\n    weight\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    style: {\n      width: 24,\n      height: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    stroke: color,\n    fill: color,\n    strokeWidth: weight / 2,\n    d: \"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z\"\n  }));\n};\nLineSymbol.propTypes = {\n  color: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default LineSymbol;","import PropTypes from 'prop-types';\nimport React from 'react';\nconst PolygonSymbol = _ref => {\n  let {\n    color,\n    fill = 'none',\n    weight\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    style: {\n      width: 24,\n      height: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: fill,\n    stroke: color,\n    strokeWidth: weight,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M 3.5 18.5 l 7.5 2.5 l 11 -2 L 19 12 l 3 -4 l -8 -3 l -8 2 L 2 14 z\"\n  }));\n};\nPolygonSymbol.propTypes = {\n  color: PropTypes.string,\n  fill: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default PolygonSymbol;","// extracted by mini-css-extract-plugin\nexport default {\"legendItem\":\"LegendItem_legendItem__kscet\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport LegendItemRange from './LegendItemRange.js';\nimport LineSymbol from './LineSymbol.js';\nimport PolygonSymbol from './PolygonSymbol.js';\nimport styles from './styles/LegendItem.module.css';\nconst maxRadius = 15;\nconst LegendItem = _ref => {\n  let {\n    type,\n    image,\n    color,\n    strokeColor,\n    fillColor,\n    radius,\n    weight,\n    name,\n    startValue,\n    endValue,\n    count\n  } = _ref;\n  if (!name && startValue === undefined) {\n    return null;\n  }\n  const symbol = {\n    backgroundImage: image ? `url(${image})` : 'none',\n    backgroundColor: color ? color : 'transparent'\n  };\n  if (strokeColor) {\n    symbol.border = `1px solid ${strokeColor}`;\n  }\n  if (radius) {\n    const r = Math.min(radius, maxRadius) * 2;\n    symbol.width = `${r}px`;\n    symbol.height = `${r}px`;\n    symbol.borderRadius = '50%';\n  }\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    className: styles.legendItem,\n    \"data-test\": \"layerlegend-item\"\n  }, /*#__PURE__*/React.createElement(\"th\", null, weight ? type === 'LineString' ? /*#__PURE__*/React.createElement(LineSymbol, {\n    color: color,\n    weight: weight\n  }) : /*#__PURE__*/React.createElement(PolygonSymbol, {\n    color: strokeColor || color,\n    fill: fillColor,\n    weight: weight\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    style: symbol\n  })), /*#__PURE__*/React.createElement(LegendItemRange, {\n    name: name,\n    startValue: startValue,\n    endValue: endValue,\n    count: count\n  }));\n};\nLegendItem.propTypes = {\n  color: PropTypes.string,\n  count: PropTypes.number,\n  endValue: PropTypes.number,\n  fillColor: PropTypes.string,\n  image: PropTypes.string,\n  name: PropTypes.string,\n  radius: PropTypes.number,\n  startValue: PropTypes.number,\n  strokeColor: PropTypes.string,\n  type: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default LegendItem;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { createLegend } from '../../../loaders/earthEngineLoader.js';\nimport LegendItem from '../../legend/LegendItem.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst paramsAreValid = _ref => {\n  let {\n    min,\n    max\n  } = _ref;\n  return !Number.isNaN(min) && !Number.isNaN(max) && max > min;\n};\nconst LegendPreview = _ref2 => {\n  let {\n    params\n  } = _ref2;\n  const legend = paramsAreValid(params) && createLegend(params);\n  return legend ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendTitle\n  }, i18n.t('Legend preview')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legend\n  }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, legend.map((item, index) => /*#__PURE__*/React.createElement(LegendItem, _extends({}, item, {\n    key: `item-${index}`\n  }))))))) : null;\n};\nLegendPreview.propTypes = {\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  })\n};\nexport default LegendPreview;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { setParams } from '../../../actions/layerEdit.js';\nimport { getColorScale, getColorPalette } from '../../../util/colors.js';\nimport { NumberField, ColorScaleSelect } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst minSteps = 3;\nconst maxSteps = 9;\nconst StyleSelect = _ref => {\n  let {\n    unit,\n    params,\n    setParams\n  } = _ref;\n  const {\n    min,\n    max,\n    palette\n  } = params;\n  const [steps, setSteps] = useState(palette.split(',').length);\n  const onStepsChange = useCallback(steps => {\n    if (steps >= minSteps && steps <= maxSteps) {\n      const scale = getColorScale(palette);\n      const newPalette = getColorPalette(scale, steps);\n      if (newPalette) {\n        setParams({\n          palette: newPalette\n        });\n      }\n    }\n    setSteps(steps);\n  }, [palette, setParams]);\n  let warningText;\n  if (Number.isNaN(min)) {\n    warningText = i18n.t('Min value is required');\n  } else if (Number.isNaN(max)) {\n    warningText = i18n.t('Max value is required');\n  } else if (max <= min) {\n    warningText = i18n.t('Max should be greater than min');\n  } else if (steps < minSteps || steps > maxSteps) {\n    warningText = i18n.t('Valid steps are {{minSteps}} to {{maxSteps}}', {\n      minSteps,\n      maxSteps\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Unit: {{ unit }}', {\n    unit,\n    nsSeparator: '|' // https://github.com/i18next/i18next/issues/361\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    key: \"minmax\",\n    className: styles.flexInnerColumnFlow\n  }, /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Min'),\n    value: min,\n    onChange: min => setParams({\n      min: parseInt(min)\n    }),\n    className: styles.flexInnerColumn\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Max'),\n    value: max,\n    onChange: max => setParams({\n      max: parseInt(max)\n    }),\n    className: styles.flexInnerColumn\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Steps'),\n    value: steps,\n    min: minSteps,\n    max: maxSteps,\n    onChange: onStepsChange,\n    className: styles.flexInnerColumn\n  }), warningText && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.eeError\n  }, warningText), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.scale\n  }, /*#__PURE__*/React.createElement(ColorScaleSelect, {\n    palette: params.palette,\n    onChange: palette => setParams({\n      palette\n    }),\n    width: 260\n  }))));\n};\nStyleSelect.propTypes = {\n  setParams: PropTypes.func.isRequired,\n  unit: PropTypes.string.isRequired,\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  })\n};\nexport default connect(null, {\n  setParams\n})(StyleSelect);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { EE_BUFFER } from '../../../constants/layers.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport LegendPreview from './LegendPreview.js';\nimport StyleSelect from './StyleSelect.js';\nconst StyleTab = _ref => {\n  let {\n    unit,\n    params,\n    hasOrgUnitField\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, params && /*#__PURE__*/React.createElement(StyleSelect, {\n    unit: unit,\n    params: params\n  }), /*#__PURE__*/React.createElement(BufferRadius, {\n    defaultRadius: EE_BUFFER,\n    hasOrgUnitField: hasOrgUnitField\n  })), params && /*#__PURE__*/React.createElement(LegendPreview, {\n    params: params\n  }));\n};\nStyleTab.propTypes = {\n  hasOrgUnitField: PropTypes.bool.isRequired,\n  unit: PropTypes.string.isRequired,\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  })\n};\nexport default StyleTab;","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { setFilter, setBufferRadius } from '../../../actions/layerEdit.js';\nimport { getEarthEngineLayer } from '../../../constants/earthEngine.js';\nimport { EE_BUFFER, NONE } from '../../../constants/layers.js';\nimport { getPeriodFromFilter, getPeriods, defaultFilters } from '../../../util/earthEngine.js';\nimport { Help, Tab, Tabs } from '../../core/index.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport AggregationSelect from './AggregationSelect.js';\nimport BandSelect from './BandSelect.js';\nimport PeriodSelect from './PeriodSelect.js';\nimport StyleTab from './StyleTab.js';\nconst EarthEngineDialog = props => {\n  const [tab, setTab] = useState('data');\n  const [periods, setPeriods] = useState();\n  const [error, setError] = useState();\n  const {\n    datasetId,\n    band,\n    params,\n    filter,\n    areaRadius,\n    orgUnitField,\n    setFilter,\n    setBufferRadius,\n    validateLayer,\n    onLayerValidation\n  } = props;\n  const dataset = getEarthEngineLayer(datasetId);\n  const {\n    description,\n    notice,\n    periodType,\n    bands,\n    filters = defaultFilters,\n    unit,\n    source,\n    sourceUrl,\n    aggregations\n  } = dataset;\n  const period = getPeriodFromFilter(filter);\n  const setPeriod = useCallback(period => setFilter(period ? filters(period) : null), [filters, setFilter]);\n  const noBandSelected = Array.isArray(bands) && (!band || !band.length);\n  const hasMultipleAggregations = !aggregations || aggregations.length > 1;\n  const hasOrgUnitField = !!orgUnitField && orgUnitField !== NONE;\n\n  // Load all available periods\n  useEffect(() => {\n    let isCancelled = false;\n    if (periodType) {\n      getPeriods(datasetId).then(periods => {\n        if (!isCancelled) {\n          setPeriods(periods);\n        }\n      }).catch(error => setError({\n        type: 'engine',\n        message: error.message\n      }));\n    }\n    return () => isCancelled = true;\n  }, [datasetId, periodType]);\n\n  // Set most recent period by default\n  useEffect(() => {\n    if (filter === undefined) {\n      if (Array.isArray(periods) && periods.length) {\n        setPeriod(periods[0]);\n      }\n    }\n  }, [periods, filter, setPeriod]);\n  useEffect(() => {\n    if (!hasOrgUnitField && areaRadius === undefined) {\n      setBufferRadius(EE_BUFFER);\n    }\n  }, [hasOrgUnitField, areaRadius, setBufferRadius]);\n  useEffect(() => {\n    if (validateLayer) {\n      const isValid = !noBandSelected && (!periodType || period);\n      if (!isValid) {\n        if (noBandSelected) {\n          setError({\n            type: 'band',\n            message: i18n.t('This field is required')\n          });\n          setTab('data');\n        } else {\n          setError({\n            type: 'period',\n            message: i18n.t('This field is required')\n          });\n          setTab('period');\n        }\n      }\n      onLayerValidation(isValid);\n    }\n  }, [validateLayer, periodType, period, onLayerValidation, noBandSelected]);\n  if (error && error.type === 'engine') {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(NoticeBox, error, error.message));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: \"data\"\n  }, i18n.t('Data')), periodType && /*#__PURE__*/React.createElement(Tab, {\n    value: \"period\"\n  }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"orgunits\"\n  }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexRowFlow\n  }, /*#__PURE__*/React.createElement(Help, null, /*#__PURE__*/React.createElement(\"p\", null, description), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Data will be calculated on Google Earth Engine for the chosen organisation units.')), notice && /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.eeNotice\n  }, notice), /*#__PURE__*/React.createElement(\"p\", null, hasMultipleAggregations && /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Multiple aggregation methods are available.'), \"\\xA0\"), i18n.t('See the aggregation results by clicking map regions or viewing the data table. The results can also be downloaded.'))), bands && /*#__PURE__*/React.createElement(BandSelect, {\n    errorText: error && error.type === 'band' && error.message\n  }), /*#__PURE__*/React.createElement(AggregationSelect, null), unit && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Unit'), \": \", unit), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Source'), \":\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n    href: sourceUrl,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, source))), tab === 'period' && /*#__PURE__*/React.createElement(PeriodSelect, {\n    periodType: periodType,\n    period: period,\n    periods: periods,\n    filters: filters,\n    onChange: setPeriod,\n    errorText: error && error.type === 'period' && error.message,\n    className: styles.flexRowFlow\n  }), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n    selectDefaultLevel: true\n  }), tab === 'style' && /*#__PURE__*/React.createElement(StyleTab, {\n    unit: unit,\n    params: params,\n    hasOrgUnitField: hasOrgUnitField\n  })));\n};\nEarthEngineDialog.propTypes = {\n  datasetId: PropTypes.string.isRequired,\n  setBufferRadius: PropTypes.func.isRequired,\n  setFilter: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  areaRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  band: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  filter: PropTypes.array,\n  legend: PropTypes.object,\n  orgUnitField: PropTypes.string,\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  }),\n  rows: PropTypes.array\n};\nexport default connect(null, {\n  setFilter,\n  setBufferRadius\n}, null, {\n  forwardRef: true\n})(EarthEngineDialog);","import { useDataEngine } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useState, useEffect, createContext } from 'react';\nconst userSettingsQuery = {\n  resource: 'userSettings',\n  params: {\n    key: ['keyDbLocale', 'keyUiLocale', 'keyAnalysisDisplayProperty']\n  }\n};\nexport const UserSettingsCtx = /*#__PURE__*/createContext({});\nconst UserSettingsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [settings, setSettings] = useState({});\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        userSettings\n      } = await engine.query({\n        userSettings: userSettingsQuery\n      });\n      setSettings({\n        ...userSettings,\n        nameProperty: userSettings.keyAnalysisDisplayProperty === 'name' ? 'displayName' : 'displayShortName'\n      });\n    }\n    fetchData();\n  }, [engine]);\n  return /*#__PURE__*/React.createElement(UserSettingsCtx.Provider, {\n    value: settings\n  }, children);\n};\nUserSettingsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default UserSettingsProvider;\nexport const useUserSettings = () => useContext(UserSettingsCtx);","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nimport { useUserSettings } from '../components/UserSettingsProvider.js';\nimport { getValidDataItems } from '../util/helpers.js';\nconst PROGRAM_STAGE_DATA_ELEMENTS_QUERY = {\n  elements: {\n    resource: 'programStages',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: [`programStageDataElements[dataElement[id,${nameProperty}~rename(name),valueType,optionSet[id,displayName~rename(name)],legendSet]]`],\n        paging: false\n      };\n    }\n  }\n};\nexport const useProgramStageDataElements = _ref3 => {\n  let {\n    programStageId\n  } = _ref3;\n  const [dataElements, setDataElements] = useState(null);\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    refetch,\n    loading\n  } = useDataQuery(PROGRAM_STAGE_DATA_ELEMENTS_QUERY, {\n    lazy: true,\n    variables: {\n      nameProperty\n    },\n    onComplete: data => {\n      const elements = data.elements.programStageDataElements.map(attr => attr.dataElement);\n      setDataElements(getValidDataItems(elements));\n    }\n  });\n  useEffect(() => {\n    setDataElements(null);\n    if (programStageId) {\n      refetch({\n        id: programStageId\n      });\n    }\n  }, [programStageId, refetch]);\n  return {\n    dataElements,\n    loading\n  };\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nimport { useUserSettings } from '../components/UserSettingsProvider.js';\nimport { getValidDataItems } from '../util/helpers.js';\nconst PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY = {\n  trackedEntityAttributes: {\n    resource: 'programs',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: [`programTrackedEntityAttributes[trackedEntityAttribute[id,${nameProperty}~rename(name),valueType,optionSet[id,displayName~rename(name)],legendSet]]`],\n        paging: false\n      };\n    }\n  }\n};\nexport const useProgramTrackedEntityAttributes = _ref3 => {\n  let {\n    programId\n  } = _ref3;\n  const [programAttributes, setProgramAttributes] = useState(null);\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    refetch,\n    loading\n  } = useDataQuery(PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY, {\n    lazy: true,\n    variables: {\n      nameProperty\n    },\n    onComplete: data => {\n      const attributes = data.trackedEntityAttributes.programTrackedEntityAttributes.map(attr => attr.trackedEntityAttribute);\n      setProgramAttributes(getValidDataItems(attributes));\n    }\n  });\n  useEffect(() => {\n    setProgramAttributes(null);\n    if (programId) {\n      refetch({\n        id: programId\n      });\n    }\n  }, [programId, refetch]);\n  return {\n    programAttributes,\n    loading\n  };\n};","import { useMemo } from 'react';\nimport { combineDataItems } from '../util/analytics.js';\nimport { useProgramStageDataElements } from './useProgramStageDataElements.js';\nimport { useProgramTrackedEntityAttributes } from './useProgramTrackedEntityAttributes.js';\nexport const useEventDataItems = _ref => {\n  let {\n    programId,\n    programStageId,\n    includeTypes,\n    excludeTypes\n  } = _ref;\n  const {\n    dataElements,\n    loading: dataElementsLoading\n  } = useProgramStageDataElements({\n    programStageId\n  });\n  const {\n    programAttributes,\n    loading: attributesLoading\n  } = useProgramTrackedEntityAttributes({\n    programId\n  });\n  const eventDataItems = useMemo(() => {\n    if (dataElements !== null && programAttributes !== null) {\n      return combineDataItems(programAttributes, dataElements, includeTypes || null, excludeTypes || null);\n    }\n    return null;\n  }, [dataElements, programAttributes, includeTypes, excludeTypes]);\n  return {\n    eventDataItems,\n    loading: dataElementsLoading || attributesLoading\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useRef } from 'react';\nimport { useEventDataItems } from '../../hooks/useEventDataItems.js';\nimport { SelectField } from '../core/index.js';\nconst EVENT_COORDINATE_FIELD_ID = 'event';\nconst includeTypes = ['COORDINATE'];\nconst CoordinateField = _ref => {\n  let {\n    value,\n    program,\n    programStage,\n    onChange,\n    className\n  } = _ref;\n  const {\n    eventDataItems,\n    loading\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    includeTypes\n  });\n  const prevProgram = useRef(program);\n  useEffect(() => {\n    if (prevProgram.current !== program) {\n      onChange(EVENT_COORDINATE_FIELD_ID);\n      prevProgram.current = program;\n    }\n  }, [program, onChange]);\n  let fields = [{\n    id: EVENT_COORDINATE_FIELD_ID,\n    name: i18n.t('Event location')\n  }];\n  fields = eventDataItems ? fields.concat(eventDataItems) : fields;\n  const isLoading = loading || value && !fields.find(f => f.id === value);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    loading: isLoading,\n    label: i18n.t('Coordinate field'),\n    items: fields,\n    value: fields.find(f => f.id === value) ? value : EVENT_COORDINATE_FIELD_ID,\n    onChange: field => onChange(field.id),\n    className: className\n  });\n};\nCoordinateField.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  program: PropTypes.object,\n  programStage: PropTypes.object,\n  value: PropTypes.string\n};\nexport default CoordinateField;","// extracted by mini-css-extract-plugin\nexport default {\"removeBtnContainer\":\"RemoveFilter_removeBtnContainer__DNHoQ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip, IconDelete24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/RemoveFilter.module.css';\n\n// Remove filter button used for both thematic and event filters\nconst RemoveFilter = _ref => {\n  let {\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.removeBtnContainer,\n    onClick: onClick\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Remove filter')\n  }, /*#__PURE__*/React.createElement(IconDelete24, null)));\n};\nRemoveFilter.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default RemoveFilter;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nconst OPTION_SET_QUERY = {\n  optionSet: {\n    resource: 'optionSets',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'options[id,code,displayName~rename(name),style[color]]'],\n      paging: false\n    }\n  }\n};\nconst useOptionSet = optionSetId => {\n  const [optionSet, setOptionSet] = useState(null);\n  const {\n    refetch,\n    loading\n  } = useDataQuery(OPTION_SET_QUERY, {\n    lazy: true,\n    onComplete: data => {\n      setOptionSet(data.optionSet);\n    }\n  });\n  useEffect(() => {\n    setOptionSet(null);\n    if (optionSetId) {\n      refetch({\n        id: optionSetId\n      });\n    }\n  }, [optionSetId, refetch]);\n  return {\n    optionSet,\n    loading\n  };\n};\nexport default useOptionSet;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\nconst OptionSetSelect = _ref => {\n  let {\n    options,\n    value,\n    onChange,\n    className\n  } = _ref;\n  // TODO: Temporarily fix until we have a searchable SelectField handling hundreds of options\n  if (options.length > 100) {\n    options = options.slice(0, 100);\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Options'),\n    items: options.map(option => ({\n      id: option.code,\n      name: option.name\n    })),\n    value: value,\n    multiple: true,\n    onChange: onChange,\n    className: className\n  });\n};\nOptionSetSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  options: PropTypes.array,\n  value: PropTypes.array\n};\nexport default OptionSetSelect;","// extracted by mini-css-extract-plugin\nexport default {\"operator\":\"FilterSelect_operator__DxRTN\",\"inputField\":\"FilterSelect_inputField__gY635\",\"checkbox\":\"FilterSelect_checkbox__HRwr5\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { numberValueTypes, textValueTypes, booleanValueTypes } from '../../../constants/valueTypes.js';\nimport useOptionSet from '../../../hooks/useOptionSet.js';\nimport { SelectField, NumberField, TextField, Checkbox, DatePicker } from '../../core/index.js';\nimport OptionSetSelect from '../../optionSet/OptionSetSelect.js';\nimport styles from './styles/FilterSelect.module.css';\nconst getOperators = (valueType, optionSetId) => {\n  let operators;\n  if (['NUMBER', 'INTEGER', 'INTEGER_POSITIVE', 'DATE'].includes(valueType)) {\n    operators = [{\n      id: 'EQ',\n      name: '='\n    }, {\n      id: 'GT',\n      name: '>'\n    }, {\n      id: 'GE',\n      name: '>='\n    }, {\n      id: 'LT',\n      name: '<'\n    }, {\n      id: 'LE',\n      name: '<='\n    }, {\n      id: 'NE',\n      name: '!='\n    }];\n  } else if (optionSetId) {\n    operators = [{\n      id: 'IN',\n      name: i18n.t('one of')\n    }];\n  } else if (textValueTypes.includes(valueType)) {\n    operators = [{\n      id: 'LIKE',\n      name: i18n.t('contains')\n    }, {\n      id: 'EQ',\n      name: i18n.t('is')\n    }, {\n      id: 'NE',\n      name: i18n.t('is not')\n    }];\n  }\n  return operators;\n};\nconst FilterSelect = _ref => {\n  let {\n    valueType,\n    filter,\n    optionSetId,\n    onChange\n  } = _ref;\n  const {\n    optionSet\n  } = useOptionSet(optionSetId);\n  const operators = getOperators(valueType, optionSetId);\n  let operator;\n  let value;\n  if (filter) {\n    const splitFilter = filter.split(':');\n    operator = splitFilter[0];\n    value = splitFilter[1];\n  } else if (operators) {\n    operator = operators[0].id;\n  }\n  const options = optionSetId && optionSetId === (optionSet === null || optionSet === void 0 ? void 0 : optionSet.id) ? optionSet.options : null;\n  return /*#__PURE__*/React.createElement(Fragment, null, operators && /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Operator'),\n    items: operators,\n    value: operator,\n    onChange: newOperator => onChange(`${newOperator.id}:${value ? value : ''}`),\n    className: styles.operator\n  }), options && /*#__PURE__*/React.createElement(OptionSetSelect, {\n    options: options,\n    value: value ? value.split(';') : null,\n    onChange: newValue => onChange(`${operator}:${newValue.join(';')}`),\n    className: styles.inputField\n  }), numberValueTypes.includes(valueType) && /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Value'),\n    value: value !== undefined ? Number(value) : value,\n    onChange: newValue => onChange(`${operator}:${newValue}`),\n    className: styles.inputField\n  }), textValueTypes.includes(valueType) && !optionSetId && /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.t('Value'),\n    value: value || '',\n    onChange: newValue => onChange(`${operator}:${newValue}`),\n    className: styles.inputField\n  }), booleanValueTypes.includes(valueType) && /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Yes'),\n    checked: value == 1 ? true : false,\n    onChange: isChecked => onChange(isChecked ? 'IN:1' : 'IN:0'),\n    className: styles.checkbox\n  }), valueType === 'DATE' && /*#__PURE__*/React.createElement(DatePicker, {\n    label: i18n.t('Date'),\n    value: value,\n    onChange: date => onChange(`${operator}:${date}`),\n    className: styles.inputField\n  }));\n};\nFilterSelect.propTypes = {\n  valueType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  filter: PropTypes.string,\n  optionSetId: PropTypes.string\n};\nexport default FilterSelect;","// extracted by mini-css-extract-plugin\nexport default {\"filterRow\":\"FilterRow_filterRow__Y3lTE\",\"dataItemSelect\":\"FilterRow_dataItemSelect__ajzRb\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../../core/index.js';\nimport RemoveFilter from '../../filter/RemoveFilter.js';\nimport FilterSelect from './FilterSelect.js';\nimport styles from './styles/FilterRow.module.css';\nconst FilterRow = _ref => {\n  let {\n    index,\n    dimension,\n    filter,\n    dataItems,\n    onChange,\n    onRemove\n  } = _ref;\n  if (!(dataItems !== null && dataItems !== void 0 && dataItems.length)) {\n    return null;\n  }\n  const {\n    valueType,\n    optionSet\n  } = dataItems.find(d => d.id === dimension) || {};\n  const onSelect = (_ref2, newFilter) => {\n    let {\n      id\n    } = _ref2;\n    const name = dataItems.filter(d => d.id === id)[0].name;\n    if (id !== dimension) {\n      // New dimension\n      onChange(index, {\n        dimension: id,\n        name,\n        filter: null\n      });\n    } else {\n      onChange(index, {\n        dimension: id,\n        name,\n        filter: newFilter\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterRow\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data item'),\n    items: dataItems,\n    value: dimension || null,\n    onChange: onSelect,\n    className: styles.dataItemSelect\n  }), valueType && /*#__PURE__*/React.createElement(FilterSelect, {\n    valueType: valueType,\n    optionSetId: optionSet === null || optionSet === void 0 ? void 0 : optionSet.id,\n    filter: filter,\n    onChange: newFilter => onSelect({\n      id: dimension\n    }, newFilter)\n  }), /*#__PURE__*/React.createElement(RemoveFilter, {\n    onClick: () => onRemove(index)\n  }));\n};\nFilterRow.propTypes = {\n  dataItems: PropTypes.array.isRequired,\n  index: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  filter: PropTypes.string\n};\nexport default FilterRow;","// extracted by mini-css-extract-plugin\nexport default {\"filterGroup\":\"FilterGroup_filterGroup__E1a0A\",\"addFilter\":\"FilterGroup_addFilter__Shcz8\",\"note\":\"FilterGroup_note__hnJSP\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { addFilter, removeFilter, changeFilter } from '../../../actions/layerEdit.js';\nimport { useEventDataItems } from '../../../hooks/useEventDataItems.js';\nimport FilterRow from './FilterRow.js';\nimport styles from './styles/FilterGroup.module.css';\nconst excludeTypes = ['FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE'];\nconst FilterGroup = _ref => {\n  let {\n    filters = [],\n    program,\n    programStage\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    eventDataItems\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    excludeTypes\n  });\n  if (!programStage) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.note\n    }, i18n.t('Filtering is available after selecting a program stage.'));\n  }\n  if (eventDataItems === null) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterGroup\n  }, filters.map((item, index) => /*#__PURE__*/React.createElement(FilterRow, _extends({\n    key: index,\n    index: index,\n    dataItems: eventDataItems,\n    onChange: (index, item) => dispatch(changeFilter(index, item)),\n    onRemove: val => dispatch(removeFilter(val))\n  }, item))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addFilter\n  }, /*#__PURE__*/React.createElement(Button, {\n    basic: true,\n    onClick: () => dispatch(addFilter())\n  }, i18n.t('Add filter'))));\n};\nFilterGroup.propTypes = {\n  filters: PropTypes.array,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default FilterGroup;","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"Classification_select__g4tq7\",\"classes\":\"Classification_classes__pe3qP\",\"scale\":\"Classification_scale__j1o7v\",\"clear\":\"Classification_clear__wSOTp\"};","import i18n from '@dhis2/d2-i18n';\nimport { range } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setColorScale } from '../../actions/layerEdit.js';\nimport { getClassificationTypes, CLASSIFICATION_EQUAL_INTERVALS } from '../../constants/layers.js';\nimport { defaultColorScaleName, defaultClasses, defaultColorScale, getColorPalette, getColorScale } from '../../util/colors.js';\nimport { SelectField, ColorScaleSelect } from '../core/index.js';\nimport styles from './styles/Classification.module.css';\nconst classRange = range(3, 10).map(num => ({\n  id: num,\n  name: num.toString()\n})); // 3 - 9\n\nconst Classification = _ref => {\n  let {\n    method,\n    classes,\n    colorScale,\n    setClassification,\n    setColorScale\n  } = _ref;\n  const colorScaleName = colorScale ? getColorScale(colorScale) : defaultColorScaleName;\n  return [/*#__PURE__*/React.createElement(SelectField, {\n    key: \"classification\",\n    label: i18n.t('Classification'),\n    value: method || CLASSIFICATION_EQUAL_INTERVALS,\n    items: getClassificationTypes(),\n    onChange: method => setClassification(method.id),\n    className: styles.select\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    key: \"scale\"\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Classes'),\n    value: classes !== undefined ? classes : defaultClasses,\n    items: classRange,\n    onChange: item => setColorScale(getColorPalette(colorScaleName, item.id)),\n    className: styles.classes\n  }), /*#__PURE__*/React.createElement(ColorScaleSelect, {\n    palette: colorScale ? colorScale : defaultColorScale,\n    onChange: setColorScale,\n    width: 190,\n    className: styles.scale\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.clear\n  }))];\n};\nClassification.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  setColorScale: PropTypes.func.isRequired,\n  classes: PropTypes.number,\n  colorScale: PropTypes.string,\n  method: PropTypes.number\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    method: layerEdit.method,\n    classes: layerEdit.classes,\n    colorScale: layerEdit.colorScale\n  };\n}, {\n  setClassification,\n  setColorScale\n})(Classification);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLegendSet } from '../../actions/layerEdit.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all legend sets\nconst LEGEND_SETS_QUERY = {\n  sets: {\n    resource: 'legendSets',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst style = {\n  width: '100%'\n};\nconst LegendSetSelect = _ref => {\n  let {\n    legendSetError\n  } = _ref;\n  const legendSet = useSelector(state => state.layerEdit.legendSet);\n  const dispatch = useDispatch();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(LEGEND_SETS_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Legend set'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.sets.legendSets,\n    value: legendSet ? legendSet.id : null,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || legendSetError,\n    onChange: legendSet => dispatch(setLegendSet(legendSet)),\n    style: style\n  });\n};\nLegendSetSelect.propTypes = {\n  legendSetError: PropTypes.string\n};\nexport default LegendSetSelect;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification } from '../../actions/layerEdit.js';\nimport { getLegendTypes, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS } from '../../constants/layers.js';\nimport { Radio, RadioGroup } from '../core/index.js';\n\n// Select between user defined (automatic), predefined or single color\nconst LegendTypeSelect = _ref => {\n  let {\n    mapType,\n    method,\n    setClassification\n  } = _ref;\n  return method ? /*#__PURE__*/React.createElement(RadioGroup, {\n    value: method === CLASSIFICATION_EQUAL_COUNTS ? CLASSIFICATION_EQUAL_INTERVALS : method,\n    onChange: method => setClassification(Number(method))\n  }, getLegendTypes(mapType === 'BUBBLE').map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Radio, {\n      key: id,\n      value: id,\n      label: name\n    });\n  })) : null;\n};\nLegendTypeSelect.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  mapType: PropTypes.string,\n  method: PropTypes.number\n};\nexport default connect(null, {\n  setClassification\n})(LegendTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setColorScale } from '../../actions/layerEdit.js';\nimport { THEMATIC_COLOR } from '../../constants/layers.js';\nimport { ColorPicker } from '../core/index.js';\n\n// Displays a color picker for single color layer\nconst SingleColor = _ref => {\n  let {\n    color,\n    setColorScale\n  } = _ref;\n  // Set default color\n  useEffect(() => {\n    if (!color || color.length !== 7) {\n      setColorScale(THEMATIC_COLOR);\n    }\n  }, [color, setColorScale]);\n  return color ? /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Color'),\n    color: color,\n    onChange: setColorScale,\n    width: 100,\n    style: {\n      marginTop: -5\n    }\n  }) : null;\n};\nSingleColor.propTypes = {\n  setColorScale: PropTypes.func.isRequired,\n  color: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    color: layerEdit.colorScale\n  };\n}, {\n  setColorScale\n})(SingleColor);","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setLegendSet } from '../../actions/layerEdit.js';\nimport { CLASSIFICATION_PREDEFINED, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_SINGLE_COLOR } from '../../constants/layers.js';\nimport Classification from './Classification.js';\nimport LegendSetSelect from './LegendSetSelect.js';\nimport LegendTypeSelect from './LegendTypeSelect.js';\nimport SingleColor from './SingleColor.js';\n\n// Wrapper component for selecting legend style used for numeric map styles\nconst NumericLegendStyle = props => {\n  const {\n    mapType,\n    method,\n    dataItem,\n    legendSet,\n    setClassification,\n    setLegendSet,\n    legendSetError,\n    style\n  } = props;\n  const isSingleColor = method === CLASSIFICATION_SINGLE_COLOR;\n  const isPredefined = method === CLASSIFICATION_PREDEFINED;\n  useEffect(() => {\n    // Set default classification method\n    if (!method) {\n      // Use predefined legend if defined for data item\n      setClassification(dataItem && dataItem.legendSet ? CLASSIFICATION_PREDEFINED : CLASSIFICATION_EQUAL_INTERVALS);\n    }\n  }, [method, dataItem, setClassification]);\n  useEffect(() => {\n    // Set legend set defined for data item in use by default\n    if (isPredefined && !legendSet && dataItem !== null && dataItem !== void 0 && dataItem.legendSet) {\n      setLegendSet(dataItem.legendSet);\n    }\n  }, [isPredefined, legendSet, dataItem, setLegendSet]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(LegendTypeSelect, {\n    method: method,\n    mapType: mapType,\n    dataItem: dataItem\n  }), isSingleColor ? /*#__PURE__*/React.createElement(SingleColor, null) : isPredefined ? /*#__PURE__*/React.createElement(LegendSetSelect, {\n    legendSetError: legendSetError\n  }) : /*#__PURE__*/React.createElement(Classification, null));\n};\nNumericLegendStyle.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  setLegendSet: PropTypes.func.isRequired,\n  dataItem: PropTypes.object,\n  legendSet: PropTypes.object,\n  legendSetError: PropTypes.string,\n  mapType: PropTypes.string,\n  method: PropTypes.number,\n  style: PropTypes.object\n};\nexport default connect(_ref => {\n  let {\n    layerEdit\n  } = _ref;\n  return {\n    method: layerEdit.method,\n    legendSet: layerEdit.legendSet\n  };\n}, {\n  setClassification,\n  setLegendSet\n})(NumericLegendStyle);","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"OptionStyle_item__2QP3n\",\"color\":\"OptionStyle_color__gdTSK\",\"label\":\"OptionStyle_label__A8ydG\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { ColorPicker } from '../core/index.js';\nimport styles from './styles/OptionStyle.module.css';\nconst OptionStyle = _ref => {\n  let {\n    name,\n    color,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.item\n  }, /*#__PURE__*/React.createElement(ColorPicker, {\n    color: color,\n    onChange: onChange,\n    className: styles.color\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, name));\n};\nOptionStyle.propTypes = {\n  color: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default OptionStyle;","// extracted by mini-css-extract-plugin\nexport default {\"optionSetStyle\":\"OptionSetStyle_optionSetStyle__tvnSJ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Help, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setOptionStyle } from '../../actions/layerEdit.js';\nimport { qualitativeColors } from '../../constants/colors.js';\nimport useOptionSet from '../../hooks/useOptionSet.js';\nimport { getUniqueColor } from '../../util/colors.js';\nimport OptionStyle from './OptionStyle.js';\nimport styles from './styles/OptionSetStyle.module.css';\nconst MAX_OPTIONS = 50;\nconst getColor = getUniqueColor(qualitativeColors);\nconst addOptionStyle = (option, index) => ({\n  ...option,\n  style: {\n    color: option.style ? option.style.color : getColor(index)\n  }\n});\nconst OptionSetStyle = _ref => {\n  let {\n    styledOptionSet\n  } = _ref;\n  const {\n    optionSet\n  } = useOptionSet(styledOptionSet.id);\n  const [warning, setWarning] = useState();\n  const dispatch = useDispatch();\n  const options = styledOptionSet.id === (optionSet === null || optionSet === void 0 ? void 0 : optionSet.id) ? optionSet.options : null;\n  const styledOptions = styledOptionSet.options;\n  const onChange = useCallback((id, color) => {\n    dispatch(setOptionStyle(\n    // Update options style\n    styledOptionSet.options.map(option => option.id === id ? {\n      ...option,\n      style: {\n        color\n      }\n    } : option)));\n  }, [styledOptionSet, dispatch]);\n  useEffect(() => {\n    if (!styledOptions && options) {\n      if (options.length <= MAX_OPTIONS) {\n        // Set default options style\n        dispatch(setOptionStyle(options.map(addOptionStyle)));\n      } else {\n        setWarning(i18n.t('This data element has too many options ({{length}}). Max options for styling is {{max}}.', {\n          length: options.length,\n          max: MAX_OPTIONS\n        }));\n      }\n    }\n  }, [styledOptions, options, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.optionSetStyle\n  }, styledOptions ? styledOptions.map(_ref2 => {\n    let {\n      id,\n      name,\n      style\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(OptionStyle, {\n      key: id,\n      name: name,\n      color: style.color,\n      onChange: color => onChange(id, color)\n    });\n  }) : warning ? /*#__PURE__*/React.createElement(Help, {\n    warning: true\n  }, warning) : /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }));\n};\nOptionSetStyle.propTypes = {\n  styledOptionSet: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    options: PropTypes.array\n  }).isRequired\n};\nexport default OptionSetStyle;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setBooleanStyle } from '../../actions/layerEdit.js';\nimport { qualitativeColors } from '../../constants/colors.js';\nimport OptionStyle from '../optionSet/OptionStyle.js';\nconst style = {\n  marginTop: 20\n};\nclass BooleanStyle extends Component {\n  componentDidMount() {\n    const {\n      valueType,\n      values,\n      setBooleanStyle\n    } = this.props;\n    if (!values) {\n      setBooleanStyle('true', qualitativeColors[0]);\n      if (valueType === 'BOOLEAN') {\n        setBooleanStyle('false', qualitativeColors[1]);\n      }\n    }\n  }\n  render() {\n    const {\n      valueType,\n      values,\n      setBooleanStyle\n    } = this.props;\n    if (!values) {\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: style\n    }, /*#__PURE__*/React.createElement(OptionStyle, {\n      name: i18n.t('Yes'),\n      color: values.true,\n      onChange: color => setBooleanStyle('true', color)\n    }), valueType === 'BOOLEAN' ? /*#__PURE__*/React.createElement(OptionStyle, {\n      name: 'No',\n      color: values.false,\n      onChange: color => setBooleanStyle('false', color)\n    }) : null);\n  }\n}\n_defineProperty(BooleanStyle, \"propTypes\", {\n  setBooleanStyle: PropTypes.func.isRequired,\n  valueType: PropTypes.string.isRequired,\n  values: PropTypes.shape({\n    true: PropTypes.string.isRequired,\n    false: PropTypes.string\n  })\n});\nexport default connect(null, {\n  setBooleanStyle\n})(BooleanStyle);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { numberValueTypes, booleanValueTypes } from '../../constants/valueTypes.js';\nimport NumericLegendStyle from '../classification/NumericLegendStyle.js';\nimport OptionSetStyle from '../optionSet/OptionSetStyle.js';\nimport BooleanStyle from './BooleanStyle.js';\nconst DataItemStyle = _ref => {\n  let {\n    dataItem,\n    style\n  } = _ref;\n  if (!dataItem) {\n    return null;\n  }\n  const {\n    valueType,\n    optionSet\n  } = dataItem;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, numberValueTypes.includes(valueType) ? /*#__PURE__*/React.createElement(NumericLegendStyle, {\n    dataItem: dataItem,\n    style: {\n      width: '100%'\n    }\n  }) : null, booleanValueTypes.includes(valueType) ? /*#__PURE__*/React.createElement(BooleanStyle, dataItem) : null, optionSet ? /*#__PURE__*/React.createElement(OptionSetStyle, {\n    styledOptionSet: optionSet\n  }) : null);\n};\nDataItemStyle.propTypes = {\n  dataItem: PropTypes.object,\n  style: PropTypes.object\n};\nexport default DataItemStyle;","import i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setStyleDataItem } from '../../actions/layerEdit.js';\nimport { useEventDataItems } from '../../hooks/useEventDataItems.js';\nimport { SelectField } from '../core/index.js';\nimport DataItemStyle from './DataItemStyle.js';\nconst excludeTypes = ['DATE', 'FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE'];\n\n// Style by data item is used by event layer, and can be reused for TEI layer in the future.\n// Displays a select field with data items that support styling.\n// Styling options are shown when a data item is selected.\nconst StyleByDataItem = _ref => {\n  let {\n    program,\n    programStage,\n    error\n  } = _ref;\n  const styleDataItem = useSelector(state => state.layerEdit.styleDataItem);\n  const dispatch = useDispatch();\n  const {\n    eventDataItems\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    excludeTypes\n  });\n  const ITEM_NONE = {\n    id: 'none',\n    name: i18n.t('None')\n  };\n  const onChange = item => dispatch(setStyleDataItem(item.id !== ITEM_NONE.id ? item : null));\n  if (eventDataItems === null) {\n    return null;\n  }\n  const dataItems = [ITEM_NONE, ...eventDataItems];\n  if (styleDataItem && !dataItems.find(item => item.id === styleDataItem.id)) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, i18n.t('Selected value not available in in list: {{name}}', {\n      name: styleDataItem.name,\n      nsSeparator: '^^'\n    }));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Style by data element'),\n    value: styleDataItem ? styleDataItem.id : null,\n    items: dataItems,\n    onChange: onChange\n  }), styleDataItem && /*#__PURE__*/React.createElement(DataItemStyle, {\n    key: \"style\",\n    dataItem: styleDataItem\n  }), error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, error));\n};\nStyleByDataItem.propTypes = {\n  error: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default StyleByDataItem;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { START_END_DATES } from '../../constants/periods.js';\nimport { getRelativePeriods } from '../../util/periods.js';\nimport { SelectField } from '../core/index.js';\nimport { useSystemSettings } from '../SystemSettingsProvider.js';\nconst RelativePeriodSelect = _ref => {\n  let {\n    startEndDates,\n    period,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    hiddenPeriods\n  } = useSystemSettings();\n  const periods = useMemo(() => (startEndDates ? [{\n    id: START_END_DATES,\n    name: i18n.t('Start/end dates')\n  }] : []).concat(getRelativePeriods(hiddenPeriods)), [hiddenPeriods, startEndDates]);\n  const value = period && periods.find(p => p.id === period.id) ? period.id : null;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period'),\n    items: periods,\n    value: value,\n    onChange: onChange,\n    className: className,\n    errorText: !value && errorText ? errorText : null,\n    dataTest: \"relative-period-select\"\n  });\n};\nRelativePeriodSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  period: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string\n  }),\n  startEndDates: PropTypes.bool\n};\nexport default RelativePeriodSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setStartDate, setEndDate } from '../../actions/layerEdit.js';\nimport { DEFAULT_START_DATE, DEFAULT_END_DATE } from '../../constants/layers.js';\nimport { DatePicker } from '../core/index.js';\nimport styles from '../edit/styles/LayerDialog.module.css';\nconst StartEndDates = props => {\n  const {\n    startDate,\n    endDate,\n    setStartDate,\n    setEndDate,\n    errorText,\n    className\n  } = props;\n  const hasDate = startDate !== undefined && endDate !== undefined;\n  useEffect(() => {\n    if (!hasDate) {\n      setStartDate(DEFAULT_START_DATE);\n      setEndDate(DEFAULT_END_DATE);\n    }\n  }, [hasDate, setStartDate, setEndDate]);\n  return hasDate ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(DatePicker, {\n    label: i18n.t('Start date'),\n    defaultVal: startDate,\n    onBlur: setStartDate,\n    className: className || styles.select\n  }), /*#__PURE__*/React.createElement(DatePicker, {\n    label: i18n.t('End date'),\n    defaultVal: endDate,\n    onBlur: setEndDate,\n    className: className || styles.select\n  }), errorText && /*#__PURE__*/React.createElement(\"div\", {\n    key: \"error\",\n    className: styles.error\n  }, errorText)) : null;\n};\nStartEndDates.propTypes = {\n  setEndDate: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  endDate: PropTypes.string,\n  errorText: PropTypes.string,\n  startDate: PropTypes.string\n};\nexport default connect(null, {\n  setStartDate,\n  setEndDate\n})(StartEndDates);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\nconst allProgramsItem = {\n  id: 'noPrograms',\n  name: i18n.t('No program')\n};\n\n// Load all programs\nconst PROGRAMS_QUERY = {\n  programs: {\n    resource: 'programs',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`, 'trackedEntityType[id,displayName~rename(name)]'],\n        paging: false\n      };\n    }\n  }\n};\nconst ProgramSelect = _ref2 => {\n  let {\n    program,\n    trackedEntityType,\n    className,\n    errorText,\n    onChange\n  } = _ref2;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(PROGRAMS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const programs = data === null || data === void 0 ? void 0 : data.programs.programs;\n  let trackedEntityPrograms;\n  let value = program === null || program === void 0 ? void 0 : program.id;\n  if (programs && trackedEntityType) {\n    trackedEntityPrograms = [allProgramsItem, ...programs.filter(program => program.trackedEntityType && program.trackedEntityType.id === trackedEntityType.id)];\n    if (!value) {\n      value = 'noPrograms';\n    }\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program'),\n    loading: loading,\n    items: trackedEntityPrograms || programs,\n    value: value,\n    onChange: program => onChange(program.id !== 'noPrograms' ? program : null),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!program && errorText ? errorText : null),\n    dataTest: \"programselect\"\n  });\n};\nProgramSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  program: PropTypes.object,\n  trackedEntityType: PropTypes.object\n};\nexport default ProgramSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all stages for one program\nconst PROGRAM_STAGES_QUERY = {\n  stages: {\n    resource: 'programs',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: 'programStages[id,displayName~rename(name)]',\n      paging: false\n    }\n  }\n};\nconst ProgramStageSelect = _ref2 => {\n  let {\n    program,\n    programStage,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const onProgramStagesLoad = useCallback(data => {\n    const stages = data.stages.programStages;\n\n    // Select first program stage if only one\n    if (!programStage && (stages === null || stages === void 0 ? void 0 : stages.length) === 1) {\n      onChange(stages[0]);\n    }\n  }, [programStage, onChange]);\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(PROGRAM_STAGES_QUERY, {\n    onComplete: onProgramStagesLoad,\n    lazy: true\n  });\n\n  // Fetch program stages when program is changed\n  useEffect(() => {\n    refetch({\n      id: program.id\n    });\n  }, [program, refetch]);\n  let items = data === null || data === void 0 ? void 0 : data.stages.programStages;\n  if (!items && programStage) {\n    // If favorite is loaded, we only know the used program stage\n    items = [programStage];\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Stage'),\n    loading: loading,\n    items: items,\n    value: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!programStage && errorText ? errorText : null),\n    dataTest: \"programstageselect\"\n  });\n};\nProgramStageSelect.propTypes = {\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }).isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  programStage: PropTypes.object\n};\nexport default ProgramStageSelect;","import i18n from '@dhis2/d2-i18n';\nexport const EVENT_STATUS_ALL = 'ALL';\nexport const EVENT_STATUS_ACTIVE = 'ACTIVE';\nexport const EVENT_STATUS_COMPLETED = 'COMPLETED';\nexport const getEventStatuses = () => [{\n  id: EVENT_STATUS_ALL,\n  name: i18n.t('All')\n}, {\n  id: EVENT_STATUS_ACTIVE,\n  name: i18n.t('Active')\n}, {\n  id: EVENT_STATUS_COMPLETED,\n  name: i18n.t('Completed')\n}];","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getEventStatuses, EVENT_STATUS_ALL } from '../../../constants/eventStatuses.js';\nimport { SelectField } from '../../core/index.js';\nconst EventStatusSelect = _ref => {\n  let {\n    value = EVENT_STATUS_ALL,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Event status'),\n    items: getEventStatuses(),\n    value: value,\n    onChange: valueType => onChange(valueType.id),\n    className: className\n  });\n};\nEventStatusSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default EventStatusSelect;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setProgram, setProgramStage, setEventStatus, setEventCoordinateField, setEventClustering, setEventPointColor, setEventPointRadius, setPeriod, setStartDate, setEndDate } from '../../../actions/layerEdit.js';\nimport { DEFAULT_START_DATE, DEFAULT_END_DATE, EVENT_COLOR, EVENT_RADIUS, EVENT_BUFFER, CLASSIFICATION_PREDEFINED, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { START_END_DATES } from '../../../constants/periods.js';\nimport { getPeriodFromFilters, getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { cssColor } from '../../../util/colors.js';\nimport { isPeriodAvailable } from '../../../util/periods.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport { Tab, Tabs, NumberField, ImageSelect, ColorPicker } from '../../core/index.js';\nimport CoordinateField from '../../dataItem/CoordinateField.js';\nimport FilterGroup from '../../dataItem/filter/FilterGroup.js';\nimport StyleByDataItem from '../../dataItem/StyleByDataItem.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport RelativePeriodSelect from '../../periods/RelativePeriodSelect.js';\nimport StartEndDates from '../../periods/StartEndDates.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport ProgramStageSelect from '../../program/ProgramStageSelect.js';\nimport { SystemSettingsCtx } from '../../SystemSettingsProvider.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport EventStatusSelect from './EventStatusSelect.js';\nclass EventDialog extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      tab: 'data'\n    };\n  }\n  componentDidMount() {\n    const {\n      filters,\n      defaultPeriod,\n      settings,\n      startDate,\n      endDate,\n      setPeriod,\n      setStartDate,\n      setEndDate\n    } = this.props;\n    const period = getPeriodFromFilters(filters);\n\n    // Set default period from system settings\n    if (!period && !startDate && !endDate && defaultPeriod && isPeriodAvailable(defaultPeriod, settings.hiddenPeriods)) {\n      setPeriod({\n        id: defaultPeriod\n      });\n    } else if (!startDate && !endDate) {\n      setStartDate(DEFAULT_START_DATE);\n      setEndDate(DEFAULT_END_DATE);\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      // layer options\n      columns = [],\n      endDate,\n      eventClustering,\n      eventStatus,\n      eventCoordinateField,\n      eventPointColor,\n      eventPointRadius,\n      filters = [],\n      program,\n      programStage,\n      startDate,\n      legendSet\n    } = this.props;\n    const {\n      // handlers\n      setProgram,\n      setProgramStage,\n      setEventStatus,\n      setEventCoordinateField,\n      setEventClustering,\n      setEventPointColor,\n      setEventPointRadius,\n      setPeriod\n    } = this.props;\n    const {\n      tab,\n      programError,\n      programStageError,\n      periodError,\n      orgUnitsError,\n      legendSetError\n    } = this.state;\n    const period = getPeriodFromFilters(filters) || {\n      id: START_END_DATES\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"eventdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"filter\"\n    }, i18n.t('Filter')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent,\n      \"data-test\": \"eventdialog-content\"\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-datatab\"\n    }, /*#__PURE__*/React.createElement(ProgramSelect, {\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError,\n      \"data-test\": \"eventdialog-programselect\"\n    }), program && /*#__PURE__*/React.createElement(ProgramStageSelect, {\n      program: program,\n      programStage: programStage,\n      onChange: setProgramStage,\n      className: styles.select,\n      errorText: programStageError\n    }), /*#__PURE__*/React.createElement(CoordinateField, {\n      program: program,\n      programStage: programStage,\n      value: eventCoordinateField,\n      onChange: setEventCoordinateField,\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(EventStatusSelect, {\n      value: eventStatus,\n      onChange: setEventStatus,\n      className: styles.select\n    })), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-periodtab\"\n    }, /*#__PURE__*/React.createElement(RelativePeriodSelect, {\n      period: period,\n      startEndDates: true,\n      onChange: setPeriod,\n      className: styles.select\n    }), period && period.id === START_END_DATES && /*#__PURE__*/React.createElement(StartEndDates, {\n      startDate: startDate,\n      endDate: endDate,\n      errorText: periodError\n    })), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      selectRoots: true,\n      hideAssociatedGeometry: true,\n      hideLevelSelect: true,\n      hideGroupSelect: true,\n      warning: orgUnitsError\n    }), tab === 'filter' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-filtertab\"\n    }, /*#__PURE__*/React.createElement(FilterGroup, {\n      program: program,\n      programStage: programStage,\n      filters: columns.filter(c => c.filter !== undefined)\n    })), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"eventdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ImageSelect, {\n      id: \"cluster\",\n      img: \"images/cluster.png\",\n      title: i18n.t('Group events'),\n      onClick: () => setEventClustering(true),\n      isSelected: eventClustering,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(ImageSelect, {\n      id: \"nocluster\",\n      img: \"images/nocluster.png\",\n      title: i18n.t('View all events'),\n      onClick: () => setEventClustering(false),\n      isSelected: !eventClustering,\n      className: styles.flexInnerColumn\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: cssColor(eventPointColor) || EVENT_COLOR,\n      onChange: setEventPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Radius'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: eventPointRadius || EVENT_RADIUS,\n      onChange: setEventPointRadius\n    })), /*#__PURE__*/React.createElement(BufferRadius, {\n      disabled: eventClustering,\n      defaultRadius: EVENT_BUFFER\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, program ? /*#__PURE__*/React.createElement(StyleByDataItem, {\n      program: program,\n      programStage: programStage,\n      error: !legendSet && legendSetError\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.notice\n    }, /*#__PURE__*/React.createElement(NoticeBox, null, i18n.t('You can style events by data element after selecting a program.')))))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      program,\n      programStage,\n      rows,\n      filters,\n      startDate,\n      endDate,\n      method,\n      legendSet,\n      styleDataItem\n    } = this.props;\n    const period = getPeriodFromFilters(filters) || {\n      id: START_END_DATES\n    };\n    if (!program) {\n      return this.setErrorState('programError', i18n.t('Program is required'), 'data');\n    }\n    if (!programStage) {\n      return this.setErrorState('programStageError', i18n.t('Program stage is required'), 'data');\n    }\n    if (period.id === START_END_DATES) {\n      const error = getStartEndDateError(startDate, endDate);\n      if (error) {\n        return this.setErrorState('periodError', error, 'period');\n      }\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected.'), 'orgunits');\n    }\n    if (method === CLASSIFICATION_PREDEFINED && !legendSet) {\n      return this.setErrorState('legendSetError', i18n.t('No legend set is selected'), 'style');\n    }\n    if (styleDataItem && styleDataItem.optionSet && !styleDataItem.optionSet.options) {\n      // Occurs when there are too many options\n      return this.setErrorState('styleDataItemError', '', 'style');\n    }\n    return true;\n  }\n}\n_defineProperty(EventDialog, \"propTypes\", {\n  setEndDate: PropTypes.func.isRequired,\n  setEventClustering: PropTypes.func.isRequired,\n  setEventCoordinateField: PropTypes.func.isRequired,\n  setEventPointColor: PropTypes.func.isRequired,\n  setEventPointRadius: PropTypes.func.isRequired,\n  setEventStatus: PropTypes.func.isRequired,\n  setPeriod: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setProgramStage: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  columns: PropTypes.array,\n  defaultPeriod: PropTypes.string,\n  endDate: PropTypes.string,\n  eventClustering: PropTypes.bool,\n  eventCoordinateField: PropTypes.string,\n  eventPointColor: PropTypes.string,\n  eventPointRadius: PropTypes.number,\n  eventStatus: PropTypes.string,\n  filters: PropTypes.array,\n  legendSet: PropTypes.object,\n  method: PropTypes.number,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  rows: PropTypes.array,\n  settings: PropTypes.object,\n  startDate: PropTypes.string,\n  styleDataItem: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    optionSet: PropTypes.shape({\n      options: PropTypes.array\n    })\n  })\n});\nconst EventDialogWithSettings = props => /*#__PURE__*/React.createElement(SystemSettingsCtx.Consumer, null, settings => /*#__PURE__*/React.createElement(EventDialog, _extends({\n  settings: settings\n}, props)));\nexport default connect(null, {\n  setProgram,\n  setProgramStage,\n  setEventStatus,\n  setEventCoordinateField,\n  setEventClustering,\n  setEventPointColor,\n  setEventPointRadius,\n  setPeriod,\n  setStartDate,\n  setEndDate\n}, null, {\n  forwardRef: true\n})(EventDialogWithSettings);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useCallback } from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\n\n// Load org unit group sets\nconst ORG_UNIT_GROUP_SETS_QUERY = {\n  sets: {\n    resource: 'organisationUnitGroupSets',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst GroupSetSelect = _ref2 => {\n  let {\n    label = i18n.t('Group set'),\n    value,\n    allowNone,\n    onChange,\n    errorText,\n    className\n  } = _ref2;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(ORG_UNIT_GROUP_SETS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const groupSets = useMemo(() => [...(allowNone ? [{\n    id: 'none',\n    name: i18n.t('None')\n  }] : []), ...((data === null || data === void 0 ? void 0 : data.sets.organisationUnitGroupSets) || [])], [data, allowNone]);\n  const onGroupSetChange = useCallback(item => onChange(item.id !== 'none' ? item : undefined), [onChange]);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: label,\n    loading: loading,\n    items: groupSets,\n    value: value ? value.id : null,\n    onChange: onGroupSetChange,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!value && errorText ? errorText : null),\n    className: className,\n    \"data-test\": \"orgunitgroupsetselect\"\n  });\n};\nGroupSetSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  allowNone: PropTypes.bool,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  label: PropTypes.string,\n  value: PropTypes.object\n};\nexport default GroupSetSelect;","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"GroupStyle_item__6Iy9l\",\"color\":\"GroupStyle_color__F3Dhm\",\"symbol\":\"GroupStyle_symbol__JCmId\",\"label\":\"GroupStyle_label__1DbEY\"};","import { getInstance as getD2 } from 'd2';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport styles from './styles/GroupStyle.module.css';\nconst GroupStyle = _ref => {\n  let {\n    name,\n    color,\n    symbol,\n    styleType\n  } = _ref;\n  const [imagePath, setImagePath] = useState();\n  const useColor = styleType !== 'SYMBOL';\n  useEffect(() => {\n    getD2().then(d2 => setImagePath(`${d2.system.systemInfo.contextPath}/images/orgunitgroup/`));\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.item\n  }, useColor ? /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.color,\n    style: {\n      backgroundColor: color\n    }\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.symbol,\n    style: {\n      backgroundImage: imagePath && symbol ? `url(${imagePath}${symbol})` : 'none'\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, name));\n};\nGroupStyle.propTypes = {\n  color: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  styleType: PropTypes.string.isRequired,\n  symbol: PropTypes.string\n};\nexport default GroupStyle;","// extracted by mini-css-extract-plugin\nexport default {\"groupSetStyle\":\"GroupSetStyle_groupSetStyle__fiBJG\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { STYLE_TYPE_COLOR } from '../../constants/layers.js';\nimport { parseGroupSet } from '../../util/orgUnits.js';\nimport GroupStyle from './GroupStyle.js';\nimport styles from './styles/GroupSetStyle.module.css';\nconst GROUP_SETS_QUERY = {\n  groupSets: {\n    resource: 'organisationUnitGroupSets',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: ['organisationUnitGroups[id,name,color,symbol]']\n    }\n  }\n};\nconst GroupSetStyle = _ref2 => {\n  let {\n    defaultStyleType = STYLE_TYPE_COLOR,\n    groupSet\n  } = _ref2;\n  const [groups, setGroups] = useState([]);\n  const {\n    error: err,\n    refetch\n  } = useDataQuery(GROUP_SETS_QUERY, {\n    lazy: true,\n    onComplete: _ref3 => {\n      let {\n        groupSets\n      } = _ref3;\n      const groupsWithColors = parseGroupSet({\n        organisationUnitGroups: groupSets.organisationUnitGroups\n      });\n      setGroups(groupsWithColors);\n    }\n  });\n  useEffect(() => {\n    if (groupSet) {\n      refetch({\n        id: groupSet.id\n      });\n    }\n  }, [groupSet, refetch]);\n  if (err) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, i18n.t('Failed to load organisation unit groups.'));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.groupSetStyle\n  }, groups === null || groups === void 0 ? void 0 : groups.map(group => /*#__PURE__*/React.createElement(GroupStyle, _extends({\n    key: group.id,\n    styleType: defaultStyleType\n  }, group))));\n};\nGroupSetStyle.propTypes = {\n  defaultStyleType: PropTypes.string,\n  groupSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default GroupSetStyle;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setOrganisationUnitGroupSet } from '../../actions/layerEdit.js';\nimport styles from '../edit/styles/LayerDialog.module.css';\nimport GroupSetSelect from './GroupSetSelect.js';\nimport GroupSetStyle from './GroupSetStyle.js';\nconst StyleByGroupSet = _ref => {\n  let {\n    defaultStyleType,\n    groupSet,\n    setOrganisationUnitGroupSet\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(GroupSetSelect, {\n    label: i18n.t('Style by group set'),\n    value: groupSet,\n    allowNone: true,\n    onChange: setOrganisationUnitGroupSet,\n    className: styles.select\n  }), groupSet && /*#__PURE__*/React.createElement(GroupSetStyle, {\n    defaultStyleType: defaultStyleType,\n    groupSet: groupSet\n  }));\n};\nStyleByGroupSet.propTypes = {\n  setOrganisationUnitGroupSet: PropTypes.func.isRequired,\n  defaultStyleType: PropTypes.string,\n  groupSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    groupSet: layerEdit.organisationUnitGroupSet\n  };\n}, {\n  setOrganisationUnitGroupSet\n})(StyleByGroupSet);","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setLabels, setLabelFontColor, setLabelFontSize, setLabelFontWeight, setLabelFontStyle, setLabelTemplate } from '../../../actions/layerEdit.js';\nimport { LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { Checkbox, FontStyle, LabelDisplayOptions } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst Labels = _ref => {\n  let {\n    includeDisplayOption,\n    labels,\n    labelTemplate,\n    labelFontColor,\n    labelFontSize,\n    labelFontStyle,\n    labelFontWeight,\n    setLabels,\n    setLabelTemplate,\n    setLabelFontColor,\n    setLabelFontSize,\n    setLabelFontWeight,\n    setLabelFontStyle\n  } = _ref;\n  useEffect(() => {\n    if (labels && includeDisplayOption && !labelTemplate) {\n      setLabelTemplate(LABEL_TEMPLATE_NAME_ONLY);\n    }\n  }, [labels, includeDisplayOption, labelTemplate, setLabelTemplate]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.flexInnerColumnFlow)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Labels'),\n    checked: labels,\n    onChange: setLabels\n  }), labels && /*#__PURE__*/React.createElement(React.Fragment, null, includeDisplayOption && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.labelDisplayOptions\n  }, /*#__PURE__*/React.createElement(LabelDisplayOptions, {\n    option: labelTemplate,\n    onDisplayOptionChange: setLabelTemplate\n  })), /*#__PURE__*/React.createElement(FontStyle, {\n    color: labelFontColor,\n    size: labelFontSize,\n    weight: labelFontWeight,\n    fontStyle: labelFontStyle,\n    onColorChange: setLabelFontColor,\n    onSizeChange: setLabelFontSize,\n    onWeightChange: setLabelFontWeight,\n    onStyleChange: setLabelFontStyle\n  }))));\n};\nLabels.propTypes = {\n  setLabelFontColor: PropTypes.func.isRequired,\n  setLabelFontSize: PropTypes.func.isRequired,\n  setLabelFontStyle: PropTypes.func.isRequired,\n  setLabelFontWeight: PropTypes.func.isRequired,\n  setLabelTemplate: PropTypes.func.isRequired,\n  setLabels: PropTypes.func.isRequired,\n  includeDisplayOption: PropTypes.bool,\n  labelFontColor: PropTypes.string,\n  labelFontSize: PropTypes.string,\n  labelFontStyle: PropTypes.string,\n  labelFontWeight: PropTypes.string,\n  labelTemplate: PropTypes.string,\n  labels: PropTypes.bool\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    labels: layerEdit.labels,\n    labelTemplate: layerEdit.labelTemplate,\n    labelFontColor: layerEdit.labelFontColor,\n    labelFontSize: layerEdit.labelFontSize,\n    labelFontStyle: layerEdit.labelFontStyle,\n    labelFontWeight: layerEdit.labelFontWeight\n  };\n}, {\n  setLabels,\n  setLabelTemplate,\n  setLabelFontColor,\n  setLabelFontSize,\n  setLabelFontWeight,\n  setLabelFontStyle\n})(Labels);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setOrgUnits, setRadiusLow, setOrganisationUnitGroupSet, setOrganisationUnitColor } from '../../actions/layerEdit.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, FACILITY_BUFFER, STYLE_TYPE_SYMBOL, MIN_RADIUS, MAX_RADIUS, NONE } from '../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../util/analytics.js';\nimport { Tab, Tabs, NumberField, ColorPicker } from '../core/index.js';\nimport StyleByGroupSet from '../groupSet/StyleByGroupSet.js';\nimport OrgUnitSelect from '../orgunits/OrgUnitSelect.js';\nimport BufferRadius from './shared/BufferRadius.js';\nimport Labels from './shared/Labels.js';\nimport styles from './styles/LayerDialog.module.css';\nconst QUERY = {\n  configuration: {\n    resource: 'configuration'\n  }\n};\nconst ORGUNITS_TAB = 'orgunits';\nconst FacilityDialog = _ref => {\n  let {\n    rows = [],\n    radiusLow,\n    organisationUnitColor,\n    organisationUnitGroupSet,\n    orgUnitField,\n    id,\n    validateLayer,\n    onLayerValidation\n  } = _ref;\n  const [tab, setTab] = useState(ORGUNITS_TAB);\n  const [orgUnitsError, setOrgUnitsError] = useState();\n  const {\n    data\n  } = useDataQuery(QUERY);\n  const dispatch = useDispatch();\n  const facilityOrgUnitLevel = data === null || data === void 0 ? void 0 : data.configuration.facilityOrgUnitLevel;\n  const facilityOrgUnitGroupSet = data === null || data === void 0 ? void 0 : data.configuration.facilityOrgUnitGroupSet;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const hasOrgUnits = useCallback(() => {\n    if (!orgUnits.length) {\n      setTab(ORGUNITS_TAB);\n      setOrgUnitsError(i18n.t('No organisation units are selected'));\n      return false;\n    }\n    return true;\n  }, [orgUnits]);\n  useEffect(() => {\n    if (validateLayer) {\n      onLayerValidation(hasOrgUnits());\n    }\n  }, [validateLayer, onLayerValidation, hasOrgUnits]);\n  useEffect(() => {\n    if (!id) {\n      // Set default org unit level\n      if (facilityOrgUnitLevel) {\n        dispatch(setOrgUnits({\n          dimension: 'ou',\n          items: [{\n            id: `LEVEL-${facilityOrgUnitLevel.id}`\n          }]\n        }));\n      }\n\n      // Set default org unit group set\n      if (facilityOrgUnitGroupSet) {\n        dispatch(setOrganisationUnitGroupSet(facilityOrgUnitGroupSet));\n      }\n    }\n  }, [id, facilityOrgUnitLevel, facilityOrgUnitGroupSet, dispatch]);\n  const hasOrgUnitField = !!orgUnitField && orgUnitField !== NONE;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    \"data-test\": \"facilitydialog\"\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: ORGUNITS_TAB\n  }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, tab === ORGUNITS_TAB && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n    warning: orgUnitsError\n  }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow,\n    \"data-test\": \"facilitydialog-styletab\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(Labels, null), /*#__PURE__*/React.createElement(BufferRadius, {\n    defaultRadius: FACILITY_BUFFER,\n    hasOrgUnitField: hasOrgUnitField\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(StyleByGroupSet, {\n    defaultStyleType: STYLE_TYPE_SYMBOL\n  }), !organisationUnitGroupSet && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Point color'),\n    color: organisationUnitColor || ORG_UNIT_COLOR,\n    onChange: val => dispatch(setOrganisationUnitColor(val)),\n    className: styles.narrowField\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Point radius'),\n    value: radiusLow !== undefined ? radiusLow : ORG_UNIT_RADIUS,\n    min: MIN_RADIUS,\n    max: MAX_RADIUS,\n    onChange: val => dispatch(setRadiusLow(val)),\n    disabled: !!organisationUnitGroupSet,\n    className: styles.narrowFieldIcon\n  }))))));\n};\nFacilityDialog.propTypes = {\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  id: PropTypes.string,\n  orgUnitField: PropTypes.string,\n  organisationUnitColor: PropTypes.string,\n  organisationUnitGroupSet: PropTypes.object,\n  radiusLow: PropTypes.number,\n  rows: PropTypes.array\n};\nexport default FacilityDialog;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setRadiusLow, setOrganisationUnitColor } from '../../../actions/layerEdit.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, STYLE_TYPE_COLOR, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { Tab, Tabs, NumberField, ColorPicker } from '../../core/index.js';\nimport StyleByGroupSet from '../../groupSet/StyleByGroupSet.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport Labels from '../shared/Labels.js';\nimport styles from '../styles/LayerDialog.module.css';\nclass OrgUnitDialog extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      tab: 'orgunits'\n    });\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      radiusLow,\n      organisationUnitColor,\n      setOrganisationUnitColor,\n      setRadiusLow\n    } = this.props;\n    const {\n      tab,\n      orgUnitsError\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"orgunitdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      warning: orgUnitsError\n    }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"orgunitdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(Labels, null), /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Boundary color'),\n      color: organisationUnitColor || ORG_UNIT_COLOR,\n      onChange: setOrganisationUnitColor,\n      className: styles.narrowField\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point radius'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: radiusLow !== undefined ? radiusLow : ORG_UNIT_RADIUS,\n      onChange: setRadiusLow,\n      className: styles.narrowFieldIcon\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(StyleByGroupSet, {\n      defaultStyleType: STYLE_TYPE_COLOR\n    })))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      rows\n    } = this.props;\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected'), 'orgunits');\n    }\n    return true;\n  }\n}\n_defineProperty(OrgUnitDialog, \"propTypes\", {\n  setOrganisationUnitColor: PropTypes.func.isRequired,\n  setRadiusLow: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  organisationUnitColor: PropTypes.string,\n  radiusLow: PropTypes.number,\n  rows: PropTypes.array\n});\nexport default connect(null, {\n  setRadiusLow,\n  setOrganisationUnitColor\n}, null, {\n  forwardRef: true\n})(OrgUnitDialog);","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"LayerEdit_content__A1H9D\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\n\n// Load all data element groups\nconst DATA_ELEMENT_GROUPS_QUERY = {\n  groups: {\n    resource: 'dataElementGroups',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementGroupSelect = _ref2 => {\n  let {\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(DATA_ELEMENT_GROUPS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element group'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.groups.dataElementGroups,\n    value: dataElementGroup === null || dataElementGroup === void 0 ? void 0 : dataElementGroup.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElementGroup && errorText ? errorText : null)\n  });\n};\nDataElementGroupSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementGroupSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\n\n// Load all data elements within a group\nconst DATA_ELEMENT_OPERAND_QUERY = {\n  operands: {\n    resource: 'dataElementOperands',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `dataElement.dataElementGroups.id:eq:${groupId}`,\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementOperandSelect = _ref2 => {\n  let {\n    dataElement,\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DATA_ELEMENT_OPERAND_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dataElementGroup) {\n      refetch({\n        groupId: dataElementGroup.id,\n        nameProperty\n      });\n    }\n  }, [dataElementGroup, nameProperty, refetch]);\n  if (!dataElementGroup && !dataElement) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.operands.dataElementOperands;\n  if (!items && dataElement) {\n    items = [dataElement]; // If favorite is loaded, we only know the used data element\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element operand'),\n    loading: loading,\n    items: items,\n    value: dataElement === null || dataElement === void 0 ? void 0 : dataElement.id,\n    onChange: dataElement => onChange(dataElement, 'operand'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElement && errorText ? errorText : null)\n  });\n};\nDataElementOperandSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElement: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementOperandSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\n\n// Load all data elements within a group\nconst DATA_ELEMENTS_QUERY = {\n  dataElements: {\n    resource: 'dataElements',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `dataElementGroups.id:eq:${groupId}`,\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`],\n        domainType: 'aggregate',\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementSelect = _ref2 => {\n  let {\n    dataElement,\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DATA_ELEMENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dataElementGroup) {\n      refetch({\n        groupId: dataElementGroup.id,\n        nameProperty\n      });\n    }\n  }, [dataElementGroup, nameProperty, refetch]);\n  if (!dataElementGroup && !dataElement) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.dataElements.dataElements;\n  if (!items && dataElement) {\n    items = [dataElement]; // If favorite is loaded, we only know the used data element\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element'),\n    loading: loading,\n    items: items,\n    value: dataElement === null || dataElement === void 0 ? void 0 : dataElement.id,\n    onChange: dataElement => onChange(dataElement, 'dataElement'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElement && errorText ? errorText : null)\n  });\n};\nDataElementSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElement: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Radio, RadioGroup } from '../core/index.js';\nconst TotalsDetailsSelect = _ref => {\n  let {\n    operand,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(RadioGroup, {\n    name: \"operand\",\n    value: operand === true ? 'details' : 'totals',\n    onChange: value => onChange(value === 'details'),\n    display: \"row\"\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: \"totals\",\n    label: i18n.t('Totals')\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"details\",\n    label: i18n.t('Details')\n  }));\n};\nTotalsDetailsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  operand: PropTypes.bool // true = 'details'\n};\n\nexport default TotalsDetailsSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useProgramTrackedEntityAttributes } from '../../hooks/useProgramTrackedEntityAttributes.js';\nimport { combineDataItems } from '../../util/analytics.js';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\nconst excludeValueTypes = ['FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE', 'DATE', 'TEXT', 'BOOLEAN', 'LONG_TEXT'];\nconst PROGRAM_DATA_ELEMENTS_QUERY = {\n  programDataElements: {\n    resource: 'programDataElements',\n    params: _ref => {\n      let {\n        id,\n        nameProperty\n      } = _ref;\n      return {\n        program: id,\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`, 'valueType'],\n        paging: false\n      };\n    }\n  }\n};\nconst EventDataItemSelect = _ref2 => {\n  let {\n    dataItem,\n    program,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    programAttributes\n  } = useProgramTrackedEntityAttributes({\n    programId: program === null || program === void 0 ? void 0 : program.id\n  });\n  const {\n    data,\n    refetch: refetchProgramDataElements\n  } = useDataQuery(PROGRAM_DATA_ELEMENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (program) {\n      refetchProgramDataElements({\n        id: program.id,\n        nameProperty\n      });\n    }\n  }, [program, refetchProgramDataElements, nameProperty]);\n  const dataItems = combineDataItems(programAttributes || [], (data === null || data === void 0 ? void 0 : data.programDataElements.programDataElements) || [], null, excludeValueTypes).map(item => ({\n    ...item,\n    id: !item.id.includes('.') ? `${program.id}.${item.id}` : item.id // Add program id to tracked entity attributes\n  }));\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Event data item'),\n    items: dataItems,\n    value: dataItem ? dataItem.id : null,\n    onChange: dataItem => onChange(dataItem, 'eventDataItem'),\n    className: className,\n    errorText: !dataItem && errorText ? errorText : null\n  });\n};\nEventDataItemSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataItem: PropTypes.object,\n  errorText: PropTypes.string,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default EventDataItemSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all data sets (reporting rates)\nconst DATA_SETS_QUERY = {\n  sets: {\n    resource: 'dataSets',\n    params: {\n      fields: ['dimensionItem~rename(id)', 'displayName~rename(name)', 'legendSet[id]'],\n      paging: false\n    }\n  }\n};\nconst DataSetsSelect = _ref => {\n  let {\n    dataSet,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(DATA_SETS_QUERY);\n  const dataSetId = dataSet ? dataSet.id.split('.')[0] : null; // Remove \".REPORTING_RATE\"\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data set'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.sets.dataSets,\n    value: dataSetId,\n    onChange: dataSet => onChange(dataSet, 'reportingRate') // Reporting rates\n    ,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataSet && errorText ? errorText : null)\n  });\n};\nDataSetsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataSetsSelect;","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"DimensionItemsSelect_select__ma-J4\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\nimport styles from './styles/DimensionItemsSelect.module.css';\n\n// Load dimension items\nconst DIMENSION_ITEMS_QUERY = {\n  items: {\n    resource: 'dimensions',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/items`;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        order: `${nameProperty}:asc`,\n        paging: false\n      };\n    }\n  }\n};\nconst DimensionItemsSelect = _ref3 => {\n  let {\n    dimension,\n    value,\n    onChange\n  } = _ref3;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DIMENSION_ITEMS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dimension) {\n      refetch({\n        id: dimension,\n        nameProperty\n      });\n    }\n  }, [dimension, nameProperty, refetch]);\n  const onDimensionItemClick = ids => onChange(ids.map(id => data.items.items.find(item => item.id === id)));\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Items'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.items.items,\n    value: value,\n    multiple: true,\n    onChange: onDimensionItemClick,\n    errorText: error === null || error === void 0 ? void 0 : error.message,\n    className: styles.select\n  });\n};\nDimensionItemsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  value: PropTypes.array\n};\nexport default DimensionItemsSelect;","// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"DimensionSelect_dropdown__Y5vgH\",\"dimensions\":\"DimensionSelect_dimensions__BdCyG\"};","import { DimensionsPanel } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Popover, IconChevronDown24, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport { useUserSettings } from '../UserSettingsProvider.js';\nimport styles from './styles/DimensionSelect.module.css';\n\n// Include the following dimension types\nconst dimensionTypes = ['CATEGORY', 'CATEGORY_OPTION_GROUP_SET', 'ORGANISATION_UNIT_GROUP_SET'];\n\n// Load above dimension types\nconst DIMENSIONS_QUERY = {\n  dimensions: {\n    resource: 'dimensions',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`, 'dimensionType'],\n        filter: `dimensionType:in:[${dimensionTypes.join(',')}]`,\n        order: `${nameProperty}:asc`,\n        paging: false\n      };\n    }\n  }\n};\nconst DimensionSelect = _ref2 => {\n  let {\n    dimension,\n    onChange\n  } = _ref2;\n  const [isOpen, setIsOpen] = useState(false);\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    error,\n    data\n  } = useDataQuery(DIMENSIONS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const dropdownRef = useRef();\n  const findDimension = id => data && data.dimensions.dimensions.find(d => d.id === id);\n  const selected = findDimension(dimension);\n  const onDimensionClick = dim => {\n    if (dim !== dimension) {\n      onChange(findDimension(dim));\n    }\n    setIsOpen(false);\n  };\n  if (error) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, error.message);\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setIsOpen(true),\n    className: styles.dropdown\n  }, /*#__PURE__*/React.createElement(\"label\", null, i18n.t('Dimension')), /*#__PURE__*/React.createElement(\"div\", {\n    ref: dropdownRef\n  }, /*#__PURE__*/React.createElement(\"span\", null, selected ? selected.name : ''), /*#__PURE__*/React.createElement(IconChevronDown24, null))), isOpen && /*#__PURE__*/React.createElement(Popover, {\n    reference: dropdownRef,\n    placement: \"bottom-start\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dimensions\n  }, /*#__PURE__*/React.createElement(DimensionsPanel, {\n    dimensions: data.dimensions.dimensions,\n    onDimensionClick: onDimensionClick,\n    selectedIds: [dimension]\n  }))));\n};\nDimensionSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  dimension: PropTypes.string\n};\nexport default DimensionSelect;","// extracted by mini-css-extract-plugin\nexport default {\"filterRow\":\"DimensionFilterRow_filterRow__v1Kno\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport RemoveFilter from '../filter/RemoveFilter.js';\nimport DimensionItemsSelect from './DimensionItemsSelect.js';\nimport DimensionSelect from './DimensionSelect.js';\nimport styles from './styles/DimensionFilterRow.module.css';\nconst DimensionFilterRow = _ref => {\n  let {\n    dimension,\n    items,\n    index,\n    onChange,\n    onRemove\n  } = _ref;\n  const onSelect = (dimension, items) => onChange(index, {\n    dimension,\n    items\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterRow\n  }, /*#__PURE__*/React.createElement(DimensionSelect, {\n    dimension: dimension,\n    onChange: selectedDimension => onSelect(selectedDimension.id)\n  }), /*#__PURE__*/React.createElement(DimensionItemsSelect, {\n    dimension: dimension,\n    value: items ? items.map(item => item.id) : null,\n    onChange: items => onSelect(dimension, items)\n  }), /*#__PURE__*/React.createElement(RemoveFilter, {\n    onClick: () => onRemove(index)\n  }));\n};\nDimensionFilterRow.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  index: PropTypes.number,\n  items: PropTypes.array\n};\nexport default DimensionFilterRow;","// extracted by mini-css-extract-plugin\nexport default {\"dimensionFilter\":\"DimensionFilter_dimensionFilter__4oaV1\",\"addFilter\":\"DimensionFilter_addFilter__bjOP-\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { addDimensionFilter, removeDimensionFilter, changeDimensionFilter } from '../../actions/layerEdit.js';\nimport DimensionFilterRow from './DimensionFilterRow.js';\nimport styles from './styles/DimensionFilter.module.css';\nconst DimensionFilter = _ref => {\n  let {\n    dimensions = [],\n    addDimensionFilter,\n    changeDimensionFilter,\n    removeDimensionFilter\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dimensionFilter\n  }, dimensions.map((item, index) => /*#__PURE__*/React.createElement(DimensionFilterRow, _extends({\n    key: index,\n    index: index,\n    onChange: changeDimensionFilter,\n    onRemove: removeDimensionFilter\n  }, item))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addFilter\n  }, /*#__PURE__*/React.createElement(Button, {\n    basic: true,\n    onClick: () => addDimensionFilter()\n  }, i18n.t('Add filter'))));\n};\nDimensionFilter.propTypes = {\n  addDimensionFilter: PropTypes.func.isRequired,\n  changeDimensionFilter: PropTypes.func.isRequired,\n  removeDimensionFilter: PropTypes.func.isRequired,\n  dimensions: PropTypes.array\n};\nexport default connect(null, {\n  addDimensionFilter,\n  removeDimensionFilter,\n  changeDimensionFilter\n})(DimensionFilter);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all indicator groups\nconst INDICATOR_GROUPS_QUERY = {\n  groups: {\n    resource: 'indicatorGroups',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst IndicatorGroupSelect = _ref => {\n  let {\n    indicatorGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(INDICATOR_GROUPS_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Indicator group'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.groups.indicatorGroups,\n    value: indicatorGroup === null || indicatorGroup === void 0 ? void 0 : indicatorGroup.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!indicatorGroup && errorText ? errorText : null),\n    dataTest: \"indicatorgroupselect\"\n  });\n};\nIndicatorGroupSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  indicatorGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default IndicatorGroupSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\n\n// Load all indicators within a group\nconst INDICATORS_QUERY = {\n  indicators: {\n    resource: 'indicators',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `indicatorGroups.id:eq:${groupId}`,\n        fields: ['id', `${nameProperty}~rename(name)`, 'legendSet[id]'],\n        paging: false\n      };\n    }\n  }\n};\nconst IndicatorSelect = _ref2 => {\n  let {\n    indicator,\n    indicatorGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(INDICATORS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (indicatorGroup) {\n      refetch({\n        groupId: indicatorGroup.id,\n        nameProperty\n      });\n    }\n  }, [indicatorGroup, nameProperty, refetch]);\n  if (!indicatorGroup && !indicator) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.indicators.indicators;\n  if (!items && indicator) {\n    items = [indicator]; // If favorite is loaded, we only know the used indicator\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    key: \"indicators\",\n    loading: loading,\n    label: i18n.t('Indicator'),\n    items: items,\n    value: indicator === null || indicator === void 0 ? void 0 : indicator.id,\n    onChange: dataItem => onChange(dataItem, 'indicator'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!indicator && errorText ? errorText : null),\n    dataTest: \"indicatorselect\"\n  });\n};\nIndicatorSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  indicator: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  indicatorGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default IndicatorSelect;","// extracted by mini-css-extract-plugin\nexport default {\"periodSelect\":\"PeriodSelect_periodSelect__+hPnO\",\"select\":\"PeriodSelect_select__vspYN\",\"stepper\":\"PeriodSelect_stepper__Lpne3\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Tooltip, IconChevronLeft24, IconChevronRight24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { getFixedPeriodsByType, filterFuturePeriods } from '../../util/periods.js';\nimport { getYear } from '../../util/time.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/PeriodSelect.module.css';\nclass PeriodSelect extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      year: null,\n      periods: null\n    });\n    _defineProperty(this, \"nextYear\", () => {\n      this.changeYear(1);\n    });\n    _defineProperty(this, \"previousYear\", () => {\n      this.changeYear(-1);\n    });\n    _defineProperty(this, \"changeYear\", change => {\n      const {\n        periodType\n      } = this.props;\n      const year = this.state.year + change;\n      this.setState({\n        year,\n        periods: getFixedPeriodsByType(periodType, year)\n      });\n    });\n  }\n  componentDidMount() {\n    this.setPeriods();\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      periodType,\n      period,\n      onChange\n    } = this.props;\n    const {\n      year,\n      periods\n    } = this.state;\n    if (periodType !== prevProps.periodType) {\n      this.setPeriods();\n    } else if (periods && !period) {\n      onChange(filterFuturePeriods(periods)[0] || periods[0]); // Autoselect most recent period\n    }\n\n    // Change period if year is changed (but keep period index)\n    if (period && prevState.periods && year !== prevState.year) {\n      const periodIndex = prevState.periods.findIndex(item => item.id === period.id);\n      onChange(periods[periodIndex]);\n    }\n  }\n  render() {\n    const {\n      periodType,\n      period,\n      onChange,\n      className,\n      errorText\n    } = this.props;\n    const {\n      periods\n    } = this.state;\n    if (!periods) {\n      return null;\n    }\n    const value = period && periods.some(p => p.id === period.id) ? period.id : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.periodSelect, className)\n    }, /*#__PURE__*/React.createElement(SelectField, {\n      label: i18n.t('Period'),\n      items: periods,\n      value: value,\n      onChange: onChange,\n      errorText: !value && errorText ? errorText : null,\n      className: styles.select,\n      dataTest: \"year-select\"\n    }), periodType && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.stepper\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      content: i18n.t('Previous year')\n    }, /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      icon: /*#__PURE__*/React.createElement(IconChevronLeft24, null),\n      onClick: this.previousYear,\n      dataTest: \"button-previous-year\"\n    })), /*#__PURE__*/React.createElement(Tooltip, {\n      content: i18n.t('Next year')\n    }, /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      icon: /*#__PURE__*/React.createElement(IconChevronRight24, null),\n      onClick: this.nextYear,\n      dataTest: \"button-next-year\"\n    }))));\n  }\n  setPeriods() {\n    const {\n      periodType,\n      period\n    } = this.props;\n    const year = this.state.year || getYear(period && period.startDate);\n    let periods;\n    if (periodType) {\n      periods = getFixedPeriodsByType(periodType, year);\n    } else if (period) {\n      periods = [period]; // If period is loaded in favorite\n    }\n\n    this.setState({\n      periods,\n      year\n    });\n  }\n}\n_defineProperty(PeriodSelect, \"propTypes\", {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  period: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    startDate: PropTypes.string\n  }),\n  periodType: PropTypes.string\n});\nexport default PeriodSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { RELATIVE_PERIODS } from '../../constants/periods.js';\nimport { getPeriodTypes, getRelativePeriods } from '../../util/periods.js';\nimport { SelectField } from '../core/index.js';\nclass PeriodTypeSelect extends Component {\n  componentDidMount() {\n    const {\n      value,\n      period,\n      onChange\n    } = this.props;\n    const relativePeriodType = {\n      id: RELATIVE_PERIODS,\n      name: i18n.t('Relative')\n    };\n    if (!value && period) {\n      if (getRelativePeriods().find(p => p.id === period.id)) {\n        // false will not clear the period dropdown\n        onChange(relativePeriodType, false);\n      }\n    } else if (!value) {\n      // set relativePeriods as default\n      onChange(relativePeriodType);\n    }\n  }\n  render() {\n    const {\n      value,\n      hiddenPeriods,\n      onChange,\n      className,\n      errorText\n    } = this.props;\n    return /*#__PURE__*/React.createElement(SelectField, {\n      label: i18n.t('Period type'),\n      items: getPeriodTypes(hiddenPeriods),\n      value: value,\n      onChange: onChange,\n      className: className,\n      errorText: !value && errorText ? errorText : null,\n      dataTest: \"periodtypeselect\"\n    });\n  }\n}\n_defineProperty(PeriodTypeSelect, \"propTypes\", {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  hiddenPeriods: PropTypes.array,\n  period: PropTypes.object,\n  value: PropTypes.string\n});\nexport default PeriodTypeSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { RENDERING_STRATEGY_SINGLE, RENDERING_STRATEGY_TIMELINE, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../../constants/layers.js';\nimport { singleMapPeriods, invalidSplitViewPeriods } from '../../constants/periods.js';\nimport { Radio, RadioGroup } from '../core/index.js';\nclass RenderingStrategy extends Component {\n  componentDidUpdate(prevProps) {\n    const {\n      value,\n      period,\n      onChange\n    } = this.props;\n    if (period !== prevProps.period) {\n      if (singleMapPeriods.includes(period.id) && value !== RENDERING_STRATEGY_SINGLE) {\n        onChange(RENDERING_STRATEGY_SINGLE);\n      } else if (invalidSplitViewPeriods.includes(period.id) && value === RENDERING_STRATEGY_SPLIT_BY_PERIOD) {\n        // TODO: Switch to 'timeline' when we support it\n        onChange(RENDERING_STRATEGY_SINGLE);\n      }\n    }\n  }\n  render() {\n    const {\n      value,\n      period,\n      hasOtherLayers,\n      hasOtherTimelineLayers,\n      onChange\n    } = this.props;\n    if (singleMapPeriods.includes(period.id)) {\n      return null;\n    }\n    let helpText;\n    if (hasOtherTimelineLayers) {\n      helpText = i18n.t('Only one timeline is allowed.');\n    } else if (hasOtherLayers) {\n      helpText = i18n.t('Remove other layers to enable split map views.');\n    }\n    return /*#__PURE__*/React.createElement(RadioGroup, {\n      label: i18n.t('Display periods'),\n      value: value,\n      onChange: onChange,\n      helpText: helpText\n    }, /*#__PURE__*/React.createElement(Radio, {\n      value: \"SINGLE\",\n      label: i18n.t('Single (aggregate)')\n    }), /*#__PURE__*/React.createElement(Radio, {\n      value: \"TIMELINE\",\n      label: i18n.t('Timeline'),\n      disabled: hasOtherTimelineLayers\n    }), /*#__PURE__*/React.createElement(Radio, {\n      value: \"SPLIT_BY_PERIOD\",\n      label: i18n.t('Split map views'),\n      disabled: hasOtherLayers || invalidSplitViewPeriods.includes(period.id)\n    }));\n  }\n}\n_defineProperty(RenderingStrategy, \"propTypes\", {\n  onChange: PropTypes.func.isRequired,\n  hasOtherLayers: PropTypes.bool,\n  hasOtherTimelineLayers: PropTypes.bool,\n  period: PropTypes.object,\n  value: PropTypes.string\n});\n_defineProperty(RenderingStrategy, \"defaultProps\", {\n  value: RENDERING_STRATEGY_SINGLE,\n  period: {}\n});\nexport default connect((state, props) => {\n  const {\n    mapViews\n  } = state.map;\n  return {\n    hasOtherLayers: !!mapViews.filter(_ref => {\n      let {\n        id\n      } = _ref;\n      return id !== props.layerId;\n    }).length,\n    hasOtherTimelineLayers: !!mapViews.find(layer => layer.renderingStrategy === RENDERING_STRATEGY_TIMELINE && layer.id !== props.layerId)\n  };\n})(RenderingStrategy);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { sortBy } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\nimport { useUserSettings } from '../UserSettingsProvider.js';\n\n// Load program indicators for one porgram\nconst PROGRAM_INDICATORS_QUERY = {\n  indicators: {\n    resource: 'programs',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: `programIndicators[dimensionItem~rename(id),${nameProperty}~rename(name)]`,\n        paging: false\n      };\n    }\n  }\n};\nconst ProgramIndicatorSelect = _ref3 => {\n  let {\n    program,\n    programIndicator,\n    onChange,\n    className,\n    errorText\n  } = _ref3;\n  const {\n    nameProperty\n  } = useUserSettings();\n  const {\n    data,\n    loading,\n    error,\n    refetch\n  } = useDataQuery(PROGRAM_INDICATORS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (program) {\n      refetch({\n        id: program.id,\n        nameProperty\n      });\n    }\n  }, [program, nameProperty, refetch]);\n  const indicators = sortBy('name', data === null || data === void 0 ? void 0 : data.indicators.programIndicators);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program indicator'),\n    loading: loading,\n    items: indicators,\n    value: programIndicator === null || programIndicator === void 0 ? void 0 : programIndicator.id,\n    onChange: programIndicator => onChange(programIndicator, 'programIndicator'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!programIndicator && errorText ? errorText : null)\n  });\n};\nProgramIndicatorSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  program: PropTypes.object,\n  programIndicator: PropTypes.object\n};\nexport default ProgramIndicatorSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setAggregationType } from '../../../actions/layerEdit.js';\nimport { getThematicAggregationTypes } from '../../../constants/aggregationTypes.js';\nimport { SelectField } from '../../core/index.js';\nconst AggregationTypeSelect = _ref => {\n  let {\n    aggregationType,\n    setAggregationType,\n    className\n  } = _ref;\n  const types = getThematicAggregationTypes();\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Aggregation type'),\n    items: getThematicAggregationTypes(),\n    value: aggregationType || types[0].id,\n    onChange: type => setAggregationType(type.id),\n    className: className\n  });\n};\nAggregationTypeSelect.propTypes = {\n  setAggregationType: PropTypes.func.isRequired,\n  aggregationType: PropTypes.string,\n  className: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    aggregationType: layerEdit.aggregationType\n  };\n}, {\n  setAggregationType\n})(AggregationTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setEventStatus } from '../../../actions/layerEdit.js';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { EVENT_STATUS_ALL, EVENT_STATUS_COMPLETED } from '../../../constants/eventStatuses.js';\nimport { Checkbox } from '../../core/index.js';\nconst eventDataTypes = [dimConf.indicator.objectName, dimConf.programIndicator.objectName, dimConf.eventDataItem.objectName];\nconst CompletedOnlyCheckbox = _ref => {\n  let {\n    valueType,\n    completedOnly,\n    setEventStatus\n  } = _ref;\n  const hasEventData = eventDataTypes.includes(valueType);\n  useEffect(() => {\n    if (completedOnly && !hasEventData) {\n      setEventStatus(EVENT_STATUS_ALL);\n    }\n  }, [completedOnly, hasEventData, setEventStatus]);\n  return hasEventData ? /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Only show completed events'),\n    checked: completedOnly,\n    onChange: isChecked => setEventStatus(isChecked ? EVENT_STATUS_COMPLETED : EVENT_STATUS_ALL)\n  }) : null;\n};\nCompletedOnlyCheckbox.propTypes = {\n  setEventStatus: PropTypes.func.isRequired,\n  completedOnly: PropTypes.bool,\n  valueType: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    completedOnly: layerEdit.eventStatus === EVENT_STATUS_COMPLETED\n  };\n}, {\n  setEventStatus\n})(CompletedOnlyCheckbox);","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"NoDataColor_checkbox__einUP\",\"colorPicker\":\"NoDataColor_colorPicker__MkBea\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { NO_DATA_COLOR } from '../../../constants/layers.js';\nimport { Checkbox, ColorPicker } from '../../core/index.js';\nimport styles from './styles/NoDataColor.module.css';\nconst NoDataColor = _ref => {\n  let {\n    value,\n    onChange,\n    className\n  } = _ref;\n  const onCheck = useCallback(val => onChange(val ? NO_DATA_COLOR : undefined), [onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show no data'),\n    checked: !!value,\n    onChange: onCheck,\n    className: styles.checkbox\n  }), value && /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Color'),\n    color: value,\n    onChange: onChange,\n    width: 50,\n    className: styles.colorPicker\n  }));\n};\nNoDataColor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default NoDataColor;","// extracted by mini-css-extract-plugin\nexport default {\"error\":\"RadiusSelect_error__YIA-1\"};","import i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { setRadiusLow, setRadiusHigh } from '../../../actions/layerEdit.js';\nimport { THEMATIC_RADIUS_LOW, THEMATIC_RADIUS_HIGH, THEMATIC_RADIUS_MIN, THEMATIC_RADIUS_MAX } from '../../../constants/layers.js';\nimport { NumberField } from '../../core/index.js';\nimport styles from './styles/RadiusSelect.module.css';\nexport const isValidRadius = function () {\n  let radiusLow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : THEMATIC_RADIUS_LOW;\n  let radiusHigh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : THEMATIC_RADIUS_HIGH;\n  return !isNaN(radiusLow) && !isNaN(radiusHigh) && radiusLow <= radiusHigh && radiusLow >= THEMATIC_RADIUS_MIN && radiusHigh <= THEMATIC_RADIUS_MAX;\n};\nconst RadiusSelect = _ref => {\n  let {\n    radiusLow = THEMATIC_RADIUS_LOW,\n    radiusHigh = THEMATIC_RADIUS_HIGH,\n    setRadiusLow,\n    setRadiusHigh,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Low radius'),\n    value: isNaN(radiusLow) ? '' : radiusLow,\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX,\n    onChange: setRadiusLow,\n    className: className\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('High radius'),\n    value: isNaN(radiusHigh) ? '' : radiusHigh,\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX,\n    onChange: setRadiusHigh,\n    className: className\n  }), !isValidRadius(radiusLow, radiusHigh) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.error\n  }, /*#__PURE__*/React.createElement(Help, {\n    warning: true\n  }, radiusHigh < radiusLow ? i18n.t('High radius should be greater than low radius') : i18n.t('Radius should be between {{min}} and {{max}}', {\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX\n  }))));\n};\nRadiusSelect.propTypes = {\n  setRadiusHigh: PropTypes.func.isRequired,\n  setRadiusLow: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  radiusHigh: PropTypes.number,\n  radiusLow: PropTypes.number\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    radiusLow: layerEdit.radiusLow,\n    radiusHigh: layerEdit.radiusHigh\n  };\n}, {\n  setRadiusLow,\n  setRadiusHigh\n})(RadiusSelect);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setThematicMapType } from '../../../actions/layerEdit.js';\nimport { THEMATIC_CHOROPLETH, getThematicMapTypes } from '../../../constants/layers.js';\nimport { ImageSelect } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\n\n// Select between choropleth and bubble map for thematic layers\nconst ThematicMapTypeSelect = _ref => {\n  let {\n    type = THEMATIC_CHOROPLETH,\n    setThematicMapType\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexInnerColumnFlow\n  }, getThematicMapTypes().map(_ref2 => {\n    let {\n      id,\n      name,\n      image\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(ImageSelect, {\n      key: id,\n      id: id,\n      img: image,\n      title: name,\n      onClick: setThematicMapType,\n      isSelected: type === id,\n      className: styles.flexInnerColumn\n    });\n  }));\n};\nThematicMapTypeSelect.propTypes = {\n  setThematicMapType: PropTypes.func.isRequired,\n  type: PropTypes.string\n};\nexport default connect(null, {\n  setThematicMapType\n})(ThematicMapTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { SelectField } from '../../core/index.js';\nconst ValueTypeSelect = props => {\n  const {\n    value,\n    onChange,\n    className\n  } = props;\n\n  // If value type is data element operand, make it data element\n  const type = value === dimConf.operand.objectName ? dimConf.dataElement.objectName : value;\n\n  // TODO: Avoid creating on each render (needs to be created after i18next contains translations\n  const items = [{\n    id: dimConf.indicator.objectName,\n    name: i18n.t('Indicator')\n  }, {\n    id: dimConf.dataElement.objectName,\n    name: i18n.t('Data element')\n  }, {\n    id: dimConf.dataSet.objectName,\n    name: i18n.t('Reporting rates')\n  }, {\n    id: dimConf.eventDataItem.objectName,\n    name: i18n.t('Event data items')\n  }, {\n    id: dimConf.programIndicator.objectName,\n    name: i18n.t('Program indicators')\n  }];\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Item type'),\n    items: items,\n    value: type,\n    onChange: valueType => onChange(valueType.id),\n    className: className\n  });\n};\nValueTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default ValueTypeSelect;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setDataItem, setDataElementGroup, setIndicatorGroup, setLegendSet, setNoDataColor, setOperand, setPeriod, setPeriodType, setRenderingStrategy, setProgram, setValueType } from '../../../actions/layerEdit.js';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { CLASSIFICATION_PREDEFINED, CLASSIFICATION_EQUAL_INTERVALS } from '../../../constants/layers.js';\nimport { RELATIVE_PERIODS, START_END_DATES } from '../../../constants/periods.js';\nimport { getDataItemFromColumns, getOrgUnitsFromRows, getPeriodFromFilters, getDimensionsFromFilters } from '../../../util/analytics.js';\nimport { isPeriodAvailable } from '../../../util/periods.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport NumericLegendStyle from '../../classification/NumericLegendStyle.js';\nimport { Tab, Tabs } from '../../core/index.js';\nimport DataElementGroupSelect from '../../dataElement/DataElementGroupSelect.js';\nimport DataElementOperandSelect from '../../dataElement/DataElementOperandSelect.js';\nimport DataElementSelect from '../../dataElement/DataElementSelect.js';\nimport TotalsDetailsSelect from '../../dataElement/TotalsDetailsSelect.js';\nimport EventDataItemSelect from '../../dataItem/EventDataItemSelect.js';\nimport DataSetsSelect from '../../dataSets/DataSetsSelect.js'; // Reporting rate\nimport DimensionFilter from '../../dimensions/DimensionFilter.js';\nimport IndicatorGroupSelect from '../../indicator/IndicatorGroupSelect.js';\nimport IndicatorSelect from '../../indicator/IndicatorSelect.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport PeriodSelect from '../../periods/PeriodSelect.js';\nimport PeriodTypeSelect from '../../periods/PeriodTypeSelect.js';\nimport RelativePeriodSelect from '../../periods/RelativePeriodSelect.js';\nimport RenderingStrategy from '../../periods/RenderingStrategy.js';\nimport StartEndDates from '../../periods/StartEndDates.js';\nimport ProgramIndicatorSelect from '../../program/ProgramIndicatorSelect.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport { SystemSettingsCtx } from '../../SystemSettingsProvider.js';\nimport Labels from '../shared/Labels.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport AggregationTypeSelect from './AggregationTypeSelect.js';\nimport CompletedOnlyCheckbox from './CompletedOnlyCheckbox.js';\nimport NoDataColor from './NoDataColor.js';\nimport RadiusSelect, { isValidRadius } from './RadiusSelect.js';\nimport ThematicMapTypeSelect from './ThematicMapTypeSelect.js';\nimport ValueTypeSelect from './ValueTypeSelect.js';\nclass ThematicDialog extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      tab: 'data'\n    });\n  }\n  componentDidMount() {\n    const {\n      valueType,\n      columns,\n      filters,\n      defaultPeriod,\n      setValueType,\n      startDate,\n      settings,\n      endDate,\n      setPeriod\n    } = this.props;\n    const dataItem = getDataItemFromColumns(columns);\n    const period = getPeriodFromFilters(filters);\n\n    // Set value type if favorite is loaded\n    if (!valueType) {\n      if (dataItem && dataItem.dimensionItemType) {\n        const dimension = Object.keys(dimConf).find(dim => dimConf[dim].itemType === dataItem.dimensionItemType);\n        if (dimension) {\n          setValueType(dimConf[dimension].objectName, true);\n        }\n      } else {\n        setValueType(dimConf.indicator.objectName);\n      }\n    }\n\n    // Set default period from system settings\n    if (!period && !startDate && !endDate && defaultPeriod && isPeriodAvailable(defaultPeriod, settings.hiddenPeriods)) {\n      setPeriod({\n        id: defaultPeriod\n      });\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      columns,\n      setClassification,\n      setLegendSet,\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n\n    // Set the default classification/legend for selected data item without visiting the style tab\n    if (columns !== prev.columns) {\n      const dataItem = getDataItemFromColumns(columns);\n      if (dataItem) {\n        if (dataItem.legendSet) {\n          setClassification(CLASSIFICATION_PREDEFINED);\n          setLegendSet(dataItem.legendSet);\n        } else {\n          setClassification(CLASSIFICATION_EQUAL_INTERVALS);\n          setLegendSet();\n        }\n      }\n    }\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      // layer options\n      columns,\n      dataElementGroup,\n      filters,\n      id,\n      indicatorGroup,\n      noDataColor,\n      operand,\n      periodType,\n      settings,\n      renderingStrategy,\n      startDate,\n      endDate,\n      program,\n      valueType,\n      thematicMapType\n    } = this.props;\n    const {\n      // Handlers\n      setDataItem,\n      setDataElementGroup,\n      setIndicatorGroup,\n      setNoDataColor,\n      setOperand,\n      setPeriod,\n      setPeriodType,\n      setRenderingStrategy,\n      setProgram,\n      setValueType\n    } = this.props;\n    const {\n      tab,\n      indicatorGroupError,\n      indicatorError,\n      dataElementGroupError,\n      dataElementError,\n      dataSetError,\n      programError,\n      eventDataItemError,\n      programIndicatorError,\n      periodTypeError,\n      periodError,\n      orgUnitsError,\n      legendSetError\n    } = this.state;\n    const period = getPeriodFromFilters(filters);\n    const dataItem = getDataItemFromColumns(columns);\n    const dimensions = getDimensionsFromFilters(filters);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"thematicdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\",\n      dataTest: \"thematicdialog-tabs-data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\",\n      dataTest: \"thematicdialog-tabs-period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\",\n      dataTest: \"thematicdialog-tabs-orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"filter\",\n      dataTest: \"thematicdialog-tabs-filter\"\n    }, i18n.t('Filter')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\",\n      dataTest: \"thematicdialog-tabs-style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-datatab\"\n    }, /*#__PURE__*/React.createElement(ValueTypeSelect, {\n      value: valueType,\n      className: styles.select,\n      onChange: setValueType\n    }), (!valueType || valueType === dimConf.indicator.objectName) && [\n    /*#__PURE__*/\n    // Indicator (default)\n    React.createElement(IndicatorGroupSelect, {\n      key: \"group\",\n      indicatorGroup: indicatorGroup,\n      onChange: setIndicatorGroup,\n      className: styles.select,\n      errorText: indicatorGroupError\n    }), /*#__PURE__*/React.createElement(IndicatorSelect, {\n      key: \"indicator\",\n      indicatorGroup: indicatorGroup,\n      indicator: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: indicatorError\n    })], (valueType === dimConf.dataElement.objectName || valueType === dimConf.operand.objectName) && [\n    /*#__PURE__*/\n    // Data element\n    React.createElement(DataElementGroupSelect, {\n      key: \"group\",\n      dataElementGroup: dataElementGroup,\n      onChange: setDataElementGroup,\n      className: styles.select,\n      errorText: dataElementGroupError\n    }), dataElementGroup && /*#__PURE__*/React.createElement(TotalsDetailsSelect, {\n      key: \"totals\",\n      operand: operand,\n      onChange: setOperand,\n      className: styles.select\n    }), operand === true || valueType === dimConf.operand.objectName ? /*#__PURE__*/React.createElement(DataElementOperandSelect, {\n      key: \"element\",\n      dataElementGroup: dataElementGroup,\n      dataElement: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataElementError\n    }) : /*#__PURE__*/React.createElement(DataElementSelect, {\n      key: \"element\",\n      dataElementGroup: dataElementGroup,\n      dataElement: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataElementError\n    })], valueType === dimConf.dataSet.objectName &&\n    /*#__PURE__*/\n    // Reporting rates\n    React.createElement(DataSetsSelect, {\n      key: \"item\",\n      dataSet: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataSetError\n    }), valueType === dimConf.eventDataItem.objectName && [\n    /*#__PURE__*/\n    // Event data items\n    React.createElement(ProgramSelect, {\n      key: \"program\",\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError\n    }), program && /*#__PURE__*/React.createElement(EventDataItemSelect, {\n      key: \"item\",\n      program: program,\n      dataItem: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: eventDataItemError\n    })], valueType === dimConf.programIndicator.objectName && [\n    /*#__PURE__*/\n    // Program indicator\n    React.createElement(ProgramSelect, {\n      key: \"program\",\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError\n    }), program && /*#__PURE__*/React.createElement(ProgramIndicatorSelect, {\n      key: \"indicator\",\n      program: program,\n      programIndicator: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: programIndicatorError\n    })], /*#__PURE__*/React.createElement(AggregationTypeSelect, {\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(CompletedOnlyCheckbox, {\n      valueType: valueType\n    })), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-periodtab\"\n    }, /*#__PURE__*/React.createElement(PeriodTypeSelect, {\n      value: periodType,\n      period: period,\n      hiddenPeriods: settings.hiddenPeriods,\n      onChange: setPeriodType,\n      className: styles.periodSelect,\n      errorText: periodTypeError\n    }), periodType === RELATIVE_PERIODS && /*#__PURE__*/React.createElement(RelativePeriodSelect, {\n      period: period,\n      onChange: setPeriod,\n      className: styles.periodSelect,\n      errorText: periodError\n    }), (periodType && periodType !== RELATIVE_PERIODS && periodType !== START_END_DATES || !periodType && id) && /*#__PURE__*/React.createElement(PeriodSelect, {\n      periodType: periodType,\n      period: period,\n      onChange: setPeriod,\n      className: styles.periodSelect,\n      errorText: periodError\n    }), periodType === START_END_DATES && /*#__PURE__*/React.createElement(StartEndDates, {\n      startDate: startDate,\n      endDate: endDate,\n      className: styles.periodSelect,\n      errorText: periodError\n    }), periodType === RELATIVE_PERIODS && /*#__PURE__*/React.createElement(RenderingStrategy, {\n      value: renderingStrategy,\n      period: period,\n      layerId: id,\n      onChange: setRenderingStrategy\n    })), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      selectDefaultLevel: true,\n      warning: orgUnitsError\n    }), tab === 'filter' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-filtertab\"\n    }, /*#__PURE__*/React.createElement(DimensionFilter, {\n      dimensions: dimensions\n    })), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"thematicdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(ThematicMapTypeSelect, {\n      type: thematicMapType\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(RadiusSelect, {\n      className: styles.numberField\n    })), /*#__PURE__*/React.createElement(Labels, {\n      includeDisplayOption: true\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(NumericLegendStyle, {\n      mapType: thematicMapType,\n      dataItem: dataItem,\n      legendSetError: legendSetError,\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(NoDataColor, {\n      value: noDataColor,\n      onChange: setNoDataColor,\n      className: styles.flexInnerColumnFlow\n    })))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      valueType,\n      indicatorGroup,\n      dataElementGroup,\n      program,\n      periodType,\n      columns,\n      rows,\n      filters,\n      startDate,\n      endDate,\n      radiusLow,\n      radiusHigh,\n      method,\n      legendSet\n    } = this.props;\n    const dataItem = getDataItemFromColumns(columns);\n    const period = getPeriodFromFilters(filters);\n\n    // Indicators\n    if (valueType === dimConf.indicator.objectName) {\n      if (!indicatorGroup && !dataItem) {\n        return this.setErrorState('indicatorGroupError', i18n.t('Indicator group is required'), 'data');\n      } else if (!dataItem) {\n        return this.setErrorState('indicatorError', i18n.t('Indicator is required'), 'data');\n      }\n    }\n\n    // Data elements\n    if (valueType === dimConf.dataElement.objectName || valueType === dimConf.operand.objectName) {\n      if (!dataElementGroup && !dataItem) {\n        return this.setErrorState('dataElementGroupError', i18n.t('Data element group is required'), 'data');\n      } else if (!dataItem) {\n        return this.setErrorState('dataElementError', i18n.t('Data element is required'), 'data');\n      }\n    }\n\n    // Reporting rates\n    if (valueType === dimConf.dataSet.objectName && !dataItem) {\n      return this.setErrorState('dataSetError', i18n.t('Data set is required'), 'data');\n    }\n\n    // Event data items / Program indicators\n    if (valueType === dimConf.eventDataItem.objectName || valueType === dimConf.programIndicator.objectName) {\n      if (!program && !dataItem) {\n        return this.setErrorState('programError', i18n.t('Program is required'), 'data');\n      } else if (!dataItem) {\n        return valueType === dimConf.eventDataItem.objectName ? this.setErrorState('eventDataItemError', i18n.t('Event data item is required'), 'data') : this.setErrorState('programIndicatorError', i18n.t('Program indicator is required'), 'data');\n      }\n    }\n    if (!period && periodType !== START_END_DATES) {\n      return this.setErrorState('periodError', i18n.t('Period is required'), 'period');\n    } else if (periodType === START_END_DATES) {\n      const error = getStartEndDateError(startDate, endDate);\n      if (error) {\n        return this.setErrorState('periodError', error, 'period');\n      }\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected'), 'orgunits');\n    }\n    if (method === CLASSIFICATION_PREDEFINED && !legendSet) {\n      return this.setErrorState('legendSetError', i18n.t('No legend set is selected'), 'style');\n    }\n    if (!isValidRadius(radiusLow, radiusHigh)) {\n      this.setState({\n        tab: 'style'\n      });\n      return false;\n    }\n    return true;\n  }\n}\n_defineProperty(ThematicDialog, \"propTypes\", {\n  setClassification: PropTypes.func.isRequired,\n  setDataElementGroup: PropTypes.func.isRequired,\n  setDataItem: PropTypes.func.isRequired,\n  setIndicatorGroup: PropTypes.func.isRequired,\n  setLegendSet: PropTypes.func.isRequired,\n  setNoDataColor: PropTypes.func.isRequired,\n  setOperand: PropTypes.func.isRequired,\n  setPeriod: PropTypes.func.isRequired,\n  setPeriodType: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setRenderingStrategy: PropTypes.func.isRequired,\n  setValueType: PropTypes.func.isRequired,\n  settings: PropTypes.object.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  columns: PropTypes.array,\n  dataElementGroup: PropTypes.object,\n  defaultPeriod: PropTypes.string,\n  endDate: PropTypes.string,\n  filters: PropTypes.array,\n  id: PropTypes.string,\n  indicatorGroup: PropTypes.object,\n  legendSet: PropTypes.object,\n  method: PropTypes.number,\n  noDataColor: PropTypes.string,\n  operand: PropTypes.bool,\n  periodType: PropTypes.string,\n  program: PropTypes.object,\n  radiusHigh: PropTypes.number,\n  radiusLow: PropTypes.number,\n  renderingStrategy: PropTypes.string,\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  thematicMapType: PropTypes.string,\n  valueType: PropTypes.string\n});\nconst ThematicDialogWithSettings = props => /*#__PURE__*/React.createElement(SystemSettingsCtx.Consumer, null, settings => /*#__PURE__*/React.createElement(ThematicDialog, _extends({\n  settings: settings\n}, props)));\nexport default connect(null, {\n  setClassification,\n  setDataItem,\n  setDataElementGroup,\n  setIndicatorGroup,\n  setLegendSet,\n  setNoDataColor,\n  setOperand,\n  setPeriod,\n  setPeriodType,\n  setRenderingStrategy,\n  setProgram,\n  setValueType\n}, null, {\n  forwardRef: true\n})(ThematicDialogWithSettings);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all tracked entity types\nconst TRACKED_ENTITY_TYPES_QUERY = {\n  types: {\n    resource: 'trackedEntityTypes',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst TrackedEntityTypeSelect = _ref => {\n  let {\n    trackedEntityType,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(TRACKED_ENTITY_TYPES_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Tracked Entity Type'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.types.trackedEntityTypes,\n    value: trackedEntityType === null || trackedEntityType === void 0 ? void 0 : trackedEntityType.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!trackedEntityType && errorText ? errorText : null),\n    dataTest: \"tetypeselect\"\n  });\n};\nTrackedEntityTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  trackedEntityType: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default TrackedEntityTypeSelect;","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"PeriodTypeSelect_label__CEOt1\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setPeriodType } from '../../../actions/layerEdit.js';\nimport { Radio, RadioGroup } from '../../core/index.js';\nimport styles from './styles/PeriodTypeSelect.module.css';\nconst PeriodTypeSelect = _ref => {\n  let {\n    program,\n    periodType = 'lastUpdated',\n    setPeriodType\n  } = _ref;\n  const label = i18n.t('Select period when tracked entities were last updated');\n  return program ? /*#__PURE__*/React.createElement(RadioGroup, {\n    name: \"type\",\n    value: periodType,\n    onChange: type => setPeriodType({\n      id: type\n    })\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: \"lastUpdated\",\n    label: label\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"program\",\n    label: `${i18n.t('Program/Enrollment date')}: ${i18n.t('the date a tracked entity was registered or enrolled in a program')}`\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, label, \":\");\n};\nPeriodTypeSelect.propTypes = {\n  setPeriodType: PropTypes.func.isRequired,\n  periodType: PropTypes.string,\n  program: PropTypes.object\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    program: layerEdit.program,\n    periodType: layerEdit.periodType\n  };\n}, {\n  setPeriodType\n})(PeriodTypeSelect);","import i18n from '@dhis2/d2-i18n';\nexport const getProgramStatuses = () => [{\n  id: 'ALL',\n  name: i18n.t('All')\n}, {\n  id: 'ACTIVE',\n  name: i18n.t('Active')\n}, {\n  id: 'COMPLETED',\n  name: i18n.t('Completed')\n}, {\n  id: 'CANCELLED',\n  name: i18n.t('Cancelled')\n}];","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getProgramStatuses } from '../../../constants/programStatuses.js';\nimport { SelectField } from '../../core/index.js';\nconst ProgramStatusSelect = _ref => {\n  let {\n    value = 'ALL',\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program status'),\n    items: getProgramStatuses(),\n    value: value,\n    onChange: valueType => onChange(valueType.id),\n    className: className\n  });\n};\nProgramStatusSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default ProgramStatusSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { SelectField } from '../../core/index.js';\nconst RELATIONSHIP_TYPES_QUERY = {\n  relationshipTypes: {\n    resource: 'relationshipTypes',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'fromConstraint']\n    }\n  }\n};\nconst TrackedEntityRelationshipTypeSelect = _ref => {\n  let {\n    trackedEntityType,\n    value,\n    onChange,\n    className\n  } = _ref;\n  const {\n    loading,\n    data,\n    error\n  } = useDataQuery(RELATIONSHIP_TYPES_QUERY);\n  const types = useMemo(() => (data === null || data === void 0 ? void 0 : data.relationshipTypes.relationshipTypes.filter(type => type.fromConstraint.relationshipEntity === 'TRACKED_ENTITY_INSTANCE' && type.fromConstraint.trackedEntityType.id === trackedEntityType.id)) || [], [data, trackedEntityType.id]);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    });\n  } else if (error) {\n    return /*#__PURE__*/React.createElement(\"span\", null, error.message);\n  }\n  if (!types.length) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 14,\n        marginLeft: 12\n      }\n    }, i18n.t('No relationship types were found for tracked entity type {{type}}', {\n      type: trackedEntityType.name\n    }));\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Relationship type'),\n    items: types,\n    value: value,\n    onChange: type => onChange(type.id),\n    className: className\n  });\n};\nTrackedEntityRelationshipTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  trackedEntityType: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  }),\n  value: PropTypes.string\n};\nexport default TrackedEntityRelationshipTypeSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { setTrackedEntityType, setProgram, setProgramStatus, setFollowUpStatus, setTrackedEntityRelationshipType, setTrackedEntityRelationshipOutsideProgram, setStartDate, setEndDate, setEventPointColor, setEventPointRadius, setRelatedPointColor, setRelatedPointRadius, setRelationshipLineColor, setStyleDataItem } from '../../../actions/layerEdit.js';\nimport { DEFAULT_START_DATE, DEFAULT_END_DATE, TEI_COLOR, TEI_RADIUS, TEI_BUFFER, TEI_RELATED_COLOR, TEI_RELATIONSHIP_LINE_COLOR, TEI_RELATED_RADIUS, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport { Tab, Tabs, NumberField, Checkbox, ColorPicker } from '../../core/index.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport StartEndDates from '../../periods/StartEndDates.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport TrackedEntityTypeSelect from '../../trackedEntity/TrackedEntityTypeSelect.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport PeriodTypeSelect from './PeriodTypeSelect.js';\nimport ProgramStatusSelect from './ProgramStatusSelect.js';\nimport TrackedEntityRelationshipTypeSelect from './TrackedEntityRelationshipTypeSelect.js';\nclass TrackedEntityDialog extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      tab: 'data',\n      showRelationshipsChecked: false\n    };\n  }\n  componentDidMount() {\n    const {\n      startDate,\n      endDate,\n      relationshipType,\n      setStartDate,\n      setEndDate\n    } = this.props;\n\n    // Set default period (last year)\n    if (!startDate && !endDate) {\n      setStartDate(DEFAULT_START_DATE);\n      setEndDate(DEFAULT_END_DATE);\n    }\n    if (relationshipType) {\n      this.setState({\n        showRelationshipsChecked: true\n      });\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      endDate,\n      eventPointColor,\n      eventPointRadius,\n      followUp,\n      program,\n      programStatus,\n      startDate,\n      trackedEntityType,\n      relationshipType,\n      relatedPointColor,\n      relatedPointRadius,\n      relationshipLineColor\n    } = this.props;\n    const {\n      setTrackedEntityType,\n      setProgram,\n      setProgramStatus,\n      setFollowUpStatus,\n      setTrackedEntityRelationshipType,\n      setEventPointColor,\n      setEventPointRadius,\n      setRelatedPointColor,\n      setRelatedPointRadius,\n      setRelationshipLineColor\n    } = this.props;\n    const {\n      tab,\n      trackedEntityTypeError,\n      orgUnitsError,\n      periodError\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"relationships\"\n    }, i18n.t('Relationships')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(TrackedEntityTypeSelect, {\n      trackedEntityType: trackedEntityType,\n      onChange: setTrackedEntityType,\n      className: styles.select,\n      errorText: trackedEntityTypeError\n    }), trackedEntityType && /*#__PURE__*/React.createElement(ProgramSelect, {\n      allPrograms: true,\n      program: program,\n      trackedEntityType: trackedEntityType,\n      onChange: setProgram,\n      className: styles.select\n    }), program && /*#__PURE__*/React.createElement(ProgramStatusSelect, {\n      value: programStatus,\n      onChange: setProgramStatus,\n      className: styles.select\n    }), program && /*#__PURE__*/React.createElement(Checkbox, {\n      label: i18n.t('Follow up'),\n      checked: followUp,\n      onChange: setFollowUpStatus\n    })), tab === 'relationships' && (!this.props.trackedEntityType ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 14,\n        paddingTop: 16,\n        marginLeft: 16\n      }\n    }, i18n.t('Please select a Tracked Entity Type before selecting a Relationship Type')) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.notice\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      warning: true,\n      title: \"Warning\"\n    }, i18n.t('Displaying tracked entity relationships in Maps is an experimental feature'))), /*#__PURE__*/React.createElement(Checkbox, {\n      label: i18n.t('Display Tracked Entity relationships'),\n      checked: this.state.showRelationshipsChecked,\n      onChange: checked => {\n        if (!checked) {\n          setTrackedEntityRelationshipType(null);\n        }\n        this.setState({\n          showRelationshipsChecked: checked\n        });\n      },\n      style: {\n        marginBottom: 0\n      }\n    }), this.state.showRelationshipsChecked && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(TrackedEntityRelationshipTypeSelect, {\n      trackedEntityType: this.props.trackedEntityType,\n      value: relationshipType,\n      onChange: setTrackedEntityRelationshipType,\n      className: cx(styles.select, styles.indent)\n    })))), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(PeriodTypeSelect, null), /*#__PURE__*/React.createElement(StartEndDates, {\n      startDate: startDate,\n      endDate: endDate,\n      errorText: periodError\n    })), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      selectRoots: true,\n      hideUserOrgUnits: true,\n      hideAssociatedGeometry: true,\n      hideSelectMode: false,\n      hideLevelSelect: true,\n      hideGroupSelect: true,\n      warning: orgUnitsError\n    }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header\n    }, i18n.t('Tracked entity style'), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: eventPointColor || TEI_COLOR,\n      onChange: setEventPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point size'),\n      value: eventPointRadius || TEI_RADIUS,\n      onChange: setEventPointRadius,\n      className: styles.flexInnerColumn\n    })), /*#__PURE__*/React.createElement(BufferRadius, {\n      defaultRadius: TEI_BUFFER\n    }), relationshipType ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header\n    }, i18n.t('Related entity style'), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: relatedPointColor || TEI_RELATED_COLOR,\n      onChange: setRelatedPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point size'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: relatedPointRadius || TEI_RELATED_RADIUS,\n      onChange: setRelatedPointRadius,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Line Color'),\n      color: relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR,\n      onChange: setRelationshipLineColor,\n      className: styles.flexInnerColumn\n    }))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      trackedEntityType,\n      rows,\n      startDate,\n      endDate\n    } = this.props;\n    if (!trackedEntityType) {\n      return this.setErrorState('trackedEntityTypeError', i18n.t('This field is required'), 'data');\n    }\n    const error = getStartEndDateError(startDate, endDate);\n    if (error) {\n      return this.setErrorState('periodError', error, 'period');\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected.'), 'orgunits');\n    }\n    return true;\n  }\n}\n_defineProperty(TrackedEntityDialog, \"propTypes\", {\n  setEndDate: PropTypes.func.isRequired,\n  setEventPointColor: PropTypes.func.isRequired,\n  setEventPointRadius: PropTypes.func.isRequired,\n  setFollowUpStatus: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setProgramStatus: PropTypes.func.isRequired,\n  setRelatedPointColor: PropTypes.func.isRequired,\n  setRelatedPointRadius: PropTypes.func.isRequired,\n  setRelationshipLineColor: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  setTrackedEntityRelationshipType: PropTypes.func.isRequired,\n  setTrackedEntityType: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  endDate: PropTypes.string,\n  eventPointColor: PropTypes.string,\n  eventPointRadius: PropTypes.number,\n  followUp: PropTypes.bool,\n  program: PropTypes.object,\n  programStatus: PropTypes.string,\n  relatedPointColor: PropTypes.string,\n  relatedPointRadius: PropTypes.number,\n  relationshipLineColor: PropTypes.string,\n  relationshipType: PropTypes.string,\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  trackedEntityType: PropTypes.object\n});\nexport default connect(null, {\n  setTrackedEntityType,\n  setProgram,\n  setProgramStatus,\n  setFollowUpStatus,\n  setTrackedEntityRelationshipType,\n  setTrackedEntityRelationshipOutsideProgram,\n  setStartDate,\n  setEndDate,\n  setEventPointColor,\n  setEventPointRadius,\n  setRelatedPointColor,\n  setRelatedPointRadius,\n  setRelationshipLineColor,\n  setStyleDataItem\n}, null, {\n  forwardRef: true\n})(TrackedEntityDialog);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { addLayer, updateLayer, cancelLayer, setLayerLoading } from '../../actions/layers.js';\nimport { EARTH_ENGINE_LAYER } from '../../constants/layers.js';\nimport { useSystemSettings } from '../SystemSettingsProvider.js';\nimport EarthEngineDialog from './earthEngine/EarthEngineDialog.js';\nimport EventDialog from './event/EventDialog.js';\nimport FacilityDialog from './FacilityDialog.js';\nimport OrgUnitDialog from './orgUnit/OrgUnitDialog.js';\nimport styles from './styles/LayerEdit.module.css';\nimport ThematicDialog from './thematic/ThematicDialog.js';\nimport TrackedEntityDialog from './trackedEntity/TrackedEntityDialog.js';\nconst layerType = {\n  event: EventDialog,\n  trackedEntity: TrackedEntityDialog,\n  facility: FacilityDialog,\n  thematic: ThematicDialog,\n  orgUnit: OrgUnitDialog,\n  earthEngine: EarthEngineDialog\n};\nconst layerName = () => ({\n  event: i18n.t('event'),\n  trackedEntity: i18n.t('tracked entity'),\n  facility: i18n.t('facility'),\n  thematic: i18n.t('thematic'),\n  orgUnit: i18n.t('org unit'),\n  earthEngine: i18n.t('Earth Engine')\n});\nconst LayerEdit = _ref => {\n  let {\n    layer,\n    addLayer,\n    updateLayer,\n    cancelLayer,\n    setLayerLoading\n  } = _ref;\n  const [isValidLayer, setIsValidLayer] = useState(false);\n  const {\n    keyAnalysisRelativePeriod\n  } = useSystemSettings();\n  const onValidateLayer = () => setIsValidLayer(true);\n  const onLayerValidation = isValid => {\n    setIsValidLayer(false);\n    if (isValid) {\n      const {\n        id,\n        editCounter = 0\n      } = layer;\n      setLayerLoading(id);\n      const config = {\n        ...layer,\n        editCounter: editCounter + 1,\n        isLoaded: false\n      };\n      if (id) {\n        updateLayer(config);\n      } else {\n        addLayer(config);\n      }\n      cancelLayer();\n    }\n  };\n  if (!layer) {\n    return null;\n  }\n  const type = layer.layer;\n  const LayerDialog = layerType[type];\n  if (!LayerDialog) {\n    return null;\n  }\n  let name = layerName()[type];\n  if (type === EARTH_ENGINE_LAYER) {\n    name = layer.name.toLowerCase();\n  }\n  const title = layer.id ? i18n.t('Edit {{name}} layer', {\n    name\n  }) : i18n.t('Add new {{name}} layer', {\n    name\n  });\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    dataTest: \"layeredit\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, title), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(LayerDialog, _extends({}, layer, {\n    defaultPeriod: keyAnalysisRelativePeriod,\n    validateLayer: isValidLayer,\n    onLayerValidation: onLayerValidation\n  })))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: cancelLayer\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onValidateLayer,\n    dataTest: \"layeredit-addbtn\"\n  }, i18n.t(layer.id ? i18n.t('Update layer') : i18n.t('Add layer'))))));\n};\nLayerEdit.propTypes = {\n  addLayer: PropTypes.func.isRequired,\n  cancelLayer: PropTypes.func.isRequired,\n  setLayerLoading: PropTypes.func.isRequired,\n  updateLayer: PropTypes.func.isRequired,\n  layer: PropTypes.object\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    layer: layerEdit\n  };\n}, {\n  addLayer,\n  updateLayer,\n  cancelLayer,\n  setLayerLoading\n})(LayerEdit);","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"Drawer_drawer__mdCkz\",\"left\":\"Drawer_left__Bb8Nw\",\"right\":\"Drawer_right__d7R2p\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Drawer.module.css';\nconst Drawer = _ref => {\n  let {\n    position = 'right',\n    className,\n    children,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(className, styles.drawer, {\n      [styles.left]: position === 'left',\n      [styles.right]: position === 'right'\n    }),\n    \"data-test\": dataTest\n  }, children);\n};\nDrawer.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  position: PropTypes.string\n};\nexport default Drawer;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport earthEngineLoader from '../../loaders/earthEngineLoader.js';\nconst EarthEngineLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    earthEngineLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nEarthEngineLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default EarthEngineLoader;","import findIndex from 'lodash/findIndex';\nimport { isValidCoordinate } from './map.js';\nexport const EVENT_ID_FIELD = 'psi';\n\n// TODO: Remove name mapping logic, use server params DataIDScheme / OuputIDScheme instead\n/* eslint-disable max-params */\nexport const createEventFeature = (headers, names, options, event, id, getGeometry) => {\n  const geometry = getGeometry(event);\n  const properties = event.reduce((props, value, i) => {\n    const header = headers[i];\n    let option;\n    if (header.optionSet) {\n      option = options.find(option => option.code === value);\n    }\n    return {\n      id,\n      type: geometry.type,\n      ...props,\n      [names[header.name] || header.name]: option ? option.name : value\n    };\n  }, {});\n  return {\n    type: 'Feature',\n    id,\n    properties,\n    geometry\n  };\n};\n/* eslint-enable max-params */\n\nexport const buildEventGeometryGetter = (headers, eventCoordinateField) => {\n  // If coordinate field other than event location (only points are currently supported)\n  if (eventCoordinateField) {\n    const col = findIndex(headers, h => h.name === eventCoordinateField);\n    return event => {\n      let coordinates = event[col];\n      if (typeof coordinates === 'string' && coordinates.length) {\n        try {\n          coordinates = JSON.parse(coordinates);\n        } catch (evt) {\n          return null;\n        }\n      }\n      if (Array.isArray(coordinates) && isValidCoordinate(coordinates)) {\n        return {\n          type: 'Point',\n          coordinates\n        };\n      }\n      return null;\n    };\n  } else {\n    // Use event location (can be point or polygon)\n    const geomCol = findIndex(headers, h => h.name === 'geometry');\n    return event => JSON.parse(event[geomCol]);\n  }\n};\nexport const createEventFeatures = function (response) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const names = {\n    ...response.headers.reduce((names, header) => ({\n      ...names,\n      [header.name]: header.column\n    }), {}),\n    ...config.columnNames // TODO: Check if columnNames is still needed\n  };\n\n  const idColName = config.idCol || EVENT_ID_FIELD;\n  const idCol = findIndex(response.headers, h => h.name === idColName);\n  const getGeometry = buildEventGeometryGetter(response.headers, config && config.eventCoordinateField);\n  const options = Object.values(response.metaData.items);\n  const data = response.rows.map(row => createEventFeature(response.headers, config.outputIdScheme !== 'ID' ? names : {}, options, row, row[idCol], getGeometry));\n\n  // Sort to draw polygons before points\n  data.sort(feature => feature.geometry.type === 'Polygon' ? -1 : 0);\n  return {\n    data,\n    names\n  };\n};\n\n// Include column for data element used for styling (if not already used in filter)\nexport const addStyleDataItem = (dataItems, styleDataItem) => styleDataItem && !dataItems.find(item => item.dimension === styleDataItem.id) ? [...dataItems, {\n  dimension: styleDataItem.id,\n  name: styleDataItem.name\n}] : [...dataItems];\nexport const getBounds = bbox => {\n  if (!bbox) {\n    return null;\n  }\n  const extent = bbox.match(/([-\\d.]+)/g);\n  return [[extent[0], extent[1]], [extent[2], extent[3]]];\n};","import { EVENT_CLIENT_PAGE_SIZE } from '../constants/layers.js';\nimport { getOrgUnitsFromRows, getPeriodFromFilters } from './analytics.js';\nimport { addStyleDataItem, createEventFeatures } from './geojson.js';\n\n// Empty filter sometimes returned for saved maps\n// Dimension without filter and empty items array returns false\nconst isValidDimension = _ref => {\n  let {\n    dimension,\n    filter,\n    items\n  } = _ref;\n  return Boolean(dimension && (filter || !items || items.length));\n};\nconst METADATA_FORMAT_NAME = 'name';\nexport const getEventColumns = async (layer, _ref2) => {\n  let {\n    format = METADATA_FORMAT_NAME,\n    nameProperty,\n    d2\n  } = _ref2;\n  const displayNameProp = nameProperty === 'name' ? 'displayName' : 'displayShortName';\n  const result = await d2.models.programStage.get(layer.programStage.id, {\n    fields: `programStageDataElements[displayInReports,dataElement[id,code,${displayNameProp}~rename(name),optionSet]]`,\n    paging: false\n  });\n  return result.programStageDataElements.filter(el => el.displayInReports).map(el => ({\n    dimension: el.dataElement.id,\n    name: el.dataElement[format]\n  }));\n};\n\n// Also used to query for server cluster in map/EventLayer.js\n// TODO: Use DataIDScheme / OutputIDScheme instead of requesting all metaData (which can easily dwarf the actual response data)\nexport const getAnalyticsRequest = async (_ref3, _ref4) => {\n  let {\n    program,\n    programStage,\n    filters,\n    startDate,\n    endDate,\n    rows,\n    columns,\n    styleDataItem,\n    eventStatus,\n    eventCoordinateField,\n    relativePeriodDate,\n    isExtended\n  } = _ref3;\n  let {\n    d2,\n    nameProperty\n  } = _ref4;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const period = getPeriodFromFilters(filters);\n  const dataItems = addStyleDataItem(columns.filter(isValidDimension), styleDataItem);\n\n  // Add \"display in reports\" columns that are not already present\n  if (isExtended) {\n    const displayColumns = await getEventColumns({\n      programStage\n    }, {\n      d2,\n      nameProperty\n    });\n    displayColumns.forEach(col => {\n      if (!dataItems.find(item => item.dimension === col.dimension)) {\n        dataItems.push(col);\n      }\n    });\n  }\n  let analyticsRequest = new d2.analytics.request().withProgram(program.id).withStage(programStage.id).withCoordinatesOnly(true);\n  analyticsRequest = period ? analyticsRequest.addPeriodFilter(period.id) : analyticsRequest.withStartDate(startDate).withEndDate(endDate);\n  if (relativePeriodDate) {\n    analyticsRequest = analyticsRequest.withRelativePeriodDate(relativePeriodDate);\n  }\n  analyticsRequest = analyticsRequest.addOrgUnitDimension(orgUnits.map(ou => ou.id));\n  if (dataItems) {\n    dataItems.forEach(item => {\n      analyticsRequest = analyticsRequest.addDimension(item.dimension, item.filter);\n    });\n  }\n  if (eventCoordinateField) {\n    // If coordinate field other than event coordinate\n    analyticsRequest = analyticsRequest.addDimension(eventCoordinateField) // Used by analytics/events/query/\n    .withCoordinateField(eventCoordinateField); // Used by analytics/events/count and analytics/events/cluster\n  }\n\n  if (eventStatus && eventStatus !== 'ALL') {\n    analyticsRequest = analyticsRequest.withEventStatus(eventStatus);\n  }\n  return analyticsRequest;\n};\nexport const loadData = async function (request) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let d2 = arguments.length > 2 ? arguments[2] : undefined;\n  const response = await d2.analytics.events.getQuery(request.withPageSize(EVENT_CLIENT_PAGE_SIZE)); // DHIS2-10742\n\n  const {\n    data,\n    names\n  } = createEventFeatures(response, config);\n  return {\n    data,\n    names,\n    response\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { curry } from 'lodash/fp';\nimport { EVENT_COLOR, EVENT_RADIUS, CLASSIFICATION_PREDEFINED } from '../constants/layers.js';\nimport { numberValueTypes } from '../constants/valueTypes.js';\nimport { cssColor } from '../util/colors.js';\nimport { getLegendItemForValue } from './classify.js';\nimport { loadLegendSet, getAutomaticLegendItems, getPredefinedLegendItems } from './legend.js';\n\n// \"Style by data item\" handling for event layer\n// Can be reused for TEI layer when the Web API is improved\n// This function is modifiyng the config object before it's added to the redux store\nexport const styleByDataItem = async config => {\n  const {\n    styleDataItem\n  } = config;\n  if (styleDataItem.optionSet) {\n    await styleByOptionSet(config);\n  } else if (numberValueTypes.includes(styleDataItem.valueType)) {\n    await styleByNumeric(config);\n  } else if (styleDataItem.valueType === 'BOOLEAN') {\n    await styleByBoolean(config);\n  }\n  config.legend.items.push({\n    name: i18n.t('Not set'),\n    color: cssColor(config.eventPointColor) || EVENT_COLOR,\n    radius: config.eventPointRadius || EVENT_RADIUS\n  });\n  return config;\n};\nexport const styleByBoolean = async config => {\n  const {\n    styleDataItem,\n    data,\n    legend,\n    eventPointRadius\n  } = config;\n  const {\n    id,\n    name,\n    values\n  } = styleDataItem;\n  config.data = data.map(feature => {\n    const value = feature.properties[id] || '0';\n    if (!value) {\n      return feature;\n    }\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value: value === '1' ? i18n.t('Yes') : i18n.t('No'),\n        color: value === '1' ? values.true : values.false\n      }\n    };\n  });\n  legend.unit = name || (await getDataElementName(id));\n  legend.items = [{\n    name: i18n.t('Yes'),\n    color: values.true,\n    radius: eventPointRadius || EVENT_RADIUS\n  }];\n  if (values.false) {\n    legend.items.push({\n      name: i18n.t('No'),\n      color: values.false,\n      radius: eventPointRadius || EVENT_RADIUS\n    });\n  }\n  return config;\n};\nexport const styleByNumeric = async config => {\n  const {\n    styleDataItem,\n    method,\n    classes,\n    colorScale,\n    eventPointRadius,\n    data\n  } = config;\n\n  // If legend set\n  if (method === CLASSIFICATION_PREDEFINED) {\n    // Load legend set from server\n    const legendSet = await loadLegendSet(config.legendSet);\n\n    // Use legend set name and legend unit\n    config.legend.unit = legendSet.name;\n\n    // Generate legend items from legendSet\n    config.legend.items = getPredefinedLegendItems(legendSet);\n  } else {\n    // Create array of sorted values needed for classification\n    const sortedValues = data.map(feature => Number(feature.properties[styleDataItem.id])).sort((a, b) => a - b);\n\n    // Use data item name as legend unit (load from server if needed)\n    config.legend.unit = styleDataItem.name || (await getDataElementName(styleDataItem.id));\n\n    // Generate legend items based on layer config\n    config.legend.items = getAutomaticLegendItems(sortedValues, method, classes, colorScale);\n  }\n\n  // Add radius and count to each legend item\n  config.legend.items.forEach(item => {\n    item.radius = eventPointRadius || EVENT_RADIUS;\n    item.count = 0;\n  });\n\n  // Helper function to get legend item for data value\n  const getLegendItem = curry(getLegendItemForValue)(config.legend.items);\n\n  // Add style data value and color to each feature\n  config.data = config.data.map(feature => {\n    const value = Number(feature.properties[styleDataItem.id]);\n    const legendItem = getLegendItem(value);\n    if (legendItem) {\n      legendItem.count++;\n    }\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value,\n        color: legendItem ? legendItem.color : null\n      }\n    };\n  });\n  return config;\n};\nexport const styleByOptionSet = async config => {\n  const {\n    styleDataItem\n  } = config;\n  const optionSet = await getOptionSet(styleDataItem.optionSet);\n  const id = styleDataItem.id;\n\n  // Replace styleDataItem with a version with names\n  config.styleDataItem = {\n    ...styleDataItem,\n    name: optionSet.name,\n    optionSet\n  };\n\n  // For easier and faster lookup below\n  // TODO: There might be options with duplicate name, so code/id would be safer\n  // If we use code/id we also need to retrive name to show in popup/data table/download\n  const optionsByName = optionSet.options.reduce((obj, option) => {\n    obj[option.name.toLowerCase()] = option;\n    return obj;\n  }, {});\n\n  // Add style data value and color to each feature\n  config.data = config.data.map(feature => {\n    const name = feature.properties[id];\n    if (name) {\n      const option = optionsByName[name.toLowerCase()];\n      if (option) {\n        return {\n          ...feature,\n          properties: {\n            ...feature.properties,\n            value: option.name,\n            color: option.style.color\n          }\n        };\n      }\n    }\n    return feature;\n  });\n\n  // Add legend data\n  config.legend.unit = optionSet.name;\n  config.legend.items = optionSet.options.map(option => ({\n    name: option.name,\n    color: option.style.color,\n    radius: config.eventPointRadius || EVENT_RADIUS\n  }));\n  return config;\n};\n\n// The style option set included in a favorite is stripped for names\n// and this function add the names if needed\nconst getOptionSet = async optionSet => {\n  // Return unmodified option set if names are included\n  if (optionSet.name) {\n    return optionSet;\n  }\n\n  // Load option set from server\n  const d2 = await getD2();\n  const optSet = await d2.models.optionSet.get(optionSet.id, {\n    fields: 'displayName~rename(name),options[id,code,displayName~rename(name)]'\n  });\n\n  // Return modified option set with names and codes\n  return {\n    ...optionSet,\n    name: optSet.name,\n    options: optionSet.options.map(option => ({\n      ...optSet.options.find(opt => opt.id === option.id),\n      ...option\n    }))\n  };\n};\nconst getDataElementName = async id => {\n  const d2 = await getD2();\n  return d2.models.dataElement.get(id, {\n    fields: 'displayName~rename(name)'\n  }).then(model => model.name);\n};","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { getEventStatuses } from '../constants/eventStatuses.js';\nimport { EVENT_CLIENT_PAGE_SIZE, EVENT_SERVER_CLUSTER_COUNT, EVENT_COLOR, EVENT_RADIUS } from '../constants/layers.js';\nimport { getFiltersFromColumns, getFiltersAsText, getPeriodFromFilters, getPeriodNameFromId } from '../util/analytics.js';\nimport { cssColor, getContrastColor } from '../util/colors.js';\nimport { getAnalyticsRequest, loadData } from '../util/event.js';\nimport { getBounds } from '../util/geojson.js';\nimport { styleByDataItem } from '../util/styleByDataItem.js';\nimport { formatStartEndDate, getDateArray } from '../util/time.js';\n\n// Server clustering if more than 2000 events\nconst useServerCluster = count => count > EVENT_SERVER_CLUSTER_COUNT;\nconst accessDeniedAlert = {\n  warning: true,\n  message: i18n.t(\"You don't have access to this layer data\")\n};\nconst unknownErrorAlert = {\n  critical: true,\n  message: i18n.t('An unknown error occurred while reading layer data')\n};\n\n// TODO: Refactor to share code with other loaders\n// Returns a promise\nconst eventLoader = async layerConfig => {\n  const config = {\n    ...layerConfig\n  };\n  try {\n    await loadEventLayer(config);\n  } catch (e) {\n    if (e.httpStatusCode === 403 || e.httpStatusCode === 409) {\n      config.alerts = [accessDeniedAlert];\n    } else {\n      config.alerts = [unknownErrorAlert];\n    }\n  }\n  config.isLoaded = true;\n  config.isExpanded = true;\n  config.isVisible = true;\n  return config;\n};\nconst loadEventLayer = async config => {\n  const {\n    columns,\n    endDate,\n    eventStatus,\n    eventClustering,\n    eventPointColor,\n    eventPointRadius,\n    filters,\n    programStage,\n    startDate,\n    styleDataItem,\n    areaRadius,\n    showDataTable\n  } = config;\n  const period = getPeriodFromFilters(filters);\n  const dataFilters = getFiltersFromColumns(columns);\n  const d2 = await getD2();\n  const spatialSupport = d2.system.systemInfo.databaseInfo.spatialSupport;\n  config.isExtended = showDataTable;\n  const analyticsRequest = await getAnalyticsRequest(config, {\n    d2,\n    nameProperty: d2.currentUser.settings.keyAnalysisDisplayProperty\n  });\n  let alert;\n  config.name = programStage.name;\n  config.legend = {\n    title: config.name,\n    period: period ? getPeriodNameFromId(period.id) : formatStartEndDate(getDateArray(startDate), getDateArray(endDate)),\n    items: []\n  };\n\n  // Delete serverCluster option if previously set\n  delete config.serverCluster;\n\n  // Check if events should be clustered on the server or the client\n  // Style by data item is only supported in the client (donuts)\n  if (spatialSupport && eventClustering && !styleDataItem) {\n    const response = await getCount(analyticsRequest);\n    config.bounds = getBounds(response.extent);\n    //FIXME\n    //eslint-disable-next-line react-hooks/rules-of-hooks\n    config.serverCluster = useServerCluster(response.count);\n  }\n  if (!config.serverCluster) {\n    config.outputIdScheme = 'ID'; // Required for StyleByDataItem to work\n    const {\n      names,\n      data,\n      response\n    } = await loadData(analyticsRequest, config, d2);\n    const {\n      total\n    } = response.metaData.pager;\n    config.data = data;\n    if (Array.isArray(config.data) && config.data.length) {\n      if (styleDataItem) {\n        await styleByDataItem(config);\n      }\n      if (total > EVENT_CLIENT_PAGE_SIZE) {\n        alert = {\n          warning: true,\n          message: `${config.name}: ${i18n.t('Displaying first {{pageSize}} events out of {{total}}', {\n            pageSize: EVENT_CLIENT_PAGE_SIZE,\n            total\n          })}`\n        };\n      }\n    } else {\n      alert = {\n        warning: true,\n        message: `${config.name}: ${i18n.t('No data found')}`\n      };\n    }\n\n    // TODO: Add filters to legend when using server cluster\n    // Currently not done as names are not available\n    config.legend.filters = dataFilters && getFiltersAsText(dataFilters, {\n      ...names,\n      ...(await getFilterOptionNames(dataFilters, response.headers))\n    });\n    config.headers = response.headers;\n  }\n  if (!styleDataItem) {\n    const color = cssColor(eventPointColor) || EVENT_COLOR;\n    const strokeColor = getContrastColor(color);\n    config.legend.items = [{\n      name: i18n.t('Event'),\n      color,\n      strokeColor,\n      radius: eventPointRadius || EVENT_RADIUS\n    }];\n  }\n  const explanation = [];\n  if (eventStatus) {\n    explanation.push(`${i18n.t('Event status')}: ${getEventStatuses().find(s => s.id === eventStatus).name}`);\n  }\n  if (areaRadius) {\n    explanation.push(`${i18n.t('Buffer')}: ${areaRadius} ${'m'}`);\n  }\n  if (explanation.length) {\n    config.legend.explanation = explanation;\n  }\n  if (alert) {\n    config.alerts = [alert];\n  }\n};\nexport const getCount = async request => {\n  const d2 = await getD2();\n  return await d2.analytics.events.getCount(request);\n};\n\n// If the layer included filters using option sets, this function return an object\n// mapping option codes to named used to translate codes in the legend\nconst getFilterOptionNames = async (filters, headers) => {\n  const d2 = await getD2();\n  if (!filters) {\n    return null;\n  }\n\n  // Returns array of option set ids used for filtering\n  const optionSets = filters.map(filter => headers.find(header => header.name === filter.dimension)).filter(header => header.optionSet).map(header => header.optionSet);\n  if (!optionSets.length) {\n    return;\n  }\n  const mappedOptionSets = await Promise.all(optionSets.map(id => d2.models.optionSets.get(id, {\n    fields: 'options[code,displayName~rename(name)]'\n  }).then(model => model.options).then(options => options.reduce((obj, _ref) => {\n    let {\n      code,\n      name\n    } = _ref;\n    obj[code] = name;\n    return obj;\n  }, {}))));\n\n  // Returns one object with all option codes mapped to names\n  return mappedOptionSets.reduce((obj, set) => ({\n    ...obj,\n    ...set\n  }), {});\n};\nexport default eventLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport eventLoader from '../../loaders/eventLoader.js';\nconst EventLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    eventLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nEventLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default EventLoader;","import { EXTERNAL_LAYER } from '../constants/layers.js';\nimport { parseLayerConfig } from '../util/external.js';\nimport { loadLegendSet, getPredefinedLegendItems } from '../util/legend.js';\nconst externalLoader = async layer => {\n  let {\n    config\n  } = layer;\n  if (typeof config === 'string') {\n    // External layer is loaded in analytical object\n    config = await parseLayerConfig(config);\n  } else {\n    delete layer.id;\n  }\n  const {\n    name,\n    legendSet,\n    legendSetUrl\n  } = config;\n  const legend = {\n    title: name\n  };\n  if (legendSet) {\n    const legendItems = await loadLegendSet(legendSet);\n    legend.items = getPredefinedLegendItems(legendItems);\n  }\n  if (legendSetUrl) {\n    legend.url = legendSetUrl;\n  }\n  return {\n    ...layer,\n    layer: EXTERNAL_LAYER,\n    name,\n    legend,\n    config,\n    isLoaded: true,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport default externalLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport externalLoader from '../../loaders/externalLoader.js';\nconst ExternalLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    externalLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nExternalLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default ExternalLoader;","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { toGeoJson } from '../util/map.js';\nimport { fetchOrgUnitGroupSet, getPointItems, getPolygonItems, getStyledOrgUnits, getCoordinateField } from '../util/orgUnits.js';\nconst facilityLoader = async config => {\n  const {\n    rows,\n    organisationUnitGroupSet: groupSet,\n    areaRadius\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const includeGroupSets = !!groupSet;\n  const coordinateField = getCoordinateField(config);\n  const alerts = [];\n  const orgUnitParams = orgUnits.map(item => item.id);\n  let associatedGeometries;\n  const d2 = await getD2();\n  const displayProperty = getDisplayProperty(d2).toUpperCase();\n  const {\n    contextPath\n  } = d2.system.systemInfo;\n  const name = i18n.t('Facilities');\n  const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayProperty);\n  const requests = [featuresRequest.getAll({\n    includeGroupSets\n  }).then(getPointItems).then(toGeoJson).catch(error => {\n    if (error && error.message) {\n      alerts.push({\n        critical: true,\n        message: i18n.t('Error: {{message}}', {\n          message: error.message,\n          nsSeparator: ';'\n        })\n      });\n    }\n  })];\n\n  // Load organisationUnitGroups if not passed\n  if (includeGroupSets && !groupSet.organisationUnitGroups) {\n    requests.push(fetchOrgUnitGroupSet(groupSet.id));\n  }\n  const [features, organisationUnitGroups] = await Promise.all(requests);\n  if (organisationUnitGroups) {\n    groupSet.organisationUnitGroups = organisationUnitGroups;\n  }\n  const {\n    styledFeatures,\n    legend\n  } = getStyledOrgUnits(features, groupSet, config, contextPath);\n  legend.title = name;\n  if (coordinateField) {\n    associatedGeometries = await featuresRequest.getAll({\n      coordinateField: coordinateField.id,\n      includeGroupSets\n    }).then(getPolygonItems).then(toGeoJson);\n    if (!associatedGeometries.length) {\n      alerts.push({\n        warning: true,\n        message: i18n.t('{{name}}: No coordinates found', {\n          name: coordinateField.name,\n          nsSeparator: ';'\n        })\n      });\n    }\n    legend.items.push({\n      name: coordinateField.name,\n      type: 'polygon',\n      strokeColor: '#333',\n      fillColor: 'rgba(149, 200, 251, 0.5)',\n      weight: 0.5\n    });\n  }\n  if (areaRadius) {\n    legend.explanation = [`${areaRadius} ${'m'} ${'buffer'}`];\n  }\n  if (!styledFeatures.length) {\n    alerts.push({\n      warning: true,\n      message: i18n.t('Facilities: No coordinates found', {\n        nsSeparator: ';'\n      })\n    });\n  }\n  return {\n    ...config,\n    data: styledFeatures,\n    associatedGeometries,\n    name,\n    legend,\n    alerts,\n    isLoaded: true,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport default facilityLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport facilityLoader from '../../loaders/facilityLoader.js';\nconst EventLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    facilityLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nEventLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default EventLoader;","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { toGeoJson } from '../util/map.js';\nimport { fetchOrgUnitGroupSet, addAssociatedGeometries, getOrgUnitLevels, getStyledOrgUnits, getCoordinateField } from '../util/orgUnits.js';\nconst orgUnitLoader = async config => {\n  const {\n    rows,\n    organisationUnitGroupSet: groupSet\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const orgUnitParams = orgUnits.map(item => item.id);\n  const includeGroupSets = !!groupSet;\n  const coordinateField = getCoordinateField(config);\n  const d2 = await getD2();\n  const displayProperty = getDisplayProperty(d2).toUpperCase();\n  const {\n    contextPath\n  } = d2.system.systemInfo;\n  const name = i18n.t('Organisation units');\n  const alerts = [];\n  const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayProperty);\n  let associatedGeometries;\n  const requests = [featuresRequest.getAll({\n    includeGroupSets\n  }).then(toGeoJson).catch(error => {\n    if (error && error.message) {\n      alerts.push({\n        critical: true,\n        message: i18n.t('Error: {{message}}', {\n          message: error.message,\n          nsSeparator: ';'\n        })\n      });\n    }\n  }), getOrgUnitLevels(d2)];\n\n  // Load organisationUnitGroups if not passed\n  if (includeGroupSets && !groupSet.organisationUnitGroups) {\n    requests.push(fetchOrgUnitGroupSet(groupSet.id));\n  }\n  const [mainFeatures = [], orgUnitLevels, organisationUnitGroups] = await Promise.all(requests);\n  if (!mainFeatures.length && !alerts.length) {\n    alerts.push({\n      warning: true,\n      message: i18n.t('Selected org units: No coordinates found', {\n        nsSeparator: ';'\n      })\n    });\n  }\n  if (organisationUnitGroups) {\n    groupSet.organisationUnitGroups = organisationUnitGroups;\n  }\n  if (coordinateField) {\n    associatedGeometries = await featuresRequest.getAll({\n      coordinateField: coordinateField.id,\n      includeGroupSets\n    }).then(toGeoJson);\n    if (!associatedGeometries.length) {\n      alerts.push({\n        warning: true,\n        message: i18n.t('{{name}}: No coordinates found', {\n          name: coordinateField.name,\n          nsSeparator: ';'\n        })\n      });\n    }\n  }\n  const features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n  const {\n    styledFeatures,\n    legend\n  } = getStyledOrgUnits(features, groupSet, config, contextPath, orgUnitLevels);\n  legend.title = name;\n  return {\n    ...config,\n    data: styledFeatures,\n    name,\n    legend,\n    alerts,\n    isLoaded: true,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport default orgUnitLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport orgUnitLoader from '../../loaders/orgUnitLoader.js';\nconst OrgUnitLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    orgUnitLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nOrgUnitLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default OrgUnitLoader;","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { scaleSqrt } from 'd3-scale';\nimport { findIndex, curry } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nimport { EVENT_STATUS_COMPLETED } from '../constants/eventStatuses.js';\nimport { THEMATIC_BUBBLE, THEMATIC_RADIUS_LOW, THEMATIC_RADIUS_HIGH, RENDERING_STRATEGY_SINGLE, CLASSIFICATION_PREDEFINED, CLASSIFICATION_SINGLE_COLOR, ORG_UNIT_COLOR, ORG_UNIT_RADIUS_SMALL, NO_DATA_COLOR } from '../constants/layers.js';\nimport { getOrgUnitsFromRows, getPeriodFromFilters, getValidDimensionsFromFilters, getDataItemFromColumns, getApiResponseNames } from '../util/analytics.js';\nimport { getLegendItemForValue } from '../util/classify.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { loadLegendSet, getPredefinedLegendItems, getAutomaticLegendItems } from '../util/legend.js';\nimport { toGeoJson } from '../util/map.js';\nimport { getCoordinateField, addAssociatedGeometries } from '../util/orgUnits.js';\nimport { formatStartEndDate, getDateArray } from '../util/time.js';\nconst thematicLoader = async config => {\n  const {\n    columns,\n    radiusLow = THEMATIC_RADIUS_LOW,\n    radiusHigh = THEMATIC_RADIUS_HIGH,\n    classes,\n    colorScale,\n    renderingStrategy = RENDERING_STRATEGY_SINGLE,\n    thematicMapType,\n    noDataColor\n  } = config;\n  const dataItem = getDataItemFromColumns(columns);\n  const coordinateField = getCoordinateField(config);\n  let error;\n  const response = await loadData(config).catch(err => {\n    error = err;\n  });\n  if (!response) {\n    return {\n      ...config,\n      ...(error ? {\n        alerts: [{\n          critical: true,\n          message: `${i18n.t('Error')}: ${error.message || error}`\n        }]\n      } : {}),\n      name: dataItem ? dataItem.name : i18n.t('Thematic layer'),\n      data: [],\n      legend: null,\n      isLoaded: true,\n      isVisible: true\n    };\n  }\n  const [mainFeatures, data, associatedGeometries] = response;\n  const features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n  const isSingleMap = renderingStrategy === RENDERING_STRATEGY_SINGLE;\n  const isBubbleMap = thematicMapType === THEMATIC_BUBBLE;\n  const isSingleColor = config.method === CLASSIFICATION_SINGLE_COLOR;\n  const period = getPeriodFromFilters(config.filters);\n  const periods = getPeriodsFromMetaData(data.metaData);\n  const dimensions = getValidDimensionsFromFilters(config.filters);\n  const names = getApiResponseNames(data);\n  const valuesByPeriod = !isSingleMap ? getValuesByPeriod(data) : null;\n  const valueById = getValueById(data);\n  const valueFeatures = noDataColor ? features : features.filter(_ref => {\n    let {\n      id\n    } = _ref;\n    return valueById[id] !== undefined;\n  });\n  const orderedValues = getOrderedValues(data);\n  let minValue = orderedValues[0];\n  let maxValue = orderedValues[orderedValues.length - 1];\n  const name = names[dataItem.id];\n  const alerts = [];\n  let legendSet = config.legendSet;\n\n  // Use legend set defined for data item as default\n  if (!legendSet && dataItem.legendSet && (config.method === undefined || config.method === CLASSIFICATION_PREDEFINED)) {\n    legendSet = dataItem.legendSet;\n  }\n\n  // Favorites often have wrong method\n  const method = legendSet ? CLASSIFICATION_PREDEFINED : config.method;\n  if (legendSet) {\n    legendSet = await loadLegendSet(legendSet);\n  }\n  let legendItems = [];\n  if (!isSingleColor) {\n    legendItems = legendSet ? getPredefinedLegendItems(legendSet) : getAutomaticLegendItems(orderedValues, method, classes, colorScale);\n  }\n  const legend = {\n    title: name,\n    period: period ? names[period.id] || period.id : formatStartEndDate(getDateArray(config.startDate), getDateArray(config.endDate)),\n    items: legendItems\n  };\n  if (dimensions && dimensions.length) {\n    legend.filters = dimensions.map(d => `${names[d.dimension]}: ${d.items.map(i => names[i.id]).join(', ')}`);\n  }\n  if (isSingleMap) {\n    legend.items.forEach(item => item.count = 0);\n  }\n  if (isBubbleMap) {\n    legend.bubbles = {\n      radiusLow,\n      radiusHigh,\n      color: isSingleColor ? colorScale : null\n    };\n  }\n  const getLegendItem = curry(getLegendItemForValue)(legend.items);\n  if (legendSet && Array.isArray(legend.items) && legend.items.length >= 2) {\n    minValue = legend.items[0].startValue;\n    maxValue = legend.items[legend.items.length - 1].endValue;\n  }\n  const getRadiusForValue = scaleSqrt().range([radiusLow, radiusHigh]).domain([minValue, maxValue]).clamp(true);\n  if (!valueFeatures.length) {\n    if (!features.length) {\n      alerts.push({\n        warning: true,\n        message: i18n.t('Selected org units: No coordinates found', {\n          nsSeparator: ';'\n        })\n      });\n    } else {\n      alerts.push({\n        warning: true,\n        message: `${name}: ${i18n.t('No data found')}`\n      });\n    }\n  }\n  if (coordinateField && !associatedGeometries.length) {\n    alerts.push({\n      warning: true,\n      message: i18n.t('{{name}}: No coordinates found', {\n        name: coordinateField.name,\n        nsSeparator: ';'\n      })\n    });\n  }\n  if (valuesByPeriod) {\n    const periods = Object.keys(valuesByPeriod);\n    periods.forEach(period => {\n      const orgUnits = Object.keys(valuesByPeriod[period]);\n      orgUnits.forEach(orgunit => {\n        const item = valuesByPeriod[period][orgunit];\n        const value = Number(item.value);\n        const legend = getLegendItem(value);\n        if (isSingleColor) {\n          item.color = colorScale;\n        } else {\n          item.color = legend ? legend.color : NO_DATA_COLOR;\n        }\n        item.radius = getRadiusForValue(value);\n      });\n    });\n  } else {\n    valueFeatures.forEach(_ref2 => {\n      let {\n        id,\n        geometry,\n        properties\n      } = _ref2;\n      const value = valueById[id];\n      const item = getLegendItem(value);\n      const isPoint = geometry.type === 'Point';\n      const {\n        hasAdditionalGeometry\n      } = properties;\n      if (isSingleColor) {\n        properties.color = colorScale;\n      } else if (item) {\n        // Only count org units once in legend\n        if (!hasAdditionalGeometry) {\n          item.count++;\n        }\n        properties.color = hasAdditionalGeometry && isPoint ? ORG_UNIT_COLOR : item.color;\n        properties.legend = item.name; // Shown in data table\n        properties.range = `${item.startValue} - ${item.endValue}`; // Shown in data table\n      }\n\n      properties.value = value;\n      properties.radius = hasAdditionalGeometry ? ORG_UNIT_RADIUS_SMALL : getRadiusForValue(value);\n    });\n  }\n  if (noDataColor && Array.isArray(legend.items) && !isBubbleMap) {\n    legend.items.push({\n      color: noDataColor,\n      name: i18n.t('No data')\n    });\n  }\n  return {\n    ...config,\n    data: valueFeatures,\n    periods,\n    valuesByPeriod,\n    name,\n    legend,\n    method,\n    alerts,\n    isLoaded: true,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nconst getPeriodsFromMetaData = _ref3 => {\n  let {\n    dimensions,\n    items\n  } = _ref3;\n  return dimensions.pe.map(id => {\n    const {\n      name,\n      startDate,\n      endDate\n    } = items[id];\n    const newEndDate = new Date(endDate);\n\n    // Set to midnight to include the last day\n    newEndDate.setHours(24);\n    return {\n      id,\n      name,\n      startDate: new Date(startDate),\n      endDate: newEndDate\n    };\n  });\n};\nconst getValuesByPeriod = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const periodIndex = findIndex(['name', 'pe'], headers);\n  const ouIndex = findIndex(['name', 'ou'], headers);\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.reduce((obj, row) => {\n    const period = row[periodIndex];\n    const periodObj = obj[period] = obj[period] || {};\n    periodObj[row[ouIndex]] = {\n      value: row[valueIndex]\n    };\n    return obj;\n  }, {});\n};\n\n// Returns an object mapping org. units and values\nconst getValueById = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const ouIndex = findIndex(['name', 'ou'], headers);\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.reduce((obj, row) => {\n    obj[row[ouIndex]] = parseFloat(row[valueIndex]);\n    return obj;\n  }, {});\n};\n\n// Returns an array of ordered values\nconst getOrderedValues = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.map(row => parseFloat(row[valueIndex])).sort((a, b) => a - b);\n};\n\n// Load features and data values from api\nconst loadData = async config => {\n  const {\n    rows,\n    columns,\n    filters,\n    displayProperty,\n    startDate,\n    endDate,\n    userOrgUnit,\n    valueType,\n    relativePeriodDate,\n    aggregationType,\n    renderingStrategy = RENDERING_STRATEGY_SINGLE,\n    eventStatus\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const period = getPeriodFromFilters(filters);\n  const dimensions = getValidDimensionsFromFilters(config.filters);\n  const dataItem = getDataItemFromColumns(columns);\n  const coordinateField = getCoordinateField(config);\n  const isOperand = columns[0].dimension === dimConf.operand.objectName;\n  const isSingleMap = renderingStrategy === RENDERING_STRATEGY_SINGLE;\n  const d2 = await getD2();\n  const displayPropertyUpper = getDisplayProperty(d2, displayProperty).toUpperCase();\n  const geoFeaturesParams = {};\n  const orgUnitParams = orgUnits.map(item => item.id);\n  let dataDimension = isOperand ? dataItem.id.split('.')[0] : dataItem.id;\n  if (valueType === 'ds') {\n    dataDimension += '.REPORTING_RATE';\n  }\n  let analyticsRequest = new d2.analytics.request().addOrgUnitDimension(orgUnits.map(ou => ou.id)).addDataDimension(dataDimension).withDisplayProperty(displayPropertyUpper);\n  if (!isSingleMap) {\n    analyticsRequest = analyticsRequest.addPeriodDimension(period.id);\n  } else {\n    analyticsRequest = period ? analyticsRequest.addPeriodFilter(period.id) : analyticsRequest.withStartDate(startDate).withEndDate(endDate);\n  }\n  if (dimensions) {\n    dimensions.forEach(d => analyticsRequest = analyticsRequest.addFilter(d.dimension, d.items.map(i => i.id)));\n  }\n  if (Array.isArray(userOrgUnit) && userOrgUnit.length) {\n    geoFeaturesParams.userOrgUnit = userOrgUnit.join(';');\n    analyticsRequest = analyticsRequest.withUserOrgUnit(userOrgUnit);\n  }\n  if (relativePeriodDate) {\n    analyticsRequest = analyticsRequest.withRelativePeriodDate(relativePeriodDate);\n  }\n  if (aggregationType) {\n    analyticsRequest = analyticsRequest.withAggregationType(aggregationType);\n  }\n  if (isOperand) {\n    analyticsRequest = analyticsRequest.addDimension('co');\n  }\n  if (eventStatus === EVENT_STATUS_COMPLETED) {\n    analyticsRequest = analyticsRequest.withParameters({\n      completedOnly: true\n    });\n  }\n  const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayPropertyUpper);\n\n  // Features request\n  const orgUnitReq = featuresRequest.getAll(geoFeaturesParams).then(toGeoJson);\n\n  // Data request\n  const dataReq = d2.analytics.aggregate.get(analyticsRequest);\n  const requests = [orgUnitReq, dataReq];\n  if (coordinateField) {\n    // Associated geometry request\n    requests.push(featuresRequest.getAll({\n      ...geoFeaturesParams,\n      coordinateField: coordinateField.id\n    }).then(toGeoJson));\n  }\n\n  // Return promise with all requests\n  return Promise.all(requests);\n};\nexport default thematicLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport thematicLoader from '../../loaders/thematicLoader.js';\nconst ThematicLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    thematicLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nThematicLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default ThematicLoader;","import { apiFetch } from './api.js';\nconst TRACKED_ENTITY_INSTANCE = 'TRACKED_ENTITY_INSTANCE';\nexport const fetchTEIs = async _ref => {\n  let {\n    type,\n    orgUnits,\n    fields,\n    organisationUnitSelectionMode\n  } = _ref;\n  let url = `/trackedEntityInstances?skipPaging=true&fields=${fields}&ou=${orgUnits}`;\n  if (organisationUnitSelectionMode) {\n    url += `&ouMode=${organisationUnitSelectionMode}`;\n  }\n  url += `&trackedEntityType=${type.id}`;\n  const data = await apiFetch(url);\n  return data.trackedEntityInstances;\n};\nconst normalizeInstances = instances => {\n  return instances.filter(instance => !!instance.coordinates).reduce((out, instance) => {\n    out[instance.id] = instance;\n    return out;\n  }, {});\n};\nexport const parseTEInstanceId = instance => instance.trackedEntityInstance.trackedEntityInstance;\nconst isValidRel = (rel, type, id) => rel.relationshipType === type && parseTEInstanceId(rel.from) === id;\nconst isIndexInstance = (instance, type) => {\n  let hasChildren = false;\n  for (let i = 0; i < instance.relationships.length; ++i) {\n    const rel = instance.relationships[i];\n    if (rel.relationshipType !== type) {\n      continue;\n    }\n    if (parseTEInstanceId(rel.to) === instance.id) {\n      return false;\n    }\n    if (parseTEInstanceId(rel.from) === instance.id) {\n      hasChildren = true;\n    }\n  }\n  return hasChildren;\n};\n\n/* eslint-disable max-params */\nconst getInstanceRelationships = (relationshipsById, from, targetInstances, type, isRecursive) => {\n  const localRels = from.relationships.filter(rel => isValidRel(rel, type, from.id));\n  localRels.forEach(rel => {\n    const id = rel.relationship;\n    if (relationshipsById[id]) {\n      return;\n    }\n    const to = targetInstances[parseTEInstanceId(rel.to)];\n    if (!to) {\n      // console.error('NOT FOUND', rel.to);\n      return;\n    }\n    relationshipsById[id] = {\n      id,\n      from,\n      to\n    };\n    if (isRecursive) {\n      getInstanceRelationships(relationshipsById, to, targetInstances, type, true);\n    }\n  });\n};\n/* eslint-enable max-params */\n\nconst fields = ['trackedEntityInstance~rename(id)', 'featureType', 'coordinates', 'relationships'];\nexport const getDataWithRelationships = async (sourceInstances, relationshipType, _ref2) => {\n  let {\n    orgUnits,\n    organisationUnitSelectionMode\n  } = _ref2;\n  const from = relationshipType.fromConstraint;\n  const to = relationshipType.toConstraint;\n  if (from.relationshipEntity !== TRACKED_ENTITY_INSTANCE || to.relationshipEntity !== TRACKED_ENTITY_INSTANCE) {\n    return [];\n  }\n  const isRecursive = from.trackedEntityType.id === to.trackedEntityType.id;\n  const targetInstances = normalizeInstances(isRecursive ? sourceInstances : await fetchTEIs({\n    type: to.trackedEntityType,\n    fields,\n    orgUnits,\n    organisationUnitSelectionMode\n  }));\n  const filteredSourceInstances = isRecursive ? sourceInstances.filter(instance => isIndexInstance(instance, relationshipType.id)) : sourceInstances;\n  const relationshipsById = {};\n  filteredSourceInstances.forEach(instance => getInstanceRelationships(relationshipsById, instance, targetInstances, relationshipType.id, isRecursive));\n  filteredSourceInstances.forEach(instance => {\n    delete targetInstances[instance.id];\n  });\n  return {\n    primary: filteredSourceInstances,\n    relationships: Object.values(relationshipsById),\n    secondary: Object.values(targetInstances)\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport { TEI_COLOR, TEI_RADIUS, TEI_RELATED_COLOR, TEI_RELATED_RADIUS, TEI_RELATIONSHIP_LINE_COLOR } from '../constants/layers.js';\nimport { getProgramStatuses } from '../constants/programStatuses.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { apiFetch } from '../util/api.js';\nimport { getDataWithRelationships } from '../util/teiRelationshipsParser.js';\nimport { formatStartEndDate, getDateArray } from '../util/time.js';\nconst fields = ['trackedEntityInstance~rename(id)', 'featureType', 'coordinates'];\n\n// Mapping netween DHIS2 types and GeoJSON types\nconst geometryTypesMap = {\n  POINT: 'Point',\n  POLYGON: 'Polygon',\n  MULTI_POLYGON: 'MultiPolygon'\n};\n\n// Valid geometry types for TEIs\nconst geometryTypes = Object.keys(geometryTypesMap);\n\n//TODO: Refactor to share code with other loaders\nconst trackedEntityLoader = async config => {\n  if (config.config && typeof config.config === 'string') {\n    try {\n      const customConfig = JSON.parse(config.config);\n      config.relationshipType = customConfig.relationships.type;\n      config.relatedPointColor = customConfig.relationships.pointColor;\n      config.relatedPointRadius = customConfig.relationships.pointRadius;\n      config.relationshipLineColor = customConfig.relationships.lineColor;\n      config.relationshipOutsideProgram = customConfig.relationships.relationshipOutsideProgram;\n      config.periodType = customConfig.periodType;\n    } catch (e) {\n      // Failed to load JSON relationship config, assuming no relationships\n    }\n    delete config.config;\n  }\n  const {\n    trackedEntityType,\n    program,\n    programStatus,\n    followUp,\n    relationshipType: relationshipTypeID,\n    periodType,\n    startDate,\n    endDate,\n    rows,\n    organisationUnitSelectionMode,\n    eventPointColor,\n    eventPointRadius,\n    areaRadius,\n    relatedPointColor,\n    relatedPointRadius,\n    relationshipLineColor\n  } = config;\n  const name = program ? program.name : i18n.t('Tracked entity');\n  const legend = {\n    title: name,\n    period: formatStartEndDate(getDateArray(startDate), getDateArray(endDate)),\n    items: [{\n      name: trackedEntityType.name + (areaRadius ? ` + ${areaRadius} ${'m'} ${'buffer'}` : ''),\n      color: eventPointColor || TEI_COLOR,\n      radius: eventPointRadius || TEI_RADIUS\n    }]\n  };\n  const orgUnits = getOrgUnitsFromRows(rows).map(ou => ou.id).join(';');\n  const fieldsWithRelationships = [...fields, 'relationships'];\n  // https://docs.dhis2.org/2.29/en/developer/html/webapi_tracked_entity_instance_query.html\n  let url = `/trackedEntityInstances?skipPaging=true&fields=${fieldsWithRelationships}&ou=${orgUnits}`;\n  let alert;\n  let explanation;\n  if (organisationUnitSelectionMode) {\n    url += `&ouMode=${organisationUnitSelectionMode}`;\n  }\n  if (program) {\n    url += `&program=${program.id}`;\n    if (programStatus) {\n      url += `&programStatus=${programStatus}`;\n      explanation = `${i18n.t('Program status')}: ${getProgramStatuses().find(s => s.id === programStatus).name}`;\n    }\n    if (followUp !== undefined) {\n      url += `&followUp=${followUp ? 'TRUE' : 'FALSE'}`;\n    }\n  } else {\n    url += `&trackedEntityType=${trackedEntityType.id}`;\n  }\n  if (periodType === 'program') {\n    url += `&programStartDate=${startDate}&programEndDate=${endDate}`;\n  } else {\n    url += `&lastUpdatedStartDate=${startDate}&lastUpdatedEndDate=${endDate}`;\n  }\n\n  // https://docs.dhis2.org/master/en/developer/html/webapi_tracker_api.html#webapi_tei_grid_query_request_syntax\n  const primaryData = await apiFetch(url);\n  const instances = primaryData.trackedEntityInstances.filter(instance => geometryTypes.includes(instance.featureType) && instance.coordinates);\n  if (!instances.length) {\n    alert = {\n      warning: true,\n      message: `${trackedEntityType.name}: ${i18n.t('No tracked entities found')}`\n    };\n  }\n  let data, relationships, secondaryData;\n  if (relationshipTypeID) {\n    const relationshipType = await apiFetch(`/relationshipTypes/${relationshipTypeID}`);\n    const relatedTypeId = relationshipType.toConstraint.trackedEntityType.id;\n    const relatedEntityType = await apiFetch(`/trackedEntityTypes/${relatedTypeId}?fields=displayName,featureType`);\n    const isPoint = relatedEntityType.featureType === 'POINT';\n    legend.items.push({\n      type: 'LineString',\n      name: relationshipType.displayName,\n      color: relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR,\n      weight: 1\n    }, {\n      name: `${relatedEntityType.displayName} (${i18n.t('related')})`,\n      color: relatedPointColor || TEI_RELATED_COLOR,\n      radius: isPoint ? relatedPointRadius || TEI_RELATED_RADIUS : undefined,\n      weight: !isPoint ? 1 : undefined\n    });\n    const dataWithRels = await getDataWithRelationships(instances, relationshipType, {\n      orgUnits,\n      organisationUnitSelectionMode\n    });\n    data = toGeoJson(dataWithRels.primary);\n    relationships = dataWithRels.relationships;\n    secondaryData = toGeoJson(dataWithRels.secondary);\n  } else {\n    data = toGeoJson(instances);\n  }\n  if (explanation) {\n    legend.explanation = [explanation];\n  }\n  return {\n    ...config,\n    name,\n    data,\n    relationships,\n    secondaryData,\n    legend,\n    ...(alert ? {\n      alerts: [alert]\n    } : {}),\n    isLoaded: true,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nconst toGeoJson = instances => instances.map(_ref => {\n  let {\n    id,\n    featureType,\n    coordinates\n  } = _ref;\n  return {\n    type: 'Feature',\n    geometry: {\n      type: geometryTypesMap[featureType],\n      coordinates: JSON.parse(coordinates)\n    },\n    properties: {\n      id\n    }\n  };\n});\nexport default trackedEntityLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport trackedEntityLoader from '../../loaders/trackedEntityLoader.js';\nconst TrackedEntityLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    trackedEntityLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nTrackedEntityLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default TrackedEntityLoader;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport EarthEngineLoader from './EarthEngineLoader.js';\nimport EventLoader from './EventLoader.js';\nimport ExternalLoader from './ExternalLoader.js';\nimport FacilityLoader from './FacilityLoader.js';\nimport OrgUnitLoader from './OrgUnitLoader.js';\nimport ThematicLoader from './ThematicLoader.js';\nimport TrackedEntityLoader from './TrackedEntityLoader.js';\nconst layerType = {\n  earthEngine: EarthEngineLoader,\n  event: EventLoader,\n  external: ExternalLoader,\n  facility: FacilityLoader,\n  orgUnit: OrgUnitLoader,\n  thematic: ThematicLoader,\n  trackedEntity: TrackedEntityLoader\n};\nconst LayerLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  const Loader = layerType[config.layer];\n  if (!Loader) {\n    console.log('Unknown layer type', config.layer, config);\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Loader, {\n    config: config,\n    onLoad: onLoad\n  });\n};\nLayerLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default LayerLoader;","export const mapControls = [{\n  type: 'zoom'\n}, {\n  type: 'fullscreen'\n}, {\n  type: 'fitBounds'\n}, {\n  type: 'scale',\n  imperial: false\n}, {\n  type: 'search'\n}, {\n  type: 'measure'\n}];\nexport const splitViewControls = [{\n  type: 'zoom'\n}, {\n  type: 'fullscreen'\n}, {\n  type: 'fitBounds'\n}, {\n  type: 'attribution',\n  prefix: false\n}];\nexport const pluginControls = [{\n  type: 'zoom'\n}];","import { mapControls, splitViewControls, pluginControls } from '../constants/mapControls.js';\n\n// Returns the map controls shown on a map\nexport const getMapControls = (isPlugin, isSplitView, controls) => {\n  let ctrls;\n  if (isPlugin) {\n    ctrls = controls || pluginControls;\n  } else {\n    ctrls = controls || isSplitView ? splitViewControls : mapControls;\n  }\n  return isSplitView ? ctrls.map(c => ({\n    ...c,\n    isSplitView\n  })) : ctrls;\n};","import { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { createContext } from 'react';\nexport const BaseUrlCtx = /*#__PURE__*/createContext({});\nconst BaseUrlProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const cfg = useConfig();\n  // console.log('cfg', cfg)\n\n  return /*#__PURE__*/React.createElement(BaseUrlCtx.Provider, {\n    value: cfg.baseUrl\n  }, children);\n};\nBaseUrlProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default BaseUrlProvider;","export const ALERT_SUCCESS = {\n  success: true\n};\nexport const ALERT_SUCCESS_DELAY = {\n  success: true,\n  duration: 3000\n};\nexport const ALERT_CRITICAL = {\n  critical: true\n};\nexport const ALERT_MESSAGE_DYNAMIC = _ref => {\n  let {\n    msg\n  } = _ref;\n  return msg;\n};\nexport const ALERT_OPTIONS_DYNAMIC = _ref2 => {\n  let {\n    isError\n  } = _ref2;\n  return isError ? ALERT_CRITICAL : ALERT_SUCCESS;\n};","import { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport log from 'loglevel';\nimport PropTypes from 'prop-types';\nimport { useMemo, useEffect } from 'react';\nimport { ALERT_CRITICAL, ALERT_MESSAGE_DYNAMIC } from '../../../constants/alerts.js';\nconst BASEMAP_LAYER_INDEX = 0;\nconst getAlertError = message => {\n  return {\n    msg: i18n.t('Basemap could not be added: {{message}}', {\n      message,\n      nsSeparator: ';'\n    })\n  };\n};\nconst BasemapLayer = (_ref, _ref2) => {\n  let {\n    id,\n    config,\n    opacity,\n    isVisible\n  } = _ref;\n  let {\n    map,\n    isPlugin\n  } = _ref2;\n  const basemapNotFoundAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const basemapInvalidAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const basemap = useMemo(() => map.createLayer({\n    ...config,\n    id,\n    index: BASEMAP_LAYER_INDEX\n  }), [map, id, config]);\n  useEffect(() => {\n    map.addLayer(basemap).catch(errorMessage => {\n      log.error(`Basemap could not be added: ${errorMessage}`);\n      if (!isPlugin) {\n        const alertError = getAlertError(errorMessage);\n        if (errorMessage.includes('not found')) {\n          basemapNotFoundAlert.show(alertError);\n        } else {\n          basemapInvalidAlert.show(alertError);\n        }\n      }\n    });\n    return () => map.removeLayer(basemap);\n  }, [map, basemap, isPlugin]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    basemap.setOpacity(opacity);\n  }, [basemap, opacity]);\n  useEffect(() => {\n    basemap.setVisibility(isVisible);\n  }, [basemap, isVisible]);\n  return null;\n};\nBasemapLayer.contextTypes = {\n  map: PropTypes.object\n};\nBasemapLayer.propTypes = {\n  config: PropTypes.object,\n  id: PropTypes.string,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number\n};\nBasemapLayer.defaultProps = {\n  opacity: 1,\n  isVisible: true\n};\nexport default BasemapLayer;","// extracted by mini-css-extract-plugin\nexport default {\"cover\":\"MapLoadingMask_cover__hmYUQ\"};","import { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nimport styles from './styles/MapLoadingMask.module.css';\nconst MapLoadingMask = () => /*#__PURE__*/React.createElement(ComponentCover, {\n  translucent: true,\n  className: styles.cover\n}, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\nexport default MapLoadingMask;","// extracted by mini-css-extract-plugin\nexport default {\"alert\":\"Alert_alert__-zGVv\"};","import { AlertBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Alert.module.css';\nconst Alert = _ref => {\n  let {\n    message,\n    critical,\n    warning,\n    onHidden\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.alert\n  }, /*#__PURE__*/React.createElement(AlertBar, {\n    critical: critical,\n    warning: warning,\n    duration: 10000,\n    onHidden: onHidden\n  }, message));\n};\nAlert.propTypes = {\n  message: PropTypes.string.isRequired,\n  onHidden: PropTypes.func.isRequired,\n  critical: PropTypes.string.boolean,\n  warning: PropTypes.string.boolean\n};\nexport default Alert;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport log from 'loglevel';\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../../../constants/layers.js';\nclass Layer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {});\n    // Called when a map popup is closed\n    _defineProperty(this, \"onPopupClose\", () => {\n      this.setState({\n        popup: null\n      });\n    });\n    this.setPeriod();\n    this.createLayer();\n  }\n  componentDidUpdate(prevProps) {\n    let prevState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      id,\n      data,\n      index,\n      opacity,\n      isVisible,\n      editCounter,\n      dataFilters,\n      feature\n    } = this.props;\n    const {\n      period\n    } = this.state;\n    const {\n      period: prevPeriod\n    } = prevState || {};\n    const isEdited = editCounter !== prevProps.editCounter;\n\n    // Create new map if new id of editCounter is increased\n    if (id !== prevProps.id || data !== prevProps.data || (period === null || period === void 0 ? void 0 : period.id) !== (prevPeriod === null || prevPeriod === void 0 ? void 0 : prevPeriod.id) || dataFilters !== prevProps.dataFilters || isEdited) {\n      // Reset period if edited\n      if (isEdited) {\n        this.setPeriod(this.updateLayer.bind(this));\n      } else {\n        this.updateLayer(dataFilters !== prevProps.dataFilters);\n      }\n    }\n    if (index !== undefined && index !== prevProps.index) {\n      this.setLayerOrder();\n    }\n    if (opacity !== prevProps.opacity) {\n      this.setLayerOpacity();\n    }\n    if (isVisible !== prevProps.isVisible) {\n      this.setLayerVisibility();\n    }\n    if (feature !== prevProps.feature) {\n      this.highlightFeature(feature);\n    }\n  }\n  componentWillUnmount() {\n    this.removeLayer();\n  }\n\n  // Create new layer from config object (override in subclasses)\n  async createLayer() {\n    const {\n      id,\n      index = 0,\n      config,\n      opacity,\n      isVisible\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    this.layer = map.createLayer({\n      ...config,\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n    await map.addLayer(this.layer);\n  }\n  async updateLayer() {\n    await this.removeLayer();\n    await this.createLayer(true);\n    this.setLayerOrder();\n  }\n\n  // Override in subclass if needed\n  setPeriod(callback) {\n    if (callback) {\n      callback();\n    }\n  }\n  setLayerVisibility() {\n    this.layer.setVisibility(this.props.isVisible);\n  }\n  setLayerOpacity() {\n    this.layer.setOpacity(this.props.opacity);\n  }\n  setLayerOrder() {\n    if (this.layer) {\n      this.layer.setIndex(this.props.index);\n    }\n  }\n\n  // Fit map to layer bounds\n  fitBounds() {\n    const {\n      map\n    } = this.context;\n    if (this.layer.getBounds) {\n      map.fitBounds(this.layer.getBounds());\n    }\n  }\n\n  // Fit map to layer bounds once (when first created)\n  fitBoundsOnce() {\n    if (!this.isZoomed || this.context.map.getZoom() === undefined) {\n      this.fitBounds();\n      this.isZoomed = true;\n    }\n  }\n  async removeLayer() {\n    if (this.layer) {\n      const {\n        map\n      } = this.context;\n      this.layer.off('contextmenu', this.onFeatureRightClick, this);\n      await map.removeLayer(this.layer);\n      delete this.layer;\n    }\n  }\n  highlightFeature(feature) {\n    if (this.layer.highlight) {\n      this.layer.highlight(feature ? feature.id : null);\n    }\n  }\n  render() {\n    return null;\n  }\n  onFeatureRightClick(evt) {\n    const [x, y] = evt.position;\n    const layerConfig = {\n      ...this.props\n    };\n    const {\n      id: layerId,\n      layer: layerType,\n      renderingStrategy\n    } = layerConfig;\n    const {\n      map\n    } = this.context;\n    const container = map.getContainer();\n    const {\n      left,\n      top\n    } = container.getBoundingClientRect();\n    const isSplitView = renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD;\n    this.props.openContextMenu({\n      ...evt,\n      position: [x, y],\n      offset: [left, top],\n      layerConfig,\n      layerId,\n      layerType,\n      isSplitView,\n      map,\n      container: isSplitView ? container.parentNode.parentNode : container\n    });\n    this.setState({\n      popup: null\n    });\n  }\n  onError(error) {\n    const message = error.message || error;\n    if (!this.context.isPlugin) {\n      this.setState({\n        error: message\n      });\n    } else {\n      log.error(message);\n    }\n  }\n  onErrorHidden() {\n    this.setState({\n      error: null\n    });\n  }\n}\n_defineProperty(Layer, \"contextTypes\", {\n  map: PropTypes.object,\n  isPlugin: PropTypes.bool\n});\n_defineProperty(Layer, \"propTypes\", {\n  id: PropTypes.string.isRequired,\n  config: PropTypes.object,\n  data: PropTypes.array,\n  dataFilters: PropTypes.object,\n  editCounter: PropTypes.number,\n  feature: PropTypes.object,\n  index: PropTypes.number,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number,\n  openContextMenu: PropTypes.func\n});\n_defineProperty(Layer, \"defaultProps\", {\n  opacity: 1,\n  isVisible: true\n});\nexport default Layer;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitButton\":\"OrgUnitButton_orgUnitButton__cpD5v\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport styles from './styles/OrgUnitButton.module.css';\n\n/*\n *  Displays a button to open the org unit profile\n */\nconst OrgUnitButton = _ref => {\n  let {\n    id,\n    orgUnitProfile,\n    setOrgUnitProfile\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitButton\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    disabled: id === orgUnitProfile,\n    onClick: () => setOrgUnitProfile(id)\n  }, i18n.t('View profile')));\n};\nOrgUnitButton.propTypes = {\n  id: PropTypes.string.isRequired,\n  setOrgUnitProfile: PropTypes.func.isRequired,\n  orgUnitProfile: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    orgUnitProfile\n  } = _ref2;\n  return {\n    orgUnitProfile\n  };\n}, {\n  setOrgUnitProfile\n})(OrgUnitButton);","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport OrgUnitButton from '../orgunits/OrgUnitButton.js';\nimport './styles/Popup.css';\nconst Popup = (props, context) => {\n  const {\n    className = '',\n    coordinates,\n    orgUnitId,\n    onClose,\n    children\n  } = props;\n  const {\n    map,\n    isPlugin\n  } = context;\n  const container = useMemo(() => document.createElement('div'), []);\n\n  // Create and open popup on map\n  useEffect(() => {\n    container.className = className;\n    map.openPopup(container, coordinates, onClose);\n  }, [map, container, className, coordinates, onClose]);\n\n  // Close popup if component is unmounted\n  useEffect(() => {\n    return () => map.closePopup();\n  }, [map]);\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, children, isPlugin === false && orgUnitId && /*#__PURE__*/React.createElement(OrgUnitButton, {\n    id: orgUnitId\n  })), container);\n};\nPopup.contextTypes = {\n  map: PropTypes.object,\n  isPlugin: PropTypes.bool\n};\nPopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string\n};\nexport default Popup;","// extracted by mini-css-extract-plugin\nexport default {\"popup\":\"EarthEnginePopup_popup__i8opR\",\"title\":\"EarthEnginePopup_title__mlHAY\",\"table\":\"EarthEnginePopup_table__xRHIs\",\"group\":\"EarthEnginePopup_group__13iuJ\",\"unit\":\"EarthEnginePopup_unit__c7mBN\",\"classes\":\"EarthEnginePopup_classes__CMWBe\",\"loading\":\"EarthEnginePopup_loading__YqycZ\"};","import i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getEarthEngineAggregationType } from '../../../../constants/aggregationTypes.js';\nimport { hasClasses, getPrecision } from '../../../../util/earthEngine.js';\nimport { numberPrecision } from '../../../../util/numbers.js';\nimport Popup from '../../Popup.js';\nimport styles from './styles/EarthEnginePopup.module.css';\nconst EarthEnginePopup = props => {\n  const {\n    coordinates,\n    feature,\n    data,\n    legend,\n    valueType,\n    onClose\n  } = props;\n  const {\n    id,\n    name\n  } = feature.properties;\n  const {\n    title,\n    period = '',\n    unit,\n    items = [],\n    groups\n  } = legend;\n  const values = typeof data === 'object' ? data[id] : null;\n  const classes = hasClasses(valueType);\n  const isPercentage = valueType === 'percentage';\n  const isLoading = data === 'loading';\n  let table = null;\n  if (values) {\n    if (classes) {\n      const valueFormat = numberPrecision(isPercentage ? 2 : 0);\n      table = /*#__PURE__*/React.createElement(\"table\", {\n        className: styles.table\n      }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n        colSpan: \"2\"\n      }, title, \" \", period), /*#__PURE__*/React.createElement(\"th\", null, valueType))), /*#__PURE__*/React.createElement(\"tbody\", null, items.filter(i => values[i.id]).sort((a, b) => values[b.id] - values[a.id]).map(_ref => {\n        let {\n          id,\n          name,\n          color\n        } = _ref;\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: id,\n          className: styles.classes\n        }, /*#__PURE__*/React.createElement(\"th\", {\n          style: {\n            backgroundColor: color\n          }\n        }), /*#__PURE__*/React.createElement(\"th\", null, name), /*#__PURE__*/React.createElement(\"td\", null, valueFormat(values[id]), isPercentage ? '%' : ''));\n      })));\n    } else {\n      const onlySum = valueType.length === 1 && valueType[0] === 'sum';\n\n      // Returns the value key for a type/group\n      const getValueKey = (type, group) => groups.length === 1 ? type : valueType.length === 1 ? group : `${group}_${type}`;\n\n      // Returns the value format (precision) for an aggregation type\n      const getValueFormat = type => numberPrecision(getPrecision(Object.values(data).map(ou => Object.keys(ou).filter(key => key.includes(type)).map(key => ou[key])).flat()));\n\n      // Create value format function for each aggregation type\n      const typeValueFormat = valueType.reduce((types, type) => {\n        types[type] = getValueFormat(type);\n        return types;\n      }, {});\n      const header = /*#__PURE__*/React.createElement(\"caption\", null, title, \" \", period, !onlySum && /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.unit\n      }, unit));\n      if (groups) {\n        table = /*#__PURE__*/React.createElement(\"table\", {\n          className: styles.table\n        }, header, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, \"Group\"), valueType.map(type => /*#__PURE__*/React.createElement(\"th\", {\n          key: type\n        }, getEarthEngineAggregationType(type))))), /*#__PURE__*/React.createElement(\"tbody\", null, groups.map(_ref2 => {\n          let {\n            id,\n            name\n          } = _ref2;\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            key: id\n          }, /*#__PURE__*/React.createElement(\"th\", null, name), valueType.map(type => /*#__PURE__*/React.createElement(\"td\", {\n            key: type\n          }, typeValueFormat[type](values[getValueKey(type, id)]))));\n        })), groups.length > 1 && /*#__PURE__*/React.createElement(\"tfoot\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('All groups')), valueType.map(type => /*#__PURE__*/React.createElement(\"td\", {\n          key: type\n        }, typeValueFormat[type](values[type]))))));\n      } else {\n        table = /*#__PURE__*/React.createElement(\"table\", {\n          className: styles.table\n        }, header, /*#__PURE__*/React.createElement(\"tbody\", null, valueType.map(type => /*#__PURE__*/React.createElement(\"tr\", {\n          key: type\n        }, /*#__PURE__*/React.createElement(\"th\", null, getEarthEngineAggregationType(type), \":\"), /*#__PURE__*/React.createElement(\"td\", null, typeValueFormat[type](values[type]))))));\n      }\n    }\n  }\n  return /*#__PURE__*/React.createElement(Popup, {\n    coordinates: coordinates,\n    orgUnitId: id,\n    onClose: onClose,\n    className: \"dhis2-map-popup-orgunit\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.popup\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title\n  }, name), table, isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), i18n.t('Loading data'))));\n};\nEarthEnginePopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  feature: PropTypes.object.isRequired,\n  legend: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  data: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  valueType: PropTypes.oneOfType([PropTypes.string, PropTypes.array])\n};\nexport default EarthEnginePopup;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { EARTH_ENGINE_LAYER } from '../../../../constants/layers.js';\nimport { getAuthToken } from '../../../../util/earthEngine.js';\nimport { filterData } from '../../../../util/filter.js';\nimport { BaseUrlCtx } from '../../../BaseUrlProvider.js';\nimport MapLoadingMask from '../../MapLoadingMask.js';\nimport Alert from '../Alert.js';\nimport Layer from '../Layer.js';\nimport EarthEnginePopup from './EarthEnginePopup.js';\nexport default class EarthEngineLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      isLoading: true,\n      popup: null,\n      aggregations: null,\n      error: null\n    });\n    _defineProperty(this, \"updateLayer\", async filterChange => {\n      if (filterChange) {\n        this.applyFilter();\n      } else {\n        this.clearAggregations();\n        await this.removeLayer();\n        await this.createLayer(true);\n        this.setLayerOrder();\n      }\n    });\n  }\n  componentDidUpdate(prev) {\n    super.componentDidUpdate(prev);\n    console.log('this.context', this.context);\n    const {\n      coordinate\n    } = this.props;\n    if (coordinate && coordinate !== prev.coordinate) {\n      try {\n        this.layer.showValue({\n          lng: coordinate[0],\n          lat: coordinate[1]\n        });\n      } catch (error) {\n        this.setState({\n          error: i18n.t('Google Earth Engine failed. Is the service configured for this DHIS2 instance?')\n        });\n      }\n    }\n  }\n  async createLayer(isUpdate) {\n    const {\n      id,\n      index,\n      format,\n      opacity,\n      isVisible,\n      datasetId,\n      band,\n      mask,\n      attribution,\n      filter,\n      methods,\n      mosaic,\n      name,\n      unit,\n      legend,\n      value,\n      resolution,\n      projection,\n      params,\n      popup,\n      data,\n      aggregationType,\n      areaRadius,\n      tileScale\n    } = this.props;\n    const {\n      map,\n      isPlugin\n    } = this.context;\n    const config = {\n      type: EARTH_ENGINE_LAYER,\n      id,\n      index,\n      format,\n      opacity,\n      isVisible,\n      datasetId,\n      band,\n      mask,\n      attribution,\n      filter,\n      methods,\n      mosaic,\n      name,\n      unit,\n      value,\n      noValue: i18n.t('no value'),\n      legend: legend.items,\n      resolution,\n      projection,\n      data,\n      aggregationType,\n      tileScale,\n      preload: !isPlugin && this.hasAggregations(),\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this),\n      onLoad: this.onLoad.bind(this)\n    };\n    if (params) {\n      config.params = params;\n    }\n    if (areaRadius) {\n      config.buffer = areaRadius;\n    }\n    if (popup) {\n      config.popup = popup;\n    }\n    if (isUpdate) {\n      this.setState({\n        isLoading: true\n      });\n    }\n    config.getAuthToken = getAuthToken;\n    try {\n      this.layer = map.createLayer(config);\n      await map.addLayer(this.layer);\n    } catch (error) {\n      this.onError(error);\n    }\n    this.fitBoundsOnce();\n  }\n  hasAggregations() {\n    const {\n      data,\n      aggregationType\n    } = this.props;\n    return data && (typeof aggregationType === 'string' || Array.isArray(aggregationType) && aggregationType.length);\n  }\n  getAggregations() {\n    if (this.hasAggregations() && !this.state.aggregations) {\n      this.setState({\n        aggregations: 'loading'\n      });\n      this.layer.getAggregations().then(this.addAggregationValues.bind(this)).catch(this.onError.bind(this));\n    }\n  }\n  addAggregationValues(aggregations) {\n    const {\n      id,\n      data,\n      setAggregations\n    } = this.props;\n\n    // Make aggregations available for data table and download\n    // setAggregations is not available in map plugin\n    if (setAggregations) {\n      setAggregations({\n        [id]: aggregations\n      });\n    }\n\n    // Make aggregations available for filtering and popup\n    this.setState({\n      data: data.map(f => ({\n        ...f,\n        properties: {\n          ...f.properties,\n          ...aggregations[f.id]\n        }\n      })),\n      aggregations\n    });\n  }\n  clearAggregations() {\n    if (this.hasAggregations()) {\n      const {\n        id,\n        setAggregations\n      } = this.props;\n      this.setState({\n        aggregations: undefined\n      });\n      if (setAggregations) {\n        setAggregations({\n          [id]: undefined\n        });\n      }\n    }\n  }\n  applyFilter() {\n    const {\n      data,\n      dataFilters\n    } = this.props;\n    const filteredData = filterData(this.state.data || data, dataFilters).map(f => f.id);\n    if (this.layer && this.layer.filter) {\n      this.layer.filter(filteredData);\n    }\n  }\n  render() {\n    const {\n      legend,\n      aggregationType\n    } = this.props;\n    const {\n      isLoading,\n      popup,\n      aggregations,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, isLoading && /*#__PURE__*/React.createElement(MapLoadingMask, null), error && /*#__PURE__*/React.createElement(Alert, {\n      critical: true,\n      message: error,\n      onHidden: () => this.setState({\n        error: null\n      })\n    }), popup && /*#__PURE__*/React.createElement(EarthEnginePopup, _extends({\n      data: aggregations || {},\n      legend: legend,\n      valueType: aggregationType,\n      onClose: this.onPopupClose\n    }, popup)));\n  }\n  onFeatureClick(evt) {\n    this.getAggregations();\n    this.setState({\n      popup: evt\n    });\n  }\n  onLoad() {\n    this.setState({\n      isLoading: false,\n      popup: null\n    });\n    if (!this.context.isPlugin) {\n      this.getAggregations();\n    }\n  }\n  onError(error) {\n    let message = error.message || error;\n    if (message.includes('memory limit exceeded') && this.props.error) {\n      message = this.props.error;\n    }\n    this.setState({\n      error: message,\n      isLoading: false,\n      aggregations: 'error'\n    });\n  }\n}\n_defineProperty(EarthEngineLayer, \"contextType\", BaseUrlCtx);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { EVENT_ID_FIELD } from '../../../util/geojson.js';\nimport { formatTime, formatCoordinate } from '../../../util/helpers.js';\nimport Popup from '../Popup.js';\n\n// Returns true if value is not undefined or null;\nconst hasValue = value => value !== undefined || value !== null;\nconst EVENTS_QUERY = {\n  events: {\n    resource: 'events',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }\n  }\n};\nconst getDataRows = _ref2 => {\n  let {\n    displayElements,\n    dataValues,\n    styleDataItem,\n    value\n  } = _ref2;\n  const dataRows = [];\n\n  // Include data element used for styling if not included below\n  if (styleDataItem && !displayElements.find(d => d.id === styleDataItem.id)) {\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: styleDataItem.id\n    }, /*#__PURE__*/React.createElement(\"th\", null, styleDataItem.name), /*#__PURE__*/React.createElement(\"td\", null, hasValue(value) ? value : i18n.t('Not set'))));\n  }\n\n  // Include rows for each displayInReport data elements\n  displayElements.forEach(_ref3 => {\n    let {\n      id,\n      name,\n      valueType,\n      options\n    } = _ref3;\n    const {\n      value\n    } = dataValues.find(d => d.dataElement === id) || {};\n    let formattedValue = value;\n    if (valueType === 'COORDINATE' && value) {\n      formattedValue = formatCoordinate(value);\n    } else if (options) {\n      formattedValue = options[value];\n    } else if (!hasValue(value)) {\n      formattedValue = i18n.t('Not set');\n    }\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: id\n    }, /*#__PURE__*/React.createElement(\"th\", null, name), /*#__PURE__*/React.createElement(\"td\", null, formattedValue)));\n  });\n  if (dataRows.length) {\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: \"divider\",\n      style: {\n        height: 5\n      }\n    }));\n  }\n  return dataRows;\n};\n\n// Will display a popup for an event feature\nconst EventPopup = _ref4 => {\n  let {\n    coordinates,\n    feature,\n    styleDataItem,\n    displayElements,\n    eventCoordinateFieldName,\n    onClose\n  } = _ref4;\n  const {\n    error,\n    data,\n    refetch\n  } = useDataQuery(EVENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    refetch({\n      id: feature.properties.id || feature.properties[EVENT_ID_FIELD]\n    });\n  }, [feature, refetch]);\n  const {\n    type,\n    coordinates: coord\n  } = feature.geometry;\n  const {\n    value\n  } = feature.properties;\n  const {\n    dataValues = [],\n    eventDate,\n    orgUnitName\n  } = (data === null || data === void 0 ? void 0 : data.events) || {};\n  return /*#__PURE__*/React.createElement(Popup, {\n    coordinates: coordinates,\n    onClose: onClose,\n    className: \"dhis2-map-popup-event\"\n  }, error && /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Could not retrieve event data')), !error && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, (data === null || data === void 0 ? void 0 : data.events) && getDataRows({\n    displayElements,\n    dataValues,\n    styleDataItem,\n    value\n  }), type === 'Point' && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, eventCoordinateFieldName || i18n.t('Event location')), /*#__PURE__*/React.createElement(\"td\", null, coord[0].toFixed(6), \" \", coord[1].toFixed(6))), orgUnitName && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Organisation unit')), /*#__PURE__*/React.createElement(\"td\", null, orgUnitName)), eventDate && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Event time')), /*#__PURE__*/React.createElement(\"td\", null, formatTime(eventDate))))));\n};\nEventPopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  displayElements: PropTypes.array.isRequired,\n  feature: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  eventCoordinateFieldName: PropTypes.string,\n  styleDataItem: PropTypes.object\n};\nexport default EventPopup;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { getInstance as getD2 } from 'd2';\nimport React from 'react';\nimport { EVENT_COLOR, EVENT_RADIUS } from '../../../constants/layers.js';\nimport { getContrastColor } from '../../../util/colors.js';\nimport { getAnalyticsRequest } from '../../../util/event.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getDisplayPropertyUrl } from '../../../util/helpers.js';\nimport { formatCount } from '../../../util/numbers.js';\nimport EventPopup from './EventPopup.js';\nimport Layer from './Layer.js';\nclass EventLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"clusterCount\", 0);\n    _defineProperty(this, \"state\", {\n      popup: null,\n      dataElements: null,\n      eventCoordinateFieldName: null\n    });\n    _defineProperty(this, \"onPopupClose\", () => {\n      this.setState({\n        popup: null\n      });\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      bounds,\n      data,\n      eventClustering,\n      eventPointColor,\n      eventPointRadius,\n      program,\n      programStage,\n      serverCluster,\n      areaRadius,\n      styleDataItem,\n      legend,\n      dataFilters\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n\n    // Some older favorites don't have a valid color code\n    const color = eventPointColor && eventPointColor.charAt(0) !== '#' ? '#' + eventPointColor : eventPointColor;\n    const fillColor = color || EVENT_COLOR;\n    const strokeColor = !styleDataItem ? getContrastColor(fillColor) : undefined;\n    const countColor = strokeColor;\n    const radius = eventPointRadius || EVENT_RADIUS;\n    const map = this.context.map;\n    let d2;\n    let eventRequest;\n\n    // Data elements to display in event popup\n    this.displayElements = {};\n\n    // Default props = no cluster\n    const config = {\n      type: 'events',\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      fillColor,\n      strokeColor,\n      countColor,\n      radius,\n      onClick: this.onEventClick.bind(this)\n    };\n    if (eventClustering) {\n      if (serverCluster) {\n        config.type = 'serverCluster';\n        config.bounds = bounds;\n        config.load = async (params, callback) => {\n          d2 = d2 || (await getD2());\n          eventRequest = eventRequest || (await getAnalyticsRequest(this.props, {\n            d2,\n            nameProperty: d2.currentUser.settings.keyAnalysisDisplayProperty\n          }));\n          eventRequest = eventRequest.withBbox(params.bbox).withClusterSize(params.clusterSize).withIncludeClusterPoints(params.includeClusterPoints);\n          const clusterData = await d2.analytics.events.getCluster(eventRequest);\n          callback(params.tileId, this.toGeoJson(clusterData));\n        };\n      } else {\n        config.clusterPane = id;\n        if (styleDataItem && legend) {\n          config.type = 'donutCluster';\n          config.groups = legend.items;\n        } else {\n          config.type = 'clientCluster';\n        }\n      }\n    } else if (areaRadius) {\n      config.buffer = areaRadius;\n      config.bufferStyle = {\n        color: color || EVENT_COLOR,\n        weight: 1,\n        opacity: 0.2,\n        fillOpacity: 0.1\n      };\n    }\n    if (program && programStage) {\n      this.loadDisplayElements();\n    }\n\n    // Create and add event layer based on config object\n    this.layer = map.createLayer(config);\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  render() {\n    const {\n      styleDataItem\n    } = this.props;\n    const {\n      popup,\n      displayElements,\n      eventCoordinateFieldName\n    } = this.state;\n    return popup && displayElements ? /*#__PURE__*/React.createElement(EventPopup, _extends({}, popup, {\n      styleDataItem: styleDataItem,\n      displayElements: displayElements,\n      eventCoordinateFieldName: eventCoordinateFieldName,\n      onClose: this.onPopupClose\n    })) : null;\n  }\n  onEventClick(_ref) {\n    let {\n      feature,\n      coordinates\n    } = _ref;\n    this.setState({\n      popup: {\n        feature,\n        coordinates\n      }\n    });\n  }\n  // Convert server cluster response to GeoJSON\n  toGeoJson(data) {\n    const header = {};\n    const features = [];\n\n    // Convert headers to object for easier lookup\n    data.headers.forEach((h, i) => header[h.name] = i);\n    if (Array.isArray(data.rows)) {\n      data.rows.forEach(row => {\n        const extent = row[header.extent].match(/([-\\d.]+)/g);\n        const count = parseInt(row[header.count], 10);\n        const clusterId = ++this.clusterCount;\n        features.push({\n          type: 'Feature',\n          id: clusterId,\n          geometry: JSON.parse(row[header.center]),\n          properties: {\n            cluster: count > 1,\n            cluster_id: clusterId,\n            point_count: count,\n            point_count_abbreviated: formatCount(count),\n            bounds: [[extent[0], extent[1]], [extent[2], extent[3]]],\n            id: row[header.points]\n          }\n        });\n      });\n    }\n    return features;\n  }\n\n  // Loads the data elements for a program stage to display in popup\n  async loadDisplayElements() {\n    const {\n      programStage,\n      eventCoordinateField\n    } = this.props;\n    const d2 = await getD2();\n    const data = await d2.models.programStage.get(programStage.id, {\n      fields: `programStageDataElements[displayInReports,dataElement[id,${getDisplayPropertyUrl(d2)},optionSet,valueType]]`,\n      paging: false\n    });\n    const {\n      programStageDataElements\n    } = data;\n    let displayElements = [];\n    let eventCoordinateFieldName;\n    if (Array.isArray(programStageDataElements)) {\n      displayElements = programStageDataElements.filter(d => d.displayInReports).map(d => d.dataElement);\n      for (const d of displayElements) {\n        await this.loadOptionSet(d);\n      }\n      if (eventCoordinateField) {\n        const coordElement = programStageDataElements.find(d => d.dataElement.id === eventCoordinateField);\n        if (coordElement) {\n          eventCoordinateFieldName = coordElement.dataElement.name;\n        }\n      }\n    }\n    this.setState({\n      displayElements,\n      eventCoordinateFieldName\n    });\n  }\n\n  // Loads an option set for an data element to get option names\n  async loadOptionSet(dataElement) {\n    const {\n      optionSet\n    } = dataElement;\n    if (!optionSet || !optionSet.id) {\n      return dataElement;\n    }\n    const d2 = await getD2();\n    if (optionSet && optionSet.id) {\n      const fullOptionSet = await d2.models.optionSets.get(optionSet.id, {\n        fields: 'id,displayName~rename(name),options[code,displayName~rename(name)]',\n        paging: false\n      });\n      if (fullOptionSet && fullOptionSet.options) {\n        dataElement.options = fullOptionSet.options.reduce((byId, option) => {\n          byId[option.code] = option.name;\n          return byId;\n        }, {});\n      }\n    }\n  }\n}\nexport default EventLayer;","import { LABEL_FONT_SIZE, LABEL_FONT_STYLE, LABEL_FONT_WEIGHT, LABEL_FONT_COLOR } from '../constants/layers.js';\nimport { cssColor } from './colors.js';\nexport const getLabelStyle = _ref => {\n  let {\n    labelFontSize,\n    labelFontStyle,\n    labelFontWeight,\n    labelFontColor\n  } = _ref;\n  const fontSize = labelFontSize || LABEL_FONT_SIZE;\n  return {\n    fontSize,\n    fontStyle: labelFontStyle || LABEL_FONT_STYLE,\n    fontWeight: labelFontWeight || LABEL_FONT_WEIGHT,\n    lineHeight: parseInt(fontSize, 10) * 1.2 + 'px',\n    color: cssColor(labelFontColor) || LABEL_FONT_COLOR,\n    paddingTop: '10px'\n  };\n};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { isPlainObject } from 'lodash/fp';\nimport React from 'react';\nimport { ORG_UNIT_COLOR, GEOJSON_LAYER, GROUP_LAYER, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { getContrastColor } from '../../../util/colors.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Popup from '../Popup.js';\nimport Alert from './Alert.js';\nimport Layer from './Layer.js';\nclass FacilityLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      labels,\n      areaRadius,\n      orgUnitFieldDisplayName,\n      associatedGeometries,\n      organisationUnitColor: color = ORG_UNIT_COLOR,\n      organisationUnitGroupSet\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n    const map = this.context.map;\n    const strokeColor = organisationUnitGroupSet ? color : getContrastColor(color);\n    const group = map.createLayer({\n      type: GROUP_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n\n    // Create layer config object\n    const config = {\n      type: GEOJSON_LAYER,\n      data: filteredData,\n      hoverLabel: '{name}',\n      style: {\n        color,\n        strokeColor\n      },\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this),\n      onError: this.onError.bind(this)\n    };\n\n    // Labels and label style\n    if (labels) {\n      config.label = LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = {\n        ...getLabelStyle(this.props),\n        paddingTop: '10px'\n      };\n    }\n    if (areaRadius) {\n      config.buffer = areaRadius;\n    }\n    if (associatedGeometries) {\n      group.addLayer({\n        type: GEOJSON_LAYER,\n        data: associatedGeometries,\n        hoverLabel: `{name}: ${orgUnitFieldDisplayName}`,\n        style: {\n          color: 'rgb(149, 200, 251)',\n          opacityFactor: 0.5\n        },\n        onClick: this.onAssociatedGeometryClick.bind(this),\n        onRightClick: this.onFeatureRightClick.bind(this)\n      });\n    }\n\n    // Create and add facility layer based on config object\n    group.addLayer(config);\n    this.layer = group;\n    map.addLayer(this.layer).catch(this.onError.bind(this));\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      feature\n    } = this.state.popup;\n    const {\n      id,\n      name,\n      dimensions,\n      pn\n    } = feature.properties;\n    const {\n      orgUnitFieldDisplayName\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: \"dhis2-map-popup-orgunit\"\n    }, /*#__PURE__*/React.createElement(\"em\", null, name), this.state.isAssociatedGeometry && /*#__PURE__*/React.createElement(\"div\", null, orgUnitFieldDisplayName), isPlainObject(dimensions) && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Groups'), \":\", Object.keys(dimensions).map(id => dimensions[id]).join(', ')), pn && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Parent unit'), \": \", pn));\n  }\n  render() {\n    const {\n      popup,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, popup && this.getPopup(), error && /*#__PURE__*/React.createElement(Alert, {\n      warning: true,\n      message: error,\n      onHidden: this.onErrorHidden.bind(this)\n    }));\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n  onAssociatedGeometryClick(evt) {\n    this.setState({\n      popup: evt,\n      isAssociatedGeometry: true\n    });\n  }\n}\nexport default FacilityLayer;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { ORG_UNIT_COLOR, GEOJSON_LAYER, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\nexport default class OrgUnitLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      labels,\n      radiusLow,\n      dataFilters,\n      organisationUnitColor = ORG_UNIT_COLOR\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n    const map = this.context.map;\n    const config = {\n      type: GEOJSON_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      hoverLabel: '{name}',\n      style: {\n        color: 'transparent',\n        strokeColor: organisationUnitColor\n      },\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this)\n    };\n    if (labels) {\n      config.label = LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = getLabelStyle(this.props);\n    }\n    if (radiusLow) {\n      config.style.radius = radiusLow;\n    }\n    this.layer = map.createLayer(config);\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      feature\n    } = this.state.popup;\n    const {\n      id,\n      name,\n      level,\n      parentName\n    } = feature.properties;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: \"dhis2-map-popup-orgunit\"\n    }, /*#__PURE__*/React.createElement(\"em\", null, name), level && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Level'), \": \", level), parentName && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Parent unit'), \": \", parentName));\n  }\n  render() {\n    return this.state.popup ? this.getPopup() : null;\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n}","import { bisector, tickStep } from 'd3-array';\nimport { timeMillisecond as millisecond, timeSecond as second, timeMinute as minute, timeHour as hour, timeDay as day, timeMonday as week, timeMonth as month, timeYear as year } from 'd3-time';\n\n// Based on https://github.com/d3/d3-time/blob/main/src/ticks.js\n// Week start on Monday, not Sunday as default in d3.js\n\nconst durationSecond = 1000;\nconst durationMinute = durationSecond * 60;\nconst durationHour = durationMinute * 60;\nconst durationDay = durationHour * 24;\nconst durationWeek = durationDay * 7;\nconst durationMonth = durationDay * 30;\nconst durationYear = durationDay * 365;\n\n//eslint-disable-next-line max-params\nfunction ticker(year, month, week, day, hour, minute) {\n  const tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) {\n      ;\n      [start, stop] = [stop, start];\n    }\n    const interval = count && typeof count.range === 'function' ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(_ref => {\n      let [,, step] = _ref;\n      return step;\n    }).right(tickIntervals, target);\n    if (i === tickIntervals.length) {\n      return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    }\n    if (i === 0) {\n      return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    }\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n  return ticks;\n}\nexport default ticker(year, month, week, day, hour, minute);","// extracted by mini-css-extract-plugin\nexport default {\"timeline\":\"Timeline_timeline__ES-XF map_box__WtUb7\",\"play\":\"Timeline_play__otgMb\",\"period\":\"Timeline_period__1ITu1\",\"selected\":\"Timeline_selected__q0WMO\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport cx from 'classnames';\nimport { axisBottom } from 'd3-axis';\nimport { scaleTime } from 'd3-scale';\nimport { select } from 'd3-selection';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport timeTicks from '../../util/timeTicks.js';\nimport styles from './styles/Timeline.module.css';\nconst paddingLeft = 40;\nconst paddingRight = 20;\nconst labelWidth = 80;\nconst delay = 1500;\nconst playBtn = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8 5v14l11-7z\"\n});\nconst pauseBtn = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"\n});\nconst doubleTicksPeriods = ['LAST_6_BIMONTHS', 'BIMONTHS_THIS_YEAR'];\nclass Timeline extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      width: null,\n      mode: 'start'\n    });\n    // Returns array of period rectangles\n    _defineProperty(this, \"getPeriodRects\", () => {\n      const {\n        period,\n        periods\n      } = this.props;\n      return periods.map(item => {\n        const isCurrent = period.id === item.id;\n        const {\n          id,\n          startDate,\n          endDate\n        } = item;\n        const x = this.timeScale(startDate);\n        const width = this.timeScale(endDate) - x;\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: id,\n          className: cx(styles.period, {\n            [styles.selected]: isCurrent\n          }),\n          x: x,\n          y: \"0\",\n          width: width,\n          height: \"16\",\n          onClick: () => this.onPeriodClick(item)\n        });\n      });\n    });\n    // Set time scale\n    _defineProperty(this, \"setTimeScale\", () => {\n      const {\n        periods\n      } = this.props;\n      const {\n        width\n      } = this.state;\n      if (!periods.length) {\n        return;\n      }\n      const {\n        startDate\n      } = periods[0];\n      const {\n        endDate\n      } = periods[periods.length - 1];\n\n      // Link time domain to timeline width\n      this.timeScale = scaleTime().domain([startDate, endDate]).range([0, width]);\n    });\n    // Set timeline axis\n    _defineProperty(this, \"setTimeAxis\", () => {\n      const {\n        periodId,\n        periods\n      } = this.props;\n      const numPeriods = periods.length * (doubleTicksPeriods.includes(periodId) ? 2 : 1);\n      const {\n        width\n      } = this.state;\n      const maxTicks = Math.round(width / labelWidth);\n      const numTicks = maxTicks < numPeriods ? maxTicks : numPeriods;\n      const timeAxis = axisBottom(this.timeScale);\n      const [startDate, endDate] = this.timeScale.domain();\n      const ticks = timeTicks(startDate, endDate, numTicks);\n      timeAxis.tickValues(ticks);\n      select(this.node).call(timeAxis);\n    });\n    // Set timeline width from DOM el\n    _defineProperty(this, \"setWidth\", () => {\n      if (this.node) {\n        // clientWith returns 0 for SVG elements in Firefox\n        const box = this.node.parentNode.getBoundingClientRect();\n        const width = box.right - box.left - paddingLeft - paddingRight;\n        this.setState({\n          width\n        });\n      }\n    });\n    // Handler for play/pause button\n    _defineProperty(this, \"onPlayPause\", () => {\n      if (this.state.mode === 'play') {\n        this.stop();\n      } else {\n        this.play();\n      }\n    });\n    // Play animation\n    _defineProperty(this, \"play\", () => {\n      const {\n        period,\n        periods,\n        onChange\n      } = this.props;\n      const index = periods.findIndex(p => p.id === period.id);\n      const isLastPeriod = index === periods.length - 1;\n\n      // If new animation\n      if (!this.timeout) {\n        // Switch to first period if last\n        if (isLastPeriod) {\n          onChange(periods[0]);\n        }\n        this.setState({\n          mode: 'play'\n        });\n      } else {\n        // Stop animation if last period\n        if (isLastPeriod) {\n          this.stop();\n          return;\n        }\n\n        // Switch to next period\n        onChange(periods[index + 1]);\n      }\n\n      // Call itself after delay\n      this.timeout = setTimeout(this.play, delay);\n    });\n    // Stop animation\n    _defineProperty(this, \"stop\", () => {\n      this.setState({\n        mode: 'stop'\n      });\n      clearTimeout(this.timeout);\n      delete this.timeout;\n    });\n  }\n  componentDidMount() {\n    this.setWidth();\n    this.context.map.on('resize', this.setWidth);\n  }\n  componentDidUpdate() {\n    this.setTimeAxis();\n  }\n  componentWillUnmount() {\n    this.context.map.off('resize', this.setWidth);\n  }\n  render() {\n    const {\n      mode\n    } = this.state;\n    this.setTimeScale();\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      className: `dhis2-map-timeline ${styles.timeline}`\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      onClick: this.onPlayPause,\n      transform: \"translate(7,5)\",\n      className: styles.play\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M0 0h24v24H0z\",\n      fillOpacity: \"0.0\"\n    }), mode === 'play' ? pauseBtn : playBtn), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(${paddingLeft},10)`\n    }, this.getPeriodRects()), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(${paddingLeft},25)`,\n      ref: node => this.node = node\n    }));\n  }\n  // Handler for period click\n  onPeriodClick(period) {\n    // Switch to period if different\n    if (period.id !== this.props.period.id) {\n      this.props.onChange(period);\n    }\n\n    // Stop animation if running\n    this.stop();\n  }\n}\n_defineProperty(Timeline, \"contextTypes\", {\n  map: PropTypes.object\n});\n_defineProperty(Timeline, \"propTypes\", {\n  period: PropTypes.object.isRequired,\n  periodId: PropTypes.string.isRequired,\n  periods: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired\n});\nexport default Timeline;","// extracted by mini-css-extract-plugin\nexport default {\"periodName\":\"PeriodName_periodName__JERjO\",\"period\":\"PeriodName_period__2BFNe map_box__WtUb7\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/PeriodName.module.css';\nconst PeriodName = _ref => {\n  let {\n    period,\n    isTimeline\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `dhis2-map-period ${styles.periodName}`,\n    style: isTimeline ? {\n      bottom: 86\n    } : null\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.period\n  }, period));\n};\nPeriodName.propTypes = {\n  period: PropTypes.string.isRequired,\n  isTimeline: PropTypes.bool\n};\nexport default PeriodName;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React, { Fragment } from 'react';\nimport { RENDERING_STRATEGY_SINGLE, RENDERING_STRATEGY_TIMELINE, THEMATIC_CHOROPLETH, THEMATIC_BUBBLE, BOUNDARY_LAYER, ORG_UNIT_COLOR, ORG_UNIT_RADIUS_SMALL, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { getPeriodFromFilters } from '../../../util/analytics.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Timeline from '../../periods/Timeline.js';\nimport { poleOfInaccessibility } from '../MapApi.js';\nimport PeriodName from '../PeriodName.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\n\n// Translating polygons to points using poleOfInaccessibility from maps-gl\nconst polygonsToPoints = features => features.map(feature => ({\n  ...feature,\n  geometry: {\n    type: 'Point',\n    coordinates: poleOfInaccessibility(feature.geometry)\n  }\n}));\nclass ThematicLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"onPeriodChange\", period => this.setState({\n      period\n    }));\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      labels,\n      valuesByPeriod,\n      renderingStrategy = RENDERING_STRATEGY_SINGLE,\n      thematicMapType = THEMATIC_CHOROPLETH,\n      noDataColor\n    } = this.props;\n    const {\n      period\n    } = this.state;\n    const bubbleMap = thematicMapType === THEMATIC_BUBBLE;\n    let periodData = bubbleMap ? polygonsToPoints(data) : data;\n    if (renderingStrategy !== RENDERING_STRATEGY_SINGLE) {\n      const values = valuesByPeriod[period.id] || {};\n      periodData = periodData.map(f => ({\n        ...f,\n        properties: {\n          ...f.properties,\n          ...values[f.id],\n          ...(f.properties.hasAdditionalGeometry && f.geometry.type === 'Point' && {\n            color: ORG_UNIT_COLOR,\n            radius: ORG_UNIT_RADIUS_SMALL\n          })\n        }\n      }));\n\n      // Remove org unit features if noDataColor is missing\n      if (!noDataColor) {\n        periodData = periodData.filter(feature => values[feature.id] !== undefined);\n      }\n    }\n    const map = this.context.map;\n    const filteredData = filterData(periodData, dataFilters);\n    const config = {\n      type: 'choropleth',\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      hoverLabel: '{name} ({value})',\n      color: noDataColor,\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this)\n    };\n    if (labels) {\n      config.label = this.props.labelTemplate || LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = getLabelStyle(this.props);\n    }\n\n    // Add boundaries as a separate layer\n    if (bubbleMap) {\n      this.layer = map.createLayer({\n        type: 'group',\n        id,\n        index,\n        opacity,\n        isVisible\n      });\n      this.layer.addLayer({\n        type: BOUNDARY_LAYER,\n        data: data.map(f => ({\n          ...f,\n          properties: {\n            ...f.properties,\n            style: {\n              color: ORG_UNIT_COLOR,\n              weight: 0.5\n            }\n          }\n        })),\n        style: {}\n      });\n      this.layer.addLayer(config);\n    } else {\n      this.layer = map.createLayer(config);\n    }\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n\n  // Set initial period\n  setPeriod(callback) {\n    const {\n      period,\n      periods,\n      renderingStrategy = RENDERING_STRATEGY_SINGLE\n    } = this.props;\n    if (!period && !periods) {\n      return;\n    }\n    const initialPeriod = {\n      period: renderingStrategy === RENDERING_STRATEGY_SINGLE ? null : period || periods[0]\n    };\n\n    // setPeriod without callback is called from the constructor (unmounted)\n    if (!callback) {\n      this.state = initialPeriod;\n    } else {\n      this.setState(initialPeriod, callback);\n    }\n  }\n  getPopup() {\n    const {\n      columns,\n      aggregationType,\n      legend\n    } = this.props;\n    const {\n      popup,\n      period\n    } = this.state;\n    const {\n      coordinates,\n      feature\n    } = popup;\n    const {\n      id,\n      name,\n      value\n    } = feature.properties;\n    const indicator = columns[0].items[0].name || '';\n    const periodName = period ? period.name : legend.period;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: \"dhis2-map-popup-orgunit\"\n    }, /*#__PURE__*/React.createElement(\"em\", null, name), /*#__PURE__*/React.createElement(\"div\", null, indicator), /*#__PURE__*/React.createElement(\"div\", null, periodName), /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Value'), \": \", value), aggregationType && aggregationType !== 'DEFAULT' && /*#__PURE__*/React.createElement(\"div\", null, aggregationType));\n  }\n  render() {\n    const {\n      periods,\n      renderingStrategy,\n      filters\n    } = this.props;\n    const {\n      period,\n      popup\n    } = this.state;\n    const {\n      id\n    } = getPeriodFromFilters(filters) || {};\n    return /*#__PURE__*/React.createElement(Fragment, null, renderingStrategy === RENDERING_STRATEGY_TIMELINE && period && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(PeriodName, {\n      period: period.name,\n      isTimeline: true\n    }), /*#__PURE__*/React.createElement(Timeline, {\n      periodId: id,\n      period: period,\n      periods: periods,\n      onChange: this.onPeriodChange\n    })), popup && this.getPopup());\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n}\nexport default ThematicLayer;","import { useConfig } from '@dhis2/app-runtime';\nexport const BaseUrlShim = _ref => {\n  let {\n    children\n  } = _ref;\n  const {\n    baseUrl,\n    apiVersion\n  } = useConfig();\n  return children({\n    baseUrl: `${baseUrl}/api/${apiVersion}`\n  });\n};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { TEI_COLOR, TEI_RADIUS, TEI_RELATIONSHIP_LINE_COLOR, TEI_RELATED_COLOR, TEI_RELATED_RADIUS } from '../../../constants/layers.js';\nimport { apiFetchWithBaseUrl } from '../../../util/api.js';\nimport { formatTime } from '../../../util/helpers.js';\nimport { BaseUrlShim } from '../../BaseUrlShim.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\nconst getCentroid = points => {\n  const totals = points.reduce((accum, point) => {\n    accum[0] += point[0];\n    accum[1] += point[1];\n    return accum;\n  }, [0, 0]);\n  return [totals[0] / points.length, totals[1] / points.length];\n};\nconst fetchTEI = async (id, fieldsString, baseUrl) => {\n  const data = await apiFetchWithBaseUrl({\n    url: `/trackedEntityInstances/${id}?fields=${fieldsString}`,\n    baseUrl\n  });\n  return data;\n};\nconst geomToCentroid = (type, coords) => {\n  switch (type) {\n    case 'POINT':\n      return JSON.parse(coords);\n    case 'POLYGON':\n      // TODO: Support multipolygon / use turf\n      return getCentroid(JSON.parse(coords)[0]);\n    default:\n      return null;\n  }\n};\nconst makeRelationshipGeometry = _ref => {\n  let {\n    from,\n    to\n  } = _ref;\n  const fromGeom = geomToCentroid(from.featureType, from.coordinates);\n  const toGeom = geomToCentroid(to.featureType, to.coordinates);\n  if (!fromGeom || !toGeom) {\n    // console.error('Invalid relationship geometries', from, to);\n    return null;\n  }\n  return {\n    type: 'Feature',\n    geometry: {\n      type: 'LineString',\n      coordinates: [fromGeom, toGeom]\n    },\n    properties: {}\n  };\n};\nconst makeRelationshipLayer = (relationships, color, weight) => {\n  return {\n    type: 'geoJson',\n    data: relationships.map(makeRelationshipGeometry).filter(x => !!x),\n    style: {\n      color,\n      weight\n    }\n  };\n};\nclass TrackedEntityLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      relationships,\n      secondaryData,\n      eventPointColor,\n      eventPointRadius,\n      areaRadius,\n      relatedPointColor,\n      relatedPointRadius,\n      relationshipLineColor\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    const color = eventPointColor || TEI_COLOR;\n    const radius = eventPointRadius || TEI_RADIUS;\n    const config = {\n      type: 'geoJson',\n      data,\n      style: {\n        color,\n        weight: 1,\n        radius\n      },\n      onClick: this.onEntityClick.bind(this)\n    };\n    if (areaRadius) {\n      config.buffer = areaRadius;\n      config.bufferStyle = {\n        color,\n        weight: 1,\n        opacity: 0.2,\n        fillOpacity: 0.1\n      };\n    }\n\n    // Create and add layer based on config object\n    const group = map.createLayer({\n      type: 'group',\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n    if (relationships) {\n      const secondaryConfig = {\n        type: 'geoJson',\n        data: secondaryData,\n        style: {\n          color: relatedPointColor || TEI_RELATED_COLOR,\n          weight: 1,\n          radius: relatedPointRadius || TEI_RELATED_RADIUS\n        },\n        onClick: this.onEntityClick.bind(this)\n      };\n      const relationshipConfig = makeRelationshipLayer(relationships, relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR, 1);\n      group.addLayer(relationshipConfig);\n      group.addLayer(secondaryConfig);\n    }\n    group.addLayer(config);\n    this.layer = group;\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      data\n    } = this.state.popup;\n    const {\n      attributes = [],\n      lastUpdated\n    } = data;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      onClose: this.onPopupClose\n    }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, attributes.map(_ref2 => {\n      let {\n        name,\n        value\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: name\n      }, /*#__PURE__*/React.createElement(\"th\", null, name, \":\"), /*#__PURE__*/React.createElement(\"td\", null, value));\n    }), /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Last updated'), \":\"), /*#__PURE__*/React.createElement(\"td\", null, formatTime(lastUpdated))))));\n  }\n  render() {\n    return this.state.popup ? this.getPopup() : null;\n  }\n  async onEntityClick(evt) {\n    const {\n      feature,\n      coordinates\n    } = evt;\n    const data = await fetchTEI(feature.properties.id, 'lastUpdated,attributes[displayName~rename(name),value],relationships', this.props.baseUrl);\n    this.setState({\n      popup: {\n        feature,\n        coordinates,\n        data\n      }\n    });\n  }\n}\nconst TrackedEntityLayerWithBaseUrl = props => /*#__PURE__*/React.createElement(BaseUrlShim, null, _ref3 => {\n  let {\n    baseUrl\n  } = _ref3;\n  return /*#__PURE__*/React.createElement(TrackedEntityLayer, _extends({\n    baseUrl: baseUrl\n  }, props));\n});\nexport default TrackedEntityLayerWithBaseUrl;","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"Map_map__gZqCB\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component, Fragment } from 'react';\nimport { onFullscreenChange } from '../../util/map.js';\nimport BasemapLayer from './layers/BasemapLayer.js';\nimport EarthEngineLayer from './layers/earthEngine/EarthEngineLayer.js';\nimport EventLayer from './layers/EventLayer.js';\nimport ExternalLayer from './layers/ExternalLayer.js';\nimport FacilityLayer from './layers/FacilityLayer.js';\nimport Layer from './layers/Layer.js';\nimport OrgUnitLayer from './layers/OrgUnitLayer.js';\nimport ThematicLayer from './layers/ThematicLayer.js';\nimport TrackedEntityLayer from './layers/TrackedEntityLayer.js';\nimport mapApi, { controlTypes } from './MapApi.js';\nimport Popup from './Popup.js';\nimport styles from './styles/Map.module.css';\nconst layerType = {\n  event: EventLayer,\n  trackedEntity: TrackedEntityLayer,\n  facility: FacilityLayer,\n  thematic: ThematicLayer,\n  orgUnit: OrgUnitLayer,\n  earthEngine: EarthEngineLayer,\n  external: ExternalLayer\n};\nclass Map extends Component {\n  constructor(props, context) {\n    super(props, context);\n    _defineProperty(this, \"state\", {});\n    _defineProperty(this, \"onRightClick\", evt => {\n      const [x, y] = evt.position;\n      const {\n        left,\n        top\n      } = this.map.getContainer().getBoundingClientRect();\n      this.props.openContextMenu({\n        ...evt,\n        position: [x, y],\n        offset: [left, top]\n      });\n    });\n    _defineProperty(this, \"onMapReady\", map => this.setState({\n      map\n    }));\n    // From built-in fullscreen control\n    _defineProperty(this, \"onFullscreenChange\", _ref => {\n      let {\n        isFullscreen\n      } = _ref;\n      onFullscreenChange(this.map, isFullscreen);\n    });\n    const {\n      isPlugin\n    } = props;\n    const _map = mapApi({\n      scrollZoom: !isPlugin\n    });\n    if (isPlugin) {\n      _map.toggleMultiTouch(true);\n      _map.on('fullscreenchange', this.onFullscreenChange);\n    } else {\n      _map.on('contextmenu', this.onRightClick, this);\n    }\n    this.map = _map;\n    _map.on('ready', this.onMapReady);\n  }\n  getChildContext() {\n    return {\n      map: this.map,\n      isPlugin: this.props.isPlugin\n    };\n  }\n  componentDidMount() {\n    const {\n      controls,\n      bounds,\n      latitude,\n      longitude,\n      zoom\n    } = this.props;\n    const {\n      map\n    } = this;\n\n    // Append map container to DOM\n    this.node.appendChild(map.getContainer());\n    map.resize();\n\n    // Add map controls\n    if (controls) {\n      controls.filter(control => controlTypes.includes(control.type)).forEach(control => map.addControl(control));\n    }\n    const layerBounds = map.getLayersBounds();\n    if (Array.isArray(layerBounds)) {\n      map.fitBounds(layerBounds);\n    } else if (bounds) {\n      map.fitBounds(bounds);\n    } else if (latitude && longitude && zoom) {\n      map.setView([longitude, latitude], zoom);\n    } else {\n      map.fitWorld();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      resizeCount,\n      isFullscreen,\n      isPlugin\n    } = this.props;\n    if (resizeCount !== prevProps.resizeCount) {\n      this.map.resize();\n    }\n\n    // From map plugin resize method\n    if (isPlugin && isFullscreen !== prevProps.isFullscreen) {\n      onFullscreenChange(this.map, isFullscreen);\n    }\n  }\n\n  // Remove map\n  componentWillUnmount() {\n    if (this.map) {\n      this.map.off('ready', this.onMapReady);\n      this.map.remove();\n      delete this.map;\n    }\n  }\n  render() {\n    const {\n      basemap,\n      layers,\n      feature,\n      coordinatePopup: coordinates,\n      closeCoordinatePopup,\n      openContextMenu,\n      setAggregations\n    } = this.props;\n    const {\n      map\n    } = this.state;\n    const overlays = layers.filter(layer => layer.isLoaded);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: node => this.node = node,\n      className: styles.map\n    }, map && /*#__PURE__*/React.createElement(Fragment, null, overlays.map((config, index) => {\n      const Overlay = layerType[config.layer] || Layer;\n      const highlight = feature && feature.layerId === config.id ? feature : null;\n      return /*#__PURE__*/React.createElement(Overlay, _extends({\n        key: config.id,\n        index: overlays.length - index,\n        feature: highlight,\n        openContextMenu: openContextMenu,\n        setAggregations: setAggregations\n      }, config));\n    }), /*#__PURE__*/React.createElement(BasemapLayer, basemap), coordinates && /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      onClose: closeCoordinatePopup\n    }, i18n.t('Longitude'), \":\", ' ', coordinates[0].toFixed(6), /*#__PURE__*/React.createElement(\"br\", null), i18n.t('Latitude'), \":\", ' ', coordinates[1].toFixed(6))));\n  }\n}\n_defineProperty(Map, \"propTypes\", {\n  openContextMenu: PropTypes.func.isRequired,\n  basemap: PropTypes.object,\n  bounds: PropTypes.array,\n  closeCoordinatePopup: PropTypes.func,\n  controls: PropTypes.array,\n  coordinatePopup: PropTypes.array,\n  feature: PropTypes.object,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  latitude: PropTypes.number,\n  layers: PropTypes.array,\n  longitude: PropTypes.number,\n  resizeCount: PropTypes.number,\n  setAggregations: PropTypes.func,\n  zoom: PropTypes.number\n});\n_defineProperty(Map, \"defaultProps\", {\n  isPlugin: false\n});\n_defineProperty(Map, \"childContextTypes\", {\n  map: PropTypes.object.isRequired,\n  isPlugin: PropTypes.bool.isRequired\n});\nexport default Map;","import Layer from './Layer.js';\nexport default class ExternalLayer extends Layer {\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      config\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    this.layer = map.createLayer({\n      id,\n      index,\n      opacity,\n      isVisible,\n      ...config\n    });\n    map.addLayer(this.layer);\n  }\n}","// extracted by mini-css-extract-plugin\nexport default {\"mapItem\":\"MapItem_mapItem__b6yfQ\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { onFullscreenChange } from '../../util/map.js';\nimport mapApi from './MapApi.js';\nimport styles from './styles/MapItem.module.css';\nclass MapItem extends PureComponent {\n  constructor(props, context) {\n    super(props, context);\n    _defineProperty(this, \"state\", {});\n    _defineProperty(this, \"onMapReady\", map => this.setState({\n      map\n    }));\n    const {\n      isPlugin\n    } = props;\n    this.map = mapApi({\n      attributionControl: false,\n      scrollZoom: !isPlugin\n    });\n    if (isPlugin) {\n      this.map.toggleMultiTouch(true);\n    }\n    this.map.on('ready', this.onMapReady);\n  }\n  getChildContext() {\n    return {\n      map: this.map,\n      isPlugin: this.props.isPlugin\n    };\n  }\n  componentDidMount() {\n    const {\n      layerId,\n      index,\n      setMapControls\n    } = this.props;\n    const {\n      map\n    } = this;\n    this.node.appendChild(map.getContainer());\n    this.fitLayerBounds();\n    map.sync(layerId);\n\n    // Add map controls if first map\n    if (index == 0) {\n      setMapControls(map);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      count,\n      isFullscreen,\n      isPlugin\n    } = this.props;\n    if (count !== prevProps.count) {\n      this.fitLayerBounds();\n    }\n    if (isPlugin && isFullscreen !== prevProps.isFullscreen) {\n      onFullscreenChange(this.map, isFullscreen);\n    }\n    this.map.resize();\n  }\n  componentWillUnmount() {\n    this.map.off('ready', this.onMapReady);\n    this.map.unsync(this.props.layerId);\n    this.map.remove();\n    delete this.map;\n  }\n  render() {\n    const {\n      count,\n      children\n    } = this.props;\n    const {\n      map\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: node => this.node = node,\n      className: styles.mapItem,\n      style: {\n        width: count === 4 ? '50%' : '33.3333%'\n      }\n    }, map && children);\n  }\n\n  // Zoom to layers bounds on mount\n  fitLayerBounds() {\n    this.map.resize();\n    const bounds = this.map.getLayersBounds();\n    if (bounds) {\n      this.map.fitBounds(bounds);\n    } else {\n      this.map.fitWorld();\n    }\n  }\n}\n_defineProperty(MapItem, \"childContextTypes\", {\n  map: PropTypes.object.isRequired,\n  isPlugin: PropTypes.bool.isRequired\n});\n_defineProperty(MapItem, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  count: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n  layerId: PropTypes.string.isRequired,\n  setMapControls: PropTypes.func.isRequired,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool\n});\n_defineProperty(MapItem, \"defaultProps\", {\n  isPlugin: false\n});\nexport default MapItem;","// extracted by mini-css-extract-plugin\nexport default {\"splitView\":\"SplitView_splitView__BQU6v\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport BasemapLayer from './layers/BasemapLayer.js';\nimport ThematicLayer from './layers/ThematicLayer.js';\nimport MapItem from './MapItem.js';\nimport PeriodName from './PeriodName.js';\nimport styles from './styles/SplitView.module.css';\nconst SplitView = _ref => {\n  let {\n    isPlugin,\n    basemap,\n    layer,\n    feature,\n    controls,\n    openContextMenu,\n    isFullscreen,\n    interpretationModalOpen\n  } = _ref;\n  const [showFullscreen, setShowFullscreen] = useState();\n  const [map, setMap] = useState(); // Called from map child\n  const containerRef = useRef();\n\n  // From built-in fullscreen control\n  const onFullscreenChange = useCallback(_ref2 => {\n    let {\n      isFullscreen\n    } = _ref2;\n    return setShowFullscreen(isFullscreen);\n  }, []);\n  useEffect(() => {\n    if (map && controls && containerRef.current) {\n      controls.forEach(control => {\n        map.addControl(control);\n        containerRef.current.append(map.getControlContainer(control.type));\n      });\n    }\n  }, [map, controls, containerRef]);\n  useEffect(() => {\n    if (map && isPlugin) {\n      map.on('fullscreenchange', onFullscreenChange);\n    }\n    return () => {\n      if (map && isPlugin) {\n        map.off('fullscreenchange', onFullscreenChange);\n      }\n    };\n  }, [map, isPlugin, onFullscreenChange]);\n  useEffect(() => {\n    // From map plugin resize method\n    setShowFullscreen(isFullscreen);\n  }, [isFullscreen]);\n  const {\n    id,\n    periods = []\n  } = layer;\n  return !interpretationModalOpen ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: cx('dhis2-map-split-view', styles.splitView)\n  }, periods.map((period, index) => /*#__PURE__*/React.createElement(MapItem, {\n    key: period.id,\n    index: index,\n    count: periods.length,\n    layerId: id,\n    setMapControls: setMap,\n    isPlugin: isPlugin,\n    isFullscreen: showFullscreen\n  }, /*#__PURE__*/React.createElement(BasemapLayer, basemap), /*#__PURE__*/React.createElement(ThematicLayer, _extends({\n    index: 1,\n    period: period,\n    feature: feature\n  }, layer, {\n    openContextMenu: openContextMenu\n  })), /*#__PURE__*/React.createElement(PeriodName, {\n    period: period.name\n  })))) : null;\n};\nSplitView.propTypes = {\n  layer: PropTypes.object.isRequired,\n  openContextMenu: PropTypes.func.isRequired,\n  basemap: PropTypes.object,\n  controls: PropTypes.array,\n  feature: PropTypes.object,\n  interpretationModalOpen: PropTypes.bool,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool\n};\nSplitView.defaultProps = {\n  openContextMenu: () => {}\n};\nexport default SplitView;","import { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { getSplitViewLayer } from '../../util/helpers.js';\nimport { getMapControls } from '../../util/mapControls.js';\nimport BaseUrlProvider from '../BaseUrlProvider.js';\nimport Map from './Map.js';\nimport SplitView from './SplitView.js';\n\n// Shared component between app and plugin\nconst MapView = props => {\n  const {\n    isPlugin,\n    isFullscreen,\n    basemap,\n    layers,\n    controls,\n    feature,\n    bounds,\n    coordinatePopup,\n    interpretationModalOpen,\n    closeCoordinatePopup,\n    openContextMenu,\n    setAggregations,\n    resizeCount\n  } = props;\n  const splitViewLayer = getSplitViewLayer(layers);\n  const isSplitView = !!splitViewLayer;\n  const mapControls = useMemo(() => getMapControls(isPlugin, isSplitView, controls), [isPlugin, isSplitView, controls]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, basemap.id === undefined ? /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))) : /*#__PURE__*/React.createElement(React.Fragment, null, isSplitView ? /*#__PURE__*/React.createElement(SplitView, {\n    isPlugin: isPlugin,\n    isFullscreen: isFullscreen,\n    basemap: basemap,\n    layer: splitViewLayer,\n    controls: mapControls,\n    feature: feature,\n    interpretationModalOpen: interpretationModalOpen,\n    openContextMenu: openContextMenu,\n    resizeCount: resizeCount\n  }) : /*#__PURE__*/React.createElement(BaseUrlProvider, null, /*#__PURE__*/React.createElement(Map, {\n    isPlugin: isPlugin,\n    isFullscreen: isFullscreen,\n    basemap: basemap,\n    layers: [...layers].reverse(),\n    bounds: bounds,\n    controls: mapControls,\n    feature: feature,\n    coordinatePopup: coordinatePopup,\n    closeCoordinatePopup: closeCoordinatePopup,\n    openContextMenu: openContextMenu,\n    setAggregations: setAggregations,\n    resizeCount: resizeCount\n  }))));\n};\nMapView.propTypes = {\n  basemap: PropTypes.object,\n  bounds: PropTypes.array,\n  closeCoordinatePopup: PropTypes.func,\n  controls: PropTypes.array,\n  coordinatePopup: PropTypes.array,\n  feature: PropTypes.object,\n  interpretationModalOpen: PropTypes.bool,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  layers: PropTypes.array,\n  openContextMenu: PropTypes.func,\n  resizeCount: PropTypes.number,\n  setAggregations: PropTypes.func\n};\nexport default MapView;","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"ContextMenu_anchor__QxrcP\",\"menu\":\"ContextMenu_menu__lWeSg\"};","import i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, Tooltip, IconArrowUp16, IconArrowDown16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { ConditionalWrapper } from '../core/index.js';\nimport styles from './styles/ContextMenu.module.css';\nconst ContextMenu = props => {\n  const {\n    position,\n    offset,\n    feature,\n    container,\n    isSplitView,\n    isOffline,\n    onDrill,\n    onClose\n  } = props;\n  const anchorRef = useRef();\n  const [anchorPosition, setAnchorPosition] = useState();\n  useEffect(() => {\n    if (position) {\n      const [x, y] = position;\n      if (!isSplitView) {\n        setAnchorPosition({\n          left: x,\n          top: y\n        });\n      } else {\n        const [mapLeft, mapTop] = offset;\n        const {\n          left,\n          top\n        } = container.getBoundingClientRect();\n        setAnchorPosition({\n          left: mapLeft - left + x,\n          top: mapTop - top + y\n        });\n      }\n    }\n  }, [position, offset, container, isSplitView]);\n  const {\n    hasCoordinatesUp,\n    hasCoordinatesDown\n  } = feature.properties;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.anchor,\n    style: anchorPosition\n  }), /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: onClose\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(ConditionalWrapper, {\n    condition: isOffline,\n    wrapper: children => /*#__PURE__*/React.createElement(Tooltip, {\n      content: i18n.t('Not available offline')\n    }, children)\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill up one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowUp16, null),\n    disabled: !hasCoordinatesUp || isOffline,\n    onClick: () => onDrill('up')\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill down one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowDown16, null),\n    disabled: !hasCoordinatesDown || isOffline,\n    onClick: () => onDrill('down')\n  }))))));\n};\nContextMenu.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onDrill: PropTypes.func.isRequired,\n  container: PropTypes.instanceOf(Element),\n  feature: PropTypes.object,\n  isOffline: PropTypes.bool,\n  isSplitView: PropTypes.bool,\n  offset: PropTypes.array,\n  position: PropTypes.array\n};\nexport default ContextMenu;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { guideLength, textPadding } from './Bubbles.js';\nconst Bubble = _ref => {\n  let {\n    radius,\n    maxRadius,\n    text,\n    textAlign,\n    color,\n    stroke,\n    pattern\n  } = _ref;\n  const leftAlign = textAlign === 'left';\n  const x = maxRadius;\n  const y = maxRadius * 2 - radius;\n  const x2 = leftAlign ? x - maxRadius - guideLength : x + maxRadius + guideLength;\n  const y2 = maxRadius * 2 - radius * 2;\n  const textX = x2 + (leftAlign ? -textPadding : textPadding);\n  const textAnchor = leftAlign ? 'end' : 'start';\n  return /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: x,\n    cy: y,\n    r: radius,\n    stroke: stroke || '#000',\n    style: {\n      fill: pattern ? `url(#${pattern})` : color || 'none',\n      strokeWidth: 0.5\n    }\n  }), text && /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"line\", {\n    x1: x,\n    x2: x2,\n    y1: y2,\n    y2: y2,\n    stroke: \"black\",\n    style: {\n      strokeDasharray: '2, 2',\n      strokeWidth: 0.5\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    x: textX,\n    y: y2,\n    textAnchor: textAnchor,\n    alignmentBaseline: \"middle\",\n    style: {\n      fontSize: 12\n    }\n  }, text)));\n};\nBubble.propTypes = {\n  maxRadius: PropTypes.number.isRequired,\n  radius: PropTypes.number.isRequired,\n  color: PropTypes.string,\n  pattern: PropTypes.string,\n  stroke: PropTypes.string,\n  text: PropTypes.string,\n  textAlign: PropTypes.oneOf(['left', 'right'])\n};\nexport default Bubble;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { scaleSqrt } from 'd3-scale';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getContrastColor } from '../../util/colors.js';\nimport { getLongestTextLength } from '../../util/helpers.js';\nimport Bubble from './Bubble.js';\nconst style = {\n  paddingTop: 10\n};\nconst legendWidth = 245;\nconst digitWidth = 6.8;\nexport const guideLength = 16;\nexport const textPadding = 4;\nconst Bubbles = _ref => {\n  let {\n    radiusLow,\n    radiusHigh,\n    color,\n    classes\n  } = _ref;\n  const height = radiusHigh * 2 + 4;\n  const scale = scaleSqrt().range([radiusLow, radiusHigh]);\n  const radiusMid = scale(0.5);\n  if (isNaN(radiusLow) || isNaN(radiusHigh)) {\n    return null;\n  }\n  let bubbles = [];\n\n  // If color legend\n  if (Array.isArray(classes) && classes.length) {\n    const startValue = classes[0].startValue;\n    const endValue = classes[classes.length - 1].endValue;\n    const itemScale = scale.domain([startValue, endValue]);\n    bubbles = [...classes].reverse().map(c => ({\n      radius: itemScale(c.endValue),\n      maxRadius: radiusHigh,\n      color: c.color,\n      text: String(c.endValue)\n    }));\n\n    // Add the smallest bubble for the lowest value\n    bubbles.push({\n      radius: itemScale(startValue),\n      maxRadius: radiusHigh,\n      text: String(startValue)\n    });\n  } else {\n    // If single color\n    const stroke = color && getContrastColor(color);\n    bubbles = [{\n      radius: radiusHigh,\n      maxRadius: radiusHigh,\n      color,\n      stroke,\n      text: i18n.t('Max')\n    }, {\n      radius: radiusMid,\n      maxRadius: radiusHigh,\n      color,\n      stroke,\n      text: i18n.t('Mid')\n    }, {\n      radius: radiusLow,\n      maxRadius: radiusHigh,\n      color,\n      stroke,\n      text: i18n.t('Min')\n    }];\n  }\n\n  // Calculate the pixel length of the longest number\n  let textLength = Math.ceil(Math.max(getLongestTextLength(classes, 'startValue'), getLongestTextLength(classes, 'endValue')) * digitWidth);\n\n  // Calculate the total length if numbers are alternate on each side\n  const alternateLength = (radiusHigh + guideLength + textPadding + textLength) * 2;\n  let smallestGap = bubbles.reduce((prev, curr, i) => {\n    const gap = prev.radius - curr.radius;\n    const smallestGap = prev.gap === undefined || gap < prev.gap ? gap : prev.gap;\n    return i === bubbles.length - 1 ? Math.round(smallestGap * 2) : {\n      radius: curr.radius,\n      gap: smallestGap\n    };\n  });\n  const alternateFit = alternateLength < legendWidth;\n  const alternate = alternateFit && smallestGap > 5 && smallestGap < 12;\n  if (!alternateFit) {\n    smallestGap = smallestGap / 2;\n  }\n\n  // Too cramped to show number for each bubble\n  if (smallestGap < 6) {\n    const [maxBubble] = bubbles;\n    const minBubble = bubbles[bubbles.length - 1];\n    const gap = maxBubble.radius - minBubble.radius;\n    const showNumbers = [0]; // Always show largest number\n\n    if (gap > 6) {\n      showNumbers.push(bubbles.length - 1);\n    }\n    if (gap > 15) {\n      const midRadius = minBubble.radius + gap / 2;\n\n      // Find the closest bubble above the mid radius\n      const midBubble = bubbles.reduce((prev, curr) => curr.radius >= midRadius && curr.radius - midRadius < prev.radius - midRadius ? curr : prev);\n      showNumbers.push(bubbles.indexOf(midBubble));\n    }\n    bubbles.forEach((b, i) => {\n      if (!showNumbers.includes(i)) {\n        delete b.text;\n      }\n    });\n  }\n  textLength = Math.ceil(getLongestTextLength(bubbles, 'text') * digitWidth);\n  const offset = textLength + guideLength + textPadding;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: legendWidth,\n    height: height + 20\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: `translate(${alternate ? offset : '2'} 10)`\n  }, bubbles.map((bubble, i) => /*#__PURE__*/React.createElement(Bubble, _extends({\n    key: i\n  }, bubble, {\n    textAlign: alternate && i % 2 == 0 ? 'left' : 'right'\n  }))))));\n};\nBubbles.propTypes = {\n  radiusHigh: PropTypes.number.isRequired,\n  radiusLow: PropTypes.number.isRequired,\n  classes: PropTypes.array,\n  color: PropTypes.string\n};\nexport default Bubbles;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"Legend_legend__b62xP\",\"description\":\"Legend_description__d1w-g\",\"period\":\"Legend_period__5Y7TM\",\"legendImage\":\"Legend_legendImage__s5QrO\",\"filters\":\"Legend_filters__aEows\",\"group\":\"Legend_group__iPRiA\",\"unit\":\"Legend_unit__NMYIN\",\"explanation\":\"Legend_explanation__1cQVu\",\"source\":\"Legend_source__kRWdo\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Bubbles from './Bubbles.js';\nimport LegendItem from './LegendItem.js';\nimport styles from './styles/Legend.module.css';\n\n// Rendering a layer legend in the left drawer, on a map (download) or in a control (plugin)\nconst Legend = _ref => {\n  let {\n    description,\n    filters,\n    groups,\n    unit,\n    items,\n    bubbles,\n    explanation,\n    url,\n    source,\n    sourceUrl\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"dl\", {\n    className: styles.legend,\n    \"data-test\": \"layerlegend\"\n  }, description && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, description), groups && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.group\n  }, groups.length > 1 ? i18n.t('Groups') : i18n.t('Group'), groups.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: id\n    }, name);\n  })), unit && items && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.unit\n  }, unit), bubbles ? /*#__PURE__*/React.createElement(Bubbles, _extends({}, bubbles, {\n    classes: items\n  })) : Array.isArray(items) && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, items.map((item, index) => /*#__PURE__*/React.createElement(LegendItem, _extends({}, item, {\n    key: `item-${index}`\n  }))))), url && /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.legendImage,\n    src: url\n  }), Array.isArray(filters) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filters\n  }, /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Filters'), \":\"), filters.map((filter, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index\n  }, filter))), Array.isArray(explanation) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.explanation\n  }, explanation.map((expl, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index\n  }, expl))), source && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.source\n  }, i18n.t('Source'), \":\\xA0\", sourceUrl ? /*#__PURE__*/React.createElement(\"a\", {\n    href: sourceUrl,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, source) : /*#__PURE__*/React.createElement(\"span\", null, source)));\n};\nLegend.propTypes = {\n  bubbles: PropTypes.shape({\n    radiusHigh: PropTypes.number.isRequired,\n    radiusLow: PropTypes.number.isRequired,\n    color: PropTypes.string\n  }),\n  description: PropTypes.string,\n  explanation: PropTypes.array,\n  filters: PropTypes.array,\n  groups: PropTypes.array,\n  items: PropTypes.array,\n  source: PropTypes.string,\n  sourceUrl: PropTypes.string,\n  unit: PropTypes.string,\n  url: PropTypes.string\n};\nexport default Legend;","import PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport LayerLegend from '../legend/Legend.js';\n\n// Renders a legend with alerts for one map layer\nconst LegendLayer = _ref => {\n  let {\n    id,\n    legend,\n    alerts = []\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: id\n  }, legend && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"dhis2-map-legend-title\"\n  }, legend.title, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"dhis2-map-legend-period\"\n  }, legend.period)), /*#__PURE__*/React.createElement(LayerLegend, legend)), alerts.map((alert, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"dhis2-map-legend-alert\"\n  }, alert.message)));\n};\nLegendLayer.propTypes = {\n  id: PropTypes.string.isRequired,\n  alerts: PropTypes.array,\n  data: PropTypes.array,\n  layer: PropTypes.string,\n  legend: PropTypes.object,\n  serverCluster: PropTypes.bool\n};\nexport default LegendLayer;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport LegendLayer from './LegendLayer.js';\nimport './styles/Legend.css';\n\n// Renders a legend for all map layers\nconst Legend = _ref => {\n  let {\n    layers\n  } = _ref;\n  const [isOpen, toggleOpen] = useState(false);\n  const legendLayers = layers.filter(layer => layer.legend || layer.alerts).reverse(); // Show top layer first\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend\"\n  }, isOpen ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend-content\",\n    onMouseLeave: () => toggleOpen(false)\n  }, legendLayers.map(layer => /*#__PURE__*/React.createElement(LegendLayer, _extends({\n    key: layer.id\n  }, layer)))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend-button\",\n    title: i18n.t('Legend'),\n    onMouseEnter: () => toggleOpen(true)\n  }));\n};\nLegend.propTypes = {\n  layers: PropTypes.array.isRequired\n};\nexport default Legend;","// extracted by mini-css-extract-plugin\nexport default {\"mapName\":\"MapName_mapName__gKGij\",\"name\":\"MapName_name__bTvV2 map_box__WtUb7\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/MapName.module.css';\nconst MapName = _ref => {\n  let {\n    name\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mapName\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.name\n  }, name));\n};\nMapName.propTypes = {\n  name: PropTypes.string\n};\nexport default MapName;","// extracted by mini-css-extract-plugin\nexport default {\"plugin\":\"Plugin_plugin__LnRr5\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useOnlineStatus } from '@dhis2/app-runtime';\nimport { CssReset, CssVariables, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { forwardRef, useState, useCallback, useEffect } from 'react';\nimport { drillUpDown } from '../../util/map.js';\nimport LayerLoader from '../loaders/LayerLoader.js';\nimport MapView from '../map/MapView.js';\nimport ContextMenu from './ContextMenu.js';\nimport Legend from './Legend.js';\nimport MapName from './MapName.js';\nimport styles from './styles/Plugin.module.css';\nconst defaultBounds = [[-18.7, -34.9], [50.2, 35.9]];\nconst Plugin = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    offline\n  } = useOnlineStatus();\n  const [layers, setLayers] = useState([]);\n  const [contextMenu, setContextMenu] = useState();\n  const [resizeCount, setResizeCount] = useState(0);\n  const {\n    name,\n    basemap,\n    mapViews,\n    hideTitle,\n    controls,\n    getResizeFunction\n  } = props;\n  const onResize = () => setResizeCount(state => state + 1);\n  const onLayerLoad = useCallback(layer => setLayers(layers => layers.map(l => layer.id === l.id ? layer : l)), []);\n  useEffect(() => {\n    setLayers(mapViews);\n  }, [mapViews]);\n\n  // TODO: Remove when map.js is refactored\n  useEffect(() => {\n    if (getResizeFunction) {\n      getResizeFunction(onResize);\n    }\n  }, [getResizeFunction]);\n  const onDrill = async direction => {\n    const {\n      layerId,\n      feature\n    } = contextMenu;\n    let newConfig;\n    if (layerId && feature) {\n      const {\n        level,\n        id,\n        parentGraph,\n        grandParentId,\n        grandParentParentGraph\n      } = feature.properties;\n      const layerConfig = layers.find(layer => layer.id === layerId);\n      if (direction === 'up') {\n        newConfig = drillUpDown(layerConfig, grandParentId, grandParentParentGraph, parseInt(level) - 1);\n      } else {\n        newConfig = drillUpDown(layerConfig, id, parentGraph, parseInt(level) + 1);\n      }\n      setLayers(layers.map(layer => layer.id === layerId ? newConfig : layer));\n      setContextMenu();\n    }\n  };\n  if (layers.find(layer => !layer.isLoaded)) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null), layers.map(config => /*#__PURE__*/React.createElement(LayerLoader, {\n      key: config.id,\n      config: config,\n      onLoad: onLayerLoad\n    })));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: `dhis2-map-plugin ${styles.plugin}`\n  }, /*#__PURE__*/React.createElement(CssReset, null), /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    theme: true\n  }), !hideTitle && /*#__PURE__*/React.createElement(MapName, {\n    name: name\n  }), /*#__PURE__*/React.createElement(MapView, {\n    isPlugin: true,\n    isFullscreen: false,\n    basemap: basemap,\n    layers: layers,\n    controls: controls,\n    bounds: defaultBounds,\n    openContextMenu: setContextMenu,\n    resizeCount: resizeCount\n  }), /*#__PURE__*/React.createElement(Legend, {\n    layers: layers\n  }), contextMenu && /*#__PURE__*/React.createElement(ContextMenu, _extends({}, contextMenu, {\n    onDrill: onDrill,\n    onClose: () => setContextMenu(),\n    isOffline: offline\n  })));\n});\nPlugin.displayName = 'Plugin';\nPlugin.propTypes = {\n  basemap: PropTypes.object,\n  controls: PropTypes.array,\n  getResizeFunction: PropTypes.func,\n  hideTitle: PropTypes.bool,\n  mapViews: PropTypes.array,\n  name: PropTypes.string\n};\nPlugin.defaultProps = {\n  hideTitle: false\n};\nexport default Plugin;","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"InterpretationMap_map__pDQzD\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { getPeriodFromFilters } from '../../util/analytics.js';\nimport { getRelativePeriods } from '../../util/periods.js';\nimport Plugin from '../plugin/Plugin.js';\nimport styles from './styles/InterpretationMap.module.css';\nconst InterpretationMap = _ref => {\n  let {\n    visualization,\n    filters,\n    onResponsesReceived\n  } = _ref;\n  const [mapViews, setMapViews] = useState();\n  useEffect(() => {\n    // Find layers with relative periods\n    const relativePeriodLayers = visualization.mapViews.filter(config => {\n      const period = getPeriodFromFilters(config.filters);\n      return period && getRelativePeriods().find(p => p.id === period.id);\n    }).map(layer => ({\n      ...layer,\n      ...filters,\n      // includes relativePeriodDate\n      isLoaded: false\n    }));\n    if (relativePeriodLayers.length) {\n      // Replace relative period layers and update state\n      setMapViews(visualization.mapViews.map(layer => relativePeriodLayers.find(relativeLayer => relativeLayer.id === layer.id) || layer));\n    } else {\n      setMapViews(visualization.mapViews);\n    }\n  }, [visualization, filters]);\n  useEffect(() => {\n    if (mapViews) {\n      onResponsesReceived();\n    }\n  }, [mapViews, onResponsesReceived]);\n  return mapViews ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.map\n  }, /*#__PURE__*/React.createElement(Plugin, _extends({}, visualization, {\n    mapViews: mapViews\n  }))) : null;\n};\nInterpretationMap.propTypes = {\n  visualization: PropTypes.object.isRequired,\n  onResponsesReceived: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  filters: PropTypes.shape({\n    relativePeriodDate: PropTypes.string.isRequired\n  })\n};\nexport default InterpretationMap;","import { AboutAOUnit, InterpretationsUnit, InterpretationModal } from '@dhis2/analytics';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setInterpretation } from '../../actions/interpretations.js';\nimport { getUrlParameter } from '../../util/requests.js';\nimport Drawer from '../core/Drawer.js';\nimport InterpretationMap from './InterpretationMap.js';\nconst InterpretationsPanel = _ref => {\n  let {\n    interpretationId,\n    map,\n    isPanelOpen,\n    setInterpretation\n  } = _ref;\n  const [isMapLoading, setIsMapLoading] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState();\n  const [initialFocus, setInitialFocus] = useState(false);\n  const interpretationsUnitRef = useRef();\n  const {\n    d2\n  } = useD2();\n  const onInterpretationClick = useCallback(interpretationId => {\n    setInterpretation(interpretationId);\n    setIsModalOpen(true);\n  }, [setInterpretation]);\n  const onReplyIconClick = useCallback(interpretationId => {\n    setInitialFocus(true);\n    setInterpretation(interpretationId);\n    setIsModalOpen(true);\n  }, [setInterpretation]);\n  const onModalClose = useCallback(() => {\n    setIsModalOpen(false);\n    setInitialFocus(false);\n\n    // Small timeout added as the interpretation modal onClose is called before the\n    // modal is actaully closed. It needs to be closed to free the webgl context used.\n    setTimeout(setInterpretation, 100);\n  }, [setInterpretation]);\n  useEffect(() => {\n    const urlInterpretationId = getUrlParameter('interpretationid');\n    if (urlInterpretationId) {\n      setInterpretation(urlInterpretationId);\n      setIsModalOpen(true);\n    }\n  }, [setInterpretation]);\n  if (!(map !== null && map !== void 0 && map.id)) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, isPanelOpen && /*#__PURE__*/React.createElement(Drawer, null, /*#__PURE__*/React.createElement(AboutAOUnit, {\n    type: \"map\",\n    id: map.id\n  }), /*#__PURE__*/React.createElement(InterpretationsUnit, {\n    ref: interpretationsUnitRef,\n    type: \"map\",\n    id: map.id,\n    currentUser: d2.currentUser,\n    onInterpretationClick: onInterpretationClick,\n    onReplyIconClick: onReplyIconClick\n  })), isModalOpen && interpretationId && /*#__PURE__*/React.createElement(InterpretationModal, {\n    currentUser: d2.currentUser,\n    onInterpretationUpdate: () => interpretationsUnitRef.current.refresh(),\n    initialFocus: initialFocus,\n    interpretationId: interpretationId,\n    isVisualizationLoading: isMapLoading,\n    onClose: onModalClose,\n    onResponsesReceived: () => setIsMapLoading(false),\n    visualization: map,\n    pluginComponent: InterpretationMap\n  }));\n};\nInterpretationsPanel.propTypes = {\n  map: PropTypes.object.isRequired,\n  setInterpretation: PropTypes.func.isRequired,\n  interpretationId: PropTypes.string,\n  isPanelOpen: PropTypes.bool\n};\nexport default connect(state => ({\n  map: state.map,\n  isPanelOpen: state.ui.rightPanelOpen && !state.orgUnitProfile,\n  interpretationId: state.interpretation.id\n}), {\n  setInterpretation\n})(InterpretationsPanel);","import * as types from '../constants/actionTypes.js';\nexport const setInterpretation = id => ({\n  type: types.INTERPRETATION_SET,\n  payload: id\n});","import { arrayMoveImmutable } from 'array-move';\nimport { generateUid } from 'd2/uid';\nimport * as types from '../constants/actionTypes.js';\nexport const defaultBasemapState = {\n  isVisible: true,\n  isExpanded: true,\n  opacity: 1\n};\nconst defaultState = {\n  bounds: [[-18.7, -34.9], [50.2, 35.9]],\n  basemap: defaultBasemapState,\n  mapViews: []\n};\nconst basemap = (state, action) => {\n  switch (action.type) {\n    case types.BASEMAP_SELECTED:\n      if (state.id === action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        id: action.id\n      };\n    case types.BASEMAP_CHANGE_OPACITY:\n      return {\n        ...state,\n        opacity: action.opacity\n      };\n    case types.BASEMAP_TOGGLE_EXPAND:\n      return {\n        ...state,\n        isExpanded: !state.isExpanded\n      };\n    case types.BASEMAP_TOGGLE_VISIBILITY:\n      return {\n        ...state,\n        isVisible: !state.isVisible\n      };\n    default:\n      return state;\n  }\n};\nconst layer = (state, action) => {\n  let filters;\n  switch (action.type) {\n    case types.LAYER_UPDATE:\n      if (state.id !== action.payload.id) {\n        return state;\n      }\n      return {\n        ...action.payload\n      };\n    case types.LAYER_CHANGE_OPACITY:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        opacity: action.opacity\n      };\n    case types.LAYER_LOADING_SET:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isLoaded: false\n      };\n    case types.LAYER_TOGGLE_VISIBILITY:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isVisible: !state.isVisible\n      };\n    case types.LAYER_TOGGLE_EXPAND:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isExpanded: !state.isExpanded\n      };\n\n    // Add/change filter\n    case types.DATA_FILTER_SET:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      return {\n        ...state,\n        dataFilters: {\n          ...state.dataFilters,\n          [action.fieldId]: action.filter\n        }\n      };\n\n    // Remove field from filter\n    case types.DATA_FILTER_CLEAR:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      filters = {\n        ...state.dataFilters\n      };\n      delete filters[action.fieldId];\n      return {\n        ...state,\n        dataFilters: filters\n      };\n    case types.MAP_ALERTS_CLEAR:\n      return {\n        ...state,\n        alerts: undefined\n      };\n    case types.MAP_EARTH_ENGINE_VALUE_SHOW:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      return {\n        ...state,\n        coordinate: action.coordinate\n      };\n    default:\n      return state;\n  }\n};\nconst map = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let mapViews;\n  let sortedMapViews;\n  switch (action.type) {\n    case types.MAP_NEW:\n      return {\n        ...defaultState\n      };\n    case types.MAP_SET:\n      return {\n        ...defaultState,\n        ...action.payload,\n        basemap: {\n          ...defaultState.basemap,\n          ...action.payload.basemap\n        }\n      };\n    case types.MAP_PROPS_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.MAP_COORDINATE_OPEN:\n      return {\n        ...state,\n        coordinatePopup: action.payload\n      };\n    case types.MAP_COORDINATE_CLOSE:\n      return {\n        ...state,\n        coordinatePopup: null\n      };\n    case types.BASEMAP_SELECTED:\n    case types.BASEMAP_CHANGE_OPACITY:\n    case types.BASEMAP_TOGGLE_EXPAND:\n    case types.BASEMAP_TOGGLE_VISIBILITY:\n      return {\n        ...state,\n        basemap: basemap(state.basemap, action)\n      };\n    case types.LAYER_ADD:\n      // Check to only allow external layers to be added once\n      if (state.mapViews.filter(l => l.id === action.payload.id).length) {\n        return state;\n      }\n      return {\n        ...state,\n        mapViews: [...state.mapViews, {\n          id: generateUid(),\n          ...action.payload\n        }],\n        newLayerIsLoading: false\n      };\n    case types.LAYER_REMOVE:\n      return {\n        ...state,\n        mapViews: state.mapViews.filter(layer => layer.id !== action.id)\n      };\n    case types.LAYER_SORT:\n      mapViews = [...state.mapViews].reverse(); // TODO: Refactor\n      sortedMapViews = arrayMoveImmutable(mapViews, action.oldIndex, action.newIndex).reverse();\n      return {\n        ...state,\n        mapViews: sortedMapViews\n      };\n    case types.LAYER_UPDATE:\n    case types.LAYER_EDIT:\n    case types.LAYER_CHANGE_OPACITY:\n    case types.LAYER_TOGGLE_VISIBILITY:\n    case types.LAYER_TOGGLE_EXPAND:\n    case types.DATA_FILTER_SET:\n    case types.DATA_FILTER_CLEAR:\n    case types.MAP_EARTH_ENGINE_VALUE_SHOW:\n      return {\n        ...state,\n        mapViews: state.mapViews.map(l => layer(l, action))\n      };\n\n    // TODO: newLayerIsLoading will not cover an edge case where another layer is created while the first is still loading.\n    // The only concequence would be that the spinner is removed before both layers are loaded, which will rarely happen.\n    case types.LAYER_LOADING_SET:\n      return {\n        ...state,\n        mapViews: state.mapViews.map(l => layer(l, action)),\n        newLayerIsLoading: action.id ? false : true\n      };\n    case types.MAP_ALERTS_CLEAR:\n      return {\n        ...state,\n        alerts: undefined,\n        mapViews: state.mapViews.map(l => layer(l, action))\n      };\n    default:\n      return state;\n  }\n};\nexport default map;","import { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useSystemSettings } from '../components/SystemSettingsProvider.js';\nimport { getFallbackBasemap } from '../constants/basemaps.js';\nimport { defaultBasemapState } from '../reducers/map.js';\nconst emptyBasemap = {\n  config: {}\n};\nfunction useBasemapConfig(selected) {\n  const [basemap, setBasemap] = useState(emptyBasemap);\n  const basemaps = useSelector(state => state.basemaps);\n  const {\n    keyDefaultBaseMap\n  } = useSystemSettings();\n  useEffect(() => {\n    const selectedId = selected.id || keyDefaultBaseMap;\n    const basemapToUse = basemaps.find(_ref => {\n      let {\n        id\n      } = _ref;\n      return id === selectedId;\n    }) || getFallbackBasemap();\n\n    // Make sure we don't override the basemap opacity\n    if (basemapToUse && selected.opacity !== undefined) {\n      delete basemapToUse.opacity;\n    }\n    const basemapConfig = {\n      ...defaultBasemapState,\n      ...selected,\n      ...basemapToUse\n    };\n    setBasemap(basemapConfig);\n  }, [keyDefaultBaseMap, selected, basemaps]);\n  return basemap;\n}\nexport default useBasemapConfig;","// extracted by mini-css-extract-plugin\nexport default {\"handle\":\"SortableHandle_handle__WZbWJ\"};","import { IconDragHandle24 } from '@dhis2/ui';\nimport React from 'react';\nimport { SortableHandle } from 'react-sortable-hoc';\nimport styles from './styles/SortableHandle.module.css';\nconst Handle = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.handle\n}, /*#__PURE__*/React.createElement(IconDragHandle24, null));\nexport default SortableHandle(Handle);","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"LayerCard_card__MpAbs\",\"cardHeader\":\"LayerCard_cardHeader__IwswG\",\"title\":\"LayerCard_title__XV9bu\",\"overlay\":\"LayerCard_overlay__ZJOXG\",\"action\":\"LayerCard_action__2gk5x\",\"expand\":\"LayerCard_expand__nOig1\",\"content\":\"LayerCard_content__L8bFN\",\"collapsibleContent\":\"LayerCard_collapsibleContent__5bwIg\",\"expanded\":\"LayerCard_expanded__LlzMP\"};","// extracted by mini-css-extract-plugin\nexport default {\"moreMenuButton\":\"LayerToolbarMore_moreMenuButton__WZ00g\",\"menu\":\"LayerToolbarMore_menu__SgkGv\"};","import i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, MenuDivider, IconMore24, IconTable16, IconVisualizationColumn16, IconDownload16, IconEdit16, IconDelete16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { EARTH_ENGINE_LAYER } from '../../../constants/layers.js';\nimport { IconButton } from '../../core/index.js';\nimport styles from './styles/LayerToolbarMore.module.css';\nconst LayerToolbarMoreMenu = _ref => {\n  let {\n    layer = {},\n    onEdit,\n    onRemove,\n    toggleDataTable,\n    openAs,\n    downloadData,\n    dataTableOpen,\n    hasOrgUnitData,\n    isLoading\n  } = _ref;\n  const [isOpen, setIsOpen] = useState(false);\n  const anchorRef = useRef();\n  const somethingAboveDivider = toggleDataTable || downloadData,\n    somethingBelowDivider = onRemove || onEdit,\n    showDivider = somethingAboveDivider && somethingBelowDivider;\n  if (!somethingAboveDivider && !somethingBelowDivider) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.moreMenuButton,\n    onClick: () => setIsOpen(!isOpen),\n    role: \"button\",\n    \"aria-label\": i18n.t('Toggle layer menu'),\n    \"data-test\": \"moremenubutton\"\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: i18n.t('More actions'),\n    onClick: () => setIsOpen(!isOpen),\n    dataTest: \"moremenubutton\"\n  }, /*#__PURE__*/React.createElement(IconMore24, null))), isOpen && layer && /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right-start\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true,\n    dataTest: \"more-menu\"\n  }, toggleDataTable && /*#__PURE__*/React.createElement(MenuItem, {\n    label: dataTableOpen === layer.id ? i18n.t('Hide data table') : i18n.t('Show data table'),\n    icon: /*#__PURE__*/React.createElement(IconTable16, null),\n    onClick: () => {\n      setIsOpen(false);\n      toggleDataTable();\n    },\n    disabled: !hasOrgUnitData\n  }), openAs && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Open as chart'),\n    icon: /*#__PURE__*/React.createElement(IconVisualizationColumn16, null),\n    onClick: () => {\n      setIsOpen(false);\n      openAs('CHART');\n    }\n  }), downloadData && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Download data'),\n    icon: /*#__PURE__*/React.createElement(IconDownload16, null),\n    onClick: () => {\n      setIsOpen(false);\n      downloadData();\n    },\n    disabled: !hasOrgUnitData || isLoading\n  }), showDivider && /*#__PURE__*/React.createElement(MenuDivider, null), onEdit && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Edit layer'),\n    icon: /*#__PURE__*/React.createElement(IconEdit16, null),\n    onClick: () => {\n      setIsOpen(false);\n      onEdit();\n    }\n  }), onRemove && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Remove layer'),\n    icon: /*#__PURE__*/React.createElement(IconDelete16, null),\n    destructive: true,\n    onClick: () => {\n      setIsOpen(false);\n      onRemove();\n    }\n  })))));\n};\nLayerToolbarMoreMenu.propTypes = {\n  dataTableOpen: PropTypes.string,\n  downloadData: PropTypes.func,\n  hasOrgUnitData: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  layer: PropTypes.object,\n  openAs: PropTypes.func,\n  toggleDataTable: PropTypes.func,\n  onEdit: PropTypes.func,\n  onRemove: PropTypes.func\n};\nexport default connect((_ref2, _ref3) => {\n  var _layer$aggregationTyp;\n  let {\n    dataTable: dataTableOpen,\n    aggregations\n  } = _ref2;\n  let {\n    layer = {}\n  } = _ref3;\n  const isEarthEngine = layer.layer === EARTH_ENGINE_LAYER;\n  const hasOrgUnitData = layer.data && (!isEarthEngine || ((_layer$aggregationTyp = layer.aggregationType) === null || _layer$aggregationTyp === void 0 ? void 0 : _layer$aggregationTyp.length) > 0);\n  const isLoading = isEarthEngine && hasOrgUnitData && !aggregations[layer.id];\n  return {\n    dataTableOpen,\n    hasOrgUnitData,\n    isLoading\n  };\n})(LayerToolbarMoreMenu);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OpacitySlider_container__Xc242\",\"slider\":\"OpacitySlider_slider__nnF6M\"};","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport styles from './styles/OpacitySlider.module.css';\nconst OpacitySlider = _ref => {\n  let {\n    opacity,\n    disabled,\n    onChange\n  } = _ref;\n  const lowerFill = `var(--colors-grey${disabled ? 400 : 600})`;\n  const upperFill = `var(--colors-grey${disabled ? 300 : 400})`;\n  const onSliderChange = useCallback(evt => onChange(Number(evt.target.value)), [onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"range\",\n    min: \"0\",\n    max: \"1\",\n    step: \"0.01\",\n    value: opacity,\n    disabled: disabled,\n    onChange: onSliderChange,\n    className: styles.slider,\n    style: {\n      background: `linear-gradient(\n                        to right,\n                        ${lowerFill} 0%,\n                        ${lowerFill} ${opacity * 100}%,\n                        ${upperFill} ${opacity * 100}%,\n                        ${upperFill} 100%\n                    )`\n    }\n  }));\n};\nOpacitySlider.propTypes = {\n  opacity: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\nexport default OpacitySlider;","// extracted by mini-css-extract-plugin\nexport default {\"toolbar\":\"LayerToolbar_toolbar__OJ+oR\",\"spacer\":\"LayerToolbar_spacer__4hAoQ\",\"button\":\"LayerToolbar_button__2oZMK\",\"sliderContainer\":\"LayerToolbar_sliderContainer__8mAGL\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip, IconEdit24, IconView24, IconViewOff24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { IconButton } from '../../core/index.js';\nimport LayerToolbarMoreMenu from './LayerToolbarMoreMenu.js';\nimport OpacitySlider from './OpacitySlider.js';\nimport styles from './styles/LayerToolbar.module.css';\nconst LayerToolbar = _ref => {\n  let {\n    hasOpacity,\n    opacity = 1,\n    isVisible,\n    onOpacityChange,\n    toggleLayerVisibility,\n    ...expansionMenuProps\n  } = _ref;\n  const onEdit = expansionMenuProps.onEdit;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.toolbar,\n    \"data-test\": \"layertoolbar\"\n  }, onEdit && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: i18n.t('Edit'),\n    onClick: onEdit,\n    className: styles.button,\n    dataTest: \"editbutton\"\n  }, /*#__PURE__*/React.createElement(IconEdit24, null)), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.spacer\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: i18n.t('Toggle visibility'),\n    onClick: toggleLayerVisibility,\n    className: cx(styles.button, {\n      visible: isVisible,\n      notvisible: !isVisible\n    }),\n    dataTest: \"visibilitybutton\"\n  }, isVisible ? /*#__PURE__*/React.createElement(IconView24, null) : /*#__PURE__*/React.createElement(IconViewOff24, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sliderContainer\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Set layer opacity')\n  }, /*#__PURE__*/React.createElement(OpacitySlider, {\n    opacity: opacity,\n    disabled: !isVisible || !hasOpacity,\n    onChange: onOpacityChange\n  }))), /*#__PURE__*/React.createElement(LayerToolbarMoreMenu, expansionMenuProps));\n};\nLayerToolbar.propTypes = {\n  toggleLayerVisibility: PropTypes.func.isRequired,\n  onOpacityChange: PropTypes.func.isRequired,\n  hasOpacity: PropTypes.bool,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number,\n  onEdit: PropTypes.func\n};\nLayerToolbar.defaultProps = {\n  hasOpacity: true\n};\nexport default LayerToolbar;","import i18n from '@dhis2/d2-i18n';\nimport { Card, IconChevronUp24, IconChevronDown24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconButton } from '../core/index.js';\nimport SortableHandle from './SortableHandle.js';\nimport styles from './styles/LayerCard.module.css';\nimport LayerToolbar from './toolbar/LayerToolbar.js';\nconst LayerCard = _ref => {\n  let {\n    title,\n    subtitle,\n    isOverlay,\n    isExpanded,\n    toggleExpand,\n    children,\n    ...layerToolbarProps\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.card, {\n      [styles.expanded]: isExpanded\n    })\n  }, /*#__PURE__*/React.createElement(Card, {\n    dataTest: isOverlay ? 'layercard' : 'basemapcard'\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.cardHeader\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.title, {\n      [styles.overlay]: isOverlay\n    })\n  }, /*#__PURE__*/React.createElement(\"h2\", null, title), subtitle && /*#__PURE__*/React.createElement(\"h3\", null, subtitle)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.action\n  }, isOverlay && /*#__PURE__*/React.createElement(SortableHandle, null), /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: isExpanded ? i18n.t('Collapse') : i18n.t('Expand'),\n    onClick: toggleExpand,\n    className: styles.expand,\n    dataTest: \"editbutton\"\n  }, isExpanded ? /*#__PURE__*/React.createElement(IconChevronUp24, null) : /*#__PURE__*/React.createElement(IconChevronDown24, null)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.collapsibleContent\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, children), /*#__PURE__*/React.createElement(LayerToolbar, layerToolbarProps))));\n};\nLayerCard.propTypes = {\n  isExpanded: PropTypes.bool.isRequired,\n  title: PropTypes.string.isRequired,\n  toggleExpand: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  isOverlay: PropTypes.bool,\n  subtitle: PropTypes.string\n};\nexport default LayerCard;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Basemap_container__BdP05\",\"imageContainer\":\"Basemap_imageContainer__h-+VD\",\"selected\":\"Basemap_selected__vl4S3\",\"image\":\"Basemap_image__stJ5L\",\"noImage\":\"Basemap_noImage__RJXCc\",\"name\":\"Basemap_name__7+oSg\",\"nameSelected\":\"Basemap_nameSelected__sEcco\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Basemap.module.css';\n\n// TODO: Use ImageSelect.js component for selectable image\nconst Basemap = _ref => {\n  let {\n    id,\n    img,\n    name,\n    isSelected,\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    title: name,\n    onClick: () => onClick(id),\n    \"data-test\": \"basemaplistitem\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageContainer, {\n      [styles.selected]: isSelected\n    }),\n    \"data-test\": \"basemaplistitem-img\"\n  }, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  }, i18n.t('External basemap'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.name, {\n      [styles.nameSelected]: isSelected\n    }),\n    \"data-test\": \"basemaplistitem-name\"\n  }, i18n.t(name)));\n};\nBasemap.propTypes = {\n  id: PropTypes.string.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  img: PropTypes.string\n};\nexport default Basemap;","// extracted by mini-css-extract-plugin\nexport default {\"basemapList\":\"BasemapList_basemapList__YVxvb\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { layerTypes } from '../../map/MapApi.js';\nimport Basemap from './Basemap.js';\nimport styles from './styles/BasemapList.module.css';\nconst BasemapList = _ref => {\n  let {\n    selectedID,\n    basemaps,\n    selectBasemap\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.basemapList,\n    \"data-test\": \"basemaplist\"\n  }, basemaps.filter(basemap => layerTypes.includes(basemap.config.type)).map((basemap, index) => /*#__PURE__*/React.createElement(Basemap, _extends({\n    key: `basemap-${index}`,\n    onClick: selectBasemap,\n    isSelected: basemap.id === selectedID\n  }, basemap))));\n};\nBasemapList.propTypes = {\n  basemaps: PropTypes.array.isRequired,\n  selectBasemap: PropTypes.func.isRequired,\n  selectedID: PropTypes.string.isRequired\n};\nexport default BasemapList;","import i18n from '@dhis2/d2-i18n';\nimport { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { changeBasemapOpacity, toggleBasemapExpand, toggleBasemapVisibility, selectBasemap } from '../../../actions/basemap.js';\nimport { VECTOR_STYLE } from '../../../constants/layers.js';\nimport useBasemapConfig from '../../../hooks/useBasemapConfig.js';\nimport LayerCard from '../LayerCard.js';\nimport BasemapList from './BasemapList.js';\nconst BasemapCard = props => {\n  const {\n    subtitle = i18n.t('Basemap'),\n    toggleBasemapExpand,\n    toggleBasemapVisibility,\n    changeBasemapOpacity,\n    selectBasemap\n  } = props;\n  const basemap = useBasemapConfig(props.basemap);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, basemap.id === undefined ? /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))) : /*#__PURE__*/React.createElement(LayerCard, {\n    hasOpacity: basemap.config.type === VECTOR_STYLE ? false : true,\n    title: basemap.name,\n    subtitle: subtitle,\n    opacity: basemap.opacity,\n    isExpanded: basemap.isExpanded,\n    isVisible: basemap.isVisible,\n    onOpacityChange: changeBasemapOpacity,\n    toggleExpand: toggleBasemapExpand,\n    toggleLayerVisibility: toggleBasemapVisibility\n  }, /*#__PURE__*/React.createElement(BasemapList, {\n    selectedID: basemap.id,\n    basemaps: props.basemaps,\n    selectBasemap: selectBasemap\n  })));\n};\nBasemapCard.propTypes = {\n  basemap: PropTypes.object.isRequired,\n  basemaps: PropTypes.array.isRequired,\n  changeBasemapOpacity: PropTypes.func.isRequired,\n  selectBasemap: PropTypes.func.isRequired,\n  toggleBasemapExpand: PropTypes.func.isRequired,\n  toggleBasemapVisibility: PropTypes.func.isRequired,\n  subtitle: PropTypes.string\n};\nexport default connect(state => ({\n  basemap: state.map.basemap,\n  basemaps: state.basemaps\n}), {\n  changeBasemapOpacity,\n  toggleBasemapExpand,\n  toggleBasemapVisibility,\n  selectBasemap\n})(BasemapCard);","import i18n from '@dhis2/d2-i18n';\nimport FileSaver from 'file-saver';\nimport { EVENT_LAYER } from '../constants/layers.js';\nimport { hasClasses } from './earthEngine.js';\nimport { getAnalyticsRequest, getEventColumns, loadData } from './event.js';\nexport const getFormatOptions = () => [{\n  id: 'id',\n  name: i18n.t('ID')\n}, {\n  id: 'code',\n  name: i18n.t('Code')\n}, {\n  id: 'name',\n  name: i18n.t('Name')\n}];\n\n// Add readable prop names before downloading EE data\n// Classed data (landcover) will use the class names\n// Other layers will include layer name after aggregation type\nexport const addPropNames = (layer, data) => {\n  const {\n    aggregationType,\n    name,\n    legend\n  } = layer;\n  const layerName = name.replace(/ /g, '_').toLowerCase();\n  const {\n    items\n  } = legend;\n  return hasClasses(aggregationType) ? items.reduce((obj, _ref) => {\n    let {\n      id,\n      name\n    } = _ref;\n    return {\n      ...obj,\n      [name]: data[id]\n    };\n  }, {}) : Object.keys(data).reduce((obj, id) => ({\n    ...obj,\n    [`${id}_${layerName}`]: data[id]\n  }), {});\n};\nconst standardizeFilename = rawName => rawName.replace(/\\s+/g, '_');\nexport const createGeoJsonBlob = data => {\n  const geojson = {\n    type: 'FeatureCollection',\n    features: data\n  };\n  const blob = new Blob([JSON.stringify(geojson)], {\n    type: 'application/json;charset=utf-8'\n  });\n  return blob;\n};\n\n// Includes values for each period in feature properties\nconst includeValuesByPeriod = _ref2 => {\n  let {\n    data,\n    valuesByPeriod\n  } = _ref2;\n  const periods = Object.keys(valuesByPeriod);\n  return data.map(feature => ({\n    ...feature,\n    properties: {\n      ...feature.properties,\n      ...periods.reduce((values, periodId) => {\n        const periodValue = valuesByPeriod[periodId][feature.id];\n        values[`period_${periodId}`] = periodValue ? Number(periodValue.value) : null;\n        return values;\n      }, {})\n    }\n  }));\n};\nexport const downloadData = async _ref3 => {\n  let {\n    layer,\n    aggregations,\n    format,\n    humanReadableKeys,\n    d2,\n    nameProperty\n  } = _ref3;\n  const {\n    name,\n    layer: layerType\n  } = layer;\n  let layerData = layer.data;\n  if (layerType === EVENT_LAYER) {\n    const columns = await getEventColumns(layer, {\n      format,\n      nameProperty,\n      d2\n    });\n    const config = {\n      ...layer,\n      columns,\n      outputIdScheme: humanReadableKeys ? 'NAME' : 'ID',\n      columnNames: columns.reduce((res, col) => {\n        res[col.dimension] = col.name;\n        return res;\n      }, {})\n    };\n    const result = await loadData(await getAnalyticsRequest(config, {\n      d2,\n      nameProperty\n    }), config, d2);\n    layerData = result.data;\n  } else if (layer.valuesByPeriod) {\n    layerData = includeValuesByPeriod(layer);\n  }\n  const data = aggregations ? layerData.map(d => ({\n    ...d,\n    properties: {\n      ...d.properties,\n      ...addPropNames(layer, aggregations[d.id])\n    }\n  })) : layerData;\n  FileSaver.saveAs(createGeoJsonBlob(data), standardizeFilename(name) + '.geojson');\n  return true;\n};","// extracted by mini-css-extract-plugin\nexport default {\"btnProgress\":\"DataDownloadDialogActions_btnProgress__eZx74\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/DataDownloadDialogActions.module.css';\nconst DataDownloadDialogActions = _ref => {\n  let {\n    downloading,\n    onStartClick,\n    onCancelClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onCancelClick,\n    disabled: downloading\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    name: \"download-button\",\n    primary: true,\n    onClick: onStartClick,\n    disabled: downloading\n  }, i18n.t('Download'), downloading && /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true,\n    className: styles.btnProgress\n  })));\n};\nDataDownloadDialogActions.propTypes = {\n  downloading: PropTypes.bool.isRequired,\n  onCancelClick: PropTypes.func.isRequired,\n  onStartClick: PropTypes.func.isRequired\n};\nexport default DataDownloadDialogActions;","// extracted by mini-css-extract-plugin\nexport default {\"contentDiv\":\"DataDownloadDialog_contentDiv__ruX2n\",\"inputContainer\":\"DataDownloadDialog_inputContainer__bHEvv\",\"headingDiv\":\"DataDownloadDialog_headingDiv__Gfuok\",\"selectField\":\"DataDownloadDialog_selectField__kEAem\",\"checkboxRoot\":\"DataDownloadDialog_checkboxRoot__H51Al\"};","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { EVENT_LAYER } from '../../../constants/layers.js';\nimport { getFormatOptions, downloadData } from '../../../util/dataDownload.js';\nimport { SelectField, Checkbox, Help } from '../../core/index.js';\nimport { useUserSettings } from '../../UserSettingsProvider.js';\nimport DataDownloadDialogActions from './DataDownloadDialogActions.js';\nimport styles from './styles/DataDownloadDialog.module.css';\nconst DataDownloadDialog = _ref => {\n  let {\n    layer,\n    onCloseDialog\n  } = _ref;\n  const {\n    keyAnalysisDisplayProperty\n  } = useUserSettings();\n  const formatOptions = getFormatOptions();\n  const {\n    d2\n  } = useD2();\n  const [selectedFormat, setSelectedFormat] = useState(formatOptions[2]);\n  const [humanReadable, setHumanReadable] = useState(true);\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [error, setError] = useState(null);\n  const aggregations = useSelector(state => state.aggregations);\n  const onChangeFormat = format => {\n    setError(null);\n    setSelectedFormat(format);\n  };\n  const onChangeHumanReadable = isChecked => {\n    setError(null);\n    setHumanReadable(isChecked);\n  };\n  const onClose = () => {\n    setError(null);\n    onCloseDialog();\n  };\n  const onStartDownload = async () => {\n    setIsDownloading(true);\n    setError(null);\n    try {\n      await downloadData({\n        layer,\n        aggregations: aggregations[layer.id],\n        format: selectedFormat.id,\n        humanReadableKeys: humanReadable,\n        d2,\n        nameProperty: keyAnalysisDisplayProperty\n      });\n      setIsDownloading(false);\n      onClose();\n    } catch (e) {\n      console.log('download failed', e);\n      setIsDownloading(false);\n      setError(`download failed ${e}`);\n    }\n  };\n  if (!layer) {\n    console.error('Tried to open data download dialog without specifying a source layer!');\n  }\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    onClose: onClose,\n    dataTest: \"data-download-modal\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Download Layer Data')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contentDiv\n  }, i18n.t('Downloading GeoJSON data for \"{{layerName}}\"', {\n    layerName: layer.name\n  })), /*#__PURE__*/React.createElement(Help, null, i18n.t('GeoJSON is supported by most GIS software, including QGIS and ArcGIS Desktop.')), layer.layer === EVENT_LAYER && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputContainer\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.headingDiv\n  }, i18n.t('GeoJSON Properties:')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selectField\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('ID Format'),\n    items: formatOptions,\n    value: selectedFormat === null || selectedFormat === void 0 ? void 0 : selectedFormat.id,\n    onChange: onChangeFormat\n  })), /*#__PURE__*/React.createElement(Checkbox, {\n    className: styles.checkboxRoot,\n    label: i18n.t('Use human-readable keys'),\n    checked: humanReadable,\n    onChange: onChangeHumanReadable\n  }))), error && /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, i18n.t('Data download failed.'))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(DataDownloadDialogActions, {\n    downloading: isDownloading,\n    onStartClick: onStartDownload,\n    onCancelClick: onClose\n  })));\n};\nDataDownloadDialog.propTypes = {\n  onCloseDialog: PropTypes.func.isRequired,\n  layer: PropTypes.shape({\n    id: PropTypes.string,\n    layer: PropTypes.string,\n    name: PropTypes.string\n  })\n};\nexport default DataDownloadDialog;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"OverlayCard_legend__daq6o\"};","import { useConfig } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport { useSetting } from '@dhis2/app-service-datastore';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { toggleDataTable } from '../../../actions/dataTable.js';\nimport { editLayer, removeLayer, changeLayerOpacity, toggleLayerExpand, toggleLayerVisibility } from '../../../actions/layers.js';\nimport { ALERT_SUCCESS, ALERT_MESSAGE_DYNAMIC } from '../../../constants/alerts.js';\nimport { DOWNLOADABLE_LAYER_TYPES, DATA_TABLE_LAYER_TYPES, OPEN_AS_LAYER_TYPES, EXTERNAL_LAYER } from '../../../constants/layers.js';\nimport { getAnalyticalObjectFromThematicLayer, APP_URLS, CURRENT_AO_KEY } from '../../../util/analyticalObject.js';\nimport Legend from '../../legend/Legend.js';\nimport DataDownloadDialog from '../download/DataDownloadDialog.js';\nimport LayerCard from '../LayerCard.js';\nimport styles from './styles/OverlayCard.module.css';\nconst OverlayCard = _ref => {\n  let {\n    layer,\n    editLayer,\n    removeLayer,\n    changeLayerOpacity,\n    toggleLayerExpand,\n    toggleLayerVisibility,\n    toggleDataTable\n  } = _ref;\n  const [showDataDownloadDialog, setShowDataDownloadDialog] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const [, /* actual value not used */{\n    set\n  }] = useSetting(CURRENT_AO_KEY);\n  const layerRemovedAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_SUCCESS);\n  const {\n    id,\n    name,\n    legend,\n    isExpanded = true,\n    opacity,\n    isVisible,\n    layer: layerType,\n    isLoaded\n  } = layer;\n  const canEdit = layerType !== EXTERNAL_LAYER;\n  const canToggleDataTable = DATA_TABLE_LAYER_TYPES.includes(layerType);\n  const canDownload = DOWNLOADABLE_LAYER_TYPES.includes(layerType);\n  const canOpenAs = OPEN_AS_LAYER_TYPES.includes(layerType);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(LayerCard, {\n    layer: layer,\n    title: isLoaded ? name : i18n.t('Loading layer') + '...',\n    subtitle: isLoaded && legend && legend.period ? legend.period : null,\n    opacity: opacity,\n    isOverlay: true,\n    isExpanded: isExpanded,\n    isVisible: isVisible,\n    toggleExpand: () => toggleLayerExpand(id),\n    onEdit: canEdit ? () => editLayer(layer) : undefined,\n    toggleDataTable: canToggleDataTable ? () => toggleDataTable(id) : undefined,\n    toggleLayerVisibility: () => toggleLayerVisibility(id),\n    onOpacityChange: newOpacity => changeLayerOpacity(id, newOpacity),\n    onRemove: () => {\n      removeLayer(id);\n      layerRemovedAlert.show({\n        msg: i18n.t('{{name}} deleted.', {\n          name\n        })\n      });\n    },\n    downloadData: canDownload ? () => setShowDataDownloadDialog(true) : undefined,\n    openAs: canOpenAs ? async type => {\n      const currentAO = getAnalyticalObjectFromThematicLayer(layer);\n\n      // Store AO in user data store\n      await set(currentAO);\n\n      // Open it in another app\n      window.location.href = `${baseUrl}/${APP_URLS[type]}/#/currentAnalyticalObject`;\n    } : undefined\n  }, legend && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legend\n  }, /*#__PURE__*/React.createElement(Legend, legend))), showDataDownloadDialog && /*#__PURE__*/React.createElement(DataDownloadDialog, {\n    layer: layer,\n    onCloseDialog: () => setShowDataDownloadDialog(false)\n  }));\n};\nOverlayCard.propTypes = {\n  changeLayerOpacity: PropTypes.func.isRequired,\n  editLayer: PropTypes.func.isRequired,\n  layer: PropTypes.object.isRequired,\n  removeLayer: PropTypes.func.isRequired,\n  toggleDataTable: PropTypes.func.isRequired,\n  toggleLayerExpand: PropTypes.func.isRequired,\n  toggleLayerVisibility: PropTypes.func.isRequired\n};\nexport default connect(null, {\n  editLayer,\n  removeLayer,\n  changeLayerOpacity,\n  toggleLayerExpand,\n  toggleLayerVisibility,\n  toggleDataTable\n})(OverlayCard);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { sortLayers } from '../../actions/layers.js';\nimport Drawer from '../core/Drawer.js';\nimport BasemapCard from '../layers/basemaps/BasemapCard.js';\nimport OverlayCard from './overlays/OverlayCard.js';\nconst SortableLayer = SortableElement(OverlayCard);\n\n// Draggable layers - last layer on top\nconst SortableLayersList = SortableContainer(_ref => {\n  let {\n    layers\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", null, layers.map((layer, index) => /*#__PURE__*/React.createElement(SortableLayer, {\n    key: layer.id,\n    index: index,\n    layer: layer\n  })));\n});\nconst LayersPanel = _ref2 => {\n  let {\n    layersPanelOpen,\n    layers,\n    sortLayers\n  } = _ref2;\n  return layersPanelOpen && /*#__PURE__*/React.createElement(Drawer, {\n    position: \"left\"\n  }, /*#__PURE__*/React.createElement(SortableLayersList, {\n    layers: layers,\n    onSortEnd: sortLayers,\n    useDragHandle: true\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(BasemapCard, null)));\n};\nLayersPanel.propTypes = {\n  layers: PropTypes.array.isRequired,\n  layersPanelOpen: PropTypes.bool.isRequired,\n  sortLayers: PropTypes.func.isRequired\n};\nconst mapStateToProps = state => ({\n  layers: [...state.map.mapViews].reverse(),\n  layersPanelOpen: state.ui.layersPanelOpen\n});\nexport default connect(mapStateToProps, {\n  sortLayers\n})(LayersPanel);","// extracted by mini-css-extract-plugin\nexport default {\"layersToggle\":\"LayersToggle_layersToggle__+STbf\"};","import { IconChevronLeft24, IconChevronRight24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { openLayersPanel, closeLayersPanel } from '../../actions/ui.js';\nimport styles from './styles/LayersToggle.module.css';\n\n// This expand/collapse toggle is separate from LayersPanel to avoid overflow issue\nconst LayersToggle = _ref => {\n  let {\n    isOpen,\n    isDownload,\n    openLayersPanel,\n    closeLayersPanel\n  } = _ref;\n  return !isDownload && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: isOpen ? closeLayersPanel : openLayersPanel,\n    className: styles.layersToggle,\n    style: isOpen ? {} : {\n      left: 0\n    }\n  }, isOpen ? /*#__PURE__*/React.createElement(IconChevronLeft24, null) : /*#__PURE__*/React.createElement(IconChevronRight24, null));\n};\nLayersToggle.propTypes = {\n  closeLayersPanel: PropTypes.func.isRequired,\n  isDownload: PropTypes.bool.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  openLayersPanel: PropTypes.func.isRequired\n};\nexport default connect(state => ({\n  isOpen: state.ui.layersPanelOpen,\n  isDownload: state.download.showDialog\n}), {\n  openLayersPanel,\n  closeLayersPanel\n})(LayersToggle);","import * as types from '../constants/actionTypes.js';\nexport const openLayersPanel = () => ({\n  type: types.LAYERS_PANEL_OPEN\n});\nexport const closeLayersPanel = () => ({\n  type: types.LAYERS_PANEL_CLOSE\n});\nexport const openInterpretationsPanel = () => ({\n  type: types.INTERPRETATIONS_PANEL_OPEN\n});\nexport const closeInterpretationsPanel = () => ({\n  type: types.INTERPRETATIONS_PANEL_CLOSE\n});","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { updateLayer } from '../../actions/layers.js';\nimport LayerLoader from './LayerLoader.js';\nconst LayersLoader = () => {\n  const layers = useSelector(state => state.map.mapViews.filter(layer => !layer.isLoaded || layer.showDataTable && !layer.isExtended));\n  const dispatch = useDispatch();\n  const onLoad = layer => dispatch(updateLayer(layer));\n  if (!layers.length) {\n    return null;\n  }\n  return layers.map(config => /*#__PURE__*/React.createElement(LayerLoader, {\n    key: config.id,\n    config: config,\n    onLoad: onLoad\n  }));\n};\nexport default LayersLoader;","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"ContextMenu_anchor__O9is8\",\"menu\":\"ContextMenu_menu__GYTJZ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, IconArrowUp16, IconArrowDown16, IconInfo16, IconLocation16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { updateLayer } from '../../actions/layers.js';\nimport { closeContextMenu, openCoordinatePopup, showEarthEngineValue } from '../../actions/map.js';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport { FACILITY_LAYER, EARTH_ENGINE_LAYER } from '../../constants/layers.js';\nimport { drillUpDown } from '../../util/map.js';\nimport styles from './styles/ContextMenu.module.css';\nconst ContextMenu = props => {\n  const anchorRef = useRef();\n  const {\n    feature,\n    layerType,\n    layerConfig,\n    coordinates,\n    earthEngineLayers,\n    position,\n    offset,\n    closeContextMenu,\n    openCoordinatePopup,\n    showEarthEngineValue,\n    setOrgUnitProfile,\n    updateLayer\n  } = props;\n  if (!position) {\n    return null;\n  }\n  const left = offset[0] + position[0];\n  const top = offset[1] + position[1];\n  const attr = (feature === null || feature === void 0 ? void 0 : feature.properties) || {};\n  const onClick = (item, id) => {\n    closeContextMenu();\n    switch (item) {\n      case 'drill_up':\n        updateLayer(drillUpDown(layerConfig, attr.grandParentId, attr.grandParentParentGraph, parseInt(attr.level) - 1));\n        break;\n      case 'drill_down':\n        updateLayer(drillUpDown(layerConfig, attr.id, attr.parentGraph, parseInt(attr.level) + 1));\n        break;\n      case 'show_info':\n        setOrgUnitProfile(attr.id);\n        break;\n      case 'show_coordinate':\n        openCoordinatePopup(coordinates);\n        break;\n      case 'show_ee_value':\n        showEarthEngineValue(id, coordinates);\n        break;\n      default:\n    }\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.anchor,\n    style: {\n      left,\n      top\n    }\n  }), /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: closeContextMenu\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, layerType !== FACILITY_LAYER && feature && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill up one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowUp16, null),\n    disabled: !attr.hasCoordinatesUp,\n    onClick: () => onClick('drill_up')\n  }), layerType !== FACILITY_LAYER && feature && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill down one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowDown16, null),\n    disabled: !attr.hasCoordinatesDown,\n    onClick: () => onClick('drill_down')\n  }), feature && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('View profile'),\n    icon: /*#__PURE__*/React.createElement(IconInfo16, null),\n    onClick: () => onClick('show_info')\n  }), coordinates && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Show longitude/latitude'),\n    icon: /*#__PURE__*/React.createElement(IconLocation16, null),\n    onClick: () => onClick('show_coordinate')\n  }), earthEngineLayers.map(layer => /*#__PURE__*/React.createElement(MenuItem, {\n    key: layer.id,\n    label: i18n.t('Show {{name}}', {\n      name: layer.name.toLowerCase()\n    }),\n    icon: /*#__PURE__*/React.createElement(IconLocation16, null),\n    onClick: () => onClick('show_ee_value', layer.id)\n  }))))));\n};\nContextMenu.propTypes = {\n  closeContextMenu: PropTypes.func.isRequired,\n  openCoordinatePopup: PropTypes.func.isRequired,\n  setOrgUnitProfile: PropTypes.func.isRequired,\n  showEarthEngineValue: PropTypes.func.isRequired,\n  updateLayer: PropTypes.func.isRequired,\n  coordinates: PropTypes.array,\n  earthEngineLayers: PropTypes.array,\n  feature: PropTypes.object,\n  layerConfig: PropTypes.object,\n  layerType: PropTypes.string,\n  map: PropTypes.object,\n  offset: PropTypes.array,\n  position: PropTypes.array\n};\nexport default connect(_ref => {\n  let {\n    contextMenu,\n    map\n  } = _ref;\n  return {\n    ...contextMenu,\n    earthEngineLayers: map.mapViews.filter(view => view.layer === EARTH_ENGINE_LAYER)\n  };\n}, {\n  closeContextMenu,\n  openCoordinatePopup,\n  showEarthEngineValue,\n  setOrgUnitProfile,\n  updateLayer\n})(ContextMenu);","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LegendPosition_root__c5UDc\",\"label\":\"LegendPosition_label__c8WDV\",\"position\":\"LegendPosition_position__kmgPV\",\"legend\":\"LegendPosition_legend__tJveN\",\"selected\":\"LegendPosition_selected__d7ls2\",\"topleft\":\"LegendPosition_topleft__MoCp8\",\"topright\":\"LegendPosition_topright__sxQaF\",\"bottomleft\":\"LegendPosition_bottomleft__L81-F\",\"bottomright\":\"LegendPosition_bottomright__bDagA\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/LegendPosition.module.css';\nexport const legendPositions = ['topleft', 'topright', 'bottomleft', 'bottomright'];\nconst LegendPosition = _ref => {\n  let {\n    position,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.root\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: styles.label\n  }, i18n.t('Legend position')), legendPositions.map(pos => /*#__PURE__*/React.createElement(\"div\", {\n    key: pos,\n    className: cx(styles.position, {\n      [styles.selected]: pos === position\n    }),\n    onClick: pos !== position ? () => onChange(pos) : null\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.legend, styles[pos])\n  }))));\n};\nLegendPosition.propTypes = {\n  position: PropTypes.oneOf(legendPositions).isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default LegendPosition;","// extracted by mini-css-extract-plugin\nexport default {\"downloadLegend\":\"DownloadLegend_downloadLegend__9fEY6 map_box__WtUb7\",\"legend\":\"DownloadLegend_legend__YHJfq\",\"title\":\"DownloadLegend_title__MUxpC\",\"period\":\"DownloadLegend_period__DhS7R\",\"topleft\":\"DownloadLegend_topleft__lDBne\",\"topright\":\"DownloadLegend_topright__e1kx4\",\"bottomleft\":\"DownloadLegend_bottomleft__PHlPo\",\"bottomright\":\"DownloadLegend_bottomright__+qoCR\",\"name\":\"DownloadLegend_name__E9UR9\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Legend from '../legend/Legend.js';\nimport { legendPositions } from './LegendPosition.js';\nimport styles from './styles/DownloadLegend.module.css';\nconst DownloadLegend = _ref => {\n  let {\n    position,\n    layers,\n    showName\n  } = _ref;\n  const legends = layers.filter(layer => layer.legend).map(layer => layer.legend).reverse();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.downloadLegend, styles[position], {\n      [styles.name]: showName && position.substring(0, 3) === 'top'\n    })\n  }, legends.map((legend, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: styles.legend\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.title\n  }, legend.title, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.period\n  }, legend.period)), /*#__PURE__*/React.createElement(Legend, legend))));\n};\nDownloadLegend.propTypes = {\n  layers: PropTypes.array.isRequired,\n  position: PropTypes.oneOf(legendPositions).isRequired,\n  showName: PropTypes.bool.isRequired\n};\nexport default DownloadLegend;","// extracted by mini-css-extract-plugin\nexport default {\"mapName\":\"MapName_mapName__xDOCz\",\"name\":\"MapName_name__PyQgF map_box__WtUb7\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport styles from './styles/MapName.module.css';\nconst MapName = _ref => {\n  let {\n    showName,\n    name\n  } = _ref;\n  return showName && name ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mapName\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles.name} dhis2-maps-title`\n  }, name)) : null;\n};\nMapName.propTypes = {\n  name: PropTypes.string,\n  showName: PropTypes.bool\n};\nexport default connect(_ref2 => {\n  let {\n    map,\n    download\n  } = _ref2;\n  return {\n    name: map.name,\n    showName: download.showDialog ? download.showName : true\n  };\n})(MapName);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"MapContainer_container__4ORPG\",\"download\":\"MapContainer_download__5NwC9\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { setAggregations } from '../../actions/aggregations.js';\nimport { openContextMenu, closeCoordinatePopup } from '../../actions/map.js';\nimport { HEADER_HEIGHT, LAYERS_PANEL_WIDTH, RIGHT_PANEL_WIDTH } from '../../constants/layout.js';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport DownloadLegend from '../download/DownloadLegend.js';\nimport MapLoadingMask from './MapLoadingMask.js';\nimport MapName from './MapName.js';\nimport MapView from './MapView.js';\nimport styles from './styles/MapContainer.module.css';\nconst MapContainer = props => {\n  const {\n    mapViews,\n    bounds,\n    feature,\n    showName,\n    newLayerIsLoading,\n    coordinatePopup,\n    layersPanelOpen,\n    rightPanelOpen,\n    dataTableOpen,\n    dataTableHeight,\n    interpretationModalOpen,\n    isDownload,\n    legendPosition,\n    openContextMenu,\n    closeCoordinatePopup,\n    setAggregations\n  } = props;\n  const [resizeCount, setResizeCount] = useState(0);\n  const basemap = useBasemapConfig(props.basemap);\n  const style = {\n    position: 'absolute',\n    top: HEADER_HEIGHT,\n    left: layersPanelOpen ? LAYERS_PANEL_WIDTH : 0,\n    right: rightPanelOpen ? RIGHT_PANEL_WIDTH : 0,\n    bottom: dataTableOpen ? dataTableHeight : 0\n  };\n  const layers = mapViews.filter(layer => layer.isLoaded);\n  const isLoading = newLayerIsLoading || layers.length !== mapViews.length;\n\n  // Trigger map resize when panels are expanded, collapsed or dragged\n  useEffect(() => {\n    setResizeCount(count => count + 1);\n  }, [layersPanelOpen, rightPanelOpen, dataTableOpen, dataTableHeight]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"dhis2-map-container\",\n    \"data-test\": \"dhis2-map-container\",\n    className: cx(styles.container, {\n      'dhis2-map-download': isDownload,\n      [styles.download]: isDownload\n    })\n  }, /*#__PURE__*/React.createElement(MapName, null), /*#__PURE__*/React.createElement(MapView, {\n    isPlugin: false,\n    basemap: basemap,\n    layers: layers,\n    bounds: bounds,\n    feature: feature,\n    openContextMenu: openContextMenu,\n    coordinatePopup: coordinatePopup,\n    interpretationModalOpen: interpretationModalOpen,\n    closeCoordinatePopup: closeCoordinatePopup,\n    setAggregations: setAggregations,\n    resizeCount: resizeCount\n  }), isDownload && legendPosition && layers.length ? /*#__PURE__*/React.createElement(DownloadLegend, {\n    position: legendPosition,\n    layers: layers,\n    showName: showName\n  }) : null, isLoading && /*#__PURE__*/React.createElement(MapLoadingMask, null)));\n};\nMapContainer.propTypes = {\n  closeCoordinatePopup: PropTypes.func.isRequired,\n  openContextMenu: PropTypes.func.isRequired,\n  setAggregations: PropTypes.func.isRequired,\n  basemap: PropTypes.object,\n  bounds: PropTypes.array,\n  coordinatePopup: PropTypes.array,\n  dataTableHeight: PropTypes.number,\n  dataTableOpen: PropTypes.bool,\n  feature: PropTypes.object,\n  interpretationModalOpen: PropTypes.bool,\n  isDownload: PropTypes.bool,\n  layersPanelOpen: PropTypes.bool,\n  legendPosition: PropTypes.string,\n  mapViews: PropTypes.array,\n  newLayerIsLoading: PropTypes.bool,\n  rightPanelOpen: PropTypes.bool,\n  showName: PropTypes.bool\n};\nexport default connect(_ref => {\n  let {\n    map,\n    download,\n    dataTable,\n    ui,\n    feature,\n    interpretation\n  } = _ref;\n  return {\n    basemap: map.basemap,\n    newLayerIsLoading: map.newLayerIsLoading,\n    coordinatePopup: map.coordinatePopup,\n    mapViews: map.mapViews,\n    bounds: map.bounds,\n    isDownload: download.showDialog,\n    showName: download.showDialog ? download.showName : true,\n    legendPosition: download.showLegend ? download.legendPosition : null,\n    dataTableOpen: !!dataTable,\n    interpretationModalOpen: !!interpretation.id,\n    feature,\n    ...ui\n  };\n}, {\n  openContextMenu,\n  closeCoordinatePopup,\n  setAggregations\n})(MapContainer);","import * as types from '../constants/actionTypes.js';\nexport const setAggregations = payload => ({\n  type: types.AGGREGATIONS_SET,\n  payload\n});","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"OpenAsMapDialog_content__2GKPD\",\"description\":\"OpenAsMapDialog_description__gcyKV\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { clearAnalyticalObject } from '../../actions/analyticalObject.js';\nimport { addLayer } from '../../actions/layers.js';\nimport { getDataDimensionsFromAnalyticalObject, getThematicLayerFromAnalyticalObject } from '../../util/analyticalObject.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/OpenAsMapDialog.module.css';\nclass OpenAsMapDialog extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      selectedDataDims: []\n    });\n    _defineProperty(this, \"onSelectDataDim\", selectedDataDims => {\n      this.setState({\n        selectedDataDims\n      });\n    });\n    _defineProperty(this, \"onProceedClick\", async () => {\n      const {\n        ao,\n        addLayer,\n        clearAnalyticalObject\n      } = this.props;\n      const dataDims = [...this.state.selectedDataDims].reverse();\n      const lastDataId = dataDims[dataDims.length - 1];\n\n      // Call in sequence\n      for (const dataId of dataDims) {\n        const layer = await getThematicLayerFromAnalyticalObject(ao, dataId, dataId === lastDataId);\n        if (layer) {\n          addLayer(layer);\n        }\n      }\n      clearAnalyticalObject();\n    });\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      ao\n    } = this.props;\n    if (ao && ao !== prevProps.ao) {\n      this.setDefaultState();\n    }\n  }\n  setDefaultState() {\n    const dataDims = getDataDimensionsFromAnalyticalObject(this.props.ao);\n\n    // Select the first data dimension\n    if (dataDims && dataDims.length) {\n      this.onSelectDataDim([dataDims[0].id]);\n    }\n  }\n  render() {\n    const {\n      ao,\n      showDialog,\n      clearAnalyticalObject\n    } = this.props;\n    const {\n      selectedDataDims\n    } = this.state;\n    if (!showDialog) {\n      return null;\n    }\n    const dataDims = getDataDimensionsFromAnalyticalObject(ao);\n    const disableProceedBtn = !selectedDataDims.length;\n    return /*#__PURE__*/React.createElement(Modal, {\n      small: true,\n      position: \"middle\",\n      onClose: this.onClose\n    }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Open as map')), /*#__PURE__*/React.createElement(ModalContent, null, dataDims.length > 1 && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.description\n    }, i18n.t('This chart/table contains {{numItems}} data items. Choose which items you want to import from the list below. Each data item will be created as a map layer.', {\n      numItems: dataDims.length\n    })), /*#__PURE__*/React.createElement(SelectField, {\n      label: i18n.t('Data items'),\n      items: dataDims,\n      value: selectedDataDims,\n      multiple: true,\n      onChange: this.onSelectDataDim\n    }))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n      end: true\n    }, /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      onClick: clearAnalyticalObject\n    }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n      disabled: disableProceedBtn,\n      primary: true,\n      onClick: this.onProceedClick\n    }, i18n.t('Proceed')))));\n  }\n}\n_defineProperty(OpenAsMapDialog, \"propTypes\", {\n  addLayer: PropTypes.func.isRequired,\n  clearAnalyticalObject: PropTypes.func.isRequired,\n  showDialog: PropTypes.bool.isRequired,\n  ao: PropTypes.object\n});\nexport default connect(state => ({\n  showDialog: !!state.analyticalObject,\n  ao: state.analyticalObject\n}), {\n  addLayer,\n  clearAnalyticalObject\n})(OpenAsMapDialog);","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitData\":\"OrgUnitData_orgUnitData__ITQsf\",\"periodSelect\":\"OrgUnitData_periodSelect__dViFh\",\"dataTable\":\"OrgUnitData_dataTable__SLpmV\",\"loadingMask\":\"OrgUnitData_loadingMask__86WXT\",\"noData\":\"OrgUnitData_noData__uy7mH\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { getFixedPeriodsByType, filterFuturePeriods } from '../../util/periods.js';\nimport PeriodSelect from '../periods/PeriodSelect.js';\nimport styles from './styles/OrgUnitData.module.css';\nconst ORGUNIT_PROFILE_QUERY = {\n  profile: {\n    resource: 'organisationUnitProfile',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/data`;\n    },\n    params: _ref2 => {\n      let {\n        period\n      } = _ref2;\n      return {\n        period\n      };\n    }\n  }\n};\n\n// Only YEARLY period type is supported in first version\nconst periodType = 'YEARLY';\nconst currentYear = String(new Date().getFullYear());\nconst periods = getFixedPeriodsByType(periodType, currentYear);\nconst defaultPeriod = filterFuturePeriods(periods)[0] || periods[0];\n\n/*\n *  Displays a period selector and org unit data items\n * (data elements, indicators, reporting rates, program indicators)\n */\nconst OrgUnitData = _ref3 => {\n  let {\n    id\n  } = _ref3;\n  const [period, setPeriod] = useState(defaultPeriod);\n  const {\n    loading,\n    data,\n    refetch\n  } = useDataQuery(ORGUNIT_PROFILE_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (id && period) {\n      refetch({\n        id,\n        period: period.id\n      });\n    }\n  }, [id, period, refetch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitData,\n    \"data-test\": \"org-unit-data\"\n  }, /*#__PURE__*/React.createElement(PeriodSelect, {\n    label: null,\n    periodType: periodType,\n    period: period,\n    onChange: setPeriod,\n    className: styles.periodSelect\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dataTable\n  }, loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loadingMask\n  }, /*#__PURE__*/React.createElement(CircularLoader, null)), Array.isArray(data === null || data === void 0 ? void 0 : data.profile.dataItems) && data.profile.dataItems.length ? /*#__PURE__*/React.createElement(\"table\", {\n    \"data-test\": \"org-unit-data-table\"\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, data.profile.dataItems.map(_ref4 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref4;\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: id\n    }, /*#__PURE__*/React.createElement(\"th\", null, label), /*#__PURE__*/React.createElement(\"td\", null, value));\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noData\n  }, i18n.t('No data found for this period.'))));\n};\nOrgUnitData.propTypes = {\n  id: PropTypes.string.isRequired\n};\nexport default OrgUnitData;","// extracted by mini-css-extract-plugin\nexport default {\"listItem\":\"ListItem_listItem__joSOw\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ListItem.module.css';\n\n// Left aligned label (no wrap) and right align value of variable width\nconst ListItem = _ref => {\n  let {\n    label,\n    formatter,\n    children\n  } = _ref;\n  return children !== null && children !== undefined && children !== '' ? /*#__PURE__*/React.createElement(\"table\", {\n    className: styles.listItem\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, label), /*#__PURE__*/React.createElement(\"td\", null, formatter ? formatter(children) : children)))) : null;\n};\nListItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  formatter: PropTypes.func\n};\nexport default ListItem;","// extracted by mini-css-extract-plugin\nexport default {\"info\":\"OrgUnitInfo_info__VLP7i\",\"level\":\"OrgUnitInfo_level__0H9j0\",\"desc\":\"OrgUnitInfo_desc__8tqdc\",\"list\":\"OrgUnitInfo_list__tFY1r\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconDimensionOrgUnit16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { numberPrecision } from '../../util/numbers.js';\nimport { formatDate } from '../../util/time.js';\nimport ListItem from '../core/ListItem.js';\nimport styles from './styles/OrgUnitInfo.module.css';\nexport const coordFormat = numberPrecision(6); // Meter precision for longitude an latitude\n\n/*\n * Displays the fixed information for an org unit together with org unit groups (above) and metadata attributes (below)\n *\n * Available org unit info fields:\n * https://github.com/dhis2/dhis2-core/blob/master/dhis-2/dhis-services/dhis-service-reporting/src/main/java/org/hisp/dhis/orgunitprofile/OrgUnitInfo.java\n */\nconst OrgUnitInfo = _ref => {\n  let {\n    address,\n    attributes,\n    closedDate,\n    code,\n    comment,\n    contactPerson,\n    description,\n    email,\n    featureType,\n    groupSets,\n    id,\n    imageId,\n    latitude,\n    level,\n    levelName,\n    longitude,\n    name,\n    openingDate,\n    parentName,\n    phoneNumber,\n    shortName,\n    url\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.info,\n    \"data-test\": \"org-unit-info\"\n  }, imageId && /*#__PURE__*/React.createElement(\"img\", {\n    src: `${baseUrl}/api/fileResources/${imageId}/data`,\n    alt: i18n.t('Image of the organisation unit')\n  }), name && /*#__PURE__*/React.createElement(\"h3\", null, name), (level || levelName) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.level\n  }, /*#__PURE__*/React.createElement(IconDimensionOrgUnit16, null), i18n.t('Level'), \":\", ' ', levelName ? `${levelName}${level ? ` (${level})` : ''}` : level), parentName && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.level\n  }, /*#__PURE__*/React.createElement(IconDimensionOrgUnit16, null), i18n.t('Parent'), \": \", parentName), description && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.desc\n  }, description), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list\n  }, groupSets.map(_ref2 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: id,\n      label: label\n    }, value);\n  }), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Code')\n  }, code), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Short name')\n  }, shortName), featureType === 'POINT' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Opening date'),\n    formatter: formatDate\n  }, openingDate), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Closed date'),\n    formatter: formatDate\n  }, closedDate)), url && /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('URL')\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: url,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, i18n.t('Link'))), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Contact')\n  }, contactPerson), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Email')\n  }, email), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Address')\n  }, address), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Phone')\n  }, phoneNumber), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Longitude'),\n    formatter: coordFormat\n  }, longitude), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Latitude'),\n    formatter: coordFormat\n  }, latitude), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('ID')\n  }, id), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Comment')\n  }, comment), attributes.map(_ref3 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: id,\n      label: label\n    }, value);\n  })));\n};\nOrgUnitInfo.propTypes = {\n  attributes: PropTypes.array.isRequired,\n  groupSets: PropTypes.array.isRequired,\n  id: PropTypes.string.isRequired,\n  address: PropTypes.string,\n  closedDate: PropTypes.string,\n  code: PropTypes.string,\n  comment: PropTypes.string,\n  contactPerson: PropTypes.string,\n  description: PropTypes.string,\n  email: PropTypes.string,\n  featureType: PropTypes.string,\n  imageId: PropTypes.string,\n  latitude: PropTypes.number,\n  level: PropTypes.number,\n  levelName: PropTypes.string,\n  longitude: PropTypes.number,\n  name: PropTypes.string,\n  openingDate: PropTypes.string,\n  parentName: PropTypes.string,\n  phoneNumber: PropTypes.string,\n  shortName: PropTypes.string,\n  url: PropTypes.string\n};\nexport default OrgUnitInfo;","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"OrgUnitProfile_drawer__9OzQ+\",\"header\":\"OrgUnitProfile_header__Iohmm\",\"close\":\"OrgUnitProfile_close__zrxvA\",\"content\":\"OrgUnitProfile_content__vagrs\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, IconCross24 } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeOrgUnitProfile } from '../../actions/orgUnits.js';\nimport Drawer from '../core/Drawer.js';\nimport OrgUnitData from './OrgUnitData.js';\nimport OrgUnitInfo from './OrgUnitInfo.js';\nimport styles from './styles/OrgUnitProfile.module.css';\nconst ORGUNIT_PROFILE_QUERY = {\n  profile: {\n    resource: 'organisationUnitProfile',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/data`;\n    }\n  }\n};\n\n/*\n *  Loads an org unit profile and displays it in a right drawer component\n */\nconst OrgUnitProfile = () => {\n  const id = useSelector(state => state.orgUnitProfile);\n  const dispatch = useDispatch();\n  const {\n    loading,\n    data,\n    refetch\n  } = useDataQuery(ORGUNIT_PROFILE_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (id) {\n      refetch({\n        id\n      });\n    }\n  }, [id, refetch]);\n  if (!id) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Drawer, {\n    className: styles.drawer,\n    dataTest: \"org-unit-profile\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, i18n.t('Organisation unit profile'), /*#__PURE__*/React.createElement(\"span\", {\n    role: \"button\",\n    \"aria-label\": i18n.t('Close'),\n    className: styles.close,\n    onClick: () => dispatch(closeOrgUnitProfile())\n  }, /*#__PURE__*/React.createElement(IconCross24, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, loading && /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)), !loading && (data === null || data === void 0 ? void 0 : data.profile) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(OrgUnitInfo, _extends({}, data.profile.info, {\n    groupSets: data.profile.groupSets,\n    attributes: data.profile.attributes\n  })), /*#__PURE__*/React.createElement(OrgUnitData, {\n    id: id\n  }))));\n};\nexport default OrgUnitProfile;","import * as types from '../constants/actionTypes.js';\n\n// Set download state (download dialog is open)\nexport const toggleDownloadDialog = show => ({\n  type: types.DOWNLOAD_DIALOG_TOGGLE,\n  payload: show\n});\n\n// Whether the name should be included on the map download\nexport const toggleDownloadShowName = show => ({\n  type: types.DOWNLOAD_NAME_SHOW_TOGGLE,\n  payload: show\n});\n\n// Whether the legend should be included on the map download\nexport const toggleDownloadShowLegend = show => ({\n  type: types.DOWNLOAD_LEGEND_SHOW_TOGGLE,\n  payload: show\n});\n\n// Legend corner position\nexport const setDownloadLegendPosition = position => ({\n  type: types.DOWNLOAD_LEGEND_POSITION_SET,\n  payload: position\n});","import FileSaver from 'file-saver';\nimport { toBlob } from 'html-to-image';\nexport const downloadMapImage = (sourceEl, filename) => toBlob(sourceEl).then(blob => FileSaver.saveAs(blob, filename));\nconst toStringFn = {}.toString;\n\n// https://github.com/bubkoo/html-to-image#browsers\n// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/svg/foreignobject.js\n// TODO: Safari is not supported, as it uses a stricter security model on <foreignObject> tag\nexport const downloadSupport = () => {\n  return !!document.createElementNS && /SVGForeignObject/.test(toStringFn.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));\n};","// extracted by mini-css-extract-plugin\nexport default {\"modalContent\":\"DownloadDialog_modalContent__5jx9g\",\"checkbox\":\"DownloadDialog_checkbox__L9G3e\"};","import i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport React, { useState, useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { toggleDownloadDialog, toggleDownloadShowName, toggleDownloadShowLegend, setDownloadLegendPosition } from '../../actions/download.js';\nimport { downloadMapImage, downloadSupport } from '../../util/export-image.js';\nimport { Checkbox } from '../core/index.js';\nimport LegendPosition from './LegendPosition.js';\nimport styles from './styles/DownloadDialog.module.css';\nconst DownloadDialog = () => {\n  const [error, setError] = useState(null);\n  const dispatch = useDispatch();\n  const {\n    mapViews,\n    name: mapName\n  } = useSelector(state => state.map);\n  const {\n    showDialog,\n    showName,\n    showLegend,\n    legendPosition\n  } = useSelector(state => state.download);\n  const hasLegend = useMemo(() => mapViews.filter(layer => layer.legend).length > 0, [mapViews]);\n  const hasName = mapName !== undefined;\n  if (!showDialog) {\n    return null;\n  }\n  const isSupported = downloadSupport() && !error;\n  const onClose = () => dispatch(toggleDownloadDialog(false));\n  const onDownload = () => {\n    const mapEl = document.getElementById('dhis2-map-container');\n    const filename = `map-${Math.random().toString(36).substring(7)}.png`;\n    downloadMapImage(mapEl, filename).then(onClose).catch(setError);\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    small: true,\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Download map')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.modalContent\n  }, isSupported ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show name'),\n    checked: showName,\n    disabled: !hasName,\n    onChange: v => dispatch(toggleDownloadShowName(v))\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show legend'),\n    checked: showLegend,\n    disabled: !hasLegend,\n    onChange: v => dispatch(toggleDownloadShowLegend(v))\n  }), hasLegend && showLegend && /*#__PURE__*/React.createElement(LegendPosition, {\n    position: legendPosition,\n    onChange: v => dispatch(setDownloadLegendPosition(v))\n  })) : i18n.t('Map download is not supported by your browser. Try Google Chrome or Firefox.'))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onClose\n  }, isSupported ? i18n.t('Cancel') : i18n.t('Close')), isSupported && /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onDownload\n  }, i18n.t('Download')))));\n};\nexport default DownloadDialog;","import i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { toggleDownloadDialog } from '../../actions/download.js';\nimport { MenuButton } from '../core/index.js';\nimport DownloadDialog from './DownloadDialog.js';\nconst DownloadButton = () => {\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuButton, {\n    onClick: () => dispatch(toggleDownloadDialog(true))\n  }, i18n.t('Download')), /*#__PURE__*/React.createElement(DownloadDialog, null));\n};\nexport default DownloadButton;","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"InterpretationsToggle_button__GHoly\"};","import i18n from '@dhis2/d2-i18n';\nimport { IconChevronLeft24, IconChevronRight24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { openInterpretationsPanel, closeInterpretationsPanel } from '../../actions/ui.js';\nimport { MenuButton } from '../core/index.js';\nimport styles from './styles/InterpretationsToggle.module.css';\nconst InterpretationsToggle = _ref => {\n  let {\n    interpretationsOpen,\n    interpretationsEnabled,\n    openInterpretationsPanel,\n    closeInterpretationsPanel\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.button\n  }, /*#__PURE__*/React.createElement(MenuButton, {\n    onClick: interpretationsOpen ? closeInterpretationsPanel : openInterpretationsPanel,\n    disabled: !interpretationsEnabled\n  }, interpretationsOpen ? /*#__PURE__*/React.createElement(IconChevronRight24, null) : /*#__PURE__*/React.createElement(IconChevronLeft24, null), i18n.t('Interpretations')));\n};\nInterpretationsToggle.propTypes = {\n  closeInterpretationsPanel: PropTypes.func.isRequired,\n  interpretationsEnabled: PropTypes.bool.isRequired,\n  interpretationsOpen: PropTypes.bool.isRequired,\n  openInterpretationsPanel: PropTypes.func.isRequired\n};\nexport default connect(state => ({\n  interpretationsOpen: state.ui.rightPanelOpen && !state.orgUnitProfile,\n  interpretationsEnabled: Boolean(state.map.id)\n}), {\n  openInterpretationsPanel,\n  closeInterpretationsPanel\n})(InterpretationsToggle);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Layer_container__trKbO\",\"image\":\"Layer_image__BhkIA\",\"noImage\":\"Layer_noImage__oZTQr\",\"name\":\"Layer_name__mVlxY\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Layer.module.css';\nconst Layer = _ref => {\n  let {\n    layer,\n    onClick\n  } = _ref;\n  const {\n    img,\n    type,\n    name\n  } = layer;\n  const label = name || i18n.t(type);\n  const dataTest = `addlayeritem-${label.toLowerCase().replace(/\\s/g, '_')}`;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    onClick: () => onClick(layer),\n    \"data-test\": dataTest\n  }, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  }, i18n.t('External layer')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.name\n  }, label));\n};\nLayer.propTypes = {\n  layer: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired\n};\nexport default Layer;","// extracted by mini-css-extract-plugin\nexport default {\"layerList\":\"LayerList_layerList__5z1Zw\",\"list\":\"LayerList_list__QSLzN\",\"split\":\"LayerList_split__QTdIt\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Layer from './Layer.js';\nimport styles from './styles/LayerList.module.css';\nconst LayerList = _ref => {\n  let {\n    layers,\n    isSplitView,\n    onLayerSelect\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.layerList\n  }, isSplitView ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.split\n  }, i18n.t('Split view can not be combined with other layer types.')) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list,\n    \"data-test\": \"addlayerlist\"\n  }, layers.map((layer, index) => /*#__PURE__*/React.createElement(Layer, {\n    key: `layer-${index}`,\n    onClick: onLayerSelect,\n    layer: layer\n  }))));\n};\nLayerList.propTypes = {\n  layers: PropTypes.array.isRequired,\n  onLayerSelect: PropTypes.func.isRequired,\n  isSplitView: PropTypes.bool\n};\nexport default LayerList;","import { Popover } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { addLayer, editLayer } from '../../../actions/layers.js';\nimport { EXTERNAL_LAYER } from '../../../constants/layers.js';\nimport { isSplitViewMap } from '../../../util/helpers.js';\nimport LayerList from './LayerList.js';\nconst AddLayerPopover = _ref => {\n  let {\n    anchorEl,\n    layers = [],\n    isSplitView,\n    addLayer,\n    editLayer,\n    onClose\n  } = _ref;\n  const onLayerSelect = layer => {\n    const config = {\n      ...layer\n    };\n    layer.layer === EXTERNAL_LAYER ? addLayer(config) : editLayer(config);\n    onClose();\n  };\n  return /*#__PURE__*/React.createElement(Popover, {\n    arrow: false,\n    reference: anchorEl,\n    placement: \"bottom-start\",\n    maxWidth: 700,\n    onClickOutside: onClose,\n    dataTest: \"addlayerpopover\"\n  }, /*#__PURE__*/React.createElement(LayerList, {\n    layers: layers,\n    isSplitView: isSplitView,\n    onLayerSelect: onLayerSelect\n  }));\n};\nAddLayerPopover.propTypes = {\n  addLayer: PropTypes.func.isRequired,\n  editLayer: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  anchorEl: PropTypes.object,\n  isSplitView: PropTypes.bool,\n  layers: PropTypes.array\n};\nexport default connect(_ref2 => {\n  let {\n    map,\n    layers\n  } = _ref2;\n  return {\n    layers,\n    isSplitView: isSplitViewMap(map.mapViews)\n  };\n}, {\n  addLayer,\n  editLayer\n})(AddLayerPopover);","// extracted by mini-css-extract-plugin\nexport default {\"addLayerBtn\":\"AddLayerButton_addLayerBtn__FRlt0\",\"btnContent\":\"AddLayerButton_btnContent__Z5H9I\"};","import i18n from '@dhis2/d2-i18n';\nimport { IconAddCircle24 } from '@dhis2/ui';\nimport React, { Fragment, useState, useRef } from 'react';\nimport { MenuButton } from '../../core/index.js';\nimport AddLayerPopover from './AddLayerPopover.js';\nimport styles from './styles/AddLayerButton.module.css';\nconst AddLayerButton = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const buttonRef = useRef();\n  const toggleDialog = () => setIsOpen(!isOpen);\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addLayerBtn,\n    ref: buttonRef\n  }, /*#__PURE__*/React.createElement(MenuButton, {\n    onClick: toggleDialog,\n    dataTest: \"add-layer-button\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.btnContent\n  }, /*#__PURE__*/React.createElement(IconAddCircle24, null), i18n.t('Add layer')))), isOpen && /*#__PURE__*/React.createElement(AddLayerPopover, {\n    anchorEl: buttonRef,\n    onClose: toggleDialog\n  }));\n};\nexport default AddLayerButton;","import { FileMenu as UiFileMenu } from '@dhis2/analytics';\nimport { useDataMutation, useDataEngine } from '@dhis2/app-runtime';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { newMap, tOpenMap, setMapProps } from '../../actions/map.js';\nimport { ALERT_CRITICAL, ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC, ALERT_SUCCESS_DELAY } from '../../constants/alerts.js';\nimport { cleanMapConfig } from '../../util/favorites.js';\nimport { fetchMap } from '../../util/requests.js';\nimport { useSystemSettings } from '../SystemSettingsProvider.js';\nconst saveMapMutation = {\n  resource: 'maps',\n  type: 'update',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: {\n    skipTranslation: true,\n    skipSharing: true\n  },\n  data: _ref2 => {\n    let {\n      data\n    } = _ref2;\n    return data;\n  }\n};\nconst saveAsNewMapMutation = {\n  resource: 'maps',\n  type: 'create',\n  data: _ref3 => {\n    let {\n      data\n    } = _ref3;\n    return data;\n  }\n};\nconst getMapName = name => name || i18n.t('Untitled map, {{date}}', {\n  date: new Date().toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: '2-digit'\n  })\n});\nconst getSavedMessage = name => i18n.t('Map \"{{- name}}\" is saved.', {\n  name\n});\nconst getSaveFailureMessage = message => i18n.t('Failed to save map: {{message}}', {\n  message,\n  nsSeparator: ';'\n});\nconst FileMenu = _ref4 => {\n  let {\n    map,\n    newMap,\n    tOpenMap,\n    setMapProps\n  } = _ref4;\n  const {\n    d2\n  } = useD2();\n  const engine = useDataEngine();\n  const {\n    keyDefaultBaseMap\n  } = useSystemSettings();\n  //alerts\n  const saveAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC);\n  const saveAsAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC);\n  const deleteAlert = useAlert('Map successfully deleted', ALERT_SUCCESS_DELAY);\n  const fileMenuErrorAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const openMapErrorAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const [saveMapMutate] = useDataMutation(saveMapMutation, {\n    onError: e => saveAlert.show({\n      msg: getSaveFailureMessage(e.message),\n      isError: true\n    })\n  });\n  const [saveAsNewMapMutate] = useDataMutation(saveAsNewMapMutation, {\n    onError: e => saveAsAlert.show({\n      msg: getSaveFailureMessage(e.message),\n      isError: true\n    })\n  });\n  const onFileMenuError = e => fileMenuErrorAlert.show({\n    msg: e.message\n  });\n  const saveMap = async () => {\n    const config = cleanMapConfig({\n      config: map,\n      defaultBasemapId: keyDefaultBaseMap\n    });\n    if (config.mapViews) {\n      config.mapViews.forEach(view => delete view.id);\n    }\n    await saveMapMutate({\n      id: map.id,\n      data: config\n    });\n    saveAlert.show({\n      msg: getSavedMessage(config.name)\n    });\n  };\n  const openMap = async id => {\n    const error = await tOpenMap(id, keyDefaultBaseMap, engine);\n    if (error) {\n      openMapErrorAlert.show({\n        msg: i18n.t(`Error while opening map: ${error.message}`, {\n          nsSeparator: ';'\n        })\n      });\n    }\n  };\n  const saveAsNewMap = async _ref5 => {\n    let {\n      name,\n      description\n    } = _ref5;\n    const config = {\n      ...cleanMapConfig({\n        config: map,\n        defaultBasemapId: keyDefaultBaseMap\n      }),\n      name: getMapName(name),\n      description: description\n    };\n    delete config.id;\n    if (config.mapViews) {\n      config.mapViews.forEach(view => delete view.id);\n    }\n    const response = await saveAsNewMapMutate({\n      data: config\n    });\n    if (response.status === 'OK') {\n      const newMapConfig = await fetchMap(response.response.uid, engine, keyDefaultBaseMap);\n      delete newMapConfig.mapViews;\n      setMapProps(newMapConfig);\n      saveAsAlert.show({\n        msg: getSavedMessage(config.name)\n      });\n    } else {\n      saveAsAlert.show({\n        msg: getSaveFailureMessage(response.message),\n        isError: true\n      });\n    }\n  };\n  const onRename = _ref6 => {\n    let {\n      name,\n      description\n    } = _ref6;\n    return setMapProps({\n      name: getMapName(name),\n      description\n    });\n  };\n  const onDelete = () => {\n    newMap();\n    deleteAlert.show();\n  };\n  return /*#__PURE__*/React.createElement(UiFileMenu, {\n    currentUser: d2.currentUser,\n    fileType: \"map\",\n    fileObject: map,\n    onNew: newMap,\n    onOpen: openMap,\n    onSave: saveMap,\n    onSaveAs: saveAsNewMap,\n    onRename: onRename,\n    onDelete: onDelete,\n    onError: onFileMenuError\n  });\n};\nFileMenu.propTypes = {\n  map: PropTypes.object.isRequired,\n  newMap: PropTypes.func.isRequired,\n  setMapProps: PropTypes.func.isRequired,\n  tOpenMap: PropTypes.func.isRequired\n};\nexport default connect(_ref7 => {\n  let {\n    map\n  } = _ref7;\n  return {\n    map\n  };\n}, {\n  newMap,\n  tOpenMap,\n  setMapProps\n})(FileMenu);","// extracted by mini-css-extract-plugin\nexport default {\"appMenu\":\"AppMenu_appMenu__gT4Lv\"};","import React from 'react';\nimport DownloadButton from '../download/DownloadButton.js';\nimport InterpretationsToggle from '../interpretations/InterpretationsToggle.js';\nimport AddLayerButton from '../layers/overlays/AddLayerButton.js';\nimport FileMenu from './FileMenu.js';\nimport styles from './styles/AppMenu.module.css';\nconst AppMenu = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.appMenu\n}, /*#__PURE__*/React.createElement(AddLayerButton, null), /*#__PURE__*/React.createElement(FileMenu, null), /*#__PURE__*/React.createElement(DownloadButton, null), /*#__PURE__*/React.createElement(InterpretationsToggle, null));\nexport default AppMenu;","// extracted by mini-css-extract-plugin\nexport default {\"app\":\"App_app__kOkTq\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useSetting } from '@dhis2/app-service-datastore';\nimport { CssVariables } from '@dhis2/ui';\nimport isEmpty from 'lodash/isEmpty';\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { tSetAnalyticalObject } from '../../actions/analyticalObject.js';\nimport { removeBingBasemaps, setBingMapsApiKey } from '../../actions/basemap.js';\nimport { tSetExternalLayers } from '../../actions/externalLayers.js';\nimport { tOpenMap } from '../../actions/map.js';\nimport { CURRENT_AO_KEY } from '../../util/analyticalObject.js';\nimport { getUrlParameter } from '../../util/requests.js';\nimport AlertStack from '../alerts/AlertStack.js';\nimport BottomPanel from '../datatable/BottomPanel.js';\nimport LayerEdit from '../edit/LayerEdit.js';\nimport InterpretationsPanel from '../interpretations/InterpretationsPanel.js';\nimport LayersPanel from '../layers/LayersPanel.js';\nimport LayersToggle from '../layers/LayersToggle.js';\nimport LayersLoader from '../loaders/LayersLoader.js';\nimport ContextMenu from '../map/ContextMenu.js';\nimport MapContainer from '../map/MapContainer.js';\nimport OpenAsMapDialog from '../openAs/OpenAsMapDialog.js';\nimport OrgUnitProfile from '../orgunits/OrgUnitProfile.js';\nimport { useSystemSettings } from '../SystemSettingsProvider.js';\nimport AppMenu from './AppMenu.js';\nimport styles from './styles/App.module.css';\nconst App = () => {\n  const [basemapsLoaded, setBasemapsLoaded] = useState(false);\n  const systemSettings = useSystemSettings();\n  const engine = useDataEngine();\n  const [currentAO] = useSetting(CURRENT_AO_KEY);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    async function fetchData() {\n      await dispatch(tSetExternalLayers(engine));\n      setBasemapsLoaded(true);\n      const mapId = getUrlParameter('id');\n      if (mapId) {\n        await dispatch(tOpenMap(mapId, systemSettings.keyDefaultBaseMap, engine));\n      } else if (getUrlParameter('currentAnalyticalObject') === 'true') {\n        await dispatch(tSetAnalyticalObject(currentAO));\n      }\n    }\n    fetchData();\n  }, [engine, currentAO, systemSettings.keyDefaultBaseMap, dispatch]);\n  useEffect(() => {\n    if (!isEmpty(systemSettings)) {\n      if (!systemSettings.keyBingMapsApiKey) {\n        dispatch(removeBingBasemaps());\n      } else {\n        dispatch(setBingMapsApiKey(systemSettings.keyBingMapsApiKey));\n      }\n    }\n  }, [systemSettings, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.app\n  }, /*#__PURE__*/React.createElement(AppMenu, null), /*#__PURE__*/React.createElement(InterpretationsPanel, null), basemapsLoaded && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(LayersToggle, null), /*#__PURE__*/React.createElement(LayersPanel, null), /*#__PURE__*/React.createElement(LayersLoader, null), /*#__PURE__*/React.createElement(MapContainer, null)), /*#__PURE__*/React.createElement(BottomPanel, null), /*#__PURE__*/React.createElement(LayerEdit, null), /*#__PURE__*/React.createElement(ContextMenu, null), /*#__PURE__*/React.createElement(AlertStack, null), /*#__PURE__*/React.createElement(OpenAsMapDialog, null), /*#__PURE__*/React.createElement(OrgUnitProfile, null), /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    theme: true\n  }));\n};\nexport default App;","import * as types from '../constants/actionTypes.js';\nconst dataTable = function () {\n  var _action$payload;\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let layerId;\n  switch (action.type) {\n    case types.AGGREGATIONS_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return {};\n    case types.LAYER_REMOVE:\n    case types.LAYER_UPDATE:\n      layerId = action.id || ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.id);\n      return layerId && state[layerId] ? {\n        ...state,\n        [layerId]: undefined\n      } : state;\n    default:\n      return state;\n  }\n};\nexport default dataTable;","import * as types from '../constants/actionTypes.js';\nconst analyticalObject = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.ANALYTICAL_OBJECT_SET:\n      return action.payload;\n    case types.ANALYTICAL_OBJECT_CLEAR:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default analyticalObject;","import * as types from '../constants/actionTypes.js';\nimport { defaultBasemaps } from '../constants/basemaps.js';\nimport { BING_LAYER } from '../constants/layers.js';\nconst basemaps = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultBasemaps();\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.BASEMAPS_ADD:\n      return state.concat(action.payload);\n    case types.BASEMAP_REMOVE:\n      return state.filter(basemap => basemap.id !== action.id);\n    case types.BASEMAP_REMOVE_BING_MAPS:\n      return state.filter(layer => layer.config.type !== BING_LAYER);\n    case types.BASEMAP_BING_KEY_SET:\n      return state.map(layer => {\n        if (layer.config.type !== BING_LAYER) {\n          return layer;\n        }\n        return {\n          ...layer,\n          config: {\n            ...layer.config,\n            apiKey: action.key\n          }\n        };\n      });\n    default:\n      return state;\n  }\n};\nexport default basemaps;","import * as types from '../constants/actionTypes.js';\nconst contextMenu = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.MAP_CONTEXT_MENU_OPEN:\n      return action.payload;\n    case types.MAP_CONTEXT_MENU_CLOSE:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default contextMenu;","import * as types from '../constants/actionTypes.js';\nconst dataTable = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.DATA_TABLE_OPEN:\n      return action.id;\n    case types.DATA_TABLE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return null;\n    case types.DATA_TABLE_TOGGLE:\n      return state === action.id ? null : action.id;\n    case types.LAYER_REMOVE:\n      return state === action.id ? null : state;\n    default:\n      return state;\n  }\n};\nexport default dataTable;","import * as types from '../constants/actionTypes.js';\nconst defaultState = {\n  showDialog: false,\n  showName: true,\n  showLegend: true,\n  legendPosition: 'bottomright'\n};\nconst download = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.DOWNLOAD_DIALOG_TOGGLE:\n      return {\n        ...state,\n        showDialog: action.payload\n      };\n    case types.DOWNLOAD_NAME_SHOW_TOGGLE:\n      return {\n        ...state,\n        showName: action.payload\n      };\n    case types.DOWNLOAD_LEGEND_SHOW_TOGGLE:\n      return {\n        ...state,\n        showLegend: action.payload\n      };\n    case types.DOWNLOAD_LEGEND_POSITION_SET:\n      return {\n        ...state,\n        legendPosition: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport default download;","import * as types from '../constants/actionTypes.js';\nconst feature = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.FEATURE_HIGHLIGHT:\n      return action.payload ? {\n        ...action.payload\n      } : null;\n    default:\n      return state;\n  }\n};\nexport default feature;","import * as types from '../constants/actionTypes.js';\nconst interpretation = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.INTERPRETATION_SET:\n      return {\n        ...state,\n        id: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport default interpretation;","import * as types from '../constants/actionTypes.js';\nimport { EVENT_STATUS_ALL } from '../constants/eventStatuses.js';\nimport { CLASSIFICATION_SINGLE_COLOR, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS, CLASSIFICATION_PREDEFINED, THEMATIC_CHOROPLETH, EE_BUFFER, NONE } from '../constants/layers.js';\nimport { START_END_DATES } from '../constants/periods.js';\nimport { setFiltersFromPeriod, setDataItemInColumns, setOrgUnitPathInRows, removePeriodFromFilters, changeDimensionInFilters, removeDimensionFromFilters } from '../util/analytics.js';\nconst layerEdit = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let columns;\n  let newState;\n  let program;\n  switch (action.type) {\n    case types.LAYER_EDIT:\n      delete action.payload.img;\n      return action.payload;\n    case types.LAYER_CANCEL:\n      return null;\n    case types.LAYER_EDIT_PROGRAM_SET:\n      program = action.program;\n      return {\n        ...state,\n        program: program ? {\n          ...program\n        } : null,\n        columns: [],\n        programStage: null,\n        styleDataItem: null\n      };\n    case types.LAYER_EDIT_PROGRAM_STAGE_SET:\n      return {\n        ...state,\n        programStage: {\n          ...action.programStage\n        },\n        columns: [],\n        styleDataItem: null\n      };\n    case types.LAYER_EDIT_VALUE_TYPE_SET:\n      return {\n        ...state,\n        valueType: action.valueType,\n        columns: action.keepColumns ? state.columns : [] // Kept if favorite is loaded\n      };\n\n    case types.LAYER_EDIT_INDICATOR_GROUP_SET:\n      return {\n        ...state,\n        indicatorGroup: {\n          id: action.indicatorGroup.id,\n          name: action.indicatorGroup.name\n        },\n        columns: []\n      };\n    case types.LAYER_EDIT_DATA_ELEMENT_GROUP_SET:\n      return {\n        ...state,\n        dataElementGroup: {\n          id: action.dataElementGroup.id,\n          name: action.dataElementGroup.name\n        },\n        columns: []\n      };\n    case types.LAYER_EDIT_OPERAND_SET:\n      return {\n        ...state,\n        operand: action.operand,\n        columns: []\n      };\n    case types.LAYER_EDIT_DATA_ITEM_SET:\n      return {\n        ...state,\n        columns: setDataItemInColumns(action.dataItem, action.dimension),\n        name: null\n      };\n    case types.LAYER_EDIT_PERIOD_NAME_SET:\n      return {\n        ...state,\n        periodName: action.periodName\n      };\n    case types.LAYER_EDIT_PERIOD_TYPE_SET:\n      return {\n        ...state,\n        periodType: action.periodType.id,\n        filters: action.clearPeriod ? removePeriodFromFilters(state.filters) : state.filters\n      };\n    case types.LAYER_EDIT_PERIOD_SET:\n      return {\n        ...state,\n        filters: action.period.id !== START_END_DATES ? setFiltersFromPeriod(state.filters, action.period) : []\n      };\n    case types.LAYER_EDIT_RENDERING_STRATEGY_SET:\n      return {\n        ...state,\n        renderingStrategy: action.payload\n      };\n    case types.LAYER_EDIT_START_DATE_SET:\n      return {\n        ...state,\n        startDate: action.startDate\n      };\n    case types.LAYER_EDIT_END_DATE_SET:\n      return {\n        ...state,\n        endDate: action.endDate\n      };\n    case types.LAYER_EDIT_AGGREGATION_TYPE_SET:\n      // DEFAULT aggregation type is not stored\n      if (action.aggregationType === 'DEFAULT') {\n        const newState = {\n          ...state\n        };\n        delete newState.aggregationType;\n        return newState;\n      }\n      return {\n        ...state,\n        aggregationType: action.aggregationType\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_ADD:\n      return {\n        ...state,\n        filters: [...(state.filters || []), action.filter || {\n          dimension: null\n        }]\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_REMOVE:\n      return {\n        ...state,\n        filters: removeDimensionFromFilters(state.filters, action.index)\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_CHANGE:\n      return {\n        ...state,\n        filters: changeDimensionInFilters(state.filters, action.index, action.filter)\n      };\n    case types.LAYER_EDIT_FILTER_ADD:\n      return {\n        ...state,\n        columns: [...state.columns, action.filter || {\n          dimension: null,\n          name: null,\n          filter: null\n        }]\n      };\n    case types.LAYER_EDIT_FILTER_REMOVE:\n      columns = state.columns.filter(c => c.filter !== undefined); // Also used for style data element without filter\n\n      if (!columns || !columns[action.index]) {\n        return state;\n      }\n      return {\n        ...state,\n        columns: [...state.columns.filter(c => c.filter === undefined), ...columns.filter((c, i) => i !== action.index)]\n      };\n    case types.LAYER_EDIT_FILTER_CHANGE:\n      columns = state.columns.filter(c => c.filter !== undefined); // Also used for style data element without filter\n\n      if (!columns || !columns[action.index]) {\n        return state;\n      }\n      columns[action.index] = action.filter;\n      return {\n        ...state,\n        columns: [...state.columns.filter(c => c.filter === undefined), ...columns]\n      };\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_SET:\n      return {\n        ...state,\n        styleDataItem: action.dataItem\n      };\n\n    // Set options to data element option set\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET:\n      newState = {\n        ...state,\n        styleDataItem: {\n          ...state.styleDataItem,\n          optionSet: {\n            ...state.styleDataItem.optionSet,\n            options: action.options\n          }\n        }\n      };\n      delete newState.method;\n      delete newState.classes;\n      delete newState.colorScale;\n      return newState;\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET:\n      newState = {\n        ...state,\n        styleDataItem: {\n          ...state.styleDataItem,\n          values: {\n            ...state.styleDataItem.values,\n            [action.value]: action.color\n          }\n        }\n      };\n      delete newState.method;\n      delete newState.classes;\n      delete newState.colorScale;\n      return newState;\n    case types.LAYER_EDIT_THEMATIC_MAP_TYPE_SET:\n      newState = {\n        ...state,\n        thematicMapType: action.payload\n      };\n      if (action.payload === THEMATIC_CHOROPLETH && state.method === CLASSIFICATION_SINGLE_COLOR) {\n        delete newState.method;\n        delete newState.colorScale;\n        delete newState.classes;\n      }\n      return newState;\n    case types.LAYER_EDIT_CLASSIFICATION_SET:\n      newState = {\n        ...state,\n        method: action.method\n      };\n      if (state.method === CLASSIFICATION_SINGLE_COLOR || ![CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS].includes(action.method)) {\n        delete newState.colorScale;\n        delete newState.classes;\n      }\n      if (action.method !== CLASSIFICATION_PREDEFINED) {\n        delete newState.legendSet;\n      }\n      if (newState.styleDataItem) {\n        delete newState.styleDataItem.optionSet;\n      }\n      return newState;\n    case types.LAYER_EDIT_COLOR_SCALE_SET:\n      newState = {\n        ...state,\n        colorScale: action.colorScale,\n        classes: action.colorScale.split(',').length\n      };\n      if (newState.styleDataItem) {\n        delete newState.styleDataItem.optionSet;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_STATUS_SET:\n      newState = {\n        ...state\n      };\n\n      // Default\n      if (action.status === EVENT_STATUS_ALL) {\n        delete newState.eventStatus;\n      } else {\n        newState.eventStatus = action.status;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_COORDINATE_FIELD_SET:\n      newState = {\n        ...state\n      };\n\n      // Default\n      if (action.fieldId === 'event') {\n        delete newState.eventCoordinateField;\n      } else {\n        newState.eventCoordinateField = action.fieldId;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_CLUSTERING_SET:\n      return {\n        ...state,\n        eventClustering: action.checked\n      };\n    case types.LAYER_EDIT_EVENT_POINT_RADIUS_SET:\n      return {\n        ...state,\n        eventPointRadius: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_EVENT_POINT_COLOR_SET:\n      return {\n        ...state,\n        eventPointColor: action.color\n      };\n    case types.LAYER_EDIT_RELATED_POINT_COLOR_SET:\n      return {\n        ...state,\n        relatedPointColor: action.color\n      };\n    case types.LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET:\n      return {\n        ...state,\n        relationshipLineColor: action.color\n      };\n    case types.LAYER_EDIT_RELATED_POINT_RADIUS_SET:\n      return {\n        ...state,\n        relatedPointRadius: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET:\n      return {\n        ...state,\n        organisationUnitColor: action.color\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET:\n      return {\n        ...state,\n        organisationUnitGroupSet: action.organisationUnitGroupSet\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNITS_SET:\n      return {\n        ...state,\n        rows: [action.payload]\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET:\n      {\n        const {\n          id,\n          name\n        } = action.payload;\n        return {\n          ...state,\n          orgUnitField: id,\n          orgUnitFieldDisplayName: id !== NONE ? name : null,\n          areaRadius: id === NONE ? EE_BUFFER : null\n        };\n      }\n\n    // Set organisation unit tree path (temporary solution, as favorites don't include paths)\n    case types.LAYER_EDIT_ORGANISATION_UNIT_PATH_SET:\n      return {\n        ...state,\n        rows: setOrgUnitPathInRows(state.rows, action.id, action.path)\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_MODE_SET:\n      return {\n        ...state,\n        organisationUnitSelectionMode: action.payload\n      };\n    case types.LAYER_EDIT_BAND_SET:\n      return {\n        ...state,\n        band: action.payload\n      };\n    case types.LAYER_EDIT_PARAMS_SET:\n      return {\n        ...state,\n        params: {\n          ...state.params,\n          ...action.payload\n        }\n      };\n    case types.LAYER_EDIT_FILTER_SET:\n      return {\n        ...state,\n        filter: action.filter\n      };\n    case types.LAYER_EDIT_LABELS_SET:\n      return {\n        ...state,\n        labels: action.isChecked\n      };\n    case types.LAYER_EDIT_LABEL_TEMPLATE:\n      return {\n        ...state,\n        labelTemplate: action.template\n      };\n    case types.LAYER_EDIT_LABEL_FONT_COLOR_SET:\n      return {\n        ...state,\n        labelFontColor: action.color\n      };\n    case types.LAYER_EDIT_LABEL_FONT_SIZE_SET:\n      return {\n        ...state,\n        labelFontSize: action.size\n      };\n    case types.LAYER_EDIT_LABEL_FONT_WEIGHT_SET:\n      return {\n        ...state,\n        labelFontWeight: action.weight\n      };\n    case types.LAYER_EDIT_LABEL_FONT_STYLE_SET:\n      return {\n        ...state,\n        labelFontStyle: action.style\n      };\n    case types.LAYER_EDIT_BUFFER_RADIUS_SET:\n      return {\n        ...state,\n        areaRadius: action.radius\n      };\n    case types.LAYER_EDIT_RADIUS_LOW_SET:\n      return {\n        ...state,\n        radiusLow: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_RADIUS_HIGH_SET:\n      return {\n        ...state,\n        radiusHigh: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_LEGEND_SET_SET:\n      return {\n        ...state,\n        legendSet: action.legendSet\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_TYPE_SET:\n      return {\n        ...state,\n        trackedEntityType: {\n          ...action.trackedEntityType\n        },\n        program: null,\n        programStage: null,\n        relationshipType: null,\n        relationshipOutsideProgram: null\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET:\n      return {\n        ...state,\n        relationshipType: action.relationshipType\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET:\n      return {\n        ...state,\n        relationshipOutsideProgram: action.payload\n      };\n    case types.LAYER_EDIT_PROGRAM_STATUS_SET:\n      newState = {\n        ...state\n      };\n\n      // Default\n      if (action.payload === 'ALL') {\n        delete newState.programStatus;\n      } else {\n        newState.programStatus = action.payload;\n      }\n      return newState;\n    case types.LAYER_EDIT_FOLLOW_UP_SET:\n      return {\n        ...state,\n        followUp: action.payload\n      };\n    case types.LAYER_EDIT_NO_DATA_COLOR_SET:\n      newState = {\n        ...state\n      };\n\n      // Default is to show no feature\n      if (!action.payload) {\n        delete newState.noDataColor;\n      } else {\n        newState.noDataColor = action.payload;\n      }\n      return newState;\n    default:\n      return state;\n  }\n};\nexport default layerEdit;","import i18n from '@dhis2/d2-i18n';\nimport * as types from '../constants/actionTypes.js';\nimport { earthEngineLayers } from '../constants/earthEngine.js';\nimport { THEMATIC_LAYER, EVENT_LAYER, TRACKED_ENTITY_LAYER, FACILITY_LAYER, ORG_UNIT_LAYER } from '../constants/layers.js';\nconst defaultLayers = () => [{\n  layer: THEMATIC_LAYER,\n  type: i18n.t('Thematic'),\n  img: 'images/thematic.png',\n  opacity: 0.9\n}, {\n  layer: EVENT_LAYER,\n  type: i18n.t('Events'),\n  img: 'images/events.png',\n  opacity: 0.8,\n  eventClustering: true\n}, {\n  layer: TRACKED_ENTITY_LAYER,\n  type: i18n.t('Tracked entities'),\n  img: 'images/trackedentities.png',\n  opacity: 0.5\n}, {\n  layer: FACILITY_LAYER,\n  type: i18n.t('Facilities'),\n  img: 'images/facilities.png',\n  opacity: 1\n}, {\n  layer: ORG_UNIT_LAYER,\n  type: i18n.t('Org units'),\n  img: 'images/orgunits.png',\n  opacity: 1\n}, ...earthEngineLayers().filter(l => !l.legacy)];\nconst layers = (state, action) => {\n  const prevState = state || defaultLayers();\n  switch (action.type) {\n    case types.EXTERNAL_LAYER_ADD:\n      return [...prevState, {\n        ...action.payload,\n        isVisible: true\n      }];\n    default:\n      return prevState;\n  }\n};\nexport default layers;","import * as types from '../constants/actionTypes.js';\nconst orgUnitProfile = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n      return action.payload;\n    case types.ORGANISATION_UNIT_PROFILE_CLOSE:\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default orgUnitProfile;","import * as types from '../constants/actionTypes.js';\nconst defaultState = {\n  width: typeof window === 'object' ? window.innerWidth : null,\n  height: typeof window === 'object' ? window.innerHeight : null,\n  layersPanelOpen: true,\n  rightPanelOpen: false,\n  dataTableHeight: 300,\n  mapContextMenu: true\n};\nconst ui = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.LAYERS_PANEL_OPEN:\n      return {\n        ...state,\n        layersPanelOpen: true\n      };\n    case types.LAYERS_PANEL_CLOSE:\n      return {\n        ...state,\n        layersPanelOpen: false\n      };\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n      return {\n        ...state,\n        rightPanelOpen: true\n      };\n    case types.INTERPRETATIONS_PANEL_CLOSE:\n    case types.ORGANISATION_UNIT_PROFILE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return {\n        ...state,\n        rightPanelOpen: false\n      };\n    case types.DATA_TABLE_RESIZE:\n      return {\n        ...state,\n        dataTableHeight: action.height\n      };\n    default:\n      return state;\n  }\n};\nexport default ui;","import { combineReducers } from 'redux';\nimport aggregations from './aggregations.js';\nimport analyticalObject from './analyticalObject.js';\nimport basemaps from './basemaps.js';\nimport contextMenu from './contextMenu.js';\nimport dataTable from './dataTable.js';\nimport download from './download.js';\nimport feature from './feature.js';\nimport interpretation from './interpretation.js';\nimport layerEdit from './layerEdit.js';\nimport layers from './layers.js';\nimport map from './map.js';\nimport orgUnitProfile from './orgUnitProfile.js';\nimport ui from './ui.js';\nexport default combineReducers({\n  aggregations,\n  analyticalObject,\n  basemaps,\n  contextMenu,\n  dataTable,\n  download,\n  interpretation,\n  layerEdit,\n  layers,\n  map,\n  orgUnitProfile,\n  ui,\n  feature\n});","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from '../reducers/index.js';\nconst composeEnhancer = process.env.NODE_ENV === 'development' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducer, composeEnhancer(applyMiddleware(thunk)));\nif (window.Cypress) {\n  window.store = store;\n}\nexport default store;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { D2Shim } from '@dhis2/app-runtime-adapter-d2';\nimport { CenteredContent, CircularLoader } from '@dhis2/ui';\nimport log from 'loglevel';\nimport moment from 'moment';\nimport React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport App from './components/app/App.js';\nimport SystemSettingsProvider from './components/SystemSettingsProvider.js';\nimport UserSettingsProvider, { UserSettingsCtx } from './components/UserSettingsProvider.js';\nimport WindowDimensionsProvider from './components/WindowDimensionsProvider.js';\nimport store from './store/index.js';\nimport './locales/index.js';\nlog.setLevel(process.env.NODE_ENV === 'production' ? log.levels.INFO : log.levels.TRACE);\nconst d2Config = {\n  schemas: ['dataElement', 'dataElementGroup', 'dataSet', 'externalMapLayer', 'indicator', 'indicatorGroup', 'legendSet', 'map', 'optionSet', 'organisationUnit', 'organisationUnitGroup', 'organisationUnitGroupSet', 'organisationUnitLevel', 'program', 'programStage', 'userGroup']\n};\nconst AppWrapper = () => /*#__PURE__*/React.createElement(ReduxProvider, {\n  store: store\n}, /*#__PURE__*/React.createElement(D2Shim, {\n  d2Config: d2Config\n}, _ref => {\n  let {\n    d2,\n    d2Error\n  } = _ref;\n  if (!d2 && !d2Error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        top: 0\n      }\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  return /*#__PURE__*/React.createElement(SystemSettingsProvider, null, /*#__PURE__*/React.createElement(UserSettingsProvider, null, /*#__PURE__*/React.createElement(UserSettingsCtx.Consumer, null, _ref2 => {\n    let {\n      keyUiLocale\n    } = _ref2;\n    if (!keyUiLocale) {\n      return null;\n    }\n    moment.locale(keyUiLocale);\n    return /*#__PURE__*/React.createElement(WindowDimensionsProvider, null, /*#__PURE__*/React.createElement(App, null));\n  })));\n}));\nexport default AppWrapper;"],"names":["MAP_NEW","MAP_SET","MAP_PROPS_SET","MAP_CONTEXT_MENU_OPEN","MAP_CONTEXT_MENU_CLOSE","MAP_COORDINATE_OPEN","MAP_COORDINATE_CLOSE","MAP_EARTH_ENGINE_VALUE_SHOW","MAP_ALERTS_CLEAR","BASEMAPS_ADD","BASEMAP_REMOVE","BASEMAP_SELECTED","BASEMAP_TOGGLE_EXPAND","BASEMAP_TOGGLE_VISIBILITY","BASEMAP_CHANGE_OPACITY","BASEMAP_BING_KEY_SET","BASEMAP_REMOVE_BING_MAPS","LAYER_ADD","LAYER_REMOVE","LAYER_CHANGE_OPACITY","LAYER_EDIT","LAYER_CANCEL","LAYER_LOADING_SET","LAYER_SORT","LAYER_TOGGLE_EXPAND","LAYER_TOGGLE_VISIBILITY","LAYER_UPDATE","EXTERNAL_LAYER_ADD","DATA_TABLE_OPEN","DATA_TABLE_CLOSE","DATA_TABLE_TOGGLE","DATA_TABLE_RESIZE","DATA_FILTER_SET","DATA_FILTER_CLEAR","ORGANISATION_UNIT_PROFILE_SET","ORGANISATION_UNIT_PROFILE_CLOSE","LAYERS_PANEL_OPEN","LAYERS_PANEL_CLOSE","INTERPRETATIONS_PANEL_OPEN","INTERPRETATIONS_PANEL_CLOSE","LAYER_EDIT_PROGRAM_SET","LAYER_EDIT_PROGRAM_STAGE_SET","LAYER_EDIT_PERIOD_NAME_SET","LAYER_EDIT_PERIOD_SET","LAYER_EDIT_START_DATE_SET","LAYER_EDIT_END_DATE_SET","LAYER_EDIT_FILTER_ADD","LAYER_EDIT_FILTER_REMOVE","LAYER_EDIT_FILTER_CHANGE","LAYER_EDIT_DIMENSION_FILTER_ADD","LAYER_EDIT_DIMENSION_FILTER_REMOVE","LAYER_EDIT_DIMENSION_FILTER_CHANGE","LAYER_EDIT_STYLE_DATA_ITEM_SET","LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET","LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET","LAYER_EDIT_THEMATIC_MAP_TYPE_SET","LAYER_EDIT_CLASSIFICATION_SET","LAYER_EDIT_COLOR_SCALE_SET","LAYER_EDIT_DATA_ITEM_SET","LAYER_EDIT_EVENT_STATUS_SET","LAYER_EDIT_EVENT_COORDINATE_FIELD_SET","LAYER_EDIT_EVENT_CLUSTERING_SET","LAYER_EDIT_EVENT_POINT_RADIUS_SET","LAYER_EDIT_EVENT_POINT_COLOR_SET","LAYER_EDIT_RELATED_POINT_COLOR_SET","LAYER_EDIT_RELATED_POINT_RADIUS_SET","LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET","LAYER_EDIT_ORGANISATION_UNITS_SET","LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET","LAYER_EDIT_ORGANISATION_UNIT_MODE_SET","LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET","LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET","LAYER_EDIT_VALUE_TYPE_SET","LAYER_EDIT_INDICATOR_GROUP_SET","LAYER_EDIT_PERIOD_TYPE_SET","LAYER_EDIT_RENDERING_STRATEGY_SET","LAYER_EDIT_AGGREGATION_TYPE_SET","LAYER_EDIT_DATA_ELEMENT_GROUP_SET","LAYER_EDIT_PARAMS_SET","LAYER_EDIT_FILTER_SET","LAYER_EDIT_LABELS_SET","LAYER_EDIT_LABEL_TEMPLATE","LAYER_EDIT_LABEL_FONT_SIZE_SET","LAYER_EDIT_LABEL_FONT_WEIGHT_SET","LAYER_EDIT_LABEL_FONT_STYLE_SET","LAYER_EDIT_LABEL_FONT_COLOR_SET","LAYER_EDIT_BUFFER_RADIUS_SET","LAYER_EDIT_RADIUS_LOW_SET","LAYER_EDIT_RADIUS_HIGH_SET","LAYER_EDIT_LEGEND_SET_SET","LAYER_EDIT_ORGANISATION_UNIT_PATH_SET","LAYER_EDIT_OPERAND_SET","LAYER_EDIT_TRACKED_ENTITY_TYPE_SET","LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET","LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET","LAYER_EDIT_PROGRAM_STATUS_SET","LAYER_EDIT_FOLLOW_UP_SET","LAYER_EDIT_NO_DATA_COLOR_SET","LAYER_EDIT_BAND_SET","INTERPRETATION_SET","DOWNLOAD_DIALOG_TOGGLE","DOWNLOAD_NAME_SHOW_TOGGLE","DOWNLOAD_LEGEND_SHOW_TOGGLE","DOWNLOAD_LEGEND_POSITION_SET","ANALYTICAL_OBJECT_SET","ANALYTICAL_OBJECT_CLEAR","FEATURE_HIGHLIGHT","AGGREGATIONS_SET","DEFAULT_LOCALE","dateLocale","locale","includes","replace","toDate","date","Array","isArray","Date","shortDateRegexp","isValidDateFormat","dateString","test","substr","formatDate","dateObj","getFullYear","getMonth","slice","getDate","fallbackDateFormat","hasIntlSupport","global","Intl","DateTimeFormat","formatLocaleDate","showYear","arguments","length","undefined","i18n","year","month","day","format","formatStartEndDate","startDate","endDate","loc","getDateArray","parseInt","substring","getStartEndDateError","startDateStr","endDateStr","startDateArr","endDateArr","VECTOR_STYLE","TILE_LAYER","GOOGLE_LAYER","BING_LAYER","EVENT_LAYER","THEMATIC_LAYER","FACILITY_LAYER","ORG_UNIT_LAYER","EXTERNAL_LAYER","EARTH_ENGINE_LAYER","TRACKED_ENTITY_LAYER","GEOJSON_LAYER","DOWNLOADABLE_LAYER_TYPES","DATA_TABLE_LAYER_TYPES","OPEN_AS_LAYER_TYPES","DEFAULT_START_DATE","setFullYear","DEFAULT_END_DATE","RENDERING_STRATEGY_SINGLE","RENDERING_STRATEGY_TIMELINE","RENDERING_STRATEGY_SPLIT_BY_PERIOD","THEMATIC_CHOROPLETH","THEMATIC_BUBBLE","THEMATIC_RADIUS_LOW","THEMATIC_RADIUS_HIGH","THEMATIC_RADIUS_MIN","THEMATIC_RADIUS_MAX","EVENT_CLIENT_PAGE_SIZE","EVENT_COLOR","TEI_COLOR","TEI_RELATED_COLOR","TEI_RELATIONSHIP_LINE_COLOR","ORG_UNIT_COLOR","ORG_UNIT_RADIUS","ORG_UNIT_RADIUS_SMALL","EE_BUFFER","CLASSIFICATION_PREDEFINED","CLASSIFICATION_EQUAL_INTERVALS","CLASSIFICATION_EQUAL_COUNTS","CLASSIFICATION_SINGLE_COLOR","STYLE_TYPE_COLOR","STYLE_TYPE_SYMBOL","LABEL_TEMPLATE_NAME_ONLY","LABEL_FONT_SIZE","LABEL_FONT_COLOR","NO_DATA_COLOR","MAX_RADIUS","NONE","dimConf","data","id","value","param","dimensionName","objectName","category","name","indicator","itemType","dataElement","operand","dataSet","eventDataItem","programDataElement","programAttribute","programIndicator","period","organisationUnit","reportingRate","periodGroups","DAILY","WEEKLY","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","SIXMONTHLY","YEARLY","FINANCIAL","RELATIVE_PERIODS","START_END_DATES","periodTypes","group","WEEKLYWED","WEEKLYTHU","WEEKLYSAT","WEEKLYSUN","SIXMONTHLYAPR","FYNOV","FYOCT","FYJUL","FYAPR","singleMapPeriods","invalidSplitViewPeriods","getPeriodTypes","hiddenPeriods","filter","_ref","getFixedPeriodsByType","periodType","getFixedPeriodsOptionsById","offset","now","getYearOffsetFromNow","getPeriods","reversePeriods","getRelativePeriods","map","getRelativePeriodsOptionsById","flat","isPeriodAvailable","find","p","filterFuturePeriods","periods","_ref4","createDimension","dimension","items","props","getDimensionItems","arr","dataItems","getDimension","item","getDataItemFromColumns","setDataItemInColumns","dataItem","dim","dimensionItemType","legendSet","getOrgUnitsFromRows","setOrgUnitPathInRows","path","orgUnits","orgUnit","ou","getPeriodFromFilters","removePeriodFromFilters","f","getPeriodNameFromId","reduce","obj","_ref2","_ref3","setFiltersFromPeriod","filters","getDimensionsFromFilters","d","isValidUid","getValidDimensionsFromFilters","removeDimensionFromFilters","index","dimensions","i","changeDimensionInFilters","getFilterOperatorAsText","operator","EQ","GT","GE","LT","LE","NE","IN","LIKE","getFilterValueName","names","split","val","join","combineDataItems","dataItemsA","dataItemsB","includeTypes","excludeTypes","sortBy","valueType","validMapProperties","validLayerProperties","models","validModelProperties","cleanMapConfig","config","defaultBasemapId","omitBy","isNil","pick","basemap","getBasemapString","mapViews","cleanLayerConfig","isVisible","models2objects","layer","Object","keys","forEach","key","rows","cleanDimension","datasetId","band","params","aggregationType","eeConfig","JSON","stringify","periodName","relationships","relationshipType","type","pointColor","relatedPointColor","pointRadius","relatedPointRadius","lineColor","relationshipLineColor","relationshipOutsideProgram","isObject","styleDataItem","omit","optionSet","options","option","code","formatCount","count","num","toFixed","Math","round","numberPrecision","n","m","pow","getLegendItemForValue","legendItems","startValue","endValue","isLast","getLegendItems","values","method","numClasses","minValue","maxValue","bins","getEqualIntervals","getQuantiles","binSize","precision","precisionRound","valueFormat","push","binCount","binLastValPos","bin","YlGn","YlGnBu","GnBu","BuGn","PuBuGn","PuBu","BuPu","RdPu","PuRd","OrRd","YlOrRd","YlOrBr","Purples","Blues","Greens","Oranges","Reds","Greys","PuOr","BrBG","PRGn","PiYG","RdBu","RdGy","RdYlBu","Spectral","RdYlGn","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","YlOrBr_reverse","Reds_reverse","YlGn_reverse","Greens_reverse","Blues_reverse","BuPu_reverse","RdPu_reverse","PuRd_reverse","Greys_reverse","colorScales","getColorPalette","scale","classes","colorbrewer","getColorScale","palette","defaultColorScaleName","defaultClasses","defaultColorScale","cssColor","color","isString","getUniqueColor","defaultColors","colors","randomColor","random","toString","isDarkColor","hcl","l","getContrastColor","loadLegendSet","async","getD2","get","loadDataItemLegendSet","toLowerCase","d2","fields","then","model","getPredefinedLegendItems","pickSome","legends","getAutomaticLegendItems","colorScale","CURRENT_AO_KEY","APP_URLS","CHART","PIVOT","getDimensionsFromAnalyticalObject","ao","columns","getDataDimensionsFromAnalyticalObject","dataDim","getThematicLayerFromAnalyticalObject","dataId","yearlySeries","dataDims","dims","opacity","addLayer","types","payload","editLayer","updateLayer","tSetAnalyticalObject","clearAnalyticalObjectFromUrl","base","window","location","href","history","pushState","leftParams","url","hasSingleDataDimension","dispatch","setAnalyticalObject","e","log","FALLBACK_BASEMAP_ID","getFallbackBasemap","defaultBasemaps","img","attribution","style","apiKey","DEFAULT_SYSTEM_SETTINGS","keyDefaultBaseMap","getJsonResponse","string","response","text","parse","apiFetch","body","headers","fetch","encodeURI","catch","error","console","extractBasemap","externalBasemap","view","mapLayerPosition","gisAppLayerOrder","externalLayer","earthEngine","thematic4","thematic3","thematic2","thematic1","boundary","facility","event","upgradeGisAppLayers","some","match","updatedMapViews","mapView","orderedMapView","renameBoundaryLayerToOrgUnitLayer","v","propertyMap","displayName","shortName","displayShortName","getDisplayProperty","displayProperty","keyAnalysisDisplayProperty","currentUser","settings","baseFields","mandatoryDataItemAttributes","getValidDataItems","every","prop","getSplitViewLayer","layers","renderingStrategy","isSplitViewMap","formatTime","time","getLongestTextLength","array","curr","String","fetchMapQuery","resource","mapFields","analysisFields","namePropertyUrl","fetchMap","engine","query","variables","getMigratedMapConfig","Error","fetchExternalLayersQuery","paging","getUrlParameter","results","RegExp","exec","search","decodeURIComponent","mapServiceToTypeMap","createExternalLayer","createExternalLayerConfig","mapService","imageFormat","legendSetUrl","tms","parseLayerConfig","layerConfig","evt","externalMapLayers","getExternalLayer","isBasemap","isOverlay","tSetExternalLayers","externalLayers","fetchExternalLayers","externalBasemaps","basemaps","addBasemaps","addExternalLayer","tOpenMap","mapId","dataEngine","getState","basemapConfig","bm","organisationUnits","AlertStack","alerts","useAlerts","mapAlerts","useSelector","state","getMapAlerts","mapConfig","concat","useDispatch","clearMapAlerts","useCallback","React","UiAlertStack","message","remove","AlertBar","success","warning","critical","duration","onHidden","closeDataTable","setOrgUnitProfile","numberValueTypes","textValueTypes","booleanValueTypes","filterData","filteredData","field","properties","isNumeric","numericFilter","stringFilter","orFilter","isTrueFilter","Number","cellData","backgroundColor","className","styles","connect","dataTable","overlay","layerId","dataFilters","setDataFilter","fieldId","clearDataFilter","dataKey","filterValue","placeholder","onClick","stopPropagation","onChange","target","label","sortDirection","title","SortIndicator","FilterInput","getMapLocale","acres","Area","Cancel","Delete","Distance","ha","km","mi","Perimeter","glyphs","process","DHIS2_BASE_URL","div","document","createElement","width","height","MapApi","earthEngineLayers","unit","description","source","sourceUrl","defaultAggregations","mosaic","min","max","bands","multiple","tileScale","notice","aggregations","mask","methods","toFloat","multiply","subtract","defaultFilters","legend","popup","legacy","getEarthEngineLayer","classAggregation","hasClasses","getPeriodFromFilter","args","getAuthToken","Promise","resolve","reject","token","status","token_type","workerPromise","eeId","eeWorker","EarthEngineWorker","loadEarthEngineWorker","getWorkerInstance","features","getPrecision","sortedValues","sort","a","b","gapValue","absValue","abs","_extends","assign","bind","prototype","hasOwnProperty","call","apply","this","Column","headerRenderer","ColumnHeader","cellRenderer","toUpperCase","_defineProperty","arg","input","hint","prim","Symbol","toPrimitive","res","TypeError","_toPrimitive","_toPropertyKey","defineProperty","enumerable","configurable","writable","DataTable","Component","constructor","context","super","debounce","feature","highlightFeature","origin","rowData","componentDidMount","loadExtendedData","componentDidUpdate","prevProps","prev","setState","layerType","isExtended","serverCluster","showDataTable","hasAdditionalGeometry","localeCompare","onSort","getEventDataItems","column","render","isThematic","isOrgUnit","isEvent","isEarthEngine","isLoading","Table","headerHeight","rowHeight","rowCount","rowGetter","useDynamicRowHeight","hideIndexRow","onRowClick","onRowMouseOver","onRowMouseOut","cellDataGetter","_ref5","_ref6","_ref7","ColorCell","EarthEngineColumns","CenteredContent","CircularLoader","PropTypes","_ref8","WindowDimensionsCtx","createContext","windowDims","innerHeight","innerWidth","children","setDimensions","useState","useEffect","handleResize","addEventListener","removeEventListener","Provider","IconDrag","viewBox","xmlns","fill","fillRule","ResizeHandle","onResize","onResizeEnd","minHeight","maxHeight","dragHeight","onDrag","getHeight","pageY","draggable","onDragStart","src","dataTransfer","setDragImage","setData","ondragover","onDragEnd","defaultProps","ui","dataTableOpen","dataTableHeight","layersPanelOpen","rightPanelOpen","resizeDataTable","useContext","node","useRef","h","current","tableHeight","layersWidth","rightPanelWidth","tableWidth","left","right","ref","IconCross16","systemSettingsQuery","SystemSettingsCtx","periodSetting","getHiddenPeriods","systemSettings","setting","setSettings","useDataEngine","fetchData","useSystemSettings","setProgram","program","setStyleDataItem","setOptionStyle","setClassification","setColorScale","setEventStatus","setEventPointRadius","radius","setEventPointColor","setOrganisationUnitGroupSet","organisationUnitGroupSet","setOrganisationUnitColor","setPeriodType","clearPeriod","setPeriod","setStartDate","setEndDate","setAggregationType","setOrgUnits","setBufferRadius","setRadiusLow","setLegendSet","checked","disabled","dense","cx","UiCheckbox","backgroundImage","Fragment","IconChevronDown24","itemWidth","isOpen","setIsOpen","anchorRef","onColorScaleSelect","ColorScale","Popover","reference","arrow","placement","onClickOutside","ConditionalWrapper","condition","wrapper","propTypes","isRequired","defaultVal","onBlur","inputEl","defaultValue","step","InputField","isNaN","size","weight","fontStyle","onColorChange","onSizeChange","onWeightChange","onStyleChange","NumberField","ColorButton","button","Button","icon","IconTextBold24","secondary","toggled","IconTextItalic24","IconInfo16","tooltip","dataTest","Tooltip","content","isSelected","onDisplayOptionChange","SelectField","loading","onFocus","RadioContext","helpText","display","radio","setRadio","FieldGroup","UiRadio","errorText","prefix","Select","MultiSelectField","SingleSelectField","Option","MultiSelectOption","SingleSelectOption","selected","onSelectChange","validationText","TabContext","tab","setTab","TabBar","fixed","UiTab","qualitativeColors","parseGroupSet","organisationUnitGroups","groups","getColor","groupsWithoutColors","g","findIndex","getGroupColor","getSymbol","groupsWithoutSymbols","symbol","getGroupSymbol","fetchOrgUnitGroupSet","getPointItems","ty","getPolygonItems","getOrgUnitStyle","groupSet","getOrgUnitGroupLegendItems","useColor","contextPath","image","getStyledOrgUnits","organisationUnitColor","radiusLow","orgUnitLevels","styleType","isFacilityLayer","levelWeight","levelItems","levels","uniqBy","level","indexOf","styledFeatures","isPoint","geometry","iconUrl","groupItems","facilityItems","getOrgUnitLevels","organisationUnitLevels","list","toArray","getCoordinateField","orgUnitField","orgUnitFieldDisplayName","addAssociatedGeometries","mainFeatures","associatedGeometries","associated","AssociatedGeometrySelect","geometryField","layerEdit","attributes","setAttributes","fetchedAttributes","attribute","OrgUnitSelectMode","organisationUnitSelectionMode","useMemo","mode","setOrgUnitMode","ORG_UNIT_TREE_QUERY","tree","userDataViewFallback","order","NO_OTHER_SELECTS","hideUserOrgUnits","hideAssociatedGeometry","hideSelectMode","hideLevelSelect","hideGroupSelect","selectDefaultLevel","selectRoots","useDataQuery","setOrgUnitItems","roots","defaultLevel","levelNumber","translateOrgUnitLevels","r","hasOrgUnits","Help","numOtherSelects","OrgUnitDimension","onSelect","getThematicAggregationTypes","getEarthEngineStatisticTypes","getEarthEngineAggregationTypes","getEarthEngineAggregationType","t","setBand","setYear","byYear","years","Set","byYearPeriods","onYearChange","small","areaRadius","defaultRadius","hasOrgUnitField","showBuffer","isDisabled","Checkbox","isChecked","isInteger","toGeoJson","coord","co","gpid","gppg","pg","ids","compact","coordinates","na","hasCoordinatesDown","hcd","hasCoordinatesUp","hcu","le","grandParentParentGraph","grandParentId","parentGraph","parentId","pi","parentName","pn","drillUpDown","isLoaded","onFullscreenChange","isFullscreen","resize","bounds","getLayersBounds","fitBounds","toggleMultiTouch","toggleScrollZoom","createLegend","from","to","coordinateField","dataset","orgUnitParams","featuresRequest","geoFeatures","byOrgUnit","getAll","nsSeparator","_layerConfig$filter","_filter$arguments","getPeriodNameFromFilter","isExpanded","stroke","strokeWidth","strokeLinecap","strokeLinejoin","strokeColor","fillColor","border","borderRadius","LineSymbol","PolygonSymbol","LegendItemRange","paramsAreValid","LegendItem","setParams","steps","setSteps","onStepsChange","newPalette","warningText","minSteps","maxSteps","ColorScaleSelect","StyleSelect","BufferRadius","LegendPreview","setFilter","forwardRef","setPeriods","setError","validateLayer","onLayerValidation","noBandSelected","hasMultipleAggregations","isCancelled","isValid","NoticeBox","Tabs","Tab","BandSelect","AggregationSelect","rel","PeriodSelect","OrgUnitSelect","StyleTab","userSettingsQuery","UserSettingsCtx","userSettings","nameProperty","useUserSettings","PROGRAM_STAGE_DATA_ELEMENTS_QUERY","elements","PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY","trackedEntityAttributes","useProgramTrackedEntityAttributes","programId","programAttributes","setProgramAttributes","refetch","lazy","onComplete","programTrackedEntityAttributes","attr","trackedEntityAttribute","useEventDataItems","programStageId","dataElements","dataElementsLoading","setDataElements","programStageDataElements","useProgramStageDataElements","attributesLoading","eventDataItems","EVENT_COORDINATE_FIELD_ID","programStage","prevProgram","IconDelete24","OPTION_SET_QUERY","optionSetId","setOptionSet","useOptionSet","operators","getOperators","splitFilter","newOperator","OptionSetSelect","newValue","TextField","DatePicker","onRemove","newFilter","FilterSelect","RemoveFilter","FilterRow","changeFilter","removeFilter","basic","classRange","range","colorScaleName","LEGEND_SETS_QUERY","sets","legendSetError","legendSets","mapType","RadioGroup","isBubble","Radio","ColorPicker","marginTop","isSingleColor","isPredefined","LegendTypeSelect","SingleColor","LegendSetSelect","Classification","addOptionStyle","styledOptionSet","setWarning","styledOptions","OptionStyle","BooleanStyle","setBooleanStyle","true","false","NumericLegendStyle","OptionSetStyle","ITEM_NONE","DataItemStyle","startEndDates","hasDate","allProgramsItem","PROGRAMS_QUERY","programs","trackedEntityType","trackedEntityPrograms","PROGRAM_STAGES_QUERY","stages","onProgramStagesLoad","programStages","EVENT_STATUS_ALL","EVENT_STATUS_COMPLETED","getEventStatuses","EventDialog","defaultPeriod","validate","eventClustering","eventStatus","eventCoordinateField","eventPointColor","eventPointRadius","setProgramStage","setEventCoordinateField","setEventClustering","programError","programStageError","periodError","orgUnitsError","ProgramSelect","ProgramStageSelect","CoordinateField","EventStatusSelect","RelativePeriodSelect","StartEndDates","FilterGroup","c","ImageSelect","StyleByDataItem","setErrorState","Consumer","ORG_UNIT_GROUP_SETS_QUERY","allowNone","groupSets","organisationUnitGroupSets","onGroupSetChange","imagePath","setImagePath","system","systemInfo","GROUP_SETS_QUERY","defaultStyleType","setGroups","err","groupsWithColors","GroupStyle","GroupSetSelect","GroupSetStyle","labels","labelTemplate","labelFontColor","labelFontSize","labelFontStyle","labelFontWeight","setLabels","setLabelTemplate","template","setLabelFontColor","setLabelFontSize","setLabelFontWeight","setLabelFontStyle","includeDisplayOption","LabelDisplayOptions","FontStyle","QUERY","configuration","ORGUNITS_TAB","setOrgUnitsError","facilityOrgUnitLevel","facilityOrgUnitGroupSet","Labels","StyleByGroupSet","OrgUnitDialog","DATA_ELEMENT_GROUPS_QUERY","dataElementGroup","dataElementGroups","DATA_ELEMENT_OPERAND_QUERY","operands","groupId","dataElementOperands","DATA_ELEMENTS_QUERY","domainType","excludeValueTypes","PROGRAM_DATA_ELEMENTS_QUERY","programDataElements","refetchProgramDataElements","DATA_SETS_QUERY","dataSetId","dataSets","DIMENSION_ITEMS_QUERY","dimensionTypes","DIMENSIONS_QUERY","dropdownRef","findDimension","DimensionsPanel","onDimensionClick","selectedIds","DimensionSelect","selectedDimension","DimensionItemsSelect","addDimensionFilter","removeDimensionFilter","changeDimensionFilter","DimensionFilterRow","INDICATOR_GROUPS_QUERY","indicatorGroup","indicatorGroups","INDICATORS_QUERY","indicators","changeYear","change","prevState","IconChevronLeft24","previousYear","IconChevronRight24","nextYear","PeriodTypeSelect","relativePeriodType","RenderingStrategy","hasOtherLayers","hasOtherTimelineLayers","PROGRAM_INDICATORS_QUERY","programIndicators","eventDataTypes","completedOnly","hasEventData","onCheck","isValidRadius","radiusHigh","setRadiusHigh","setThematicMapType","ThematicDialog","setValueType","noDataColor","thematicMapType","setDataItem","setDataElementGroup","setIndicatorGroup","setNoDataColor","setOperand","setRenderingStrategy","indicatorGroupError","indicatorError","dataElementGroupError","dataElementError","dataSetError","eventDataItemError","programIndicatorError","periodTypeError","ValueTypeSelect","IndicatorGroupSelect","IndicatorSelect","DataElementGroupSelect","TotalsDetailsSelect","DataElementOperandSelect","DataElementSelect","DataSetsSelect","EventDataItemSelect","ProgramIndicatorSelect","AggregationTypeSelect","CompletedOnlyCheckbox","DimensionFilter","ThematicMapTypeSelect","RadiusSelect","NoDataColor","keepColumns","TRACKED_ENTITY_TYPES_QUERY","trackedEntityTypes","getProgramStatuses","RELATIONSHIP_TYPES_QUERY","relationshipTypes","fromConstraint","relationshipEntity","fontSize","marginLeft","TrackedEntityDialog","showRelationshipsChecked","followUp","programStatus","setTrackedEntityType","setProgramStatus","setFollowUpStatus","setTrackedEntityRelationshipType","setRelatedPointColor","setRelatedPointRadius","setRelationshipLineColor","trackedEntityTypeError","TrackedEntityTypeSelect","allPrograms","ProgramStatusSelect","marginBottom","TrackedEntityRelationshipTypeSelect","paddingTop","trackedEntity","setTrackedEntityRelationshipOutsideProgram","FacilityDialog","thematic","EarthEngineDialog","cancelLayer","setLayerLoading","isValidLayer","setIsValidLayer","keyAnalysisRelativePeriod","LayerDialog","Modal","position","ModalTitle","ModalContent","editCounter","ModalActions","ButtonStrip","end","primary","onValidateLayer","EarthEngineLoader","onLoad","earthEngineLoader","EVENT_ID_FIELD","createEventFeature","getGeometry","header","buildEventGeometryGetter","col","geomCol","createEventFeatures","columnNames","idColName","idCol","metaData","row","outputIdScheme","isValidDimension","Boolean","METADATA_FORMAT_NAME","getEventColumns","displayNameProp","el","displayInReports","getAnalyticsRequest","relativePeriodDate","addStyleDataItem","analyticsRequest","analytics","request","withProgram","withStage","withCoordinatesOnly","addPeriodFilter","withStartDate","withEndDate","withRelativePeriodDate","addOrgUnitDimension","addDimension","withCoordinateField","withEventStatus","loadData","events","getQuery","withPageSize","styleByBoolean","getDataElementName","styleByNumeric","getLegendItem","curry","legendItem","styleByOptionSet","getOptionSet","optionsByName","optSet","opt","accessDeniedAlert","unknownErrorAlert","loadEventLayer","getFiltersFromColumns","spatialSupport","databaseInfo","alert","getCount","bbox","extent","getBounds","total","pager","styleByDataItem","pageSize","getFiltersAsText","getFilterOptionNames","explanation","s","optionSets","mappedOptionSets","all","set","httpStatusCode","EventLoader","eventLoader","ExternalLoader","externalLoader","includeGroupSets","requests","facilityLoader","OrgUnitLoader","orgUnitLoader","getPeriodsFromMetaData","pe","newEndDate","setHours","getValuesByPeriod","periodIndex","ouIndex","valueIndex","getValueById","parseFloat","getOrderedValues","userOrgUnit","isOperand","isSingleMap","displayPropertyUpper","geoFeaturesParams","dataDimension","addDataDimension","withDisplayProperty","addPeriodDimension","addFilter","withUserOrgUnit","withAggregationType","withParameters","aggregate","isBubbleMap","getApiResponseNames","valuesByPeriod","valueById","valueFeatures","orderedValues","bubbles","getRadiusForValue","scaleSqrt","domain","clamp","orgunit","ThematicLoader","thematicLoader","TRACKED_ENTITY_INSTANCE","parseTEInstanceId","instance","trackedEntityInstance","getInstanceRelationships","relationshipsById","targetInstances","isRecursive","localRels","isValidRel","relationship","getDataWithRelationships","sourceInstances","toConstraint","instances","trackedEntityInstances","fetchTEIs","out","filteredSourceInstances","isIndexInstance","hasChildren","geometryTypesMap","POINT","POLYGON","MULTI_POLYGON","geometryTypes","featureType","customConfig","relationshipTypeID","secondaryData","relatedTypeId","relatedEntityType","dataWithRels","TrackedEntityLoader","trackedEntityLoader","external","FacilityLoader","Loader","mapControls","imperial","splitViewControls","pluginControls","getMapControls","isPlugin","isSplitView","controls","ctrls","BaseUrlCtx","cfg","useConfig","baseUrl","ALERT_SUCCESS","ALERT_SUCCESS_DELAY","ALERT_CRITICAL","ALERT_MESSAGE_DYNAMIC","msg","ALERT_OPTIONS_DYNAMIC","isError","BasemapLayer","basemapNotFoundAlert","useAlert","basemapInvalidAlert","createLayer","errorMessage","alertError","show","removeLayer","setOpacity","setVisibility","contextTypes","MapLoadingMask","ComponentCover","translucent","Layer","PureComponent","prevPeriod","isEdited","setLayerOrder","setLayerOpacity","setLayerVisibility","componentWillUnmount","callback","setIndex","fitBoundsOnce","isZoomed","getZoom","off","onFeatureRightClick","highlight","x","y","container","getContainer","top","getBoundingClientRect","openContextMenu","parentNode","onError","onErrorHidden","orgUnitProfile","Popup","orgUnitId","onClose","openPopup","closePopup","createPortal","OrgUnitButton","isPercentage","table","colSpan","onlySum","getValueKey","getValueFormat","typeValueFormat","EarthEngineLayer","filterChange","applyFilter","clearAggregations","coordinate","showValue","lng","lat","isUpdate","resolution","projection","noValue","preload","hasAggregations","onFeatureClick","onRightClick","buffer","getAggregations","addAggregationValues","setAggregations","Alert","EarthEnginePopup","onPopupClose","hasValue","EVENTS_QUERY","getDataRows","displayElements","dataValues","dataRows","formattedValue","formatCoordinate","eventCoordinateFieldName","eventDate","orgUnitName","charAt","countColor","eventRequest","onEventClick","load","withBbox","withClusterSize","clusterSize","withIncludeClusterPoints","includeClusterPoints","clusterData","getCluster","tileId","clusterPane","bufferStyle","fillOpacity","loadDisplayElements","EventPopup","clusterId","clusterCount","center","cluster","cluster_id","point_count","point_count_abbreviated","points","loadOptionSet","coordElement","fullOptionSet","byId","getLabelStyle","fontWeight","lineHeight","hoverLabel","labelStyle","opacityFactor","onAssociatedGeometryClick","getPopup","isAssociatedGeometry","isPlainObject","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","week","hour","minute","tickIntervals","second","start","stop","reverse","interval","bisector","tickStep","millisecond","tickInterval","ticks","playBtn","pauseBtn","doubleTicksPeriods","Timeline","isCurrent","timeScale","onPeriodClick","scaleTime","periodId","numPeriods","maxTicks","numTicks","timeAxis","axisBottom","timeTicks","tickValues","select","box","play","isLastPeriod","timeout","setTimeout","clearTimeout","setWidth","on","setTimeAxis","setTimeScale","onPlayPause","transform","getPeriodRects","isTimeline","bottom","bubbleMap","periodData","poleOfInaccessibility","initialPeriod","PeriodName","onPeriodChange","BaseUrlShim","apiVersion","fetchTEI","fieldsString","credentials","apiFetchWithBaseUrl","geomToCentroid","coords","totals","accum","point","getCentroid","makeRelationshipGeometry","fromGeom","toGeom","TrackedEntityLayer","onEntityClick","secondaryConfig","relationshipConfig","makeRelationshipLayer","lastUpdated","EventLayer","FacilityLayer","ThematicLayer","Map","_map","mapApi","scrollZoom","onMapReady","getChildContext","latitude","longitude","zoom","appendChild","control","controlTypes","addControl","layerBounds","setView","fitWorld","resizeCount","coordinatePopup","closeCoordinatePopup","overlays","Overlay","MapItem","attributionControl","setMapControls","fitLayerBounds","sync","unsync","SplitView","interpretationModalOpen","showFullscreen","setShowFullscreen","setMap","containerRef","append","getControlContainer","splitViewLayer","BaseUrlProvider","isOffline","onDrill","anchorPosition","setAnchorPosition","mapLeft","mapTop","Menu","MenuItem","IconArrowUp16","IconArrowDown16","maxRadius","textAlign","pattern","leftAlign","x2","guideLength","y2","textX","textPadding","textAnchor","cy","x1","y1","strokeDasharray","alignmentBaseline","radiusMid","itemScale","textLength","ceil","alternateLength","smallestGap","gap","alternateFit","alternate","maxBubble","minBubble","showNumbers","midRadius","midBubble","bubble","Bubble","Bubbles","expl","LayerLegend","toggleOpen","legendLayers","onMouseLeave","LegendLayer","onMouseEnter","defaultBounds","Plugin","offline","useOnlineStatus","setLayers","contextMenu","setContextMenu","setResizeCount","hideTitle","getResizeFunction","onLayerLoad","LayerLoader","CssReset","CssVariables","spacers","theme","MapName","MapView","Legend","ContextMenu","newConfig","direction","visualization","onResponsesReceived","setMapViews","relativePeriodLayers","relativeLayer","isPanelOpen","interpretationId","interpretation","setInterpretation","isMapLoading","setIsMapLoading","isModalOpen","setIsModalOpen","initialFocus","setInitialFocus","interpretationsUnitRef","useD2","onInterpretationClick","onReplyIconClick","onModalClose","urlInterpretationId","Drawer","AboutAOUnit","InterpretationsUnit","InterpretationModal","onInterpretationUpdate","refresh","isVisualizationLoading","pluginComponent","InterpretationMap","defaultBasemapState","defaultState","action","sortedMapViews","generateUid","newLayerIsLoading","arrayMoveImmutable","oldIndex","newIndex","emptyBasemap","setBasemap","selectedId","basemapToUse","SortableHandle","Handle","IconDragHandle24","_layer$aggregationTyp","hasOrgUnitData","onEdit","toggleDataTable","openAs","downloadData","somethingAboveDivider","somethingBelowDivider","showDivider","role","IconButton","IconMore24","IconTable16","IconVisualizationColumn16","IconDownload16","MenuDivider","IconEdit16","IconDelete16","destructive","lowerFill","upperFill","onSliderChange","background","LayerToolbar","hasOpacity","onOpacityChange","toggleLayerVisibility","expansionMenuProps","IconEdit24","visible","notvisible","IconView24","IconViewOff24","OpacitySlider","LayerToolbarMoreMenu","subtitle","toggleExpand","layerToolbarProps","Card","IconChevronUp24","selectedID","selectBasemap","layerTypes","Basemap","changeBasemapOpacity","toggleBasemapExpand","toggleBasemapVisibility","useBasemapConfig","LayerCard","BasemapList","addPropNames","layerName","humanReadableKeys","layerData","periodValue","includeValuesByPeriod","FileSaver","geojson","Blob","createGeoJsonBlob","downloading","onStartClick","onCancelClick","onCloseDialog","formatOptions","selectedFormat","setSelectedFormat","humanReadable","setHumanReadable","isDownloading","setIsDownloading","DataDownloadDialogActions","changeLayerOpacity","toggleLayerExpand","showDataDownloadDialog","setShowDataDownloadDialog","useSetting","layerRemovedAlert","canEdit","canToggleDataTable","canDownload","canOpenAs","newOpacity","currentAO","getAnalyticalObjectFromThematicLayer","DataDownloadDialog","SortableLayer","SortableElement","OverlayCard","SortableLayersList","SortableContainer","sortLayers","onSortEnd","useDragHandle","BasemapCard","isDownload","download","showDialog","openLayersPanel","closeLayersPanel","LayersLoader","closeContextMenu","openCoordinatePopup","showEarthEngineValue","IconLocation16","legendPositions","pos","showName","legendPosition","showLegend","DownloadLegend","OpenAsMapDialog","selectedDataDims","clearAnalyticalObject","lastDataId","setDefaultState","onSelectDataDim","disableProceedBtn","numItems","onProceedClick","analyticalObject","ORGUNIT_PROFILE_QUERY","profile","currentYear","formatter","coordFormat","address","closedDate","comment","contactPerson","email","imageId","levelName","openingDate","phoneNumber","alt","IconDimensionOrgUnit16","ListItem","OrgUnitProfile","IconCross24","OrgUnitInfo","info","OrgUnitData","toggleDownloadDialog","toStringFn","DownloadDialog","mapName","hasLegend","hasName","isSupported","createElementNS","LegendPosition","onDownload","downloadMapImage","sourceEl","filename","toBlob","blob","getElementById","DownloadButton","MenuButton","interpretationsOpen","interpretationsEnabled","openInterpretationsPanel","closeInterpretationsPanel","onLayerSelect","anchorEl","maxWidth","LayerList","AddLayerButton","buttonRef","toggleDialog","IconAddCircle24","AddLayerPopover","saveMapMutation","skipTranslation","skipSharing","saveAsNewMapMutation","getMapName","toLocaleDateString","getSavedMessage","getSaveFailureMessage","newMap","setMapProps","saveAlert","saveAsAlert","deleteAlert","fileMenuErrorAlert","openMapErrorAlert","saveMapMutate","useDataMutation","saveAsNewMapMutate","UiFileMenu","fileType","fileObject","onNew","onOpen","onSave","onSaveAs","newMapConfig","uid","onRename","onDelete","AppMenu","FileMenu","InterpretationsToggle","App","basemapsLoaded","setBasemapsLoaded","isEmpty","keyBingMapsApiKey","setBingMapsApiKey","InterpretationsPanel","LayersToggle","LayersPanel","MapContainer","BottomPanel","LayerEdit","_action$payload","newState","mapContextMenu","combineReducers","composeEnhancer","compose","store","createStore","reducer","applyMiddleware","thunk","Cypress","namespace","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","d2Config","schemas","AppWrapper","ReduxProvider","D2Shim","d2Error","SystemSettingsProvider","UserSettingsProvider","keyUiLocale","moment","WindowDimensionsProvider"],"sourceRoot":""}