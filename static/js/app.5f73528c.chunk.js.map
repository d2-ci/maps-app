{"version":3,"file":"static/js/app.5f73528c.chunk.js","mappings":"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,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,IAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IACvD,KAAM,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,KA+B5CC,GAA4B,WACvC,IAAIC,EAAWtyE,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK0xE,GACnF,MAAMa,EAAeT,GAAkBQ,IAAaA,GAC9C,IACJr3D,EAAG,MACHD,EACAw3D,QAASliE,IACPmiE,EAAAA,GAAAA,IAAiBF,GACfG,EAAmBA,CAAC3uB,EAAG1jC,EAAGtJ,IAAO,GAAEgtC,KAAK1jC,EAAEoE,WAAWkuD,SAAS,EAAG,QAAQ57D,EAAE0N,WAAWkuD,SAAS,EAAG,OACxG,MAAO,CACLrhE,UAAWohE,EAAiBpiE,EAAO,EAAG0K,EAAOC,GAC7C1J,QAASmhE,EAAiBpiE,EAAM0K,EAAOC,GAE3C,EAMO,SAAS23D,GAAUzrC,EAAKjwB,EAAO27D,GACpC,MAAMC,EAAmBD,EAAY3iE,QAAQ,MAAO,IACpD,OAAIgH,GAASiwB,EAAIlnC,OACRknC,EAAM2rC,GAEX57D,EAAQ,IACVA,EAAQ,GAEH47D,EAAmB3rC,EAAIntB,MAAM,EAAG9C,GAAS47D,EAAmB3rC,EAAIntB,MAAM9C,EAAQ,GAAKiwB,EAC5F,CACO,MAAM4rC,GAAkB12E,IAC7B,IAAI,KACFyV,EAAI,SACJkhE,EAAQ,MACRC,EAAK,SACLX,EAAWZ,IACTr1E,EACJ,IAAKyV,EACH,MAAO,GAELkhE,GAAYlhE,EAAK7R,OAASgzE,IAE1BnhE,EADEA,EAAK7R,QAAU+yE,EAAS/yE,OACnB+yE,EACkB,MAAhBlhE,EAAKmhE,GACPL,GAAUI,EAAUC,EAAOnhE,EAAKmhE,EAAQ,IAExCL,GAAUI,EAAUC,EAAQ,EAAGnhE,EAAKmhE,EAAQ,KAGnC,IAAhBnhE,EAAK7R,QAA4B,MAAZ6R,EAAK,KAC5BA,EAAOA,EAAKkI,MAAM,GAAI,GAAK,IAAMlI,EAAKkI,OAAO,IAE/C,IAAIk5D,EAAc,IACE,IAAhBphE,EAAK7R,QAA4B,MAAZ6R,EAAK,IAA8B,IAAhBA,EAAK7R,QAA4B,MAAZ6R,EAAK,IAA0B,MAAZA,EAAK,IAA8B,IAAhBA,EAAK7R,QAA4B,MAAZ6R,EAAK,IAA8B,IAAhBA,EAAK7R,QAA4B,MAAZ6R,EAAK,IAA0B,MAAZA,EAAK,MAC1LohE,EAAc,KAEhB,MAAMC,EAAcrhE,EAAK5B,QAAQ,MAAO,IAClCI,EAAO6iE,EAAYn5D,MAAM,EAAG,GAC5BgB,EAAQm4D,EAAYn5D,MAAM,EAAG,GAC7BiB,EAAMk4D,EAAYn5D,MAAM,EAAG,GACjC,GAAIm5D,EAAYlzE,OAAS,EACvB,OAAOkzE,EAET,MAAMC,EAAyB,SAAT9iE,EAhDgBgiE,KACtC,MAAMC,EAAeT,GAAkBQ,IAAaA,EAEpD,OADcG,EAAAA,GAAAA,IAAiBF,GAClBC,OAAO,EA6CoBa,CAAyBf,GAAYhiE,EAC7E,GAA2B,IAAvB6iE,EAAYlzE,OACd,MAAQ,GAAEmzE,IAAgBF,IAE5B,GAAIC,EAAYlzE,OAAS,EACvB,MAAQ,GAAEmzE,KAAiBp4D,IAE7B,MAAMs4D,EAlF0BC,EAACjjE,EAAMgiE,KACvC,GAAIA,IAAaV,GACf,OAAOQ,GAAqB9hE,GAAMrQ,OAAS,EAE7C,MAAMsyE,EAAeT,GAAkBQ,IAAaA,EAOpD,OANakB,GAAAA,GAAAA,UAAAA,KAAwB,CACnCljE,KAAMA,EACN0K,MAAO,EACPC,IAAK,EACLq3D,SAAUC,IAEAkB,YAAY,EAuEPF,CAAmBjjE,EAAMgiE,GACpCoB,EAA2B,OAAV14D,EAAiB,EAAIA,EAAQs4D,EAAWA,EAAWt4D,EAC1E,GAA2B,IAAvBm4D,EAAYlzE,OACd,MAAQ,GAAEmzE,KAAiBM,EAAejvD,WAAWkuD,SAAS,EAAG,OAAOO,IAE1E,GAAIC,EAAYlzE,OAAS,EACvB,MAAQ,GAAEmzE,KAAiBM,EAAejvD,WAAWkuD,SAAS,EAAG,QAAQ13D,IAE3E,MAAM04D,EA1GyBC,EAACtjE,EAAM0K,EAAOs3D,KAC7C,GA5J2B,WA4JvBA,GAAqChiE,EAAO,IAAM,GAAe,IAAV0K,EACzD,OAAO,GAET,GAAIs3D,IAAaV,GACf,OAAOQ,GAAqB9hE,GAAM0K,GAEpC,MAAMu3D,EAAeT,GAAkBQ,IAAaA,EAOpD,OANakB,GAAAA,GAAAA,UAAAA,KAAwB,CACnCljE,KAAMA,EACN0K,MAAOA,EACPC,IAAK,EACLq3D,SAAUC,IAEAsB,WAAW,EA4FAD,CAAkBR,EAAeM,EAAgBpB,GAClEwB,EAAuB,OAAR74D,EAAe,EAAIA,EAAM04D,EAAiBA,EAAiB14D,EAChF,MAAQ,GAAEm4D,KAAiBM,EAAejvD,WAAWkuD,SAAS,EAAG,QAAQmB,EAAarvD,WAAWkuD,SAAS,EAAG,MAAM,EAExGoB,GAAmBjiE,GACV,IAAhBA,EAAK7R,QAA4B,MAAZ6R,EAAK,IAA8B,IAAhBA,EAAK7R,QAA4B,MAAZ6R,EAAK,GAC7DA,EAAKkI,MAAM,GAAI,GACiD,KAApD,OAATlI,QAA0B,IAATA,OAAkB,EAASA,EAAK7R,QACpD6R,EAAKkI,MAAM,GAAI,GAAK,IAAMlI,EAAKkI,OAAO,GAEtClI,EChRLkiE,GAAoC,CACxCC,SAAU,CACRv3D,SAAU,gBACVxU,GAAI7L,IACF,IAAI,GACF6L,GACE7L,EACJ,OAAO6L,CAAE,EAEX0d,OAAQpmB,IACN,IAAI,aACF0M,GACE1M,EACJ,MAAO,CACL4M,OAAQ,CAAE,2CAA0CF,+EACpDme,QAAQ,EACT,IChBD6pD,GAA0C,CAC9CjW,wBAAyB,CACvBvhD,SAAU,WACVxU,GAAI7L,IACF,IAAI,GACF6L,GACE7L,EACJ,OAAO6L,CAAE,EAEX0d,OAAQpmB,IACN,IAAI,aACF0M,GACE1M,EACJ,MAAO,CACL4M,OAAQ,CAAE,8EAA6EF,+EACvFme,QAAQ,EACT,IAIM8pD,GAAoCz9D,IAC/C,IAAI,UACF09D,GACE19D,EACJ,MAAO29D,EAAmBC,IAAwBr3E,EAAAA,EAAAA,UAAS,OACpD6+B,EAAmBy4C,IAAwBt3E,EAAAA,EAAAA,UAAS,OACrD,aACJiP,GACEvN,MACE,QACJi0D,EAAO,QACP/1D,IACEC,EAAAA,EAAAA,IAAao3E,GAAyC,CACxDlhB,MAAM,EACNppC,UAAW,CACT1d,gBAEFmgE,WAAY3vE,IACV,IAAI83E,EAAuBC,EAAwBC,EACnD,MAAMj4B,GAAuB,OAAT//C,QAA0B,IAATA,GAAsF,QAA1D83E,EAAwB93E,EAAKuhE,+BAA+D,IAA1BuW,GAAgI,QAAnFC,EAAyBD,EAAsBnjD,sCAAuE,IAA3BojD,OAApN,EAAiQA,EAAuBxqE,KAAI0qE,GAAQA,EAAKpjD,2BAA4B,GAC5X+iD,EAAqBrnE,GAAkBwvC,IACvC83B,GAA+B,OAAT73E,QAA0B,IAATA,GAAuF,QAA3Dg4E,EAAyBh4E,EAAKuhE,+BAAgE,IAA3ByW,OAA7E,EAA0HA,EAAuB54C,oBAAsB,CAAC,EAAE,IAYvO,OATAt+B,EAAAA,EAAAA,YAAU,KACR82E,EAAqB,MACrBC,EAAqB,MACjBH,GACFxhB,EAAQ,CACN1qD,GAAIksE,GAER,GACC,CAACA,EAAWxhB,IACR,CACLyhB,oBACAv4C,oBACAj/B,UACD,ECzDU+3E,GAAoBv4E,IAC/B,IAAI,UACF+3E,EAAS,eACTS,EAAc,aACdv8D,EAAY,aACZC,GACElc,EACJ,MAAM,aACJy4E,EACAj4E,QAASk4E,GFW8Br+D,KACzC,IAAI,eACFm+D,GACEn+D,EACJ,MAAOo+D,EAAcE,IAAmB/3E,EAAAA,EAAAA,UAAS,OAC3C,aACJiP,GACEvN,MACE,QACJi0D,EAAO,QACP/1D,IACEC,EAAAA,EAAAA,IAAak3E,GAAmC,CAClDhhB,MAAM,EACNppC,UAAW,CACT1d,gBAEFmgE,WAAY3vE,IACV,IAAIu4E,EAAgBC,EACpB,MAAMjB,GAAqB,OAATv3E,QAA0B,IAATA,GAAgE,QAApCu4E,EAAiBv4E,EAAKu3E,gBAAyC,IAAnBgB,GAA2G,QAArEC,EAAwBD,EAAe3mD,gCAAgE,IAA1B4mD,OAAzK,EAAqNA,EAAsBjrE,KAAI0qE,GAAQA,EAAK/pE,gBAAiB,GAClUoqE,EAAgB/nE,GAAkBgnE,GAAU,IAWhD,OARAz2E,EAAAA,EAAAA,YAAU,KACRw3E,EAAgB,MACZH,GACFjiB,EAAQ,CACN1qD,GAAI2sE,GAER,GACC,CAACA,EAAgBjiB,IACb,CACLkiB,eACAj4E,UACD,EE3CGs4E,CAA4B,CAC9BN,oBAEI,kBACJR,EAAiB,kBACjBv4C,EACAj/B,QAASu4E,GACPjB,GAAkC,CACpCC,cAQF,MAAO,CACLiB,gBAPqBzyC,EAAAA,EAAAA,UAAQ,IACR,OAAjBkyC,GAA+C,OAAtBT,EACpBl8D,GAAiBk8D,EAAmBS,EAAcx8D,GAAgB,KAAMC,GAAgB,MAE1F,MACN,CAACu8D,EAAcT,EAAmB/7D,EAAcC,IAGjDujB,oBACAj/B,QAASk4E,GAAuBK,EACjC,EC5BG98D,GAAe,CAAC,cAsFtB,OArFwBjc,IACtB,IAAI,MACFqC,EAAK,QACLwvB,EAAO,aACPF,EAAY,qBACZa,EAAoB,SACpB2V,EAAQ,UACRjrB,GACEld,EACJ,MAAM,eACJg5E,EAAc,kBACdv5C,GACE84C,GAAkB,CACpBR,UAAuB,OAAZlmD,QAAgC,IAAZA,OAAqB,EAASA,EAAQhmB,GACrE2sE,eAAiC,OAAjB7mD,QAA0C,IAAjBA,OAA0B,EAASA,EAAa9lB,GACzFoQ,kBAEIu+B,EAAehoB,EAAuB9pB,GAAOrB,GAC7C0I,GAASw2B,EAAAA,EAAAA,UAAQ,KACrB,MAAM0yC,IAAezmD,EACfziB,EAAS,GAef,OAdIkpE,IACFlpE,EAAOJ,KAAK,CACV9D,GAAInD,GACJK,KAAM/G,GAAAA,EAAAA,EAAO,UAEf+N,EAAOJ,KAAK,CACV9D,GAAIrE,GACJuB,KAAM/G,GAAAA,EAAAA,EAAO,gBAGjB+N,EAAOJ,KAAK,CACV9D,GAAIxE,GACJ0B,KAAM/G,GAAAA,EAAAA,EAAO,oBAEVy9B,GAGqB,OAAtBA,QAAoD,IAAtBA,GAAgCA,EAAkB5zB,KAClFkE,EAAOJ,KAAK,CACV9D,GAAIvE,GACJyB,KAAM/G,GAAAA,EAAAA,EAAO,yBAEf+N,EAAOJ,KAAK,CACV9D,GAAItE,GACJwB,KAAM/G,GAAAA,EAAAA,EAAO,8BAGbg3E,GACFjpE,EAAOJ,QAAQqpE,GAEbC,GACFlpE,EAAOJ,KAAK,CACV9D,GjSyBiC,aiSxBjC9C,KAAM/G,GAAAA,EAAAA,EAAO,gCAGVwwB,EAAuBziB,EAAOc,QAAOsJ,GAAKA,EAAEtO,KAAO2mB,IAAwBziB,GArBzEA,CAqB+E,GACvF,CAAC0vB,EAAmBu5C,EAAgBxmD,IAQvC,OALArxB,EAAAA,EAAAA,YAAU,KACJs+B,GAAqBu5C,IAAmBjpE,EAAOhC,MAAKoM,GAAKA,EAAEtO,KAAOxJ,KACpE8lC,EAASqS,EACX,GACC,CAAC/a,EAAmBu5C,EAAgBjpE,EAAQ1N,EAAOm4C,EAAcrS,IAChDxmC,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAO/lB,EAAuBxwB,GAAAA,EAAAA,EAAO,6BAA+BA,GAAAA,EAAAA,EAAO,oBAC3EuO,MAAOR,EACP1N,MAAO0N,EAAOhC,MAAKoM,GAAKA,EAAEtO,KAAOxJ,IAASA,EAAQ,KAClD7B,QAAS6B,IAAUgF,KAA6Bo4B,EAChDgb,SAAUp4C,IAAUmF,GAA6Bi4B,EAAoBz9B,GAAAA,EAAAA,EAAO,6DAA+DA,GAAAA,EAAAA,EAAO,+BAAiC,KACnLmmC,SAAUM,GAASN,EAASM,EAAM58B,IAClCqR,UAAWA,EACX8qB,SAAU,mBACV,E,YCjFJ,GAAqC,yCCoBrC,OAdqBhoC,IACnB,IAAI,QACFysC,GACEzsC,EACJ,OAAoB2B,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GACXO,QAASA,GACK9qC,EAAAA,cAAoBi3C,GAAAA,EAAS,CAC3CC,QAAS72C,GAAAA,EAAAA,EAAO,kBACFL,EAAAA,cAAoBu3E,GAAAA,EAAc,OAAO,ECd3D,MAAMrrD,GAAmB,CACvBC,UAAW,CACTzN,SAAU,aACVxU,GAAI7L,IACF,IAAI,GACF6L,GACE7L,EACJ,OAAO6L,CAAE,EAEX0d,OAAQ,CACNxZ,OAAQ,CAAC,KAAM,2BAA4B,0DAC3Cie,QAAQ,KA4Bd,OAxBqBmrD,IACnB,MAAOrrD,EAAWsrD,IAAgBx4E,EAAAA,EAAAA,UAAS,OACrC,QACJ21D,EAAO,QACP/1D,IACEC,EAAAA,EAAAA,IAAaotB,GAAkB,CACjC8oC,MAAM,EACNqZ,WAAY3vE,IACV+4E,EAAa/4E,EAAKytB,UAAU,IAWhC,OARA3sB,EAAAA,EAAAA,YAAU,KACRi4E,EAAa,MACTD,GACF5iB,EAAQ,CACN1qD,GAAIstE,GAER,GACC,CAACA,EAAa5iB,IACV,CACLzoC,YACAttB,UACD,ECNH,OA7BwBR,IACtB,IAAI,QACF2S,EAAO,MACPtQ,EAAK,SACL8lC,EAAQ,UACRjrB,GACEld,EAKJ,OAHI2S,EAAQ/O,OAAS,MACnB+O,EAAUA,EAAQgL,MAAM,EAAG,MAEThc,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,WACduO,MAAOoC,EAAQ/E,KAAI2iB,IAAM,CACvB1kB,GAAI0kB,EAAO5rB,KACXoE,KAAMwnB,EAAOxnB,SAEf1G,MAAOA,EACPg6C,UAAU,EACVlU,SAAUA,EACVjrB,UAAWA,GACX,ECxBJ,GAA2B,+BAA3B,GAAuE,iCAAvE,GAAmH,+BC4GnH,OA5DqBld,IACnB,IAAI,UACF0S,EAAS,OACT7B,EAAM,YACNsoE,EAAW,SACXhxC,GACEnoC,EACJ,MAAM,UACJ8tB,GACEurD,GAAaF,GACXG,EAnDaC,EAAC7mE,EAAWymE,KAC/B,IAAIG,EAsCJ,MArCI,CAAC,SAAU,UAAW,mBAAoB,QAAQvmE,SAASL,GAC7D4mE,EAAY,CAAC,CACXztE,GAAI,KACJ9C,KAAM,KACL,CACD8C,GAAI,KACJ9C,KAAM,KACL,CACD8C,GAAI,KACJ9C,KAAM,MACL,CACD8C,GAAI,KACJ9C,KAAM,KACL,CACD8C,GAAI,KACJ9C,KAAM,MACL,CACD8C,GAAI,KACJ9C,KAAM,OAECowE,EACTG,EAAY,CAAC,CACXztE,GAAI,KACJ9C,KAAM/G,GAAAA,EAAAA,EAAO,YAENmN,GAAe4D,SAASL,KACjC4mE,EAAY,CAAC,CACXztE,GAAI,OACJ9C,KAAM/G,GAAAA,EAAAA,EAAO,aACZ,CACD6J,GAAI,KACJ9C,KAAM/G,GAAAA,EAAAA,EAAO,OACZ,CACD6J,GAAI,KACJ9C,KAAM/G,GAAAA,EAAAA,EAAO,aAGVs3E,CAAS,EAYEC,CAAa7mE,EAAWymE,GAC1C,IAAIl+D,EACA5Y,EACJ,GAAIwO,EAAQ,CACV,MAAM2oE,EAAc3oE,EAAO+K,MAAM,KACjCX,EAAWu+D,EAAY,GACvBn3E,EAAQm3E,EAAY,EACtB,MAAWF,IACTr+D,EAAWq+D,EAAU,GAAGztE,IAE1B,MAAM8G,EAAUwmE,GAAeA,KAA+B,OAAdrrD,QAAoC,IAAdA,OAAuB,EAASA,EAAUjiB,IAAMiiB,EAAUnb,QAAU,KAC1I,OAAoBhR,EAAAA,cAAoBq3C,EAAAA,SAAU,KAAMsgC,GAA0B33E,EAAAA,cAAoBg6C,GAAa,CACjHpD,MAAOv2C,GAAAA,EAAAA,EAAO,YACduO,MAAO+oE,EACPj3E,MAAO4Y,EACPktB,SAAUsxC,GAAetxC,EAAU,GAAEsxC,EAAY5tE,MAAMxJ,GAAgB,MACvE6a,UAAWgvB,KACTv5B,GAAwBhR,EAAAA,cAAoB+3E,GAAiB,CAC/D/mE,QAASA,EACTtQ,MAAOA,EAAQA,EAAMuZ,MAAM,KAAO,KAClCusB,SAAUwxC,GAAYxxC,EAAU,GAAEltB,KAAY0+D,EAAS3pE,KAAK,QAC5DkN,UAAWgvB,KACTh9B,GAAiB6D,SAASL,IAA2B/Q,EAAAA,cAAoBu5C,GAAa,CACxF3C,MAAOv2C,GAAAA,EAAAA,EAAO,SACdK,WAAiBxB,IAAVwB,EAAsB8P,OAAO9P,GAASA,EAC7C8lC,SAAUwxC,GAAYxxC,EAAU,GAAEltB,KAAY0+D,KAC9Cz8D,UAAWgvB,KACT/8B,GAAe4D,SAASL,KAAeymE,GAA4Bx3E,EAAAA,cAAoBi4E,GAAW,CACpGrhC,MAAOv2C,GAAAA,EAAAA,EAAO,SACdK,MAAOA,GAAS,GAChB8lC,SAAUwxC,GAAYxxC,EAAU,GAAEltB,KAAY0+D,KAC9Cz8D,UAAWgvB,KACT98B,GAAkB2D,SAASL,IAA2B/Q,EAAAA,cAAoB67C,GAAU,CACtFjF,MAAOv2C,GAAAA,EAAAA,EAAO,OACdw2C,QAAkB,GAATn2C,EACT8lC,SAAU8jB,GAAa9jB,EAAS8jB,EAAY,OAAS,QACrD/uC,UAAWgvB,KACK,SAAdx5B,GAAqC/Q,EAAAA,cAAoBk4E,GAAY,CACvEthC,MAAOv2C,GAAAA,EAAAA,EAAO,QACdK,MAAOA,EACP8lC,SAAU1yB,GAAQ0yB,EAAU,GAAEltB,KAAYxF,KAC1CyH,UAAWgvB,KACV,ECpGL,GAA4B,6BAA5B,GAA0E,kCAA1E,GAAmH,wBCkFnH,OA3EkBlsC,IAChB,IAAI,MACF6a,EAAK,UACL3B,EAAS,OACTrI,EAAM,UACNyI,EAAS,SACT6uB,EAAQ,SACR2a,GACE9iD,EACJ,MAAM,UACJ0S,EAAS,UACTob,GACExU,EAAUvL,MAAK2M,GAAKA,EAAE7O,KAAOqN,KAAc,CAAC,EAC1Cy5D,EAAWA,CAACxvE,EAAO22E,KACvB,IAAI,GACFjuE,GACE1I,EACJ,MAAM4F,EAAOuQ,EAAUzI,QAAO6J,GAAKA,EAAE7O,KAAOA,IAAI,GAAG9C,KAGjDo/B,EAASttB,EAFPhP,IAAOqN,EAEO,CACdA,UAAWrN,EACX9C,OACA8H,OAAQ,MAGM,CACdqI,UAAWrN,EACX9C,OACA8H,OAAQipE,GAEZ,EAEIC,EAAgB7gE,IAAcI,EAAUvL,MAAK+C,GAAQA,EAAKjF,KAAOqN,IACvE,IAAI8gE,EACAD,IACFC,EAAoBh4E,GAAAA,EAAAA,EAAO,0DAA2D,CACpF6J,GAAIqN,EACJrU,YAAa,QAGjB,IAAIo1E,EAAc,KAIlB,OAHKF,IACHE,EAAc/gE,GAAa,MAETvX,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACGvqC,EAAAA,cAAoBg6C,GAAa,CAC/CpD,MAAOv2C,GAAAA,EAAAA,EAAO,aACduO,MAAO+I,EACPjX,MAAO43E,EACP9xC,SAAUwqC,EACVz1D,UAAWgvB,KACTx5B,GAA0B/Q,EAAAA,cAAoBu4E,GAAc,CAC9DxnE,UAAWA,EACXymE,YAA2B,OAAdrrD,QAAoC,IAAdA,OAAuB,EAASA,EAAUjiB,GAC7EgF,OAAQA,EACRs3B,SAAU2xC,GAAanH,EAAS,CAC9B9mE,GAAIqN,GACH4gE,KACYn4E,EAAAA,cAAoBw4E,GAAc,CACjD1tC,QAASA,IAAMqW,EAASjoC,KACtBk/D,GAA8Bp4E,EAAAA,cAAoBi/C,GAAAA,EAAM,CAC1D1jC,UAAWgvB,GACX3rC,OAAO,GACNy5E,GAAmB,ECxExB,GAA8B,iCAA9B,GAA2E,+BAA3E,GAAiH,0BCDjH,SAAS5uC,KAAiS,OAApRA,GAAWh4B,OAAOi4B,OAASj4B,OAAOi4B,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIzyB,EAAI,EAAGA,EAAInV,UAAUC,OAAQkV,IAAK,CAAE,IAAI5P,EAASvF,UAAUmV,GAAI,IAAK,IAAIvH,KAAOrI,EAAckK,OAAOtP,UAAU0nC,eAAeC,KAAKviC,EAAQqI,KAAQg6B,EAAOh6B,GAAOrI,EAAOqI,GAAU,CAAE,OAAOg6B,CAAQ,EAAUH,GAASM,MAAMC,KAAMhoC,UAAY,CAUlV,MAAMuY,GAAe,CAAC,gBAAiB,oBAAqB,cA+C5D,OA9CoBlc,IAClB,IAAI,QACFqK,EAAU,GAAE,QACZwnB,EAAO,aACPF,GACE3xB,EACJ,MAAM6lC,GAAWC,EAAAA,EAAAA,OACX,eACJkzC,GACET,GAAkB,CACpBR,UAAuB,OAAZlmD,QAAgC,IAAZA,OAAqB,EAASA,EAAQhmB,GACrE2sE,eAAiC,OAAjB7mD,QAA0C,IAAjBA,OAA0B,EAASA,EAAa9lB,GACzFqQ,kBAEF,OAAKyV,EAKkB,OAAnBqnD,EACK,KAEWr3E,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACV7hC,EAAQuD,KAAI,CAACkD,EAAM+J,IAAuBlZ,EAAAA,cAAoBy4E,GAAWhvC,GAAS,CACnF75B,IAAKsJ,EACLA,MAAOA,EACPvB,UAAW0/D,EACX7wC,SAAUA,CAACttB,EAAO/J,IAAS+0B,EhCLHw0C,EAACx/D,EAAOhK,KAAM,CACxCtR,KAAMC,GACNqb,QACAhK,WgCEsCwpE,CAAax/D,EAAO/J,IACxDgyC,SAAUjnC,GAAOgqB,EhCZOhrB,KAAK,CAC/Btb,KAAMC,GACNqb,UgCU4By/D,CAAaz+D,KACtC/K,MAAsBnP,EAAAA,cAAoB,MAAO,CAClDub,UAAWgvB,IACGvqC,EAAAA,cAAoBiyC,GAAAA,EAAQ,CAC1C2mC,OAAO,EACP9tC,QAASA,KAAM5G,ShCvBY,CAC7BtmC,KAAMC,GACNqR,WAFuBA,KgCwBvB,GAAG7O,GAAAA,EAAAA,EAAO,iBApBYL,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACVlqC,GAAAA,EAAAA,EAAO,2DAkBc,EC7C5B,GAAyB,+BAAzB,GAAkE,gCAAlE,GAA0G,8BAA1G,GAAgJ,8BCShJ,MAAMw4E,IAAax7C,EAAAA,GAAAA,OAAM,EAAG,IAAIpxB,KAAIgW,IAAG,CACrC/X,GAAI+X,EACJ7a,KAAM6a,EAAIwE,eA2CZ,QAAeo6B,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACLuyB,OAAQg8C,EAAUh8C,OAClBjO,QAASiqD,EAAUjqD,QACnBsF,WAAY2kD,EAAU3kD,WACvB,GACA,CACDwjD,kBAAiB,GACjBC,cACF,IAZA,EAxCuBxwE,IACrB,IAAI,OACF01B,EAAM,QACNjO,EAAO,WACPsF,EAAU,kBACVwjD,EAAiB,cACjBC,GACExwE,EACJ,MAAMy6E,EAAiB1tD,EAAapF,GAAcoF,GAAcnF,GAChE,MAAO,CAAcjmB,EAAAA,cAAoBg6C,GAAa,CACpDpqC,IAAK,iBACLgnC,MAAOv2C,GAAAA,EAAAA,EAAO,kBACdK,MAAOqzB,GAAUztB,GACjBsI,M7SmGwC,CAAC,CAC3C1E,GAAI5D,GACJc,KAAM/G,GAAAA,EAAAA,EAAO,oBACZ,CACD6J,GAAI3D,GACJa,KAAM/G,GAAAA,EAAAA,EAAO,kB6SvGXmmC,SAAUzS,GAAU66C,EAAkB76C,EAAO7pB,IAC7CqR,UAAWgvB,KACIvqC,EAAAA,cAAoB,MAAO,CAC1C4P,IAAK,SACS5P,EAAAA,cAAoBg6C,GAAa,CAC/CpD,MAAOv2C,GAAAA,EAAAA,EAAO,WACdK,WAAmBxB,IAAZ4mB,EAAwBA,EAAUI,GACzCtX,MAAOiqE,GACPryC,SAAUr3B,GAAQ0/D,EAAcjpD,GAAgBkzD,EAAgB3pE,EAAKjF,KACrEqR,UAAWgvB,KACIvqC,EAAAA,cAAoBuyE,GAAkB,CACrDhqE,QAAS6iB,GAA0BjF,GACnCqgB,SAAUqoC,EACVrzD,MAAO,IACPD,UAAWgvB,KACIvqC,EAAAA,cAAoB,MAAO,CAC1Cub,UAAWgvB,MACT,ICrCN,MAAMwuC,GAAoB,CACxBC,KAAM,CACJt6D,SAAU,aACVkJ,OAAQ,CACNxZ,OAAQ,CAAC,KAAM,4BACfie,QAAQ,KAIRrkB,GAAQ,CACZwT,MAAO,QA0BT,OAxBwBnd,IACtB,IAAI,eACF46E,GACE56E,EACJ,MAAM4Z,GAAY8rB,EAAAA,EAAAA,KAAYC,GAASA,EAAM+rC,UAAU93D,YACjDisB,GAAWC,EAAAA,EAAAA,OACX,QACJtlC,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAai6E,IACjB,OAAoB/4E,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,cACdxB,QAASA,EACT+P,MAAgB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKs6E,KAAKE,WAC7Dx4E,MAAOuX,EAAYA,EAAU/N,GAAK,KAClCswC,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,UAAYy4E,EAC5EzyC,SAAUvuB,GAAaisB,EAAS0rC,GAAa33D,IAC7CjQ,MAAOA,IACP,ECNJ,QAAe64C,EAAAA,EAAAA,IAAQ,KAAM,CAC3B+tB,kBACF,IAFA,EA1ByBvwE,IACvB,IAAI,QACF86E,EAAO,OACPplD,EAAM,kBACN66C,GACEvwE,EACJ,OAAO01B,EAAsB/zB,EAAAA,cAAoBo5E,GAAY,CAC3D14E,MAAOqzB,IAAWxtB,GAA8BD,GAAiCytB,EACjFyS,SAAUzS,GAAU66C,EAAkBp+D,OAAOujB,M/SqGnBslD,E+SpGE,WAAZF,E/SoGsB,CAAC,CACzCjvE,GAAI5D,GACJc,KAAM/G,GAAAA,EAAAA,EAAO,2BACZ,CACD6J,GAAI7D,GACJe,KAAM/G,GAAAA,EAAAA,EAAO,+BACRg5E,EAAW,CAAC,CACjBnvE,GAAI1D,GACJY,KAAM/G,GAAAA,EAAAA,EAAO,yBACV,K+S7GqC4L,KAAIzK,IAC1C,IAAI,GACF0I,EAAE,KACF9C,GACE5F,EACJ,OAAoBxB,EAAAA,cAAoBs5E,GAAO,CAC7C1pE,IAAK1F,EACLxJ,MAAOsP,OAAO9F,GACd0sC,MAAOxvC,GACP,KACE,K/S0FsBiyE,K+S1FlB,ICOZ,QAAex4B,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACLyG,MAAO8nE,EAAU3kD,WAClB,GACA,CACDyjD,cACF,IATA,EAzBoBxwE,IAClB,IAAI,MACF4J,EAAK,cACL4mE,GACExwE,EAOJ,OALAmB,EAAAA,EAAAA,YAAU,KACHyI,GAA0B,IAAjBA,EAAMhG,QAClB4sE,EhT+CwB,UgT9C1B,GACC,CAAC5mE,EAAO4mE,IACJ5mE,EAAqBjI,EAAAA,cAAoBu5E,GAAa,CAC3D3iC,MAAOv2C,GAAAA,EAAAA,EAAO,SACd4H,MAAOA,EACPu+B,SAAUqoC,EACVrzD,MAAO,IACPxT,MAAO,CACLwxE,WAAY,KAEX,IAAI,IC6BX,QAAe34B,EAAAA,EAAAA,KAAQxiD,IACrB,IAAI,UACF0xE,GACE1xE,EACJ,MAAO,CACL01B,OAAQg8C,EAAUh8C,OAClB9b,UAAW83D,EAAU93D,UACtB,GACA,CACD22D,kBAAiB,GACjBgB,aACF,IAXA,EA9C2Bp4D,IACzB,MAAM,QACJ2hE,EAAO,OACPplD,EAAM,SACNhc,EAAQ,UACRE,EAAS,kBACT22D,EAAiB,aACjBgB,EAAY,eACZqJ,EAAc,MACdjxE,GACEwP,EACEmlB,EAAgB5I,IAAWvtB,GAC3BizE,EAAe1lD,IAAW1tB,GAchC,OAbA7G,EAAAA,EAAAA,YAAU,KAEHu0B,GAEH66C,EAAkB72D,GAAYA,EAASE,UAAY5R,GAA4BC,GACjF,GACC,CAACytB,EAAQhc,EAAU62D,KACtBpvE,EAAAA,EAAAA,YAAU,KAEJi6E,IAAiBxhE,GAA0B,OAAbF,QAAkC,IAAbA,GAAuBA,EAASE,WACrF23D,EAAa73D,EAASE,UACxB,GACC,CAACwhE,EAAcxhE,EAAWF,EAAU63D,IACnB5vE,EAAAA,cAAoB,MAAO,CAC7CgI,MAAOA,GACOhI,EAAAA,cAAoB05E,GAAkB,CACpD3lD,OAAQA,EACRolD,QAASA,EACTphE,SAAUA,IACR4kB,EAA6B38B,EAAAA,cAAoB25E,GAAa,MAAQF,EAA4Bz5E,EAAAA,cAAoB45E,GAAiB,CACzIX,eAAgBA,IACAj5E,EAAAA,cAAoB65E,GAAgB,MAAM,IC5C9D,GAAuB,0BAAvB,GAAyD,2BAAzD,GAA4F,2BCwB5F,OArBoBx7E,IAClB,IAAI,KACF+I,EAAI,MACJa,EAAK,SACLu+B,GACEnoC,EACJ,OAAoB2B,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACGvqC,EAAAA,cAAoBu5E,GAAa,CAC/CtxE,MAAOA,EACPu+B,SAAUA,EACVjrB,UAAWgvB,KACIvqC,EAAAA,cAAoB,OAAQ,CAC3Cub,UAAWgvB,IACVnjC,GAAM,ECjBX,GAAiC,uCCUjC,MACM6f,GAAWZ,GAAevD,IAC1Bg3D,GAAiBA,CAAClrD,EAAQ1V,KAAK,IAChC0V,EACH5mB,MAAO,CACLC,MAAO2mB,EAAO5mB,MAAQ4mB,EAAO5mB,MAAMC,MAAQgf,GAAS/N,MA+DxD,OA5DuB7a,IACrB,IAAI,gBACF07E,GACE17E,EACJ,MAAM,UACJ8tB,GACEurD,GAAaqC,EAAgB7vE,KAC1B9I,EAAS44E,IAAc/6E,EAAAA,EAAAA,YACxBilC,GAAWC,EAAAA,EAAAA,MACXnzB,EAAU+oE,EAAgB7vE,MAAsB,OAAdiiB,QAAoC,IAAdA,OAAuB,EAASA,EAAUjiB,IAAMiiB,EAAUnb,QAAU,KAC5HipE,EAAgBF,EAAgB/oE,QAChCw1B,GAAW1B,EAAAA,EAAAA,cAAY,CAAC56B,EAAIjC,KAChCi8B,EAASwqC,GAETqL,EAAgB/oE,QAAQ/E,KAAI2iB,GAAUA,EAAO1kB,KAAOA,EAAK,IACpD0kB,EACH5mB,MAAO,CACLC,UAEA2mB,KAAS,GACZ,CAACmrD,EAAiB71C,IAcrB,OAbA1kC,EAAAA,EAAAA,YAAU,MACHy6E,GAAiBjpE,IAChBA,EAAQ/O,QA/BE,GAiCZiiC,EAASwqC,GAAe19D,EAAQ/E,IAAI6tE,MAEpCE,EAAW35E,GAAAA,EAAAA,EAAO,2FAA4F,CAC5G4B,OAAQ+O,EAAQ/O,OAChBqG,IArCU,MAwChB,GACC,CAAC2xE,EAAejpE,EAASkzB,IACRlkC,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACV0vC,EAAgBA,EAAchuE,KAAIzK,IACnC,IAAI,GACF0I,EAAE,KACF9C,EAAI,MACJY,GACExG,EACJ,OAAoBxB,EAAAA,cAAoBk6E,GAAa,CACnDtqE,IAAK1F,EACL9C,KAAMA,EACNa,MAAOD,EAAMC,MACbu+B,SAAUv+B,GAASu+B,EAASt8B,EAAIjC,IAChC,IACC7G,EAAuBpB,EAAAA,cAAoBi/C,GAAAA,EAAM,CACpD79C,SAAS,GACRA,GAAwBpB,EAAAA,cAAoBG,GAAAA,EAAgB,CAC7DspD,OAAO,IACN,EChEL,MAAMzhD,GAAQ,CACZwxE,UAAW,IAsCb,OApCqBn7E,IACnB,IAAI,UACF0S,EAAS,OACTW,GACErT,EACJ,MAAM6lC,GAAWC,EAAAA,EAAAA,MASjB,OARA3kC,EAAAA,EAAAA,YAAU,KACHkS,IACHwyB,EAASyqC,GAAgB,OAAQ7rD,GAAkB,KACjC,YAAd/R,GACFmzB,EAASyqC,GAAgB,QAAS7rD,GAAkB,KAExD,GACC,CAACohB,EAAUnzB,EAAWW,IACpBA,EAGe1R,EAAAA,cAAoB,MAAO,CAC7CgI,MAAOA,IACOhI,EAAAA,cAAoBk6E,GAAa,CAC/C9yE,KAAM/G,GAAAA,EAAAA,EAAO,OACb4H,MAAOyJ,EAAO2jB,KACdmR,SAAUv+B,GAASi8B,EAASyqC,GAAgB,OAAQ1mE,MACpC,YAAd8I,GAAwC/Q,EAAAA,cAAoBk6E,GAAa,CAC3E9yE,KAAM/G,GAAAA,EAAAA,EAAO,MACb4H,MAAOyJ,EAAO4jB,MACdkR,SAAUv+B,GAASi8B,EAASyqC,GAAgB,QAAS1mE,OAX9C,IAYN,ECJL,OA3BsB5J,IACpB,IAAI,SACF0Z,EAAQ,MACR/P,GACE3J,EACJ,IAAK0Z,EACH,OAAO,KAET,MAAM,UACJhH,EAAS,UACTob,GACEpU,EACJ,OAAoB/X,EAAAA,cAAoB,MAAO,CAC7CgI,MAAOA,IACLmkB,GAAa5e,GAAiB6D,SAASL,GAA0B/Q,EAAAA,cAAoBm6E,GAAoB,CAC3GpiE,SAAUA,EACV/P,MAAO,CACLwT,MAAO,UAEN,MAAO2Q,GAAa1e,GAAkB2D,SAASL,GAA0B/Q,EAAAA,cAAoBo6E,GAAcriE,GAAY,KAAMoU,EAAyBnsB,EAAAA,cAAoBq6E,GAAgB,CAC7LN,gBAAiB5tD,IACd,KAAK,EClBZ,MAAM5R,GAAe,CAAC,OAAQ,gBAAiB,oBAAqB,cAgEpE,OA3DwBlc,IACtB,IAAI,QACF6xB,EAAO,aACPF,EAAY,MACZpxB,GACEP,EACJ,MAAMsyB,GAAgBoT,EAAAA,EAAAA,KAAYC,GAASA,EAAM+rC,UAAUp/C,gBACrDuT,GAAWC,EAAAA,EAAAA,OACX,eACJkzC,GACET,GAAkB,CACpBR,UAAuB,OAAZlmD,QAAgC,IAAZA,OAAqB,EAASA,EAAQhmB,GACrE2sE,eAAiC,OAAjB7mD,QAA0C,IAAjBA,OAA0B,EAASA,EAAa9lB,GACzFqQ,aACF,KACM+/D,EAAY,CAChBpwE,GAAI,OACJ9C,KAAM/G,GAAAA,EAAAA,EAAO,SAGf,GAAuB,OAAnBg3E,EACF,OAAO,KAET,MAAM1/D,EAAY,CAAC2iE,KAAcjD,GAC3Be,EAAgBznD,IAAkBhZ,EAAUvL,MAAK+C,GAAQA,EAAKjF,KAAOymB,EAAczmB,KACzF,IAAImuE,EACAD,IACFC,EAAoBh4E,GAAAA,EAAAA,EAAO,0DAA2D,CACpF6J,GAAIymB,EAAczmB,GAClBhH,YAAa,QAGjB,IAAIo1E,EAAc,KAIlB,OAHM15E,GAASw5E,IACbE,EAAc3nD,EAAgBA,EAAczmB,GAAKowE,EAAUpwE,IAEzClK,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBg6C,GAAa,CACjGpD,MAAOv2C,GAAAA,EAAAA,EAAO,sBACdK,MAAO43E,EACP1pE,MAAO+I,EACP6uB,SArBer3B,GAAQ+0B,EAASuqC,GAAiBt/D,EAAKjF,KAAOowE,EAAUpwE,GAAKiF,EAAO,OAsBnFk3B,SAAU,gCACNznC,GAASw5E,IAAkBznD,GAA8B3wB,EAAAA,cAAoBu6E,GAAe,CAChGxiE,SAAU4Y,IACR/xB,GAAsBoB,EAAAA,cAAoBi/C,GAAAA,EAAM,CAClDrgD,OAAO,GACNA,GAAQw5E,GAA8Bp4E,EAAAA,cAAoBi/C,GAAAA,EAAM,CACjErgD,OAAO,GACNy5E,GAAmB,EClBxB,OArC6Bh6E,IAC3B,IAAI,cACFm8E,EAAa,OACbptE,EAAM,SACNo5B,EAAQ,UACRjrB,EAAS,UACTi/B,GACEn8C,EACJ,MAAM,eACJ6V,GACEvT,KACEyR,EAAgB8B,EAAe9B,cAC/Ba,GAAU2xB,EAAAA,EAAAA,UAAQ,KAAO41C,EAAgB,CAAC,CAC9CtwE,GAAIJ,GACJ1C,KAAM/G,GAAAA,EAAAA,EAAO,qBACV,IAAIoW,OAAOhD,GAAmBrB,KAAiB,CAACA,EAAeooE,IAC9D95E,EAAQ0M,GAAU6F,EAAQ7G,MAAKiH,GAAKA,EAAEnJ,KAAOkD,EAAOlD,KAAMkD,EAAOlD,GAAK,KAC5E,OAAoBlK,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,UACduO,MAAOqE,EACPvS,MAAOA,EACP8lC,SAAUA,EACVjrB,UAAWA,EACXi/B,WAAY95C,GAAS85C,EAAYA,EAAY,KAC7CnU,SAAU,0BACV,E,kCC/BJ,GAAsB,0BAAtB,GAAuD,2BAAvD,GAA0F,4BAA1F,GAA8H,4BCoJ9H,OA7IqBhoC,IACnB,IAAI,kBACFo8E,EAAiB,gBACjBC,EAAe,UACflgC,EAAS,gBACT/nC,GACEpU,EACJ,MAAM6lC,GAAWC,EAAAA,EAAAA,MACX7wB,GAAYywB,EAAAA,EAAAA,KAAYC,GAASA,EAAM+rC,UAAUz8D,WAAa,KAC9DC,GAAUwwB,EAAAA,EAAAA,KAAYC,GAASA,EAAM+rC,UAAUx8D,SAAW,KAC1DonE,EAAqB5F,GAAgB,CACzCjhE,KAAMR,IAEFsnE,EAAmB7F,GAAgB,CACvCjhE,KAAMP,KAEDsnE,EAAsBC,IAA2B77E,EAAAA,EAAAA,UAAS,IAC1D87E,EAAoBC,IAAyB/7E,EAAAA,EAAAA,UAAS,IACtDg8E,EAAoBC,IAAyBj8E,EAAAA,EAAAA,UAAS,OACtDk8E,EAAkBC,IAAuBn8E,EAAAA,EAAAA,UAAS,MACnDo8E,EAAeA,CAACz9E,EAAMkW,KAC1B,IAAIwnE,EACJ,MAAMC,EAAW,CACfjhB,MAAO,CACL0a,SAAU1hE,EACVkoE,cAAe,eACfC,eAAgBhB,EAChBiB,mBAAoBZ,EACpBa,SAAUT,GAEZ/7B,IAAK,CACH61B,SAAUzhE,EACVioE,cAAe,aACfC,eAAgBf,EAChBgB,mBAAoBV,EACpBW,SAAUP,IAGd,KAAMx9E,KAAQ29E,GAEZ,YADAtqE,QAAQrS,MAAO,iBAAgBhB,yDAGjC,MAAM,SACJo3E,EAAQ,cACRwG,EAAa,eACbC,EAAc,mBACdC,EAAkB,SAClBC,GACEJ,EAAS39E,GACb,GAAIo3E,IAAalhE,EACf,OAEF,MAAMmhE,EAA4E,QAAnEqG,EAAwBvpE,SAAS6/B,cAAc4pC,UAAsD,IAA1BF,OAAmC,EAASA,EAAsBM,eACtJC,EAAW,CACf/nE,OACAkhE,WACAC,SAEF,IAAI6G,EAAmB7G,E9BqNSzzE,KAClC,IAAI,KACFsS,EAAI,SACJkhE,EAAQ,MACRC,GACEzzE,EACJ,IAAKsS,IAASkhE,IAAaC,EACzB,OAAO,EAET,MAAM8G,EAAqBjoE,EAAK7R,SAAW+yE,EAAS/yE,OAAS,EACvD+5E,EAAsB,KAAK3nE,KAAKP,EAAKmhE,EAAQ,IAAM,IACnDgH,EAA2C,MAApBnoE,EAAKmhE,EAAQ,GACpCiH,EAA6B,IAAVjH,GAAyB,IAAVA,EAClCkH,EAAkC,IAAVlH,GAA+B,IAAhBnhE,EAAK7R,OAClD,OAAO85E,IAAuBC,GAAuBE,GAAoBD,GAAwBE,EAAsB,E8BlOjHC,CAAqBP,GACvBC,EAAmB7G,EAAQ,E9BmOKv8D,KACpC,IAAI,KACF5E,EAAI,SACJkhE,EAAQ,MACRC,GACEv8D,EACJ,IAAK5E,IAASkhE,IAAaC,EACzB,OAAO,EAET,MAAMiH,EAA6B,IAAVjH,GAAyB,IAAVA,EAClCgH,EAA2C,MAApBnoE,EAAKmhE,EAAQ,GAC1C,OAAOiH,GAAoBD,CAAoB,E8B7OlCI,CAAuBR,IAEvB,KAAKxnE,MAAe,OAATP,QAA0B,IAATA,OAAkB,EAASA,EAAKmhE,EAAQ,KAAO,MACpF6G,EAAmB7G,EAAQ,GAE7B0G,EAASG,GACT,MAAMQ,EAAgBvH,GAAgB8G,GACtC33C,EAASu3C,EAAea,IACxBZ,GAAmBa,GAAaA,EAAY,GAAE,GAEhD/8E,EAAAA,EAAAA,YAAU,KACR,GAA2B,OAAvBy7E,EAA6B,CACjBlpE,SAAS6/B,cAAc,gBAC/B4qC,kBAAkBvB,EAAoBA,EAC9C,IACC,CAACJ,EAAsBI,KAC1Bz7E,EAAAA,EAAAA,YAAU,KACR,GAAyB,OAArB27E,EAA2B,CACfppE,SAAS6/B,cAAc,cAC/B4qC,kBAAkBrB,EAAkBA,EAC5C,IACC,CAACJ,EAAoBI,IAGxB7qC,GAAW,CAAC,MAAO,UAAU,KAC3B,MAAMmsC,EAAkB1qE,SAAS2qE,iBAAiB,aACiD,KAA1E,OAApBD,QAAgD,IAApBA,OAA6B,EAASA,EAAgBx6E,SACrFw6E,EAAgB,GAAGE,OACrB,IAGF,YAD8Bz9E,IAAdoU,QAAuCpU,IAAZqU,EAIvBvT,EAAAA,cAAoB48E,GAAAA,EAAO,CAC7CrhE,UAAWgvB,GACXuO,SAAUz4C,GAAAA,EAAAA,EAAO,6EACK,OAApBoS,QAAgD,IAApBA,OAA6B,EAASA,EAAgB6hE,YAAcZ,IAAiC1zE,EAAAA,cAAoB,IAAK,KAAMK,GAAAA,EAAAA,EAAO,oFAAkGL,EAAAA,cAAoB,MAAO,CACtSub,UAAWgvB,IACGvqC,EAAAA,cAAoB68E,GAAAA,EAAe,CACjDthE,UAAW,QACXq7B,MAAOv2C,GAAAA,EAAAA,EAAO,cACdi0E,SAAUZ,GACV/3D,OAA4B,OAApBlJ,QAAgD,IAApBA,OAA6B,EAASA,EAAgBkJ,OAC1F7H,KAAM6mE,EACNmC,aAAcpsE,GAAKwzB,EAASu2C,EAAwB,OAAN/pE,QAAoB,IAANA,OAAe,EAASA,EAAEqsE,qBACtFv2C,SAAU91B,GAAK2qE,EAAa,QAAe,OAAN3qE,QAAoB,IAANA,OAAe,EAASA,EAAEhQ,OAC7Ei4C,OAAQjoC,GAAKwzB,EAASu2C,EAAkB1E,GAAuB,OAANrlE,QAAoB,IAANA,OAAe,EAASA,EAAEhQ,SACjG6lC,YAAaotC,GACbttC,SAAU,mBACV22C,WAAW,IACIh9E,EAAAA,cAAoB,MAAO,CAC1Cub,UAAWgvB,IACGvqC,EAAAA,cAAoBi9E,GAAAA,EAAkB,CACpDh1E,MAAOse,GAAAA,EAAAA,WACSvmB,EAAAA,cAAoB68E,GAAAA,EAAe,CACnDthE,UAAW,MACXq7B,MAAOv2C,GAAAA,EAAAA,EAAO,YACdi0E,SAAUZ,GACV/3D,OAA4B,OAApBlJ,QAAgD,IAApBA,OAA6B,EAASA,EAAgBkJ,OAC1F7H,KAAM8mE,EACNkC,aAAcpsE,GAAKwzB,EAASw2C,EAAsB,OAANhqE,QAAoB,IAANA,OAAe,EAASA,EAAEqsE,qBACpFv2C,SAAU91B,GAAK2qE,EAAa,MAAa,OAAN3qE,QAAoB,IAANA,OAAe,EAASA,EAAEhQ,OAC3Ei4C,OAAQjoC,GAAKwzB,EAASw2C,EAAgB3E,GAAuB,OAANrlE,QAAoB,IAANA,OAAe,EAASA,EAAEhQ,SAC/F6lC,YAAaotC,GACbttC,SAAU,iBACV22C,WAAW,KACRxiC,GAA0Bx6C,EAAAA,cAAoB,MAAO,CACxDub,UAAWgvB,IACViQ,IArCM,IAqCK,ECpIhB,MAAM0iC,GAAkB,CACtBhzE,GAAI,aACJ9C,KAAM/G,GAAAA,EAAAA,EAAO,eAIT88E,GAAiB,CACrBC,SAAU,CACR1+D,SAAU,WACVkJ,OAAQvpB,IACN,IAAI,aACF6P,GACE7P,EACJ,MAAO,CACL+P,OAAQ,CAAC,KAAO,GAAEF,iBAA6B,kDAC/Cme,QAAQ,EACT,IAmDP,OA/CsB7qB,IACpB,IAAI,QACF0uB,EAAO,kBACP4N,EAAiB,UACjBviB,EAAS,UACTi/B,EAAS,SACThU,GACEhlC,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAaq+E,GAAgB,CAC/BvxD,UAAW,CACT1d,kBAGEkvE,EAAoB,OAAT1+E,QAA0B,IAATA,OAAkB,EAASA,EAAK0+E,SAASA,SAC3E,IAAIC,EACA38E,EAAoB,OAAZwvB,QAAgC,IAAZA,OAAqB,EAASA,EAAQhmB,GAOtE,OANIkzE,GAAYt/C,IACdu/C,EAAwB,CAACH,MAAoBE,EAASluE,QAAOghB,GAAWA,EAAQ4N,mBAAqB5N,EAAQ4N,kBAAkB5zB,KAAO4zB,EAAkB5zB,MACnJxJ,IACHA,EAAQ,eAGQV,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,WACdxB,QAASA,EACT+P,MAAOyuE,GAAyBD,EAChC18E,MAAOA,EACP8lC,SAAUtW,GAAWsW,EAAwB,eAAftW,EAAQhmB,GAAsBgmB,EAAU,MACtE3U,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAc0vB,GAAWsqB,EAAYA,EAAY,MACjHnU,SAAU,iBACV,ECzDJ,MAAMi3C,GAAuB,CAC3BC,OAAQ,CACN7+D,SAAU,WACVxU,GAAI7L,IACF,IAAI,GACF6L,GACE7L,EACJ,OAAO6L,CAAE,EAEX0d,OAAQ,CACNxZ,OAAQ,6CACRie,QAAQ,KA6Dd,OAzD2B7qB,IACzB,IAAI,QACF0uB,EAAO,aACPF,EAAY,SACZwW,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAMg8E,GAAsB14C,EAAAA,EAAAA,cAAYpmC,IACtC,MAAM6+E,EAAS7+E,EAAK6+E,OAAOE,cAGtBztD,GAAoF,KAAxD,OAAXutD,QAA8B,IAAXA,OAAoB,EAASA,EAAOt7E,SAC3EukC,EAAS+2C,EAAO,GAClB,GACC,CAACvtD,EAAcwW,KACZ,QACJ3nC,EAAO,MACPD,EAAK,KACLF,EAAI,QACJk2D,IACE91D,EAAAA,EAAAA,IAAaw+E,GAAsB,CACrCjP,WAAYmP,EACZxoB,MAAM,KAIRx1D,EAAAA,EAAAA,YAAU,KACRo1D,EAAQ,CACN1qD,GAAIgmB,EAAQhmB,IACZ,GACD,CAACgmB,EAAS0kC,IACb,IAAIhmD,EAAiB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAK6+E,OAAOE,cAKpE,OAJK7uE,GAASohB,IAEZphB,EAAQ,CAACohB,IAEShwB,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,SACdxB,QAASA,EACT+P,MAAOA,EACPlO,MAAwB,OAAjBsvB,QAA0C,IAAjBA,OAA0B,EAASA,EAAa9lB,GAChFs8B,SAAUA,EACVjrB,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAcwvB,GAAgBwqB,EAAYA,EAAY,MACtHnU,SAAU,sBACV,EC5CJ,ICxByB70B,GAAK5B,GAAKlP,GDwBnC,GAnB0BrC,IACxB,IAAI,MACFqC,EAAQ0tB,GAAgB,SACxBoY,EAAQ,UACRjrB,GACEld,EACJ,OAAoB2B,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,gBACduO,MAAO0f,KACP5tB,MAAOA,EACP8lC,SAAUz1B,GAAay1B,EAASz1B,EAAU7G,IAC1CqR,UAAWA,GACX,ECaJ,MAAMmiE,WAAoB1vC,EAAAA,UACxBC,YAAYz2B,EAAO4yB,GACjB8D,MAAM12B,EAAO4yB,GACbJ,KAAKhG,MAAQ,CACXuX,IAAK,OAET,CACAymB,oBACE,MAAM,KACJvzD,EAAI,QACJ/F,EAAO,eACPwL,EAAc,UACdZ,EAAS,QACTC,EAAO,SACP6E,EAAQ,UACR25C,EAAS,sBACTwd,EAAqB,YACrBnB,EAAW,mBACXoB,GACExlC,KAAKxyB,MACHpK,EAASiL,GAAqB3P,IAElCi1E,0BAA2BrR,EAAa,cACxCl6D,GACE8B,EAWJ,IAPK9G,UAHyBlO,IAAdoU,QAAuCpU,IAAZqU,IAGhB+4D,GAAiB14D,GAAkB04D,EAAel6D,IAC3E2/C,EAAU,CACR7nD,GAAIoiE,KAKHkD,EAAoB,CAEvBD,EADqB8E,KAEvB,EAGK5lE,GAAQ2J,EAAS41D,OACpBI,EAAY,CACV72D,UAAW,KACX3I,MAAOwJ,EAAS41D,OAGtB,CACAhc,mBAAmBnK,GACjB,MAAM,cACJgrB,EAAa,kBACbC,EAAiB,QACjBpqE,EAAO,UACP4K,EAAS,QACTC,EAAO,sBACPg8D,EAAqB,aACrBF,EAAY,WACZC,EAAU,mBACVE,GACExlC,KAAKxyB,OACH,YACJomE,GACE5zC,KAAKhG,MACL6uC,GAAiBA,IAAkBhrB,EAAKgrB,eAC1CC,EAAkB9oC,KAAK6zC,YAEzB,MAAMC,OAAwB5+E,IAAdoU,QAAuCpU,IAAZqU,EACvCuqE,QAA6C5+E,IAAlCmZ,GAAqB3P,IAClC6mE,EAAsB,CACpBj8D,YACAC,YAEF87D,IACAC,KACUwO,QAA6C5+E,IAAlCmZ,GAAqB3P,KAC1C2mE,EAAoC,OAAvBG,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBl8D,WACxGg8D,EAAkC,OAAvBE,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBj8D,WAEpGqqE,GAAgBtqE,IAAcu0C,EAAKv0C,WAAaC,IAAYs0C,EAAKt0C,SAAW8E,GAAqB3P,KAAa2P,GAAqBwvC,EAAKn/C,UAC1IshC,KAAK+zC,cAAc,cAAe,KAAM,SAE5C,CACAzvC,SACE,MAAM,QAEJ5d,EAAU,GAAE,gBACZ+F,EAAe,YACf7F,EAAW,qBACXC,EAAoB,gBACpBoE,EAAe,iBACfC,EAAgB,QAEhBxsB,EAAU,GAAE,QACZwnB,EAAO,aACPF,EAAY,UACZ/X,EAAS,gBACTxF,GACEu3B,KAAKxyB,OACH,WAEJg3D,EAAU,gBACVwP,EAAe,eACflP,EAAc,wBACdmP,EAAuB,mBACvBC,EAAkB,mBAClBlP,EAAkB,oBAClBD,EAAmB,UAEnBhd,GACE/nB,KAAKxyB,OACH,IACJ+jC,EAAG,aACH4iC,EAAY,kBACZC,EAAiB,YACjBR,EAAW,cACXS,EAAa,eACbpF,GACEjvC,KAAKhG,MACH52B,EAASiL,GAAqB3P,IAAY,CAC9CwB,GAAIJ,IAEN,OAAoB9J,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GAAAA,QACX,YAAa,eACCvqC,EAAAA,cAAoBozE,GAAM,CACxC1yE,MAAO66C,EACP/U,SAAU+U,GAAOvR,KAAKqE,SAAS,CAC7BkN,SAEYv7C,EAAAA,cAAoBqzE,GAAK,CACvC3yE,MAAO,QACNL,GAAAA,EAAAA,EAAO,SAAuBL,EAAAA,cAAoBqzE,GAAK,CACxD3yE,MAAO,UACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoBqzE,GAAK,CAC1D3yE,MAAO,YACNL,GAAAA,EAAAA,EAAO,cAA4BL,EAAAA,cAAoBqzE,GAAK,CAC7D3yE,MAAO,UACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoBqzE,GAAK,CAC1D3yE,MAAO,SACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoB,MAAO,CAC5Dub,UAAWgvB,GAAAA,WACX,YAAa,uBACJ,SAARgR,GAA+Bv7C,EAAAA,cAAoB,MAAO,CAC3Dub,UAAWgvB,GAAAA,YACX,YAAa,uBACCvqC,EAAAA,cAAoBs+E,GAAe,CACjDpuD,QAASA,EACTsW,SAAUgoC,EACVjzD,UAAWgvB,GAAAA,OACXiQ,UAAW2jC,EACX,YAAa,8BACXjuD,GAAwBlwB,EAAAA,cAAoBu+E,GAAoB,CAClEruD,QAASA,EACTF,aAAcA,EACdwW,SAAUw3C,EACVziE,UAAWgvB,GAAAA,OACXiQ,UAAW4jC,IACIp+E,EAAAA,cAAoBw+E,GAAiB,CACpDtuD,QAASA,EACTF,aAAcA,EACdtvB,MAAOmwB,EACP2V,SAAUy3C,EACV1iE,UAAWgvB,GAAAA,OACX,YAAa,gCACEvqC,EAAAA,cAAoBy+E,GAAmB,CACtD/9E,MAAOkwB,EACP4V,SAAUsoC,EACVvzD,UAAWgvB,GAAAA,UACA,WAARgR,GAAiCv7C,EAAAA,cAAoB,MAAO,CAC/Dub,UAAWgvB,GAAAA,YACX,YAAa,yBACCvqC,EAAAA,cAAoB0+E,GAAsB,CACxDtxE,OAAQA,EACRotE,eAAe,EACfh0C,SAAUurB,EACVx2C,UAAWgvB,GAAAA,SACTn9B,GAAUA,EAAOlD,KAAOJ,IAAgC9J,EAAAA,cAAoB2+E,GAAc,CAC5FlE,kBAAmBpL,GACnBqL,gBAAiBpL,GACjB78D,gBAAiBA,IACfmrE,GAA4B59E,EAAAA,cAAoB,MAAO,CACzDub,UAAWgvB,GAAAA,OACGvqC,EAAAA,cAAoB4+E,GAAAA,EAAmB,MAAOhB,IAAuB,aAARriC,GAAmCv7C,EAAAA,cAAoBwzE,GAAe,CACjJlD,wBAAwB,EACxBE,iBAAiB,EACjBC,iBAAiB,EACjBrvE,QAASi9E,IACC,WAAR9iC,GAAiCv7C,EAAAA,cAAoB,MAAO,CAC9Dub,UAAWgvB,GAAAA,YACX,YAAa,yBACCvqC,EAAAA,cAAoB6+E,GAAa,CAC/C3uD,QAASA,EACTF,aAAcA,EACdtnB,QAASgoB,EAAQxhB,QAAO+3C,QAAkB/nD,IAAb+nD,EAAE/3C,YACpB,UAARqsC,GAAgCv7C,EAAAA,cAAoB,MAAO,CAC9Dub,UAAWgvB,GAAAA,eACX,YAAa,wBACCvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,qBACGvqC,EAAAA,cAAoB8+E,GAAa,CAC/C50E,GAAI,UACJ/C,IAAK,qBACL5G,MAAOF,GAAAA,EAAAA,EAAO,gBACdyqC,QAASA,IAAMozC,GAAmB,GAClCpkC,WAAYrjB,EACZlb,UAAWgvB,GAAAA,kBACIvqC,EAAAA,cAAoB8+E,GAAa,CAChD50E,GAAI,YACJ/C,IAAK,uBACL5G,MAAOF,GAAAA,EAAAA,EAAO,mBACdyqC,QAASA,IAAMozC,GAAmB,GAClCpkC,YAAarjB,EACblb,UAAWgvB,GAAAA,mBACKvqC,EAAAA,cAAoB,MAAO,CAC3Cub,UAAWgvB,GAAAA,qBACGvqC,EAAAA,cAAoBu5E,GAAa,CAC/C3iC,MAAOv2C,GAAAA,EAAAA,EAAO,SACd4H,MAAOme,GAAS6O,IAAoBxvB,GACpC+gC,SAAUwoC,EACVzzD,UAAWgvB,GAAAA,kBACIvqC,EAAAA,cAAoBu5C,GAAa,CAChD3C,MAAOv2C,GAAAA,EAAAA,EAAO,UACdgI,I/T/FoB,E+TgGpBC,IAAKxB,GACLpG,MAAOw0B,G/ThLe,E+TiLtBsR,SAAUuoC,KACM/uE,EAAAA,cAAoB0yE,GAAc,CAClD57B,SAAUrgB,EACVg7C,c/TnLsB,O+ToLNzxE,EAAAA,cAAoB,MAAO,CAC3Cub,UAAWgvB,GAAAA,YACVra,EAAuBlwB,EAAAA,cAAoB++E,GAAiB,CAC7D7uD,QAASA,EACTF,aAAcA,EACdpxB,OAAQqZ,GAAaghE,IACLj5E,EAAAA,cAAoB,MAAO,CAC3Cub,UAAWgvB,GAAAA,QACGvqC,EAAAA,cAAoBM,GAAAA,EAAW,KAAMD,GAAAA,EAAAA,EAAO,wEAC9D,CAGA09E,cAAcnuE,EAAKpP,EAAS+6C,GAK1B,OAJAvR,KAAKqE,SAAS,CACZ,CAACz+B,GAAMpP,EACP+6C,SAEK,CACT,CACAsiC,WACE,MAAM,QACJ3tD,EAAO,aACPF,EAAY,KACZvhB,EAAI,QACJ/F,EAAO,UACP4K,EAAS,QACTC,EAAO,OACPwgB,EAAM,UACN9b,EAAS,cACT0Y,GACEqZ,KAAKxyB,MACHpK,EAASiL,GAAqB3P,IAAY,CAC9CwB,GAAIJ,IAEN,IAAKomB,EACH,OAAO8Z,KAAK+zC,cAAc,eAAgB19E,GAAAA,EAAAA,EAAO,uBAAwB,QAE3E,IAAK2vB,EACH,OAAOga,KAAK+zC,cAAc,oBAAqB19E,GAAAA,EAAAA,EAAO,6BAA8B,QAEtF,GAAI+M,EAAOlD,KAAOJ,GAAiB,CACjC,MAAMlL,EAAQ2e,GAAqBjK,EAAWC,GAC9C,GAAI3U,EACF,OAAOorC,KAAK+zC,cAAc,cAAen/E,EAAO,SAEpD,CACA,OAAKsZ,GAAoBzJ,GAAMxM,OAG3B8xB,IAAW1tB,IAA8B4R,IAGzC0Y,GAAiBA,EAAcxE,YAAcwE,EAAcxE,UAAUnb,UAEhEg5B,KAAK+zC,cAAc,qBAAsB,GAAI,SAJ7C/zC,KAAK+zC,cAAc,iBAAkB19E,GAAAA,EAAAA,EAAO,6BAA8B,SAH1E2pC,KAAK+zC,cAAc,gBAAiB19E,GAAAA,EAAAA,EAAO,uCAAwC,WAU9F,EA9TuBmR,GAgUTksE,GAhUc9tE,GAgUD,YAhUMlP,GAgUO,CACxC6uE,sBAAuBj3B,KAAAA,KAAAA,WACvBg3B,WAAYh3B,KAAAA,KAAAA,WACZ4lC,mBAAoB5lC,KAAAA,KAAAA,WACpB2lC,wBAAyB3lC,KAAAA,KAAAA,WACzB02B,mBAAoB12B,KAAAA,KAAAA,WACpBy2B,oBAAqBz2B,KAAAA,KAAAA,WACrBw2B,eAAgBx2B,KAAAA,KAAAA,WAEhB81B,YAAa91B,KAAAA,KAAAA,WACbyZ,UAAWzZ,KAAAA,KAAAA,WACXk2B,WAAYl2B,KAAAA,KAAAA,WACZ0lC,gBAAiB1lC,KAAAA,KAAAA,WACjB+2B,aAAc/2B,KAAAA,KAAAA,WACdu6B,cAAev6B,KAAAA,KAAAA,WACfw6B,kBAAmBx6B,KAAAA,KAAAA,WACnBk3B,mBAAoBl3B,KAAAA,OACpB5nB,QAAS4nB,KAAAA,MACT/kC,QAAS+kC,KAAAA,OACT7hB,gBAAiB6hB,KAAAA,KACjBznB,qBAAsBynB,KAAAA,OACtBrjB,gBAAiBqjB,KAAAA,OACjBpjB,iBAAkBojB,KAAAA,OAClB1nB,YAAa0nB,KAAAA,OAEb5vC,QAAS4vC,KAAAA,MACTrgC,UAAWqgC,KAAAA,OACXvkB,OAAQukB,KAAAA,OACRlgC,SAAUkgC,KAAAA,OACV7lC,gBAAiB6lC,KAAAA,OACjBpoB,QAASooB,KAAAA,MAAgB,CACvBpuC,GAAIouC,KAAAA,OAAAA,WACJxa,kBAAmBwa,KAAAA,SAErBtoB,aAAcsoB,KAAAA,MAAgB,CAC5BpuC,GAAIouC,KAAAA,OAAAA,aAEN7pC,KAAM6pC,KAAAA,MACNhlC,UAAWglC,KAAAA,OACX3nB,cAAe2nB,KAAAA,MAAgB,CAC7BpuC,GAAIouC,KAAAA,OAAAA,WACJnsB,UAAWmsB,KAAAA,MAAgB,CACzBtnC,QAASsnC,KAAAA,UAGbpkC,eAAgBokC,KAAAA,QA7W0B1oC,GAC5C,SAAwBwO,GAAO,IAAIxO,EACnC,SAAsBshD,EAAOC,GAAQ,GAAqB,kBAAVD,GAAgC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMG,OAAOC,aAAc,QAAapyD,IAATkyD,EAAoB,CAAE,IAAIze,EAAMye,EAAKtnB,KAAKonB,EAAOC,GAAQ,WAAY,GAAmB,kBAARxe,EAAkB,OAAOA,EAAK,MAAM,IAAI4e,UAAU,+CAAiD,CAAE,OAAiB,WAATJ,EAAoBnhD,OAASQ,QAAQ0gD,EAAQ,CAD/UM,CAAapzC,EAAK,UAAW,MAAsB,kBAARxO,EAAmBA,EAAMI,OAAOJ,EAAM,CADxE6hD,CAAe7hD,IAAUA,MAAO4B,GAAOC,OAAOigD,eAAelgD,GAAK5B,GAAK,CAAElP,MAAOA,GAAOixD,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBrgD,GAAI5B,IAAOlP,GA+WtN,QAAemgD,EAAAA,EAAAA,IAAQ,KAAM,CAC3B2tB,WAAU,GACVwP,gBpDlU6BhuD,IAAY,CACzCpyB,KAAMC,EACNmyB,iBoDiUA8+C,eAAc,GACdmP,wBpDpQqCv3C,IAAO,CAC5C9oC,KAAMC,GACN6oC,YoDmQAw3C,mBpDzPgCrnC,IAAO,CACvCj5C,KAAMC,GACNg5C,YoDwPAm4B,mBAAkB,GAClBD,oBAAmB,GAEnBhd,UpD5LuB3kD,IAAM,CAC7BxP,KAAMC,GACNuP,WoD2LAmiE,sBAAqB,GACrBF,aAAY,GACZC,WAAU,GACVlB,YACF,IAAG,KAAM,CACPpF,YAAY,GAfd,CAgBG0U,ICvXH,MAAMsB,GAA4B,CAChChG,KAAM,CACJt6D,SAAU,4BACVkJ,OAAQvpB,IACN,IAAI,aACF6P,GACE7P,EACJ,MAAO,CACL+P,OAAQ,CAAC,KAAO,GAAEF,kBAClBme,QAAQ,EACT,IAIDiuD,GAAY,CAChBpwE,GAAI,OACJ9C,KAAM/G,GAAAA,EAAAA,EAAO,SAsDf,OApDuBmB,IACrB,IAAI,MACFo1C,EAAQv2C,GAAAA,EAAAA,EAAO,aAAY,MAC3BK,EAAK,UACLu+E,EAAS,SACTz4C,EAAQ,UACRjrB,GACE/Z,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAakgF,GAA2B,CAC1CpzD,UAAW,CACT1d,kBAGEgxE,GAAmBp6C,EAAAA,EAAAA,cAAY31B,GAAQq3B,EAASr3B,EAAKjF,KAAOowE,GAAUpwE,GAAKiF,OAAOjQ,IAAY,CAACsnC,IAC/F7e,GAAYid,EAAAA,EAAAA,UAAQ,IAAM,IAAKq6C,EAAY,CAAC3E,IAAa,OAAmB,OAAT57E,QAA0B,IAATA,OAAkB,EAASA,EAAKs6E,KAAKmG,4BAA8B,KAAM,CAACzgF,EAAMugF,IACpK7G,EAAgB13E,IAAUinB,EAAUvb,MAAK+C,GAAQA,EAAKjF,KAAOxJ,EAAMwJ,KACzE,IAAImuE,EACAD,IACFC,EAAoBh4E,GAAAA,EAAAA,EAAO,0DAA2D,CACpF6J,GAAIxJ,EAAMwJ,GACVhH,YAAa,QAGjB,IAAIo1E,EAAc,KAIlB,OAHM15E,GAASw5E,IACbE,EAAc53E,EAAQA,EAAMwJ,GAAKowE,GAAUpwE,IAEzBlK,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOA,EACP/3C,QAASA,EACT+P,MAAO+Y,EACPjnB,MAAO43E,EACP9xC,SAAU04C,EACV1kC,UAAW69B,IAAgC,OAAVz5E,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,SACrF+a,UAAWA,EACX8qB,SAAU,yBACV,ECpEJ,GAAuB,yBAAvB,GAAwD,0BAAxD,GAA2F,2BAA3F,GAA8H,0BCqC9H,OAlCmBhoC,IACjB,IAAI,KACF+I,EAAI,MACJa,EAAK,OACLuf,EAAM,UACNW,GACE9pB,EACJ,MAAM,QACJ+c,IACEqoB,EAAAA,EAAAA,MACE27C,EAAa,GAAEhkE,yBACfsN,EAAyB,WAAdP,EACjB,OAAoBnoB,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACV7hB,EAAwB1oB,EAAAA,cAAoB,OAAQ,CACrDub,UAAWgvB,GACXviC,MAAO,CACL6lC,gBAAiB5lC,KAEHjI,EAAAA,cAAoB,OAAQ,CAC5Cub,UAAWgvB,GACXviC,MAAO,CACLovC,gBAAiBgoC,GAAa53D,EAAU,OAAM43D,IAAY53D,KAAY,UAEzDxnB,EAAAA,cAAoB,OAAQ,CAC3Cub,UAAWgvB,IACVnjC,GAAM,EC7BX,GAAgC,qCCDhC,SAASqiC,KAAiS,OAApRA,GAAWh4B,OAAOi4B,OAASj4B,OAAOi4B,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIzyB,EAAI,EAAGA,EAAInV,UAAUC,OAAQkV,IAAK,CAAE,IAAI5P,EAASvF,UAAUmV,GAAI,IAAK,IAAIvH,KAAOrI,EAAckK,OAAOtP,UAAU0nC,eAAeC,KAAKviC,EAAQqI,KAAQg6B,EAAOh6B,GAAOrI,EAAOqI,GAAU,CAAE,OAAOg6B,CAAQ,EAAUH,GAASM,MAAMC,KAAMhoC,UAAY,CAiDlV,OAzCsB3D,IACpB,IAAI,iBACFghF,EAAmB54E,GAAgB,SACnCshB,GACE1pB,EACJ,MAAO0oB,EAAQu4D,IAAargF,EAAAA,EAAAA,UAAS,KAC/B,QACJ21D,IACE91D,EAAAA,EAAAA,IAAa4oB,GAA2B,CAC1CstC,MAAM,EACNqZ,WAAY7sE,IACV,IAAI,UACFmmB,GACEnmB,EACJ,MAAM+9E,EAAmB14D,GAAc,CACrCC,uBAAwBa,EAAUb,yBAEpCw4D,EAAUC,EAAiB,IAU/B,OAPA//E,EAAAA,EAAAA,YAAU,KACS,OAAbuoB,QAAkC,IAAbA,GAAuBA,EAAS7d,IACvD0qD,EAAQ,CACN1qD,GAAI6d,EAAS7d,IAEjB,GACC,CAAC6d,EAAU6sC,IACM50D,EAAAA,cAAoB,MAAO,CAC7C,YAAa,kBACbub,UAAWgvB,IACVxjB,EAAO9a,KAAI9B,GAAsBnK,EAAAA,cAAoBw/E,GAAY/1C,GAAS,CAC3E75B,IAAKzF,EAAMD,GACXie,UAAWk3D,GACVl1E,MAAS,ECTd,QAAe02C,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACLumB,SAAUgoD,EAAUz2C,yBACrB,GACA,CACD21C,4BACF,IATA,EAxBwB5wE,IACtB,IAAI,iBACFghF,EAAgB,SAChBt3D,EAAQ,4BACRknD,GACE5wE,EACJ,OAAoB2B,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoBy/E,GAAgB,CACpG7oC,MAAOv2C,GAAAA,EAAAA,EAAO,sBACdK,MAAOqnB,EACPk3D,WAAW,EACXz4C,SAAUyoC,EACV1zD,UAAWgvB,GAAAA,SACTxiB,GAAyB/nB,EAAAA,cAAoB0/E,GAAe,CAC9DL,iBAAkBA,EAClBt3D,SAAUA,IACT,IC4CL,QAAe84B,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACLs3D,OAAQiX,EAAUjX,OAClB+E,cAAekS,EAAUlS,cACzBnF,eAAgBqX,EAAUrX,eAC1BH,cAAewX,EAAUxX,cACzBC,eAAgBuX,EAAUvX,eAC1BC,gBAAiBsX,EAAUtX,gBAC5B,GACA,CACDknB,U3DqLuBr1B,IAAS,CAChC1sD,KAAMC,GACNysD,c2DtLAs1B,iB3DwL8BC,IAAQ,CACtCjiF,KAAMC,GACNgiF,a2DzLAC,kB3D+M+B73E,IAAK,CACpCrK,KAAMC,GACNoK,U2DhNA83E,iB3D4L8B9mC,IAAI,CAClCr7C,KAAMC,GACNo7C,S2D7LA+mC,mB3DiMgCv3D,IAAM,CACtC7qB,KAAMC,GACN4qB,W2DlMAw3D,kB3DsM+Bj4E,IAAK,CACpCpK,KAAMC,GACNmK,W2D1NF,EA1De3J,IACb,IAAI,qBACF6hF,EAAoB,OACpBpnB,EAAM,cACN+E,EAAa,eACbnF,EAAc,cACdH,EAAa,eACbC,EAAc,gBACdC,EAAe,UACfknB,EAAS,iBACTC,EAAgB,kBAChBE,EAAiB,iBACjBC,EAAgB,mBAChBC,EAAkB,kBAClBC,GACE5hF,EAMJ,OALAmB,EAAAA,EAAAA,YAAU,KACJs5D,GAAUonB,IAAyBriB,GACrC+hB,EAAiBj5E,GACnB,GACC,CAACmyD,EAAQonB,EAAsBriB,EAAe+hB,IAC7B5/E,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWqyB,IAAGrD,GAAAA,sBACAvqC,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB67C,GAAU,CAC1FjF,MAAOv2C,GAAAA,EAAAA,EAAO,UACdw2C,QAASiiB,EACTtyB,SAAUm5C,IACR7mB,GAAuB94D,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMkgF,GAAqClgF,EAAAA,cAAoB,MAAO,CACnIub,UAAWgvB,GAAAA,qBACGvqC,EAAAA,cAAoBmgF,GAAqB,CACvDvxD,OAAQivC,EACR9jB,sBAAuB6lC,KACP5/E,EAAAA,cAAoBogF,GAAW,CAC/Cn4E,MAAOywD,EACPzf,KAAMsf,EACN9vC,OAAQgwC,EACRvf,UAAWsf,EACXrf,cAAe2mC,EACf1mC,aAAc2mC,EACd1mC,eAAgB2mC,EAChB1mC,cAAe2mC,MACZ,ICpCP,MAAMI,GAAQ,CACZC,cAAe,CACb5hE,SAAU,kBAGR6hE,GAAe,WA6GrB,OA5GuBliF,IACrB,IAAI,KACFoQ,EAAO,GAAE,UACTwZ,EAAS,sBACTD,EAAqB,yBACrBsR,EAAwB,aACxB7P,EAAY,GACZvf,EAAE,cACF2oE,EAAa,kBACbC,GACEz0E,EACJ,MAAOk9C,EAAKC,IAAUv8C,EAAAA,EAAAA,UAASshF,KACxBlC,EAAemC,IAAoBvhF,EAAAA,EAAAA,aACpC,KACJP,IACEI,EAAAA,EAAAA,IAAauhF,IACXn8C,GAAWC,EAAAA,EAAAA,MACXs8C,EAAgC,OAAT/hF,QAA0B,IAATA,OAAkB,EAASA,EAAK4hF,cAAcG,qBACtFC,EAAmC,OAAThiF,QAA0B,IAATA,OAAkB,EAASA,EAAK4hF,cAAcI,wBACzFtoE,EAAWF,GAAoBzJ,GAC/BoiE,GAAc/rC,EAAAA,EAAAA,cAAY,MACzB1sB,EAASnW,SACZu5C,EAAO+kC,IACPC,EAAiBngF,GAAAA,EAAAA,EAAO,wCACjB,IAGR,CAAC+X,KACJ5Y,EAAAA,EAAAA,YAAU,KACJqzE,GACFC,EAAkBjC,IACpB,GACC,CAACgC,EAAeC,EAAmBjC,KACtCrxE,EAAAA,EAAAA,YAAU,KACR,IAAK0K,EAAI,CAEP,GAAIu2E,EAAsB,CACxB,MAAM,GACJv2E,EAAE,KACF9C,GACEq5E,EACJv8C,EAASkqC,GAAY,CACnB72D,UAAW,KACX3I,MAAO,CAAC,CACN1E,GAAK,SAAQA,IACb9C,WAGN,CAGIs5E,GACFx8C,EAAS+qC,GAA4ByR,GAEzC,IACC,CAACx2E,EAAIu2E,EAAsBC,EAAyBx8C,IACvD,MAAMwtC,IAAoBjoD,GAAgBA,IAAiB1iB,GAC3D,OAAoB/G,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GAAAA,QACX,YAAa,kBACCvqC,EAAAA,cAAoBozE,GAAM,CACxC1yE,MAAO66C,EACP/U,SAAUgV,GACIx7C,EAAAA,cAAoBqzE,GAAK,CACvC3yE,MAAO6/E,IACNlgF,GAAAA,EAAAA,EAAO,uBAAqCL,EAAAA,cAAoBqzE,GAAK,CACtE3yE,MAAO,SACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoB,MAAO,CAC5Dub,UAAWgvB,GAAAA,YACVgR,IAAQglC,IAA6BvgF,EAAAA,cAAoBwzE,GAAe,CACzEpyE,QAASi9E,IACC,UAAR9iC,GAAgCv7C,EAAAA,cAAoB,MAAO,CAC7Dub,UAAWgvB,GAAAA,eACX,YAAa,2BACCvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB2gF,GAAQ,MAAoB3gF,EAAAA,cAAoB0yE,GAAc,CAChGjB,cvUK2B,IuUJ3BC,gBAAiBA,KACD1xE,EAAAA,cAAoB,MAAO,CAC3Cub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB4gF,GAAiB,CACnDvB,iBAAkB34E,MACf4yB,GAAyCt5B,EAAAA,cAAoBA,EAAAA,SAAgB,KAAmBA,EAAAA,cAAoBu5E,GAAa,CACpI3iC,MAAOv2C,GAAAA,EAAAA,EAAO,eACd4H,MAAO+f,GAAyB9hB,GAChCsgC,SAAUtsB,GAAOgqB,EAASgrC,GAAyBh1D,IACnDqB,UAAWgvB,GAAAA,cACIvqC,EAAAA,cAAoBu5C,GAAa,CAChD3C,MAAOv2C,GAAAA,EAAAA,EAAO,gBACdK,WAAqBxB,IAAd+oB,EAA0BA,EAAY9hB,GAC7CkC,IvUgDsB,EuU/CtBC,IAAKxB,GACL0/B,SAAUtsB,GAAOgqB,EAASyrC,GAAaz1D,IACvC48B,WAAYxd,EACZ/d,UAAWgvB,GAAAA,sBACN,EC/GT,MAAMs2C,GAAO,QACPC,GAAe,cACfC,GAAe,SACfC,GAAa,YACbC,GAAmB,cACnBC,GAAmB,QACnBC,GAAoB,SA2G1B,OA7EqB9iF,IACnB,IAAI,MACF2J,EAAK,SACLw+B,GACEnoC,EACJ,MAAM+P,GAASw2B,EAAAA,EAAAA,UAAQ,IA/BD,CAAC,CACvB16B,GAAI22E,GACJjqC,MAAOv2C,GAAAA,EAAAA,EAAO,cACdzC,KAAMsjF,GACNroC,aAAc,cACduoC,kBAAkB,GACjB,CACDl3E,GAAI42E,GACJlqC,MAAOv2C,GAAAA,EAAAA,EAAO,qBACdzC,KAAMsjF,GACNroC,aAAc,WACb,CACD3uC,GAAI62E,GACJnqC,MAAOv2C,GAAAA,EAAAA,EAAO,qBACdzC,KAAMujF,GACNtoC,aAAc,EACdxwC,IAAK,EACLC,IAAK,GACLwwC,SAAUz4C,GAAAA,EAAAA,EAAO,4CAChB,CACD6J,GAAI82E,GACJpqC,MAAOv2C,GAAAA,EAAAA,EAAO,gBACdzC,KAAMujF,GACNtoC,aAAc,EACdxwC,IAAK,KAOqC,IAW1C,OAVA7I,EAAAA,EAAAA,YAAU,KACHwI,GACHw+B,EAAS,CACP,CAACq6C,IAAOI,GACR,CAACH,IAAe,UAChB,CAACC,IAAe,EAChB,CAACC,IAAa,GAElB,GACC,CAACh5E,EAAOw+B,IACNx+B,EAGehI,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMoO,EAAOnC,KAAIzK,IACvE,IAAI,GACF0I,EAAE,MACF0sC,EAAK,KACLh5C,EAAI,iBACJwjF,EAAgB,IAChB/4E,EAAG,IACHC,EAAG,aACHuwC,EAAY,SACZC,GACEt3C,EACJ,OAAO5D,IAASsjF,GAAgClhF,EAAAA,cAAoB,MAAO,CACzE4P,IAAK1F,GACJk3E,GAAiCphF,EAAAA,cAAoB67C,GAAU,CAChEjF,MAAOA,EACPC,QAAS7uC,EAAMkC,KAAQ+2E,GACvBz6C,SAAU8jB,GAAa9jB,EAAS,CAC9B,CAACt8B,GAAKogD,EAjEwB,UAiEoB22B,OAElDj5E,EAAMkC,KAAQ+2E,IAAiCjhF,EAAAA,cAAoBu5E,GAAa,CAClF3iC,MAAOwqC,EAAmB,GAAKxqC,EAC/B3uC,MAAOD,EAAMkC,GACbs8B,SAAUv+B,GAASu+B,EAAS,CAC1B,CAACt8B,GAAKjC,IAERsT,UAAWgvB,GAAAA,eACMvqC,EAAAA,cAAoBu5C,GAAa,CAClD3pC,IAAK1F,EACL0sC,MAAOA,EACPl2C,MAAOsH,EAAMkC,GACbs8B,SAAU9lC,IACR,IAAIwZ,EAAMmD,SAAS3c,IACf2H,GAAOC,MACL4R,EAAM7R,GAAOmI,OAAOD,MAAM2J,MAC5BA,EAAM7R,GAEJ6R,EAAM5R,IACR4R,EAAM5R,IAGNkI,OAAOD,MAAM2J,KACfA,EAAM2+B,GAERrS,EAAS,CACP,CAACt8B,GAAKmT,SAASnD,IACf,EAEJ6+B,WAAY,QACZ1wC,IAAKA,EACLC,IAAKA,EACLwwC,SAAUA,GACV,KArDK,IAsDN,ECpEL,OApCsBz6C,IACpB,IAAI,aACF+6B,EAAY,cACZy5C,EAAa,kBACbC,GACEz0E,EACJ,MAAOk9C,EAAKC,IAAUv8C,EAAAA,EAAAA,UAAS,SACzBilC,GAAWC,EAAAA,EAAAA,MAMjB,OALA3kC,EAAAA,EAAAA,YAAU,KACJqzE,GACFC,GAAkB,EACpB,GACC,CAACD,EAAeC,IACC9yE,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GAAAA,SACGvqC,EAAAA,cAAoBozE,GAAM,CACxC1yE,MAAO66C,EACP/U,SAAUgV,GACIx7C,EAAAA,cAAoBqzE,GAAK,CACvC3yE,MAAO,SACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoB,MAAO,CAC5Dub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,gBACGvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoBqhF,GAAc,CAChDr5E,MAAOoxB,EACPoN,SAAUtsB,GAAOgqB,E9DgViB,CACpCtmC,KAAMC,GACNC,Q8DlV4Coc,SACtC,ECrCR,SAAS+2C,GAAgBz/C,EAAK5B,EAAKlP,GAA4L,OAAnLkP,EAC5C,SAAwBwO,GAAO,IAAIxO,EACnC,SAAsBshD,EAAOC,GAAQ,GAAqB,kBAAVD,GAAgC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMG,OAAOC,aAAc,QAAapyD,IAATkyD,EAAoB,CAAE,IAAIze,EAAMye,EAAKtnB,KAAKonB,EAAOC,GAAQ,WAAY,GAAmB,kBAARxe,EAAkB,OAAOA,EAAK,MAAM,IAAI4e,UAAU,+CAAiD,CAAE,OAAiB,WAATJ,EAAoBnhD,OAASQ,QAAQ0gD,EAAQ,CAD/UM,CAAapzC,EAAK,UAAW,MAAsB,kBAARxO,EAAmBA,EAAMI,OAAOJ,EAAM,CADxE6hD,CAAe7hD,GAAUA,KAAO4B,EAAOC,OAAOigD,eAAelgD,EAAK5B,EAAK,CAAElP,MAAOA,EAAOixD,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBrgD,EAAI5B,GAAOlP,EAAgB8Q,CAAK,CAe3O,MAAM8vE,WAAsBtzC,EAAAA,UAC1BC,cACEC,SAASlsC,WACTivD,GAAgBjnB,KAAM,QAAS,CAC7BuR,IAAK,YAET,CACAyW,mBAAmBnK,GACjB,MAAM,cACJgrB,EAAa,kBACbC,GACE9oC,KAAKxyB,MACLq7D,GAAiBA,IAAkBhrB,EAAKgrB,eAC1CC,EAAkB9oC,KAAK6zC,WAE3B,CACAvvC,SACE,MAAM,UACJrmB,EAAS,sBACTD,EAAqB,yBACrBknD,EAAwB,aACxBS,GACE3lC,KAAKxyB,OACH,IACJ+jC,EAAG,cACH8iC,GACEr0C,KAAKhG,MACT,OAAoBhkC,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GAAAA,QACX,YAAa,iBACCvqC,EAAAA,cAAoBozE,GAAM,CACxC1yE,MAAO66C,EACP/U,SAAU+U,GAAOvR,KAAKqE,SAAS,CAC7BkN,SAEYv7C,EAAAA,cAAoBqzE,GAAK,CACvC3yE,MAAO,YACNL,GAAAA,EAAAA,EAAO,uBAAqCL,EAAAA,cAAoBqzE,GAAK,CACtE3yE,MAAO,SACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoB,MAAO,CAC5Dub,UAAWgvB,GAAAA,YACF,aAARgR,GAAmCv7C,EAAAA,cAAoBwzE,GAAe,CACvEpyE,QAASi9E,IACC,UAAR9iC,GAAgCv7C,EAAAA,cAAoB,MAAO,CAC7Dub,UAAWgvB,GAAAA,eACX,YAAa,0BACCvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB2gF,GAAQ,MAAoB3gF,EAAAA,cAAoBu5E,GAAa,CAC/F3iC,MAAOv2C,GAAAA,EAAAA,EAAO,kBACd4H,MAAO+f,GAAyB9hB,GAChCsgC,SAAU0oC,EACV3zD,UAAWgvB,GAAAA,cACIvqC,EAAAA,cAAoBu5C,GAAa,CAChD3C,MAAOv2C,GAAAA,EAAAA,EAAO,gBACdgI,I1UyFoB,E0UxFpBC,IAAKxB,GACLpG,WAAqBxB,IAAd+oB,EAA0BA,EAAY9hB,GAC7CqgC,SAAUmpC,EACVp0D,UAAWgvB,GAAAA,mBACKvqC,EAAAA,cAAoB,MAAO,CAC3Cub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB4gF,GAAiB,CACnDvB,iBAAkB54E,QAEtB,CAGAs3E,cAAcnuE,EAAKpP,EAAS+6C,GAK1B,OAJAvR,KAAKqE,SAAS,CACZ,CAACz+B,GAAMpP,EACP+6C,SAEK,CACT,CACAsiC,WACE,MAAM,KACJpvE,GACEu7B,KAAKxyB,MACT,QAAKU,GAAoBzJ,GAAMxM,QACtB+nC,KAAK+zC,cAAc,gBAAiB19E,GAAAA,EAAAA,EAAO,sCAAuC,WAG7F,EAEF4wD,GAAgBqwB,GAAe,YAAa,CAC1CpS,yBAA0B52B,KAAAA,KAAAA,WAC1Bq3B,aAAcr3B,KAAAA,KAAAA,WACdu6B,cAAev6B,KAAAA,KAAAA,WACfw6B,kBAAmBx6B,KAAAA,KAAAA,WACnBtwB,sBAAuBswB,KAAAA,OACvBrwB,UAAWqwB,KAAAA,OACX7pC,KAAM6pC,KAAAA,QAER,QAAeuI,EAAAA,EAAAA,IAAQ,KAAM,CAC3B8uB,aAAY,GACZT,yBACF,IAAG,KAAM,CACPlG,YAAY,GAJd,CAKGsY,ICjHH,GAA0B,2B,wBCA1B,GAAoC,6CCQpC,MAAMC,GAAqB,CACzBC,aAAc,CACZ9iE,SAAU,YACVkJ,OAAQvpB,IACN,IAAI,aACF6P,GACE7P,EACJ,MAAO,CACL6Q,OAAS,iDACTd,OAAQ,CAAC,KAAO,GAAEF,kBAClBme,QAAQ,EACT,IA8CP,OA1C0B7qB,IACxB,IAAI,YACF2L,EAAW,UACXoO,EAAS,UACTi/B,EAAS,SACThU,GACEhlC,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAayiF,GAAoB,CACnC31D,UAAW,CACT1d,kBAGEU,EAAiB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAK8iF,aAAa7pE,UACtEjX,EAAwB,OAAhByM,QAAwC,IAAhBA,OAAyB,EAASA,EAAYjD,GACpF,OAAoBlK,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACGvqC,EAAAA,cAAoBg6C,GAAa,CAC/CpD,MAAOv2C,GAAAA,EAAAA,EAAO,eACdxB,QAASA,EACT+P,MAAOA,EACPlO,MAAOA,EACP8lC,SAAUzuB,GAAYyuB,EAASzuB,EAAU,eACzCwD,UAAWA,EACXg/B,UAAWl6C,GAAAA,EAAAA,EAAO,yBAClBm6C,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAc2M,GAAeqtC,EAAYA,EAAY,MACrHG,YAAY,EACZtU,SAAU,sBACKrmC,EAAAA,cAAoBi/C,GAAM,KAAM5+C,GAAAA,EAAAA,EAAO,4DAA4D,EClDtH,MAAMohF,GAA4B,CAChC16D,OAAQ,CACNrI,SAAU,oBACVkJ,OAAQvpB,IACN,IAAI,aACF6P,GACE7P,EACJ,MAAO,CACL+P,OAAQ,CAAC,KAAO,GAAEF,kBAClBme,QAAQ,EACT,IA0CP,OAtC+B7qB,IAC7B,IAAI,iBACFkgF,EAAgB,SAChBl7C,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAa2iF,GAA2B,CAC1C71D,UAAW,CACT1d,kBAGJ,OAAoBlO,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,sBACdxB,QAASA,EACT+P,MAAgB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKqoB,OAAO46D,kBAC/DjhF,MAA4B,OAArBghF,QAAkD,IAArBA,OAA8B,EAASA,EAAiBx3E,GAC5Fs8B,SAAUA,EACVjrB,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAckhF,GAAoBlnC,EAAYA,EAAY,MAC1HnU,SAAU,0BACV,EC1CJ,MAAMu7C,GAA6B,CACjCC,SAAU,CACRnjE,SAAU,sBACVkJ,OAAQvpB,IACN,IAAI,QACFyjF,EAAO,aACP5zE,GACE7P,EACJ,MAAO,CACL6Q,OAAS,uCAAsC4yE,IAC/C1zE,OAAQ,CAAC,KAAO,GAAEF,kBAClBme,QAAQ,EACT,IA6DP,OAzDiC7qB,IAC/B,IAAI,YACFoL,EAAW,iBACX80E,EAAgB,SAChBl7C,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,EAAI,QACJk2D,IACE91D,EAAAA,EAAAA,IAAa8iF,GAA4B,CAC3C5sB,MAAM,IAUR,IARAx1D,EAAAA,EAAAA,YAAU,KACJkiF,GACF9sB,EAAQ,CACNktB,QAASJ,EAAiBx3E,GAC1BgE,gBAEJ,GACC,CAACwzE,EAAkBxzE,EAAc0mD,KAC/B8sB,IAAqB90E,EACxB,OAAO,KAET,IAAIgC,EAAiB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKmjF,SAASE,oBAKtE,OAJKnzE,GAAShC,IACZgC,EAAQ,CAAChC,IAGS5M,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,wBACdxB,QAASA,EACT+P,MAAOA,EACPlO,MAAuB,OAAhBkM,QAAwC,IAAhBA,OAAyB,EAASA,EAAY1C,GAC7Es8B,SAAU55B,GAAe45B,EAAS55B,EAAa,WAC/C2O,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAcoM,GAAe4tC,EAAYA,EAAY,MACrHnU,SAAU,4BACV,EC5DJ,MAAM27C,GAAsB,CAC1BlL,aAAc,CACZp4D,SAAU,eACVkJ,OAAQvpB,IACN,IAAI,QACFyjF,EAAO,aACP5zE,GACE7P,EACJ,MAAO,CACL6Q,OAAS,2BAA0B4yE,IACnC1zE,OAAQ,CAAC,2BAA6B,GAAEF,kBACxC+zE,WAAY,YACZ51D,QAAQ,EACT,IA6DP,OAzD0B7qB,IACxB,IAAI,YACFoL,EAAW,iBACX80E,EAAgB,SAChBl7C,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,EAAI,QACJk2D,IACE91D,EAAAA,EAAAA,IAAakjF,GAAqB,CACpChtB,MAAM,IAUR,IARAx1D,EAAAA,EAAAA,YAAU,KACJkiF,GACF9sB,EAAQ,CACNktB,QAASJ,EAAiBx3E,GAC1BgE,gBAEJ,GACC,CAACwzE,EAAkBxzE,EAAc0mD,KAC/B8sB,IAAqB90E,EACxB,OAAO,KAET,IAAIgC,EAAiB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKo4E,aAAaA,aAK1E,OAJKloE,GAAShC,IACZgC,EAAQ,CAAChC,IAGS5M,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,gBACdxB,QAASA,EACT+P,MAAOA,EACPlO,MAAuB,OAAhBkM,QAAwC,IAAhBA,OAAyB,EAASA,EAAY1C,GAC7Es8B,SAAU55B,GAAe45B,EAAS55B,EAAa,eAC/C2O,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAcoM,GAAe4tC,EAAYA,EAAY,MACrHnU,SAAU,qBACV,EC1CJ,OAvB4BhoC,IAC1B,IAAI,QACFwO,EAAO,SACP25B,GACEnoC,EACJ,OAAoB2B,EAAAA,cAAoBo5E,GAAY,CAClDhyE,KAAM,UACN1G,OAAmB,IAAZmM,EAAmB,UAAY,SACtC25B,SAAU9lC,GAAS8lC,EAAmB,YAAV9lC,GAC5BqxC,QAAS,OACK/xC,EAAAA,cAAoBs5E,GAAO,CACzC54E,MAAO,SACPk2C,MAAOv2C,GAAAA,EAAAA,EAAO,YACCL,EAAAA,cAAoBs5E,GAAO,CAC1C54E,MAAO,UACPk2C,MAAOv2C,GAAAA,EAAAA,EAAO,aACb,ECZL,MAAM6hF,GAAoB,CAAC,gBAAiB,oBAAqB,aAAc,OAAQ,OAAQ,UAAW,aACpGC,GAA8B,CAClCC,oBAAqB,CACnB1jE,SAAU,sBACVkJ,OAAQvpB,IACN,IAAI,GACF6L,EAAE,aACFgE,GACE7P,EACJ,MAAO,CACL6xB,QAAShmB,EACTkE,OAAQ,CAAC,2BAA6B,GAAEF,iBAA6B,aACrEme,QAAQ,EACT,IAyDP,OArD4B7qB,IAC1B,IAAI,SACFuW,EAAQ,QACRmY,EAAO,SACPsW,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAM,aACJ0M,GACEvN,MACE,kBACJ01E,GACEF,GAAkC,CACpCC,UAAuB,OAAZlmD,QAAgC,IAAZA,OAAqB,EAASA,EAAQhmB,MAEjE,KACJxL,EACAk2D,QAASytB,IACPvjF,EAAAA,EAAAA,IAAaqjF,GAA6B,CAC5CntB,MAAM,KAERx1D,EAAAA,EAAAA,YAAU,KACJ0wB,GACFmyD,EAA2B,CACzBn4E,GAAIgmB,EAAQhmB,GACZgE,gBAEJ,GACC,CAACgiB,EAASmyD,EAA4Bn0E,IACzC,MAAMyJ,EAAYwC,GAAiBk8D,GAAqB,IAAc,OAAT33E,QAA0B,IAATA,OAAkB,EAASA,EAAK0jF,oBAAoBA,sBAAwB,GAAI,KAAMF,IAAmBj2E,KAAIkD,IAAI,IAC1LA,EACHjF,GAAKiF,EAAKjF,GAAGkH,SAAS,KAAoCjC,EAAKjF,GAAjC,GAAEgmB,EAAQhmB,MAAMiF,EAAKjF,SAGrD,OAAoBlK,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,mBACduO,MAAO+I,EACPjX,MAAOqX,EAAWA,EAAS7N,GAAK,KAChCs8B,SAAUzuB,GAAYyuB,EAASzuB,EAAU,iBACzCwD,UAAWA,EACXi/B,WAAYziC,GAAYyiC,EAAYA,EAAY,MAChD,EC3DJ,MAAM8nC,GAAkB,CACtBtJ,KAAM,CACJt6D,SAAU,WACVkJ,OAAQvpB,IACN,IAAI,aACF6P,GACE7P,EACJ,MAAO,CACL+P,OAAQ,CAAC,2BAA6B,GAAEF,iBAA6B,iBACrEme,QAAQ,EACT,IA4CP,OAxCuB7qB,IACrB,IAAI,QACFsL,EAAO,SACP05B,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAawjF,GAAiB,CAChC12D,UAAW,CACT1d,kBAGEq0E,EAAYz1E,EAAUA,EAAQ5C,GAAG+P,MAAM,KAAK,GAAK,KAEvD,OAAoBja,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,YACdxB,QAASA,EACT+P,MAAgB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKs6E,KAAKwJ,SAC7D9hF,MAAO6hF,EACP/7C,SAAU15B,GAAW05B,EAAS15B,EAAS,iBAEvCyO,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAcsM,GAAW0tC,EAAYA,EAAY,OACjH,ECnDJ,GAAyB,qCCQzB,MAAMioC,GAAwB,CAC5B7zE,MAAO,CACL8P,SAAU,aACVxU,GAAI7L,IACF,IAAI,GACF6L,GACE7L,EACJ,MAAQ,GAAE6L,SAAU,EAEtB0d,OAAQpmB,IACN,IAAI,aACF0M,GACE1M,EACJ,MAAO,CACL4M,OAAQ,CAAC,KAAO,GAAEF,kBAClBggE,MAAQ,GAAEhgE,QACVme,QAAQ,EACT,IAiDP,OA7C6B3T,IAC3B,IAAI,UACFnB,EAAS,MACT7W,EAAK,SACL8lC,GACE9tB,EACJ,MAAM,aACJxK,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,EAAI,QACJk2D,IACE91D,EAAAA,EAAAA,IAAa2jF,GAAuB,CACtCztB,MAAM,KAERx1D,EAAAA,EAAAA,YAAU,KACJ+X,GACFq9C,EAAQ,CACN1qD,GAAIqN,EACJrJ,gBAEJ,GACC,CAACqJ,EAAWrJ,EAAc0mD,IAC7B,MACMhmD,EAAiB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKkQ,MAAMA,MAC/D8zE,EAAchiF,GAASkO,EAAQlO,EAAMwO,QAAOhF,GAAM0E,EAAMxC,MAAKoM,GAAKA,EAAEtO,KAAOA,WAAOhL,EACxF,OAAoBc,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,SACdxB,QAASA,EACT+P,MAAOA,EACPlO,MAAOgiF,EACPhoC,UAAU,EACVlU,SAT2BtmB,GAAOsmB,EAAStmB,EAAIjU,KAAI/B,GAAMxL,EAAKkQ,MAAMA,MAAMxC,MAAK+C,GAAQA,EAAKjF,KAAOA,OAUnGswC,UAAqB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,QAC/D+a,UAAWgvB,GACXlE,SAAU,gCACV,E,YCnEJ,GAA2B,kCAA3B,GAA0E,oCCS1E,MAAMs8C,GAAiB,CAAC,WAAY,4BAA6B,+BAG3DC,GAAmB,CACvBzpE,WAAY,CACVuF,SAAU,aACVkJ,OAAQvpB,IACN,IAAI,aACF6P,GACE7P,EACJ,MAAO,CACL+P,OAAQ,CAAC,KAAO,GAAEF,iBAA6B,iBAC/CgB,OAAS,qBAAoByzE,GAAet0E,KAAK,QACjD6/D,MAAQ,GAAEhgE,QACVme,QAAQ,EACT,IA0DP,OAtDwB7qB,IACtB,IAAIqhF,EACJ,IAAI,UACFtrE,EAAS,SACTivB,GACEhlC,EACJ,MAAOg2C,EAAQC,IAAax4C,EAAAA,EAAAA,WAAS,IAC/B,aACJiP,GACEvN,MACE,MACJ/B,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAa8jF,GAAkB,CACjCh3D,UAAW,CACT1d,kBAGE40E,GAAcn+C,EAAAA,EAAAA,UACdo+C,EAAgB74E,GAAMxL,GAAQA,EAAKya,WAAWA,WAAW/M,MAAK2M,GAAKA,EAAE7O,KAAOA,IAC5EgxC,EAAW6nC,EAAcxrE,GAO/B,OAAI3Y,EACkBoB,EAAAA,cAAoBi/C,GAAAA,EAAM,CAC5CrgD,OAAO,GACNA,EAAM4B,SAESR,EAAAA,cAAoBA,EAAAA,SAAgB,KAAmBA,EAAAA,cAAoB,MAAO,CACpG8qC,QAASA,IAAM2M,GAAU,GACzBl8B,UAAWgvB,IACGvqC,EAAAA,cAAoB,QAAS,KAAMK,GAAAA,EAAAA,EAAO,cAA4BL,EAAAA,cAAoB,MAAO,CAC/GmtC,IAAK21C,EACL,YAAa,0BACC9iF,EAAAA,cAAoB,OAAQ,KAAMk7C,EAAWA,EAAS9zC,KAAO,IAAkBpH,EAAAA,cAAoBs3C,GAAAA,EAAmB,QAASE,GAAuBx3C,EAAAA,cAAoB63C,GAAAA,EAAS,CACjMC,UAAWgrC,EACX9qC,UAAW,eACXC,eAAgBA,IAAMR,GAAU,IAClBz3C,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,IACGvqC,EAAAA,cAAoBgjF,GAAAA,EAAiB,CACnD7pE,WAAqB,OAATza,QAA0B,IAATA,GAAoE,QAAxCmkF,EAAmBnkF,EAAKya,kBAA6C,IAArB0pE,OAA1D,EAAiGA,EAAiB1pE,WACjK8pE,iBAzBuBt0E,IACnBA,IAAQ4I,GACVivB,EAASu8C,EAAcp0E,IAEzB8oC,GAAU,EAAM,EAsBhByrC,YAAa,CAAC3rE,OACX,EC5EP,GAA4B,sCCqC5B,OAhC2BlZ,IACzB,IAAI,UACFkZ,EAAS,MACT3I,EAAK,MACLsK,EAAK,SACLstB,EAAQ,SACR2a,GACE9iD,EACJ,MAAM2yE,EAAWA,CAACz5D,EAAW3I,IAAU43B,EAASttB,EAAO,CACrD3B,YACA3I,UAEF,OAAoB5O,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACGvqC,EAAAA,cAAoBmjF,GAAiB,CACnD5rE,UAAWA,EACXivB,SAAU48C,GAAqBpS,EAASoS,EAAkBl5E,MAC3ClK,EAAAA,cAAoBqjF,GAAsB,CACzD9rE,UAAWA,EACX7W,MAAOkO,EAAQA,EAAM3C,KAAIkD,GAAQA,EAAKjF,KAAM,KAC5Cs8B,SAAU53B,GAASoiE,EAASz5D,EAAW3I,KACxB5O,EAAAA,cAAoBw4E,GAAc,CACjD1tC,QAASA,IAAMqW,EAASjoC,KACvB,EC5BL,GAAkC,yCAAlC,GAAuF,mCCDvF,SAASuwB,KAAiS,OAApRA,GAAWh4B,OAAOi4B,OAASj4B,OAAOi4B,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIzyB,EAAI,EAAGA,EAAInV,UAAUC,OAAQkV,IAAK,CAAE,IAAI5P,EAASvF,UAAUmV,GAAI,IAAK,IAAIvH,KAAOrI,EAAckK,OAAOtP,UAAU0nC,eAAeC,KAAKviC,EAAQqI,KAAQg6B,EAAOh6B,GAAOrI,EAAOqI,GAAU,CAAE,OAAOg6B,CAAQ,EAAUH,GAASM,MAAMC,KAAMhoC,UAAY,CAoClV,QAAe6+C,EAAAA,EAAAA,IAAQ,KAAM,CAC3ByiC,mBhFlCgCp0E,IAAM,CACtCtR,KAAMC,GACNqR,WgFiCAq0E,sBhF7BmCrqE,IAAK,CACxCtb,KAAMC,GACNqb,UgF4BAsqE,sBhFxBmCA,CAACtqE,EAAOhK,KAAM,CACjDtR,KAAMC,GACNqb,QACAhK,YgFkBF,EA3BwB7Q,IACtB,IAAI,WACF8a,EAAa,GAAE,mBACfmqE,EAAkB,sBAClBE,EAAqB,sBACrBD,GACEllF,EACJ,OAAoB2B,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACVpxB,EAAWlN,KAAI,CAACkD,EAAM+J,IAAuBlZ,EAAAA,cAAoByjF,GAAoBh6C,GAAS,CAC/F75B,IAAKsJ,EACLA,MAAOA,EACPstB,SAAUg9C,EACVriC,SAAUoiC,GACTp0E,MAAsBnP,EAAAA,cAAoB,MAAO,CAClDub,UAAWgvB,IACGvqC,EAAAA,cAAoBiyC,GAAAA,EAAQ,CAC1C2mC,OAAO,EACP9tC,QAASA,IAAMw4C,KACdjjF,GAAAA,EAAAA,EAAO,gBAAgB,ICrB5B,MAAMqjF,GAAyB,CAC7B38D,OAAQ,CACNrI,SAAU,kBACVkJ,OAAQ,CACNxZ,OAAQ,CAAC,KAAM,4BACfie,QAAQ,KAmCd,OA/B6BhuB,IAC3B,IAAI,eACFslF,EAAc,SACdn9C,EAAQ,UACRjrB,EAAS,UACTi/B,GACEn8C,EACJ,MAAM,QACJQ,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAa4kF,IACjB,OAAoB1jF,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,mBACdxB,QAASA,EACT+P,MAAgB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKqoB,OAAO68D,gBAC/DljF,MAA0B,OAAnBijF,QAA8C,IAAnBA,OAA4B,EAASA,EAAez5E,GACtFs8B,SAAUA,EACVjrB,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAcmjF,GAAkBnpC,EAAYA,EAAY,MACxHnU,SAAU,wBACV,EC7BJ,MAAMw9C,GAAmB,CACvBC,WAAY,CACVplE,SAAU,aACVkJ,OAAQvpB,IACN,IAAI,QACFyjF,EAAO,aACP5zE,GACE7P,EACJ,MAAO,CACL6Q,OAAS,yBAAwB4yE,IACjC1zE,OAAQ,CAAC,KAAO,GAAEF,iBAA6B,iBAC/Cme,QAAQ,EACT,IA8DP,OA1DwB7qB,IACtB,IAAI,UACFkL,EAAS,eACTi3E,EAAc,SACdn9C,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAM,aACJ0M,GACEvN,MACE,QACJ9B,EAAO,MACPD,EAAK,KACLF,EAAI,QACJk2D,IACE91D,EAAAA,EAAAA,IAAa+kF,GAAkB,CACjC7uB,MAAM,IAUR,IARAx1D,EAAAA,EAAAA,YAAU,KACJmkF,GACF/uB,EAAQ,CACNktB,QAAS6B,EAAez5E,GACxBgE,gBAEJ,GACC,CAACy1E,EAAgBz1E,EAAc0mD,KAC7B+uB,IAAmBj3E,EACtB,OAAO,KAET,IAAIkC,EAAiB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKolF,WAAWA,WAKxE,OAJKl1E,GAASlC,IACZkC,EAAQ,CAAClC,IAGS1M,EAAAA,cAAoBg6C,GAAa,CACnDpqC,IAAK,aACL/Q,QAASA,EACT+3C,MAAOv2C,GAAAA,EAAAA,EAAO,aACduO,MAAOA,EACPlO,MAAqB,OAAdgM,QAAoC,IAAdA,OAAuB,EAASA,EAAUxC,GACvEs8B,SAAUzuB,GAAYyuB,EAASzuB,EAAU,aACzCwD,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAckM,GAAa8tC,EAAYA,EAAY,MACnHnU,SAAU,mBACV,ECpEG,MAAM09C,GAA0BA,IACjB/jF,EAAAA,cAAoB,MAAO,CAC7Cwb,MAAO,KACPC,OAAQ,KACR+yB,QAAS,YACTE,KAAM,OACND,MAAO,8BACOzuC,EAAAA,cAAoB,IAAK,CACvCgkF,SAAU,yBACIhkF,EAAAA,cAAoB,OAAQ,CAC1Cwb,MAAO,KACPC,OAAQ,KACRwoE,GAAI,IACJv1C,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uLACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,wPACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,gLACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uKACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,4IACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,8FACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,yEACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,qHACH21B,KAAM,aACU1uC,EAAAA,cAAoB,OAAQ,CAC5C8lD,EAAG,MACHC,EAAG,MACHvqC,MAAO,KACPC,OAAQ,KACRwoE,GAAI,MACJt+B,OAAQ,YACO3lD,EAAAA,cAAoB,OAAQ,KAAmBA,EAAAA,cAAoB,WAAY,CAC9FkK,GAAI,mBACUlK,EAAAA,cAAoB,OAAQ,CAC1Cwb,MAAO,KACPC,OAAQ,KACRwoE,GAAI,IACJv1C,KAAM,aAGGw1C,GAAyBA,IAChBlkF,EAAAA,cAAoB,MAAO,CAC7Cwb,MAAO,KACPC,OAAQ,KACR+yB,QAAS,YACTE,KAAM,OACND,MAAO,8BACOzuC,EAAAA,cAAoB,IAAK,CACvCgkF,SAAU,yBACIhkF,EAAAA,cAAoB,IAAK,CACvCgkF,SAAU,yBACIhkF,EAAAA,cAAoB,OAAQ,CAC1CkK,GAAI,4BACJwkC,KAAM,SACQ1uC,EAAAA,cAAoB,OAAQ,CAC1C+Y,EAAG,qBACa/Y,EAAAA,cAAoB,OAAQ,CAC5C+Y,EAAG,kBACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,yNACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,4SACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,0NACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,kMACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,kJACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uHACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,0JACH21B,KAAM,aACU1uC,EAAAA,cAAoB,OAAQ,CAC5C+Y,EAAG,oBACH21B,KAAM,UACNy1C,KAAM,oCACSnkF,EAAAA,cAAoB,IAAK,CACxCgkF,SAAU,yBACIhkF,EAAAA,cAAoB,OAAQ,CAC1CkK,GAAI,6BACJwkC,KAAM,SACQ1uC,EAAAA,cAAoB,OAAQ,CAC1C+Y,EAAG,yBACa/Y,EAAAA,cAAoB,OAAQ,CAC5C+Y,EAAG,sBACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,yOACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,wUACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,+NACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,+MACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,kLACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,kIACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,0JACH21B,KAAM,aACU1uC,EAAAA,cAAoB,OAAQ,CAC5C+Y,EAAG,sBACH21B,KAAM,UACNy1C,KAAM,qCACSnkF,EAAAA,cAAoB,IAAK,CACxCgkF,SAAU,yBACIhkF,EAAAA,cAAoB,OAAQ,CAC1CkK,GAAI,6BACJwkC,KAAM,SACQ1uC,EAAAA,cAAoB,OAAQ,CAC1C+Y,EAAG,uBACa/Y,EAAAA,cAAoB,OAAQ,CAC5C+Y,EAAG,oBACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,8NACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uTACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,0NACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,qMACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,4JACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,kIACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,0JACH21B,KAAM,aACU1uC,EAAAA,cAAoB,OAAQ,CAC5C+Y,EAAG,0DACH21B,KAAM,UACNy1C,KAAM,qCACSnkF,EAAAA,cAAoB,IAAK,CACxCgkF,SAAU,yBACIhkF,EAAAA,cAAoB,OAAQ,CAC1Cwb,MAAO,KACPC,OAAQ,KACR8sC,UAAW,gBACX7Z,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,oOACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,6TACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,+NACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,4MACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,wKACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uHACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,0JACH21B,KAAM,cACW1uC,EAAAA,cAAoB,OAAQ,CAC7C8lD,EAAG,MACHC,EAAG,MACHvqC,MAAO,KACPC,OAAQ,KACRwoE,GAAI,MACJt+B,OAAQ,YACO3lD,EAAAA,cAAoB,OAAQ,KAAmBA,EAAAA,cAAoB,WAAY,CAC9FkK,GAAI,mBACUlK,EAAAA,cAAoB,OAAQ,CAC1Cwb,MAAO,KACPC,OAAQ,KACRwoE,GAAI,IACJv1C,KAAM,WACU1uC,EAAAA,cAAoB,WAAY,CAChDkK,GAAI,mBACUlK,EAAAA,cAAoB,OAAQ,CAC1C+Y,EAAG,kBACH21B,KAAM,WACU1uC,EAAAA,cAAoB,WAAY,CAChDkK,GAAI,mBACUlK,EAAAA,cAAoB,OAAQ,CAC1C+Y,EAAG,sBACH21B,KAAM,WACU1uC,EAAAA,cAAoB,WAAY,CAChDkK,GAAI,mBACUlK,EAAAA,cAAoB,OAAQ,CAC1C+Y,EAAG,oBACH21B,KAAM,WACU1uC,EAAAA,cAAoB,WAAY,CAChDkK,GAAI,mBACUlK,EAAAA,cAAoB,OAAQ,CAC1Cwb,MAAO,KACPC,OAAQ,KACRizB,KAAM,QACN6Z,UAAW,qBAGF67B,GAA4BA,IACnBpkF,EAAAA,cAAoB,MAAO,CAC7Cwb,MAAO,KACPC,OAAQ,KACR+yB,QAAS,YACTE,KAAM,OACND,MAAO,8BACOzuC,EAAAA,cAAoB,IAAK,CACvCgkF,SAAU,yBACIhkF,EAAAA,cAAoB,OAAQ,CAC1Cwb,MAAO,KACPC,OAAQ,KACRwoE,GAAI,IACJv1C,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uLACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,wPACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,gLACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uKACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,4IACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,8FACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,yEACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,qHACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C8lD,EAAG,IACHC,EAAG,KACHvqC,MAAO,KACPC,OAAQ,KACRwoE,GAAI,IACJv1C,KAAM,UACS1uC,EAAAA,cAAoB,OAAQ,CAC3C+Y,EAAG,uBACH21B,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C8lD,EAAG,KACHC,EAAG,KACHvqC,MAAO,IACPC,OAAQ,IACRizB,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C8lD,EAAG,KACHC,EAAG,KACHvqC,MAAO,IACPC,OAAQ,IACRizB,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C8lD,EAAG,KACHC,EAAG,KACHvqC,MAAO,IACPC,OAAQ,IACRizB,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C8lD,EAAG,KACHC,EAAG,KACHvqC,MAAO,IACPC,OAAQ,IACRizB,KAAM,YACS1uC,EAAAA,cAAoB,OAAQ,CAC3C8lD,EAAG,KACHC,EAAG,KACHvqC,MAAO,IACPC,OAAQ,IACRizB,KAAM,aACU1uC,EAAAA,cAAoB,OAAQ,CAC5C8lD,EAAG,MACHC,EAAG,MACHvqC,MAAO,KACPC,OAAQ,KACRwoE,GAAI,MACJt+B,OAAQ,YACO3lD,EAAAA,cAAoB,OAAQ,KAAmBA,EAAAA,cAAoB,WAAY,CAC9FkK,GAAI,mBACUlK,EAAAA,cAAoB,OAAQ,CAC1Cwb,MAAO,KACPC,OAAQ,KACRwoE,GAAI,IACJv1C,KAAM,aCrUV,OAAoC,6CCuIpC,OA3H0BrwC,IACxB,IAAI,QACF2I,EAAO,MACPtG,EAAQqE,GAAyB,QACjCkO,EAAU,GAAE,SACZuzB,GACEnoC,EACJ,MAAMgmF,EAAcvY,GAAY74D,GAC1BqxE,GAAe1/C,EAAAA,EAAAA,UAAQ,IAAMrwB,GAAatB,IAAU,CAACA,IACrDsxE,GAAiBxgD,EAAAA,EAAAA,KAAYviC,IACjC,IAAI,IACFyK,GACEzK,EACJ,OAAOyK,EAAIsC,SAAS2Q,MAAKxG,IACvB,IAAI,GACFxO,GACEwO,EACJ,OAAOxO,IAAOlD,CAAO,GACrB,IAEEw9E,GAAyBzgD,EAAAA,EAAAA,KAAYprB,IACzC,IAAI,IACF1M,GACE0M,EACJ,OAAO1M,EAAIsC,SAAS2Q,MAAKlhB,GAASA,EAAMyR,oBAAsBzK,IAA+BhH,EAAMkM,KAAOlD,GAAQ,IAE9Gy9E,GAAoB1gD,EAAAA,EAAAA,KAAYhwB,IACpC,IAAI,UACFg8D,GACEh8D,EACJ,MAAMd,EAAUqF,GAAsBy3D,EAAUrnE,SAChD,OAAO6L,GAAatB,GxV0CY,EwV1CmB,KAErDzT,EAAAA,EAAAA,YAAU,KACJyT,IAAYoxE,IAGZC,ExVmC4B,GwVnCW5jF,IAAUqE,IAE1Cu/E,ExVkCqB,IwVlCkB5jF,IAAUuE,KAD1DuhC,EAASzhC,GAGX,GACC,CAACrE,EAAOuS,EAASoxE,EAAa79C,EAAU89C,IAC3C,MAAMI,GAAc9/C,EAAAA,EAAAA,UAAQ,MAC1B,CAAC7/B,SAA4B7F,EAC7B,CAAC8F,IAA8Bs/E,ExV2BC,EwV3BqCjkF,GAAAA,EAAAA,EAAO,wDAAyD,CACnIskF,OxV0B8B,IwVzB3BH,EAAyBnkF,GAAAA,EAAAA,EAAO,uDAAoDnB,EACzF,CAAC+F,IAAqCq/E,ExVwBN,EwVxB4CjkF,GAAAA,EAAAA,EAAO,wDAAyD,CAC1IskF,OxVuB8B,IwVtB3BF,EAAoBpkF,GAAAA,EAAAA,EAAO,+FAAgG,CAC9HskF,OxVsB8B,KwVrB3BJ,EAAiBlkF,GAAAA,EAAAA,EAAO,yDAAsDnB,KACjF,CAAColF,EAAcE,EAAwBC,EAAmBF,IACxD3S,EAAagT,IACjB,OAAQA,GACN,KAAK5/E,GACH,OAAOs/E,ExVeqB,GwVfkBE,EAChD,KAAKv/E,GACH,OAAOq/E,ExVaqB,GwVbkBG,GAAqBF,EACrE,QACE,OAAO,EACX,EAEIM,EAAa,CAAC,CAClBnkF,MAAOqE,GACPyzC,KAAmBx4C,EAAAA,cAAoB+jF,GAAyB,MAChEntC,MAAOv2C,GAAAA,EAAAA,EAAO,UACdo4C,SAAUp4C,GAAAA,EAAAA,EAAO,0DAChB,CACDK,MAAOsE,GACPwzC,KAAmBx4C,EAAAA,cAAoBokF,GAA2B,MAClExtC,MAAOv2C,GAAAA,EAAAA,EAAO,YACdo4C,SAAUp4C,GAAAA,EAAAA,EAAO,sDAChB,CACDK,MAAOuE,GACPuzC,KAAmBx4C,EAAAA,cAAoBkkF,GAAwB,MAC/DttC,MAAOv2C,GAAAA,EAAAA,EAAO,SACdo4C,SAAUp4C,GAAAA,EAAAA,EAAO,oEAAqE,CACpFskF,OxVN8B,OwVSlC,OAAoB3kF,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,IACGvqC,EAAAA,cAAoBo5E,GAAY,CAC9CxiC,MAAOv2C,GAAAA,EAAAA,EAAO,uBACdK,MAAOA,EACP8lC,SAAUA,EACV0T,WAAW,EACXnI,QAAS,OACR8yC,EAAW54E,KAAI2I,IAChB,IACElU,MAAOkkF,EAAQ,KACfpsC,EAAI,MACJ5B,EAAK,SACL6B,GACE7jC,EACJ,MAAMsiC,EAAuBl3C,EAAAA,cAAoBs5E,GAAO,CACtD54E,MAAOkkF,EACPhuC,MAAoB52C,EAAAA,cAAoB8kF,GAAkB,CACxDtsC,KAAMA,EACN5B,MAAOA,EACP6B,SAAUA,EACV5B,QAASn2C,IAAUkkF,EACnB9tC,SAAU86B,EAAWgT,KAEvB9tC,SAAU86B,EAAWgT,KAEjB7tC,EAAU2tC,EAAYE,GAC5B,OAAoB5kF,EAAAA,cAAoB,MAAO,CAC7C4P,IAAKg1E,GACJ7tC,EAAuB/2C,EAAAA,cAAoBi3C,GAAAA,EAAS,CACrDC,QAASH,EACTiB,UAAW,OACVd,GAAWA,EAAQ,KACpB,ECvHN,MAAM6tC,GAA2B,CAC/BjB,WAAY,CACVplE,SAAU,oBACVkJ,OAAQvpB,IACN,IAAI,GACF6L,EAAE,aACFgE,GACE7P,EACJ,MAAO,CACL6Q,OAAS,iBAAgBhF,IACzBkE,OAAQ,CAAC,KAAO,GAAEF,kBAClBme,QAAQ,EACT,IAiDP,OA7C+B7qB,IAC7B,IAAI,QACF0uB,EAAO,iBACPhjB,EAAgB,SAChBs5B,EAAQ,UACRjrB,EAAS,UACTi/B,GACEh5C,EACJ,MAAM,aACJ0M,GACEvN,MACE,KACJjC,EAAI,QACJG,EAAO,MACPD,EAAK,QACLg2D,IACE91D,EAAAA,EAAAA,IAAaimF,GAA0B,CACzC/vB,MAAM,KAERx1D,EAAAA,EAAAA,YAAU,KACJ0wB,GACF0kC,EAAQ,CACN1qD,GAAIgmB,EAAQhmB,GACZgE,gBAEJ,GACC,CAACgiB,EAAShiB,EAAc0mD,IAC3B,MAAMkvB,GAAatpE,EAAAA,GAAAA,QAAO,OAAiB,OAAT9b,QAA0B,IAATA,OAAkB,EAASA,EAAKolF,WAAWkB,mBAC9F,OAAoBhlF,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,qBACdxB,QAASA,EACT+P,MAAOk1E,EACPpjF,MAA4B,OAArBwM,QAAkD,IAArBA,OAA8B,EAASA,EAAiBhD,GAC5Fs8B,SAAUt5B,GAAoBs5B,EAASt5B,EAAkB,oBACzDqO,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAc0M,GAAoBstC,EAAYA,EAAY,OAC1H,EClCJ,QAAeqG,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACLmsB,gBAAiBoiD,EAAUpiD,gBAC5B,GACA,CACD8hD,mBACF,IATA,EApB8BpxE,IAC5B,IAAI,gBACFsvB,EAAe,mBACf8hD,EAAkB,UAClBl0D,GACEld,EACJ,MAAMR,EAAQw1D,KACd,OAAoBrzD,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,oBACduO,MAAOykD,KACP3yD,MAAOitB,GAAmB9vB,EAAM,GAAGqM,GACnCs8B,SAAU5oC,GAAQ6xE,EAAmB7xE,EAAKsM,IAC1CqR,UAAWA,GACX,ICZJ,MAAM0pE,GAAiB,CAAC54E,GAAQK,UAAUF,WAAYH,GAAQa,iBAAiBV,WAAYH,GAAQU,cAAcP,YAwBjH,QAAeq0C,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACL26B,cAAe4zC,EAAUn/C,cAAgBvC,GAC1C,GACA,CACDygD,eACF,IATA,EAvB8BzwE,IAC5B,IAAI,UACF0S,EAAS,cACTorB,EAAa,eACb2yC,GACEzwE,EACJ,MAAM6mF,EAAeD,GAAe7zE,SAASL,GAM7C,OALAvR,EAAAA,EAAAA,YAAU,KACJ28B,IAAkB+oD,GACpBpW,EAAe1gD,GACjB,GACC,CAAC+N,EAAe+oD,EAAcpW,IAC1BoW,EAA4BllF,EAAAA,cAAoB67C,GAAU,CAC/DjF,MAAOv2C,GAAAA,EAAAA,EAAO,8BACdw2C,QAAS1a,EACTqK,SAAU8jB,GAAawkB,EAAexkB,EAAYj8B,GAAyBD,MACxE,IAAI,ICxBX,GAA8B,iCC2B9B,OAtBoB/vB,IAClB,IAAI,MACFqC,EAAK,SACL8lC,GACEnoC,EACJ,MAAM8mF,GAAUrgD,EAAAA,EAAAA,cAAY5qB,GAAOssB,EAAStsB,ErWiJjB,eqWjJuChb,IAAY,CAACsnC,IAC/E,OAAoBxmC,EAAAA,cAAoB,MAAO,KAAmBA,EAAAA,cAAoB67C,GAAU,CAC9FjF,MAAOv2C,GAAAA,EAAAA,EAAO,kCACdw2C,UAAWn2C,EACX8lC,SAAU2+C,IACRzkF,GAAsBV,EAAAA,cAAoBu5E,GAAa,CACzD3iC,MAAOv2C,GAAAA,EAAAA,EAAO,SACd4H,MAAOvH,EACP8lC,SAAUA,EACVhrB,MAAO,GACPD,UAAWgvB,KACV,ECrBL,GAAwB,4BCQjB,MAAM66C,GAAgB,WAC3B,IAAIn9D,EAAYjmB,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAKoD,GAChFk3B,EAAat6B,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAKqD,GACrF,OAAQkL,MAAM0X,KAAe1X,MAAM+rB,IAAerU,GAAaqU,GAAcrU,GAAa3iB,IAAuBg3B,GAAc/2B,EACjI,EAuCA,QAAes7C,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACLymB,UAAW8nD,EAAU9nD,UACrBqU,WAAYyzC,EAAUzzC,WACvB,GACA,CACDqzC,aAAY,GACZ0V,c5FqP2Bt8D,IAAM,CACjCnrB,KAAMC,GACNkrB,Y4FjQF,EAtCqB1qB,IACnB,IAAI,UACF4pB,EAAY7iB,GAAmB,WAC/Bk3B,EAAaj3B,GAAoB,aACjCsqE,EAAY,cACZ0V,EAAa,UACb9pE,GACEld,EACJ,OAAoB2B,EAAAA,cAAoBq3C,EAAAA,SAAU,KAAmBr3C,EAAAA,cAAoBu5C,GAAa,CACpG3C,MAAOv2C,GAAAA,EAAAA,EAAO,cACdK,MAAO6P,MAAM0X,GAAa,GAAKA,EAC/B5f,IAAK/C,GACLgD,IAAK/C,GACLihC,SAAUmpC,EACVp0D,UAAWA,IACIvb,EAAAA,cAAoBu5C,GAAa,CAChD3C,MAAOv2C,GAAAA,EAAAA,EAAO,eACdK,MAAO6P,MAAM+rB,GAAc,GAAKA,EAChCj0B,IAAK/C,GACLgD,IAAK/C,GACLihC,SAAU6+C,EACV9pE,UAAWA,KACR6pE,GAAcn9D,EAAWqU,IAA4Bt8B,EAAAA,cAAoB,MAAO,CACnFub,UAAWgvB,IACGvqC,EAAAA,cAAoBi/C,GAAAA,EAAM,CACxC79C,SAAS,GACRk7B,EAAarU,EAAY5nB,GAAAA,EAAAA,EAAO,iDAAmDA,GAAAA,EAAAA,EAAO,+CAAgD,CAC3IgI,IAAK/C,GACLgD,IAAK/C,OACF,ICNP,QAAes7C,EAAAA,EAAAA,IAAQ,KAAM,CAC3BykC,mB7FmDgC1nF,IAAI,CACpCA,KAAMC,GACNC,QAASF,K6FtDX,EA5B8BS,IAC5B,IAAI,KACFT,EAAOsH,GAAmB,mBAC1BogF,GACEjnF,EACJ,OAAoB2B,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GAAAA,qBxWmD0B,CAAC,CACxCrgC,GAAIhF,GACJkC,KAAM/G,GAAAA,EAAAA,EAAO,cACb+oB,MAAO,yBACN,CACDlf,GAAI/E,GACJiC,KAAM/G,GAAAA,EAAAA,EAAO,cACb+oB,MAAO,sBwWzDkBnd,KAAIzK,IAC3B,IAAI,GACF0I,EAAE,KACF9C,EAAI,MACJgiB,GACE5nB,EACJ,OAAoBxB,EAAAA,cAAoB8+E,GAAa,CACnDlvE,IAAK1F,EACLA,GAAIA,EACJ/C,IAAKiiB,EACL7oB,MAAO6G,EACP0jC,QAASw6C,EACTxrC,WAAYl8C,IAASsM,EACrBqR,UAAWgvB,GAAAA,iBACX,IACD,ICiBL,OAxBwBlsC,IACtB,IAAI,MACFqC,EAAK,SACL8lC,EAAQ,UACRjrB,GACEld,EACJ,MAAMuQ,GAAQg2B,EAAAA,EAAAA,UAAQ,IAzBI,CAAC,CAC3B16B,GAAImC,GAAQK,UAAUF,WACtBpF,KAAM/G,GAAAA,EAAAA,EAAO,cACZ,CACD6J,GAAImC,GAAQO,YAAYJ,WACxBpF,KAAM/G,GAAAA,EAAAA,EAAO,iBACZ,CACD6J,GAAImC,GAAQS,QAAQN,WACpBpF,KAAM/G,GAAAA,EAAAA,EAAO,oBACZ,CACD6J,GAAImC,GAAQU,cAAcP,WAC1BpF,KAAM/G,GAAAA,EAAAA,EAAO,qBACZ,CACD6J,GAAImC,GAAQa,iBAAiBV,WAC7BpF,KAAM/G,GAAAA,EAAAA,EAAO,uBACZ,CACD6J,GAAImC,GAAQc,YAAYX,WACxBpF,KAAM/G,GAAAA,EAAAA,EAAO,mBAQgC,IAGvCzC,EAAO8C,IAAU2L,GAAQQ,QAAQL,WAAaH,GAAQO,YAAYJ,WAAa9L,EACrF,OAAoBV,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,aACduO,MAAOA,EACPlO,MAAO9C,EACP4oC,SAAUz1B,GAAay1B,EAASz1B,EAAU7G,IAC1CqR,UAAWA,EACX8qB,SAAU,oCACV,ECzCJ,SAAS4qB,GAAgBz/C,EAAK5B,EAAKlP,GAA4L,OAAnLkP,EAC5C,SAAwBwO,GAAO,IAAIxO,EACnC,SAAsBshD,EAAOC,GAAQ,GAAqB,kBAAVD,GAAgC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMG,OAAOC,aAAc,QAAapyD,IAATkyD,EAAoB,CAAE,IAAIze,EAAMye,EAAKtnB,KAAKonB,EAAOC,GAAQ,WAAY,GAAmB,kBAARxe,EAAkB,OAAOA,EAAK,MAAM,IAAI4e,UAAU,+CAAiD,CAAE,OAAiB,WAATJ,EAAoBnhD,OAASQ,QAAQ0gD,EAAQ,CAD/UM,CAAapzC,EAAK,UAAW,MAAsB,kBAARxO,EAAmBA,EAAMI,OAAOJ,EAAM,CADxE6hD,CAAe7hD,GAAUA,KAAO4B,EAAOC,OAAOigD,eAAelgD,EAAK5B,EAAK,CAAElP,MAAOA,EAAOixD,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBrgD,EAAI5B,GAAOlP,EAAgB8Q,CAAK,CA0C3O,MAAM+zE,WAAuBv3C,EAAAA,UAC3BC,cACEC,SAASlsC,WACTivD,GAAgBjnB,KAAM,QAAS,CAC7BuR,IAAK,QAET,CACAymB,oBACE,MAAM,UACJjxD,EAAS,QACT2f,EAAO,KACPjiB,EAAI,QACJ/F,EAAO,SACP0P,EAAQ,aACRotE,EAAY,UACZlyE,EAAS,eACTY,EAAc,QACdX,EAAO,WACP29D,EAAU,sBACV3B,EAAqB,cACrBJ,EAAa,YACbf,GACEpkC,KAAKxyB,MACHO,EAAWF,GAAuB6Y,GAClCzd,EAAUqF,GAAsB5P,IAEpCi1E,0BAA2BrR,EAAa,cACxCl6D,GACE8B,EAGJ,IAAKnD,EACH,GAAIgH,GAAYA,EAASC,kBAAmB,CAC1C,MAAMT,EAAY9F,OAAO0C,KAAK9H,IAASD,MAAKuC,GAAOtC,GAAQsC,GAAKhC,WAAaoL,EAASC,oBAClFT,GACFiuE,EAAan5E,GAAQkL,GAAW/K,YAAY,EAEhD,MACEg5E,EAAan5E,GAAQK,UAAUF,YAGnC,MAAMsxE,OAAwB5+E,IAAdoU,QAAuCpU,IAAZqU,EAC3C,GAAIuqE,EAAS,CAEX3O,EAAc,CACZzuE,MAAOoJ,KAFU,EAIrB,KAAO,CAELqlE,EAAc,CACZzuE,MAAOkJ,KAFU,EAIrB,CAGA,GAA0E,IAAzD,OAAZqJ,QAAgC,IAAZA,OAAqB,EAASA,EAAQhR,UAAiB67E,GAAWxR,GAAiB14D,GAAkB04D,EAAel6D,GAAgB,CAK3J8+D,EAJuB,CAAC,CACtBhnE,GAAIoiE,EACJllE,MAAMq+E,EAAAA,GAAAA,MAAyBnZ,MAIjCiD,EADqB8E,KAEvB,CAGA,IAAK5lE,EAAM,CACT,IAAIwkE,EACJ,MAAMC,EAAwD,QAAxCD,EAAmB76D,EAASmQ,cAAyC,IAArB0qD,OAA8B,EAASA,E1W1E7E,G0W2EhC,GAAIC,EAAc,CAChB,MAAM,GACJhpE,EAAE,KACF9C,GACE8rE,EACJ9E,EAAY,CACV72D,UAAW,KACX3I,MAAO,CAAC,CACN1E,GAAK,SAAQA,IACb9C,UAGN,CACF,CACF,CACA4qD,mBAAmBnK,GACjB,MAAM,QACJn3B,EAAO,WACPjoB,EAAU,kBACVgH,EAAiB,WACjByhE,EAAU,sBACV3B,EAAqB,aACrBF,EAAY,WACZC,EAAU,kBACVV,EAAiB,aACjBgB,EAAY,qBACZ8V,EAAoB,cACpB7S,EAAa,kBACbC,EAAiB,UACjBx/D,EAAS,QACTC,EAAO,QACP7K,EAAO,mBACP8mE,GACExlC,KAAKxyB,OACH,YACJomE,GACE5zC,KAAKhG,MAQT,GALIv7B,IAAemB,IAAsB6F,IAAsB1K,IAC7D2gF,EAAqB3gF,IAInB2rB,IAAYm3B,EAAKn3B,QAAS,CAC5B,MAAM3Y,EAAWF,GAAuB6Y,GACpC3Y,IACEA,EAASE,WACX22D,EAAkBvoE,IAClBupE,EAAa73D,EAASE,aAEtB22D,EAAkBtoE,IAClBspE,KAGN,CAIA,GAHIiD,GAAiBA,IAAkBhrB,EAAKgrB,eAC1CC,EAAkB9oC,KAAK6zC,YAErBh2B,EAAKp/C,YAAcA,IAAeo/C,EAAKp/C,WACzC,OAAQA,GACN,KAAKmB,GACH2lE,EAAsB,CACpBj8D,YACAC,YAEF29D,GAAmC,OAAvB1B,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBv8D,UAAY,IACnHo8D,IACAC,IACA,MACF,KAAKxlE,GACHylE,EAAsB,CACpBt8D,QAASqF,GAAsB5P,KAEjC2mE,EAAoC,OAAvBG,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBl8D,WACxGg8D,EAAkC,OAAvBE,QAAsD,IAAvBA,OAAgC,EAASA,EAAmBj8D,SACtG29D,EAAW,SAGN0M,GAAgBn1E,IAAeo/C,EAAKp/C,YAAc6K,IAAcu0C,EAAKv0C,WAAaC,IAAYs0C,EAAKt0C,SAAW+E,GAAsB5P,GAASzG,SAAWqW,GAAsBuvC,EAAKn/C,SAASzG,QACrM+nC,KAAK+zC,cAAc,cAAe,KAAM,SAE5C,CACAzvC,SACE,MAAM,QAEJ5d,EAAO,iBACPgxD,EAAgB,QAChBh5E,EAAO,GACPwB,EAAE,eACFy5E,EAAc,YACdnnD,EAAW,QACX3vB,EAAO,WACPpE,EAAU,kBACVgH,EAAiB,QACjBygB,EAAO,UACPnf,EAAS,gBACTwrB,EAAe,eACfroB,EAAc,gBACdzB,GACEu3B,KAAKxyB,OACH,YAEJmuE,EAAW,oBACXC,EAAmB,kBACnBC,EAAiB,eACjBC,EAAc,WACdC,EAAU,WACV7U,EAAU,cACV/B,EAAa,qBACbuW,EAAoB,WACpBlX,EAAU,aACVgX,GACEx7C,KAAKxyB,OACH,IACJ+jC,EAAG,oBACHyqC,EAAmB,eACnBC,EAAc,sBACdC,EAAqB,iBACrBC,EAAgB,aAChBC,EAAY,aACZjI,EAAY,iBACZkI,EAAgB,mBAChBC,EAAkB,sBAClBC,EAAqB,YACrB3I,EAAW,cACXS,EAAa,eACbpF,GACEjvC,KAAKhG,MACH/wB,EAAUqF,GAAsB5P,GAChCqP,EAAWF,GAAuB6Y,GAClCvX,EAAaL,GAAyBpQ,GAC5C,OAAoB1I,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GAAAA,QACX,YAAa,kBACCvqC,EAAAA,cAAoBozE,GAAM,CACxC1yE,MAAO66C,EACP/U,SAAU+U,GAAOvR,KAAKqE,SAAS,CAC7BkN,SAEYv7C,EAAAA,cAAoBqzE,GAAK,CACvC3yE,MAAO,OACP2lC,SAAU,4BACThmC,GAAAA,EAAAA,EAAO,SAAuBL,EAAAA,cAAoBqzE,GAAK,CACxD3yE,MAAO,SACP2lC,SAAU,8BACThmC,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoBqzE,GAAK,CAC1D3yE,MAAO,WACP2lC,SAAU,gCACThmC,GAAAA,EAAAA,EAAO,cAA4BL,EAAAA,cAAoBqzE,GAAK,CAC7D3yE,MAAO,SACP2lC,SAAU,8BACThmC,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoBqzE,GAAK,CAC1D3yE,MAAO,QACP2lC,SAAU,6BACThmC,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoB,MAAO,CAC5Dub,UAAWgvB,GAAAA,YACF,SAARgR,GAA+Bv7C,EAAAA,cAAoB,MAAO,CAC3Dub,UAAWgvB,GAAAA,YACX,YAAa,0BACCvqC,EAAAA,cAAoBwmF,GAAiB,CACnD9lF,MAAOqQ,EACPwK,UAAWgvB,GAAAA,OACX/D,SAAUg/C,MACNz0E,GAAaA,IAAc1E,GAAQK,UAAUF,aAAe,CAGlExM,EAAAA,cAAoBymF,GAAsB,CACxC72E,IAAK,QACL+zE,eAAgBA,EAChBn9C,SAAUq/C,EACVtqE,UAAWgvB,GAAAA,OACXiQ,UAAWwrC,IACIhmF,EAAAA,cAAoB0mF,GAAiB,CACpD92E,IAAK,YACL+zE,eAAgBA,EAChBj3E,UAAWqL,EACXyuB,SAAUm/C,EACVpqE,UAAWgvB,GAAAA,OACXiQ,UAAWyrC,MACPl1E,IAAc1E,GAAQO,YAAYJ,YAAcuE,IAAc1E,GAAQQ,QAAQL,aAAe,CAGnGxM,EAAAA,cAAoB2mF,GAAwB,CAC1C/2E,IAAK,QACL8xE,iBAAkBA,EAClBl7C,SAAUo/C,EACVrqE,UAAWgvB,GAAAA,OACXiQ,UAAW0rC,IACTxE,GAAiC1hF,EAAAA,cAAoB4mF,GAAqB,CAC5Eh3E,IAAK,SACL/C,QAASA,EACT25B,SAAUu/C,EACVxqE,UAAWgvB,GAAAA,UACG,IAAZ19B,GAAoBkE,IAAc1E,GAAQQ,QAAQL,WAA0BxM,EAAAA,cAAoB6mF,GAA0B,CAC5Hj3E,IAAK,UACL8xE,iBAAkBA,EAClB90E,YAAamL,EACbyuB,SAAUm/C,EACVpqE,UAAWgvB,GAAAA,OACXiQ,UAAW2rC,IACKnmF,EAAAA,cAAoB8mF,GAAmB,CACvDl3E,IAAK,UACL8xE,iBAAkBA,EAClB90E,YAAamL,EACbyuB,SAAUm/C,EACVpqE,UAAWgvB,GAAAA,OACXiQ,UAAW2rC,KACRp1E,IAAc1E,GAAQS,QAAQN,YAGnCxM,EAAAA,cAAoB+mF,GAAgB,CAClCn3E,IAAK,OACL9C,QAASiL,EACTyuB,SAAUm/C,EACVpqE,UAAWgvB,GAAAA,OACXiQ,UAAW4rC,IACTr1E,IAAc1E,GAAQU,cAAcP,YAAc,CAGtDxM,EAAAA,cAAoBs+E,GAAe,CACjC1uE,IAAK,UACLsgB,QAASA,EACTsW,SAAUgoC,EACVjzD,UAAWgvB,GAAAA,OACXiQ,UAAW2jC,IACTjuD,GAAwBlwB,EAAAA,cAAoBgnF,GAAqB,CACnEp3E,IAAK,OACLsgB,QAASA,EACTnY,SAAUA,EACVyuB,SAAUm/C,EACVpqE,UAAWgvB,GAAAA,OACXiQ,UAAW8rC,KACRv1E,IAAc1E,GAAQa,iBAAiBV,YAAc,CAG1DxM,EAAAA,cAAoBs+E,GAAe,CACjC1uE,IAAK,UACLsgB,QAASA,EACTsW,SAAUgoC,EACVjzD,UAAWgvB,GAAAA,OACXiQ,UAAW2jC,IACTjuD,GAAwBlwB,EAAAA,cAAoBinF,GAAwB,CACtEr3E,IAAK,YACLsgB,QAASA,EACThjB,iBAAkB6K,EAClByuB,SAAUm/C,EACVpqE,UAAWgvB,GAAAA,OACXiQ,UAAW+rC,KACRx1E,IAAc1E,GAAQc,YAAYX,YAA2BxM,EAAAA,cAAoBknF,GAAmB,CACvG/5E,YAAa4K,EACbyuB,SAAUm/C,EACVpqE,UAAWgvB,GAAAA,OACXiQ,UAAW6rC,IACIrmF,EAAAA,cAAoBmnF,GAAuB,CAC1D5rE,UAAWgvB,GAAAA,SACIvqC,EAAAA,cAAoBonF,GAAuB,CAC1Dr2E,UAAWA,KACA,WAARwqC,GAAiCv7C,EAAAA,cAAoB,MAAO,CAC/Dub,UAAWgvB,GAAAA,YACX,YAAa,4BACCvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoBqnF,GAAAA,EAAkB,CACpD9rE,UAAWgvB,GAAAA,YACXv5B,QAAS,CAAC,CACR4lC,MAAOv2C,GAAAA,EAAAA,EAAO,uBACdK,MAAOkJ,IACN,CACDgtC,MAAOv2C,GAAAA,EAAAA,EAAO,4BACdK,MAAOoJ,KAEToxC,SAAUzyC,EACV+9B,SAAU91B,GAAKy+D,EAAc,CAC3BzuE,MAAOgQ,EAAEhQ,QACR,MACA+H,IAAemB,IAAmC5J,EAAAA,cAAoBsnF,GAAAA,EAAiB,CAC1FC,gBAAiBt0E,EACjB+9D,SAAUtgE,IACRwgE,EAAWxgE,EAAE9B,MAAM,EAErB44E,oBAAqBtzE,EAAe9B,cACpCqJ,OAAQ,UACNhT,IAAemB,IAAmC5J,EAAAA,cAAoBynF,GAAmB,CAC3F/mF,MAAO+O,EACPwD,QAASA,EACTjM,QAASkD,EACTs8B,SAAUk/C,IACRj9E,IAAeqB,IAAgC9J,EAAAA,cAAoB2+E,GAAc,CACnFlE,kBAAmBpL,GACnBqL,gBAAiBpL,GACjB78D,gBAAiBA,IACfmrE,GAA4B59E,EAAAA,cAAoB,MAAO,CACzDub,UAAWgvB,GAAAA,OACGvqC,EAAAA,cAAoB4+E,GAAAA,EAAmB,MAAOhB,IAAuB,aAARriC,GAAmCv7C,EAAAA,cAAoBwzE,GAAe,CACjJpyE,QAASi9E,IACC,WAAR9iC,GAAiCv7C,EAAAA,cAAoB,MAAO,CAC9Dub,UAAWgvB,GAAAA,YACX,YAAa,4BACCvqC,EAAAA,cAAoB0nF,GAAiB,CACnDvuE,WAAYA,KACD,UAARoiC,GAAgCv7C,EAAAA,cAAoB,MAAO,CAC9Dub,UAAWgvB,GAAAA,eACX,YAAa,2BACCvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB2nF,GAAuB,CACzD/pF,KAAM2+B,IACSv8B,EAAAA,cAAoB,MAAO,CAC1Cub,UAAWgvB,GAAAA,qBACGvqC,EAAAA,cAAoB4nF,GAAc,CAChDrsE,UAAWgvB,GAAAA,eACKvqC,EAAAA,cAAoB2gF,GAAQ,CAC5CT,sBAAsB,KACNlgF,EAAAA,cAAoB,MAAO,CAC3Cub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoBm6E,GAAoB,CACtDhB,QAAS58C,EACTxkB,SAAUA,EACVkhE,eAAgBA,EAChB19D,UAAWgvB,GAAAA,SACIvqC,EAAAA,cAAoB6nF,GAAa,CAChDnnF,MAAO87B,EACPgK,SAAUs/C,OAEd,CAGA/H,cAAcnuE,EAAKpP,EAAS+6C,GAK1B,OAJAvR,KAAKqE,SAAS,CACZ,CAACz+B,GAAMpP,EACP+6C,SAEK,CACT,CACAsiC,WACE,MAAM,UAEJ9sE,EAAS,eACT4yE,EAAc,iBACdjC,EAAgB,QAChBxxD,EAAO,WACPznB,EAAU,QACVioB,EAAO,KACPjiB,EAAI,QACJ/F,EAAO,UACP4K,EAAS,QACTC,EAAO,UACP0U,EAAS,WACTqU,EAAU,OACVvI,EAAM,UACN9b,GACE+xB,KAAKxyB,MACHO,EAAWF,GAAuB6Y,GAClCzd,EAAUqF,GAAsB5P,GAGtC,GAAIqI,IAAc1E,GAAQK,UAAUF,WAAY,CAC9C,IAAKm3E,IAAmB5rE,EACtB,OAAOiyB,KAAK+zC,cAAc,sBAAuB19E,GAAAA,EAAAA,EAAO,+BAAgC,QACnF,IAAK0X,EACV,OAAOiyB,KAAK+zC,cAAc,iBAAkB19E,GAAAA,EAAAA,EAAO,yBAA0B,OAEjF,CAGA,GAAI0Q,IAAc1E,GAAQO,YAAYJ,YAAcuE,IAAc1E,GAAQQ,QAAQL,WAAY,CAC5F,IAAKk1E,IAAqB3pE,EACxB,OAAOiyB,KAAK+zC,cAAc,wBAAyB19E,GAAAA,EAAAA,EAAO,kCAAmC,QACxF,IAAK0X,EACV,OAAOiyB,KAAK+zC,cAAc,mBAAoB19E,GAAAA,EAAAA,EAAO,4BAA6B,OAEtF,CAGA,GAAI0Q,IAAc1E,GAAQS,QAAQN,aAAeuL,EAC/C,OAAOiyB,KAAK+zC,cAAc,eAAgB19E,GAAAA,EAAAA,EAAO,wBAAyB,QAI5E,GAAI0Q,IAAc1E,GAAQU,cAAcP,YAAcuE,IAAc1E,GAAQa,iBAAiBV,WAAY,CACvG,IAAK0jB,IAAYnY,EACf,OAAOiyB,KAAK+zC,cAAc,eAAgB19E,GAAAA,EAAAA,EAAO,uBAAwB,QACpE,IAAK0X,EACV,OAAOhH,IAAc1E,GAAQU,cAAcP,WAAaw9B,KAAK+zC,cAAc,qBAAsB19E,GAAAA,EAAAA,EAAO,+BAAgC,QAAU2pC,KAAK+zC,cAAc,wBAAyB19E,GAAAA,EAAAA,EAAO,iCAAkC,OAE3O,CAGA,GAAI0Q,IAAc1E,GAAQc,YAAYX,aAAeuL,EACnD,OAAOiyB,KAAK+zC,cAAc,mBAAoB19E,GAAAA,EAAAA,EAAO,2BAA4B,QAEnF,GAAuE,KAAtD,OAAZ4S,QAAgC,IAAZA,EAAqBA,EAAU,IAAIhR,QAAgBwG,IAAeqB,GACzF,OAAOkgC,KAAK+zC,cAAc,cAAe19E,GAAAA,EAAAA,EAAO,sBAAuB,UAClE,GAAIoI,IAAeqB,GAAiB,CACzC,MAAMlL,EAAQ2e,GAAqBjK,EAAWC,GAC9C,GAAI3U,EACF,OAAOorC,KAAK+zC,cAAc,cAAen/E,EAAO,SAEpD,CACA,OAAKsZ,GAAoBzJ,GAAMxM,OAG3B8xB,IAAW1tB,IAA8B4R,IAGxCmtE,GAAcn9D,EAAWqU,KAC5B0N,KAAKqE,SAAS,CACZkN,IAAK,WAEA,GANAvR,KAAK+zC,cAAc,iBAAkB19E,GAAAA,EAAAA,EAAO,6BAA8B,SAH1E2pC,KAAK+zC,cAAc,gBAAiB19E,GAAAA,EAAAA,EAAO,sCAAuC,WAY7F,EAEF4wD,GAAgBs0B,GAAgB,YAAa,CAC3ChW,sBAAuBj3B,KAAAA,KAAAA,WACvBs2B,kBAAmBt2B,KAAAA,KAAAA,WACnBstC,oBAAqBttC,KAAAA,KAAAA,WACrBqtC,YAAartC,KAAAA,KAAAA,WACbg3B,WAAYh3B,KAAAA,KAAAA,WACZutC,kBAAmBvtC,KAAAA,KAAAA,WACnBs3B,aAAct3B,KAAAA,KAAAA,WACdwtC,eAAgBxtC,KAAAA,KAAAA,WAChBytC,WAAYztC,KAAAA,KAAAA,WACZ81B,YAAa91B,KAAAA,KAAAA,WACb62B,cAAe72B,KAAAA,KAAAA,WACf44B,WAAY54B,KAAAA,KAAAA,WACZk2B,WAAYl2B,KAAAA,KAAAA,WACZotC,qBAAsBptC,KAAAA,KAAAA,WACtB+2B,aAAc/2B,KAAAA,KAAAA,WACdktC,aAAcltC,KAAAA,KAAAA,WACdu6B,cAAev6B,KAAAA,KAAAA,WACfw6B,kBAAmBx6B,KAAAA,KAAAA,WACnBk3B,mBAAoBl3B,KAAAA,OACpB5nB,QAAS4nB,KAAAA,MACTopC,iBAAkBppC,KAAAA,OAClB/kC,QAAS+kC,KAAAA,OACT5vC,QAAS4vC,KAAAA,MACTpuC,GAAIouC,KAAAA,OACJqrC,eAAgBrrC,KAAAA,OAChBrgC,UAAWqgC,KAAAA,OACXvkB,OAAQukB,KAAAA,OACR9b,YAAa8b,KAAAA,OACbzrC,QAASyrC,KAAAA,KACTlgC,SAAUkgC,KAAAA,OACV7vC,WAAY6vC,KAAAA,OACZ7lC,gBAAiB6lC,KAAAA,OACjBpoB,QAASooB,KAAAA,OACThc,WAAYgc,KAAAA,OACZrwB,UAAWqwB,KAAAA,OACX7oC,kBAAmB6oC,KAAAA,OACnB7pC,KAAM6pC,KAAAA,MACNhlC,UAAWglC,KAAAA,OACXpkC,eAAgBokC,KAAAA,OAChB/b,gBAAiB+b,KAAAA,OACjBvnC,UAAWunC,KAAAA,SAEb,QAAeuI,EAAAA,EAAAA,IAAQ,KAAM,CAC3B+tB,kBAAiB,GACjB+W,Y/FtgByBA,CAAC5tE,EAAUR,KAAS,CAC7C3Z,KAAMC,GACNka,WACAR,c+FogBAquE,oB/FhgBiClE,IAAgB,CACjD9jF,KAAMC,GACN6jF,qB+F+fAmE,kB/FlW+BlC,IAAc,CAC7C/lF,KAAMC,GACN8lF,mB+FiWA/T,aAAY,GACZkW,e/FvN4B79E,IAAK,CACjCrK,KAAMC,GACNC,QAASmK,I+FsNT89E,W/F9fwBl5E,IAAO,CAC/BjP,KAAMC,GACNgP,Y+F6fAuhE,YAAW,GACX8C,W/F5YwBj+D,IAAO,CAC/BrV,KAAMC,GACNoV,Y+F2YAs8D,sBAAqB,GACrBF,aAAY,GACZC,WAAU,GACVH,cAAa,GACbuW,qB/FrOkC3zC,IAAO,CACzCn0C,KAAMC,GACNC,QAASi0C,I+FoOTy8B,WAAU,GACVgX,a/FrX0BA,CAACz0E,EAAW+2E,KAAW,CACjDlqF,KAAMC,GACNkT,YACA+2E,iB+FmXC,KAAM,CACP9e,YAAY,GAlBd,CAmBGuc,ICrkBH,MAAM/jD,GAA6B,CACjC3jC,MAAO,CACL6gB,SAAU,qBACVkJ,OAAQ,CACNxZ,OAAQ,CAAC,KAAM,4BACfie,QAAQ,KAmCd,OA/BgChuB,IAC9B,IAAI,kBACFy/B,EAAiB,SACjB0I,EAAQ,UACRjrB,EAAS,UACTi/B,GACEn8C,EACJ,MAAM,QACJQ,EAAO,MACPD,EAAK,KACLF,IACEI,EAAAA,EAAAA,IAAa0iC,IACjB,OAAoBxhC,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,uBACdxB,QAASA,EACT+P,MAAgB,OAATlQ,QAA0B,IAATA,OAAkB,EAASA,EAAKb,MAAMkqF,mBAC9DrnF,MAA6B,OAAtBo9B,QAAoD,IAAtBA,OAA+B,EAASA,EAAkB5zB,GAC/Fs8B,SAAUA,EACVjrB,UAAWA,EACXi/B,WAAsB,OAAV57C,QAA4B,IAAVA,OAAmB,EAASA,EAAM4B,YAAcs9B,GAAqB0c,EAAYA,EAAY,MAC3HnU,SAAU,gBACV,ECpCJ,GAAwB,gCCiCxB,OA5ByBhoC,IACvB,IAAI,QACF6xB,EAAO,WACPznB,EAAasB,GAAkB,SAC/By8B,GACEnoC,EACJ,MAAMu4C,EAAQv2C,GAAAA,EAAAA,EAAO,yDACrB,OAAO6vB,EAAuBlwB,EAAAA,cAAoBo5E,GAAY,CAC5DhyE,KAAM,OACN1G,MAAO+H,EACP+9B,SAAU5oC,GAAQ4oC,EAAS,CACzB9lC,MAAO9C,KAEKoC,EAAAA,cAAoBs5E,GAAO,CACzC54E,MAAO,cACPk2C,MAAOA,IACQ52C,EAAAA,cAAoBs5E,GAAO,CAC1C54E,MAAO,UACPk2C,MAAQ,GAAEv2C,GAAAA,EAAAA,EAAO,+BAA+BA,GAAAA,EAAAA,EAAO,0EACtCL,EAAAA,cAAoB,MAAO,CAC5Cub,UAAWgvB,IACVqM,EAAO,IAAI,ECHhB,OAnB4Bv4C,IAC1B,IAAI,MACFqC,EAAQ,MAAK,SACb8lC,EAAQ,UACRjrB,GACEld,EACJ,OAAoB2B,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,kBACduO,MAAO8uB,KACPh9B,MAAOA,EACP8lC,SAAUz1B,GAAay1B,EAASz1B,EAAU7G,IAC1CqR,UAAWA,GACX,ECXJ,MAAMgmB,GAA2B,CAC/BymD,kBAAmB,CACjBtpE,SAAU,oBACVkJ,OAAQ,CACNxZ,OAAQ,CAAC,KAAM,2BAA4B,qBAmDjD,OA/C4C/P,IAC1C,IAAI,kBACFy/B,EAAiB,MACjBp9B,EAAK,SACL8lC,EAAQ,UACRjrB,GACEld,EACJ,MAAM,QACJQ,EAAO,KACPH,EAAI,MACJE,IACEE,EAAAA,EAAAA,IAAayiC,IACX1jC,GAAQ+mC,EAAAA,EAAAA,UAAQ,KAAgB,OAATlmC,QAA0B,IAATA,OAAkB,EAASA,EAAKspF,kBAAkBA,kBAAkB94E,QAAOtR,GAAmD,4BAA3CA,EAAK+hC,eAAeE,oBAAoDjiC,EAAK+hC,eAAe7B,kBAAkB5zB,KAAO4zB,EAAkB5zB,OAAQ,IAAI,CAACxL,EAAMo/B,EAAkB5zB,KAC7S,OAAIrL,EACkBmB,EAAAA,cAAoBG,GAAAA,EAAgB,CACtDspD,OAAO,IAEA7qD,EACWoB,EAAAA,cAAoB,OAAQ,KAAMpB,EAAM4B,SAEzD3C,EAAMoE,OAUSjC,EAAAA,cAAoBg6C,GAAa,CACnDpD,MAAOv2C,GAAAA,EAAAA,EAAO,qBACduO,MAAO/Q,EACP6C,MAAOA,EACP8lC,SAAU5oC,GAAQ4oC,EAAS5oC,EAAKsM,IAChCqR,UAAWA,IAdSvb,EAAAA,cAAoB,MAAO,CAC7CgI,MAAO,CACL2+C,SAAU,GACVshC,WAAY,KAEb5nF,GAAAA,EAAAA,EAAO,oEAAqE,CAC7EzC,KAAMkgC,EAAkB12B,OAS1B,ECzBJ,MAAM8gF,WAA4Bl6C,EAAAA,UAChCC,YAAYz2B,EAAO4yB,GACjB8D,MAAM12B,EAAO4yB,GACbJ,KAAKhG,MAAQ,CACXuX,IAAK,OACL4sC,0BAA0B,EAE9B,CACAnmB,oBACE,MAAM,KACJvzD,EAAI,UACJ6E,EAAS,QACTC,EAAO,iBACPyrB,EAAgB,SAChB5mB,EAAQ,aACRi3D,EAAY,WACZC,EAAU,YACVlB,GACEpkC,KAAKxyB,MAIT,UAH8BtY,IAAdoU,QAAuCpU,IAAZqU,GAG7B,CACZ,MAAM60E,EAAe/T,KACrBhF,EAAa+Y,EAAa90E,WAC1Bg8D,EAAW8Y,EAAa70E,QAC1B,CACIyrB,GACFgL,KAAKqE,SAAS,CACZ85C,0BAA0B,KAKzB15E,GAAQ2J,EAAS41D,OACpBI,EAAY,CACV72D,UAAW,KACX3I,MAAOwJ,EAAS41D,OAGtB,CACAhc,mBAAmBnK,GACjB,MAAM,cACJgrB,EAAa,kBACbC,EAAiB,UACjBx/D,EAAS,QACTC,EAAO,QACP2c,EAAO,cACPi/C,GACEnlC,KAAKxyB,OACH,YACJomE,GACE5zC,KAAKhG,MACL6uC,GAAiBA,IAAkBhrB,EAAKgrB,eAC1CC,EAAkB9oC,KAAK6zC,aAErBD,GAAgBtqE,IAAcu0C,EAAKv0C,WAAaC,IAAYs0C,EAAKt0C,SACnEy2B,KAAK+zC,cAAc,cAAe,KAAM,UAErC7tD,GAAW23B,EAAK33B,UAAYA,GAC/Bi/C,EAAcplE,GAElB,CACAukC,SACE,MAAM,gBACJrZ,EAAe,iBACfC,EAAgB,SAChBgM,EAAQ,WACRz4B,EAAU,QACVynB,EAAO,cACP+Q,EAAa,kBACbnD,EAAiB,iBACjBkB,EAAgB,kBAChB2C,EAAiB,mBACjBE,EAAkB,sBAClBE,EAAqB,gBACrBtvB,GACEu3B,KAAKxyB,OACH,qBACJ++D,EAAoB,cACpBpH,EAAa,WACbX,EAAU,iBACV6Z,EAAgB,kBAChBC,EAAiB,iCACjBC,EAAgC,mBAChCvZ,EAAkB,oBAClBD,EAAmB,qBACnByZ,EAAoB,sBACpBC,EAAqB,yBACrBC,GACE1+C,KAAKxyB,OACH,IACJ+jC,EAAG,uBACHotC,EAAsB,cACtBtK,EAAa,YACbT,GACE5zC,KAAKhG,MACT,OAAoBhkC,EAAAA,cAAoB,MAAO,CAC7Cub,UAAWgvB,GAAAA,SACGvqC,EAAAA,cAAoBozE,GAAM,CACxC1yE,MAAO66C,EACP/U,SAAU+U,GAAOvR,KAAKqE,SAAS,CAC7BkN,SAEYv7C,EAAAA,cAAoBqzE,GAAK,CACvC3yE,MAAO,QACNL,GAAAA,EAAAA,EAAO,SAAuBL,EAAAA,cAAoBqzE,GAAK,CACxD3yE,MAAO,iBACNL,GAAAA,EAAAA,EAAO,kBAAgCL,EAAAA,cAAoBqzE,GAAK,CACjE3yE,MAAO,UACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoBqzE,GAAK,CAC1D3yE,MAAO,YACNL,GAAAA,EAAAA,EAAO,cAA4BL,EAAAA,cAAoBqzE,GAAK,CAC7D3yE,MAAO,SACNL,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoB,MAAO,CAC5Dub,UAAWgvB,GAAAA,YACF,SAARgR,GAA+Bv7C,EAAAA,cAAoB,MAAO,CAC3Dub,UAAWgvB,GAAAA,aACGvqC,EAAAA,cAAoB4oF,GAAyB,CAC3D9qD,kBAAmBA,EACnB0I,SAAU+vC,EACVh7D,UAAWgvB,GAAAA,OACXiQ,UAAWmuC,IACT7qD,GAAkC99B,EAAAA,cAAoBs+E,GAAe,CACvEuK,aAAa,EACb34D,QAASA,EACT4N,kBAAmBA,EACnB0I,SAAUgoC,EACVjzD,UAAWgvB,GAAAA,SACTra,GAAwBlwB,EAAAA,cAAoB8oF,GAAqB,CACnEpoF,MAAOugC,EACPuF,SAAU6hD,EACV9sE,UAAWgvB,GAAAA,SACTra,GAAwBlwB,EAAAA,cAAoB67C,GAAU,CACxDjF,MAAOv2C,GAAAA,EAAAA,EAAO,aACdw2C,QAAS3V,EACTsF,SAAU8hD,KACC,kBAAR/sC,IAA6BvR,KAAKxyB,MAAMsmB,kBAMyD99B,EAAAA,cAAoB,MAAO,CAC/Hub,UAAWgvB,GAAAA,aACGvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,QACGvqC,EAAAA,cAAoBM,GAAAA,EAAW,CAC7Cc,SAAS,EACTb,MAAO,WACNF,GAAAA,EAAAA,EAAO,gFAA8FL,EAAAA,cAAoB67C,GAAU,CACpIjF,MAAOv2C,GAAAA,EAAAA,EAAO,wCACdw2C,QAAS7M,KAAKhG,MAAMmkD,yBACpB3hD,SAAUqQ,IACHA,GACH0xC,EAAiC,MAEnCv+C,KAAKqE,SAAS,CACZ85C,yBAA0BtxC,GAC1B,EAEJ7uC,MAAO,CACL+gF,aAAc,KAEd/+C,KAAKhG,MAAMmkD,0BAAyCnoF,EAAAA,cAAoBq3C,EAAAA,SAAU,KAAmBr3C,EAAAA,cAAoBgpF,GAAqC,CAChKlrD,kBAAmBkM,KAAKxyB,MAAMsmB,kBAC9Bp9B,MAAOs+B,EACPwH,SAAU+hD,EACVhtE,UAAWqyB,IAAGrD,GAAAA,OAAeA,GAAAA,YA/B+CvqC,EAAAA,cAAoB,MAAO,CACvGgI,MAAO,CACL2+C,SAAU,GACVC,WAAY,GACZqhC,WAAY,KAEb5nF,GAAAA,EAAAA,EAAO,8EA0BK,WAARk7C,GAAiCv7C,EAAAA,cAAoB,MAAO,CACjEub,UAAWgvB,GAAAA,aACGvqC,EAAAA,cAAoBipF,GAAkB,CACpD/4D,QAASA,EACTznB,WAAYA,EACZ+9B,SAAU2oC,IACKnvE,EAAAA,cAAoB2+E,GAAc,CACjDlE,kBAAmBpL,GACnBqL,gBAAiBpL,GACjB78D,gBAAiBA,IACfmrE,GAA4B59E,EAAAA,cAAoB,MAAO,CACzDub,UAAWgvB,GAAAA,OACGvqC,EAAAA,cAAoB4+E,GAAAA,EAAmB,MAAOhB,IAAuB,aAARriC,GAAmCv7C,EAAAA,cAAoBwzE,GAAe,CACjJnD,kBAAkB,EAClBC,wBAAwB,EACxBC,gBAAgB,EAChBC,iBAAiB,EACjBC,iBAAiB,EACjBrvE,QAASi9E,IACC,UAAR9iC,GAAgCv7C,EAAAA,cAAoB,MAAO,CAC7Dub,UAAWgvB,GAAAA,gBACGvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,YACGvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,GAAAA,QACVlqC,GAAAA,EAAAA,EAAO,wBAAyB,KAAmBL,EAAAA,cAAoB,MAAO,CAC/Eub,UAAWgvB,GAAAA,qBACGvqC,EAAAA,cAAoBu5E,GAAa,CAC/C3iC,MAAOv2C,GAAAA,EAAAA,EAAO,SACd4H,MAAOgtB,GAAmBlvB,GAC1BygC,SAAUwoC,EACVzzD,UAAWgvB,GAAAA,kBACIvqC,EAAAA,cAAoBu5C,GAAa,CAChD3C,MAAOv2C,GAAAA,EAAAA,EAAO,cACdK,MAAOw0B,GhXrIa,EgXsIpBsR,SAAUuoC,EACVxzD,UAAWgvB,GAAAA,mBACKvqC,EAAAA,cAAoB0yE,GAAc,CAClDjB,chXxIoB,MgXyIlBzyC,EAAgCh/B,EAAAA,cAAoBq3C,EAAAA,SAAU,KAAmBr3C,EAAAA,cAAoB,MAAO,CAC9Gub,UAAWgvB,GAAAA,QACVlqC,GAAAA,EAAAA,EAAO,wBAAyB,KAAmBL,EAAAA,cAAoB,MAAO,CAC/Eub,UAAWgvB,GAAAA,qBACGvqC,EAAAA,cAAoBu5E,GAAa,CAC/C3iC,MAAOv2C,GAAAA,EAAAA,EAAO,SACd4H,MAAO05B,GAAqB37B,GAC5BwgC,SAAUgiD,EACVjtE,UAAWgvB,GAAAA,kBACIvqC,EAAAA,cAAoBu5C,GAAa,CAChD3C,MAAOv2C,GAAAA,EAAAA,EAAO,cACdgI,IhXrFoB,EgXsFpBC,IAAKxB,GACLpG,MAAOmhC,GhXpJqB,EgXqJ5B2E,SAAUiiD,EACVltE,UAAWgvB,GAAAA,kBACIvqC,EAAAA,cAAoBu5E,GAAa,CAChD3iC,MAAOv2C,GAAAA,EAAAA,EAAO,cACd4H,MAAO85B,GAAyB97B,GAChCugC,SAAUkiD,EACVntE,UAAWgvB,GAAAA,oBACN,MAAoBvqC,EAAAA,cAAoB,MAAO,CACpDub,UAAWgvB,GAAAA,eAEf,CAGAwzC,cAAcnuE,EAAKpP,EAAS+6C,GAK1B,OAJAvR,KAAKqE,SAAS,CACZ,CAACz+B,GAAMpP,EACP+6C,SAEK,CACT,CACAsiC,WACE,MAAM,kBACJ//C,EAAiB,KACjBrvB,EAAI,UACJ6E,EAAS,QACTC,GACEy2B,KAAKxyB,MACT,IAAKsmB,EACH,OAAOkM,KAAK+zC,cAAc,yBAA0B19E,GAAAA,EAAAA,EAAO,mCAAoC,QAEjG,MAAMzB,EAAQ2e,GAAqBjK,EAAWC,GAC9C,OAAI3U,EACKorC,KAAK+zC,cAAc,cAAen/E,EAAO,YAE7CsZ,GAAoBzJ,GAAMxM,QACtB+nC,KAAK+zC,cAAc,gBAAiB19E,GAAAA,EAAAA,EAAO,uCAAwC,WAG9F,EC7RF,SAASopC,KAAiS,OAApRA,GAAWh4B,OAAOi4B,OAASj4B,OAAOi4B,OAAOC,OAAS,SAAUC,GAAU,IAAK,IAAIzyB,EAAI,EAAGA,EAAInV,UAAUC,OAAQkV,IAAK,CAAE,IAAI5P,EAASvF,UAAUmV,GAAI,IAAK,IAAIvH,KAAOrI,EAAckK,OAAOtP,UAAU0nC,eAAeC,KAAKviC,EAAQqI,KAAQg6B,EAAOh6B,GAAOrI,EAAOqI,GAAU,CAAE,OAAOg6B,CAAQ,EAAUH,GAASM,MAAMC,KAAMhoC,UAAY,EDAlV,SAAyBwP,EAAK5B,EAAKlP,GAASkP,EAC5C,SAAwBwO,GAAO,IAAIxO,EACnC,SAAsBshD,EAAOC,GAAQ,GAAqB,kBAAVD,GAAgC,OAAVA,EAAgB,OAAOA,EAAO,IAAIE,EAAOF,EAAMG,OAAOC,aAAc,QAAapyD,IAATkyD,EAAoB,CAAE,IAAIze,EAAMye,EAAKtnB,KAAKonB,EAAOC,GAAQ,WAAY,GAAmB,kBAARxe,EAAkB,OAAOA,EAAK,MAAM,IAAI4e,UAAU,+CAAiD,CAAE,OAAiB,WAATJ,EAAoBnhD,OAASQ,QAAQ0gD,EAAQ,CAD/UM,CAAapzC,EAAK,UAAW,MAAsB,kBAARxO,EAAmBA,EAAMI,OAAOJ,EAAM,CADxE6hD,CAAe7hD,GAAUA,KAAO4B,EAAOC,OAAOigD,eAAelgD,EAAK5B,EAAK,CAAElP,MAAOA,EAAOixD,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBrgD,EAAI5B,GAAOlP,CAAqB,CA+R3OuwD,CAAgBi3B,GAAqB,YAAa,CAChD5Y,WAAYh3B,KAAAA,KAAAA,WACZ02B,mBAAoB12B,KAAAA,KAAAA,WACpBy2B,oBAAqBz2B,KAAAA,KAAAA,WACrBgwC,kBAAmBhwC,KAAAA,KAAAA,WACnB81B,YAAa91B,KAAAA,KAAAA,WACb62B,cAAe72B,KAAAA,KAAAA,WACfk2B,WAAYl2B,KAAAA,KAAAA,WACZ+vC,iBAAkB/vC,KAAAA,KAAAA,WAClBkwC,qBAAsBlwC,KAAAA,KAAAA,WACtBmwC,sBAAuBnwC,KAAAA,KAAAA,WACvBowC,yBAA0BpwC,KAAAA,KAAAA,WAC1B+2B,aAAc/2B,KAAAA,KAAAA,WACdiwC,iCAAkCjwC,KAAAA,KAAAA,WAClCi+B,qBAAsBj+B,KAAAA,KAAAA,WACtBu6B,cAAev6B,KAAAA,KAAAA,WACfw6B,kBAAmBx6B,KAAAA,KAAAA,WACnB/kC,QAAS+kC,KAAAA,OACTrjB,gBAAiBqjB,KAAAA,OACjBpjB,iBAAkBojB,KAAAA,OAClBpX,SAAUoX,KAAAA,KACVlgC,SAAUkgC,KAAAA,OACV7vC,WAAY6vC,KAAAA,OACZ7lC,gBAAiB6lC,KAAAA,OACjBpoB,QAASooB,KAAAA,OACTrX,cAAeqX,KAAAA,OACf3W,kBAAmB2W,KAAAA,OACnBzW,mBAAoByW,KAAAA,OACpBvW,sBAAuBuW,KAAAA,OACvBtZ,iBAAkBsZ,KAAAA,OAClB7pC,KAAM6pC,KAAAA,MACNhlC,UAAWglC,KAAAA,OACXxa,kBAAmBwa,KAAAA,SC5SrB,MAAM4wC,GAAe,CACnBp+D,MAAO4yD,GACPl/C,eD4SaqiB,EAAAA,EAAAA,IAAQ,KAAM,CAC3B01B,qBrGIkCz4C,IAAiB,CACnDlgC,KAAMC,GACNigC,sBqGLA0wC,WAAU,GACV6Z,iBrGkB8B1pE,IAAM,CACpC/gB,KAAMC,GACNC,QAAS6gB,IqGnBT2pE,kBrGuB+BzxC,IAAO,CACtCj5C,KAAMC,GACNC,QAAS+4C,IqGxBT0xC,iCrGM8CvpD,IAAgB,CAC9DphC,KAAMC,GACNmhC,qBqGPAmqD,2CrGSwDtyC,IAAO,CAC/Dj5C,KAAMC,GACNC,QAAS+4C,IqGVTs4B,cAAa,GACbE,aAAY,GACZC,WAAU,GACVlB,YAAW,GACXY,mBAAkB,GAClBD,oBAAmB,GACnByZ,qBrGnMkCvgF,IAAK,CACvCrK,KAAMC,GACNoK,UqGkMAwgF,sBrGhMmC1/D,IAAM,CACzCnrB,KAAMC,GACNkrB,WqG+LA2/D,yBrG7LsCzgF,IAAK,CAC3CrK,KAAMC,GACNoK,UqG4LAwmE,iBACF,IAAG,KAAM,CACPzF,YAAY,GAlBd,CAmBGkf,IC9TDr9D,SAAUu+D,GACVjmD,SAAUoiD,GACV12E,QAASyyE,GACT/2D,YAAa8+D,GACbhmD,WAAYimD,IA8Fd,QAAezoC,EAAAA,EAAAA,KAAQr/C,IACrB,IAAI,UACFuuE,GACEvuE,EACJ,MAAO,CACLxD,MAAO+xE,EACR,GACA,CACDryE,SAAQ,GACRO,YAAW,GACXsrF,YrX7GyBA,KAAA,CACzB3rF,KAAMC,KqXkGR,EAnFkBQ,IAChB,IAAI,MACFL,EAAK,SACLN,EAAQ,YACRO,EAAW,YACXsrF,GACElrF,EACJ,MAAOmrF,EAAcC,IAAmBxqF,EAAAA,EAAAA,WAAS,IAC3C,eACJiV,EAAc,gBACdzB,GACE9R,KACEyX,EAAWm2D,KAwBjB,GADAj+B,GAAW,SAAUi5C,IAChBvrF,EACH,OAAO,KAET,MAAMJ,EAAOI,EAAMA,MACb0rF,EAAcR,GAAatrF,GACjC,IAAK8rF,EACH,OAAO,KAET,IAAItiF,EArDgB,CACpB0jB,MAAOzqB,GAAAA,EAAAA,EAAO,SACdm+B,cAAen+B,GAAAA,EAAAA,EAAO,kBACtBwqB,SAAUxqB,GAAAA,EAAAA,EAAO,YACjB8iC,SAAU9iC,GAAAA,EAAAA,EAAO,YACjBwO,QAASxO,GAAAA,EAAAA,EAAO,YAChBkqB,YAAalqB,GAAAA,EAAAA,EAAO,gBACpBgjC,WAAYhjC,GAAAA,EAAAA,EAAO,YA8CQzC,GACvBA,IAASgG,KACXwD,EAAOpJ,EAAMoJ,KAAK0uB,eAEpB,MAAMv1B,EAAQvC,EAAMkM,GAAK7J,GAAAA,EAAAA,EAAO,sBAAuB,CACrD+G,SACG/G,GAAAA,EAAAA,EAAO,yBAA0B,CACpC+G,SAEF,OAAoBpH,EAAAA,cAAoBmqD,GAAAA,EAAO,CAC7CxT,SAAU,MACVtQ,SAAU,YACV4/B,OAAO,EACP/b,QAASq/B,GACKvpF,EAAAA,cAAoBoqD,GAAAA,EAAY,KAAM7pD,GAAqBP,EAAAA,cAAoBqqD,GAAAA,EAAc,KAAmBrqD,EAAAA,cAAoB,MAAO,CACzJub,UAAWgvB,IACGvqC,EAAAA,cAAoB0pF,EAAajgD,GAAS,CAAC,EAAGzrC,EAAO,CACnEkW,eAAgBA,EAChBzB,gBAAiBA,EACjB2F,SAAUA,EACVy6D,cAAe2W,EACf1W,kBAnDwBK,IAExB,GADAsW,GAAgB,GACZtW,EAAS,CACX,MAAM,GACJjpE,EAAE,YACFioD,EAAc,GACZn0D,EACEL,EAAS,IACVK,EACHm0D,YAAaA,EAAc,EAC3B9wC,UAAU,EACVC,WAAW,GAETpX,EACFjM,EAAYN,GAEZD,EAASC,GAEX4rF,GACF,QAiCkBvpF,EAAAA,cAAoBuqD,GAAAA,EAAc,KAAmBvqD,EAAAA,cAAoBk/C,GAAAA,EAAa,CACxGC,KAAK,GACSn/C,EAAAA,cAAoBiyC,GAAAA,EAAQ,CAC1ClR,WAAW,EACX+J,QAASy+C,GACRlpF,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoBiyC,GAAAA,EAAQ,CAC7DnR,SAAS,EACTgK,QA5DsB6+C,IAAMF,GAAgB,GA6D5CpjD,SAAU,oBACThmC,GAAAA,EAAAA,EAAOrC,EAAMkM,GAAK7J,GAAAA,EAAAA,EAAO,gBAAkBA,GAAAA,EAAAA,EAAO,iBAAiB,I,YC/GxE,GAAyB,4BAAzB,GAA4D,0BCsH5D,QAAewgD,EAAAA,EAAAA,KAAQxiD,IACrB,IAAI,YACFsrE,EAAW,IACX19D,GACE5N,EACJ,MAAO,IACFsrE,EACHz+D,kBAAmBe,EAAIsC,SAASW,QAAOV,GAAQA,EAAKxQ,QAAU4F,KAC/D,GACA,CACDgmF,iBrS1G8BA,KAAA,CAC9BhsF,KAAMC,IqS0GNgsF,oBrStHiClqE,IAAK,CACtC/hB,KAAMC,EACNC,QAAS6hB,IqSqHTmqE,qBrSzGkCA,CAAC9iF,EAAS84C,KAAU,CACtDliD,KAAMC,EACNmJ,UACA84C,eqSuGA9Z,kBAAiB,GACjB/nC,YACF,IAfA,EA5GoBuZ,IAClB,MAAMkgC,GAAY/S,EAAAA,EAAAA,WACZ,QACJvV,EAAO,UACPwZ,EAAS,YACTxnB,EAAW,YACXf,EAAW,kBACXnV,EAAiB,SACjByrC,EAAQ,OACR/jC,EAAM,iBACNg3E,EAAgB,oBAChBC,EAAmB,qBACnBC,EAAoB,kBACpB9jD,EAAiB,YACjB/nC,GACEuZ,EACJ,IAAKm/B,EACH,OAAO,KAET,MAAMkI,GAA+B,OAAhBz9B,QAAwC,IAAhBA,OAAyB,EAASA,EAAY3R,qBAAuBxK,GAC5GL,EAAOgO,EAAO,GAAK+jC,EAAS,GAC5BlyC,EAAMmO,EAAO,GAAK+jC,EAAS,GAC3BggC,GAAoB,OAAZvnD,QAAgC,IAAZA,OAAqB,EAASA,EAAQ3P,aAAe,CAAC,EAClFqrB,EAAUA,CAAC37B,EAAMjF,KAErB,OADA0/E,IACQz6E,GACN,IAAK,WACHlR,EAAYkjB,GAAYC,EAAau1D,EAAK91D,cAAe81D,EAAK/1D,uBAAwBvD,SAASs5D,EAAKhhE,OAAS,IAC7G,MACF,IAAK,aACH1X,EAAYkjB,GAAYC,EAAau1D,EAAKzsE,GAAIysE,EAAK71D,YAAazD,SAASs5D,EAAKhhE,OAAS,IACvF,MACF,IAAK,YACHqwB,EAAkB2wC,EAAKzsE,IACvB,MACF,IAAK,kBACH2/E,EAAoBxpE,GACpB,MACF,IAAK,gBACHypE,EAAqB5/E,EAAImW,GAG7B,EAEF,OAAoBrgB,EAAAA,cAAoBq3C,EAAAA,SAAU,KAAmBr3C,EAAAA,cAAoB,MAAO,CAC9FmtC,IAAKuK,EACLn8B,UAAWgvB,GACXviC,MAAO,CACLpD,OACAH,SAEazE,EAAAA,cAAoB63C,GAAAA,EAAS,CAC5CC,UAAWJ,EACXK,OAAO,EACPC,UAAW,QACXC,eAAgB2xC,GACF5pF,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,IACGvqC,EAAAA,cAAoB6hD,GAAAA,EAAM,CACxCvb,OAAO,EACPD,SAAU,gBACTuC,IAAcnlC,IAAkB2rB,GAAwBpvB,EAAAA,cAAoB8hD,GAAAA,EAAU,CACvFzb,SAAU,wBACVuQ,MAAOv2C,GAAAA,EAAAA,EAAO,sBACdm4C,KAAmBx4C,EAAAA,cAAoByoE,GAAAA,EAAe,MACtD3xB,UAAW6/B,EAAKl2D,iBAChBqqB,QAASA,IAAMA,EAAQ,cACrBlC,IAAcnlC,IAAkB2rB,GAAwBpvB,EAAAA,cAAoB8hD,GAAAA,EAAU,CACxFzb,SAAU,0BACVuQ,MAAOv2C,GAAAA,EAAAA,EAAO,wBACdm4C,KAAmBx4C,EAAAA,cAAoB0oE,GAAAA,EAAiB,MACxD5xB,UAAW6/B,EAAKp2D,mBAChBuqB,QAASA,IAAMA,EAAQ,gBACrB1b,GAAwBpvB,EAAAA,cAAoB8hD,GAAAA,EAAU,CACxDzb,SAAU,4BACVuQ,MAAOv2C,GAAAA,EAAAA,EAAO,gBACdm4C,KAAmBx4C,EAAAA,cAAoBm3C,GAAAA,EAAY,MACnDrM,QAASA,IAAMA,EAAQ,eACrBzqB,IAAgBw+B,GAA4B7+C,EAAAA,cAAoB8hD,GAAAA,EAAU,CAC5Ezb,SAAU,6BACVuQ,MAAOv2C,GAAAA,EAAAA,EAAO,2BACdm4C,KAAmBx4C,EAAAA,cAAoB+pF,GAAAA,EAAgB,MACvDj/C,QAASA,IAAMA,EAAQ,qBACrB5/B,EAAkBe,KAAIjO,GAAsBgC,EAAAA,cAAoB8hD,GAAAA,EAAU,CAC5Ezb,SAAU,6BACVz2B,IAAK5R,EAAMkM,GACX0sC,MAAOv2C,GAAAA,EAAAA,EAAO,gBAAiB,CAC7B+G,KAAMpJ,EAAMoJ,KAAK0uB,gBAEnB0iB,KAAmBx4C,EAAAA,cAAoB+pF,GAAAA,EAAgB,MACvDj/C,QAASA,IAAMA,EAAQ,gBAAiB9sC,EAAMkM,WACzC,ICrGF,MAIM8/E,GAAwBA,KAAA,CACnCpsF,KAAMC,KCLR,OAA0B,iCAA1B,GAAyE,qCCwEzE,OA7DwBosF,KACtB,IAAIC,EACJ,MAAMhmD,GAAWC,EAAAA,EAAAA,OACVmnB,IAAaP,EAAAA,EAAAA,IAAWvG,IACzBhmC,GAASklB,EAAAA,EAAAA,MACTymD,EAAoBrlC,GAAsCwG,GAC1D8+B,EAAoE,QAAhDF,EAAsBC,EAAkB,UAAwC,IAAxBD,OAAiC,EAASA,EAAoBhgF,IACzImgF,EAAkBC,IAAuBrrF,EAAAA,EAAAA,UAAS,CAACmrF,IACpDG,EAAiB7qF,UACrB,MAAM8qF,EAAqB,IAAIH,GAAkB72E,UAC3Ci3E,EAAaN,EAAkBK,EAAmBvoF,OAAS,GAGjE,IAAK,MAAMgjD,KAAUulC,EAAoB,CACvC,MAAMxsF,QAAcgnD,GAAqC,CACvDH,GAAIyG,EACJrG,SACA76B,UAAW66B,IAAWwlC,EACtBjsE,WAEExgB,GACFkmC,EAASxmC,GAASM,GAEtB,CACAkmC,EAAS8lD,KAAwB,EAEnC,OAAKG,EAAkBloF,OAKU,IAA7BkoF,EAAkBloF,QACpBsoF,IACO,MAEWvqF,EAAAA,cAAoBmqD,GAAAA,EAAO,CAC7CV,OAAO,EACP9S,SAAU,UACI32C,EAAAA,cAAoBoqD,GAAAA,EAAY,KAAM/pD,GAAAA,EAAAA,EAAO,gBAA8BL,EAAAA,cAAoBqqD,GAAAA,EAAc,KAAmBrqD,EAAAA,cAAoB,MAAO,CACzKub,UAAWgvB,IACGvqC,EAAAA,cAAoB,MAAO,CACzCub,UAAWgvB,IACVlqC,GAAAA,EAAAA,EAAO,+JAAgK,CACxKqqF,SAAUP,EAAkBloF,UACZjC,EAAAA,cAAoBg6C,GAAa,CACjDpD,MAAOv2C,GAAAA,EAAAA,EAAO,cACduO,MAAOu7E,EACPzpF,MAAO2pF,EACP3vC,UAAU,EACVlU,SAAU8jD,MACOtqF,EAAAA,cAAoBuqD,GAAAA,EAAc,KAAmBvqD,EAAAA,cAAoBk/C,GAAAA,EAAa,CACvGC,KAAK,GACSn/C,EAAAA,cAAoBiyC,GAAAA,EAAQ,CAC1ClR,WAAW,EACX+J,QAASk/C,IACR3pF,GAAAA,EAAAA,EAAO,WAAyBL,EAAAA,cAAoBiyC,GAAAA,EAAQ,CAC7D6E,UAAWuzC,EAAiBpoF,OAC5B6+B,SAAS,EACTgK,QAASy/C,GACRlqF,GAAAA,EAAAA,EAAO,gBAhCRoqD,IAAAA,KAAS,4CACF,KA+Be,EC9D1B,OAJuBkgC,KACrB,MAAMC,GAAmB7mD,EAAAA,EAAAA,KAAYC,GAASA,EAAM4mD,mBACpD,OAAoB5qF,EAAAA,cAAoBA,EAAAA,SAAgB,KAAmBA,EAAAA,cAAoBmqE,GAAa,MAAoBnqE,EAAAA,cAAoB6qF,GAAW,MAAOD,GAAiC5qF,EAAAA,cAAoBiqF,GAAiB,MAAM,ECNpP,GAA0B,qBAA1B,GAAiE,6BAAjE,GAA+G,4BCIxG,MCJMa,GAAoB5gF,IAAE,CACjCtM,KAAMC,GACNC,QAASoM,ICHE6gF,GAAyB,CACpCrsE,SAAU,iBACVkJ,OAAQvpB,IACN,IAAI,GACF6L,GACE7L,EACJ,MAAO,CACL2sF,SAAU9gF,EACV+gF,UAAW,WACZ,EAEHrtF,KAAM,UCNKstF,GAAyBxrF,UACpC,MAAMyrF,EAAa15E,OAAOC,OAAO1N,IAAuB2P,OAAO9D,QAAO,CAAC8E,EAAKtW,KAC1E,IAAI,KACFT,GACES,EAEJ,OADAsW,EAAI/W,IAAQ,EACL+W,CAAG,GACT,CAAC,GACJ,IAAK,MAAMy2E,KAAW35E,OAAO0C,KAAKnQ,IAChC,GAAIkQ,EAAek3E,GACjB,IAAK,MAAM,KACTxtF,EAAI,IACJsG,KACGF,GAAsBonF,GACzB,WACyBjxD,MAAO,GAAEj2B,IAAMgQ,EAAek3E,OACxChxD,GACX+wD,EAAWvtF,GAAQsW,EAAek3E,GAElCn6E,QAAQC,KAAK7Q,GAAAA,EAAAA,EAAO,oDAAqD,CACvE+qF,UACAxtF,OACAsF,YAAa,OAGnB,CAAE,MAAOtE,GACP,QACF,MAGFqS,QAAQC,KAAK7Q,GAAAA,EAAAA,EAAO,2DAA4D,CAC9E+qF,UACAvtF,MAAOmG,GAAsBonF,GAASn/E,KAAIC,GAAKA,EAAEtO,OAAMyQ,KAAK,MAC5DnL,YAAa,QAInB,OAAOioF,CAAU,EAENE,GAAiB3rF,UAC5B,IAAI,kBACF4rF,EAAiB,eACjBp3E,EAAc,aACdq3E,EAAeL,IACb1pF,EACJ,MAAM2pF,QAAmBI,EAAar3E,GAChCs3E,EAAmBF,EAAkBp8E,QAAOlR,GAASA,EAAMksB,mBAAqB5lB,IAA8Bk0B,GAAqBpnB,SAASpT,EAAM46B,cAAa3sB,IAAIwsB,IAA4BvpB,QAAOib,GAAWshE,GAAAA,GAAAA,SAAoBthE,EAAQxsB,OAAOC,QACpP8tF,EAAclsC,KAAkBtwC,QAAOwJ,IAC3C,IAAIizE,EACJ,IACEhuF,QAAQ,KACNC,IAEA8a,EACJ,OAAO+yE,GAAAA,GAAAA,SAAoB7tF,KAAoD,QAAzC+tF,EAAmBR,EAAWvtF,UAAwC,IAArB+tF,GAA8BA,EAAwB,IAC5I1/E,KAAIke,IACDghE,EAAWhhE,EAAQxsB,OAAOC,QAC5BusB,EAAQxsB,OAAO+hD,OAASyrC,EAAWhhE,EAAQxsB,OAAOC,OAE7CusB,KACN1T,OAAO+0E,GACV,OAAOE,CAAW,EC/CpB,IAAIE,GACG,MAAMC,GAAaA,KACxB,MAAMC,GAAoBnnD,EAAAA,EAAAA,QAAOgM,IAC3Bo7C,GAAyBpnD,EAAAA,EAAAA,SAAOtiC,EAAAA,EAAAA,IAAShB,GAAuBJ,MAChE,eACJiT,EAAc,SACdosC,GACE3/C,KACEgrB,EAAiBzX,EAAeugC,kBAChCj2B,GAASklB,EAAAA,EAAAA,MACTQ,GAAWC,EAAAA,EAAAA,MACX6nD,GAAUlnD,EAAAA,EAAAA,cAAYplC,UAC1B,MAAMkoB,EAASopB,GAAiBi7C,GAChC,GAAqB,KAAjBrkE,EAAOgpB,MACT1M,EAAS+O,WACJ,GAAIrrB,EAAOgpB,QAAU4T,GAC1BtgB,EAAS+O,MACT/O,ETnC+B,CACnCtmC,KAAMC,GACNC,SSiCiC,SAE7B,IACE,MAAMmO,QAAYyf,GAAS,CACzBxhB,GAAI0d,EAAOgpB,MACXpyB,SACAmN,mBAEFnN,EAAOmnD,OAAOolB,GAAwB,CACpCn/D,UAAW,CACT1hB,GAAI0d,EAAOgpB,OAEbpX,QAAS56B,GAAS6rD,IAAAA,MAAU,UAAW7rD,KAEzC,MAAM6hD,EDkBsB9nC,KAClC,IAAI,SACF2nC,EAAQ,GACRp2C,EAAE,UACFgiF,EAAS,UACTC,GACExzE,EACAwR,EAAUm2B,EAASl0C,MAAK2H,IAC1B,IACE7J,GAAIkiF,GACFr4E,EACJ,OAAOq4E,IAAcliF,CAAE,IAEpBigB,IACCjgB,GAA2B,oBAAdiiF,GAKfA,EAJY9rF,GAAAA,EAAAA,EAAO,mEAA+D,CAChF6J,KACAhH,YAAa,QAIjBinB,EAAUm2B,EAASl0C,MAAKwI,IACtB,IACE1K,GAAIkiF,GACFx3E,EACJ,OAAOw3E,IAAcF,CAAS,KAC1B3sC,MAER,OAAOp1B,CAAO,EC9CckiE,CAAqB,CACzC/rC,WACAp2C,GAAI+B,EAAIke,QAAQjgB,GAChBgiF,UAAWvgE,EACXwgE,UAAW7qF,GAAOyqF,EAAuBhnD,QAAQ9hC,KAAK,CACpD3B,UAGEgrF,EAAc,IACfrgF,EACHsC,SAAUD,GAAgBrC,EAAIsC,UAC9B4b,QAAS,IACJle,EAAIke,WACJs2B,IAGPvc,E/S9DoB,CAC1BtmC,KAAMC,EACNC,Q+S4DsBwuF,GAClB,CAAE,MAAO57E,GACP+5C,IAAAA,MAAU/5C,GACVwzB,EAAS+O,KACX,CAEErrB,EAAOipB,WACT3M,EAASoN,MAETpN,EAASsN,MAEXtN,EAAS4mD,GAAkBljE,EAAOkpB,mBAClCg7C,EAAkB/mD,QAAUnd,CAAM,GACjC,CAAC04B,EAAU30B,EAAgBuY,EAAU1lB,KACxChf,EAAAA,EAAAA,YAAU,KACRwsF,EAAQv7C,GAAAA,SAAiB,GACxB,CAACu7C,KACJxsF,EAAAA,EAAAA,YAAU,KACR,MAAM+sF,EAAW97C,GAAAA,QAAepyC,IAC9B,IAAImuF,EAAeC,EAAgBC,EACnC,IAAI,OACF7sC,EAAM,SACNtO,GACElzC,EAIJ,MAAM,IACJuR,EAAG,SACHyhC,EAAQ,OACRH,GACEK,EACJ,GAAI3hC,KAA4C,QAAlC48E,EAAgBZ,UAA4C,IAAlBY,OAA2B,EAASA,EAAc58E,MAAQyhC,KAAkD,QAAnCo7C,EAAiBb,UAA6C,IAAnBa,OAA4B,EAASA,EAAep7C,WAAaH,KAAgD,QAAnCw7C,EAAiBd,UAA6C,IAAnBc,OAA4B,EAASA,EAAex7C,QACvV,OAEF06C,GAAer6C,EAGf,MAAMo7C,EAAgB,IAAIC,cAAc,WAAY,CAClD5oD,MAAOuN,EAASvN,QAElB6oD,cAAcF,GACd,MAAM/kE,EAASopB,GAAiBO,GACjB,YAAXsO,GAAwBisC,EAAkB/mD,QAAQ6L,QAAUhpB,EAAOgpB,OAInEhpB,EAAOipB,aAAei7C,EAAkB/mD,QAAQ8L,aAC9CjpB,EAAOipB,WACT3M,EAASoN,MAETpN,EAASsN,OAGbtN,EAAS4mD,GAAkBljE,EAAOkpB,mBAClCg7C,EAAkB/mD,QAAUnd,GAX1BokE,EAAQz6C,EAWwB,IAEpC,MAAO,IAAMg7C,GAAYA,GAAU,GAClC,CAACP,EAAS9nD,GAAU,EClFzB,OA1BY4oD,MACVttF,EAAAA,EAAAA,YAAU,KAER,MAAMutF,EAAeh7E,SAAS6/B,cAAc,UAAU7E,wBAAwBtxB,OAC9E1J,SAASC,gBAAgBhK,MAAMglF,YAAY,kBAAoB,GAAED,MAAiB,GACjF,IACHlB,KLjB8BoB,MAE9B,MAAM3nB,EAAkC,aAAYF,MAAsBC,KACpE6nB,EAAwB,IAAIlhF,IAC5Bk4B,GAAWC,EAAAA,EAAAA,MACX3lB,GAASklB,EAAAA,EAAAA,MACfllB,EAAOlgB,MAAM,CACX6uF,UAAW,CACTzuE,SAAU,eAEXmN,MAAKxtB,IACN,IAAI,UACF8uF,GACE9uF,EACC8uF,EAAU/7E,SAASg0D,IAUtB5mD,EAAOlgB,MAAM,CACX8uF,uBAAwB,CACtB1uE,SAAU4mD,KAEXz5C,MAAKrqB,IACN,IAAI,uBACF4rF,GACE5rF,EACC0O,MAAMC,QAAQi9E,GAUjBlpD,EAAS6gC,GAAiBqoB,IAR1B5uE,EAAOmnD,OAAO,CACZjnD,SAAU4mD,EACV1nE,KAAM,SACNc,KAAMwuF,IACLrhE,MAAK,KACNqY,EAAS6gC,GAAiBmoB,GAAuB,GAIrD,IACCnhE,OAAM,KAEPvN,EAAOmnD,OAAO,CACZjnD,SAAU4mD,EACV1nE,KAAM,SACNc,KAAMwuF,IACLrhE,MAAK,KACNqY,EAAS6gC,GAAiBmoB,GAAuB,GACjD,IApCJ1uE,EAAOmnD,OAAO,CACZjnD,SAAU4mD,EACV1nE,KAAM,SACNc,KAAMwuF,IACLrhE,MAAK,KACNqY,EAAS6gC,GAAiBmoB,GAAuB,GAiCrD,GACA,EKrCFD,GACAzpD,KACA,MAAOiqC,EAA4B4f,IAAiCpuF,EAAAA,EAAAA,UAAS,GACvE8hD,GAAgBhd,EAAAA,EAAAA,KAAYC,KAAWA,EAAMC,YAC7CqpD,GAAmBvpD,EAAAA,EAAAA,KAAYC,KAAWA,EAAMgM,GAAGsU,eACnDopB,GAAmB3pC,EAAAA,EAAAA,KAAYC,GAASA,EAAMgM,GAAGE,iBAAmBlM,EAAM2vB,iBAEhF,OAAoB3zD,EAAAA,cAAoBA,EAAAA,SAAgB,KAAMstF,EAAgCttF,EAAAA,cAAoButF,GAAkB,MAAqBvtF,EAAAA,cAAoBwtF,GAAS,CACpLh5C,iBAFuBA,IAAMk5B,GAAoB2f,EAA8B5f,EAA6B,KAG7FztE,EAAAA,cAAoB,MAAO,CAC1Cub,UAAWqyB,IAAGrD,GAAgB,CAC5B,CAACA,IAAyB+iD,KAE3BA,EAAgCttF,EAAAA,cAAoBm8C,GAAkB,MAAqBn8C,EAAAA,cAAoBgsD,GAAa,MAAoBhsD,EAAAA,cAAoB,MAAO,CAC5Kub,UAAWgvB,IACGvqC,EAAAA,cAAoBkkE,GAAa,MAAOnjB,GAA8B/gD,EAAAA,cAAoB8vC,GAAa,QAASw9C,GAAiCttF,EAAAA,cAAoBytF,GAAc,CACjMhgB,2BAA4BA,KACZztE,EAAAA,cAAoB2qF,GAAgB,MAAM,E,uBCd9D,OAzBkB,WAChB,IAAI+C,EACJ,IAEI1mF,EAFAg9B,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC7E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EAEnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,GACH,MAAO,IACFmmC,KACA6b,EAAO/hD,SAEd,KAAKD,EACL,KAAKA,EACH,MAAO,CAAC,EACV,KAAKA,EACL,KAAKA,EAEH,OADAmJ,EAAU64C,EAAO31C,KAA8C,QAAtCwjF,EAAkB7tC,EAAO/hD,eAAyC,IAApB4vF,OAA6B,EAASA,EAAgBxjF,IACtHlD,GAAWg9B,EAAMh9B,GAAW,IAC9Bg9B,EACH,CAACh9B,QAAU9H,GACT8kC,EACN,QACE,OAAOA,EAEb,ECZA,OAZyB,WACvB,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,KAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,GACH,OAAOgiD,EAAO/hD,QAChB,KAAKD,GACH,OAAO,KACT,QACE,OAAOmmC,EAEb,ECCA,OAZoB,WAClB,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,KAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,EACH,OAAOgiD,EAAO/hD,QAChB,KAAKD,EACH,OAAO,KACT,QACE,OAAOmmC,EAEb,ECOA,OAlBkB,WAChB,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,KAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,GACL,KAAKA,GACH,OAAO,KACT,KAAKA,EACH,OAAOmmC,IAAU6b,EAAO31C,GAAK,KAAO21C,EAAO31C,GAC7C,KAAKrM,EACH,OAAOmmC,IAAU6b,EAAO31C,GAAK,KAAO85B,EACtC,QACE,OAAOA,EAEb,ECjBA,MAAM4b,GAAe,CACnBnD,UAAU,EACVC,iBAAiB,EACjBC,YAAY,EACZb,aAAc,GACdc,iBAAiB,EACjBC,qBAAqB,EACrBC,gBAAgB,EAChBC,mBAAoB,cACpBC,gBAAgB,GAelB,OAbiB,WACf,IAAIhZ,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK49C,GAC5EC,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,OACRC,GACI,IACFmmC,KACA6b,EAAO/hD,SAGLkmC,CAEb,ECXA,OAZgB,WACd,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,KAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,OACRC,GACIgiD,EAAO/hD,QAAU,IACnB+hD,EAAO/hD,SACR,KAEGkmC,CAEb,ECKA,OAhBuB,WACrB,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,KAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,GACH,OAAOgiD,EAAO/hD,QAChB,KAAKD,GACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACL,KAAKA,EACH,OAAO,KACT,QACE,OAAOmmC,EAEb,ECFA,OAbuB,WACrB,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC7E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,OACRC,GACI,IACFmmC,EACH95B,GAAI21C,EAAO/hD,SAGNkmC,CAEb,ECodA,OA5dkB,WAChB,IAEItT,EACAi9D,EACAz9D,EAJA8T,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,KAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EAInD,OAAQ2gD,EAAOjiD,MACb,KAAKC,EAEH,cADOgiD,EAAO/hD,QAAQqJ,IACf04C,EAAO/hD,QAChB,KAAKD,EACH,OAAO,KACT,KAAKA,EAEH,OADAqyB,EAAU2vB,EAAO3vB,QACV,IACF8T,EACH9T,QAASA,EAAU,IACdA,GACD,KACJQ,QAAS,GACTV,aAAc,KACdW,cAAe,MAEnB,KAAK9yB,EACH,MAAO,IACFmmC,EACHhU,aAAc,IACT6vB,EAAO7vB,cAEZU,QAAS,GACTC,cAAe,MAEnB,KAAK9yB,GACH,MAAO,IACFmmC,EACHjzB,UAAW8uC,EAAO9uC,UAClB2f,QAASmvB,EAAOioC,YAAc9jD,EAAMtT,QAAU,IAGlD,KAAK7yB,GACH,MAAO,IACFmmC,EACH2/C,eAAgB,CACdz5E,GAAI21C,EAAO8jC,eAAez5E,GAC1B9C,KAAMy4C,EAAO8jC,eAAev8E,MAE9BspB,QAAS,IAEb,KAAK7yB,GACH,MAAO,IACFmmC,EACH09C,iBAAkB,CAChBx3E,GAAI21C,EAAO6hC,iBAAiBx3E,GAC5B9C,KAAMy4C,EAAO6hC,iBAAiBt6E,MAEhCspB,QAAS,IAEb,KAAK7yB,GACH,MAAO,IACFmmC,EACHn3B,QAASgzC,EAAOhzC,QAChB6jB,QAAS,IAEb,KAAK7yB,GACH,MAAO,IACFmmC,EACHtT,QAAS5Y,GAAqB+nC,EAAO9nC,SAAU8nC,EAAOtoC,WACtDnQ,KAAM,MAEV,KAAKvJ,EACH,MAAO,IACFmmC,EACH+5B,WAAYle,EAAOke,YAEvB,KAAKlgE,GACH,MAAO,IACFmmC,EACHv7B,WAAYo3C,EAAOp3C,WAAW/H,MAC9BgI,QAASm3C,EAAOuvB,WAAaprC,EAAMt7B,QAAU6P,GAAwByrB,EAAMt7B,UAE/E,KAAK7K,GACH,MAAO,IACFmmC,EACHt7B,QAASm3C,EAAOzyC,OAAOlD,KAAOJ,GAAkB8O,GAAqBorB,EAAMt7B,QAASm3C,EAAOzyC,QAAU,IAEzG,KAAKvP,GACH,MAAO,IACFmmC,EACHt7B,QAAqC,IAA1Bm3C,EAAO5sC,QAAQhR,QAAgB49C,EAAO5sC,QAAQ,GAAG/I,KAAOJ,GAAmB+O,GAAsBmrB,EAAMt7B,QAASm3C,EAAO5sC,SAAW,IAEjJ,KAAKpV,GACH,MAAO,IACFmmC,EACHwrC,mBAAoB3vB,EAAO2vB,oBAE/B,KAAK3xE,GACH,MAAO,IACFmmC,EACHv0B,kBAAmBowC,EAAO/hD,SAE9B,KAAKD,GACH,MAAO,IACFmmC,EACH1wB,UAAWusC,EAAOvsC,WAEtB,KAAKzV,GACH,MAAO,IACFmmC,EACHzwB,QAASssC,EAAOtsC,SAEpB,KAAK1V,GAEH,GAA+B,YAA3BgiD,EAAOlyB,gBAA+B,CACxC,MAAMggE,EAAW,IACZ3pD,GAGL,cADO2pD,EAAShgE,gBACTggE,CACT,CACA,MAAO,IACF3pD,EACHrW,gBAAiBkyB,EAAOlyB,iBAE5B,KAAK9vB,GACH,MAAO,IACFmmC,EACHt7B,QAAS,IAAKs7B,EAAMt7B,SAAW,GAAKm3C,EAAO3wC,QAAU,CACnDqI,UAAW,QAGjB,KAAK1Z,GACH,MAAO,IACFmmC,EACHt7B,QAASuQ,GAA2B+qB,EAAMt7B,QAASm3C,EAAO3mC,QAE9D,KAAKrb,GACH,MAAO,IACFmmC,EACHt7B,QAAS0Q,GAAyB4qB,EAAMt7B,QAASm3C,EAAO3mC,MAAO2mC,EAAO3wC,SAE1E,KAAKrR,GACH,MAAO,IACFmmC,EACHtT,QAAS,IAAIsT,EAAMtT,QAASmvB,EAAO3wC,QAAU,CAC3CqI,UAAW,KACXnQ,KAAM,KACN8H,OAAQ,QAGd,KAAKrR,GAGH,OAFA6yB,EAAUsT,EAAMtT,QAAQxhB,QAAO+3C,QAAkB/nD,IAAb+nD,EAAE/3C,SAEjCwhB,GAAYA,EAAQmvB,EAAO3mC,OAGzB,IACF8qB,EACHtT,QAAS,IAAIsT,EAAMtT,QAAQxhB,QAAO+3C,QAAkB/nD,IAAb+nD,EAAE/3C,YAA0BwhB,EAAQxhB,QAAO,CAAC+3C,EAAG9vC,IAAMA,IAAM0oC,EAAO3mC,UAJlG8qB,EAMX,KAAKnmC,GAGH,OAFA6yB,EAAUsT,EAAMtT,QAAQxhB,QAAO+3C,QAAkB/nD,IAAb+nD,EAAE/3C,SAEjCwhB,GAAYA,EAAQmvB,EAAO3mC,QAGhCwX,EAAQmvB,EAAO3mC,OAAS2mC,EAAO3wC,OACxB,IACF80B,EACHtT,QAAS,IAAIsT,EAAMtT,QAAQxhB,QAAO+3C,QAAkB/nD,IAAb+nD,EAAE/3C,YAA0BwhB,KAL5DsT,EAOX,KAAKnmC,GACH,MAAO,IACFmmC,EACHrT,cAAekvB,EAAO9nC,UAI1B,KAAKla,GAcH,OAbA8vF,EAAW,IACN3pD,EACHrT,cAAe,IACVqT,EAAMrT,cACTxE,UAAW,IACN6X,EAAMrT,cAAcxE,UACvBnb,QAAS6uC,EAAO7uC,kBAIf28E,EAAS55D,cACT45D,EAAS7nE,eACT6nE,EAASviE,WACTuiE,EACT,KAAK9vF,GAcH,OAbA8vF,EAAW,IACN3pD,EACHrT,cAAe,IACVqT,EAAMrT,cACTjf,OAAQ,IACHsyB,EAAMrT,cAAcjf,OACvB,CAACmuC,EAAOn/C,OAAQm/C,EAAO53C,gBAItB0lF,EAAS55D,cACT45D,EAAS7nE,eACT6nE,EAASviE,WACTuiE,EACT,KAAK9vF,GAUH,OATA8vF,EAAW,IACN3pD,EACHzH,gBAAiBsjB,EAAO/hD,SAEtB+hD,EAAO/hD,UAAYoH,IAAuB8+B,EAAMjQ,SAAWvtB,YACtDmnF,EAAS55D,cACT45D,EAASviE,kBACTuiE,EAAS7nE,SAEX6nE,EACT,KAAK9vF,GAeH,OAdA8vF,EAAW,IACN3pD,EACHjQ,OAAQ8rB,EAAO9rB,QAEbiQ,EAAMjQ,SAAWvtB,IAAgC,CAACF,GAAgCC,IAA6B6K,SAASyuC,EAAO9rB,iBAC1H45D,EAASviE,kBACTuiE,EAAS7nE,SAEd+5B,EAAO9rB,SAAW1tB,WACbsnF,EAAS11E,UAEd01E,EAASh9D,sBACJg9D,EAASh9D,cAAcxE,UAEzBwhE,EACT,KAAK9vF,GASH,OARA8vF,EAAW,IACN3pD,EACH5Y,WAAYy0B,EAAOz0B,WACnBtF,QAAS+5B,EAAOz0B,WAAWnpB,QAEzB0rF,EAASh9D,sBACJg9D,EAASh9D,cAAcxE,UAEzBwhE,EACT,KAAK9vF,GAWH,OAVA8vF,EAAW,IACN3pD,GAID6b,EAAOlhC,SAAWyP,UACbu/D,EAAS/8D,YAEhB+8D,EAAS/8D,YAAcivB,EAAOlhC,OAEzBgvE,EACT,KAAK9vF,GACH,MAAO,IACFmmC,EACHnT,qBAAsBgvB,EAAOnZ,SAEjC,KAAK7oC,GASH,OARA8vF,EAAW,IACN3pD,GAED6b,EAAOnZ,UAAY3/B,UACd4mF,EAAS78D,wBAEhB68D,EAAS78D,wBAA0B+uB,EAAOnZ,QAErCinD,EACT,KAAK9vF,GACH,MAAO,IACFmmC,EACHvN,gBAAiBopB,EAAOhJ,SAE5B,KAAKh5C,GACH,MAAO,IACFmmC,EACH9O,iBAAkB7X,SAASwiC,EAAO92B,OAAQ,KAE9C,KAAKlrB,GACH,MAAO,IACFmmC,EACH/O,gBAAiB4qB,EAAO53C,OAE5B,KAAKpK,GACH,MAAO,IACFmmC,EACHrC,kBAAmBke,EAAO53C,OAE9B,KAAKpK,GACH,MAAO,IACFmmC,EACHjC,sBAAuB8d,EAAO53C,OAElC,KAAKpK,GACH,MAAO,IACFmmC,EACHnC,mBAAoBxkB,SAASwiC,EAAO92B,OAAQ,KAEhD,KAAKlrB,GACH,MAAO,IACFmmC,EACHhc,sBAAuB63B,EAAO53C,OAElC,KAAKpK,GACH,MAAO,IACFmmC,EACH1K,yBAA0BumB,EAAOvmB,0BAErC,KAAKz7B,GACH,MAAO,IACFmmC,EACHv1B,KAAM,CAACoxC,EAAO/hD,UAElB,KAAKD,GACH,CACE,MAAM,GACJqM,EAAE,KACF9C,GACEy4C,EAAO/hD,QACX,MAAO,IACFkmC,EACHva,aAAcvf,EACdwf,wBAAyBxf,IAAOnD,GAAOK,EAAO,KAC9CsvB,WAAYxsB,IAAOnD,GAAOX,GAAY,KAE1C,CAGF,KAAKvI,GACH,MAAO,IACFmmC,EACHv1B,KAAM0J,GAAqB6rB,EAAMv1B,KAAMoxC,EAAO31C,GAAI21C,EAAO/wC,OAE7D,KAAKjR,GACH,MAAO,IACFmmC,EACHtE,8BAA+BmgB,EAAO/hD,SAE1C,KAAKD,GACH,MAAO,IACFmmC,EACH57B,KAAMy3C,EAAO/hD,SAEjB,KAAKD,GACH,MAAO,IACFmmC,EACHh8B,MAAO,IACFg8B,EAAMh8B,SACN63C,EAAO/hD,UAGhB,KAAKD,GACH,MAAO,IACFmmC,EACH90B,OAAQ2wC,EAAO3wC,QAEnB,KAAKrR,GACH,MAAO,IACFmmC,EACH80B,OAAQjZ,EAAOyK,WAEnB,KAAKzsD,GACH,MAAO,IACFmmC,EACH65B,cAAehe,EAAOggC,UAE1B,KAAKhiF,GACH,MAAO,IACFmmC,EACH00B,eAAgB7Y,EAAO53C,OAE3B,KAAKpK,GACH,MAAO,IACFmmC,EACHu0B,cAAe1Y,EAAO5G,MAE1B,KAAKp7C,GACH,MAAO,IACFmmC,EACHy0B,gBAAiB5Y,EAAOp3B,QAE5B,KAAK5qB,GACH,MAAO,IACFmmC,EACHw0B,eAAgB3Y,EAAO73C,OAE3B,KAAKnK,GACH,MAAO,IACFmmC,EACHtN,WAAYmpB,EAAO92B,QAEvB,KAAKlrB,GACH,MAAO,IACFmmC,EACH/b,UAAW5K,SAASwiC,EAAO92B,OAAQ,KAEvC,KAAKlrB,GACH,MAAO,IACFmmC,EACH1H,WAAYjf,SAASwiC,EAAO92B,OAAQ,KAExC,KAAKlrB,GACH,MAAO,IACFmmC,EACH/rB,UAAW4nC,EAAO5nC,WAEtB,KAAKpa,GACH,MAAO,IACFmmC,EACHlG,kBAAmB,IACd+hB,EAAO/hB,mBAEZ5N,QAAS,KACTF,aAAc,KACdgP,iBAAkB,KAClBiD,2BAA4B,MAEhC,KAAKpkC,GACH,MAAO,IACFmmC,EACHhF,iBAAkB6gB,EAAO7gB,kBAE7B,KAAKnhC,GACH,MAAO,IACFmmC,EACH/B,2BAA4B4d,EAAO/hD,SAEvC,KAAKD,GAWH,OAVA8vF,EAAW,IACN3pD,GAIkB,QAAnB6b,EAAO/hD,eACF6vF,EAAS1sD,cAEhB0sD,EAAS1sD,cAAgB4e,EAAO/hD,QAE3B6vF,EACT,KAAK9vF,GACH,MAAO,IACFmmC,EACH9C,SAAU2e,EAAO/hD,SAErB,KAAKD,GAWH,OAVA8vF,EAAW,IACN3pD,GAIA6b,EAAO/hD,QAGV6vF,EAASnxD,YAAcqjB,EAAO/hD,eAFvB6vF,EAASnxD,YAIXmxD,EACT,KAAK9vF,GACH,MAAO,IACFmmC,EACH52B,OAAQyyC,EAAO/hD,SAEnB,KAAKD,GACH,MAAO,IACFmmC,EACH5K,aAAc,IACT4K,EAAM5K,gBACNymB,EAAO/hD,UAGhB,QACE,OAAOkmC,EAEb,ECjdA,OAd4B,WAC1B,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,GAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,GACH,OAAOgiD,EAAO/hD,QAChB,KAAKD,GACH,MAAO,IAAImmC,EAAO6b,EAAO/hD,SAC3B,KAAKD,GACH,OAAOmmC,EAAM90B,QAAOC,GAAQA,IAAS0wC,EAAO/hD,UAC9C,QACE,OAAOkmC,EAEb,ECIA,OAjBuB,WACrB,IAAIA,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK,KAC5E69C,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,EACH,OAAOgiD,EAAO/hD,QAChB,KAAKD,EACL,KAAKA,GACL,KAAKA,EACL,KAAKA,GACL,KAAKA,EACL,KAAKA,EACH,OAAO,KACT,QACE,OAAOmmC,EAEb,EChBA,MAAM4b,GAAe,CACnBpkC,MAAyB,kBAAX2pB,OAAsBA,OAAOM,WAAa,KACxDhqB,OAA0B,kBAAX0pB,OAAsBA,OAAOK,YAAc,KAC1DyK,iBAAiB,EACjBC,gBAAgB,EAChBH,gBAAiB,IACjB69C,gBAAgB,EAChBtpC,cAAc,EACdqe,eAAe,GA8DjB,OA5DW,WACT,IAAI3+B,EAAQhiC,UAAUC,OAAS,QAAsB/C,IAAjB8C,UAAU,GAAmBA,UAAU,GAAK49C,GAC5EC,EAAS79C,UAAUC,OAAS,EAAID,UAAU,QAAK9C,EACnD,OAAQ2gD,EAAOjiD,MACb,KAAKC,EACH,MAAO,IACFmmC,EACHiM,iBAAiB,GAErB,KAAKpyC,EACH,MAAO,IACFmmC,EACHiM,iBAAiB,GAErB,KAAKpyC,EACL,KAAKA,EACL,KAAKA,GACH,MAAO,IACFmmC,EACHkM,gBAAgB,GAEpB,KAAKryC,EACL,KAAKA,EACL,KAAKA,GACL,KAAKA,EACL,KAAKA,EACH,MAAO,IACFmmC,EACHkM,gBAAgB,GAEpB,KAAKryC,GACH,MAAO,IACFmmC,EACHsgB,cAAc,GAElB,KAAKzmD,GACH,MAAO,IACFmmC,EACHkM,gBAAgB,EAChBoU,cAAc,GAElB,KAAKzmD,EACH,MAAO,IACFmmC,EACH+L,gBAAiB8P,EAAOpkC,QAE5B,KAAK5d,EACH,MAAO,IACFmmC,EACH2+B,eAAe,GAEnB,KAAK9kE,EACH,MAAO,IACFmmC,EACH2+B,eAAe,GAEnB,QACE,OAAO3+B,EAEb,ECxDA,IAAe6pD,EAAAA,GAAAA,IAAgB,CAC7B/lF,aAAY,GACZ8iF,iBAAgB,GAChBjhB,YAAW,GACX1lC,UAAS,GACTgZ,SAAQ,GACR8mB,eAAc,GACdgM,UAAS,GACTtK,aAAY,GACZx5D,IAAG,GACH0nD,eAAc,GACd3jB,GAAE,GACF5gB,QAAO,GACP24C,eACF,KCzBA,MAAM+lB,GAA2GC,GAAAA,GAC3GC,IAAQC,EAAAA,GAAAA,IAAYC,GAASJ,IAAgBK,EAAAA,GAAAA,IAAgBC,GAAAA,KAC/DjpD,OAAOkpD,UACTlpD,OAAO6oD,MAAQA,IAEjB,UCNO,MCMMM,GAAa,CACxB1qD,YAAa,CACXllB,SAAU,KACVkJ,OAAQ,CACNxZ,OAAQ,sGAGZ8F,eAAgB,CACdwK,SAAU,iBACVkJ,OAAQ,CACNhY,IAAKs1D,KAGTomB,kB7WyEuC,CACvC5sE,SAAU,oBACVkJ,OAAQ,CACNxZ,OAAQ,4HACRie,QAAQ,I6W5EVkiE,WAAY,CACV7vE,SAAU,cACVkJ,OAAQ,CACNxZ,OAAQ,yBAIRogF,GAAyBlD,IAC7B,MAAMmD,EAAuBnD,EAAkBp8E,QAAOlR,GAASA,EAAMksB,mBAAqB5lB,KAA4B4K,QAAOlR,GAASw6B,GAAqBpnB,SAASpT,EAAM46B,cAAa3sB,IAAI0sB,IAA4BzpB,QAAOg3B,GAAWulD,GAAAA,GAAAA,SAAoBvlD,EAAQvoC,OAAOC,QAC5Q,MD7BwC,CAAC,CACzCI,MAAOwF,GACP5F,KAAMyC,GAAAA,EAAAA,EAAO,YACb8G,IAAK,sBACLgB,QAAS,IACR,CACDnK,MAAOuF,GACP3F,KAAMyC,GAAAA,EAAAA,EAAO,UACb8G,IAAK,oBACLgB,QAAS,GACTsuB,iBAAiB,GAChB,CACDz4B,MAAO6F,GACPjG,KAAMyC,GAAAA,EAAAA,EAAO,oBACb8G,IAAK,6BACLgB,QAAS,IACR,CACDnK,MAAOyF,GACP7F,KAAMyC,GAAAA,EAAAA,EAAO,cACb8G,IAAK,wBACLgB,QAAS,GACR,CACDnK,MAAO0F,GACP9F,KAAMyC,GAAAA,EAAAA,EAAO,aACb8G,IAAK,sBACLgB,QAAS,ICIqBsO,OAAOg4E,EAAqB,EAE/CC,GAA6BhvF,UACxC,IAAI,YACFkkC,EAAW,eACX1vB,EAAc,WACdq6E,EAAU,kBACVjD,GACEjtF,EACJ,MAAO,CACLulC,YAAa,CACX15B,GAAI05B,EAAY15B,GAChB9C,KAAMw8B,EAAYx8B,KAClBunF,SAAU/qD,EAAY+qD,SACtBxoB,YAAa,IAAIpwD,IAAI6tB,EAAYuiC,aACjCv5C,2BAA4BgX,EAAYgrD,SAAShiE,4BAEnD1e,aAAkE,SAApD01B,EAAYgrD,SAAShiE,2BAAwC,cAAgB,mBAC3F1Y,eAAgB,IACX+wD,MACA/wD,EACH9B,cAAe6B,GAAiBC,IAElCzB,gBAAiB,CACfkJ,OAAQioB,EAAYgrD,SAASC,YAC7Bva,SAAUia,EAAWja,SACrBwa,WAAYP,EAAWO,YAEzBxuC,eAAgB+qC,GAAe,CAC7BC,kBAAmBA,EAAkBA,kBACrCp3E,mBAEFyyD,oBAAqB6nB,GAAuBlD,EAAkBA,mBAC/D,E,gysyBCjBH,MAAMyD,GAAY,UAClB1uF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWC,IACnC3uF,GAAAA,EAAAA,aAAkB,QAAS0uF,GAAWE,IACtC5uF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWG,IACnC7uF,GAAAA,EAAAA,aAAkB,MAAO0uF,GAAWI,IACpC9uF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWK,IACnC/uF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWM,IACnChvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWO,IACnCjvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWQ,IACnClvF,GAAAA,EAAAA,aAAkB,SAAU0uF,GAAWS,IACvCnvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWU,IACnCpvF,GAAAA,EAAAA,aAAkB,QAAS0uF,GAAWW,IACtCrvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWY,IACnCtvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWa,IACnCvvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWc,IACnCxvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWe,IACnCzvF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWgB,IACnC1vF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWiB,IACnC3vF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWkB,IACnC5vF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWmB,IACnC7vF,GAAAA,EAAAA,aAAkB,MAAO0uF,GAAWoB,IACpC9vF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWqB,IACnC/vF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWsB,IACnChwF,GAAAA,EAAAA,aAAkB,QAAS0uF,GAAWuB,IACtCjwF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWwB,IACnClwF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWyB,IACnCnwF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAW0B,IACnCpwF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAW2B,IACnCrwF,GAAAA,EAAAA,aAAkB,MAAO0uF,GAAW4B,IACpCtwF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAW6B,IACnCvwF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAW8B,IACnCxwF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAW+B,IACnCzwF,GAAAA,EAAAA,aAAkB,UAAW0uF,GAAWgC,IACxC1wF,GAAAA,EAAAA,aAAkB,UAAW0uF,GAAWiC,IACxC3wF,GAAAA,EAAAA,aAAkB,aAAc0uF,GAAWkC,IAC3C5wF,GAAAA,EAAAA,aAAkB,aAAc0uF,GAAWmC,IAC3C7wF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWoC,IACnC9wF,GAAAA,EAAAA,aAAkB,KAAM0uF,GAAWqC,IACnC/wF,GAAAA,EAAAA,aAAkB,QAAS0uF,GAAWsC,ICtEtC5mC,IAAAA,SAAqDA,IAAAA,OAAAA,MA0CrD,OAhBmB6mC,KAzBMC,MAEvB,MAAMC,EAAcvgD,EAAAA,EAAAA,MAAkB9L,OAAOoM,SAASL,OAAQ,CAC5DC,eAAe,KAEVsgD,GAAQtsD,OAAOoM,SAAS8X,KAAKpvC,MAAM,KAC1C,GAAIu3E,EAAYtnF,GAAI,CAKlB,MAAM4mC,EAAmB0gD,EAAY1gD,kBAAoB0gD,EAAYE,iBAC/DC,EAA4B7gD,EAAoB,qBAAoBA,IAAqB,GAG/F3L,OAAOsL,QAAQmhD,aAAa,CAAC,EAAG,GAAK,GAAEH,MAASD,EAAYtnF,KAAKynF,KACjElhD,GAAAA,QAAiB,IAAG+gD,EAAYtnF,KAAKynF,IACvC,MAAmD,IAAxCH,EAAYK,0BAIrB1sD,OAAOsL,QAAQmhD,aAAa,CAAC,EAAG,GAAK,GAAEH,8BACvChhD,GAAAA,QAAgB,4BAClB,EAGA8gD,GACoBvxF,EAAAA,cAAoB8xF,EAAAA,GAAe,CACrD9D,MAAOA,IACOhuF,EAAAA,cAAoB+xF,EAAAA,GAAmB,CACrDhD,U7P1CoC,a6P2CtB/uF,EAAAA,cAAoB5B,GAAoB,CACtDE,MAAOgwF,GACP/vF,mBAAoBmwF,IACN1uF,EAAAA,cAAoBgyF,GAA0B,KAAmBhyF,EAAAA,cAAoBiyF,GAAkB,KAAmBjyF,EAAAA,cAAoBgqE,EAAAA,EAAc,CAC1KzjD,QAAQ,EACR2rE,YAAY,EACZjoB,SAAS,EACTC,OAAO,IACQlqE,EAAAA,cAAoB8sF,GAAK,W","sources":["D2App/constants/actionTypes.js","D2App/actions/layers.js","D2App/components/cachedDataProvider/CachedDataProvider.js","D2App/constants/alerts.js","D2App/components/loaders/useLoaderAlerts.js","D2App/constants/layers.js","D2App/constants/earthEngineLayers/buildings_GOOGLE.js","D2App/constants/earthEngineLayers/elevation_SRTM.js","D2App/constants/earthEngineLayers/landcover_MCD12Q1.js","D2App/constants/earthEngineLayers/legacy/buildings_GOOGLE.js","D2App/constants/earthEngineLayers/legacy/nighttime_DMSP-OLS.js","D2App/constants/earthEngineLayers/legacy/population_WorldPop.js","D2App/constants/earthEngineLayers/legacy/population_WorldPop_100m.js","D2App/constants/periods.js","D2App/constants/earthEngineLayers/legacy/precipitation_pentad_CHIRPS.js","D2App/constants/earthEngineLayers/legacy/temperature_MOD11A2v061.js","D2App/constants/earthEngineLayers/population_age_sex_WorldPop.js","D2App/constants/earthEngineLayers/population_total_WorldPop.js","D2App/constants/earthEngineLayers/precipitation_monthly_ERA5-Land.js","D2App/constants/earthEngineLayers/temperature_monthly_ERA5-Land.js","D2App/constants/earthEngineLayers/index.js","D2App/constants/dimension.js","D2App/constants/valueTypes.js","D2App/util/helpers.js","D2App/util/periods.js","D2App/util/uid.js","D2App/util/analytics.js","D2App/components/map/mapLocale.js","D2App/components/map/MapApi.js","D2App/util/time.js","D2App/util/earthEngine.js","D2App/util/map.js","D2App/util/numbers.js","D2App/constants/colors.js","D2App/constants/colorbrewer.js","D2App/util/colors.js","D2App/util/orgUnits.js","D2App/util/getMigratedMapConfig.js","D2App/util/requests.js","D2App/loaders/earthEngineLoader.js","D2App/constants/eventStatuses.js","D2App/util/geojson.js","D2App/util/event.js","D2App/util/coordinatesName.js","D2App/util/classify.js","D2App/util/legend.js","D2App/util/styleByDataItem.js","D2App/loaders/eventLoader.js","D2App/util/external.js","D2App/loaders/externalLoader.js","D2App/loaders/facilityLoader.js","D2App/loaders/geoJsonUrlLoader.js","D2App/loaders/orgUnitLoader.js","D2App/loaders/thematicLoader.js","D2App/constants/programStatuses.js","D2App/util/teiRelationshipsParser.js","D2App/loaders/trackedEntityLoader.js","D2App/hooks/useLayersLoader.js","D2App/actions/dataTable.js","D2App/hooks/useKeyDown.js","D2App/components/WindowDimensionsProvider.js","D2App/actions/feature.js","D2App/actions/orgUnits.js","D2App/components/datatable/FilterInput.js","D2App/actions/dataFilters.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/DataTable.module.css?76ec","D2App/util/filter.js","D2App/components/datatable/useTableData.js","D2App/components/datatable/DataTable.js","D2App/components/datatable/ErrorBoundary.js","D2App/components/core/icons.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/ResizeHandle.module.css?98ea","D2App/components/datatable/ResizeHandle.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/BottomPanel.module.css?541b","D2App/components/datatable/BottomPanel.js","D2App/constants/layout.js","D2App/util/history.js","D2App/util/setHeaderbarVisible.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadMenubar.module.css?9b80","D2App/components/download/DownloadMenubar.js","D2App/actions/download.js","D2App/util/dataDownload.js","D2App/util/export-image.js","D2App/actions/map.js","D2App/util/favorites.js","D2App/components/app/FileMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Drawer.module.css?1c01","D2App/components/core/Drawer.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Checkbox.module.css?81c6","D2App/components/core/Checkbox.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorButton.module.css?efe6","D2App/components/core/ColorButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorPicker.module.css?df28","D2App/components/core/ColorPicker.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorScale.module.css?53ca","D2App/components/core/ColorScale.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorScaleSelect.module.css?0787","D2App/components/core/ColorScaleSelect.js","D2App/components/core/ConditionalWrapper.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/CustomRadioLabel.module.css?345e","D2App/components/core/CustomRadioLabel.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/DatePicker.module.css?517f","D2App/components/core/DatePicker.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/InputField.module.css?d4da","D2App/components/core/NumberField.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/FontStyle.module.css?47fc","D2App/components/core/FontStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Help.module.css?8a16","D2App/components/core/Help.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/IconButton.module.css?a7af","D2App/components/core/IconButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ImageSelect.module.css?360c","D2App/components/core/ImageSelect.js","D2App/components/core/LabelDisplayOptions.js","D2App/components/core/MenuButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/RadioGroup.module.css?3082","D2App/components/core/RadioGroup.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Radio.module.css?ea6a","D2App/components/core/Radio.js","D2App/components/core/SelectField.js","D2App/components/core/Tabs.js","D2App/components/core/Tab.js","D2App/components/core/TextField.js","D2App/components/map/MapLoadingMask.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/LegendLayers.module.css?0b90","D2App/components/download/LegendLayers.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/NorthArrowPosition.module.css?6e31","D2App/components/download/NorthArrowPosition.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadSettings.module.css?71ed","D2App/components/download/DownloadSettings.js","D2App/actions/ui.js","D2App/constants/basemaps.js","D2App/reducers/map.js","D2App/hooks/useBasemapConfig.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/SortableHandle.module.css?6182","D2App/components/layers/SortableHandle.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayerCard.module.css?d7f6","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/LayerToolbarMore.module.css?6050","D2App/components/layers/toolbar/LayerToolbarMoreMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/OpacitySlider.module.css?88b0","D2App/components/layers/toolbar/OpacitySlider.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/LayerToolbar.module.css?9f24","D2App/components/layers/toolbar/LayerToolbar.js","D2App/components/layers/LayerCard.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/basemaps/styles/Basemap.module.css?c36c","D2App/components/layers/basemaps/Basemap.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/basemaps/styles/BasemapList.module.css?e0bc","D2App/components/layers/basemaps/BasemapList.js","D2App/components/layers/basemaps/BasemapCard.js","D2App/actions/basemap.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayersToggle.module.css?991c","D2App/components/layers/LayersToggle.js","D2App/util/analyticalObject.js","D2App/components/legend/Bubble.js","D2App/components/legend/Bubbles.js","D2App/util/bubbles.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/LegendItemRange.module.css?8d27","D2App/components/legend/LegendItemRange.js","D2App/components/legend/LineSymbol.js","D2App/components/legend/PolygonSymbol.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/LegendItem.module.css?1f16","D2App/components/legend/LegendItem.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/Legend.module.css?d865","D2App/components/legend/Legend.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/download/styles/DataDownloadDialogActions.module.css?ee09","D2App/components/layers/download/DataDownloadDialogActions.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/download/styles/DataDownloadDialog.module.css?4f52","D2App/components/layers/download/DataDownloadDialog.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/OverlayCard.module.css?1a36","D2App/components/layers/overlays/OverlayCard.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayersPanel.module.css?3122","D2App/components/layers/LayersPanel.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadLegend.module.css?2308","D2App/components/download/DownloadLegend.js","D2App/components/map/layers/BasemapLayer.js","D2App/components/download/OverviewMapOutline.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/OverviewMap.module.css?f9e8","D2App/components/download/OverviewMap.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadMapInfo.module.css?83f5","D2App/components/download/DownloadMapInfo.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/NorthArrow.module.css?d773","D2App/components/download/NorthArrow.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapName.module.css?be08","D2App/components/map/MapName.js","D2App/constants/mapControls.js","D2App/util/mapControls.js","webpack://@dhis2/app-shell/./src/D2App/components/map/layers/styles/Alert.module.css?d875","D2App/components/map/layers/Alert.js","D2App/components/map/layers/Layer.js","D2App/constants/aggregationTypes.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitButton.module.css?f02c","D2App/components/orgunits/OrgUnitButton.js","D2App/components/map/Popup.js","webpack://@dhis2/app-shell/./src/D2App/components/map/layers/styles/Popup.module.css?633e","webpack://@dhis2/app-shell/./src/D2App/components/map/layers/earthEngine/styles/EarthEnginePopup.module.css?f052","D2App/components/map/layers/earthEngine/EarthEnginePopup.js","D2App/components/map/layers/earthEngine/EarthEngineLayer.js","D2App/components/map/layers/EventPopup.js","D2App/components/map/layers/EventLayer.js","D2App/util/labels.js","D2App/components/map/layers/FacilityLayer.js","D2App/components/map/layers/GeoJsonLayer.js","D2App/components/map/layers/OrgUnitLayer.js","D2App/util/timeTicks.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/Timeline.module.css?1955","D2App/components/periods/Timeline.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/PeriodName.module.css?a0ba","D2App/components/map/PeriodName.js","D2App/components/map/layers/ThematicLayer.js","D2App/util/trackedEntity.js","D2App/components/map/layers/TrackedEntityPopup.js","D2App/components/map/layers/TrackedEntityLayer.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/Map.module.css?c12a","D2App/components/map/Map.js","D2App/components/map/layers/ExternalLayer.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapItem.module.css?1a5e","D2App/components/map/MapItem.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/SplitView.module.css?a876","D2App/components/map/SplitView.js","D2App/components/map/MapView.js","D2App/components/map/MapContainer.js","D2App/actions/aggregations.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapPosition.module.css?ca45","D2App/components/map/MapPosition.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadButton.module.css?956b","D2App/components/download/DownloadButton.js","D2App/components/interpretations/InterpretationsToggle.js","D2App/actions/layerSources.js","D2App/constants/settings.js","D2App/hooks/useManagedLayerSourcesStore.js","webpack://@dhis2/app-shell/./src/D2App/components/layerSources/styles/LayerSource.module.css?37e8","D2App/components/layerSources/LayerSource.js","webpack://@dhis2/app-shell/./src/D2App/components/layerSources/styles/ManageLayerSourcesModal.module.css?e340","D2App/components/layerSources/ManageLayerSourcesModal.js","webpack://@dhis2/app-shell/./src/D2App/components/layerSources/styles/ManageLayerSourcesButton.module.css?aacc","D2App/components/layerSources/ManageLayerSourcesButton.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/Layer.module.css?8e48","D2App/components/layers/overlays/Layer.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/LayerList.module.css?b312","D2App/components/layers/overlays/LayerList.js","D2App/components/layers/overlays/AddLayerPopover.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/AddLayerButton.module.css?d3e0","D2App/components/layers/overlays/AddLayerButton.js","D2App/components/app/AppMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/feature/styles/FeatureProfile.module.css?6b21","D2App/components/feature/FeatureProfile.js","webpack://@dhis2/app-shell/./src/D2App/components/plugin/styles/ContextMenu.module.css?44df","D2App/components/plugin/ContextMenu.js","D2App/components/plugin/LayerLoader.js","D2App/components/plugin/LegendLayer.js","D2App/components/plugin/Legend.js","webpack://@dhis2/app-shell/./src/D2App/components/plugin/styles/Map.module.css?b338","D2App/components/plugin/Map.js","D2App/util/pluginHelper.js","webpack://@dhis2/app-shell/./src/D2App/components/interpretations/styles/InterpretationMap.module.css?a079","D2App/components/interpretations/InterpretationMap.js","D2App/components/interpretations/InterpretationsPanel.js","D2App/components/interpretations/Interpretations.js","D2App/hooks/usePrevious.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/PeriodSelect.module.css?36c8","D2App/components/periods/PeriodSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitData.module.css?43a7","D2App/components/orgunits/OrgUnitData.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ListItem.module.css?ab97","D2App/components/core/ListItem.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitInfo.module.css?de1e","D2App/components/orgunits/OrgUnitInfo.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitProfile.module.css?26b3","D2App/components/orgunits/OrgUnitProfile.js","webpack://@dhis2/app-shell/./src/D2App/components/app/styles/DetailsPanel.module.css?1c00","D2App/components/app/DetailsPanel.js","D2App/components/OrgUnitsProvider.js","D2App/actions/layerEdit.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/AssociatedGeometrySelect.module.css?87db","D2App/components/orgunits/AssociatedGeometrySelect.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitSelectMode.module.css?b186","D2App/components/orgunits/OrgUnitSelectMode.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitSelect.module.css?7aff","D2App/components/orgunits/OrgUnitSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/styles/LayerDialog.module.css?f8dd","D2App/components/edit/earthEngine/AggregationSelect.js","D2App/components/edit/earthEngine/BandSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/earthEngine/styles/PeriodSelect.module.css?e39b","D2App/components/edit/earthEngine/PeriodSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/shared/styles/BufferRadius.module.css?1852","D2App/components/edit/shared/BufferRadius.js","D2App/components/edit/earthEngine/LegendPreview.js","D2App/components/edit/earthEngine/StyleSelect.js","D2App/components/edit/earthEngine/StyleTab.js","D2App/components/edit/earthEngine/EarthEngineDialog.js","D2App/util/date.js","D2App/hooks/useProgramStageDataElements.js","D2App/hooks/useProgramTrackedEntityAttributes.js","D2App/hooks/useEventDataItems.js","D2App/components/dataItem/CoordinateField.js","webpack://@dhis2/app-shell/./src/D2App/components/filter/styles/RemoveFilter.module.css?e69f","D2App/components/filter/RemoveFilter.js","D2App/hooks/useOptionSet.js","D2App/components/optionSet/OptionSetSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterSelect.module.css?2d11","D2App/components/dataItem/filter/FilterSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterRow.module.css?a2c3","D2App/components/dataItem/filter/FilterRow.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterGroup.module.css?bedd","D2App/components/dataItem/filter/FilterGroup.js","webpack://@dhis2/app-shell/./src/D2App/components/classification/styles/Classification.module.css?2828","D2App/components/classification/Classification.js","D2App/components/classification/LegendSetSelect.js","D2App/components/classification/LegendTypeSelect.js","D2App/components/classification/SingleColor.js","D2App/components/classification/NumericLegendStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/optionSet/styles/OptionStyle.module.css?2060","D2App/components/optionSet/OptionStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/optionSet/styles/OptionSetStyle.module.css?352a","D2App/components/optionSet/OptionSetStyle.js","D2App/components/dataItem/BooleanStyle.js","D2App/components/dataItem/DataItemStyle.js","D2App/components/dataItem/StyleByDataItem.js","D2App/components/periods/RelativePeriodSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/StartEndDate.module.css?abc5","D2App/components/periods/StartEndDate.js","D2App/components/program/ProgramSelect.js","D2App/components/program/ProgramStageSelect.js","D2App/components/edit/event/EventStatusSelect.js","D2App/components/edit/event/EventDialog.js","D2App/components/groupSet/GroupSetSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/groupSet/styles/GroupStyle.module.css?34d9","D2App/components/groupSet/GroupStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/groupSet/styles/GroupSetStyle.module.css?90af","D2App/components/groupSet/GroupSetStyle.js","D2App/components/groupSet/StyleByGroupSet.js","D2App/components/edit/shared/Labels.js","D2App/components/edit/FacilityDialog.js","D2App/components/edit/shared/FeatureStyle.js","D2App/components/edit/geoJson/GeoJsonDialog.js","D2App/components/edit/orgUnit/OrgUnitDialog.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/styles/LayerEdit.module.css?c2be","webpack://@dhis2/app-shell/./src/D2App/components/calculations/styles/CalculationSelect.module.css?7b31","D2App/components/calculations/CalculationSelect.js","D2App/components/dataElement/DataElementGroupSelect.js","D2App/components/dataElement/DataElementOperandSelect.js","D2App/components/dataElement/DataElementSelect.js","D2App/components/dataElement/TotalsDetailsSelect.js","D2App/components/dataItem/EventDataItemSelect.js","D2App/components/dataSets/DataSetsSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionItemsSelect.module.css?a59e","D2App/components/dimensions/DimensionItemsSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionSelect.module.css?5588","D2App/components/dimensions/DimensionSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionFilterRow.module.css?2c67","D2App/components/dimensions/DimensionFilterRow.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionFilter.module.css?2d92","D2App/components/dimensions/DimensionFilter.js","D2App/components/indicator/IndicatorGroupSelect.js","D2App/components/indicator/IndicatorSelect.js","D2App/components/periods/icons.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/RenderingStrategy.module.css?132e","D2App/components/periods/RenderingStrategy.js","D2App/components/program/ProgramIndicatorSelect.js","D2App/components/edit/thematic/AggregationTypeSelect.js","D2App/components/edit/thematic/CompletedOnlyCheckbox.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/thematic/styles/NoDataColor.module.css?98db","D2App/components/edit/thematic/NoDataColor.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/thematic/styles/RadiusSelect.module.css?28ca","D2App/components/edit/thematic/RadiusSelect.js","D2App/components/edit/thematic/ThematicMapTypeSelect.js","D2App/components/edit/thematic/ValueTypeSelect.js","D2App/components/edit/thematic/ThematicDialog.js","D2App/components/trackedEntity/TrackedEntityTypeSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/trackedEntity/styles/PeriodTypeSelect.module.css?206f","D2App/components/edit/trackedEntity/PeriodTypeSelect.js","D2App/components/edit/trackedEntity/ProgramStatusSelect.js","D2App/components/edit/trackedEntity/TrackedEntityRelationshipTypeSelect.js","D2App/components/edit/trackedEntity/TrackedEntityDialog.js","D2App/components/edit/LayerEdit.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/ContextMenu.module.css?92cf","D2App/components/map/ContextMenu.js","D2App/actions/analyticalObject.js","webpack://@dhis2/app-shell/./src/D2App/components/openAs/styles/OpenAsMapDialog.module.css?f069","D2App/components/openAs/OpenAsMapDialog.js","D2App/components/app/ModalContainer.js","webpack://@dhis2/app-shell/./src/D2App/components/app/styles/App.module.css?085e","D2App/components/app/useLoadDataStore.js","D2App/actions/interpretations.js","D2App/util/apiDataStatistics.js","D2App/util/basemaps.js","D2App/components/app/useLoadMap.js","D2App/components/app/App.js","D2App/reducers/aggregations.js","D2App/reducers/analyticalObject.js","D2App/reducers/contextMenu.js","D2App/reducers/dataTable.js","D2App/reducers/download.js","D2App/reducers/feature.js","D2App/reducers/featureProfile.js","D2App/reducers/interpretation.js","D2App/reducers/layerEdit.js","D2App/reducers/layerSources.js","D2App/reducers/orgUnitProfile.js","D2App/reducers/ui.js","D2App/reducers/index.js","D2App/store/index.js","D2App/util/getDefaultLayerTypes.js","D2App/util/app.js","D2App/locales/index.js","D2App/AppWrapper.js"],"sourcesContent":["/* MAP */\nexport const MAP_NEW = 'MAP_NEW';\nexport const MAP_SET = 'MAP_SET';\nexport const MAP_PROPS_SET = 'MAP_PROPS_SET';\nexport const MAP_CONTEXT_MENU_OPEN = 'MAP_CONTEXT_MENU_OPEN';\nexport const MAP_CONTEXT_MENU_CLOSE = 'MAP_CONTEXT_MENU_CLOSE';\nexport const MAP_COORDINATE_OPEN = 'MAP_COORDINATE_OPEN';\nexport const MAP_COORDINATE_CLOSE = 'MAP_COORDINATE_CLOSE';\nexport const MAP_EARTH_ENGINE_VALUE_SHOW = 'MAP_EARTH_ENGINE_VALUE_SHOW';\nexport const MAP_ALERTS_CLEAR = 'MAP_ALERT_CLEAR';\n\n/* ORIGINAL MAP */\nexport const ORIGINAL_MAP_SET = 'ORIGINAL_MAP_SET';\n\n/* BASEMAP */\nexport const BASEMAP_SELECTED = 'BASEMAP_SELECTED';\nexport const BASEMAP_TOGGLE_EXPAND = 'BASEMAP_TOGGLE_EXPAND';\nexport const BASEMAP_TOGGLE_VISIBILITY = 'BASEMAP_TOGGLE_VISIBILITY';\nexport const BASEMAP_CHANGE_OPACITY = 'BASEMAP_CHANGE_OPACITY';\n\n/* LAYER */\nexport const LAYER_ADD = 'LAYER_ADD';\nexport const LAYER_REMOVE = 'LAYER_REMOVE';\nexport const LAYER_CHANGE_OPACITY = 'LAYER_CHANGE_OPACITY';\nexport const LAYER_EDIT = 'LAYER_EDIT';\nexport const LAYER_EDIT_SUCCESS = 'LAYER_EDIT_SUCCESS';\nexport const LAYER_CANCEL = 'LAYER_CANCEL';\nexport const LAYER_LOAD = 'LAYER_LOAD';\nexport const LAYER_LOAD_SUCCESS = 'LAYER_LOAD_SUCCESS';\nexport const LAYER_LOADING_SET = 'LAYER_LOADING_SET';\nexport const LAYER_SORT = 'LAYER_SORT';\nexport const LAYER_TOGGLE_EXPAND = 'LAYER_TOGGLE_EXPAND';\nexport const LAYER_TOGGLE_VISIBILITY = 'LAYER_TOGGLE_VISIBILITY';\nexport const LAYER_UPDATE = 'LAYER_UPDATE';\nexport const LAYER_DRILL = 'LAYER_DRILL';\n\n/* DATA TABLE */\nexport const DATA_TABLE_CLOSE = 'DATA_TABLE_CLOSE';\nexport const DATA_TABLE_TOGGLE = 'DATA_TABLE_TOGGLE';\nexport const DATA_TABLE_RESIZE = 'DATA_TABLE_RESIZE';\n\n/* DATA FILTER */\nexport const DATA_FILTER_SET = 'DATA_FILTER_SET';\nexport const DATA_FILTER_CLEAR = 'DATA_FILTER_CLEAR';\n\n/* ORGANISATION UNITS */\nexport const ORGANISATION_UNIT_PROFILE_SET = 'ORGANISATION_UNIT_PROFILE_SET';\nexport const ORGANISATION_UNIT_PROFILE_CLOSE = 'ORGANISATION_UNIT_PROFILE_CLOSE';\n\n/* USER INTERFACE */\nexport const LAYERS_PANEL_OPEN = 'LAYERS_PANEL_OPEN';\nexport const LAYERS_PANEL_CLOSE = 'LAYERS_PANEL_CLOSE';\nexport const INTERPRETATIONS_PANEL_OPEN = 'INTERPRETATIONS_PANEL_OPEN';\nexport const INTERPRETATIONS_PANEL_CLOSE = 'INTERPRETATIONS_PANEL_CLOSE';\nexport const LAYERS_SORTING_START = 'LAYERS_SORTING_START';\nexport const LAYERS_SORTING_END = 'LAYERS_SORTING_END';\n\n/* LAYER EDIT */\nexport const LAYER_EDIT_PROGRAM_SET = 'LAYER_EDIT_PROGRAM_SET';\nexport const LAYER_EDIT_PROGRAM_STAGE_SET = 'LAYER_EDIT_PROGRAM_STAGE_SET';\nexport const LAYER_EDIT_PROGRAM_INDICATOR_SET = 'LAYER_EDIT_PROGRAM_INDICATOR_SET';\nexport const LAYER_EDIT_PERIOD_NAME_SET = 'LAYER_EDIT_PERIOD_NAME_SET';\nexport const LAYER_EDIT_PERIOD_SET = 'LAYER_EDIT_PERIOD_SET';\nexport const LAYER_EDIT_PERIODS_SET = 'LAYER_EDIT_PERIODS_SET';\nexport const LAYER_EDIT_START_DATE_SET = 'LAYER_EDIT_START_DATE_SET';\nexport const LAYER_EDIT_BACKUP_PERIODSDATES_SET = 'LAYER_EDIT_BACKUP_PERIODSDATES_SET';\nexport const LAYER_EDIT_END_DATE_SET = 'LAYER_EDIT_END_DATE_SET';\nexport const LAYER_EDIT_FILTER_ADD = 'LAYER_EDIT_FILTER_ADD';\nexport const LAYER_EDIT_FILTER_REMOVE = 'LAYER_EDIT_FILTER_REMOVE';\nexport const LAYER_EDIT_FILTER_CHANGE = 'LAYER_EDIT_FILTER_CHANGE';\nexport const LAYER_EDIT_DIMENSION_FILTER_ADD = 'LAYER_EDIT_DIMENSION_FILTER_ADD';\nexport const LAYER_EDIT_DIMENSION_FILTER_REMOVE = 'LAYER_EDIT_DIMENSION_FILTER_REMOVE';\nexport const LAYER_EDIT_DIMENSION_FILTER_CHANGE = 'LAYER_EDIT_DIMENSION_FILTER_CHANGE';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_SET';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET';\nexport const LAYER_EDIT_THEMATIC_MAP_TYPE_SET = 'LAYER_EDIT_THEMATIC_MAP_TYPE_SET';\nexport const LAYER_EDIT_CLASSIFICATION_SET = 'LAYER_EDIT_CLASSIFICATION_SET';\nexport const LAYER_EDIT_COLOR_SCALE_SET = 'LAYER_EDIT_COLOR_SCALE_SET';\nexport const LAYER_EDIT_DATA_ITEM_SET = 'LAYER_EDIT_DATA_ITEM_SET';\nexport const LAYER_EDIT_EVENT_STATUS_SET = 'LAYER_EDIT_EVENT_STATUS_SET';\nexport const LAYER_EDIT_EVENT_COORDINATE_FIELD_SET = 'LAYER_EDIT_EVENT_COORDINATE_FIELD_SET';\nexport const LAYER_EDIT_EVENT_CLUSTERING_SET = 'LAYER_EDIT_EVENT_CLUSTERING_SET';\nexport const LAYER_EDIT_EVENT_POINT_RADIUS_SET = 'LAYER_EDIT_EVENT_POINT_RADIUS_SET';\nexport const LAYER_EDIT_EVENT_POINT_COLOR_SET = 'LAYER_EDIT_EVENT_POINT_COLOR_SET';\nexport const LAYER_EDIT_RELATED_POINT_COLOR_SET = 'LAYER_EDIT_RELATED_POINT_COLOR_SET';\nexport const LAYER_EDIT_RELATED_POINT_RADIUS_SET = 'LAYER_EDIT_RELATED_POINT_RADIUS_SET';\nexport const LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET = 'LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET';\nexport const LAYER_EDIT_ORGANISATION_UNITS_SET = 'LAYER_EDIT_ORGANISATION_UNITS_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET = 'LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_MODE_SET = 'LAYER_EDIT_ORGANISATION_UNIT_MODE_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET = 'LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET = 'LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET';\nexport const LAYER_EDIT_VALUE_TYPE_SET = 'LAYER_EDIT_VALUE_TYPE_SET';\nexport const LAYER_EDIT_INDICATOR_GROUP_SET = 'LAYER_EDIT_INDICATOR_GROUP_SET';\nexport const LAYER_EDIT_PERIOD_TYPE_SET = 'LAYER_EDIT_PERIOD_TYPE_SET';\nexport const LAYER_EDIT_RENDERING_STRATEGY_SET = 'LAYER_EDIT_RENDERING_STRATEGY_SET';\nexport const LAYER_EDIT_AGGREGATION_TYPE_SET = 'LAYER_EDIT_AGGREGATION_TYPE_SET';\nexport const LAYER_EDIT_DATA_ELEMENT_GROUP_SET = 'LAYER_EDIT_DATA_ELEMENT_GROUP_SET';\nexport const LAYER_EDIT_STYLE_SET = 'LAYER_EDIT_STYLE_SET';\nexport const LAYER_EDIT_FILTER_SET = 'LAYER_EDIT_FILTER_SET';\nexport const LAYER_EDIT_LABELS_SET = 'LAYER_EDIT_LABELS_SET';\nexport const LAYER_EDIT_LABEL_TEMPLATE = 'LAYER_EDIT_LABEL_TEMPLATE';\nexport const LAYER_EDIT_LABEL_FONT_SIZE_SET = 'LAYER_EDIT_LABEL_FONT_SIZE_SET';\nexport const LAYER_EDIT_LABEL_FONT_WEIGHT_SET = 'LAYER_EDIT_LABEL_FONT_WEIGHT_SET';\nexport const LAYER_EDIT_LABEL_FONT_STYLE_SET = 'LAYER_EDIT_LABEL_FONT_STYLE_SET';\nexport const LAYER_EDIT_LABEL_FONT_COLOR_SET = 'LAYER_EDIT_LABEL_FONT_COLOR_SET';\nexport const LAYER_EDIT_BUFFER_RADIUS_SET = 'LAYER_EDIT_BUFFER_RADIUS_SET';\nexport const LAYER_EDIT_RADIUS_LOW_SET = 'LAYER_EDIT_RADIUS_LOW_SET';\nexport const LAYER_EDIT_RADIUS_HIGH_SET = 'LAYER_EDIT_RADIUS_HIGH_SET';\nexport const LAYER_EDIT_LEGEND_SET_SET = 'LAYER_EDIT_LEGEND_SET_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_PATH_SET = 'LAYER_EDIT_ORGANISATION_UNIT_PATH_SET'; // Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const LAYER_EDIT_ORGANISATION_UNIT_PATH_LOAD = 'LAYER_EDIT_ORGANISATION_UNIT_PATH_LOAD'; // Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const LAYER_EDIT_OPERAND_SET = 'OPERAND_SET'; // Data element operands (details)\nexport const LAYER_EDIT_TRACKED_ENTITY_TYPE_SET = 'LAYER_EDIT_TRACKED_ENTITY_TYPE_SET';\nexport const LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET = 'LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET';\nexport const LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET = 'LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET';\nexport const LAYER_EDIT_PROGRAM_STATUS_SET = 'LAYER_EDIT_PROGRAM_STATUS_SET';\nexport const LAYER_EDIT_FOLLOW_UP_SET = 'LAYER_EDIT_FOLLOW_UP_SET';\nexport const LAYER_EDIT_NO_DATA_COLOR_SET = 'LAYER_EDIT_NO_DATA_COLOR_SET';\nexport const LAYER_EDIT_BAND_SET = 'LAYER_EDIT_BAND_SET';\nexport const LAYER_EDIT_FEATURE_STYLE_SET = 'LAYER_EDIT_FEATURE_STYLE_SET';\nexport const LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET = 'LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET';\nexport const LAYER_EDIT_EARTH_ENGINE_PERIOD_SET = 'LAYER_EDIT_EARTH_ENGINE_PERIOD_SET';\n\n/* PERIODS */\nexport const RELATIVE_PERIODS_SET = 'RELATIVE_PERIODS_SET';\nexport const RELATIVE_PERIODS_TRANSLATE = 'RELATIVE_PERIODS_TRANSLATE';\n\n/* INTERPRETATIONS */\nexport const INTERPRETATION_SET = 'INTERPRETATION_SET';\n\n/* DOWNLOAD (PNG) */\nexport const DOWNLOAD_MODE_OPEN = 'DOWNLOAD_MODE_OPEN';\nexport const DOWNLOAD_MODE_CLOSE = 'DOWNLOAD_MODE_CLOSE';\nexport const DOWNLOAD_CONFIG_SET = 'DOWNLOAD_CONFIG_SET';\n\n/* ANALYTICAL OBJECTS (BETWEEN APPS) */\nexport const ANALYTICAL_OBJECT_SET = 'ANALYTICAL_OBJECT_SET';\nexport const ANALYTICAL_OBJECT_CLEAR = 'ANALYTICAL_OBJECT_CLEAR';\n\n/* FEATURE */\nexport const FEATURE_HIGHLIGHT = 'FEATURE_HIGHLIGHT';\nexport const FEATURE_PROFILE_SET = 'FEATURE_PROFILE_SET';\nexport const FEATURE_PROFILE_CLOSE = 'FEATURE_PROFILE_CLOSE';\n\n/* AGGREGATIONS */\nexport const AGGREGATIONS_SET = 'AGGREGATIONS_SET';\n\n/* LAYER SOURCES */\nexport const LAYER_SOURCES_INIT = 'LAYER_SOURCES_INIT';\nexport const LAYER_SOURCE_ADD = 'LAYER_SOURCE_ADD';\nexport const LAYER_SOURCE_REMOVE = 'LAYER_SOURCE_REMOVE';","import * as types from '../constants/actionTypes.js';\n\n// Add new layer\nexport const addLayer = config => ({\n  type: types.LAYER_ADD,\n  payload: config\n});\n\n// Remove an overlay\nexport const removeLayer = id => ({\n  type: types.LAYER_REMOVE,\n  id\n});\n\n// Edit overlay\nexport const editLayer = layer => ({\n  type: types.LAYER_EDIT,\n  payload: layer\n});\n\n// Cancel overlay (stop editing)\nexport const cancelLayer = () => ({\n  type: types.LAYER_CANCEL\n});\n\n// Update existing overlay\nexport const updateLayer = layer => ({\n  type: types.LAYER_UPDATE,\n  payload: layer\n});\n\n// Expand/collapse overlay card\nexport const toggleLayerExpand = id => ({\n  type: types.LAYER_TOGGLE_EXPAND,\n  id\n});\n\n// Show/hide overlay on map\nexport const toggleLayerVisibility = id => ({\n  type: types.LAYER_TOGGLE_VISIBILITY,\n  id\n});\n\n// Set overlay opacity\nexport const changeLayerOpacity = (id, opacity) => ({\n  type: types.LAYER_CHANGE_OPACITY,\n  id,\n  opacity\n});\n\n// Change ordering of overlays\nexport const sortLayers = _ref => {\n  let {\n    oldIndex,\n    newIndex\n  } = _ref;\n  return {\n    type: types.LAYER_SORT,\n    oldIndex,\n    newIndex\n  };\n};\n\n// Set that layer is loading\nexport const setLayerLoading = id => ({\n  type: types.LAYER_LOADING_SET,\n  id\n});","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Layer, CenteredContent, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nconst CachedDataCtx = /*#__PURE__*/createContext({});\nconst CachedDataProvider = _ref => {\n  let {\n    query,\n    dataTransformation,\n    children,\n    translucent = true\n  } = _ref;\n  const {\n    data: rawData,\n    error,\n    loading\n  } = useDataQuery(query);\n  const [transformedData, setTransformedData] = useState(undefined);\n  const [transformLoading, setTransformLoading] = useState(Boolean(dataTransformation));\n  const [transformError, setTransformError] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    const runTransformation = async () => {\n      if (!rawData || !dataTransformation) {\n        isMounted && setTransformedData(rawData);\n        return;\n      }\n      try {\n        setTransformLoading(true);\n        const result = await Promise.resolve(dataTransformation(rawData));\n        isMounted && setTransformedData(result);\n        setTransformError(null);\n      } catch (err) {\n        isMounted && setTransformError(err);\n      } finally {\n        isMounted && setTransformLoading(false);\n      }\n    };\n    runTransformation();\n    return () => {\n      isMounted = false;\n    };\n  }, [rawData, dataTransformation]);\n  if (loading || transformLoading) {\n    return /*#__PURE__*/React.createElement(Layer, {\n      translucent: translucent\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  if (error || transformError) {\n    const fallbackMsg = i18n.t('This app could not retrieve required data.');\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Network error')\n    }, (error === null || error === void 0 ? void 0 : error.message) || (transformError === null || transformError === void 0 ? void 0 : transformError.message) || fallbackMsg);\n  }\n  return /*#__PURE__*/React.createElement(CachedDataCtx.Provider, {\n    value: transformedData\n  }, children);\n};\nCachedDataProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n  query: PropTypes.object.isRequired,\n  dataTransformation: PropTypes.func,\n  translucent: PropTypes.bool\n};\nconst useCachedData = () => useContext(CachedDataCtx);\nexport { CachedDataProvider, useCachedData };","export const ALERT_SUCCESS = {\n  success: true\n};\nexport const ALERT_SUCCESS_DELAY = {\n  success: true,\n  duration: 3000\n};\nexport const ALERT_CRITICAL = {\n  critical: true\n};\nexport const ALERT_WARNING = {\n  warning: true\n};\nexport const ALERT_INFO = {\n  info: true\n};\nexport const ALERT_MESSAGE_DYNAMIC = _ref => {\n  let {\n    msg\n  } = _ref;\n  return msg;\n};\nexport const ALERT_OPTIONS_DYNAMIC = _ref2 => {\n  let {\n    isError\n  } = _ref2;\n  return isError ? ALERT_CRITICAL : ALERT_SUCCESS;\n};\n\n// Loader alerts\nexport const WARNING_NO_DATA = 'WARNING_NO_DATA';\nexport const WARNING_NO_OU_COORD = 'WARNING_NO_OU_COORD';\nexport const WARNING_NO_GEOMETRY_COORD = 'WARNING_NO_GEOMETRY_COORD';\nexport const ERROR_CRITICAL = 'ERROR_CRITICAL';\nexport const CUSTOM_ALERT = 'CUSTOM_ALERT';","import { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport { ALERT_MESSAGE_DYNAMIC, WARNING_NO_DATA, WARNING_NO_OU_COORD, WARNING_NO_GEOMETRY_COORD, ERROR_CRITICAL, CUSTOM_ALERT } from '../../constants/alerts.js';\nfunction useLoaderAlerts() {\n  let loaderAlertAction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Function.prototype;\n  const errorAlert = useAlert(ALERT_MESSAGE_DYNAMIC, {\n    critical: true,\n    onHidden: loaderAlertAction\n  });\n  const warningAlert = useAlert(ALERT_MESSAGE_DYNAMIC, {\n    warning: true,\n    onHidden: loaderAlertAction\n  });\n  const infoAlert = useAlert(ALERT_MESSAGE_DYNAMIC, {\n    info: true,\n    duration: 5000,\n    onHidden: loaderAlertAction\n  });\n  const noDataAlert = useAlert(ALERT_MESSAGE_DYNAMIC, {\n    warning: true,\n    onHidden: loaderAlertAction\n  });\n  const noOUCoordinatesAlert = useAlert(_ref => {\n    let {\n      msg\n    } = _ref;\n    return msg;\n  }, {\n    warning: true,\n    onHidden: loaderAlertAction\n  });\n  const noGeometryCoordinatesAlert = useAlert(ALERT_MESSAGE_DYNAMIC, {\n    warning: true,\n    onHidden: loaderAlertAction\n  });\n  const showAlerts = alerts => {\n    alerts.forEach(_ref2 => {\n      let {\n        message: msg,\n        code,\n        warning,\n        critical\n      } = _ref2;\n      switch (code) {\n        case WARNING_NO_DATA:\n          {\n            noDataAlert.show({\n              msg: `${msg}: ${i18n.t('No data found')}`\n            });\n            break;\n          }\n        case WARNING_NO_OU_COORD:\n          {\n            noOUCoordinatesAlert.show({\n              msg: i18n.t('Selected org units: No coordinates found', {\n                nsSeparator: '^^'\n              })\n            });\n            break;\n          }\n        case WARNING_NO_GEOMETRY_COORD:\n          {\n            noGeometryCoordinatesAlert.show({\n              msg: `${msg}: ${i18n.t('No coordinates found')}`\n            });\n            break;\n          }\n        case ERROR_CRITICAL:\n          {\n            errorAlert.show({\n              msg: `${i18n.t('Error')}: ${msg}`\n            });\n            break;\n          }\n        case CUSTOM_ALERT:\n          {\n            if (critical) {\n              errorAlert.show({\n                msg\n              });\n            } else if (warning) {\n              warningAlert.show({\n                msg\n              });\n            } else {\n              infoAlert.show({\n                msg\n              });\n            }\n            break;\n          }\n        default:\n          break;\n      }\n    });\n  };\n  return {\n    showAlerts\n  };\n}\nexport default useLoaderAlerts;","import i18n from '@dhis2/d2-i18n';\nexport const VECTOR_STYLE = 'vectorStyle';\nexport const TILE_LAYER = 'tileLayer';\nexport const WMS_LAYER = 'wmsLayer';\nexport const GOOGLE_LAYER = 'googleLayer';\nexport const BING_LAYER = 'bingLayer';\nexport const AZURE_LAYER = 'azureLayer';\nexport const EVENT_LAYER = 'event';\nexport const THEMATIC_LAYER = 'thematic';\nexport const FACILITY_LAYER = 'facility';\nexport const BOUNDARY_LAYER = 'boundary';\nexport const ORG_UNIT_LAYER = 'orgUnit';\nexport const EXTERNAL_LAYER = 'external';\nexport const EARTH_ENGINE_LAYER = 'earthEngine';\nexport const TRACKED_ENTITY_LAYER = 'trackedEntity';\nexport const GEOJSON_LAYER = 'geoJson';\nexport const GROUP_LAYER = 'group';\nexport const GEOJSON_URL_LAYER = 'geoJsonUrl';\nexport const MAP_SERVICE_KEY_TESTS = {\n  keyBingMapsApiKey: [{\n    type: BING_LAYER,\n    url: 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/Aerial?key='\n  }, {\n    type: AZURE_LAYER,\n    url: 'https://atlas.microsoft.com/map/static/png?api-version=2.0&zoom=1&center=0,0&layer=basic&width=1&height=1&subscription-key='\n  }],\n  keyAzureMapsApiKey: [{\n    type: AZURE_LAYER,\n    url: 'https://atlas.microsoft.com/map/static/png?api-version=2.0&zoom=1&center=0,0&layer=basic&width=1&height=1&subscription-key='\n  }]\n};\nexport const DOWNLOADABLE_LAYER_TYPES = [FACILITY_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EVENT_LAYER, EARTH_ENGINE_LAYER, GEOJSON_URL_LAYER];\nexport const DATA_TABLE_LAYER_TYPES = [FACILITY_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EVENT_LAYER, EARTH_ENGINE_LAYER, GEOJSON_URL_LAYER];\nexport const MAP_LAYER_POSITION_BASEMAP = 'BASEMAP';\nexport const MAP_LAYER_POSITION_OVERLAY = 'OVERLAY';\nexport const OPEN_AS_LAYER_TYPES = [THEMATIC_LAYER];\nexport const DEFAULT_ORG_UNIT_LEVEL = 1; // 0 is root level\n\n/* FITBOUNDS */\nexport const PADDING_DEFAULT = {\n  top: 40,\n  right: 40,\n  bottom: 40,\n  left: 40\n};\nexport const PADDING_TIMELINE = {\n  bottom: 90\n};\nexport const DURATION_DEFAULT = 0;\nexport const DURATION_TIMELINE = 500;\n\n/* RENDERING STRATEGY */\nexport const RENDERING_STRATEGY_SINGLE = 'SINGLE';\nexport const RENDERING_STRATEGY_TIMELINE = 'TIMELINE';\nexport const RENDERING_STRATEGY_SPLIT_BY_PERIOD = 'SPLIT_BY_PERIOD';\n\n/* THEMATIC LAYER */\nexport const THEMATIC_CHOROPLETH = 'CHOROPLETH';\nexport const THEMATIC_BUBBLE = 'BUBBLE';\nexport const THEMATIC_RADIUS_DEFAULT = 6;\nexport const THEMATIC_RADIUS_LOW = 5;\nexport const THEMATIC_RADIUS_HIGH = 30;\nexport const THEMATIC_RADIUS_MIN = 0;\nexport const THEMATIC_RADIUS_MAX = 50;\nexport const THEMATIC_COLOR = '#558CC0';\nexport const THEMATIC_BUFFER = 5000;\nexport const getThematicMapTypes = () => [{\n  id: THEMATIC_CHOROPLETH,\n  name: i18n.t('Choropleth'),\n  image: 'images/choropleth.png'\n}, {\n  id: THEMATIC_BUBBLE,\n  name: i18n.t('Bubble map'),\n  image: 'images/bubble.png'\n}];\n\n/* EVENT LAYER */\nexport const EVENT_CLIENT_PAGE_SIZE = 100000;\nexport const EVENT_SERVER_CLUSTER_COUNT = 2000;\nexport const EVENT_COLOR = '#333333';\nexport const EVENT_RADIUS = 6;\nexport const EVENT_BUFFER = 100;\nexport const EVENT_COORDINATE_DEFAULT = 'psigeometry';\nexport const EVENT_COORDINATE_ENROLLMENT = 'pigeometry';\nexport const EVENT_COORDINATE_TRACKED_ENTITY = 'teigeometry';\nexport const EVENT_COORDINATE_ORG_UNIT = 'ougeometry';\nexport const EVENT_COORDINATE_CASCADING = 'cascading';\nexport const COORDINATE_FIELD_NAMES = {\n  [EVENT_COORDINATE_DEFAULT]: i18n.t('Event location'),\n  [EVENT_COORDINATE_ENROLLMENT]: i18n.t('Enrollment location'),\n  [EVENT_COORDINATE_TRACKED_ENTITY]: i18n.t('Tracked entity location')\n};\n\n/* TEI LAYER */\nexport const TEI_COLOR = '#BB0000';\nexport const TEI_RADIUS = 6;\nexport const TEI_BUFFER = 100;\nexport const TEI_RELATED_COLOR = '#000000';\nexport const TEI_RELATED_RADIUS = 3;\nexport const TEI_RELATIONSHIP_LINE_COLOR = '#0000BB';\n\n/* FACILITY LAYER */\nexport const FACILITY_BUFFER = 5000;\n\n/* ORG UNIT LAYER */\nexport const ORG_UNIT_COLOR = '#333333';\nexport const ORG_UNIT_RADIUS = 6;\nexport const ORG_UNIT_RADIUS_SMALL = 1;\n\n/* EARTH ENGINE LAYER */\nexport const EE_BUFFER = 5000;\n\n/* CLASSIFICATION */\nexport const CLASSIFICATION_PREDEFINED = 1;\nexport const CLASSIFICATION_EQUAL_INTERVALS = 2;\nexport const CLASSIFICATION_EQUAL_COUNTS = 3;\nexport const CLASSIFICATION_SINGLE_COLOR = 10;\nexport const getLegendTypes = isBubble => [{\n  id: CLASSIFICATION_EQUAL_INTERVALS,\n  name: i18n.t('Automatic color legend')\n}, {\n  id: CLASSIFICATION_PREDEFINED,\n  name: i18n.t('Predefined color legend')\n}, ...(isBubble ? [{\n  id: CLASSIFICATION_SINGLE_COLOR,\n  name: i18n.t('Single color legend')\n}] : [])];\nexport const getClassificationTypes = () => [{\n  id: CLASSIFICATION_EQUAL_INTERVALS,\n  name: i18n.t('Equal intervals')\n}, {\n  id: CLASSIFICATION_EQUAL_COUNTS,\n  name: i18n.t('Equal counts')\n}];\nexport const STYLE_TYPE_COLOR = 'COLOR';\nexport const STYLE_TYPE_SYMBOL = 'SYMBOL';\nexport const getGroupSetStyleTypes = () => [{\n  id: STYLE_TYPE_COLOR,\n  name: i18n.t('Color')\n}, {\n  id: STYLE_TYPE_SYMBOL,\n  name: i18n.t('Symbol')\n}];\n\n/* LABEL TEMPLATES */\nexport const LABEL_TEMPLATE_NAME_ONLY = '{name}';\nexport const LABEL_TEMPLATE_NAME_AND_VALUE = '{name}\\n{value}';\nexport const LABEL_TEMPLATE_VALUE_ONLY = '{value}';\n\n/* LABEL STYLES */\nexport const LABEL_FONT_SIZE = '14px';\nexport const LABEL_FONT_SIZE_MIN = 6;\nexport const LABEL_FONT_SIZE_MAX = 100;\nexport const LABEL_FONT_STYLE = 'normal';\nexport const LABEL_FONT_WEIGHT = 'normal';\nexport const LABEL_FONT_COLOR = '#333333';\nexport const NO_DATA_COLOR = '#CCCCCC';\n\n/* POINT RADIUS */\nexport const MIN_RADIUS = 1;\nexport const MAX_RADIUS = 100;\nexport const NONE = 'none';","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../layers.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'GOOGLE/Research/open-buildings/v3/polygons',\n  datasetId: 'GOOGLE/Research/open-buildings/v3/polygons',\n  format: 'FeatureCollection',\n  img: 'images/buildings.png',\n  name: i18n.t('Building footprints'),\n  description: i18n.t('The outlines of buildings derived from high-resolution satellite imagery. Only for Sub-Saharan Africa, South and South-East Asia, Latin America and the Caribbean.'),\n  notice: i18n.t('Building counts are only available for smaller organisation unit areas.'),\n  error: i18n.t('Select a smaller area or single organization unit to see the count of buildings.'),\n  source: 'Google Research',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/GOOGLE_Research_open-buildings_v3_polygons',\n  unit: i18n.t('Number of buildings'),\n  resolution: {\n    spatial: i18n.t('0.5 meter'),\n    temporal: i18n.t('Single point in time'),\n    temporalCoverage: i18n.t('May 2023')\n  },\n  aggregations: ['count'],\n  defaultAggregations: ['count'],\n  style: {\n    color: '#FFA500',\n    strokeWidth: 1\n  },\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../layers.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'USGS/SRTMGL1_003',\n  datasetId: 'USGS/SRTMGL1_003',\n  format: 'Image',\n  img: 'images/elevation.png',\n  name: i18n.t('Elevation'),\n  description: i18n.t('Elevation above sea-level.'),\n  source: 'NASA / USGS / JPL-Caltech / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/USGS_SRTMGL1_003',\n  unit: i18n.t('meters'),\n  resolution: {\n    spatial: i18n.t('~30 meters'),\n    temporal: i18n.t('Single point in time'),\n    temporalCoverage: i18n.t('Febuary 2000')\n  },\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  band: 'elevation',\n  style: {\n    min: 0,\n    max: 1500,\n    palette: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#d95f0e', '#993404'] // YlOrBr (ColorBrewer)\n  },\n\n  maskOperator: 'gte',\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../layers.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'MODIS/006/MCD12Q1',\n  // Layer id kept for backward compability for saved maps\n  datasetId: 'MODIS/061/MCD12Q1',\n  // No longer in use: 'MODIS/006/MCD12Q1' / 'MODIS/051/MCD12Q1',\n  format: 'ImageCollection',\n  img: 'images/landcover.png',\n  name: i18n.t('Landcover'),\n  description: i18n.t('Distinct landcover types collected from satellites.'),\n  source: 'NASA LP DAAC / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/MODIS_061_MCD12Q1',\n  resolution: {\n    spatial: i18n.t('0.5 meter'),\n    temporal: i18n.t('Single point in time'),\n    temporalCoverage: i18n.t('May 2023')\n  },\n  defaultAggregations: 'percentage',\n  periodType: 'YEARLY',\n  filters: [{\n    type: 'eq',\n    arguments: ['system:index', '$1']\n  }],\n  band: 'LC_Type1',\n  style: [\n  // http://www.eomf.ou.edu/static/IGBP.pdf\n  {\n    value: 1,\n    name: i18n.t('Evergreen Needleleaf forest'),\n    color: '#162103'\n  }, {\n    value: 2,\n    name: i18n.t('Evergreen Broadleaf forest'),\n    color: '#235123'\n  }, {\n    value: 3,\n    name: i18n.t('Deciduous Needleleaf forest'),\n    color: '#399b38'\n  }, {\n    value: 4,\n    name: i18n.t('Deciduous Broadleaf forest'),\n    color: '#38eb38'\n  }, {\n    value: 5,\n    name: i18n.t('Mixed forest'),\n    color: '#39723b'\n  }, {\n    value: 6,\n    name: i18n.t('Closed shrublands'),\n    color: '#6a2424'\n  }, {\n    value: 7,\n    name: i18n.t('Open shrublands'),\n    color: '#c3a55f'\n  }, {\n    value: 8,\n    name: i18n.t('Woody savannas'),\n    color: '#b76124'\n  }, {\n    value: 9,\n    name: i18n.t('Savannas'),\n    color: '#d99125'\n  }, {\n    value: 10,\n    name: i18n.t('Grasslands'),\n    color: '#92af1f'\n  }, {\n    value: 11,\n    name: i18n.t('Permanent wetlands'),\n    color: '#10104c'\n  }, {\n    value: 12,\n    name: i18n.t('Croplands'),\n    color: '#cdb400'\n  }, {\n    value: 13,\n    name: i18n.t('Urban and built-up'),\n    color: '#cc0202'\n  }, {\n    value: 14,\n    name: i18n.t('Cropland/Natural vegetation mosaic'),\n    color: '#332808'\n  }, {\n    value: 15,\n    name: i18n.t('Snow and ice'),\n    color: '#d7cdcc'\n  }, {\n    value: 16,\n    name: i18n.t('Barren or sparsely vegetated'),\n    color: '#f7e174'\n  }, {\n    value: 17,\n    name: i18n.t('Water'),\n    color: '#aec3d6'\n  }],\n  popup: '{name}: {value}',\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../../layers.js';\nexport const legacyBuildingsDatasetId = 'GOOGLE/Research/open-buildings/v1/polygons';\nexport default {\n  legacy: true,\n  // Kept for backward compability\n  layer: EARTH_ENGINE_LAYER,\n  layerId: legacyBuildingsDatasetId,\n  datasetId: legacyBuildingsDatasetId,\n  format: 'FeatureCollection',\n  name: i18n.t('Building footprints'),\n  unit: i18n.t('Number of buildings'),\n  description: i18n.t('The outlines of buildings derived from high-resolution satellite imagery. Only for the continent of Africa.'),\n  notice: i18n.t('Building counts are only available for smaller organisation unit areas.'),\n  error: i18n.t('Select a smaller area or single organization unit to see the count of buildings.'),\n  source: 'Google Research',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/GOOGLE_Research_open-buildings_v1_polygons',\n  img: 'images/buildings.png',\n  aggregations: ['count'],\n  defaultAggregations: ['count'],\n  style: {\n    color: '#FFA500',\n    strokeWidth: 1\n  },\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../../layers.js';\nexport const legacyNighttimeDatasetId = 'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS';\nexport default {\n  legacy: true,\n  // Kept for backward compability\n  layer: EARTH_ENGINE_LAYER,\n  format: 'ImageCollection',\n  layerId: legacyNighttimeDatasetId,\n  datasetId: legacyNighttimeDatasetId,\n  name: i18n.t('Nighttime lights'),\n  unit: i18n.t('light intensity'),\n  description: i18n.t('Light intensity from cities, towns, and other sites with persistent lighting, including gas flares.'),\n  source: 'NOAA / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/NOAA%2FDMSP-OLS%2FNIGHTTIME_LIGHTS',\n  periodType: 'YEARLY',\n  filters: [{\n    type: 'eq',\n    arguments: ['system:index', '$1']\n  }],\n  band: 'stable_lights',\n  img: 'images/nighttime.png',\n  style: {\n    min: 0,\n    max: 63,\n    palette: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#8c2d04'] // YlOrBr (ColorBrewer)\n  },\n\n  maskOperator: 'gte',\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../../layers.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  legacy: true,\n  // Kept for backward compability\n  layerId: 'WorldPop/POP',\n  datasetId: 'WorldPop/POP',\n  format: 'ImageCollection',\n  name: i18n.t('Population'),\n  unit: i18n.t('people per km'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/WorldPop%2FPOP',\n  img: 'images/population.png',\n  periodType: 'YEARLY',\n  band: 'population',\n  filters: [{\n    type: 'eq',\n    arguments: ['year', '$1']\n  }, {\n    type: 'eq',\n    arguments: ['UNadj', 'yes']\n  }],\n  mosaic: true,\n  style: {\n    min: 0,\n    max: 1000,\n    palette: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#de2d26', '#a50f15'] // Reds (ColorBrewer)\n  },\n\n  methods: {\n    multiply: [100] // Convert from people/hectare to people/km2\n  },\n\n  maskOperator: 'gt',\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../../layers.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  legacy: true,\n  // Kept for backward compability\n  layerId: 'WorldPop/GP/100m/pop',\n  datasetId: 'WorldPop/GP/100m/pop',\n  name: i18n.t('Population'),\n  unit: i18n.t('people per hectare'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop',\n  img: 'images/population.png',\n  defaultAggregations: ['sum', 'mean'],\n  periodType: 'YEARLY',\n  band: 'population',\n  filters: [{\n    type: 'eq',\n    arguments: ['year', '$1']\n  }],\n  mosaic: true,\n  style: {\n    min: 0,\n    max: 10,\n    palette: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#de2d26', '#a50f15'] // Reds (ColorBrewer)\n  },\n\n  maskOperator: 'gt',\n  opacity: 0.9\n};","import { DAILY, WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, SIXMONTHLYAPR, YEARLY, FINANCIAL, FYNOV, FYOCT, FYJUL, FYAPR } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nexport const periodGroups = [DAILY, WEEKLY, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, YEARLY, FINANCIAL];\nexport const PREDEFINED_PERIODS = 'PREDEFINED_PERIODS';\nexport const RELATIVE_PERIODS = 'RELATIVE_PERIODS';\nexport const FIXED_PERIODS = 'FIXED_PERIODS';\nexport const START_END_DATES = 'START_END_DATES';\nexport const LAST_UPDATED_DATES = 'lastUpdated';\nexport const periodTypes = includeRelativePeriods => [...(includeRelativePeriods ? [{\n  id: RELATIVE_PERIODS,\n  name: i18n.t('Relative')\n}] : []), {\n  id: DAILY,\n  name: i18n.t('Daily'),\n  group: DAILY\n}, {\n  id: WEEKLY,\n  name: i18n.t('Weekly'),\n  group: WEEKLY\n}, {\n  id: WEEKLYWED,\n  name: i18n.t('Weekly (Start Wednesday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYTHU,\n  name: i18n.t('Weekly (Start Thursday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYSAT,\n  name: i18n.t('Weekly (Start Saturday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYSUN,\n  name: i18n.t('Weekly (Start Sunday)'),\n  group: WEEKLY\n}, {\n  id: BIWEEKLY,\n  name: i18n.t('Bi-weekly'),\n  group: BIWEEKLY\n}, {\n  id: MONTHLY,\n  name: i18n.t('Monthly'),\n  group: MONTHLY\n}, {\n  id: BIMONTHLY,\n  name: i18n.t('Bi-monthly'),\n  group: BIMONTHLY\n}, {\n  id: QUARTERLY,\n  name: i18n.t('Quarterly'),\n  group: QUARTERLY\n}, {\n  id: SIXMONTHLY,\n  name: i18n.t('Six-monthly'),\n  group: SIXMONTHLY\n}, {\n  id: SIXMONTHLYAPR,\n  name: i18n.t('Six-monthly April'),\n  group: SIXMONTHLY\n}, {\n  id: YEARLY,\n  name: i18n.t('Yearly'),\n  group: YEARLY\n}, {\n  id: FYNOV,\n  name: i18n.t('Financial year (Start November)'),\n  group: FINANCIAL\n}, {\n  id: FYOCT,\n  name: i18n.t('Financial year (Start October)'),\n  group: FINANCIAL\n}, {\n  id: FYJUL,\n  name: i18n.t('Financial year (Start July)'),\n  group: FINANCIAL\n}, {\n  id: FYAPR,\n  name: i18n.t('Financial year (Start April)'),\n  group: FINANCIAL\n}, {\n  id: START_END_DATES,\n  name: i18n.t('Start/end dates')\n}];\n\n// Periods not supported for split view (maximum 12 maps)\nexport const MULTIMAP_MIN_PERIODS = 2;\nexport const MULTIMAP_MAX_PERIODS = 12;\n\n// Period types used for Earth Engine layers\nexport const BY_YEAR = 'BY_YEAR';\nexport const EE_MONTHLY = 'EE_MONTHLY';","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../../layers.js';\nimport { BY_YEAR } from '../../periods.js';\nexport default {\n  legacy: true,\n  // kept for backward compability\n  layer: EARTH_ENGINE_LAYER,\n  format: 'ImageCollection',\n  layerId: 'UCSB-CHG/CHIRPS/PENTAD',\n  datasetId: 'UCSB-CHG/CHIRPS/PENTAD',\n  name: i18n.t('Precipitation'),\n  unit: i18n.t('millimeter'),\n  description: i18n.t('Precipitation collected from satellite and weather stations on the ground. The values are in millimeters within 5 days periods. Updated monthly, during the 3rd week of the following month.'),\n  source: 'UCSB / CHG / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/UCSB-CHG%2FCHIRPS%2FPENTAD',\n  periodType: BY_YEAR,\n  filters: [{\n    type: 'eq',\n    arguments: ['system:index', '$1']\n  }],\n  band: 'precipitation',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  img: 'images/precipitation.png',\n  style: {\n    min: 0,\n    max: 100,\n    palette: ['#eff3ff', '#c6dbef', '#9ecae1', '#6baed6', '#3182bd', '#08519c'] // Blues (ColorBrewer)\n  },\n\n  maskOperator: 'gte',\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../../layers.js';\nimport { BY_YEAR } from '../../periods.js';\nexport default {\n  legacy: true,\n  // kept for backward compability\n  layer: EARTH_ENGINE_LAYER,\n  format: 'ImageCollection',\n  layerId: 'MODIS/006/MOD11A2',\n  datasetId: 'MODIS/006/MOD11A2',\n  img: 'images/temperature.png',\n  name: i18n.t('Temperature MODIS'),\n  unit: i18n.t('C during daytime'),\n  description: i18n.t('Land surface temperatures collected from satellite. Blank spots will appear in areas with a persistent cloud cover.'),\n  source: 'NASA LP DAAC / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/MODIS%2FMOD11A2',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  band: 'LST_Day_1km',\n  periodType: BY_YEAR,\n  filters: [{\n    type: 'eq',\n    arguments: ['system:index', '$1']\n  }],\n  methods: [{\n    name: 'toFloat',\n    arguments: []\n  }, {\n    name: 'multiply',\n    arguments: [0.02]\n  }, {\n    name: 'subtract',\n    arguments: [273.15]\n  }],\n  style: {\n    min: 0,\n    max: 40,\n    palette: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'] // Reds (ColorBrewer)\n  },\n\n  maskOperator: 'gte',\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../layers.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj',\n  datasetId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj',\n  format: 'ImageCollection',\n  img: 'images/population.png',\n  name: i18n.t('Population age groups'),\n  description: i18n.t('Estimated number of people living in an area, grouped by age and gender.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop_age_sex_cons_unadj',\n  unit: i18n.t('people per hectare'),\n  resolution: {\n    spatial: i18n.t('~100 meters'),\n    temporal: i18n.t('Single point in time'),\n    temporalCoverage: i18n.t('2020')\n  },\n  aggregations: ['min', 'max', 'mean', 'median', 'sum', 'stdDev', 'variance'],\n  defaultAggregations: ['sum', 'mean'],\n  unmaskAggregation: true,\n  periodType: 'YEARLY',\n  filters: [{\n    type: 'eq',\n    arguments: ['year', '$1']\n  }],\n  bands: [{\n    id: 'M_0',\n    name: i18n.t('Male 0 - 1 years')\n  }, {\n    id: 'M_1',\n    name: i18n.t('Male 1 - 4 years')\n  }, {\n    id: 'M_5',\n    name: i18n.t('Male 5 - 9 years')\n  }, {\n    id: 'M_10',\n    name: i18n.t('Male 10 - 14 years')\n  }, {\n    id: 'M_15',\n    name: i18n.t('Male 15 - 19 years')\n  }, {\n    id: 'M_20',\n    name: i18n.t('Male 20 - 24 years')\n  }, {\n    id: 'M_25',\n    name: i18n.t('Male 25 - 29 years')\n  }, {\n    id: 'M_30',\n    name: i18n.t('Male 30 - 34 years')\n  }, {\n    id: 'M_35',\n    name: i18n.t('Male 35 - 39 years')\n  }, {\n    id: 'M_40',\n    name: i18n.t('Male 40 - 44 years')\n  }, {\n    id: 'M_45',\n    name: i18n.t('Male 45 - 49 years')\n  }, {\n    id: 'M_50',\n    name: i18n.t('Male 50 - 54 years')\n  }, {\n    id: 'M_55',\n    name: i18n.t('Male 55 - 59 years')\n  }, {\n    id: 'M_60',\n    name: i18n.t('Male 60 - 64 years')\n  }, {\n    id: 'M_65',\n    name: i18n.t('Male 65 - 69 years')\n  }, {\n    id: 'M_70',\n    name: i18n.t('Male 70 - 74 years')\n  }, {\n    id: 'M_75',\n    name: i18n.t('Male 75 - 79 years')\n  }, {\n    id: 'M_80',\n    name: i18n.t('Male 80 years and above')\n  }, {\n    id: 'F_0',\n    name: i18n.t('Female 0 - 1 years')\n  }, {\n    id: 'F_1',\n    name: i18n.t('Female 1 - 4 years')\n  }, {\n    id: 'F_5',\n    name: i18n.t('Female 5 - 9 years')\n  }, {\n    id: 'F_10',\n    name: i18n.t('Female 10 - 14 years')\n  }, {\n    id: 'F_15',\n    name: i18n.t('Female 15 - 19 years')\n  }, {\n    id: 'F_20',\n    name: i18n.t('Female 20 - 24 years')\n  }, {\n    id: 'F_25',\n    name: i18n.t('Female 25 - 29 years')\n  }, {\n    id: 'F_30',\n    name: i18n.t('Female 30 - 34 years')\n  }, {\n    id: 'F_35',\n    name: i18n.t('Female 35 - 39 years')\n  }, {\n    id: 'F_40',\n    name: i18n.t('Female 40 - 44 years')\n  }, {\n    id: 'F_45',\n    name: i18n.t('Female 45 - 49 years')\n  }, {\n    id: 'F_50',\n    name: i18n.t('Female 50 - 54 years')\n  }, {\n    id: 'F_55',\n    name: i18n.t('Female 55 - 59 years')\n  }, {\n    id: 'F_60',\n    name: i18n.t('Female 60 - 64 years')\n  }, {\n    id: 'F_65',\n    name: i18n.t('Female 65 - 69 years')\n  }, {\n    id: 'F_70',\n    name: i18n.t('Female 70 - 74 years')\n  }, {\n    id: 'F_75',\n    name: i18n.t('Female 75 - 79 years')\n  }, {\n    id: 'F_80',\n    name: i18n.t('Female 80 years and above')\n  }],\n  style: {\n    min: 0,\n    max: 10,\n    palette: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#de2d26', '#a50f15']\n  },\n  maskOperator: 'gt',\n  opacity: 0.9,\n  mosaic: true,\n  tileScale: 4\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../layers.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj_TOTAL',\n  datasetId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj',\n  format: 'ImageCollection',\n  img: 'images/population.png',\n  name: i18n.t('Population'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop_age_sex_cons_unadj',\n  unit: i18n.t('people per hectare'),\n  resolution: {\n    spatial: i18n.t('~100 meters'),\n    temporal: i18n.t('Single point in time'),\n    temporalCoverage: i18n.t('2020')\n  },\n  aggregations: ['min', 'max', 'mean', 'median', 'sum', 'stdDev', 'variance'],\n  defaultAggregations: ['sum', 'mean'],\n  unmaskAggregation: true,\n  periodType: 'YEARLY',\n  filters: [{\n    type: 'eq',\n    arguments: ['year', '$1']\n  }],\n  band: 'population',\n  style: {\n    min: 0,\n    max: 25,\n    palette: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#de2d26', '#a50f15']\n  },\n  maskOperator: 'gt',\n  opacity: 0.9,\n  mosaic: true\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../layers.js';\nimport { EE_MONTHLY } from '../periods.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'ECMWF/ERA5_LAND/MONTHLY_AGGR/total_precipitation_sum',\n  datasetId: 'ECMWF/ERA5_LAND/MONTHLY_AGGR',\n  format: 'ImageCollection',\n  img: 'images/precipitation.png',\n  name: i18n.t('Precipitation monthly'),\n  description: i18n.t('Accumulated liquid and frozen water, including rain and snow, that falls to the surface. Combines model data with observations from across the world.'),\n  source: 'Copernicus Climate Data Store / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_LAND_MONTHLY_AGGR',\n  unit: i18n.t('millimeter'),\n  resolution: {\n    spatial: i18n.t('~11 kilometers'),\n    temporal: i18n.t('Monthly'),\n    temporalCoverage: i18n.t('Febuary 1950 - One month ago')\n  },\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  periodType: EE_MONTHLY,\n  filters: [{\n    type: 'eq',\n    arguments: ['system:index', '$1']\n  }],\n  band: 'total_precipitation_sum',\n  methods: [{\n    name: 'multiply',\n    arguments: [1000]\n  }],\n  style: {\n    min: 0,\n    max: 700,\n    palette: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#084594']\n  },\n  maskOperator: 'gt',\n  opacity: 0.9\n};","import i18n from '@dhis2/d2-i18n';\nimport { EARTH_ENGINE_LAYER } from '../layers.js';\nimport { EE_MONTHLY } from '../periods.js';\nexport default {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'ECMWF/ERA5_LAND/MONTHLY_AGGR/temperature_2m',\n  datasetId: 'ECMWF/ERA5_LAND/MONTHLY_AGGR',\n  format: 'ImageCollection',\n  img: 'images/temperature.png',\n  name: i18n.t('Temperature monthly'),\n  description: i18n.t('Temperature at 2m above the surface. Combines model data with observations from across the world.'),\n  source: 'Copernicus Climate Data Store / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/ECMWF_ERA5_LAND_MONTHLY_AGGR',\n  unit: 'C',\n  resolution: {\n    spatial: i18n.t('~11 kilometers'),\n    temporal: i18n.t('Monthly'),\n    temporalCoverage: i18n.t('Febuary 1950 - One month ago')\n  },\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  periodType: EE_MONTHLY,\n  filters: [{\n    type: 'eq',\n    arguments: ['system:index', '$1']\n  }],\n  band: 'temperature_2m',\n  methods: [{\n    name: 'toFloat',\n    arguments: []\n  }, {\n    name: 'subtract',\n    arguments: [273.15]\n  }],\n  style: {\n    min: 0,\n    max: 35,\n    palette: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d']\n  },\n  opacity: 0.9\n};","import buildings from './buildings_GOOGLE.js';\nimport elevation from './elevation_SRTM.js';\nimport landcover from './landcover_MCD12Q1.js';\nimport legacyBuildings from './legacy/buildings_GOOGLE.js';\nimport legacyNighttime from './legacy/nighttime_DMSP-OLS.js';\nimport legacyPopulationWorldPop from './legacy/population_WorldPop.js';\nimport legacyPopulation100m from './legacy/population_WorldPop_100m.js';\nimport legacyPrecipitation from './legacy/precipitation_pentad_CHIRPS.js';\nimport legacyTemperature from './legacy/temperature_MOD11A2v061.js';\nimport populationAgeSex from './population_age_sex_WorldPop.js';\nimport populationTotal from './population_total_WorldPop.js';\nimport precipitationMonthly from './precipitation_monthly_ERA5-Land.js';\nimport temperatureMonthly from './temperature_monthly_ERA5-Land.js';\nconst earthEngineLayers = [populationTotal, populationAgeSex, buildings, elevation, precipitationMonthly, temperatureMonthly, landcover, legacyBuildings, legacyNighttime, legacyPopulation100m, legacyPopulationWorldPop, legacyPrecipitation, legacyTemperature];\nconst earthEngineLayersDefault = [populationTotal, populationAgeSex, buildings, elevation, precipitationMonthly, temperatureMonthly, landcover];\nexport const earthEngineLayersDefaultIds = earthEngineLayersDefault.map(l => l.layerId);\nexport const getEarthEngineLayer = id => earthEngineLayers.find(l => l.layerId === id);\nexport default earthEngineLayers;","export const dimConf = {\n  data: {\n    id: 'data',\n    value: 'data',\n    param: 'dx',\n    dimensionName: 'dx',\n    objectName: 'dx'\n  },\n  category: {\n    name: 'categories',\n    dimensionName: 'co',\n    objectName: 'co'\n  },\n  indicator: {\n    id: 'indicator',\n    value: 'indicators',\n    param: 'in',\n    dimensionName: 'dx',\n    objectName: 'in',\n    itemType: 'INDICATOR'\n  },\n  dataElement: {\n    id: 'dataElement',\n    value: 'dataElement',\n    param: 'de',\n    dimensionName: 'dx',\n    objectName: 'de',\n    itemType: 'DATA_ELEMENT' // AGGREGATE_DATA_ELEMENT\n  },\n\n  operand: {\n    id: 'operand',\n    value: 'operand',\n    param: 'dc',\n    dimensionName: 'dx',\n    objectName: 'dc',\n    itemType: 'DATA_ELEMENT_OPERAND'\n  },\n  dataSet: {\n    value: 'dataSets',\n    dimensionName: 'dx',\n    objectName: 'ds',\n    itemType: 'DATA_SET'\n  },\n  eventDataItem: {\n    value: 'eventDataItem',\n    dimensionName: 'dx',\n    objectName: 'di'\n  },\n  programDataElement: {\n    value: 'programDataElement',\n    dimensionName: 'dx',\n    objectName: 'di',\n    itemType: 'PROGRAM_DATA_ELEMENT'\n  },\n  programAttribute: {\n    value: 'programAttribute',\n    dimensionName: 'dx',\n    objectName: 'di',\n    itemType: 'PROGRAM_ATTRIBUTE'\n  },\n  programIndicator: {\n    value: 'programIndicator',\n    dimensionName: 'dx',\n    objectName: 'pi',\n    itemType: 'PROGRAM_INDICATOR'\n  },\n  calculation: {\n    value: 'expressionDimensionItems',\n    dimensionName: 'dx',\n    objectName: 'ed',\n    itemType: 'EXPRESSION_DIMENSION_ITEM'\n  },\n  period: {\n    id: 'period',\n    value: 'period',\n    param: 'pe',\n    dimensionName: 'pe',\n    objectName: 'pe'\n  },\n  organisationUnit: {\n    id: 'organisationUnit',\n    value: 'organisationUnit',\n    param: 'ou',\n    dimensionName: 'ou',\n    objectName: 'ou'\n  },\n  reportingRate: {\n    value: 'reportingRate',\n    dimensionName: 'dx',\n    objectName: 'ds',\n    itemType: 'REPORTING_RATE'\n  },\n  value: {\n    id: 'value',\n    value: 'value',\n    param: 'value',\n    dimensionName: 'value',\n    objectName: 'value'\n  }\n};","// Valid value types:\n// https://docs.dhis2.org/master/en/user/html/manage_data_element.html\n// https://play.dhis2.org/demo/api/schemas/dataElement\n\n// Number values types used for style by data item\nexport const numberValueTypes = ['INTEGER', 'INTEGER_NEGATIVE', 'INTEGER_POSITIVE', 'INTEGER_ZERO_OR_POSITIVE', 'NUMBER', 'PERCENTAGE', 'UNIT_INTERVAL'];\n\n// Text value types\nexport const textValueTypes = ['EMAIL', 'LETTER', 'LONG_TEXT', 'PHONE_NUMBER', 'TEXT', 'USERNAME'];\n\n// Boolean value types\nexport const booleanValueTypes = ['BOOLEAN', 'TRUE_ONLY'];\n\n// Date value types\nexport const dateValueTypes = ['DATE', 'AGE'];\n\n// Date-time value types\nexport const datetimeValueTypes = ['DATETIME'];\n\n// Coordinate value types\nexport const coordinateValueTypes = ['COORDINATE'];","import i18n from '@dhis2/d2-i18n';\nimport { isObject } from 'lodash/fp';\nimport { RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../constants/layers.js';\nimport { booleanValueTypes, dateValueTypes, datetimeValueTypes, coordinateValueTypes } from '../constants/valueTypes.js';\nconst getBaseFields = withSubscribers => {\n  const baseFields = ['id', 'user', 'name', 'displayName', 'description', 'displayDescription', 'longitude', 'latitude', 'zoom', 'basemap', 'created', 'lastUpdated', 'access', 'update', 'manage', 'delete', 'href'];\n  if (withSubscribers) {\n    baseFields.push('subscribers');\n  }\n  return baseFields;\n};\nconst analysisFields = () => {\n  const nameProperty = `displayName~rename(name)`;\n  return ['*', `columns[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${nameProperty}]]`, `rows[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${nameProperty}]]`, `filters[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${nameProperty}]]`, 'organisationUnits[id,path]',\n  // Added to retrieve org unit paths\n  'dataDimensionItems', `program[id,${nameProperty}]`, 'programStage[id,displayName~rename(name)]', 'legendSet[id,displayName~rename(name)]', 'trackedEntityType[id,displayName~rename(name)]', 'organisationUnitSelectionMode', '!href', '!publicAccess', '!rewindRelativePeriods', '!userOrganisationUnit', '!userOrganisationUnitChildren', '!userOrganisationUnitGrandChildren', '!externalAccess', '!access', '!relativePeriods', '!columnDimensions', '!rowDimensions', '!filterDimensions', '!user', '!organisationUnitGroups', '!itemOrganisationUnitGroups', '!userGroupAccesses', '!indicators', '!dataElements', '!dataElementOperands', '!dataElementGroups', '!dataSets', '!periods', '!organisationUnitLevels', '!sortOrder', '!topLimit'];\n};\nexport const mapFields = function () {\n  let withSubscribers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  const fields = analysisFields();\n  return `${getBaseFields(withSubscribers).join(',')}, mapViews[${fields.join(',')}]`;\n};\n\n// Add path to org unit dimension  - https://jira.dhis2.org/browse/DHIS2-4212\nexport const addOrgUnitPaths = mapViews => mapViews.map(view => view.rows && view.organisationUnits ? {\n  ...view,\n  rows: view.rows.map(dim => ({\n    ...dim,\n    items: dim.items.map(orgUnit => ({\n      ...orgUnit,\n      path: (view.organisationUnits.find(ou => ou.id === orgUnit.id) || {}).path\n    }))\n  }))\n} : view);\nconst mandatoryDataItemAttributes = ['id', 'name', 'valueType'];\n\n// Checks if a data item is valid (program stage data elements and tracked entity attributes)\nexport const getValidDataItems = items => items.filter(item => isObject(item) && mandatoryDataItemAttributes.every(prop => prop in item));\n\n// Returns split view layer if exist\nexport const getSplitViewLayer = layers => layers.find(layer => layer.renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD);\n\n// Checks if split view map\nexport const isSplitViewMap = layers => !!getSplitViewLayer(layers);\n\n// Get the longest text length from an object property in an array\nexport const getLongestTextLength = (array, key) => array.reduce((text, curr) => curr[key] && String(curr[key]).length > text.length ? String(curr[key]) : text, '').length;\n\n// Formats a DHIS2 coordinate value\nexport const formatCoordinate = value => {\n  try {\n    const array = Array.isArray(value) ? value : JSON.parse(value);\n    if (Array.isArray(array) && array.length === 2 && array.every(v => !isNaN(Number(v)))) {\n      return array.map(v => Number(v).toFixed(6)).join(', ');\n    }\n    return value;\n  } catch (e) {\n    return value;\n  }\n};\n\n// Formats a DHIS2 yes/no or yes only value\nconst formatBoolean = value => {\n  if (value === 'true') {\n    return i18n.t('Yes');\n  }\n  if (value === 'false') {\n    return i18n.t('No');\n  }\n  return value;\n};\n\n// Formats a DHIS2 date string value\nconst formatDate = value => {\n  const datePattern = /^(\\d{4}-\\d{2}-\\d{2})/;\n  const match = value.match(datePattern);\n  return match ? match[1] : value;\n};\n\n// Formats a DHIS2 datetime string value\nexport const formatDatetime = value => {\n  const datetimePattern = /^(\\d{4}-\\d{2}-\\d{2})[T ](\\d{2}:\\d{2})/;\n  const match = value.match(datetimePattern);\n  return match ? `${match[1]} ${match[2]}` : value;\n};\n\n// Returns true if value is not undefined, null, empty string, or already marked as 'Not set'\nexport const hasValue = value => value !== undefined && value !== null && value !== '' && value !== i18n.t('Not set');\n\n// Formats value for display\n// Ref: https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-master/metadata.html#metadata-attribute-value-type-and-validations\nexport const formatValueForDisplay = _ref => {\n  let {\n    value,\n    valueType,\n    options\n  } = _ref;\n  if (!hasValue(value)) {\n    return i18n.t('Not set');\n  }\n  if (typeof value !== 'string') {\n    console.warn(`Warning: The value ${JSON.stringify(value)} is not a string`);\n  }\n  if (options && hasValue(options[value])) {\n    return options[value];\n  }\n  if (coordinateValueTypes.includes(valueType)) {\n    return formatCoordinate(value);\n  }\n  if (booleanValueTypes.includes(valueType)) {\n    return formatBoolean(value);\n  }\n  if (dateValueTypes.includes(valueType)) {\n    return formatDate(value);\n  }\n  if (datetimeValueTypes.includes(valueType)) {\n    return formatDatetime(value);\n  }\n  // TODO formatNumeric\n  return value;\n};\n\n// Sum all numbers in an object recursively\nexport const sumObjectValues = obj => Object.values(obj).reduce((sum, value) => {\n  if (value === null || value === undefined) {\n    return sum;\n  } else if (typeof value === 'object') {\n    return sum + sumObjectValues(value);\n  } else if (typeof value === 'number') {\n    return sum + value;\n  }\n  return sum;\n}, 0);\n\n// Get value given a css var name\nexport const getCssVar = cssVar => Number(getComputedStyle(document.documentElement).getPropertyValue(cssVar).replace('px', ''));","import { DAILY, WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, SIXMONTHLYAPR, YEARLY, FINANCIAL, FYNOV, FYOCT, FYJUL, FYAPR, getFixedPeriodsOptionsById, getRelativePeriodsOptionsById, getRelativePeriodsDetails, PERIOD_TYPE_REGEX } from '@dhis2/analytics';\nimport { periodTypes, periodGroups, FIXED_PERIODS } from '../constants/periods.js';\nimport { sumObjectValues } from '../util/helpers.js';\nconst getYearOffsetFromNow = year => year - new Date(Date.now()).getFullYear();\nconst filterPeriods = (periods, firstDate, lastDate) => periods.filter(p => (!firstDate || p.startDate >= firstDate) && (!lastDate || p.endDate <= lastDate));\nexport const getPeriodTypes = function (includeRelativePeriods) {\n  let hiddenPeriods = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return periodTypes(includeRelativePeriods).filter(_ref => {\n    let {\n      group\n    } = _ref;\n    return !hiddenPeriods.includes(group);\n  });\n};\nexport const getFixedPeriodsByType = _ref2 => {\n  let {\n    periodType,\n    year,\n    firstDate,\n    lastDate,\n    periodsSettings\n  } = _ref2;\n  const period = getFixedPeriodsOptionsById(periodType, periodsSettings);\n  const forceDescendingForYearTypes = !!periodType.match(/^FY|YEARLY/);\n  const offset = getYearOffsetFromNow(year);\n  let periods = period === null || period === void 0 ? void 0 : period.getPeriods({\n    offset,\n    reversePeriods: true\n  });\n  if (!periods) {\n    return null;\n  }\n  if (firstDate || lastDate) {\n    periods = filterPeriods(periods, firstDate, lastDate);\n  }\n\n  // TODO: the reverse() is a workaround for a bug in the analytics\n  // getPeriods function that no longer correctly reverses the order\n  // for YEARLY and FY period types\n  return forceDescendingForYearTypes ? periods.reverse() : periods;\n};\nexport const getRelativePeriods = function () {\n  let hiddenPeriods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return periodGroups.filter(id => !hiddenPeriods.includes(id)).map(id => getRelativePeriodsOptionsById(id).getPeriods()).flat();\n};\nexport const isPeriodAvailable = (id, hiddenPeriods) => !!getRelativePeriods(hiddenPeriods).find(p => p.id === id);\n\n// All period names\nexport const getPeriodNames = () => ({\n  ...getPeriodTypes().reduce((obj, _ref3) => {\n    let {\n      id,\n      name\n    } = _ref3;\n    obj[id] = name;\n    return obj;\n  }, {}),\n  ...getRelativePeriods().reduce((obj, _ref4) => {\n    let {\n      id,\n      name\n    } = _ref4;\n    obj[id] = name;\n    return obj;\n  }, {})\n});\nexport const filterFuturePeriods = (periods, date) => {\n  const now = new Date(date || Date.now());\n  return periods.filter(_ref5 => {\n    let {\n      startDate\n    } = _ref5;\n    return new Date(startDate) < now;\n  });\n};\nconst periodSetting = /keyHide(.*)Periods/;\nexport const getHiddenPeriods = systemSettings => {\n  return Object.keys(systemSettings).filter(setting => periodSetting.test(setting) && systemSettings[setting]).map(setting => setting.match(periodSetting)[1].toUpperCase());\n};\n\n// Count number of periods returned by analytics api (maximum ie. at some point fixed and relative periods will not overlap anymore)\n// Preliminary step\nexport const getPeriodsDurationByType = function (periods, periodsDetails) {\n  let deduplication = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (!deduplication) {\n    return periods.reduce((acc, _ref6) => {\n      var _periodsDetails$id;\n      let {\n        id\n      } = _ref6;\n      acc[id] = acc[id] || {};\n      acc[id].any = ((_periodsDetails$id = periodsDetails[id]) === null || _periodsDetails$id === void 0 ? void 0 : _periodsDetails$id.duration) || 1;\n      return acc;\n    }, {});\n  } else {\n    return periods.reduce((acc, _ref7) => {\n      let {\n        id\n      } = _ref7;\n      const {\n        type = FIXED_PERIODS,\n        offset = 0,\n        duration = 1\n      } = periodsDetails[id] || {};\n      acc[type] = acc[type] || {\n        first: 0,\n        last: 0\n      };\n      if (type === FIXED_PERIODS && !periodsDetails[id]) {\n        acc[type].any = (acc[type].any || 0) + 1;\n      } else {\n        acc[type].first = Math.max(acc[type].first, 1 + offset);\n        acc[type].last = Math.max(acc[type].last, duration - (1 + offset));\n      }\n      return acc;\n    }, {});\n  }\n};\n// Total count\nexport const countPeriods = (periods, deduplication) => {\n  const periodsDetails = getRelativePeriodsDetails();\n  const periodsDurationByType = getPeriodsDurationByType(periods, periodsDetails, deduplication);\n  return sumObjectValues(periodsDurationByType);\n};\nexport const getPeriodTypeFromId = periodId => {\n  if (!periodId) {\n    throw new Error('The periodId cannot be null or empty.');\n  }\n  const match = Object.keys(PERIOD_TYPE_REGEX).find(type => periodId.match(PERIOD_TYPE_REGEX[type]));\n  if (!match) {\n    throw new Error(`No matching period type found for periodId: ${periodId}`);\n  }\n  return match;\n};\n\n// Get period level as index of ordered array\nconst getPeriodLevelFromPeriodType = periodType => {\n  const periodTypesByLevel = [DAILY, WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, SIXMONTHLYAPR, YEARLY, FINANCIAL, FYNOV, FYOCT, FYJUL, FYAPR];\n  return periodTypesByLevel.indexOf(periodType);\n};\n\n// Get distinct levels from an array of periods\nconst getDistinctLevels = periodsWithLevel => [...new Set(periodsWithLevel.map(item => item.level))].sort((a, b) => b - a);\n\n// Add type, level and levelRank to period object\nexport const addPeriodsDetails = periods => {\n  const periodsWithTypeAndLevel = periods.map(period => {\n    const type = getPeriodTypeFromId(period.id);\n    const level = getPeriodLevelFromPeriodType(type);\n    return {\n      ...period,\n      type,\n      level\n    };\n  });\n  const distinctLevels = getDistinctLevels(periodsWithTypeAndLevel);\n  const distinctLevelsCount = distinctLevels.length;\n  const periodsWithTypeLevelAndRank = periodsWithTypeAndLevel.map(period => ({\n    ...period,\n    levelRank: distinctLevels.indexOf(period.level)\n  }));\n  return {\n    periodsWithTypeLevelAndRank,\n    distinctLevelsCount\n  };\n};\nexport const sortPeriodsByLevelAndStartDate = periods => {\n  if (!periods) {\n    return [];\n  }\n  return periods.sort((a, b) => b.level - a.level).sort((a, b) => new Date(a.startDate) - new Date(b.startDate));\n};\nexport const getMinMaxDates = function () {\n  let periods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  if (!periods.length) {\n    return [null, null];\n  }\n  return periods.reduce((acc, _ref8) => {\n    let {\n      startDate,\n      endDate\n    } = _ref8;\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    return [start < acc[0] ? start : acc[0], end > acc[1] ? end : acc[1]];\n  }, [new Date(periods[0].startDate), new Date(periods[0].endDate)]);\n};\nexport const checkLastPeriod = (currentPeriod, sortedPeriods) => {\n  const currentIndex = sortedPeriods.findIndex(p => p.id === currentPeriod.id);\n  return currentIndex === sortedPeriods.length - 1;\n};","//  Copied from https://github.com/dhis2/d2/blob/master/src/uid.js\n\nconst abc = 'abcdefghijklmnopqrstuvwxyz';\nconst letters = abc.concat(abc.toUpperCase());\nconst ALLOWED_CHARS = `0123456789${letters}`;\nconst NUMBER_OF_CODEPOINTS = ALLOWED_CHARS.length;\nconst CODESIZE = 11;\nfunction randomWithMax(max) {\n  return Math.floor(Math.random() * max);\n}\nexport function generateUid() {\n  // First char should be a letter\n  let randomChars = letters.charAt(randomWithMax(letters.length));\n  for (let i = 1; i < CODESIZE; i += 1) {\n    randomChars += ALLOWED_CHARS.charAt(randomWithMax(NUMBER_OF_CODEPOINTS));\n  }\n\n  // return new String( randomChars );\n  return randomChars;\n}\nconst CODE_PATTERN = /^[a-zA-Z]{1}[a-zA-Z0-9]{10}$/;\nexport const isValidUid = code => code ? CODE_PATTERN.test(code) : false;","import i18n from '@dhis2/d2-i18n';\nimport { sortBy } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nimport { RENDERING_STRATEGY_TIMELINE, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../constants/layers.js';\nimport { getPeriodNames } from './periods.js';\nimport { isValidUid } from './uid.js';\n\n/* DIMENSIONS */\n\nconst createDimension = (dimension, items, props) => ({\n  dimension,\n  items,\n  ...props\n});\nconst getDimension = (dimension, arr) => arr.filter(item => item.dimension === dimension)[0];\nconst getDimensionItems = (dimension, arr) => {\n  const dataItems = getDimension(dimension, arr);\n  return dataItems && dataItems.items ? dataItems.items : [];\n};\n\n/* DATA ITEM */\n\nexport const getDataItemFromColumns = function () {\n  let columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('dx', columns)[0];\n};\nexport const setDataItemInColumns = (dataItem, dimension) => {\n  const dim = dimConf[dimension];\n  return dim ? [createDimension(dim.dimensionName, [{\n    id: dataItem.id + (dimension === 'reportingRate' ? '.REPORTING_RATE' : ''),\n    name: dataItem.name,\n    dimensionItemType: dim.itemType,\n    legendSet: dataItem.legendSet // TODO: Keep outside of columns?\n  }], {\n    objectName: dim.objectName\n  })] : [];\n};\n\n/* ORGANISATION UNIT */\n\nexport const getOrgUnitsFromRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('ou', rows) || [];\n};\n\n/* ORGANISATION UNIT NODES */\n\nconst isOrgUnitNode = ou => isValidUid(ou.id);\nexport const getOrgUnitNodesFromRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getOrgUnitsFromRows(rows).filter(isOrgUnitNode);\n};\n\n/* ORGANISATION UNIT PATH */\n// Set organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const setOrgUnitPathInRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let id = arguments.length > 1 ? arguments[1] : undefined;\n  let path = arguments.length > 2 ? arguments[2] : undefined;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const orgUnit = orgUnits.find(ou => ou.id === id);\n  return [createDimension('ou', [...orgUnits.filter(ou => ou.id !== id), {\n    ...orgUnit,\n    path\n  }])];\n};\n\n/* PERIODS */\n\nexport const getPeriodFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('pe', filters)[0];\n};\nexport const getPeriodsFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('pe', filters);\n};\nexport const removePeriodFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return [...filters.filter(f => f.dimension !== 'pe')];\n};\nexport const getPeriodNameFromId = id => getPeriodNames()[id];\nexport const setFiltersFromPeriod = (filters, period) => [...removePeriodFromFilters(filters), createDimension('pe', [{\n  ...period\n}])];\nexport const setFiltersFromPeriods = (filters, periods) => [...removePeriodFromFilters(filters), createDimension('pe', periods)];\n\n/* DYNAMIC DIMENSION FILTERS */\n\nexport const getDimensionsFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filters.filter(d => isValidUid(d.dimension) || d.dimension === null);\n};\nexport const getValidDimensionsFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filters.filter(d => isValidUid(d.dimension) && d.items && d.items.length);\n};\nexport const removeDimensionFromFilters = (filters, index) => {\n  const dimensions = getDimensionsFromFilters(filters);\n  if (!dimensions || !dimensions[index]) {\n    return filters;\n  }\n  return [...filters.filter(f => f.dimension === 'pe'), ...dimensions.filter((d, i) => i !== index)];\n};\nexport const changeDimensionInFilters = (filters, index, filter) => {\n  const dimensions = getDimensionsFromFilters(filters);\n  if (!dimensions || !dimensions[index]) {\n    return filters;\n  }\n  dimensions[index] = filter;\n  return [...filters.filter(f => f.dimension === 'pe'), ...dimensions];\n};\n\n/* FILTERS */\n\nexport const getFiltersFromColumns = function () {\n  let columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const filters = columns.filter(item => item.filter);\n  return filters.length ? filters : null;\n};\n\n// Returns list of filters in a readable format\nexport const getFiltersAsText = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let names = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return filters.map(_ref => {\n    let {\n      dimension,\n      filter\n    } = _ref;\n    const [operator, value] = filter.split(':');\n    const filterName = names[dimension];\n    const filterOperator = getFilterOperatorAsText(operator, value);\n    const filterValue = getFilterValueName(value, operator, names);\n    return `${filterName} ${filterOperator} ${filterValue}`;\n  });\n};\n\n// Returns filter operator in a readable format\nexport const getFilterOperatorAsText = (operator, value) => {\n  // If only one value, use is / is not\n  if (!value.includes(';')) {\n    if (operator === 'IN') {\n      return i18n.t('is');\n    } else if (operator === '!IN') {\n      return i18n.t('is not');\n    }\n  }\n  return {\n    EQ: '=',\n    GT: '>',\n    GE: '>=',\n    LT: '<',\n    LE: '<=',\n    NE: '!=',\n    IN: i18n.t('one of'),\n    '!IN': i18n.t('not one of'),\n    LIKE: i18n.t('contains'),\n    '!LIKE': i18n.t(\"doesn't contains\")\n  }[operator];\n};\n\n// Returns filter value is a readable fromat\nexport const getFilterValueName = (value, operator, names) => {\n  if (operator === 'IN') {\n    if (value === '1') {\n      return i18n.t('true');\n    } else if (value === '0') {\n      return i18n.t('false');\n    }\n  }\n  return value.split(';').map(val => names[val] || val).join(', ');\n};\n\n// Combine data items into one array and exclude certain value types\n/* eslint-disable max-params */\nexport const combineDataItems = function () {\n  let dataItemsA = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let dataItemsB = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let includeTypes = arguments.length > 2 ? arguments[2] : undefined;\n  let excludeTypes = arguments.length > 3 ? arguments[3] : undefined;\n  return sortBy('name', [...dataItemsA, ...dataItemsB].filter(item => (!includeTypes || includeTypes.includes(item.valueType)) && (!excludeTypes || !excludeTypes.includes(item.valueType))));\n};\n\n/* eslint-enable max-params */\n\n// TODO: This is VERY expensive because metaData.items can have 100000+ elements. Consider removing.\n// Builds an object with key/names pairs from an API response\nexport const getApiResponseNames = _ref2 => {\n  let {\n    metaData,\n    headers\n  } = _ref2;\n  return {\n    ...Object.keys(metaData.items).reduce((names, key) => ({\n      ...names,\n      [key]: metaData.items[key].name\n    }), {}),\n    ...headers.reduce((names, header) => ({\n      ...names,\n      [header.name]: header.column\n    }), {}),\n    true: i18n.t('Yes'),\n    false: i18n.t('No')\n  };\n};\n\n// Returns the rendering strategy used\nexport const getRenderingStrategy = _ref3 => {\n  let {\n    mapViews\n  } = _ref3;\n  if (Array.isArray(mapViews)) {\n    if (mapViews.some(view => view.renderingStrategy === RENDERING_STRATEGY_TIMELINE)) {\n      return 'timeline';\n    } else if (mapViews.some(view => view.renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD)) {\n      return 'split-by-period';\n    }\n  }\n  return 'single';\n};","import i18n from '@dhis2/d2-i18n';\nconst getMapLocale = () => ({\n  acres: i18n.t('acres'),\n  Area: i18n.t('Area'),\n  Cancel: i18n.t('Cancel'),\n  'Center map on area': i18n.t('Center map on area'),\n  'Center map on line': i18n.t('Center map on line'),\n  'Click the next position': i18n.t('Click the next position'),\n  'Click where you want to start the measurement': i18n.t('Click where you want to start the measurement'),\n  Delete: i18n.t('Delete'),\n  Distance: i18n.t('Distance'),\n  'Enter fullscreen': i18n.t('Enter fullscreen'),\n  'Exit fullscreen': i18n.t('Exit fullscreen'),\n  'Finish measurement': i18n.t('Finish measurement'),\n  ha: i18n.t('ha'),\n  km: i18n.t('km'),\n  'Measure distances and areas': i18n.t('Measure distances and areas'),\n  mi: i18n.t('mi'),\n  'No data': i18n.t('No data'),\n  Perimeter: i18n.t('Perimeter'),\n  'Reset bearing to north': i18n.t('Reset bearing to north'),\n  'Search for place or address': i18n.t('Search for place or address'),\n  'Zoom in': i18n.t('Zoom in'),\n  'Zoom out': i18n.t('Zoom out'),\n  'Zoom to content': i18n.t('Zoom to content')\n});\nexport default getMapLocale;","import MapApi, { layerTypes, controlTypes, loadEarthEngineWorker, poleOfInaccessibility } from '@dhis2/maps-gl';\nimport getMapLocale from './mapLocale.js';\n\n// Returns a new map instance\nconst map = options => {\n  const glyphs = `${options.baseUrl}/dhis-web-maps/fonts/{fontstack}/{range}.pbf`;\n  const div = document.createElement('div');\n  div.className = 'dhis2-map';\n  div.style.width = '100%';\n  div.style.height = '100%';\n  return new MapApi(div, {\n    ...options,\n    locale: getMapLocale(),\n    glyphs\n  });\n};\nexport { layerTypes, controlTypes, loadEarthEngineWorker, poleOfInaccessibility };\nexport default map;","import i18n from '@dhis2/d2-i18n';\nconst DEFAULT_LOCALE = 'en';\n\n// BCP 47 locale format\nconst dateLocale = locale => locale && locale.includes('_') ? locale.replace('_', '-') : locale;\n\n/**\n * Trims the time part from an ISO date-time string, returning only the date (YYYY-MM-DD).\n * Assumes input is always a valid ISO date or date-time string (e.g., 'YYYY-MM-DD' or 'YYYY-MM-DDThh:mm:ss').\n * @param {String} dateTime\n * @returns {String}\n */\nexport const trimTime = dateTime => dateTime.slice(0, 10);\n\n/**\n * Converts a date string or timestamp to a date object\n * @param {String|Number|Array|Date} date\n * @returns {String}\n */\nconst toDate = date => {\n  if (Array.isArray(date)) {\n    return new Date(date[0], date[1], date[2]);\n  }\n  return new Date(date);\n};\n\n// Simple check if the date part is correctly formatted\nconst shortDateRegexp = /^\\d{4}-\\d{2}-\\d{2}$/;\n\n/**\n * Checks if the date format is valid\n * @param {String} dateString\n * @returns {String}\n */\nconst isValidDateFormat = dateString => dateString && shortDateRegexp.test(dateString.substr(0, 10));\n\n/**\n * Formats a date string, timestamp or date array into format used by DHIS2 and <input> date\n * @param {String|Number|Array|Date} date\n * @returns {String}\n */\nexport const formatDate = date => {\n  const dateObj = toDate(date);\n  const year = dateObj.getFullYear();\n  const month = ('0' + (dateObj.getMonth() + 1)).slice(-2);\n  const day = ('0' + dateObj.getDate()).slice(-2);\n  return `${year}-${month}-${day}`; // xxxx-xx-xx\n};\n\n/**\n * Simple fallback date format if Intl is not supported\n * @param {String} dateString\n * @returns {String}\n */\nconst fallbackDateFormat = dateString => dateString.substr(0, 10);\n\n/**\n * Returns true if the Internationalization API is supported\n * @returns {Boolean}\n */\nconst hasIntlSupport = typeof global.Intl !== 'undefined' && Intl.DateTimeFormat;\n\n/**\n * Formats a date string or timestamp to the default display format: 13 Aug 2018 (en locale)\n * @param {String} dateString\n * @param {String} locale\n * @param {Boolean} showYear\n * @returns {String}\n */\nexport const formatLocaleDate = function (dateString, locale) {\n  let showYear = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return hasIntlSupport ? new Intl.DateTimeFormat(dateLocale(locale || i18n.language || DEFAULT_LOCALE), {\n    year: showYear ? 'numeric' : undefined,\n    month: 'short',\n    day: 'numeric'\n  }).format(toDate(dateString)) : fallbackDateFormat(dateString);\n};\n\n/**\n * Formats a date range\n * @param {String|Array|Number} startDate\n * @param {String|Array|Number} endDate\n * @param {String} locale\n * @param {Boolean} showYear\n * @returns {String}\n */\n//eslint-disable-next-line max-params\nexport const formatStartEndDate = (startDate, endDate, locale, showYear) => {\n  const loc = locale || i18n.language || DEFAULT_LOCALE;\n  return `${formatLocaleDate(startDate, loc, showYear)} - ${formatLocaleDate(endDate, locale, showYear)}`;\n};\n\n/**\n * @param {String} dateString\n * @returns {Array}\n */\nexport const getDateArray = dateString => {\n  const year = parseInt(dateString.substring(0, 4));\n  const month = parseInt(dateString.substring(5, 7)) - 1;\n  const day = parseInt(dateString.substring(8, 10));\n  return [year, month, day];\n};\n\n/**\n * Checks for errors for start and end date strings or timestamps\n * @param {String} startDateStr\n * @param {String} endDateStr\n * @returns {String|null}\n */\nexport const getStartEndDateError = (startDateStr, endDateStr) => {\n  if (!isValidDateFormat(startDateStr)) {\n    return i18n.t('Start date is invalid');\n  } else if (!isValidDateFormat(endDateStr)) {\n    return i18n.t('End date is invalid');\n  }\n  const startDateArr = getDateArray(startDateStr);\n  const endDateArr = getDateArray(endDateStr);\n  if (toDate(endDateArr) < toDate(startDateArr)) {\n    return i18n.t('End date cannot be earlier than start date');\n  }\n  return null;\n};\n\n/**\n * Returns the year of the date, or the current year of no date is passed\n * @param {String|Number|Array|Date} startDate\n * @returns {Number}\n */\nexport const getYear = date => toDate(date || new Date()).getFullYear();","import i18n from '@dhis2/d2-i18n';\nimport { loadEarthEngineWorker } from '../components/map/MapApi.js';\nimport { legacyNighttimeDatasetId } from '../constants/earthEngineLayers/legacy/nighttime_DMSP-OLS.js';\nimport { EE_MONTHLY } from '../constants/periods.js';\nimport { formatStartEndDate } from './time.js';\nexport const classAggregation = ['percentage', 'hectares', 'acres'];\nexport const hasClasses = type => classAggregation.includes(type);\nexport const getStartEndDate = data => formatStartEndDate(data['system:time_start'], data['system:time_end'],\n// - 7200001, // Minus 2 hrs to end the day before\nnull, false);\nconst getStaticFiltersFromDynamic = function (filters) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return filters.map(filter => ({\n    ...filter,\n    arguments: filter.arguments.map(arg => {\n      const match = arg.match(/^\\$([0-9]+)$/);\n      return match ? args[match[1] - 1] : arg;\n    })\n  }));\n};\nconst getMonth = data => {\n  const date = new Date(data['system:time_start']);\n  const month = date.toLocaleString('default', {\n    month: 'long'\n  });\n  const year = date.getFullYear();\n  return `${month} ${year}`;\n};\nexport const getStaticFilterFromPeriod = (period, filters) => {\n  if (!period || !filters) {\n    return;\n  }\n  return getStaticFiltersFromDynamic(filters, period.id);\n};\nconst nonDigits = /^\\D+/g;\n\n// Only used for backward compatibility\nexport const getPeriodFromFilter = (filter, datasetId) => {\n  if (!Array.isArray(filter) || !filter.length) {\n    return null;\n  }\n  const isNightTimeLights = datasetId === legacyNighttimeDatasetId;\n  const {\n    id,\n    name,\n    year,\n    arguments: args\n  } = filter[0];\n  let periodId = id || args[1];\n\n  // Remove non-digits from periodId (needed for backward compatibility for population layers saved before 2.41)\n  if (!isNightTimeLights && nonDigits.test(periodId)) {\n    periodId = Number(periodId.replace(nonDigits, '')); // Remove non-digits\n  }\n\n  return {\n    id: periodId,\n    name,\n    year\n  };\n};\nexport const getAuthTokenFn = engine => async () => {\n  try {\n    const response = await engine.query({\n      token: {\n        resource: 'tokens/google'\n      }\n    });\n    const token = response.token;\n    if (token && token.status === 'ERROR') {\n      throw new Error(i18n.t('This layer requires a Google Earth Engine account. Check the DHIS2 documentation for more information.'));\n    }\n    return {\n      token_type: 'Bearer',\n      ...token\n    };\n  } catch (e) {\n    var _e$details;\n    if (((_e$details = e.details) === null || _e$details === void 0 ? void 0 : _e$details.httpStatusCode) === 500) {\n      throw new Error(i18n.t('This layer requires a Google Earth Engine account. Check the DHIS2 documentation for more information.'));\n    }\n    if (e.message) {\n      throw new Error(e.message);\n    }\n    throw new Error(i18n.t('Cannot get authorization token for Google Earth Engine.'));\n  }\n};\nlet workerPromise;\n\n// Load EE worker and set token\nconst getWorkerInstance = async engine => {\n  const getAuthToken = getAuthTokenFn(engine);\n  workerPromise = workerPromise || (async () => {\n    const EarthEngineWorker = await loadEarthEngineWorker(getAuthToken);\n    return await new EarthEngineWorker();\n  })();\n  return workerPromise;\n};\nexport const getPeriods = async _ref => {\n  let {\n    datasetId,\n    periodType,\n    filters,\n    engine\n  } = _ref;\n  const useSystemIndex = filters.some(f => f.arguments.includes('system:index'));\n  const getPeriod = _ref2 => {\n    let {\n      id,\n      properties\n    } = _ref2;\n    const year = properties.year || new Date(properties['system:time_start']).getFullYear();\n    return periodType === 'YEARLY' ? {\n      id: useSystemIndex ? id : year,\n      name: String(year)\n    } : {\n      id,\n      name: periodType === EE_MONTHLY ? getMonth(properties) : getStartEndDate(properties),\n      year\n    };\n  };\n  const eeWorker = await getWorkerInstance(engine);\n  const {\n    features\n  } = await eeWorker.getPeriods(datasetId);\n  return features.map(getPeriod);\n};","import { compact, sortBy, isString } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nexport const toGeoJson = organisationUnits => sortBy('le', organisationUnits).map(ou => {\n  const coord = JSON.parse(ou.co);\n  let gpid = '';\n  let gppg = '';\n  let type = 'Point';\n  if (ou.ty === 2) {\n    type = 'Polygon';\n    if (ou.co.substring(0, 4) === '[[[[') {\n      type = 'MultiPolygon';\n    }\n  }\n\n  // Grand parent\n  if (isString(ou.pg) && ou.pg.length) {\n    const ids = compact(ou.pg.split('/'));\n\n    // Grand parent id\n    if (ids.length >= 2) {\n      gpid = ids[ids.length - 2];\n    }\n\n    // Grand parent parent graph\n    if (ids.length > 2) {\n      gppg = '/' + ids.slice(0, ids.length - 2).join('/');\n    }\n  }\n  return {\n    type: 'Feature',\n    id: ou.id,\n    geometry: {\n      type,\n      coordinates: coord\n    },\n    properties: {\n      type,\n      id: ou.id,\n      name: ou.na,\n      hasCoordinatesDown: ou.hcd,\n      hasCoordinatesUp: ou.hcu,\n      level: ou.le,\n      grandParentParentGraph: gppg,\n      grandParentId: gpid,\n      parentGraph: ou.pg,\n      parentId: ou.pi,\n      parentName: ou.pn,\n      dimensions: ou.dimensions\n    }\n  };\n}).filter(_ref => {\n  let {\n    geometry\n  } = _ref;\n  return Array.isArray(geometry.coordinates) && geometry.coordinates.length && geometry.coordinates.flat().length;\n});\n\n//eslint-disable-next-line max-params\nexport const drillUpDown = (layerConfig, parentId, parentGraph, level) => ({\n  ...layerConfig,\n  rows: [{\n    dimension: dimConf.organisationUnit.objectName,\n    items: [{\n      id: parentId,\n      path: `${parentGraph}/${parentId}`\n    }, {\n      id: 'LEVEL-' + level\n    }]\n  }],\n  isLoaded: false,\n  isLoading: false\n});\n\n// Called when plugin maps enter or exit fullscreen\nexport const onFullscreenChange = function (map) {\n  let isFullscreen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  map.resize();\n  if (!isFullscreen) {\n    const bounds = map.getLayersBounds();\n    if (Array.isArray(bounds)) {\n      map.fitBounds(bounds);\n    }\n  }\n  map.toggleMultiTouch(!isFullscreen);\n  map.toggleScrollZoom(isFullscreen);\n};","export const formatCount = count => {\n  let num;\n  if (count >= 1000 && count < 9500) {\n    num = (count / 1000).toFixed(1) + 'k'; // 3.3k\n  } else if (count >= 9500 && count < 999500) {\n    num = Math.round(count / 1000) + 'k'; // 33k\n  } else if (count >= 999500 && count < 1950000) {\n    num = (count / 1000000).toFixed(1) + 'M'; // 3.3M\n  } else if (count > 1950000) {\n    num = Math.round(count / 1000000) + 'M'; // 33M\n  }\n\n  return num || count;\n};\n\n// Returns a function that rounds number n to d decimals\nexport const getRoundToPrecisionFn = d => {\n  if (d === undefined) {\n    return n => n;\n  }\n  const m = Math.pow(10, d);\n  return n => Math.round(n * m) / m;\n};\n\n// Returns the number of decimals to round a number to\nexport const getPrecision = function () {\n  let values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  if (values.length) {\n    const sortedValues = [...values].sort((a, b) => a - b);\n    const minValue = sortedValues[0];\n    const maxValue = sortedValues[sortedValues.length - 1];\n    const minMaxGap = maxValue - minValue;\n    const absOfMaxValue = Math.abs(maxValue);\n    if (absOfMaxValue >= 10000) {\n      return 0;\n    }\n    if (absOfMaxValue >= 1000) {\n      return minMaxGap > 10 ? 0 : 1;\n    }\n    if (absOfMaxValue >= 100) {\n      return minMaxGap > 1 ? 1 : 2;\n    }\n    if (absOfMaxValue >= 10) {\n      return minMaxGap > 0.1 ? 2 : 3;\n    }\n    if (absOfMaxValue >= 1) {\n      return minMaxGap > 0.01 ? 3 : 4;\n    }\n    return minMaxGap > 0.001 ? 4 : 5;\n  }\n  return 0;\n};","// Qualitative colors From ColorBrewer (reordered 12-class)\nexport const qualitativeColors = ['#1f78b4', '#ff7f00', '#33a02c', '#a6cee3', '#b2df8a', '#fb9a99', '#fdbf6f', '#cab2d6', '#ffff99', '#b15928', '#6a3d9a', '#e31a1c'];","// This product includes color specifications and designs developed by Cynthia Brewer (http://colorbrewer.org/).\n// Please see license at http://colorbrewer.org/export/LICENSE.txt\nexport default {\n  YlGn: {\n    3: ['#f7fcb9', '#addd8e', '#31a354'],\n    4: ['#ffffcc', '#c2e699', '#78c679', '#238443'],\n    5: ['#ffffcc', '#c2e699', '#78c679', '#31a354', '#006837'],\n    6: ['#ffffcc', '#d9f0a3', '#addd8e', '#78c679', '#31a354', '#006837'],\n    7: ['#ffffcc', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#005a32'],\n    8: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#005a32'],\n    9: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529']\n  },\n  YlGnBu: {\n    3: ['#edf8b1', '#7fcdbb', '#2c7fb8'],\n    4: ['#ffffcc', '#a1dab4', '#41b6c4', '#225ea8'],\n    5: ['#ffffcc', '#a1dab4', '#41b6c4', '#2c7fb8', '#253494'],\n    6: ['#ffffcc', '#c7e9b4', '#7fcdbb', '#41b6c4', '#2c7fb8', '#253494'],\n    7: ['#ffffcc', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],\n    8: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],\n    9: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58']\n  },\n  GnBu: {\n    3: ['#e0f3db', '#a8ddb5', '#43a2ca'],\n    4: ['#f0f9e8', '#bae4bc', '#7bccc4', '#2b8cbe'],\n    5: ['#f0f9e8', '#bae4bc', '#7bccc4', '#43a2ca', '#0868ac'],\n    6: ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#43a2ca', '#0868ac'],\n    7: ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],\n    8: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],\n    9: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081']\n  },\n  BuGn: {\n    3: ['#e5f5f9', '#99d8c9', '#2ca25f'],\n    4: ['#edf8fb', '#b2e2e2', '#66c2a4', '#238b45'],\n    5: ['#edf8fb', '#b2e2e2', '#66c2a4', '#2ca25f', '#006d2c'],\n    6: ['#edf8fb', '#ccece6', '#99d8c9', '#66c2a4', '#2ca25f', '#006d2c'],\n    7: ['#edf8fb', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#005824'],\n    8: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#005824'],\n    9: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b']\n  },\n  PuBuGn: {\n    3: ['#ece2f0', '#a6bddb', '#1c9099'],\n    4: ['#f6eff7', '#bdc9e1', '#67a9cf', '#02818a'],\n    5: ['#f6eff7', '#bdc9e1', '#67a9cf', '#1c9099', '#016c59'],\n    6: ['#f6eff7', '#d0d1e6', '#a6bddb', '#67a9cf', '#1c9099', '#016c59'],\n    7: ['#f6eff7', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016450'],\n    8: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016450'],\n    9: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636']\n  },\n  PuBu: {\n    3: ['#ece7f2', '#a6bddb', '#2b8cbe'],\n    4: ['#f1eef6', '#bdc9e1', '#74a9cf', '#0570b0'],\n    5: ['#f1eef6', '#bdc9e1', '#74a9cf', '#2b8cbe', '#045a8d'],\n    6: ['#f1eef6', '#d0d1e6', '#a6bddb', '#74a9cf', '#2b8cbe', '#045a8d'],\n    7: ['#f1eef6', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#034e7b'],\n    8: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#034e7b'],\n    9: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858']\n  },\n  BuPu: {\n    3: ['#e0ecf4', '#9ebcda', '#8856a7'],\n    4: ['#edf8fb', '#b3cde3', '#8c96c6', '#88419d'],\n    5: ['#edf8fb', '#b3cde3', '#8c96c6', '#8856a7', '#810f7c'],\n    6: ['#edf8fb', '#bfd3e6', '#9ebcda', '#8c96c6', '#8856a7', '#810f7c'],\n    7: ['#edf8fb', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#6e016b'],\n    8: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#6e016b'],\n    9: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b']\n  },\n  RdPu: {\n    3: ['#fde0dd', '#fa9fb5', '#c51b8a'],\n    4: ['#feebe2', '#fbb4b9', '#f768a1', '#ae017e'],\n    5: ['#feebe2', '#fbb4b9', '#f768a1', '#c51b8a', '#7a0177'],\n    6: ['#feebe2', '#fcc5c0', '#fa9fb5', '#f768a1', '#c51b8a', '#7a0177'],\n    7: ['#feebe2', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177'],\n    8: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177'],\n    9: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a']\n  },\n  PuRd: {\n    3: ['#e7e1ef', '#c994c7', '#dd1c77'],\n    4: ['#f1eef6', '#d7b5d8', '#df65b0', '#ce1256'],\n    5: ['#f1eef6', '#d7b5d8', '#df65b0', '#dd1c77', '#980043'],\n    6: ['#f1eef6', '#d4b9da', '#c994c7', '#df65b0', '#dd1c77', '#980043'],\n    7: ['#f1eef6', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#91003f'],\n    8: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#91003f'],\n    9: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f']\n  },\n  OrRd: {\n    3: ['#fee8c8', '#fdbb84', '#e34a33'],\n    4: ['#fef0d9', '#fdcc8a', '#fc8d59', '#d7301f'],\n    5: ['#fef0d9', '#fdcc8a', '#fc8d59', '#e34a33', '#b30000'],\n    6: ['#fef0d9', '#fdd49e', '#fdbb84', '#fc8d59', '#e34a33', '#b30000'],\n    7: ['#fef0d9', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#990000'],\n    8: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#990000'],\n    9: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000']\n  },\n  YlOrRd: {\n    3: ['#ffeda0', '#feb24c', '#f03b20'],\n    4: ['#ffffb2', '#fecc5c', '#fd8d3c', '#e31a1c'],\n    5: ['#ffffb2', '#fecc5c', '#fd8d3c', '#f03b20', '#bd0026'],\n    6: ['#ffffb2', '#fed976', '#feb24c', '#fd8d3c', '#f03b20', '#bd0026'],\n    7: ['#ffffb2', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#b10026'],\n    8: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#b10026'],\n    9: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026']\n  },\n  YlOrBr: {\n    3: ['#fff7bc', '#fec44f', '#d95f0e'],\n    4: ['#ffffd4', '#fed98e', '#fe9929', '#cc4c02'],\n    5: ['#ffffd4', '#fed98e', '#fe9929', '#d95f0e', '#993404'],\n    6: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#d95f0e', '#993404'],\n    7: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#8c2d04'],\n    8: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#8c2d04'],\n    9: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506']\n  },\n  Purples: {\n    3: ['#efedf5', '#bcbddc', '#756bb1'],\n    4: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#6a51a3'],\n    5: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#756bb1', '#54278f'],\n    6: ['#f2f0f7', '#dadaeb', '#bcbddc', '#9e9ac8', '#756bb1', '#54278f'],\n    7: ['#f2f0f7', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#4a1486'],\n    8: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#4a1486'],\n    9: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d']\n  },\n  Blues: {\n    3: ['#deebf7', '#9ecae1', '#3182bd'],\n    4: ['#eff3ff', '#bdd7e7', '#6baed6', '#2171b5'],\n    5: ['#eff3ff', '#bdd7e7', '#6baed6', '#3182bd', '#08519c'],\n    6: ['#eff3ff', '#c6dbef', '#9ecae1', '#6baed6', '#3182bd', '#08519c'],\n    7: ['#eff3ff', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#084594'],\n    8: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#084594'],\n    9: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b']\n  },\n  Greens: {\n    3: ['#e5f5e0', '#a1d99b', '#31a354'],\n    4: ['#edf8e9', '#bae4b3', '#74c476', '#238b45'],\n    5: ['#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c'],\n    6: ['#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#31a354', '#006d2c'],\n    7: ['#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32'],\n    8: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32'],\n    9: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b']\n  },\n  Oranges: {\n    3: ['#fee6ce', '#fdae6b', '#e6550d'],\n    4: ['#feedde', '#fdbe85', '#fd8d3c', '#d94701'],\n    5: ['#feedde', '#fdbe85', '#fd8d3c', '#e6550d', '#a63603'],\n    6: ['#feedde', '#fdd0a2', '#fdae6b', '#fd8d3c', '#e6550d', '#a63603'],\n    7: ['#feedde', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#8c2d04'],\n    8: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#8c2d04'],\n    9: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704']\n  },\n  Reds: {\n    3: ['#fee0d2', '#fc9272', '#de2d26'],\n    4: ['#fee5d9', '#fcae91', '#fb6a4a', '#cb181d'],\n    5: ['#fee5d9', '#fcae91', '#fb6a4a', '#de2d26', '#a50f15'],\n    6: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#de2d26', '#a50f15'],\n    7: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#99000d'],\n    8: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#99000d'],\n    9: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d']\n  },\n  Greys: {\n    3: ['#f0f0f0', '#bdbdbd', '#636363'],\n    4: ['#f7f7f7', '#cccccc', '#969696', '#525252'],\n    5: ['#f7f7f7', '#cccccc', '#969696', '#636363', '#252525'],\n    6: ['#f7f7f7', '#d9d9d9', '#bdbdbd', '#969696', '#636363', '#252525'],\n    7: ['#f7f7f7', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525'],\n    8: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525'],\n    9: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000']\n  },\n  PuOr: {\n    3: ['#f1a340', '#f7f7f7', '#998ec3'],\n    4: ['#e66101', '#fdb863', '#b2abd2', '#5e3c99'],\n    5: ['#e66101', '#fdb863', '#f7f7f7', '#b2abd2', '#5e3c99'],\n    6: ['#b35806', '#f1a340', '#fee0b6', '#d8daeb', '#998ec3', '#542788'],\n    7: ['#b35806', '#f1a340', '#fee0b6', '#f7f7f7', '#d8daeb', '#998ec3', '#542788'],\n    8: ['#b35806', '#e08214', '#fdb863', '#fee0b6', '#d8daeb', '#b2abd2', '#8073ac', '#542788'],\n    9: ['#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788'],\n    10: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    11: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b']\n  },\n  BrBG: {\n    3: ['#d8b365', '#f5f5f5', '#5ab4ac'],\n    4: ['#a6611a', '#dfc27d', '#80cdc1', '#018571'],\n    5: ['#a6611a', '#dfc27d', '#f5f5f5', '#80cdc1', '#018571'],\n    6: ['#8c510a', '#d8b365', '#f6e8c3', '#c7eae5', '#5ab4ac', '#01665e'],\n    7: ['#8c510a', '#d8b365', '#f6e8c3', '#f5f5f5', '#c7eae5', '#5ab4ac', '#01665e'],\n    8: ['#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#c7eae5', '#80cdc1', '#35978f', '#01665e'],\n    9: ['#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e'],\n    10: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    11: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30']\n  },\n  PRGn: {\n    3: ['#af8dc3', '#f7f7f7', '#7fbf7b'],\n    4: ['#7b3294', '#c2a5cf', '#a6dba0', '#008837'],\n    5: ['#7b3294', '#c2a5cf', '#f7f7f7', '#a6dba0', '#008837'],\n    6: ['#762a83', '#af8dc3', '#e7d4e8', '#d9f0d3', '#7fbf7b', '#1b7837'],\n    7: ['#762a83', '#af8dc3', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#7fbf7b', '#1b7837'],\n    8: ['#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837'],\n    9: ['#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837'],\n    10: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    11: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b']\n  },\n  PiYG: {\n    3: ['#e9a3c9', '#f7f7f7', '#a1d76a'],\n    4: ['#d01c8b', '#f1b6da', '#b8e186', '#4dac26'],\n    5: ['#d01c8b', '#f1b6da', '#f7f7f7', '#b8e186', '#4dac26'],\n    6: ['#c51b7d', '#e9a3c9', '#fde0ef', '#e6f5d0', '#a1d76a', '#4d9221'],\n    7: ['#c51b7d', '#e9a3c9', '#fde0ef', '#f7f7f7', '#e6f5d0', '#a1d76a', '#4d9221'],\n    8: ['#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221'],\n    9: ['#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221'],\n    10: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    11: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419']\n  },\n  RdBu: {\n    3: ['#ef8a62', '#f7f7f7', '#67a9cf'],\n    4: ['#ca0020', '#f4a582', '#92c5de', '#0571b0'],\n    5: ['#ca0020', '#f4a582', '#f7f7f7', '#92c5de', '#0571b0'],\n    6: ['#b2182b', '#ef8a62', '#fddbc7', '#d1e5f0', '#67a9cf', '#2166ac'],\n    7: ['#b2182b', '#ef8a62', '#fddbc7', '#f7f7f7', '#d1e5f0', '#67a9cf', '#2166ac'],\n    8: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac'],\n    9: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac'],\n    10: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    11: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061']\n  },\n  RdGy: {\n    3: ['#ef8a62', '#ffffff', '#999999'],\n    4: ['#ca0020', '#f4a582', '#bababa', '#404040'],\n    5: ['#ca0020', '#f4a582', '#ffffff', '#bababa', '#404040'],\n    6: ['#b2182b', '#ef8a62', '#fddbc7', '#e0e0e0', '#999999', '#4d4d4d'],\n    7: ['#b2182b', '#ef8a62', '#fddbc7', '#ffffff', '#e0e0e0', '#999999', '#4d4d4d'],\n    8: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#e0e0e0', '#bababa', '#878787', '#4d4d4d'],\n    9: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d'],\n    10: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    11: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a']\n  },\n  RdYlBu: {\n    3: ['#fc8d59', '#ffffbf', '#91bfdb'],\n    4: ['#d7191c', '#fdae61', '#abd9e9', '#2c7bb6'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#abd9e9', '#2c7bb6'],\n    6: ['#d73027', '#fc8d59', '#fee090', '#e0f3f8', '#91bfdb', '#4575b4'],\n    7: ['#d73027', '#fc8d59', '#fee090', '#ffffbf', '#e0f3f8', '#91bfdb', '#4575b4'],\n    8: ['#d73027', '#f46d43', '#fdae61', '#fee090', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4'],\n    9: ['#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4'],\n    10: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    11: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695']\n  },\n  Spectral: {\n    3: ['#fc8d59', '#ffffbf', '#99d594'],\n    4: ['#d7191c', '#fdae61', '#abdda4', '#2b83ba'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#abdda4', '#2b83ba'],\n    6: ['#d53e4f', '#fc8d59', '#fee08b', '#e6f598', '#99d594', '#3288bd'],\n    7: ['#d53e4f', '#fc8d59', '#fee08b', '#ffffbf', '#e6f598', '#99d594', '#3288bd'],\n    8: ['#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd'],\n    9: ['#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd'],\n    10: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    11: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2']\n  },\n  RdYlGn: {\n    3: ['#fc8d59', '#ffffbf', '#91cf60'],\n    4: ['#d7191c', '#fdae61', '#a6d96a', '#1a9641'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#a6d96a', '#1a9641'],\n    6: ['#d73027', '#fc8d59', '#fee08b', '#d9ef8b', '#91cf60', '#1a9850'],\n    7: ['#d73027', '#fc8d59', '#fee08b', '#ffffbf', '#d9ef8b', '#91cf60', '#1a9850'],\n    8: ['#d73027', '#f46d43', '#fdae61', '#fee08b', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850'],\n    9: ['#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850'],\n    10: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    11: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837']\n  },\n  Accent: {\n    3: ['#7fc97f', '#beaed4', '#fdc086'],\n    4: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99'],\n    5: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0'],\n    6: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f'],\n    7: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17'],\n    8: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666']\n  },\n  Dark2: {\n    3: ['#1b9e77', '#d95f02', '#7570b3'],\n    4: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a'],\n    5: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e'],\n    6: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02'],\n    7: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d'],\n    8: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666']\n  },\n  Paired: {\n    3: ['#a6cee3', '#1f78b4', '#b2df8a'],\n    4: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c'],\n    5: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99'],\n    6: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c'],\n    7: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f'],\n    8: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00'],\n    9: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6'],\n    10: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a'],\n    11: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99'],\n    12: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928']\n  },\n  Pastel1: {\n    3: ['#fbb4ae', '#b3cde3', '#ccebc5'],\n    4: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4'],\n    5: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6'],\n    6: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc'],\n    7: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd'],\n    8: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec'],\n    9: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  },\n  Pastel2: {\n    3: ['#b3e2cd', '#fdcdac', '#cbd5e8'],\n    4: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4'],\n    5: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9'],\n    6: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae'],\n    7: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc'],\n    8: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc']\n  },\n  Set1: {\n    3: ['#e41a1c', '#377eb8', '#4daf4a'],\n    4: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3'],\n    5: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00'],\n    6: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33'],\n    7: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628'],\n    8: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf'],\n    9: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999']\n  },\n  Set2: {\n    3: ['#66c2a5', '#fc8d62', '#8da0cb'],\n    4: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3'],\n    5: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854'],\n    6: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f'],\n    7: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494'],\n    8: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3']\n  },\n  Set3: {\n    3: ['#8dd3c7', '#ffffb3', '#bebada'],\n    4: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072'],\n    5: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3'],\n    6: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462'],\n    7: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69'],\n    8: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5'],\n    9: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9'],\n    10: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd'],\n    11: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5'],\n    12: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f']\n  },\n  YlOrBr_reverse: {\n    3: ['#d95f0e', '#fec44f', '#fff7bc'],\n    4: ['#cc4c02', '#fe9929', '#fed98e', '#ffffd4'],\n    5: ['#993404', '#d95f0e', '#fe9929', '#fed98e', '#ffffd4'],\n    6: ['#993404', '#d95f0e', '#fe9929', '#fec44f', '#fee391', '#ffffd4'],\n    7: ['#8c2d04', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#ffffd4'],\n    8: ['#8c2d04', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#fff7bc', '#ffffe5'],\n    9: ['#662506', '#993404', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#fff7bc', '#ffffe5']\n  },\n  Reds_reverse: {\n    3: ['#de2d26', '#fc9272', '#fee0d2'],\n    4: ['#cb181d', '#fb6a4a', '#fcae91', '#fee5d9'],\n    5: ['#a50f15', '#de2d26', '#fb6a4a', '#fcae91', '#fee5d9'],\n    6: ['#a50f15', '#de2d26', '#fb6a4a', '#fc9272', '#fcbba1', '#fee5d9'],\n    7: ['#99000d', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee5d9'],\n    8: ['#99000d', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee0d2', '#fff5f0'],\n    9: ['#67000d', '#a50f15', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee0d2', '#fff5f0']\n  },\n  YlGn_reverse: {\n    3: ['#31a354', '#addd8e', '#f7fcb9'],\n    4: ['#238443', '#78c679', '#c2e699', '#ffffcc'],\n    5: ['#006837', '#31a354', '#78c679', '#c2e699', '#ffffcc'],\n    6: ['#006837', '#31a354', '#78c679', '#addd8e', '#d9f0a3', '#ffffcc'],\n    7: ['#005a32', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#ffffcc'],\n    8: ['#005a32', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#f7fcb9', '#ffffe5'],\n    9: ['#004529', '#006837', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#f7fcb9', '#ffffe5']\n  },\n  Greens_reverse: {\n    3: ['#31a354', '#a1d99b', '#e5f5e0'],\n    4: ['#238b45', '#74c476', '#bae4b3', '#edf8e9'],\n    5: ['#006d2c', '#31a354', '#74c476', '#bae4b3', '#edf8e9'],\n    6: ['#006d2c', '#31a354', '#74c476', '#a1d99b', '#c7e9c0', '#edf8e9'],\n    7: ['#005a32', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#edf8e9'],\n    8: ['#005a32', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#e5f5e0', '#f7fcf5'],\n    9: ['#00441b', '#006d2c', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#e5f5e0', '#f7fcf5']\n  },\n  Blues_reverse: {\n    3: ['#3182bd', '#9ecae1', '#deebf7'],\n    4: ['#2171b5', '#6baed6', '#bdd7e7', '#eff3ff'],\n    5: ['#08519c', '#3182bd', '#6baed6', '#bdd7e7', '#eff3ff'],\n    6: ['#08519c', '#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#eff3ff'],\n    7: ['#084594', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#eff3ff'],\n    8: ['#084594', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#deebf7', '#f7fbff'],\n    9: ['#08306b', '#08519c', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#deebf7', '#f7fbff']\n  },\n  BuPu_reverse: {\n    3: ['#8856a7', '#9ebcda', '#e0ecf4'],\n    4: ['#88419d', '#8c96c6', '#b3cde3', '#edf8fb'],\n    5: ['#810f7c', '#8856a7', '#8c96c6', '#b3cde3', '#edf8fb'],\n    6: ['#810f7c', '#8856a7', '#8c96c6', '#9ebcda', '#bfd3e6', '#edf8fb'],\n    7: ['#6e016b', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#edf8fb'],\n    8: ['#6e016b', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#e0ecf4', '#f7fcfd'],\n    9: ['#4d004b', '#810f7c', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#e0ecf4', '#f7fcfd']\n  },\n  RdPu_reverse: {\n    3: ['#c51b8a', '#fa9fb5', '#fde0dd'],\n    4: ['#ae017e', '#f768a1', '#fbb4b9', '#feebe2'],\n    5: ['#7a0177', '#c51b8a', '#f768a1', '#fbb4b9', '#feebe2'],\n    6: ['#7a0177', '#c51b8a', '#f768a1', '#fa9fb5', '#fcc5c0', '#feebe2'],\n    7: ['#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#feebe2'],\n    8: ['#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#fde0dd', '#fff7f3'],\n    9: ['#49006a', '#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#fde0dd', '#fff7f3']\n  },\n  PuRd_reverse: {\n    3: ['#dd1c77', '#c994c7', '#e7e1ef'],\n    4: ['#ce1256', '#df65b0', '#d7b5d8', '#f1eef6'],\n    5: ['#980043', '#dd1c77', '#df65b0', '#d7b5d8', '#f1eef6'],\n    6: ['#980043', '#dd1c77', '#df65b0', '#c994c7', '#d4b9da', '#f1eef6'],\n    7: ['#91003f', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#f1eef6'],\n    8: ['#91003f', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#e7e1ef', '#f7f4f9'],\n    9: ['#67001f', '#980043', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#e7e1ef', '#f7f4f9']\n  },\n  Greys_reverse: {\n    3: ['#636363', '#bdbdbd', '#f0f0f0'],\n    4: ['#525252', '#969696', '#cccccc', '#f7f7f7'],\n    5: ['#252525', '#636363', '#969696', '#cccccc', '#f7f7f7'],\n    6: ['#252525', '#636363', '#969696', '#bdbdbd', '#d9d9d9', '#f7f7f7'],\n    7: ['#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f7f7f7'],\n    8: ['#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f0f0f0', '#ffffff'],\n    9: ['#000000', '#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f0f0f0', '#ffffff']\n  }\n};","import { hcl } from 'd3-color';\nimport { isString } from 'lodash/fp';\nimport colorbrewer from '../constants/colorbrewer.js';\n\n// Allowed color scales from ColorBrewer for EE (needs to have at least 9 classes)\nexport const colorScales = ['YlOrBr', 'Reds', 'YlGn', 'Greens', 'Blues', 'BuPu', 'RdPu', 'PuRd', 'Greys', 'YlOrBr_reverse', 'Reds_reverse', 'YlGn_reverse', 'Greens_reverse', 'Blues_reverse', 'BuPu_reverse', 'RdPu_reverse', 'PuRd_reverse', 'Greys_reverse', 'PuOr', 'BrBG', 'PRGn', 'PiYG', 'RdBu', 'RdGy', 'RdYlBu', 'Spectral', 'RdYlGn', 'Paired', 'Pastel1', 'Set1', 'Set3'];\n\n// Returns a color brewer scale for a number of classes\nexport const getColorPalette = (scale, classes) => colorbrewer[scale][classes];\n\n// Returns color scale name for a palette\n// join(',') is used to compare two arrays of colors\nexport const getColorScale = palette => colorScales.find(name => colorbrewer[name][palette.length].join(',') === palette.join(','));\nexport const defaultColorScaleName = 'YlOrBr';\nexport const defaultClasses = 5;\nexport const defaultColorScale = getColorPalette(defaultColorScaleName, defaultClasses);\n\n// Correct colors not adhering to the css standard (add missing #)\nexport const cssColor = color => {\n  if (!isString(color)) {\n    return color;\n  } else if (color === '##normal') {\n    // ##normal is used in old map favorites\n    return null; // Will apply default color\n  }\n\n  return (/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(color) ? '#' : '') + color;\n};\n\n// Returns an unique color (first from an array, then random but still unique)\nexport const getUniqueColor = defaultColors => {\n  const colors = [...defaultColors];\n  function randomColor() {\n    const color = '#000000'.replace(/0/g, () => (~~(Math.random() * 16)).toString(16));\n\n    // Recursive until color is unique\n    if (colors.includes(color)) {\n      return randomColor();\n    }\n    colors.push(color);\n    return color;\n  }\n  return index => colors[index] || randomColor();\n};\n\n// Returns true if a color is dark\nexport const isDarkColor = color => hcl(color).l < 70;\n\n// Returns constrasting color\nexport const getContrastColor = color => isDarkColor(color) ? '#fff' : '#000';","import i18n from '@dhis2/d2-i18n';\nimport { uniqBy } from 'lodash/fp';\nimport { qualitativeColors } from '../constants/colors.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, ORG_UNIT_RADIUS_SMALL, STYLE_TYPE_COLOR, STYLE_TYPE_SYMBOL, NONE } from '../constants/layers.js';\nimport { getUniqueColor } from './colors.js';\nconst getGroupColor = groups => {\n  const groupsWithoutColors = groups.filter(g => !g.color);\n  const colors = getUniqueColor(qualitativeColors);\n  return group => {\n    const index = groupsWithoutColors.findIndex(g => g.id === group.id);\n    return colors(index);\n  };\n};\n\n// Default symbol 21-25 are coloured circles\nconst getGroupSymbol = groups => {\n  const groupsWithoutSymbols = groups.filter(g => !g.symbol);\n  return group => {\n    const index = groupsWithoutSymbols.findIndex(g => g.id === group.id);\n    return index < 5 ? `${21 + index}.png` : '25.png';\n  };\n};\nexport const parseGroupSet = _ref => {\n  let {\n    organisationUnitGroups: groups\n  } = _ref;\n  groups.sort((a, b) => a.name.localeCompare(b.name));\n  const getColor = getGroupColor(groups);\n  const getSymbol = getGroupSymbol(groups);\n  return groups.map(group => ({\n    ...group,\n    color: group.color || getColor(group),\n    symbol: group.symbol || getSymbol(group)\n  }));\n};\nexport const ORG_UNITS_GROUP_SET_QUERY = {\n  groupSets: {\n    resource: 'organisationUnitGroupSets',\n    id: _ref2 => {\n      let {\n        id\n      } = _ref2;\n      return id;\n    },\n    params: {\n      fields: ['name,organisationUnitGroups[id,name,color,symbol]']\n    }\n  }\n};\nexport const ORG_UNIT_QUERY = {\n  orgUnit: {\n    resource: 'organisationUnits',\n    id: _ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id;\n    },\n    params: _ref4 => {\n      let {\n        nameProperty\n      } = _ref4;\n      return {\n        fields: [`${nameProperty}~rename(name)`]\n      };\n    }\n  }\n};\nexport const getPointItems = data => data.filter(d => d.ty === 1);\nexport const getPolygonItems = data => data.filter(d => d.ty === 2);\nexport const getOrgUnitStyle = (dimensions, groupSet) => groupSet && groupSet.organisationUnitGroups && dimensions && dimensions[groupSet.id] ? groupSet.organisationUnitGroups.find(g => g.id === dimensions[groupSet.id]) : {};\nexport const getOrgUnitGroupLegendItems = function () {\n  let groups = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let useColor = arguments.length > 1 ? arguments[1] : undefined;\n  let contextPath = arguments.length > 2 ? arguments[2] : undefined;\n  return groups.map(_ref5 => {\n    let {\n      name,\n      color = true,\n      symbol\n    } = _ref5;\n    return useColor ? {\n      name,\n      color\n    } : {\n      name,\n      image: `${contextPath}/images/orgunitgroup/${symbol}`\n    };\n  });\n};\nexport const getStyledOrgUnits = _ref6 => {\n  let {\n    features = [],\n    groupSet = {},\n    config: {\n      organisationUnitColor = ORG_UNIT_COLOR,\n      radiusLow = ORG_UNIT_RADIUS\n    },\n    baseUrl,\n    orgUnitLevels\n  } = _ref6;\n  const {\n    name,\n    styleType = orgUnitLevels ? STYLE_TYPE_COLOR : STYLE_TYPE_SYMBOL,\n    organisationUnitGroups = []\n  } = groupSet;\n  const isFacilityLayer = !orgUnitLevels;\n  let levelWeight;\n  let levelItems = [];\n  if (!isFacilityLayer) {\n    const levels = uniqBy(f => f.properties.level, features).map(f => f.properties.level).sort();\n    levelWeight = level => Math.pow(levels.length - levels.indexOf(level), 1.2);\n    levelItems = levels.map(level => ({\n      name: orgUnitLevels[level],\n      color: organisationUnitColor,\n      weight: levelWeight(level)\n    }));\n  }\n  const useColor = styleType === STYLE_TYPE_COLOR;\n  let styledFeatures = features.map(f => {\n    const isPoint = f.geometry.type === 'Point';\n    const {\n      hasAdditionalGeometry\n    } = f.properties;\n    const {\n      color,\n      symbol\n    } = getOrgUnitStyle(f.properties.dimensions, groupSet);\n    let radius;\n    if (isPoint) {\n      radius = hasAdditionalGeometry ? ORG_UNIT_RADIUS_SMALL + 1 : radiusLow;\n    }\n    const properties = {\n      ...f.properties,\n      radius\n    };\n    if (useColor && color) {\n      properties.color = hasAdditionalGeometry ? ORG_UNIT_COLOR : color;\n    } else if (symbol) {\n      properties.iconUrl = `${baseUrl}/images/orgunitgroup/${symbol}`;\n    }\n    if (properties.level && levelWeight) {\n      properties.weight = levelWeight(f.properties.level);\n    }\n    return {\n      ...f,\n      properties\n    };\n  });\n\n  // Only include facilities having a group membership\n  if (isFacilityLayer && groupSet.id && !useColor) {\n    styledFeatures = styledFeatures.filter(f => f.properties.iconUrl);\n  }\n  const groupItems = getOrgUnitGroupLegendItems(organisationUnitGroups, useColor, baseUrl);\n  const facilityItems = isFacilityLayer && !groupSet.id ? [{\n    name: i18n.t('Facility'),\n    color: organisationUnitColor,\n    radius: radiusLow\n  }] : [];\n  return {\n    styledFeatures,\n    legend: {\n      unit: name,\n      items: [...levelItems, ...groupItems, ...facilityItems]\n    }\n  };\n};\n\n// Converts \"LEVEL-x\" to newer \"LEVEL-uid\" format\nexport const translateOrgUnitLevels = function (orgUnits) {\n  let orgUnitLevels = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  const items = (orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.items) || [];\n  return items.map(item => {\n    const levelNumber = item.id.match(/^LEVEL-([0-9])+$/);\n    if (levelNumber) {\n      const level = orgUnitLevels.find(l => l.level === Number(levelNumber[1]));\n      if (level) {\n        const {\n          id,\n          name\n        } = level;\n        return {\n          id: `LEVEL-${id}`,\n          name\n        };\n      }\n    }\n    return item;\n  });\n};\n\n// Returns coordinate field from layer config\nexport const getCoordinateField = _ref7 => {\n  let {\n    orgUnitField,\n    orgUnitFieldDisplayName\n  } = _ref7;\n  return orgUnitField && orgUnitField !== NONE ? {\n    id: orgUnitField,\n    name: orgUnitFieldDisplayName\n  } : null;\n};\n\n// Combines main org unit features with associated geometries\nexport const addAssociatedGeometries = (mainFeatures, associatedGeometries) => {\n  // Return main features if there are no associated geomteries\n  if (!associatedGeometries) {\n    return mainFeatures;\n  }\n\n  // If there are associated geometries we only return main features that are\n  // points - and only if the associated geometry is not existing or not a point.\n  // The returned main feature points with an associated geometry gets an extra\n  // \"hasAdditionalGeometry\" property (used to only show the same org unit once\n  // in the data table).\n  return mainFeatures.filter(f => {\n    const associated = associatedGeometries.find(a => a.id === f.id);\n    if (f.geometry.type === 'Point') {\n      return associated ? associated.geometry.type !== 'Point' : true;\n    } else {\n      return false;\n    }\n  }).map(f => {\n    const associated = associatedGeometries.find(a => a.id === f.id);\n    return associated ? {\n      ...f,\n      properties: {\n        ...f.properties,\n        hasAdditionalGeometry: true\n      }\n    } : f;\n  }).concat(associatedGeometries);\n};","import { isString, isObject, sortBy } from 'lodash/fp';\nimport { EXTERNAL_LAYER } from '../constants/layers.js';\nexport const getMigratedMapConfig = (config, defaultBasemapId) => upgradeMapViews(upgradeGisAppLayers(extractBasemap(config, defaultBasemapId)));\n\n// Different ways of specifying a basemap - TODO: simplify!\nconst extractBasemap = (config, defaultBasemapId) => {\n  const externalBasemap = config.mapViews.find(view => view.layer === EXTERNAL_LAYER && JSON.parse(view.config || {}).mapLayerPosition === 'BASEMAP');\n  let basemap;\n  let mapViews = config.mapViews;\n  if (externalBasemap) {\n    basemap = JSON.parse(externalBasemap.config);\n    mapViews = config.mapViews.filter(view => view.id !== externalBasemap.id);\n  } else if (isString(config.basemap)) {\n    basemap = config.basemap === 'none' ? {\n      id: defaultBasemapId,\n      isVisible: false\n    } : {\n      id: config.basemap\n    };\n  } else if (isObject(config.basemap)) {\n    basemap = config.basemap;\n  } else {\n    basemap = {\n      id: defaultBasemapId\n    };\n  }\n  return {\n    ...config,\n    basemap: basemap,\n    mapViews: mapViews\n  };\n};\n\n// Detection if map config is from previous GIS app\n// TODO: Better to store app version as part of config object?\n\n// Layer order in the previous GIS app (bottom to top)\nconst gisAppLayerOrder = {\n  externalLayer: 1,\n  // TODO: Distinguish between basemaps and overlays\n  earthEngine: 2,\n  thematic4: 3,\n  thematic3: 4,\n  thematic2: 5,\n  thematic1: 6,\n  boundary: 7,\n  facility: 8,\n  event: 9\n};\nconst isGisAppFormat = layers => layers.some(config => config.layer.match(/thematic[1-4]/));\nconst upgradeGisAppLayers = config => {\n  const {\n    mapViews\n  } = config;\n  if (!isGisAppFormat(mapViews)) {\n    return config;\n  }\n  const updatedMapViews = sortBy(mapView => gisAppLayerOrder[mapView.layer], mapViews).map(orderedMapView => ({\n    ...orderedMapView,\n    layer: orderedMapView.layer.replace(/\\d$/, '') // Remove thematic number used in previous versions\n  }));\n\n  return {\n    ...config,\n    mapViews: updatedMapViews\n  };\n};\nconst upgradeMapViews = config => {\n  const needsUpgrade = config.mapViews.some(view => view.layer === 'boundary' || typeof view.colorScale === 'string');\n  if (!needsUpgrade) {\n    return config;\n  }\n  const upgradedViews = config.mapViews.map(view => {\n    let layer = view.layer;\n    if (layer === 'boundary') {\n      layer = 'orgUnit';\n    }\n    let colorScale = view.colorScale;\n    if (typeof colorScale === 'string') {\n      const parts = colorScale.split(',');\n      colorScale = parts.length === 1 ? parts[0] : parts;\n    }\n    return {\n      ...view,\n      layer,\n      colorScale\n    };\n  });\n  return {\n    ...config,\n    mapViews: upgradedViews\n  };\n};","import { getMigratedMapConfig } from './getMigratedMapConfig.js';\nimport { mapFields } from './helpers.js';\nconst MAP_QUERY = {\n  resource: 'maps',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: _ref2 => {\n    let {\n      withSubscribers\n    } = _ref2;\n    return {\n      fields: mapFields(withSubscribers)\n    };\n  }\n};\nconst MAP_NAME_DESC_QUERY = {\n  resource: 'maps',\n  id: _ref3 => {\n    let {\n      id\n    } = _ref3;\n    return id;\n  },\n  params: {\n    fields: 'id,name,description,displayName,displayDescription'\n  }\n};\nconst MAP_SUBSCRIBERS_QUERY = {\n  resource: 'maps',\n  id: _ref4 => {\n    let {\n      id\n    } = _ref4;\n    return id;\n  },\n  params: {\n    fields: 'subscribers'\n  }\n};\n\n// API requests\n\nexport const fetchMap = async _ref5 => {\n  let {\n    id,\n    engine,\n    defaultBasemap,\n    withSubscribers\n  } = _ref5;\n  return engine.query({\n    map: MAP_QUERY\n  }, {\n    variables: {\n      id,\n      withSubscribers\n    }\n  }).then(map => getMigratedMapConfig(map.map, defaultBasemap)).catch(() => {\n    throw new Error(`Could not load map with id \"${id}\"`);\n  });\n};\nexport const fetchMapNameDesc = async _ref6 => {\n  let {\n    id,\n    engine\n  } = _ref6;\n  return engine.query({\n    map: MAP_NAME_DESC_QUERY\n  }, {\n    variables: {\n      id\n    }\n  }).catch(() => {\n    throw new Error(`Could not load map with id \"${id}\"`);\n  });\n};\nexport const fetchMapSubscribers = async _ref7 => {\n  let {\n    id,\n    engine\n  } = _ref7;\n  return engine.query({\n    map: MAP_SUBSCRIBERS_QUERY\n  }, {\n    variables: {\n      id\n    }\n  }).then(map => map.map).catch(() => {\n    throw new Error(`Could not load map with id \"${id}\"`);\n  });\n};\nexport const EXTERNAL_MAP_LAYERS_QUERY = {\n  resource: 'externalMapLayers',\n  params: {\n    fields: 'id,displayName~rename(name),service,url,attribution,mapService,layers,imageFormat,mapLayerPosition,legendSet,legendSetUrl',\n    paging: false\n  }\n};\n\n// Fetch a single externalLayer\nexport const EXTERNAL_MAP_LAYER_QUERY = {\n  resource: 'externalMapLayers',\n  id: _ref8 => {\n    let {\n      id\n    } = _ref8;\n    return id;\n  },\n  params: {\n    fields: 'id,displayName~rename(name),service,url,attribution,mapService,layers,imageFormat,mapLayerPosition,legendSet,legendSetUrl'\n  }\n};\nexport const OPTION_SET_QUERY = {\n  optionSet: {\n    resource: 'optionSets',\n    id: _ref9 => {\n      let {\n        id\n      } = _ref9;\n      return id;\n    },\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'options[id,code,displayName~rename(name)]'],\n      paging: false\n    }\n  }\n};\n\n// Load a single legend set\nexport const LEGEND_SET_QUERY = {\n  legendSet: {\n    resource: 'legendSets',\n    id: _ref10 => {\n      let {\n        id\n      } = _ref10;\n      return id;\n    },\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'legends[id,displayName~rename(name),startValue,endValue,color]'],\n      paging: false\n    }\n  }\n};\nexport const GEOFEATURES_QUERY = {\n  geoFeatures: {\n    resource: 'geoFeatures',\n    params: _ref11 => {\n      let {\n        orgUnitIds,\n        keyAnalysisDisplayProperty,\n        includeGroupSets,\n        coordinateField,\n        userId\n      } = _ref11;\n      return {\n        ou: `ou:${orgUnitIds.join(';')}`,\n        displayProperty: keyAnalysisDisplayProperty,\n        includeGroupSets,\n        coordinateField,\n        _: userId\n      };\n    }\n  }\n};","import i18n from '@dhis2/d2-i18n';\nimport { precisionRound } from 'd3-format';\nimport { WARNING_NO_OU_COORD, WARNING_NO_GEOMETRY_COORD, ERROR_CRITICAL } from '../constants/alerts.js';\nimport { getEarthEngineLayer } from '../constants/earthEngineLayers/index.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { hasClasses, getStaticFilterFromPeriod, getPeriodFromFilter } from '../util/earthEngine.js';\nimport { toGeoJson } from '../util/map.js';\nimport { getRoundToPrecisionFn } from '../util/numbers.js';\nimport { getCoordinateField, addAssociatedGeometries } from '../util/orgUnits.js';\nimport { GEOFEATURES_QUERY } from '../util/requests.js';\nconst earthEngineLoader = async _ref => {\n  let {\n    config,\n    engine,\n    keyAnalysisDisplayProperty,\n    userId\n  } = _ref;\n  const {\n    format,\n    rows,\n    aggregationType\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const coordinateField = getCoordinateField(config);\n  const alerts = [];\n  let layerConfig = {};\n  let dataset;\n  let features;\n  if (orgUnits && orgUnits.length) {\n    const orgUnitIds = orgUnits.map(item => item.id);\n    let mainFeatures;\n    let associatedGeometries;\n    try {\n      const geoFeatureData = await engine.query(GEOFEATURES_QUERY, {\n        variables: {\n          orgUnitIds,\n          keyAnalysisDisplayProperty,\n          userId\n        }\n      });\n      mainFeatures = geoFeatureData.geoFeatures ? toGeoJson(geoFeatureData.geoFeatures) : null;\n      if (coordinateField) {\n        const coordFieldData = await engine.query(GEOFEATURES_QUERY, {\n          variables: {\n            orgUnitIds,\n            keyAnalysisDisplayProperty,\n            coordinateField: coordinateField.id,\n            userId\n          }\n        });\n        associatedGeometries = coordFieldData.geoFeatures ? toGeoJson(coordFieldData.geoFeatures) : null;\n        if (!associatedGeometries.length) {\n          alerts.push({\n            code: WARNING_NO_GEOMETRY_COORD,\n            message: coordinateField.name\n          });\n        }\n      }\n      features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n      if (!features.length) {\n        alerts.push({\n          code: WARNING_NO_OU_COORD,\n          message: i18n.t('Earth Engine layer')\n        });\n      }\n    } catch (error) {\n      alerts.push({\n        code: ERROR_CRITICAL,\n        message: error.message || error\n      });\n    }\n  }\n  if (typeof config.config === 'string') {\n    // From database as favorite\n    layerConfig = JSON.parse(config.config);\n    if (layerConfig.image) {\n      var _layerConfig$filter;\n      // Backward compability for layers with periods saved before 2.36\n      const filter = (_layerConfig$filter = layerConfig.filter) === null || _layerConfig$filter === void 0 ? void 0 : _layerConfig$filter[0];\n      if (filter) {\n        var _filter$arguments;\n        const id = (_filter$arguments = filter.arguments) === null || _filter$arguments === void 0 ? void 0 : _filter$arguments[1];\n        const name = String(layerConfig.image);\n        const year = typeof id === 'string' && id.length > 4 ? parseInt(id.substring(0, 4), 10) : undefined;\n        layerConfig.period = {\n          id,\n          name,\n          year\n        };\n        delete layerConfig.filter;\n      }\n      delete layerConfig.image;\n    } else if (layerConfig.filter) {\n      // Backward compability for layers saved before v100.6.0\n      layerConfig.period = getPeriodFromFilter(filter, layerConfig.id);\n      delete layerConfig.filter;\n    }\n    if (layerConfig.params) {\n      // Backward compability for layers saved before v100.6.0\n      layerConfig.style = layerConfig.params;\n      if (typeof layerConfig.params.palette === 'string') {\n        layerConfig.style.palette = layerConfig.params.palette.split(',');\n      }\n      delete layerConfig.params;\n    }\n    dataset = getEarthEngineLayer(layerConfig.id);\n    if (dataset) {\n      delete layerConfig.id;\n    }\n    delete config.config;\n    // Remove the always empty filters array from saved map layer object\n    // so as not to overwrite the filters array from the layer config\n    delete config.filters;\n  } else {\n    dataset = getEarthEngineLayer(layerConfig.id);\n  }\n  const layer = {\n    ...dataset,\n    ...config,\n    ...layerConfig\n  };\n  const {\n    unit,\n    period,\n    filters,\n    description,\n    source,\n    sourceUrl,\n    band,\n    bands,\n    style,\n    maskOperator\n  } = layer;\n  const {\n    name\n  } = dataset || config;\n  const data = Array.isArray(features) && features.length ? features : undefined;\n  const hasBand = b => Array.isArray(band) ? band.includes(b.id) : band === b.id;\n  const groups = band && Array.isArray(bands) && bands.length ? bands.filter(hasBand) : null;\n  const legend = {\n    ...layer.legend,\n    items: Array.isArray(style) ? style : null,\n    title: name,\n    period: period === null || period === void 0 ? void 0 : period.name,\n    groups,\n    unit,\n    description,\n    source,\n    sourceUrl\n  };\n\n  // Create/update legend items from params\n  if (format !== 'FeatureCollection' && !hasClasses(aggregationType) && style !== null && style !== void 0 && style.palette) {\n    legend.items = createLegend(style, !maskOperator);\n  }\n  const filter = getStaticFilterFromPeriod(period, filters);\n  return {\n    ...layer,\n    legend,\n    name,\n    data,\n    filter,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport const createLegend = (_ref2, showBelowMin) => {\n  let {\n    min,\n    max,\n    palette\n  } = _ref2;\n  const step = (max - min) / (palette.length - (showBelowMin ? 2 : 1));\n  const precision = precisionRound(step, max);\n  const valueFormat = getRoundToPrecisionFn(precision);\n  let from = valueFormat(min);\n  let to = valueFormat(min + step);\n  return palette.map((color, index) => {\n    const item = {\n      color\n    };\n    if (index === 0 && showBelowMin) {\n      // Less than min\n      item.from = -Infinity;\n      item.to = min;\n      item.name = '< ' + min;\n      to = min;\n    } else if (+from < max) {\n      item.from = +from;\n      item.to = +to;\n      item.name = from + ' - ' + to;\n    } else {\n      // Higher than max\n      item.from = +from;\n      item.name = '> ' + from;\n    }\n    from = to;\n    to = valueFormat(min + step * (index + (showBelowMin ? 1 : 2)));\n    return item;\n  });\n};\nexport default earthEngineLoader;","import i18n from '@dhis2/d2-i18n';\nexport const EVENT_STATUS_ALL = 'ALL';\nexport const EVENT_STATUS_ACTIVE = 'ACTIVE';\nexport const EVENT_STATUS_COMPLETED = 'COMPLETED';\nexport const getEventStatuses = () => [{\n  id: EVENT_STATUS_ALL,\n  name: i18n.t('All')\n}, {\n  id: EVENT_STATUS_ACTIVE,\n  name: i18n.t('Active')\n}, {\n  id: EVENT_STATUS_COMPLETED,\n  name: i18n.t('Completed')\n}];","import findIndex from 'lodash/findIndex';\nexport const EVENT_ID_FIELD = 'psi';\n\n// TODO: Remove name mapping logic, use server params DataIDScheme / OuputIDScheme instead\n/* eslint-disable max-params */\nexport const createEventFeature = (headers, names, options, event, id, getGeometry) => {\n  const geometry = getGeometry(event);\n  const properties = event.reduce((props, value, i) => {\n    const header = headers[i];\n    let option;\n    if (header.optionSet) {\n      option = options.find(option => option.code === value);\n    }\n    return {\n      id,\n      type: geometry === null || geometry === void 0 ? void 0 : geometry.type,\n      ...props,\n      [names[header.name] || header.name]: option ? option.name : value\n    };\n  }, {});\n  return {\n    type: 'Feature',\n    id,\n    properties,\n    geometry\n  };\n};\nexport const buildEventGeometryGetter = headers => {\n  const geomCol = findIndex(headers, h => h.name === 'geometry');\n  return event => JSON.parse(event[geomCol]);\n};\nexport const createEventFeatures = function (response) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const names = {\n    ...response.headers.reduce((names, header) => ({\n      ...names,\n      [header.name]: header.column\n    }), {}),\n    ...config.columnNames // TODO: Check if columnNames is still needed\n  };\n\n  const idColName = config.idCol || EVENT_ID_FIELD;\n  const idCol = findIndex(response.headers, h => h.name === idColName);\n  const getGeometry = buildEventGeometryGetter(response.headers, config && config.eventCoordinateField);\n  const options = Object.values(response.metaData.items);\n  const data = response.rows.map(row => createEventFeature(response.headers, config.outputIdScheme !== 'ID' ? names : {}, options, row, row[idCol], getGeometry));\n\n  // Sort to draw polygons before points\n  data.sort(feature => feature.geometry.type === 'Polygon' ? -1 : 0);\n  return {\n    data,\n    names\n  };\n};\n\n// Include column for data element used for styling (if not already used in filter)\nexport const addStyleDataItem = (dataItems, styleDataItem) => styleDataItem && !dataItems.find(item => item.dimension === styleDataItem.id) ? [...dataItems, {\n  dimension: styleDataItem.id,\n  name: styleDataItem.name\n}] : [...dataItems];\nexport const getBounds = bbox => {\n  if (!bbox) {\n    return null;\n  }\n  const extent = bbox.match(/([-\\d.]+)/g);\n  return [[extent[0], extent[1]], [extent[2], extent[3]]];\n};\n\n// Returns bounds of coordinates array\nexport const getCoordinatesBounds = coordinates => coordinates.reduce((prev, coord) => [[Math.min(coord[0], prev[0][0]), Math.min(coord[1], prev[0][1])], [Math.max(coord[0], prev[1][0]), Math.max(coord[1], prev[1][1])]], [[Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY], [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY]]);\nconst TYPE_NUMBER = 'number';\nconst TYPE_STRING = 'string';\nexport const DHIS2_PROP = '__dhis2propertyid__';\nexport const getGeojsonDisplayData = feature => {\n  const {\n    properties\n  } = feature;\n  if (!properties) {\n    return [];\n  }\n  return Object.entries(properties).filter(_ref => {\n    let [, value] = _ref;\n    return typeof value === TYPE_NUMBER || typeof value === TYPE_STRING;\n  }).filter(_ref2 => {\n    let [key, value] = _ref2;\n    return (\n      // Remove id property if it was set internally\n      key === 'id' && typeof value === TYPE_STRING && value.startsWith(DHIS2_PROP) ? false : true\n    );\n  }).map(_ref3 => {\n    let [key, value] = _ref3;\n    const type = typeof value === TYPE_NUMBER ? TYPE_NUMBER : TYPE_STRING;\n    return {\n      name: key,\n      dataKey: key,\n      type,\n      value\n    };\n  });\n};\nexport const GEO_TYPE_POINT = 'Point';\nexport const GEO_TYPE_POLYGON = 'Polygon';\nexport const GEO_TYPE_MULTIPOLYGON = 'MultiPolygon';\nexport const GEO_TYPE_LINE = 'LineString';\nexport const GEO_TYPE_FEATURE = 'Feature';\nconst GEO_TYPE_FEATURE_COLLECTION = 'FeatureCollection';\nconst rawGeometryTypes = [GEO_TYPE_POINT, GEO_TYPE_LINE, GEO_TYPE_POLYGON, 'MultiPoint', 'MultiLineString', GEO_TYPE_MULTIPOLYGON];\n\n// Ensure that we are always working with a FeatureCollection\nexport const buildGeoJsonFeatures = geoJson => {\n  let finalGeoJson = geoJson;\n  if (geoJson.type === GEO_TYPE_FEATURE) {\n    finalGeoJson = {\n      type: GEO_TYPE_FEATURE_COLLECTION,\n      features: [geoJson]\n    };\n  } else if (rawGeometryTypes.includes(geoJson.type)) {\n    finalGeoJson = {\n      type: GEO_TYPE_FEATURE_COLLECTION,\n      features: [{\n        type: GEO_TYPE_FEATURE,\n        geometry: geoJson,\n        properties: {}\n      }]\n    };\n  } else if (geoJson.type === 'GeometryCollection') {\n    const features = geoJson.geometries.map(geometry => ({\n      type: GEO_TYPE_FEATURE,\n      geometry,\n      properties: {}\n    }));\n    finalGeoJson = {\n      type: GEO_TYPE_FEATURE_COLLECTION,\n      features\n    };\n  }\n  const types = [];\n  const featureCollection = finalGeoJson.features.map((f, i) => {\n    const nonMultiType = f.geometry.type.replace('Multi', '');\n    // return list of types in the data (but not Multi* types,\n    // because those should get lumped in with the non-Multi* type for the legend)\n    if (!types.includes(nonMultiType)) {\n      types.push(nonMultiType);\n    }\n\n    // Ensures that all features have a properties.id property\n    // If properties.id is added, prefix it with DHIS2_PROP so that\n    // it can be filtered out of the data table\n    if (!f.properties.id) {\n      f.properties.id = `${DHIS2_PROP}${i}`;\n    }\n    return f;\n  });\n  return {\n    featureCollection,\n    types\n  };\n};","import { EVENT_CLIENT_PAGE_SIZE, EVENT_COORDINATE_CASCADING, EVENT_COORDINATE_DEFAULT } from '../constants/layers.js';\nimport { getOrgUnitsFromRows, getPeriodFromFilters } from './analytics.js';\nimport { addStyleDataItem, createEventFeatures } from './geojson.js';\nimport { trimTime } from './time.js';\nexport const EVENT_PROGRAM_STAGE_DATA_ELEMENTS_QUERY = {\n  programStage: {\n    resource: 'programStages',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: `programStageDataElements[displayInReports,dataElement[id,code,${nameProperty}~rename(name),optionSet,valueType]]`,\n        paging: false\n      };\n    }\n  }\n};\nexport const EVENT_PROGRAM_ATTRIBUTES_QUERY = {\n  program: {\n    resource: 'programs',\n    id: _ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id;\n    },\n    params: _ref4 => {\n      let {\n        nameProperty\n      } = _ref4;\n      return {\n        fields: `programTrackedEntityAttributes[trackedEntityAttribute[id,${nameProperty}~rename(name),optionSet,valueType]]`,\n        paging: false\n      };\n    }\n  }\n};\n\n// Empty filter sometimes returned for saved maps\n// Dimension without filter and empty items array returns false\nconst isValidDimension = _ref5 => {\n  let {\n    dimension,\n    filter,\n    items\n  } = _ref5;\n  return Boolean(dimension && (filter || !items || items.length));\n};\nconst METADATA_FORMAT_NAME = 'name';\nexport const getEventColumns = async (layer, _ref6) => {\n  let {\n    format = METADATA_FORMAT_NAME,\n    nameProperty,\n    engine\n  } = _ref6;\n  const {\n    programStage: result\n  } = await engine.query(EVENT_PROGRAM_STAGE_DATA_ELEMENTS_QUERY, {\n    variables: {\n      id: layer.programStage.id,\n      nameProperty\n    }\n  });\n  return result.programStageDataElements.filter(el => el.displayInReports).map(el => ({\n    dimension: el.dataElement.id,\n    name: el.dataElement[format]\n  }));\n};\n\n// Also used to query for server cluster in map/EventLayer.js\n// TODO: Use DataIDScheme / OutputIDScheme instead of requesting all metaData (which can easily dwarf the actual response data)\nexport const getAnalyticsRequest = async (_ref7, _ref8) => {\n  let {\n    program,\n    programStage,\n    filters,\n    startDate,\n    endDate,\n    rows,\n    columns,\n    styleDataItem,\n    eventStatus,\n    eventCoordinateField = EVENT_COORDINATE_DEFAULT,\n    fallbackCoordinateField,\n    relativePeriodDate,\n    isExtended\n  } = _ref7;\n  let {\n    nameProperty,\n    engine,\n    analyticsEngine\n  } = _ref8;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const period = getPeriodFromFilters(filters);\n  const dataItems = addStyleDataItem(columns.filter(isValidDimension), styleDataItem);\n\n  // Add \"display in reports\" columns that are not already present\n  if (isExtended) {\n    const displayColumns = await getEventColumns({\n      programStage\n    }, {\n      engine,\n      nameProperty\n    });\n    displayColumns.forEach(col => {\n      if (!dataItems.find(item => item.dimension === col.dimension)) {\n        dataItems.push(col);\n      }\n    });\n  }\n  let analyticsRequest = new analyticsEngine.request().withProgram(program.id).withStage(programStage.id).withCoordinatesOnly(true);\n  analyticsRequest = period ? analyticsRequest.addPeriodFilter(period.id) : analyticsRequest.withStartDate(trimTime(startDate)).withEndDate(trimTime(endDate));\n  if (relativePeriodDate) {\n    analyticsRequest = analyticsRequest.withRelativePeriodDate(relativePeriodDate);\n  }\n  analyticsRequest = analyticsRequest.addOrgUnitDimension(orgUnits.map(ou => ou.id));\n  if (dataItems) {\n    dataItems.forEach(item => {\n      analyticsRequest = analyticsRequest.addDimension(item.dimension, item.filter);\n    });\n  }\n  analyticsRequest = analyticsRequest.withCoordinateField(eventCoordinateField);\n  if (fallbackCoordinateField) {\n    if (fallbackCoordinateField === EVENT_COORDINATE_CASCADING) {\n      analyticsRequest = analyticsRequest.withParameters({\n        defaultCoordinateFallback: true\n      });\n    } else {\n      analyticsRequest = analyticsRequest.withParameters({\n        fallbackCoordinateField\n      });\n    }\n  }\n  if (eventStatus && eventStatus !== 'ALL') {\n    analyticsRequest = analyticsRequest.withEventStatus(eventStatus);\n  }\n  return analyticsRequest;\n};\nexport const loadData = async _ref9 => {\n  let {\n    request,\n    config = {},\n    analyticsEngine\n  } = _ref9;\n  const response = await analyticsEngine.events.getQuery(request.withPageSize(EVENT_CLIENT_PAGE_SIZE)); // DHIS2-10742\n\n  const {\n    data,\n    names\n  } = createEventFeatures(response, config);\n  return {\n    data,\n    names,\n    response\n  };\n};","import { COORDINATE_FIELD_NAMES } from '../constants/layers.js';\nimport { EVENT_PROGRAM_STAGE_DATA_ELEMENTS_QUERY, EVENT_PROGRAM_ATTRIBUTES_QUERY } from '../util/event.js';\nexport const loadEventCoordinateFieldName = async _ref => {\n  let {\n    program,\n    programStage,\n    eventCoordinateField,\n    engine,\n    displayNameProp\n  } = _ref;\n  if (!eventCoordinateField) {\n    return;\n  }\n  if (COORDINATE_FIELD_NAMES[eventCoordinateField]) {\n    return COORDINATE_FIELD_NAMES[eventCoordinateField];\n  }\n  const {\n    programStage: programStageData\n  } = await engine.query(EVENT_PROGRAM_STAGE_DATA_ELEMENTS_QUERY, {\n    variables: {\n      id: programStage.id,\n      nameProperty: displayNameProp\n    }\n  });\n  const {\n    programStageDataElements\n  } = programStageData;\n  if (Array.isArray(programStageDataElements)) {\n    const coordElement = programStageDataElements.find(d => d.dataElement.id === eventCoordinateField);\n    if (coordElement) {\n      return coordElement.dataElement.name;\n    }\n  }\n  const {\n    program: programData\n  } = await engine.query(EVENT_PROGRAM_ATTRIBUTES_QUERY, {\n    variables: {\n      id: program.id,\n      nameProperty: displayNameProp\n    }\n  });\n  const {\n    programTrackedEntityAttributes\n  } = programData;\n  if (Array.isArray(programTrackedEntityAttributes)) {\n    const coordAttribute = programTrackedEntityAttributes.find(d => d.trackedEntityAttribute.id === eventCoordinateField);\n    if (coordAttribute) {\n      return coordAttribute.trackedEntityAttribute.name;\n    }\n  }\n};","// Utils for thematic mapping\nimport { precisionRound } from 'd3-format';\nimport { CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS } from '../constants/layers.js';\nimport { hasValue } from './helpers.js';\nimport { getRoundToPrecisionFn } from './numbers.js';\n\n// Returns legend item where a value belongs\nexport const getLegendItemForValue = _ref => {\n  let {\n    value,\n    legendItems,\n    clamp = false\n  } = _ref;\n  if (!hasValue(value) || legendItems.length === 0) {\n    return;\n  }\n  if (clamp) {\n    if (value < legendItems[0].startValue) {\n      return legendItems[0];\n    }\n    if (value > legendItems[legendItems.length - 1].endValue) {\n      return legendItems[legendItems.length - 1];\n    }\n  }\n  const isLast = index => index === legendItems.length - 1;\n  return legendItems.find((item, index) => value >= item.startValue && (value < item.endValue || isLast(index) && value == item.endValue));\n};\nexport const getLegendItems = (values, method, numClasses) => {\n  const minValue = values[0];\n  const maxValue = values[values.length - 1];\n  let bins;\n  if (method === CLASSIFICATION_EQUAL_INTERVALS) {\n    bins = getEqualIntervals(minValue, maxValue, numClasses);\n  } else if (method === CLASSIFICATION_EQUAL_COUNTS) {\n    bins = getQuantiles(values, numClasses);\n  }\n  return bins;\n};\n\n// This function is not in use, but keeping it\n// just in case it's needed in the future\n// export const getClassBins = (values, method, numClasses) => {\n//     const minValue = values[0]\n//     const maxValue = values[values.length - 1]\n//     let bins\n\n//     if (method === CLASSIFICATION_EQUAL_INTERVALS) {\n//         bins = getEqualIntervals(minValue, maxValue, numClasses)\n//     } else if (method === CLASSIFICATION_EQUAL_COUNTS) {\n//         bins = getQuantiles(values, numClasses)\n//     }\n\n//     return bins\n// }\n\nconst getEqualIntervals = (minValue, maxValue, numClasses) => {\n  const bins = [];\n  const binSize = (maxValue - minValue) / numClasses;\n  const precision = precisionRound(binSize, maxValue);\n  const valueFormat = getRoundToPrecisionFn(precision);\n  for (let i = 0; i < numClasses; i++) {\n    const startValue = minValue + i * binSize;\n    const endValue = i < numClasses - 1 ? startValue + binSize : maxValue;\n    bins.push({\n      startValue: valueFormat(startValue),\n      endValue: valueFormat(endValue)\n    });\n  }\n  return bins;\n};\nconst getQuantiles = (values, numClasses) => {\n  const minValue = values[0];\n  const maxValue = values[values.length - 1];\n  const bins = [];\n  const binCount = values.length / numClasses;\n  const precision = precisionRound((maxValue - minValue) / numClasses, maxValue);\n  const valueFormat = getRoundToPrecisionFn(precision);\n  let binLastValPos = binCount === 0 ? 0 : binCount;\n  if (values.length > 0) {\n    bins[0] = minValue;\n    for (let i = 1; i < numClasses; i++) {\n      bins[i] = values[Math.round(binLastValPos)];\n      binLastValPos += binCount;\n    }\n  }\n\n  // bin can be undefined if few values\n  return bins.filter(bin => bin !== undefined).map((value, index) => ({\n    startValue: valueFormat(value),\n    endValue: valueFormat(bins[index + 1] || maxValue)\n  }));\n};","import { DIMENSION_TYPE_INDICATOR, DIMENSION_TYPE_DATA_ELEMENT, DIMENSION_TYPE_DATA_SET } from '@dhis2/analytics';\nimport { sortBy, pick } from 'lodash/fp';\nimport { CLASSIFICATION_EQUAL_INTERVALS } from '../constants/layers.js';\nimport { getLegendItems } from '../util/classify.js';\nimport { defaultClasses, defaultColorScale } from '../util/colors.js';\nconst INDICATOR_QUERY = {\n  dimension: {\n    resource: 'indicators',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: 'legendSet[id,displayName~rename(name)]'\n    }\n  }\n};\nconst DATA_ELEMENT_QUERY = {\n  dimension: {\n    resource: 'dataElements',\n    id: _ref2 => {\n      let {\n        id\n      } = _ref2;\n      return id;\n    },\n    params: {\n      fields: 'legendSet[id,displayName~rename(name)]'\n    }\n  }\n};\nconst DATA_SET_QUERY = {\n  dimension: {\n    resource: 'dataSets',\n    id: _ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id;\n    },\n    params: {\n      fields: 'legendSet[id,displayName~rename(name)]'\n    }\n  }\n};\nexport const loadDataItemLegendSet = async (dataItem, engine) => {\n  if (!dataItem) {\n    return null;\n  }\n  let result = null;\n  switch (dataItem.dimensionItemType) {\n    case DIMENSION_TYPE_INDICATOR:\n      {\n        result = await engine.query(INDICATOR_QUERY, {\n          variables: {\n            id: dataItem.id\n          }\n        });\n      }\n      break;\n    case DIMENSION_TYPE_DATA_ELEMENT:\n      {\n        result = await engine.query(DATA_ELEMENT_QUERY, {\n          variables: {\n            id: dataItem.id\n          }\n        });\n      }\n      break;\n    case DIMENSION_TYPE_DATA_SET:\n      {\n        result = await engine.query(DATA_SET_QUERY, {\n          variables: {\n            id: dataItem.id\n          }\n        });\n      }\n      break;\n    default:\n      return null;\n  }\n  return result.dimension.legendSet;\n};\nexport const formatLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => ({\n    color: item.color,\n    name: item.name,\n    range: item.startValue + ' - ' + item.endValue\n  }));\n};\nexport const getBinsFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  const lastItem = sortedItems[sortedItems.length - 1];\n  const bins = sortedItems.map(item => item.startValue);\n  bins.push(lastItem.endValue);\n  return bins;\n};\nexport const getColorScaleFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => item.color);\n};\nexport const getLabelsFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => item.name);\n};\n\n// Returns a legend created from a pre-defined legend set\nexport const getPredefinedLegendItems = legendSet => {\n  const pickSome = pick(['name', 'startValue', 'endValue', 'color']);\n  return sortBy('startValue', legendSet.legends).map(pickSome).map(item => item.name === `${item.startValue} - ${item.endValue}` ? {\n    ...item,\n    name: ''\n  } // Clear name if same as startValue - endValue\n  : item);\n};\n\n/* eslint-disable max-params */\nexport const getAutomaticLegendItems = function (data) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : CLASSIFICATION_EQUAL_INTERVALS;\n  let classes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultClasses;\n  let colorScale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : defaultColorScale;\n  const items = data.length ? getLegendItems(data, method, classes) : [];\n  return items.map((item, index) => ({\n    ...item,\n    color: colorScale[index]\n  }));\n};\n/* eslint-enable max-params */","import i18n from '@dhis2/d2-i18n';\nimport { EVENT_COLOR, EVENT_RADIUS, CLASSIFICATION_PREDEFINED } from '../constants/layers.js';\nimport { numberValueTypes, booleanValueTypes } from '../constants/valueTypes.js';\nimport { cssColor } from '../util/colors.js';\nimport { OPTION_SET_QUERY, LEGEND_SET_QUERY } from '../util/requests.js';\nimport { getLegendItemForValue } from './classify.js';\nimport { getAutomaticLegendItems, getPredefinedLegendItems } from './legend.js';\nconst hasValue = value => value !== undefined && value !== null && value !== '';\n\n// \"Style by data item\" handling for event layer\n// Can be reused for TEI layer when the Web API is improved\n// This function is modifiyng the config object before it's added to the redux store\nexport const styleByDataItem = async (config, engine) => {\n  const {\n    styleDataItem\n  } = config;\n  if (styleDataItem.optionSet) {\n    await styleByOptionSet(config, engine);\n  } else if (numberValueTypes.includes(styleDataItem.valueType)) {\n    await styleByNumeric(config, engine);\n  } else if (booleanValueTypes.includes(styleDataItem.valueType)) {\n    await styleByBoolean(config, engine);\n  } else {\n    await styleByDefault(config, engine);\n  }\n  return config;\n};\nconst styleByDefault = async (config, engine) => {\n  const {\n    styleDataItem,\n    data,\n    legend,\n    eventPointColor,\n    eventPointRadius\n  } = config;\n  const {\n    id\n  } = styleDataItem;\n  legend.unit = await getLegendUnit(engine, styleDataItem);\n  legend.items = [{\n    name: i18n.t('Event'),\n    color: cssColor(eventPointColor) || EVENT_COLOR,\n    radius: eventPointRadius || EVENT_RADIUS,\n    count: data.length\n  }];\n  config.data = data.map(feature => {\n    const value = feature.properties[id];\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value: hasValue(value) ? value : i18n.t('Not set'),\n        color: cssColor(eventPointColor) || EVENT_COLOR\n      }\n    };\n  });\n  return config;\n};\nconst styleByBoolean = async (config, engine) => {\n  const {\n    styleDataItem,\n    data,\n    legend,\n    eventPointColor,\n    eventPointRadius\n  } = config;\n  const {\n    id,\n    values\n  } = styleDataItem;\n  legend.unit = await getLegendUnit(engine, styleDataItem);\n  legend.items = [{\n    name: i18n.t('Yes'),\n    color: values.true,\n    radius: eventPointRadius || EVENT_RADIUS,\n    count: 0\n  }];\n  if (values.false) {\n    legend.items.push({\n      name: i18n.t('No'),\n      color: values.false,\n      radius: eventPointRadius || EVENT_RADIUS,\n      count: 0\n    });\n  }\n  legend.items.push({\n    name: i18n.t('Other'),\n    color: cssColor(eventPointColor) || EVENT_COLOR,\n    radius: eventPointRadius || EVENT_RADIUS,\n    count: 0\n  });\n  config.data = data.map(feature => {\n    const value = feature.properties[id];\n    let displayValue;\n    let color;\n    if (value === '1') {\n      displayValue = i18n.t('Yes');\n      color = values.true;\n      legend.items[0].count++;\n    } else if (value === '0') {\n      displayValue = i18n.t('No');\n      color = values.false;\n      legend.items[1].count++;\n    } else {\n      displayValue = hasValue(value) ? value : i18n.t('Not set');\n      color = cssColor(eventPointColor) || EVENT_COLOR;\n      legend.items[legend.items.length - 1].count++;\n    }\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value: displayValue,\n        color: color\n      }\n    };\n  });\n  return config;\n};\nconst styleByNumeric = async (config, engine) => {\n  const {\n    styleDataItem,\n    data,\n    legend,\n    method,\n    classes,\n    colorScale,\n    eventPointColor,\n    eventPointRadius\n  } = config;\n\n  // If legend set\n  if (method === CLASSIFICATION_PREDEFINED) {\n    // Load legend set from server\n    const {\n      legendSet\n    } = await engine.query(LEGEND_SET_QUERY, {\n      variables: {\n        id: config.legendSet.id\n      }\n    });\n\n    // Use legend set name and legend unit\n    legend.unit = legendSet.name;\n\n    // Generate legend items from legendSet\n    legend.items = getPredefinedLegendItems(legendSet);\n  } else {\n    // Create array of sorted values needed for classification\n    const sortedValues = data.map(feature => feature.properties[styleDataItem.id]).filter(hasValue).map(Number).filter(value => !isNaN(value)).sort((a, b) => a - b);\n\n    // Use data item name as legend unit (load from server if needed)\n    legend.unit = await getLegendUnit(engine, styleDataItem);\n\n    // Generate legend items based on layer config\n    legend.items = getAutomaticLegendItems(sortedValues, method, classes, colorScale);\n  }\n  legend.items.push({\n    name: i18n.t('Other'),\n    color: cssColor(eventPointColor) || EVENT_COLOR\n  });\n\n  // Add radius and count to each legend item\n  legend.items.forEach(item => {\n    item.radius = eventPointRadius || EVENT_RADIUS;\n    item.count = 0;\n  });\n\n  // Helper function to get legend item for data value\n  const getLegendItem = value => getLegendItemForValue({\n    value,\n    legendItems: config.legend.items.slice(0, -1)\n  });\n\n  // Add style data value and color to each feature\n  config.data = data.map(feature => {\n    const value = feature.properties[styleDataItem.id];\n    let legendItem;\n    if (hasValue(value)) {\n      const numericValue = Number(value);\n      legendItem = getLegendItem(numericValue);\n    }\n    if (legendItem) {\n      legendItem.count++;\n    } else {\n      legend.items[legend.items.length - 1].count++;\n    }\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value: hasValue(value) ? value : i18n.t('Not set'),\n        color: legendItem ? legendItem.color : cssColor(eventPointColor) || EVENT_COLOR\n      }\n    };\n  });\n  return config;\n};\nconst styleByOptionSet = async (config, engine) => {\n  const {\n    styleDataItem,\n    legend,\n    eventPointColor,\n    eventPointRadius\n  } = config;\n  const optionSet = await getOptionSet(styleDataItem.optionSet, engine);\n  const id = styleDataItem.id;\n\n  // Replace styleDataItem with a version with names\n  config.styleDataItem = {\n    ...styleDataItem,\n    name: optionSet.name,\n    optionSet\n  };\n\n  // Add legend data\n  legend.unit = optionSet.name;\n  legend.items = optionSet.options.map(option => ({\n    name: option.name,\n    color: option.style.color,\n    radius: eventPointRadius || EVENT_RADIUS,\n    count: 0\n  }));\n  legend.items.push({\n    name: i18n.t('Other'),\n    color: cssColor(eventPointColor) || EVENT_COLOR,\n    radius: eventPointRadius || EVENT_RADIUS,\n    count: 0\n  });\n\n  // For easier and faster lookup below\n  // TODO: There might be options with duplicate name, so code/id would be safer\n  // If we use code/id we also need to retrive name to show in popup/data table/download\n  const optionsByName = optionSet.options.reduce((obj, option) => {\n    obj[option.name.toLowerCase()] = option;\n    return obj;\n  }, {});\n\n  // Add style data value and color to each feature\n  config.data = config.data.map(feature => {\n    const name = feature.properties[id];\n    if (name) {\n      const option = optionsByName[name.toLowerCase()];\n      if (option) {\n        const optionIndex = legend.items.findIndex(item => item.name === option.name);\n        legend.items[optionIndex].count++;\n        return {\n          ...feature,\n          properties: {\n            ...feature.properties,\n            value: option.name,\n            color: option.style.color\n          }\n        };\n      }\n    }\n    legend.items[legend.items.length - 1].count++;\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value: hasValue(name) ? name : i18n.t('Not set'),\n        color: cssColor(eventPointColor) || EVENT_COLOR\n      }\n    };\n  });\n  return config;\n};\n\n// The style option set included in a favorite is stripped for names\n// and this function add the names if needed\nconst getOptionSet = async (optionSet, engine) => {\n  // Return unmodified option set if names are included\n  if (optionSet.name) {\n    return optionSet;\n  }\n\n  // Load option set from server\n  const {\n    optionSet: optSet\n  } = await engine.query(OPTION_SET_QUERY, {\n    variables: {\n      id: optionSet.id\n    }\n  });\n\n  // Return modified option set with names and codes\n  return {\n    ...optionSet,\n    name: optSet.name,\n    options: optionSet.options.map(option => ({\n      ...optSet.options.find(opt => opt.id === option.id),\n      ...option\n    }))\n  };\n};\nconst DATA_ELEMENT_NAME_QUERY = {\n  dataElement: {\n    resource: 'dataElements',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: 'displayName~rename(name)'\n    }\n  }\n};\nconst ATTRIBUTE_NAME_QUERY = {\n  trackedEntityAttribute: {\n    resource: 'trackedEntityAttributes',\n    id: _ref2 => {\n      let {\n        id\n      } = _ref2;\n      return id;\n    },\n    params: {\n      fields: 'displayName~rename(name)'\n    }\n  }\n};\nconst getLegendUnit = async (engine, styleDataItem) => {\n  if (styleDataItem.name) {\n    return styleDataItem.name;\n  }\n  try {\n    const {\n      dataElement\n    } = await engine.query(DATA_ELEMENT_NAME_QUERY, {\n      variables: {\n        id: styleDataItem.id\n      }\n    });\n    return dataElement.name;\n  } catch {\n    const {\n      trackedEntityAttribute\n    } = await engine.query(ATTRIBUTE_NAME_QUERY, {\n      variables: {\n        id: styleDataItem.id\n      }\n    });\n    return trackedEntityAttribute.name;\n  }\n};","import i18n from '@dhis2/d2-i18n';\nimport { CUSTOM_ALERT, WARNING_NO_DATA } from '../constants/alerts.js';\nimport { getEventStatuses } from '../constants/eventStatuses.js';\nimport { EVENT_CLIENT_PAGE_SIZE, EVENT_SERVER_CLUSTER_COUNT, EVENT_COLOR, EVENT_RADIUS } from '../constants/layers.js';\nimport { numberValueTypes } from '../constants/valueTypes.js';\nimport { getFiltersFromColumns, getFiltersAsText, getPeriodFromFilters, getPeriodNameFromId } from '../util/analytics.js';\nimport { cssColor, getContrastColor } from '../util/colors.js';\nimport { loadEventCoordinateFieldName } from '../util/coordinatesName.js';\nimport { getAnalyticsRequest, loadData } from '../util/event.js';\nimport { getBounds } from '../util/geojson.js';\nimport { OPTION_SET_QUERY } from '../util/requests.js';\nimport { styleByDataItem } from '../util/styleByDataItem.js';\nimport { formatStartEndDate, getDateArray } from '../util/time.js';\nimport { isValidUid } from '../util/uid.js';\n\n// Server clustering if more than 2000 events\nconst shouldUseServerCluster = count => count > EVENT_SERVER_CLUSTER_COUNT;\nconst accessDeniedAlert = {\n  warning: true,\n  code: CUSTOM_ALERT,\n  message: i18n.t(\"You don't have access to this layer data\")\n};\nconst filterErrorAlert = {\n  warning: true,\n  code: CUSTOM_ALERT,\n  message: i18n.t('The event filter is not supported')\n};\nconst unknownErrorAlert = {\n  critical: true,\n  code: CUSTOM_ALERT,\n  message: i18n.t('An unknown error occurred while reading layer data')\n};\n\n// Returns a promise\nconst eventLoader = async _ref => {\n  let {\n    config: layerConfig,\n    engine,\n    keyAnalysisDisplayProperty,\n    analyticsEngine,\n    loadExtended\n  } = _ref;\n  const config = {\n    ...layerConfig\n  };\n  const displayNameProp = keyAnalysisDisplayProperty === 'name' ? 'displayName' : 'displayShortName';\n  try {\n    await loadEventLayer({\n      config,\n      engine,\n      displayNameProp,\n      analyticsEngine,\n      loadExtended\n    });\n  } catch (e) {\n    var _e$details, _e$details2;\n    if (((_e$details = e.details) === null || _e$details === void 0 ? void 0 : _e$details.httpStatusCode) === 403 || ((_e$details2 = e.details) === null || _e$details2 === void 0 ? void 0 : _e$details2.httpStatusCode) === 409) {\n      var _e$details3;\n      config.alerts = [(_e$details3 = e.details) !== null && _e$details3 !== void 0 && _e$details3.message.includes('filter is invalid') ? filterErrorAlert : accessDeniedAlert];\n    } else {\n      config.alerts = [unknownErrorAlert];\n    }\n  }\n  config.isLoaded = true;\n  config.isLoading = false;\n  config.isExpanded = true;\n  config.isVisible = true;\n  return config;\n};\nconst loadEventLayer = async _ref2 => {\n  let {\n    config,\n    engine,\n    displayNameProp,\n    analyticsEngine,\n    loadExtended\n  } = _ref2;\n  const {\n    columns,\n    endDate,\n    eventStatus,\n    eventClustering,\n    eventPointColor,\n    eventPointRadius,\n    filters,\n    program,\n    programStage,\n    eventCoordinateField,\n    startDate,\n    styleDataItem,\n    areaRadius\n  } = config;\n  const period = getPeriodFromFilters(filters);\n  const dataFilters = getFiltersFromColumns(columns);\n  config.isExtended = loadExtended;\n  const analyticsRequest = await getAnalyticsRequest(config, {\n    analyticsEngine,\n    nameProperty: displayNameProp,\n    engine\n  });\n  let alert;\n  config.name = programStage.name;\n  config.legend = {\n    title: config.name,\n    period: period ? getPeriodNameFromId(period.id) : formatStartEndDate(getDateArray(startDate), getDateArray(endDate)),\n    items: []\n  };\n\n  // Delete serverCluster option if previously set\n  delete config.serverCluster;\n\n  // Check if events should be clustered on the server or the client\n  // Style by data item is only supported in the client (donuts)\n  if (eventClustering && !styleDataItem) {\n    const response = await analyticsEngine.events.getCount(analyticsRequest);\n    config.bounds = getBounds(response.extent);\n    config.serverCluster = shouldUseServerCluster(response.count);\n  }\n  if (!config.serverCluster) {\n    config.outputIdScheme = 'ID'; // Required for StyleByDataItem to work\n    const {\n      names,\n      data,\n      response\n    } = await loadData({\n      request: analyticsRequest,\n      config,\n      analyticsEngine\n    });\n    const {\n      total\n    } = response.metaData.pager;\n    config.data = data;\n    if (Array.isArray(config.data) && config.data.length) {\n      if (styleDataItem) {\n        await styleByDataItem(config, engine);\n      }\n      if (total > EVENT_CLIENT_PAGE_SIZE) {\n        alert = {\n          warning: true,\n          code: CUSTOM_ALERT,\n          message: `${config.name}: ${i18n.t('Displaying first {{pageSize}} events out of {{total}}', {\n            pageSize: EVENT_CLIENT_PAGE_SIZE,\n            total\n          })}`\n        };\n      }\n    } else {\n      alert = {\n        code: WARNING_NO_DATA,\n        message: config.name\n      };\n    }\n\n    // TODO: Add filters to legend when using server cluster\n    // Currently not done as names are not available\n    config.legend.filters = dataFilters && getFiltersAsText(dataFilters, {\n      ...names,\n      ...(await getFilterOptionNames(dataFilters, response.headers, engine))\n    });\n    const eventCoordinateFieldName = await loadEventCoordinateFieldName({\n      program,\n      programStage,\n      eventCoordinateField,\n      engine,\n      displayNameProp\n    });\n    if (eventCoordinateFieldName) {\n      config.legend.coordinateFields = [eventCoordinateFieldName];\n    }\n    config.headers = response.headers;\n    const numericDataItemHeaders = config.headers.filter(header => isValidUid(header.name) && numberValueTypes.includes(header.valueType));\n    if (numericDataItemHeaders.length) {\n      config.data = config.data.map(d => {\n        const newD = {\n          ...d\n        };\n        numericDataItemHeaders.forEach(header => {\n          newD.properties[header.name] = parseFloat(d.properties[header.name]);\n        });\n        return newD;\n      });\n    }\n  }\n  if (!styleDataItem) {\n    const color = cssColor(eventPointColor) || EVENT_COLOR;\n    const strokeColor = getContrastColor(color);\n    config.legend.items = [{\n      name: i18n.t('Event'),\n      color,\n      strokeColor,\n      radius: eventPointRadius || EVENT_RADIUS,\n      count: Array.isArray(config === null || config === void 0 ? void 0 : config.data) ? config.data.length : 0\n    }];\n  }\n  const explanation = [];\n  if (eventStatus) {\n    explanation.push(`${i18n.t('Event status')}: ${getEventStatuses().find(s => s.id === eventStatus).name}`);\n  }\n  if (areaRadius) {\n    explanation.push(`${i18n.t('Buffer')}: ${areaRadius} ${'m'}`);\n  }\n  if (explanation.length) {\n    config.legend.explanation = explanation;\n  }\n  if (alert) {\n    config.alerts = [alert];\n  }\n};\n\n// If the layer included filters using option sets, this function return an object\n// mapping option codes to named used to translate codes in the legend\nconst getFilterOptionNames = async (filters, headers, engine) => {\n  if (!filters) {\n    return null;\n  }\n\n  // Returns array of option set ids used for filtering\n  const optionSets = filters.map(filter => headers.find(header => header.name === filter.dimension)).filter(header => header.optionSet).map(header => header.optionSet);\n  if (!optionSets.length) {\n    return;\n  }\n  const allOptionSets = await Promise.all(optionSets.map(id => engine.query(OPTION_SET_QUERY, {\n    variables: {\n      id\n    }\n  })));\n\n  // Returns one object with all option codes mapped to names\n  return allOptionSets.map(_ref3 => {\n    let {\n      optionSet\n    } = _ref3;\n    return optionSet.options.reduce((obj, _ref4) => {\n      let {\n        code,\n        name\n      } = _ref4;\n      obj[code] = name;\n      return obj;\n    }, {});\n  }).reduce((obj, set) => ({\n    ...obj,\n    ...set\n  }), {});\n};\nexport default eventLoader;","import { EXTERNAL_LAYER, TILE_LAYER, WMS_LAYER, VECTOR_STYLE, GEOJSON_URL_LAYER, GEOJSON_LAYER } from '../constants/layers.js';\nimport { EXTERNAL_MAP_LAYER_QUERY } from './requests.js';\nconst MAP_SERVICE_WMS = 'WMS';\nconst MAP_SERVICE_TMS = 'TMS';\nconst MAP_SERVICE_XYZ = 'XYZ';\nconst MAP_SERVICE_VECTOR_STYLE = 'VECTOR_STYLE';\nconst MAP_SERVICE_GEOJSON_URL = 'GEOJSON_URL';\nconst mapServiceToTypeMap = {\n  [MAP_SERVICE_WMS]: WMS_LAYER,\n  [MAP_SERVICE_XYZ]: TILE_LAYER,\n  [MAP_SERVICE_TMS]: TILE_LAYER,\n  [MAP_SERVICE_VECTOR_STYLE]: VECTOR_STYLE,\n  [MAP_SERVICE_GEOJSON_URL]: GEOJSON_LAYER\n};\nexport const supportedMapServices = Object.keys(mapServiceToTypeMap);\nexport const createExternalBasemapLayer = layer => ({\n  layer: EXTERNAL_LAYER,\n  id: layer.id,\n  name: layer.name,\n  opacity: 1,\n  config: createExternalLayerConfig(layer)\n});\nexport const createExternalOverlayLayer = layer => ({\n  layer: layer.mapService === MAP_SERVICE_GEOJSON_URL ? GEOJSON_URL_LAYER : EXTERNAL_LAYER,\n  img: 'images/featurelayer.png',\n  name: layer.name,\n  opacity: 1,\n  config: createExternalLayerConfig(layer)\n});\n\n// Create external layer config\nconst createExternalLayerConfig = model => {\n  const {\n    id,\n    name,\n    attribution,\n    mapService,\n    url,\n    layers,\n    imageFormat,\n    legendSet,\n    legendSetUrl\n  } = model;\n  const type = mapServiceToTypeMap[mapService];\n  const format = imageFormat === 'JPG' ? 'image/jpeg' : 'image/png';\n  const tms = mapService === MAP_SERVICE_TMS;\n  return {\n    id,\n    type,\n    url,\n    attribution,\n    name,\n    layers,\n    tms,\n    format,\n    legendSet,\n    legendSetUrl\n  };\n};\n\n// Parse external layer config returned as a string in ao\nexport const parseLayerConfig = async (layerConfig, engine) => {\n  let config;\n  try {\n    config = JSON.parse(layerConfig);\n  } catch (evt) {\n    return;\n  }\n\n  // We could use the config object as stored, but better to\n  // use a fresh layer config from the API\n  if (config.id) {\n    try {\n      const {\n        externalLayer\n      } = await engine.query({\n        externalLayer: EXTERNAL_MAP_LAYER_QUERY\n      }, {\n        variables: {\n          id: config.id\n        }\n      });\n      const newConfig = createExternalLayerConfig(externalLayer);\n      newConfig.featureStyle = {\n        ...config.featureStyle\n      };\n    } catch (evt) {\n      return config;\n    }\n  }\n  return config;\n};","import { EXTERNAL_LAYER } from '../constants/layers.js';\nimport { parseLayerConfig } from '../util/external.js';\nimport { getPredefinedLegendItems } from '../util/legend.js';\nimport { LEGEND_SET_QUERY } from '../util/requests.js';\nconst externalLoader = async _ref => {\n  let {\n    config: layer,\n    engine\n  } = _ref;\n  let config;\n  if (typeof layer.config === 'string') {\n    // External layer is loaded in analytical object\n    config = await parseLayerConfig(layer.config, engine);\n  } else {\n    config = {\n      ...layer.config\n    };\n  }\n  const legend = {\n    title: config.name\n  };\n  if (config.legendSet) {\n    const {\n      legendSet: legendItems\n    } = await engine.query(LEGEND_SET_QUERY, {\n      variables: {\n        id: config.legendSet.id\n      }\n    });\n    legend.items = getPredefinedLegendItems(legendItems);\n  }\n  if (config.legendSetUrl) {\n    legend.url = config.legendSetUrl;\n  }\n  return {\n    ...layer,\n    layer: EXTERNAL_LAYER,\n    name: config.name,\n    legend,\n    config,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport default externalLoader;","import i18n from '@dhis2/d2-i18n';\nimport { WARNING_NO_GEOMETRY_COORD, ERROR_CRITICAL, CUSTOM_ALERT } from '../constants/alerts.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { toGeoJson } from '../util/map.js';\nimport { ORG_UNITS_GROUP_SET_QUERY, getPointItems, getPolygonItems, getStyledOrgUnits, getCoordinateField, parseGroupSet } from '../util/orgUnits.js';\nimport { GEOFEATURES_QUERY } from '../util/requests.js';\nconst facilityLoader = async _ref => {\n  var _data;\n  let {\n    config,\n    engine,\n    keyAnalysisDisplayProperty,\n    userId,\n    baseUrl\n  } = _ref;\n  const {\n    rows,\n    organisationUnitGroupSet: groupSet,\n    areaRadius\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const includeGroupSets = !!groupSet;\n  const coordinateField = getCoordinateField(config);\n  let loadError;\n  const alerts = [];\n  const orgUnitIds = orgUnits.map(item => item.id);\n  let associatedGeometries;\n  const name = i18n.t('Facilities');\n  let data = {};\n  try {\n    // Fetch geofeatures data\n    data = await engine.query(GEOFEATURES_QUERY, {\n      variables: {\n        orgUnitIds,\n        keyAnalysisDisplayProperty,\n        includeGroupSets,\n        userId\n      }\n    }, {\n      onError: error => {\n        alerts.push({\n          critical: true,\n          code: ERROR_CRITICAL,\n          message: error.message || i18n.t('an error occurred')\n        });\n      }\n    });\n  } catch (error) {\n    alerts.push({\n      critical: true,\n      code: ERROR_CRITICAL,\n      message: error.message || i18n.t('an error occurred')\n    });\n  }\n  const features = ((_data = data) === null || _data === void 0 ? void 0 : _data.geoFeatures) && toGeoJson(getPointItems(data.geoFeatures));\n\n  // Load organisationUnitGroups if not passed\n  let orgUnitGroups;\n  if (includeGroupSets && !groupSet.organisationUnitGroups) {\n    try {\n      orgUnitGroups = await engine.query(ORG_UNITS_GROUP_SET_QUERY, {\n        variables: {\n          id: groupSet === null || groupSet === void 0 ? void 0 : groupSet.id\n        }\n      });\n    } catch (err) {\n      loadError = i18n.t('GroupSet used for styling was not found');\n    }\n  }\n  if (orgUnitGroups) {\n    const {\n      groupSets\n    } = orgUnitGroups;\n    groupSet.organisationUnitGroups = parseGroupSet({\n      organisationUnitGroups: groupSets.organisationUnitGroups\n    });\n    groupSet.name = groupSets.name;\n  }\n  const {\n    styledFeatures,\n    legend\n  } = getStyledOrgUnits({\n    features,\n    groupSet,\n    config,\n    baseUrl\n  });\n  legend.title = name;\n  if (coordinateField) {\n    const rawData = await engine.query(GEOFEATURES_QUERY, {\n      variables: {\n        orgUnitIds,\n        keyAnalysisDisplayProperty,\n        includeGroupSets,\n        coordinateField: coordinateField.id,\n        userId\n      }\n    });\n    associatedGeometries = rawData !== null && rawData !== void 0 && rawData.geoFeatures ? toGeoJson(getPolygonItems(rawData.geoFeatures)) : null;\n    if (!associatedGeometries.length) {\n      alerts.push({\n        code: WARNING_NO_GEOMETRY_COORD,\n        message: coordinateField.name\n      });\n    }\n    legend.items.push({\n      name: coordinateField.name,\n      type: 'polygon',\n      strokeColor: '#333',\n      fillColor: 'rgba(149, 200, 251, 0.5)',\n      weight: 0.5\n    });\n  }\n  if (areaRadius) {\n    legend.explanation = [`${areaRadius} ${'m'} ${'buffer'}`];\n  }\n  if (!styledFeatures.length) {\n    alerts.push({\n      warning: true,\n      code: CUSTOM_ALERT,\n      message: i18n.t('No coordinates found for selected facilities')\n    });\n  }\n  return {\n    ...config,\n    data: styledFeatures,\n    associatedGeometries,\n    name,\n    legend,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true,\n    loadError\n  };\n};\nexport default facilityLoader;","import i18n from '@dhis2/d2-i18n';\nimport { parseLayerConfig } from '../util/external.js';\nimport { buildGeoJsonFeatures, GEO_TYPE_LINE, GEO_TYPE_POINT, GEO_TYPE_POLYGON } from '../util/geojson.js';\nconst fetchData = async (url, engine, baseUrl) => {\n  if (url.includes(baseUrl)) {\n    // API route, use engine\n    const routesIndex = url.indexOf('routes');\n    if (routesIndex === -1) {\n      throw new Error();\n    }\n    return engine.query({\n      geojson: {\n        resource: url.slice(routesIndex)\n      }\n    }).then(async data => data.geojson instanceof Blob ? JSON.parse(await data.geojson.text()) // TODO - remove once Blob fix implemented in app-runtime (LIBS-542)\n    : data.geojson).catch(() => {\n      throw new Error();\n    });\n  } else {\n    // External route, use fetch\n    return fetch(url).then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n      return response.json();\n    }).catch(() => {\n      throw new Error();\n    });\n  }\n};\nconst EMPTY_FEATURE_STYLE = {};\nconst geoJsonUrlLoader = async _ref => {\n  let {\n    config: layer,\n    engine,\n    baseUrl\n  } = _ref;\n  const {\n    config\n  } = layer;\n  let newConfig;\n  let featureStyle;\n  // keep featureStyle property outside of config while in app\n  if (typeof config === 'string') {\n    // External layer is loaded in analytical object\n    newConfig = await parseLayerConfig(config, engine);\n    featureStyle = {\n      ...newConfig.featureStyle\n    } || EMPTY_FEATURE_STYLE;\n    delete newConfig.featureStyle;\n  } else {\n    newConfig = {\n      ...config\n    };\n    featureStyle = layer.featureStyle || EMPTY_FEATURE_STYLE;\n  }\n  let geoJson;\n  let loadError;\n  try {\n    geoJson = await fetchData(newConfig.url, engine, baseUrl);\n  } catch (e) {\n    loadError = i18n.t('There was a problem with this layer. Contact a system administrator.');\n  }\n  let data = [];\n  const legend = {\n    title: newConfig.name,\n    items: []\n  };\n  if (!loadError) {\n    const {\n      featureCollection,\n      types\n    } = buildGeoJsonFeatures(geoJson);\n    data = featureCollection;\n    const oneType = types.length === 1;\n    types.forEach(type => {\n      let legendItem;\n      if (type === GEO_TYPE_POLYGON) {\n        legendItem = {\n          name: oneType ? i18n.t('Feature') : i18n.t('Polygon'),\n          type: GEO_TYPE_POLYGON,\n          ...featureStyle,\n          fillColor: featureStyle.color\n        };\n      } else if (type === GEO_TYPE_LINE) {\n        legendItem = {\n          name: oneType ? i18n.t('Feature') : i18n.t('Line'),\n          type: GEO_TYPE_LINE,\n          ...featureStyle,\n          color: featureStyle.strokeColor\n        };\n      } else {\n        legendItem = {\n          name: oneType ? i18n.t('Feature') : i18n.t('Point'),\n          type: GEO_TYPE_POINT,\n          radius: featureStyle.pointSize,\n          color: featureStyle.color,\n          strokeColor: featureStyle.strokeColor\n        };\n      }\n      legend.items.push(legendItem);\n    });\n  }\n  return {\n    ...layer,\n    name: newConfig.name,\n    // TODO - will be fixed by DHIS2-16088\n    legend,\n    data,\n    config: newConfig,\n    featureStyle,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true,\n    loadError\n  };\n};\nexport default geoJsonUrlLoader;","import { apiFetchOrganisationUnitLevels } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { WARNING_NO_OU_COORD, WARNING_NO_GEOMETRY_COORD, ERROR_CRITICAL } from '../constants/alerts.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { toGeoJson } from '../util/map.js';\nimport { ORG_UNITS_GROUP_SET_QUERY, addAssociatedGeometries, getStyledOrgUnits, getCoordinateField, parseGroupSet } from '../util/orgUnits.js';\nimport { GEOFEATURES_QUERY } from '../util/requests.js';\nconst orgUnitLoader = async _ref => {\n  let {\n    config,\n    engine,\n    keyAnalysisDisplayProperty,\n    userId,\n    baseUrl\n  } = _ref;\n  const {\n    rows,\n    organisationUnitGroupSet: groupSet\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const includeGroupSets = !!groupSet;\n  const coordinateField = getCoordinateField(config);\n  let loadError;\n  const alerts = [];\n  const orgUnitIds = orgUnits.map(item => item.id);\n  let associatedGeometries;\n  const name = i18n.t('Organisation units');\n  const data = await engine.query(GEOFEATURES_QUERY, {\n    variables: {\n      orgUnitIds,\n      keyAnalysisDisplayProperty,\n      includeGroupSets,\n      userId\n    }\n  }, {\n    onError: error => {\n      alerts.push({\n        critical: true,\n        code: ERROR_CRITICAL,\n        message: error.message || i18n.t('an error occurred')\n      });\n    }\n  });\n  const mainFeatures = data !== null && data !== void 0 && data.geoFeatures ? toGeoJson(data.geoFeatures) : [];\n  const orgUnitLevels = await apiFetchOrganisationUnitLevels(engine);\n\n  // Load organisationUnitGroups if not passed\n  let orgUnitGroups;\n  if (includeGroupSets && !groupSet.organisationUnitGroups) {\n    try {\n      orgUnitGroups = await engine.query(ORG_UNITS_GROUP_SET_QUERY, {\n        variables: {\n          id: groupSet === null || groupSet === void 0 ? void 0 : groupSet.id\n        }\n      });\n    } catch (err) {\n      loadError = i18n.t('GroupSet used for styling was not found');\n    }\n  }\n  if (!mainFeatures.length && !alerts.length) {\n    alerts.push({\n      code: WARNING_NO_OU_COORD,\n      message: i18n.t('Org unit layer')\n    });\n  }\n  if (orgUnitGroups) {\n    const {\n      groupSets\n    } = orgUnitGroups;\n    groupSet.organisationUnitGroups = parseGroupSet({\n      organisationUnitGroups: groupSets.organisationUnitGroups\n    });\n    groupSet.name = groupSets.name;\n  }\n  if (coordinateField) {\n    const rawData = await engine.query(GEOFEATURES_QUERY, {\n      variables: {\n        orgUnitIds,\n        keyAnalysisDisplayProperty,\n        includeGroupSets,\n        coordinateField: coordinateField.id,\n        userId\n      }\n    });\n    associatedGeometries = rawData !== null && rawData !== void 0 && rawData.geoFeatures ? toGeoJson(rawData.geoFeatures) : null;\n    if (!associatedGeometries.length) {\n      alerts.push({\n        code: WARNING_NO_GEOMETRY_COORD,\n        message: coordinateField.name\n      });\n    }\n  }\n  const features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n  const {\n    styledFeatures,\n    legend\n  } = getStyledOrgUnits({\n    features,\n    groupSet,\n    config,\n    baseUrl,\n    orgUnitLevels: orgUnitLevels.reduce((obj, item) => ({\n      ...obj,\n      [item.level]: item.displayName // orgUnitLevels do not have shortNames\n    }), {})\n  });\n  legend.title = name;\n  return {\n    ...config,\n    data: styledFeatures,\n    name,\n    legend,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true,\n    loadError\n  };\n};\nexport default orgUnitLoader;","import i18n from '@dhis2/d2-i18n';\nimport { scaleSqrt } from 'd3-scale';\nimport { findIndex } from 'lodash/fp';\nimport { WARNING_NO_DATA, WARNING_NO_OU_COORD, WARNING_NO_GEOMETRY_COORD, ERROR_CRITICAL } from '../constants/alerts.js';\nimport { dimConf } from '../constants/dimension.js';\nimport { EVENT_STATUS_COMPLETED } from '../constants/eventStatuses.js';\nimport { THEMATIC_BUBBLE, THEMATIC_RADIUS_DEFAULT, THEMATIC_RADIUS_LOW, THEMATIC_RADIUS_HIGH, RENDERING_STRATEGY_SINGLE, CLASSIFICATION_PREDEFINED, CLASSIFICATION_SINGLE_COLOR, ORG_UNIT_COLOR, ORG_UNIT_RADIUS_SMALL } from '../constants/layers.js';\nimport { getOrgUnitsFromRows, getPeriodsFromFilters, getValidDimensionsFromFilters, getDataItemFromColumns, getApiResponseNames } from '../util/analytics.js';\nimport { getLegendItemForValue } from '../util/classify.js';\nimport { hasValue } from '../util/helpers.js';\nimport { getPredefinedLegendItems, getAutomaticLegendItems } from '../util/legend.js';\nimport { toGeoJson } from '../util/map.js';\nimport { getCoordinateField, addAssociatedGeometries } from '../util/orgUnits.js';\nimport { LEGEND_SET_QUERY, GEOFEATURES_QUERY } from '../util/requests.js';\nimport { trimTime, formatStartEndDate, getDateArray } from '../util/time.js';\nconst thematicLoader = async _ref => {\n  let {\n    config,\n    engine,\n    keyAnalysisDisplayProperty,\n    userId,\n    analyticsEngine\n  } = _ref;\n  const {\n    columns,\n    radiusLow = THEMATIC_RADIUS_LOW,\n    radiusHigh = THEMATIC_RADIUS_HIGH,\n    classes,\n    colorScale,\n    renderingStrategy = RENDERING_STRATEGY_SINGLE,\n    thematicMapType,\n    noDataColor\n  } = config;\n  const dataItem = getDataItemFromColumns(columns);\n  const coordinateField = getCoordinateField(config);\n  let loadError;\n  const response = await loadData({\n    config,\n    engine,\n    keyAnalysisDisplayProperty,\n    userId,\n    analyticsEngine\n  }).catch(err => {\n    loadError = err;\n    if (err.message) {\n      loadError = err.errorCode === 'E7124' && err.message.includes('dx') ? i18n.t('Data item was not found') : err.message;\n    }\n  });\n  if (!response) {\n    return {\n      ...config,\n      ...(loadError ? {\n        alerts: [{\n          code: ERROR_CRITICAL,\n          message: loadError\n        }]\n      } : {}),\n      name: dataItem ? dataItem.name : i18n.t('Thematic layer'),\n      data: [],\n      legend: null,\n      isLoaded: true,\n      isLoading: false,\n      isVisible: true,\n      loadError\n    };\n  }\n  const [mainFeatures, data, associatedGeometries] = response;\n  const features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n  const isSingleMap = renderingStrategy === RENDERING_STRATEGY_SINGLE;\n  const isBubbleMap = thematicMapType === THEMATIC_BUBBLE;\n  const isSingleColor = config.method === CLASSIFICATION_SINGLE_COLOR;\n  const names = getApiResponseNames(data);\n  const presetPeriods = getPeriodsFromFilters(config.filters).map(pe => {\n    pe.name = names[pe.id];\n    return pe;\n  });\n  const periods = getPeriodsFromMetaData(data.metaData);\n  const dimensions = getValidDimensionsFromFilters(config.filters);\n  const valuesByPeriod = !isSingleMap ? getValuesByPeriod(data) : null;\n  const valueById = getValueById(data);\n  const valueFeatures = noDataColor ? features : features.filter(_ref2 => {\n    let {\n      id\n    } = _ref2;\n    return valueById[id] !== undefined;\n  });\n  const orderedValues = getOrderedValues(data);\n  let minValue = orderedValues[0];\n  let maxValue = orderedValues[orderedValues.length - 1];\n  const name = names[dataItem.id];\n  const alerts = [];\n  let legendSet = config.legendSet;\n\n  // Use legend set defined for data item as default\n  if (!legendSet && dataItem.legendSet && (config.method === undefined || config.method === CLASSIFICATION_PREDEFINED)) {\n    legendSet = dataItem.legendSet;\n  }\n\n  // Favorites often have wrong method\n  const method = legendSet ? CLASSIFICATION_PREDEFINED : config.method;\n  if (legendSet) {\n    const result = await engine.query(LEGEND_SET_QUERY, {\n      variables: {\n        id: config.legendSet.id\n      }\n    });\n    legendSet = result.legendSet;\n  }\n  let legendItems = [];\n  if (!isSingleColor) {\n    legendItems = legendSet ? getPredefinedLegendItems(legendSet) : getAutomaticLegendItems(orderedValues, method, classes, colorScale);\n  }\n  const legend = {\n    title: name,\n    period: presetPeriods.length > 0 ? presetPeriods.map(pe => pe.name || pe.id).join(', ') : formatStartEndDate(getDateArray(config.startDate), getDateArray(config.endDate)),\n    items: legendItems\n  };\n  if (dimensions && dimensions.length) {\n    legend.filters = dimensions.map(d => `${names[d.dimension]}: ${d.items.map(i => names[i.id]).join(', ')}`);\n  }\n  if (noDataColor && Array.isArray(legend.items)) {\n    legend.items.push({\n      color: noDataColor,\n      name: i18n.t('No data'),\n      noData: true\n    });\n  }\n  if (isSingleMap) {\n    legend.items.forEach(item => item.count = 0);\n  }\n  if (isBubbleMap) {\n    legend.bubbles = {\n      radiusLow,\n      radiusHigh,\n      minValue,\n      maxValue,\n      color: isSingleColor ? colorScale : null\n    };\n  }\n  const getLegendItem = value => getLegendItemForValue({\n    value,\n    legendItems: legend.items.filter(item => !item.noData),\n    clamp: !legendSet\n  });\n  if (legendSet && Array.isArray(legend.items) && legend.items.length >= 2) {\n    minValue = legend.items[0].startValue;\n    maxValue = legend.items[legend.items.length - 1].endValue;\n  }\n  const getRadiusForValue = scaleSqrt().range([radiusLow, radiusHigh]).domain([minValue, maxValue]).clamp(true);\n  if (!valueFeatures.length) {\n    if (!features.length) {\n      alerts.push({\n        code: WARNING_NO_OU_COORD,\n        message: i18n.t('Thematic layer')\n      });\n    } else {\n      alerts.push({\n        code: WARNING_NO_DATA,\n        message: name\n      });\n    }\n  }\n  if (coordinateField && !associatedGeometries.length) {\n    alerts.push({\n      code: WARNING_NO_GEOMETRY_COORD,\n      message: coordinateField.name\n    });\n  }\n  if (valuesByPeriod) {\n    const periods = Object.keys(valuesByPeriod);\n    periods.forEach(period => {\n      const orgUnits = Object.keys(valuesByPeriod[period]);\n      orgUnits.forEach(orgunit => {\n        const item = valuesByPeriod[period][orgunit];\n        const value = Number(item.value);\n        const legendItem = getLegendItem(value);\n        if (isSingleColor) {\n          item.color = colorScale;\n        } else if (legendItem) {\n          item.color = legendItem.color;\n        }\n        item.radius = getRadiusForValue(value);\n      });\n    });\n  } else {\n    const noDataLegendItem = legend.items.find(i => i.noData === true);\n    valueFeatures.forEach(_ref3 => {\n      let {\n        id,\n        geometry,\n        properties\n      } = _ref3;\n      const value = valueById[id];\n      const legendItem = getLegendItem(value);\n      const isPoint = geometry.type === 'Point';\n      const {\n        hasAdditionalGeometry\n      } = properties;\n      if (isSingleColor) {\n        properties.color = hasValue(value) ? colorScale : noDataLegendItem === null || noDataLegendItem === void 0 ? void 0 : noDataLegendItem.color;\n      } else if (legendItem) {\n        properties.color = hasAdditionalGeometry && isPoint ? ORG_UNIT_COLOR : legendItem.color;\n        properties.legend = legendItem.name; // Shown in data table\n        properties.range = `${legendItem.startValue} - ${legendItem.endValue}`; // Shown in data table\n      }\n\n      // Only count org units once in legend\n      if (!hasAdditionalGeometry) {\n        const targetItem = legendItem || noDataLegendItem;\n        if (targetItem) {\n          targetItem.count++;\n        }\n      }\n      properties.value = value;\n      properties.radius = hasAdditionalGeometry ? ORG_UNIT_RADIUS_SMALL : getRadiusForValue(value) || THEMATIC_RADIUS_DEFAULT;\n    });\n  }\n  return {\n    ...config,\n    data: valueFeatures,\n    periods,\n    valuesByPeriod,\n    name,\n    legend,\n    method,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true,\n    loadError\n  };\n};\nconst getPeriodsFromMetaData = _ref4 => {\n  let {\n    dimensions,\n    items\n  } = _ref4;\n  return dimensions.pe.map(id => {\n    const {\n      name,\n      startDate,\n      endDate\n    } = items[id];\n    const newEndDate = new Date(endDate);\n\n    // Set to midnight to include the last day\n    newEndDate.setHours(24);\n    return {\n      id,\n      name,\n      startDate: new Date(startDate),\n      endDate: newEndDate\n    };\n  });\n};\nconst getValuesByPeriod = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const periodIndex = findIndex(['name', 'pe'], headers);\n  const ouIndex = findIndex(['name', 'ou'], headers);\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.reduce((obj, row) => {\n    const period = row[periodIndex];\n    const periodObj = obj[period] = obj[period] || {};\n    periodObj[row[ouIndex]] = {\n      value: row[valueIndex]\n    };\n    return obj;\n  }, {});\n};\n\n// Returns an object mapping org. units and values\nconst getValueById = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const ouIndex = findIndex(['name', 'ou'], headers);\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.reduce((obj, row) => {\n    obj[row[ouIndex]] = parseFloat(row[valueIndex]);\n    return obj;\n  }, {});\n};\n\n// Returns an array of ordered values\nconst getOrderedValues = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.map(row => parseFloat(row[valueIndex])).sort((a, b) => a - b);\n};\n\n// Load features and data values from api\nconst loadData = async _ref5 => {\n  let {\n    config,\n    engine,\n    keyAnalysisDisplayProperty,\n    userId,\n    analyticsEngine\n  } = _ref5;\n  const {\n    rows,\n    columns,\n    filters,\n    startDate,\n    endDate,\n    valueType,\n    relativePeriodDate,\n    aggregationType,\n    renderingStrategy = RENDERING_STRATEGY_SINGLE,\n    eventStatus\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const presetPeriods = getPeriodsFromFilters(filters);\n  const dimensions = getValidDimensionsFromFilters(config.filters);\n  const dataItem = getDataItemFromColumns(columns) || {};\n  const coordinateField = getCoordinateField(config);\n  const isOperand = columns[0].dimension === dimConf.operand.objectName;\n  const isSingleMap = renderingStrategy === RENDERING_STRATEGY_SINGLE;\n  const orgUnitIds = orgUnits.map(item => item.id);\n  let dataDimension = isOperand ? dataItem.id.split('.')[0] : dataItem.id;\n  if (valueType === 'ds') {\n    dataDimension += '.REPORTING_RATE';\n  }\n  let analyticsRequest = new analyticsEngine.request().addOrgUnitDimension(orgUnits.map(ou => ou.id)).addDataDimension(dataDimension).withDisplayProperty(keyAnalysisDisplayProperty); // name/shortName\n\n  if (!isSingleMap) {\n    analyticsRequest = analyticsRequest.addPeriodDimension(presetPeriods.map(pe => pe.id));\n  } else {\n    analyticsRequest = presetPeriods.length > 0 ? analyticsRequest.addPeriodFilter(presetPeriods.map(pe => pe.id)) : analyticsRequest.withStartDate(trimTime(startDate)).withEndDate(trimTime(endDate));\n  }\n  if (dimensions) {\n    dimensions.forEach(d => analyticsRequest = analyticsRequest.addFilter(d.dimension, d.items.map(i => i.id)));\n  }\n  if (relativePeriodDate) {\n    analyticsRequest = analyticsRequest.withRelativePeriodDate(relativePeriodDate);\n  }\n  if (aggregationType) {\n    analyticsRequest = analyticsRequest.withAggregationType(aggregationType);\n  }\n  if (isOperand) {\n    analyticsRequest = analyticsRequest.addDimension('co');\n  }\n  if (eventStatus === EVENT_STATUS_COMPLETED) {\n    analyticsRequest = analyticsRequest.withParameters({\n      completedOnly: true\n    });\n  }\n  const rawData = await analyticsEngine.aggregate.get(analyticsRequest);\n  const geoFeatureData = await engine.query(GEOFEATURES_QUERY, {\n    variables: {\n      orgUnitIds,\n      keyAnalysisDisplayProperty,\n      userId\n    }\n  });\n  const mainFeatures = geoFeatureData !== null && geoFeatureData !== void 0 && geoFeatureData.geoFeatures ? toGeoJson(geoFeatureData.geoFeatures) : null;\n  let associatedGeometries;\n  if (coordinateField) {\n    // Associated geometry request\n    const coordFieldData = await engine.query(GEOFEATURES_QUERY, {\n      variables: {\n        orgUnitIds,\n        keyAnalysisDisplayProperty,\n        // name/shortName\n        coordinateField: coordinateField.id,\n        userId\n      }\n    });\n    associatedGeometries = coordFieldData !== null && coordFieldData !== void 0 && coordFieldData.geoFeatures ? toGeoJson(coordFieldData.geoFeatures) : null;\n  }\n  return [mainFeatures, new analyticsEngine.response(rawData), associatedGeometries];\n};\nexport default thematicLoader;","import i18n from '@dhis2/d2-i18n';\nexport const getProgramStatuses = () => [{\n  id: 'ALL',\n  name: i18n.t('All')\n}, {\n  id: 'ACTIVE',\n  name: i18n.t('Active')\n}, {\n  id: 'COMPLETED',\n  name: i18n.t('Completed')\n}, {\n  id: 'CANCELLED',\n  name: i18n.t('Cancelled')\n}];","const TRACKED_ENTITY_INSTANCE = 'TRACKED_ENTITY_INSTANCE';\nconst TEI_40_QUERY = {\n  resource: 'tracker/trackedEntities',\n  params: _ref => {\n    let {\n      fields,\n      orgUnits,\n      orgUnitMode,\n      program,\n      trackedEntityType\n    } = _ref;\n    return {\n      fields,\n      orgUnit: orgUnits,\n      ouMode: orgUnitMode,\n      program: program,\n      trackedEntityType,\n      skipPaging: true\n    };\n  }\n};\nconst TEI_41_QUERY = {\n  resource: 'tracker/trackedEntities',\n  params: _ref2 => {\n    let {\n      fields,\n      orgUnits,\n      orgUnitMode,\n      program,\n      trackedEntityType\n    } = _ref2;\n    return {\n      fields,\n      orgUnits,\n      orgUnitMode,\n      program,\n      trackedEntityType,\n      paging: false\n    };\n  }\n};\nconst normalizeInstances = instances => {\n  return instances.filter(instance => {\n    var _instance$geometry;\n    return !!((_instance$geometry = instance.geometry) !== null && _instance$geometry !== void 0 && _instance$geometry.coordinates);\n  }).reduce((out, instance) => {\n    out[instance.id] = instance;\n    return out;\n  }, {});\n};\nexport const parseTEInstanceId = instance => instance.trackedEntity.trackedEntity;\nconst isValidRel = (rel, type, id) => rel.relationshipType === type && (parseTEInstanceId(rel.from) === id || parseTEInstanceId(rel.to) === id);\nconst isIndexInstance = (instance, type, targetInstanceIds) => {\n  const alwaysBidirectional = false; // We might want to have a setting to be able to see relationship no mater if primary is source or target\n  let hasChildren = false;\n  for (let i = 0; i < instance.relationships.length; ++i) {\n    const rel = instance.relationships[i];\n    if (rel.relationshipType !== type) {\n      continue;\n    }\n    const toIdMatches = parseTEInstanceId(rel.to) === instance.id;\n    const fromIdMatches = parseTEInstanceId(rel.from) === instance.id;\n    if (alwaysBidirectional || !rel.bidirectional && fromIdMatches && !toIdMatches ||\n    // When not bidirectional we want the from id to match\n    rel.bidirectional && (fromIdMatches || toIdMatches) // When bidirectional it can be either from or to id that matches\n    ) {\n      hasChildren = true;\n      if (fromIdMatches) {\n        targetInstanceIds.push(parseTEInstanceId(rel.to));\n      } else {\n        targetInstanceIds.push(parseTEInstanceId(rel.from));\n      }\n    }\n  }\n  return hasChildren;\n};\n\n/* eslint-disable max-params */\nconst getInstanceRelationships = (relationshipsById, from, targetInstances, type) => {\n  const alwaysBidirectional = false; // We might want to have a setting to be able to see relationship no mater if primary is source or target\n  const localRels = from.relationships.filter(rel => isValidRel(rel, type, from.id));\n  localRels.forEach(rel => {\n    const id = rel.relationship;\n    const bidirectional = rel.bidirectional || alwaysBidirectional;\n    if (relationshipsById[id]) {\n      return;\n    }\n    const to = targetInstances[parseTEInstanceId(rel.to)];\n    if (to && from.id !== to.id) {\n      relationshipsById[id] = {\n        id,\n        from,\n        to,\n        bidirectional: !!bidirectional\n      };\n    } else {\n      const reversedTo = targetInstances[parseTEInstanceId(rel.from)];\n      if (reversedTo && from.id !== reversedTo.id && bidirectional) {\n        relationshipsById[id] = {\n          id,\n          from,\n          reversedTo,\n          bidirectional: !!bidirectional\n        };\n      }\n    }\n  });\n};\n/* eslint-enable max-params */\n\nconst fields = ['trackedEntity~rename(id)', 'geometry', 'relationships'];\nexport const getDataWithRelationships = async _ref3 => {\n  var _from$program, _to$program;\n  let {\n    isVersion40,\n    instances: sourceInstances,\n    queryOptions,\n    engine\n  } = _ref3;\n  const {\n    relationshipType,\n    orgUnits,\n    organisationUnitSelectionMode\n  } = queryOptions;\n  const from = relationshipType.fromConstraint;\n  const to = relationshipType.toConstraint;\n  if (from.relationshipEntity !== TRACKED_ENTITY_INSTANCE || to.relationshipEntity !== TRACKED_ENTITY_INSTANCE) {\n    return [];\n  }\n  const isRecursiveTrackedEntityType = from.trackedEntityType.id === to.trackedEntityType.id;\n  const isRecursiveProgram =\n  // program specified and same in both or not specified in both\n  'program' in from && 'program' in to && (from === null || from === void 0 ? void 0 : (_from$program = from.program) === null || _from$program === void 0 ? void 0 : _from$program.id) === (to === null || to === void 0 ? void 0 : (_to$program = to.program) === null || _to$program === void 0 ? void 0 : _to$program.id) || !('program' in from || 'program' in to);\n  const isToProgramDefined = ('program' in to);\n\n  // Use target as source if from/to TE Types and Programs match, otherwise\n  // fetch/re-fetch using program if available TE type otherwise\n  let recursiveProp = null;\n  if (isRecursiveTrackedEntityType &&\n  // Same TE Type\n  !isRecursiveProgram &&\n  // Different Program\n  isToProgramDefined // Defined 'To' Program\n  ) {\n    recursiveProp = {\n      program: to.program.id\n    };\n  } else if (isRecursiveTrackedEntityType &&\n  // Same TE Type\n  !isRecursiveProgram &&\n  // Different Program\n  !isToProgramDefined // Not Defined 'To' Program\n  ) {\n    recursiveProp = {\n      type: to.trackedEntityType\n    };\n  } else if (!isRecursiveTrackedEntityType &&\n  // Different TE Type\n  !isRecursiveProgram // Different Program\n  ) {\n    recursiveProp = {\n      type: to.trackedEntityType\n    };\n  }\n\n  // Keep TEI with coords and convert array to object (id = key)\n  const normalizedSourceInstances = normalizeInstances(sourceInstances);\n\n  // Retrieve potential target instances\n  let normalizedPotentialTargetInstances;\n  if (isRecursiveTrackedEntityType & isRecursiveProgram) {\n    normalizedPotentialTargetInstances = normalizedSourceInstances;\n  } else {\n    var _recursiveProp, _recursiveProp2, _recursiveProp2$type;\n    // VERSION-TOGGLE: https://github.com/dhis2/dhis2-releases/tree/master/releases/2.41#deprecated-apis\n    const {\n      tei\n    } = await engine.query({\n      tei: isVersion40 ? TEI_40_QUERY : TEI_41_QUERY\n    }, {\n      variables: {\n        fields,\n        orgUnits,\n        orgUnitMode: organisationUnitSelectionMode,\n        program: (_recursiveProp = recursiveProp) === null || _recursiveProp === void 0 ? void 0 : _recursiveProp.program,\n        trackedEntityType: (_recursiveProp2 = recursiveProp) === null || _recursiveProp2 === void 0 ? void 0 : (_recursiveProp2$type = _recursiveProp2.type) === null || _recursiveProp2$type === void 0 ? void 0 : _recursiveProp2$type.id\n      }\n    });\n    normalizedPotentialTargetInstances = normalizeInstances(tei[isVersion40 ? 'instances' : 'trackedEntities']);\n  }\n  const targetInstanceIds = [];\n  // Keep TEI with relationship of correct type\n  // Store Ids of target relationships\n  const filteredSourceInstances = sourceInstances.filter(instance => isIndexInstance(instance, relationshipType.id, targetInstanceIds));\n  const relationshipsById = {};\n  // Create relationship objects\n  filteredSourceInstances.forEach(instance => getInstanceRelationships(relationshipsById, instance, normalizedPotentialTargetInstances, relationshipType.id));\n\n  // Keep only instances that are the target of a relationship\n  const targetInstances = Object.values(normalizedPotentialTargetInstances).filter(instance => targetInstanceIds.includes(instance.id));\n  return {\n    primary: Object.values(normalizedSourceInstances),\n    relationships: Object.values(relationshipsById),\n    secondary: targetInstances\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport { WARNING_NO_DATA } from '../constants/alerts.js';\nimport { TEI_COLOR, TEI_RADIUS, TEI_RELATED_COLOR, TEI_RELATED_RADIUS, TEI_RELATIONSHIP_LINE_COLOR } from '../constants/layers.js';\nimport { getProgramStatuses } from '../constants/programStatuses.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { GEO_TYPE_POINT, GEO_TYPE_POLYGON, GEO_TYPE_MULTIPOLYGON, GEO_TYPE_LINE, GEO_TYPE_FEATURE } from '../util/geojson.js';\nimport { getDataWithRelationships } from '../util/teiRelationshipsParser.js';\nimport { trimTime, formatStartEndDate, getDateArray } from '../util/time.js';\nconst fields = ['trackedEntity~rename(id)', 'geometry'];\n\n// Valid geometry types for TEIs\nconst teiGeometryTypes = [GEO_TYPE_POINT, GEO_TYPE_POLYGON, GEO_TYPE_MULTIPOLYGON];\nconst TEI_40_QUERY = {\n  resource: 'tracker/trackedEntities',\n  params: _ref => {\n    let {\n      fields,\n      orgUnits,\n      orgUnitMode,\n      program,\n      programStatus,\n      followUp,\n      trackedEntityType,\n      enrollmentEnrolledAfter,\n      enrollmentEnrolledBefore,\n      updatedAfter,\n      updatedBefore\n    } = _ref;\n    return {\n      fields,\n      orgUnit: orgUnits,\n      ouMode: orgUnitMode,\n      program: program,\n      programStatus,\n      followUp,\n      trackedEntityType,\n      enrollmentEnrolledAfter,\n      enrollmentEnrolledBefore,\n      updatedAfter,\n      updatedBefore,\n      skipPaging: true\n    };\n  }\n};\nconst TEI_41_QUERY = {\n  resource: 'tracker/trackedEntities',\n  params: _ref2 => {\n    let {\n      fields,\n      orgUnits,\n      orgUnitMode,\n      program,\n      programStatus,\n      trackedEntityType,\n      enrollmentEnrolledAfter,\n      enrollmentEnrolledBefore,\n      updatedAfter,\n      updatedBefore\n      // TODO no followUp?\n    } = _ref2;\n    return {\n      fields,\n      orgUnits,\n      orgUnitMode,\n      program,\n      programStatus,\n      trackedEntityType,\n      enrollmentEnrolledAfter,\n      enrollmentEnrolledBefore,\n      updatedAfter,\n      updatedBefore,\n      paging: false\n    };\n  }\n};\nconst RELATIONSHIP_TYPES_QUERY = {\n  resource: 'relationshipTypes',\n  id: _ref3 => {\n    let {\n      id\n    } = _ref3;\n    return id;\n  }\n};\nconst TRACKED_ENTITY_TYPES_QUERY = {\n  resource: 'trackedEntityTypes',\n  id: _ref4 => {\n    let {\n      id\n    } = _ref4;\n    return id;\n  },\n  params: {\n    fields: 'displayName,featureType'\n  }\n};\nconst trackedEntityLoader = async _ref5 => {\n  let {\n    config,\n    engine,\n    serverVersion\n  } = _ref5;\n  if (config.config && typeof config.config === 'string') {\n    try {\n      const customConfig = JSON.parse(config.config);\n      config.relationshipType = customConfig.relationships.type;\n      config.relatedPointColor = customConfig.relationships.pointColor;\n      config.relatedPointRadius = customConfig.relationships.pointRadius;\n      config.relationshipLineColor = customConfig.relationships.lineColor;\n      config.relationshipOutsideProgram = customConfig.relationships.relationshipOutsideProgram;\n      config.periodType = customConfig.periodType;\n    } catch (e) {\n      // Failed to load JSON relationship config, assuming no relationships\n    }\n    delete config.config;\n  }\n  const {\n    trackedEntityType,\n    program,\n    programStatus,\n    followUp,\n    relationshipType: relationshipTypeID,\n    periodType,\n    startDate,\n    endDate,\n    rows,\n    organisationUnitSelectionMode,\n    eventPointColor,\n    eventPointRadius,\n    areaRadius,\n    relatedPointColor,\n    relatedPointRadius,\n    relationshipLineColor\n  } = config;\n  const name = program ? program.name : i18n.t('Tracked entity');\n  const legend = {\n    title: name,\n    period: formatStartEndDate(getDateArray(startDate), getDateArray(endDate)),\n    items: [{\n      name: trackedEntityType.name + (areaRadius ? ` + ${areaRadius} ${'m'} ${'buffer'}` : ''),\n      color: eventPointColor || TEI_COLOR,\n      radius: eventPointRadius || TEI_RADIUS\n    }]\n  };\n\n  // VERSION-TOGGLE: https://github.com/dhis2/dhis2-releases/tree/master/releases/2.41#deprecated-apis\n  const isVersion40 = `${serverVersion.minor}` === '40';\n  const orgUnits = getOrgUnitsFromRows(rows).map(ou => ou.id).join(isVersion40 ? ';' : ',');\n  const fieldsWithRelationships = [...fields, 'relationships'];\n  let explanation;\n  let boolFollowUp = undefined;\n  if (program && programStatus) {\n    explanation = `${i18n.t('Program status')}: ${getProgramStatuses().find(s => s.id === programStatus).name}`;\n  }\n  if (program && followUp !== undefined) {\n    boolFollowUp = followUp ? 'TRUE' : 'FALSE';\n  }\n  const {\n    trackedEntities\n  } = await engine.query({\n    trackedEntities: isVersion40 ? TEI_40_QUERY : TEI_41_QUERY\n  }, {\n    variables: {\n      fields: fieldsWithRelationships,\n      orgUnits: orgUnits,\n      orgUnitMode: organisationUnitSelectionMode,\n      program: program === null || program === void 0 ? void 0 : program.id,\n      programStatus,\n      followUp: boolFollowUp,\n      trackedEntityType: !program ? trackedEntityType === null || trackedEntityType === void 0 ? void 0 : trackedEntityType.id : undefined,\n      enrollmentEnrolledAfter: periodType === 'program' ? trimTime(startDate) : undefined,\n      enrollmentEnrolledBefore: periodType === 'program' ? trimTime(endDate) : undefined,\n      updatedAfter: periodType !== 'program' ? trimTime(startDate) : undefined,\n      updatedBefore: periodType !== 'program' ? trimTime(endDate) : undefined\n    }\n  });\n  const instances = trackedEntities[isVersion40 ? 'instances' : 'trackedEntities'].filter(instance => {\n    var _instance$geometry, _instance$geometry2;\n    return teiGeometryTypes.includes((_instance$geometry = instance.geometry) === null || _instance$geometry === void 0 ? void 0 : _instance$geometry.type) && ((_instance$geometry2 = instance.geometry) === null || _instance$geometry2 === void 0 ? void 0 : _instance$geometry2.coordinates);\n  });\n  let alert;\n  if (!instances.length) {\n    alert = {\n      code: WARNING_NO_DATA,\n      message: trackedEntityType.name\n    };\n  }\n  let data, relationships, secondaryData;\n  if (relationshipTypeID) {\n    const {\n      relationshipType\n    } = await engine.query({\n      relationshipType: RELATIONSHIP_TYPES_QUERY\n    }, {\n      variables: {\n        id: relationshipTypeID\n      }\n    });\n    const {\n      relatedEntityType\n    } = await engine.query({\n      relatedEntityType: TRACKED_ENTITY_TYPES_QUERY\n    }, {\n      variables: {\n        id: relationshipType.toConstraint.trackedEntityType.id\n      }\n    });\n    const isPoint = relatedEntityType.featureType === GEO_TYPE_POINT.toUpperCase();\n    legend.items.push({\n      type: GEO_TYPE_LINE,\n      name: relationshipType.displayName,\n      color: relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR,\n      weight: 1\n    }, {\n      name: `${relatedEntityType.displayName} (${i18n.t('related')})`,\n      color: relatedPointColor || TEI_RELATED_COLOR,\n      radius: isPoint ? relatedPointRadius || TEI_RELATED_RADIUS : undefined,\n      weight: !isPoint ? 1 : undefined\n    });\n    const dataWithRels = await getDataWithRelationships({\n      isVersion40,\n      instances,\n      queryOptions: {\n        relationshipType,\n        orgUnits,\n        organisationUnitSelectionMode\n      },\n      engine\n    });\n    data = toGeoJson(dataWithRels.primary);\n    relationships = dataWithRels.relationships;\n    secondaryData = toGeoJson(dataWithRels.secondary);\n  } else {\n    data = toGeoJson(instances);\n  }\n  if (explanation) {\n    legend.explanation = [explanation];\n  }\n  return {\n    ...config,\n    name,\n    data,\n    relationships,\n    secondaryData,\n    legend,\n    ...(alert ? {\n      alerts: [alert]\n    } : {}),\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nconst toGeoJson = instances => instances.map(_ref6 => {\n  let {\n    id,\n    geometry\n  } = _ref6;\n  return {\n    type: GEO_TYPE_FEATURE,\n    geometry,\n    properties: {\n      id\n    }\n  };\n});\nexport default trackedEntityLoader;","import { Analytics } from '@dhis2/analytics';\nimport { useDataEngine, useConfig } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLayerLoading, updateLayer } from '../actions/layers.js';\nimport { useCachedData } from '../components/cachedDataProvider/CachedDataProvider.js';\nimport useLoaderAlerts from '../components/loaders/useLoaderAlerts.js';\nimport { EVENT_LAYER } from '../constants/layers.js';\nimport earthEngineLoader from '../loaders/earthEngineLoader.js';\nimport eventLoader from '../loaders/eventLoader.js';\nimport externalLoader from '../loaders/externalLoader.js';\nimport facilityLoader from '../loaders/facilityLoader.js';\nimport geoJsonUrlLoader from '../loaders/geoJsonUrlLoader.js';\nimport orgUnitLoader from '../loaders/orgUnitLoader.js';\nimport thematicLoader from '../loaders/thematicLoader.js';\nimport trackedEntityLoader from '../loaders/trackedEntityLoader.js';\nconst loaders = {\n  earthEngine: earthEngineLoader,\n  event: eventLoader,\n  external: externalLoader,\n  facility: facilityLoader,\n  orgUnit: orgUnitLoader,\n  thematic: thematicLoader,\n  geoJsonUrl: geoJsonUrlLoader,\n  trackedEntity: trackedEntityLoader\n};\nexport const useLayersLoader = () => {\n  const {\n    baseUrl,\n    serverVersion\n  } = useConfig();\n  const engine = useDataEngine();\n  const [analyticsEngine] = useState(() => Analytics.getAnalytics(engine));\n  const {\n    currentUser\n  } = useCachedData();\n  const {\n    showAlerts\n  } = useLoaderAlerts();\n  const allLayers = useSelector(state => state.map.mapViews);\n  const dataTable = useSelector(state => state.dataTable);\n  const dispatch = useDispatch();\n  const {\n    show: showLoaderAlert\n  } = useAlert(_ref => {\n    let {\n      layer\n    } = _ref;\n    return `Could not load layer ${layer}`;\n  }, {\n    critical: true\n  });\n  const {\n    keyAnalysisDisplayProperty,\n    id: userId\n  } = currentUser;\n  useEffect(() => {\n    async function loadLayer(config, loader) {\n      const result = await loader({\n        config,\n        engine,\n        keyAnalysisDisplayProperty,\n        // name/shortName\n        userId,\n        baseUrl,\n        analyticsEngine,\n        // Thematic and Event loader\n        serverVersion,\n        // Tracked entity loader\n        loadExtended: !!dataTable // Event loader\n      });\n\n      if (result.alerts) {\n        showAlerts(result.alerts);\n      }\n      dispatch(updateLayer(result));\n    }\n    const unloadedLayers = allLayers.filter(layer => {\n      if (layer.isLoading) {\n        return false;\n      } else {\n        // The layer is not loaded - load it\n        if (!layer.isLoaded) {\n          return true;\n        }\n\n        // The layer is loaded but the data table is now displayed and\n        // event extended data hasn't been loaded yet - so load it\n        if (layer.layer === EVENT_LAYER && layer.id === dataTable && !layer.isExtended && !layer.serverCluster) {\n          return true;\n        }\n        return false;\n      }\n    });\n\n    // only load layers that have not yet been loaded\n    unloadedLayers.forEach(layerConfig => {\n      const loader = loaders[layerConfig.layer];\n      if (!loader) {\n        showLoaderAlert({\n          layer: layerConfig.layer\n        });\n        return;\n      }\n      dispatch(setLayerLoading(layerConfig.id));\n      loadLayer(layerConfig, loader);\n    });\n  }, [allLayers, dispatch, keyAnalysisDisplayProperty, userId, engine, analyticsEngine, showAlerts, showLoaderAlert, baseUrl, dataTable, serverVersion]);\n};","import * as types from '../constants/actionTypes.js';\nexport const closeDataTable = () => ({\n  type: types.DATA_TABLE_CLOSE\n});\nexport const toggleDataTable = id => ({\n  type: types.DATA_TABLE_TOGGLE,\n  id\n});\nexport const resizeDataTable = height => ({\n  type: types.DATA_TABLE_RESIZE,\n  height\n});","import { useEffect, useRef, useMemo, useCallback } from 'react';\nconst useKeyDown = function (key, callback) {\n  let longPress = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  const timerRef = useRef(null);\n  const keys = useMemo(() => Array.isArray(key) ? key : [key], [key]);\n  const handleKeyDown = useCallback(event => {\n    if (keys.includes(event.key)) {\n      if (longPress) {\n        timerRef.current = setTimeout(() => callback(event), 250);\n      } else {\n        callback(event);\n      }\n    }\n  }, [keys, callback, longPress]);\n  const handleKeyUp = useCallback(event => {\n    if (keys.includes(event.key) && longPress) {\n      clearTimeout(timerRef.current);\n    }\n  }, [keys, longPress]);\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [handleKeyDown, handleKeyUp]);\n};\nexport default useKeyDown;","import { debounce } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nexport const WindowDimensionsCtx = /*#__PURE__*/createContext(null);\nconst windowDims = () => ({\n  height: window.innerHeight,\n  width: window.innerWidth\n});\nconst WindowDimensionsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [dimensions, setDimensions] = useState(windowDims());\n  useEffect(() => {\n    const handleResize = debounce(150, () => {\n      setDimensions(windowDims());\n    });\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(WindowDimensionsCtx.Provider, {\n    value: dimensions\n  }, children);\n};\nWindowDimensionsProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default WindowDimensionsProvider;\nexport const useWindowDimensions = () => useContext(WindowDimensionsCtx);","import * as types from '../constants/actionTypes.js';\nexport const highlightFeature = payload => ({\n  type: types.FEATURE_HIGHLIGHT,\n  payload\n});\nexport const setFeatureProfile = payload => ({\n  type: types.FEATURE_PROFILE_SET,\n  payload\n});\nexport const closeFeatureProfile = () => ({\n  type: types.FEATURE_PROFILE_CLOSE\n});","import * as types from '../constants/actionTypes.js';\nexport const setOrgUnitProfile = id => ({\n  type: types.ORGANISATION_UNIT_PROFILE_SET,\n  payload: id\n});\nexport const closeOrgUnitProfile = () => ({\n  type: types.ORGANISATION_UNIT_PROFILE_CLOSE\n});","import i18n from '@dhis2/d2-i18n';\nimport { Input } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setDataFilter, clearDataFilter } from '../../actions/dataFilters.js';\nconst FilterInput = _ref => {\n  let {\n    type,\n    dataKey,\n    name\n  } = _ref;\n  const dispatch = useDispatch();\n  const dataTable = useSelector(state => state.dataTable);\n  const map = useSelector(state => state.map);\n  const overlay = dataTable && map.mapViews.filter(layer => layer.id === dataTable)[0];\n  let layerId;\n  let filters;\n  if (overlay) {\n    layerId = overlay.id;\n    filters = overlay.dataFilters || {};\n  }\n  const filterValue = filters[dataKey] || '';\n  const onChange = _ref2 => {\n    let {\n      value\n    } = _ref2;\n    return value !== '' ? dispatch(setDataFilter(layerId, dataKey, value)) : dispatch(clearDataFilter(layerId, dataKey, value));\n  };\n  return /*#__PURE__*/React.createElement(Input, {\n    dataTest: `data-table-column-filter-input-${name}`,\n    dense: true,\n    placeholder: type === 'number' ? '2,>3&<8' : i18n.t('Search'),\n    value: filterValue,\n    onChange: onChange\n  });\n};\nFilterInput.propTypes = {\n  dataKey: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired\n};\nexport default FilterInput;","import * as types from '../constants/actionTypes.js';\nexport const setDataFilter = (layerId, fieldId, filter) => ({\n  type: types.DATA_FILTER_SET,\n  layerId,\n  fieldId,\n  filter\n});\nexport const clearDataFilter = (layerId, fieldId) => ({\n  type: types.DATA_FILTER_CLEAR,\n  layerId,\n  fieldId\n});","// extracted by mini-css-extract-plugin\nexport default {\"dataTable\":\"DataTable_dataTable__+C-oU\",\"dataCell\":\"DataTable_dataCell__BA8wh\",\"lightText\":\"DataTable_lightText__0kiW+\",\"columnHeader\":\"DataTable_columnHeader__MR-rW\",\"noResults\":\"DataTable_noResults__ywZKR\",\"noSupport\":\"DataTable_noSupport__ljTk-\"};","// Filters an array of object with a set of filters\nexport const filterData = (data, filters) => {\n  if (!filters) {\n    return data;\n  }\n  let filteredData = [...data];\n  Object.keys(filters).forEach(field => {\n    // Loop through all filters\n    const filter = filters[field];\n    filteredData = filteredData.filter(d => {\n      // Loop through all data items\n      const props = d.properties || d; // GeoJSON or plain object\n      const value = props[field];\n      return typeof value === 'number' ? numericFilter(value, filter) : stringFilter(value, filter);\n    });\n  });\n  return filteredData;\n};\n\n// Simple check if string contains another string\nexport const stringFilter = (string, filter) => {\n  return ('' + string).toLowerCase().includes(filter.toLowerCase());\n};\n\n// Numeric filter supporting AND, OR, GREATER THAN, LESS THAN or equal number\nexport const numericFilter = (value, filter) => {\n  // TODO: Syntax error handling\n  return filter.split(',').some(orFilter => {\n    // OR filter\n    return orFilter.split('&').every(filter => isTrueFilter(value, filter)); // AND filter\n  });\n};\n\n// Returns true if the filter is true\nconst isTrueFilter = (value, filter) => {\n  if (filter.includes('>')) {\n    // GREATER THAN\n    return value >= Number(filter.split('>')[1]);\n  }\n  if (filter.includes('<')) {\n    // LESS THAN\n    return value <= Number(filter.split('<')[1]);\n  }\n  return value === Number(filter); // Equal number\n};","import i18n from '@dhis2/d2-i18n';\nimport { useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { EVENT_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EARTH_ENGINE_LAYER, FACILITY_LAYER, GEOJSON_URL_LAYER } from '../../constants/layers.js';\nimport { numberValueTypes } from '../../constants/valueTypes.js';\nimport { hasClasses } from '../../util/earthEngine.js';\nimport { filterData } from '../../util/filter.js';\nimport { getGeojsonDisplayData } from '../../util/geojson.js';\nimport { getRoundToPrecisionFn, getPrecision } from '../../util/numbers.js';\nimport { isValidUid } from '../../util/uid.js';\nconst ASCENDING = 'asc';\nconst TYPE_NUMBER = 'number';\nconst TYPE_STRING = 'string';\nconst TYPE_DATE = 'date';\nconst INDEX = 'index';\nconst NAME = 'name';\nconst ID = 'id';\nconst VALUE = 'value';\nconst LEGEND = 'legend';\nconst RANGE = 'range';\nconst LEVEL = 'level';\nconst PARENT_NAME = 'parentName';\nconst TYPE = 'type';\nconst COLOR = 'color';\nconst OUNAME = 'ouname';\nconst EVENTDATE = 'eventdate';\nconst ERROR_SERVER_CLUSTER = 'SERVER_CLUSTER';\nconst ERROR_NO_VALID_DATA = 'NO_VALID_DATA';\nconst ERROR_NO_HEADERS = 'NO_HEADERS';\nconst ERROR_NON_HOMOGENOUS_FEATURES = 'NON_HOMOGENOUS_FEATURES';\nconst getErrorCodeText = code => {\n  switch (code) {\n    case ERROR_SERVER_CLUSTER:\n      return i18n.t('Data table is not supported when events are grouped on the server.');\n    case ERROR_NO_VALID_DATA:\n      return i18n.t('No valid data was found for the current layer configuration.');\n    case ERROR_NON_HOMOGENOUS_FEATURES:\n      return i18n.t('Data table is not supported when there is more than one geometry type in the dataset.');\n    case ERROR_NO_HEADERS:\n      return i18n.t('No valid data fields were found for this layer.');\n    default:\n      return null;\n  }\n};\nconst defaultFieldsMap = () => ({\n  [INDEX]: {\n    name: i18n.t('Index'),\n    dataKey: INDEX,\n    type: TYPE_NUMBER\n  },\n  [NAME]: {\n    name: i18n.t('Name'),\n    dataKey: NAME,\n    type: TYPE_STRING\n  },\n  [ID]: {\n    name: i18n.t('Id'),\n    dataKey: ID,\n    type: TYPE_STRING\n  },\n  [LEVEL]: {\n    name: i18n.t('Level'),\n    dataKey: LEVEL,\n    type: TYPE_NUMBER\n  },\n  [PARENT_NAME]: {\n    name: i18n.t('Parent'),\n    dataKey: PARENT_NAME,\n    type: TYPE_STRING\n  },\n  [TYPE]: {\n    name: i18n.t('Type'),\n    dataKey: TYPE,\n    type: TYPE_STRING\n  },\n  [VALUE]: {\n    name: i18n.t('Value'),\n    dataKey: VALUE,\n    type: TYPE_NUMBER\n  },\n  [LEGEND]: {\n    name: i18n.t('Legend'),\n    dataKey: LEGEND,\n    type: TYPE_STRING\n  },\n  [RANGE]: {\n    name: i18n.t('Range'),\n    dataKey: RANGE,\n    type: TYPE_STRING\n  },\n  [OUNAME]: {\n    name: i18n.t('Org unit'),\n    dataKey: OUNAME,\n    type: TYPE_STRING\n  },\n  [EVENTDATE]: {\n    name: i18n.t('Event time'),\n    dataKey: EVENTDATE,\n    type: TYPE_DATE,\n    renderer: 'formatTime...'\n  },\n  [COLOR]: {\n    name: i18n.t('Color'),\n    dataKey: COLOR,\n    type: TYPE_STRING,\n    renderer: 'rendercolor'\n  }\n});\nconst getThematicHeaders = () => [INDEX, NAME, ID, VALUE, LEGEND, RANGE, LEVEL, PARENT_NAME, TYPE, COLOR].map(field => defaultFieldsMap()[field]);\nconst getEventHeaders = _ref => {\n  let {\n    layerHeaders = [],\n    styleDataItem\n  } = _ref;\n  const fields = [INDEX, OUNAME, ID, EVENTDATE].map(field => defaultFieldsMap()[field]);\n  const customFields = layerHeaders.filter(_ref2 => {\n    let {\n      name\n    } = _ref2;\n    return isValidUid(name);\n  }).map(_ref3 => {\n    let {\n      name: dataKey,\n      column: name,\n      valueType\n    } = _ref3;\n    return {\n      name,\n      dataKey,\n      type: numberValueTypes.includes(valueType) ? TYPE_NUMBER : TYPE_STRING\n    };\n  });\n  customFields.push(defaultFieldsMap()[TYPE]);\n  if (styleDataItem) {\n    customFields.push(defaultFieldsMap()[COLOR]);\n  }\n  return fields.concat(customFields);\n};\nconst getOrgUnitHeaders = () => [INDEX, NAME, ID, LEVEL, PARENT_NAME, TYPE].map(field => defaultFieldsMap()[field]);\nconst getFacilityHeaders = () => [INDEX, NAME, ID, TYPE].map(field => defaultFieldsMap()[field]);\nconst toTitleCase = str => str.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\nconst getEarthEngineHeaders = _ref4 => {\n  let {\n    aggregationType,\n    legend,\n    data\n  } = _ref4;\n  const {\n    title,\n    items\n  } = legend;\n  let customFields = [];\n  if (hasClasses(aggregationType) && items) {\n    customFields = items.map(_ref5 => {\n      let {\n        value,\n        name\n      } = _ref5;\n      return {\n        name,\n        dataKey: String(value),\n        roundFn: getRoundToPrecisionFn(2),\n        type: TYPE_NUMBER\n      };\n    });\n  } else if (Array.isArray(aggregationType) && aggregationType.length) {\n    customFields = aggregationType.map(type => {\n      let roundFn = null;\n      if (data !== null && data !== void 0 && data.length) {\n        const precision = getPrecision(data.map(d => d[type]));\n        roundFn = getRoundToPrecisionFn(precision);\n      }\n      return {\n        name: toTitleCase(`${type} ${title}`),\n        dataKey: type,\n        roundFn,\n        type: TYPE_NUMBER\n      };\n    });\n  }\n  return [INDEX, NAME, ID, TYPE].map(field => defaultFieldsMap()[field]).concat(customFields);\n};\nconst getGeoJsonUrlHeaders = firstDataItem => getGeojsonDisplayData(firstDataItem);\nconst EMPTY_AGGREGATIONS = {};\nconst EMPTY_LAYER = {};\nexport const useTableData = _ref6 => {\n  let {\n    layer,\n    sortField,\n    sortDirection\n  } = _ref6;\n  const allAggregations = useSelector(state => state.aggregations);\n  const aggregations = allAggregations[layer.id] || EMPTY_AGGREGATIONS;\n  const errorCode = useRef(null);\n  const {\n    layer: layerType,\n    aggregationType,\n    legend,\n    styleDataItem,\n    data,\n    dataFilters,\n    headers: layerHeaders,\n    serverCluster\n  } = layer || EMPTY_LAYER;\n  const dataWithAggregations = useMemo(() => {\n    errorCode.current = null;\n    if (serverCluster) {\n      errorCode.current = ERROR_SERVER_CLUSTER;\n      return null;\n    }\n    if (!(data !== null && data !== void 0 && data.length)) {\n      errorCode.current = ERROR_NO_VALID_DATA;\n      return null;\n    }\n    if (layerType === GEOJSON_URL_LAYER) {\n      return data.map(d => ({\n        ...d.properties\n      }));\n    }\n    return data.filter(d => !d.properties.hasAdditionalGeometry).map((d, index) => ({\n      ...(d.properties || d),\n      ...aggregations[d.id],\n      index\n    }));\n  }, [data, aggregations, serverCluster, layerType]);\n  const headers = useMemo(() => {\n    var _headers;\n    if (errorCode.current) {\n      return null;\n    }\n    let headers = null;\n    switch (layerType) {\n      case THEMATIC_LAYER:\n        headers = getThematicHeaders();\n        break;\n      case EVENT_LAYER:\n        headers = getEventHeaders({\n          layerHeaders,\n          styleDataItem\n        });\n        break;\n      case ORG_UNIT_LAYER:\n        headers = getOrgUnitHeaders();\n        break;\n      case EARTH_ENGINE_LAYER:\n        headers = getEarthEngineHeaders({\n          aggregationType,\n          legend,\n          data: dataWithAggregations\n        });\n        break;\n      case FACILITY_LAYER:\n        headers = getFacilityHeaders();\n        break;\n      case GEOJSON_URL_LAYER:\n        {\n          if (data.some(feature => feature.geometry.type !== data[0].geometry.type)) {\n            errorCode.current = ERROR_NON_HOMOGENOUS_FEATURES;\n            return null;\n          }\n          headers = getGeoJsonUrlHeaders(data[0]);\n          break;\n        }\n      default:\n        break;\n    }\n    if (!((_headers = headers) !== null && _headers !== void 0 && _headers.length)) {\n      errorCode.current = ERROR_NO_HEADERS;\n      return null;\n    }\n    return headers;\n  }, [layerType, aggregationType, legend, styleDataItem, dataWithAggregations, data, layerHeaders]);\n  const rows = useMemo(() => {\n    if (errorCode.current) {\n      return null;\n    }\n    if (!headers.length) {\n      errorCode.current = ERROR_NO_HEADERS;\n      return null;\n    }\n    const filteredData = filterData(dataWithAggregations, dataFilters);\n\n    //sort\n    filteredData.sort((a, b) => {\n      a = a[sortField];\n      b = b[sortField];\n      if (typeof a === TYPE_NUMBER) {\n        return sortDirection === ASCENDING ? a - b : b - a;\n      }\n      // TODO: Make sure sorting works across different locales\n      if (a !== undefined) {\n        return sortDirection === ASCENDING ? a.localeCompare(b) : b.localeCompare(a);\n      }\n      return 0;\n    });\n    return filteredData.map(item => headers.map(_ref7 => {\n      let {\n        dataKey,\n        roundFn,\n        type\n      } = _ref7;\n      const value = roundFn ? roundFn(item[dataKey]) : item[dataKey];\n      return {\n        dataKey,\n        value: type === TYPE_NUMBER && isNaN(value) ? null : value,\n        align: type === TYPE_NUMBER ? 'right' : 'left',\n        itemId: item.id\n      };\n    }));\n  }, [headers, dataWithAggregations, dataFilters, sortField, sortDirection]);\n\n  // EE layers and event layers may be loading additional data\n  const isLoading = layerType === EARTH_ENGINE_LAYER && (aggregationType === null || aggregationType === void 0 ? void 0 : aggregationType.length) && (!aggregations || aggregations === EMPTY_AGGREGATIONS) || layerType === EVENT_LAYER && !layer.isExtended && !serverCluster;\n  return {\n    headers,\n    rows,\n    isLoading,\n    error: getErrorCodeText(errorCode.current)\n  };\n};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { DataTable, DataTableRow, DataTableCell, DataTableColumnHeader, DataTableHead, DataTableBody, ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useReducer, useCallback, useMemo, useEffect, useRef, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { TableVirtuoso } from 'react-virtuoso';\nimport { highlightFeature, setFeatureProfile } from '../../actions/feature.js';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport { EVENT_LAYER, GEOJSON_URL_LAYER } from '../../constants/layers.js';\nimport { isDarkColor } from '../../util/colors.js';\nimport FilterInput from './FilterInput.js';\nimport styles from './styles/DataTable.module.css';\nimport { useTableData } from './useTableData.js';\nconst ASCENDING = 'asc';\nconst DESCENDING = 'desc';\nconst DataTableWithVirtuosoContext = _ref => {\n  let {\n    context,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(DataTable, _extends({}, props, {\n    layout: context.layout,\n    className: styles.dataTable\n  }));\n};\nDataTableWithVirtuosoContext.propTypes = {\n  context: PropTypes.shape({\n    layout: PropTypes.string\n  })\n};\nconst DataTableRowWithVirtuosoContext = _ref2 => {\n  let {\n    context,\n    item,\n    ...props\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(DataTableRow, _extends({\n    onClick: () => context.onClick(item),\n    onMouseEnter: () => context.onMouseEnter(item),\n    onMouseLeave: context.onMouseLeave\n  }, props));\n};\nDataTableRowWithVirtuosoContext.propTypes = {\n  context: PropTypes.shape({\n    onClick: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func\n  }),\n  item: PropTypes.arrayOf(PropTypes.shape({\n    dataKey: PropTypes.string,\n    itemId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    value: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n  }))\n};\nconst TableComponents = {\n  Table: DataTableWithVirtuosoContext,\n  TableBody: DataTableBody,\n  TableHead: DataTableHead,\n  TableRow: DataTableRowWithVirtuosoContext,\n  EmptyPlaceholder: () => /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: 99999\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noResults\n  }, i18n.t('No results found'))))\n};\nconst Table = _ref3 => {\n  let {\n    availableHeight,\n    availableWidth\n  } = _ref3;\n  const headerRowRef = useRef(null);\n  const [columnWidths, setColumnWidths] = useState([]);\n  const {\n    mapViews\n  } = useSelector(state => state.map);\n  const activeLayerId = useSelector(state => state.dataTable);\n  const dispatch = useDispatch();\n  const feature = useSelector(state => state.feature);\n  const [{\n    sortField,\n    sortDirection\n  }, setSorting] = useReducer((sorting, newSorting) => ({\n    ...sorting,\n    ...newSorting\n  }), {\n    sortField: 'name',\n    sortDirection: ASCENDING\n  });\n  const layer = mapViews.find(l => l.id === activeLayerId);\n  const sortData = useCallback(_ref4 => {\n    let {\n      name\n    } = _ref4;\n    setSorting({\n      sortField: name,\n      sortDirection: sortDirection === ASCENDING ? DESCENDING : ASCENDING\n    });\n  }, [sortDirection]);\n  const showDetailView = useCallback(row => {\n    if (layer.layer === EVENT_LAYER) {\n      return;\n    }\n    if (layer.layer === GEOJSON_URL_LAYER) {\n      const {\n        name\n      } = layer;\n      const data = row.reduce((acc, _ref5) => {\n        let {\n          dataKey,\n          value\n        } = _ref5;\n        acc[dataKey] = value;\n        return acc;\n      }, {});\n      dispatch(setFeatureProfile({\n        name,\n        data\n      }));\n    } else {\n      var _row$find;\n      const id = (_row$find = row.find(r => r.dataKey === 'id')) === null || _row$find === void 0 ? void 0 : _row$find.value;\n      id && dispatch(setOrgUnitProfile(id));\n    }\n  }, [dispatch, layer]);\n  const setFeatureHighlight = useCallback(row => {\n    var _row$find2;\n    const id = ((_row$find2 = row.find(r => r.dataKey === 'id')) === null || _row$find2 === void 0 ? void 0 : _row$find2.value) || row[0].itemId;\n    if (!id || !feature || id !== feature.id) {\n      dispatch(highlightFeature(id ? {\n        id,\n        layerId: layer.id,\n        origin: 'table'\n      } : null));\n    }\n  }, [feature, dispatch, layer.id]);\n  const clearFeatureHighlight = useCallback(event => {\n    var _event$toElement;\n    const nextElement = (_event$toElement = event.toElement) !== null && _event$toElement !== void 0 ? _event$toElement : event.relatedTarget;\n    // When hovering to the next row the next element is a `TD`\n    // If this is the case `setFeatureHighlight` will\n    // fire and the highlight does not need to be cleared\n    if (nextElement.tagName !== 'TD') {\n      dispatch(highlightFeature(null));\n    }\n  }, [dispatch]);\n  const tableContext = useMemo(() => ({\n    onClick: showDetailView,\n    onMouseEnter: setFeatureHighlight,\n    onMouseLeave: clearFeatureHighlight,\n    layout: columnWidths.length > 0 ? 'fixed' : 'auto'\n  }), [showDetailView, setFeatureHighlight, clearFeatureHighlight, columnWidths]);\n  const {\n    headers,\n    rows,\n    isLoading,\n    error\n  } = useTableData({\n    layer,\n    sortField,\n    sortDirection\n  });\n  useEffect(() => {\n    /* The combination of automatic table layout and virtual scrolling\n     * causes a content shift when scrolling and filtering because the\n     * cells in the DOM have a different content length which causes the\n     * columns to have a different width. To avoid that we measure the\n     * initial column widths and switch to a fixed layout based on these\n     * measured widths */\n    if (columnWidths.length === 0 && headerRowRef.current) {\n      requestAnimationFrame(() => {\n        const measuredColumnWidths = [];\n        for (const cell of headerRowRef.current.cells) {\n          const rect = cell.getBoundingClientRect();\n          measuredColumnWidths.push(Math.floor(rect.width));\n        }\n        setColumnWidths(measuredColumnWidths);\n      });\n    }\n  }, [columnWidths]);\n  useEffect(() => {\n    /* When the window is resized, the sidebar opens, or the table\n     * headers change, the table needs to switch back to its\n     * automatic layout so that the cells can subsequently can be\n     * measured again in the useEffect hook above */\n    if (!error) {\n      setColumnWidths([]);\n    }\n  }, [availableWidth, headers, error]);\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.noSupport\n    }, error);\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableVirtuoso, {\n    context: tableContext,\n    components: TableComponents,\n    style: {\n      height: availableHeight,\n      width: '100%'\n    },\n    data: rows,\n    fixedHeaderContent: () => /*#__PURE__*/React.createElement(DataTableRow, {\n      ref: headerRowRef\n    }, headers.map((_ref6, index) => {\n      let {\n        name,\n        dataKey,\n        type\n      } = _ref6;\n      return /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n        className: styles.columnHeader,\n        key: `${dataKey}-${index}`,\n        onSortIconClick: sortData,\n        sortDirection: dataKey === sortField ? sortDirection : 'default',\n        sortIconTitle: i18n.t('Sort by {{column}}', {\n          column: name\n        }),\n        onFilterIconClick: type && Function.prototype,\n        showFilter: !!type && dataKey !== 'index',\n        name: dataKey,\n        filter: type && /*#__PURE__*/React.createElement(FilterInput, {\n          type: type,\n          dataKey: dataKey,\n          name: name\n        }),\n        width: columnWidths.length > 0 ? `${columnWidths[index]}px` : 'auto'\n      }, name);\n    })),\n    itemContent: (_, row) => row.map(_ref7 => {\n      let {\n        dataKey,\n        value,\n        align\n      } = _ref7;\n      return /*#__PURE__*/React.createElement(DataTableCell, {\n        key: `dtcell-${dataKey}`,\n        className: cx(styles.dataCell, {\n          [styles.lightText]: dataKey === 'color' && isDarkColor(value)\n        }),\n        backgroundColor: dataKey === 'color' ? value : null,\n        align: align\n      }, dataKey === 'color' ? value === null || value === void 0 ? void 0 : value.toLowerCase() : value);\n    })\n  }), isLoading && /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))));\n};\nTable.propTypes = {\n  availableHeight: PropTypes.number,\n  availableWidth: PropTypes.number\n};\nexport default Table;","import i18n from '@dhis2/d2-i18n';\nimport { CenteredContent } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      errorInfo: null\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error,\n      errorInfo\n    });\n  }\n  render() {\n    const {\n      children\n    } = this.props;\n    if (this.state.error) {\n      return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Something went wrong')));\n    }\n    return children;\n  }\n}\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default ErrorBoundary;","import React from 'react';\nexport const IconDrag = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"8\",\n  viewBox: \"0 0 15 8\",\n  width: \"15\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m1.5 5c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm6 0c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm6 0c.8284271 0 1.5.67157288 1.5 1.5s-.6715729 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.6715729-1.5 1.5-1.5zm-6-5c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm-6 0c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm12 0c.8284271 0 1.5.67157288 1.5 1.5s-.6715729 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.6715729-1.5 1.5-1.5z\",\n  fill: \"#6e7a8a\",\n  fillRule: \"evenodd\"\n}));","// extracted by mini-css-extract-plugin\nexport default {\"resizeHandle\":\"ResizeHandle_resizeHandle__688px\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconDrag } from '../core/icons.js';\nimport styles from './styles/ResizeHandle.module.css';\n\n// TODO: Remove globe cursor in chrome\n// https://stackoverflow.com/questions/6771196/stopping-chrome-from-changing-cursor-to-a-globe-while-dragging-a-link\n\nconst ResizeHandle = _ref => {\n  let {\n    onResize,\n    onResizeEnd,\n    minHeight,\n    maxHeight\n  } = _ref;\n  let dragHeight = 0;\n  const onDragStart = evt => {\n    // Set the drag ghost image to a transparent 1x1px\n    // https://stackoverflow.com/questions/7680285/how-do-you-turn-off-setdragimage\n    const img = document.createElement('img');\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    evt.dataTransfer.setDragImage(img, 0, 0);\n    evt.dataTransfer.setData('text/plain', 'node'); // Required to initialize dragging in Firefox\n\n    // https://stackoverflow.com/questions/23992091/drag-and-drop-directive-no-e-clientx-or-e-clienty-on-drag-event-in-firefox\n    document.ondragover = onDrag;\n  };\n  const onDrag = evt => {\n    const height = getHeight(evt || window.event);\n    if (height && onResize) {\n      onResize(height);\n      dragHeight = height;\n    }\n  };\n  const onDragEnd = evt => {\n    const height = getHeight(evt);\n    if (height && onResizeEnd) {\n      onResizeEnd(height);\n    }\n    document.ondragover = null;\n  };\n  const getHeight = evt => {\n    if (evt.pageY) {\n      const height = window.innerHeight - evt.pageY;\n      dragHeight = height < minHeight ? minHeight : height > maxHeight ? maxHeight : height;\n    }\n    return dragHeight;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.resizeHandle,\n    draggable: true,\n    onDragStart: evt => onDragStart(evt),\n    onDragEnd: evt => onDragEnd(evt)\n  }, /*#__PURE__*/React.createElement(IconDrag, null));\n};\nResizeHandle.propTypes = {\n  maxHeight: PropTypes.number.isRequired,\n  minHeight: PropTypes.number.isRequired,\n  onResize: PropTypes.func,\n  onResizeEnd: PropTypes.func\n};\nResizeHandle.defaultProps = {\n  minHeight: 50,\n  maxHeight: 500\n};\nexport default ResizeHandle;","// extracted by mini-css-extract-plugin\nexport default {\"bottomPanel\":\"BottomPanel_bottomPanel__v8ypx\",\"dataTableControls\":\"BottomPanel_dataTableControls__Qwyxi\",\"closeIcon\":\"BottomPanel_closeIcon__bVSfa\"};","import { IconCross16 } from '@dhis2/ui';\nimport React, { useRef, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeDataTable, resizeDataTable } from '../../actions/dataTable.js';\nimport { LAYERS_PANEL_WIDTH, RIGHT_PANEL_WIDTH } from '../../constants/layout.js';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nimport { getCssVar } from '../../util/helpers.js';\nimport { useWindowDimensions } from '../WindowDimensionsProvider.js';\nimport DataTable from './DataTable.js';\nimport ErrorBoundary from './ErrorBoundary.js';\nimport ResizeHandle from './ResizeHandle.js';\nimport styles from './styles/BottomPanel.module.css';\n\n// Container for DataTable\nconst BottomPanel = () => {\n  const dataTableHeight = useSelector(state => state.ui.dataTableHeight);\n  const layersPanelOpen = useSelector(state => state.ui.layersPanelOpen);\n  const rightPanelOpen = useSelector(state => state.ui.rightPanelOpen);\n  const dispatch = useDispatch();\n  const {\n    width,\n    height\n  } = useWindowDimensions();\n  const panelRef = useRef(null);\n  const onResize = useCallback(h => panelRef.current.style.height = `${h}px`, [panelRef]);\n  const maxHeight = height - getCssVar('--header-height') - getCssVar('--toolbar-height');\n  const tableHeight = dataTableHeight < maxHeight ? dataTableHeight : maxHeight;\n  const layersWidth = layersPanelOpen ? LAYERS_PANEL_WIDTH : 0;\n  const rightPanelWidth = rightPanelOpen ? RIGHT_PANEL_WIDTH : 0;\n  const tableWidth = width - layersWidth - rightPanelWidth;\n  const dataTableControlsHeight = 20;\n  useKeyDown('Escape', () => dispatch(closeDataTable()), true);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: panelRef,\n    className: styles.bottomPanel,\n    style: {\n      height: tableHeight,\n      width: tableWidth\n    },\n    \"data-test\": \"bottom-panel\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dataTableControls\n  }, /*#__PURE__*/React.createElement(ResizeHandle, {\n    maxHeight: maxHeight,\n    onResize: onResize,\n    onResizeEnd: height => dispatch(resizeDataTable(height))\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.closeIcon,\n    onClick: () => dispatch(closeDataTable())\n  }, /*#__PURE__*/React.createElement(IconCross16, null))), /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(DataTable, {\n    availableHeight: dataTableHeight - dataTableControlsHeight,\n    availableWidth: tableWidth\n  })));\n};\nexport default BottomPanel;","export const LAYERS_PANEL_WIDTH = 300;\nexport const RIGHT_PANEL_WIDTH = 380;","import { createHashHistory } from 'history';\nimport queryString from 'query-string';\nconst history = createHashHistory();\nexport default history;\nconst defaultHashUrlParams = {\n  mapId: '',\n  isDownload: false,\n  interpretationId: null\n};\nconst DOWNLOAD = 'download';\nconst getHashUrlParams = loc => {\n  const params = queryString.parse(loc.search || '', {\n    parseBooleans: true\n  });\n  const pathParts = loc.pathname.slice(1).split('/');\n  if (pathParts.length > 0) {\n    if (pathParts[0] === DOWNLOAD) {\n      params.mapId = '';\n      params.isDownload = true;\n    } else {\n      params.mapId = pathParts[0];\n      if (pathParts[1] === DOWNLOAD) {\n        params.isDownload = true;\n      }\n    }\n  }\n  return params;\n};\nconst getHashUrlParam = key => {\n  const params = getHashUrlParams(history.location);\n  return params[key];\n};\nconst openDownloadMode = () => {\n  if (history.location.pathname === '/') {\n    history.push(`/${DOWNLOAD}`);\n  } else {\n    history.push(`${history.location.pathname}/${DOWNLOAD}`);\n  }\n};\nconst closeDownloadMode = () => {\n  if (history.location.pathname === `/${DOWNLOAD}`) {\n    history.push('/');\n  } else {\n    const rootPath = history.location.pathname.split(`/${DOWNLOAD}`)[0];\n    history.push(rootPath);\n  }\n};\nexport { getHashUrlParams, getHashUrlParam, defaultHashUrlParams, openDownloadMode, closeDownloadMode };","export const setHeaderbarVisible = show => {\n  // Header provided by the global shell\n  const globalShellHeader = window.top.document.querySelector('.global-shell-header');\n  // Header in the current iframe\n  const iframeHeader = document.querySelector('header');\n  const header = globalShellHeader ? globalShellHeader : iframeHeader;\n  const setHeaderStyle = (ref, value) => {\n    ref.style.display = value;\n  };\n  if (show) {\n    setHeaderStyle(header, 'block');\n  } else {\n    setHeaderStyle(header, 'none');\n  }\n};","// extracted by mini-css-extract-plugin\nexport default {\"downloadModeMenu\":\"DownloadMenubar_downloadModeMenu__qR1ZO\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, IconChevronLeft24, colors } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { closeDownloadMode } from '../../util/history.js';\nimport { setHeaderbarVisible } from '../../util/setHeaderbarVisible.js';\nimport styles from './styles/DownloadMenubar.module.css';\nconst DownloadMenubar = () => {\n  useEffect(() => {\n    setHeaderbarVisible(false);\n    return () => {\n      setHeaderbarVisible(true);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.downloadModeMenu\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: closeDownloadMode\n  }, /*#__PURE__*/React.createElement(IconChevronLeft24, {\n    color: colors.grey700\n  }), i18n.t('Exit download mode')));\n};\nexport default DownloadMenubar;","import * as types from '../constants/actionTypes.js';\nexport const setDownloadConfig = payload => ({\n  type: types.DOWNLOAD_CONFIG_SET,\n  payload\n});","import { Analytics } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport FileSaver from 'file-saver';\nimport { EVENT_LAYER } from '../constants/layers.js';\nimport { hasClasses } from './earthEngine.js';\nimport { getAnalyticsRequest, getEventColumns, loadData } from './event.js';\nexport const getFormatOptions = () => [{\n  id: 'id',\n  name: i18n.t('ID')\n}, {\n  id: 'code',\n  name: i18n.t('Code')\n}, {\n  id: 'name',\n  name: i18n.t('Name')\n}];\n\n// Add readable prop names before downloading EE data\n// Classed data (landcover) will use the class names\n// Other layers will include layer name after aggregation type\nexport const addPropNames = (layer, data) => {\n  const {\n    aggregationType,\n    name,\n    legend\n  } = layer;\n  const layerName = name.replace(/ /g, '_').toLowerCase();\n  const {\n    items\n  } = legend;\n  return hasClasses(aggregationType) ? items.reduce((obj, _ref) => {\n    let {\n      id,\n      name\n    } = _ref;\n    return {\n      ...obj,\n      [name]: data[id]\n    };\n  }, {}) : Object.keys(data).reduce((obj, id) => ({\n    ...obj,\n    [`${id}_${layerName}`]: data[id]\n  }), {});\n};\n\n// Replaces anything that's not a letter, number or space\n// Multiple spaces is replaced by a single space in the last replace\nexport const standardizeFilename = (name, ext) => `${name.replace(/[^a-z0-9 ]/gi, '').replace(/  +/g, ' ')}.${ext}`;\nexport const createGeoJsonBlob = data => {\n  const geojson = {\n    type: 'FeatureCollection',\n    features: data\n  };\n  const blob = new Blob([JSON.stringify(geojson)], {\n    type: 'application/json;charset=utf-8'\n  });\n  return blob;\n};\n\n// Includes values for each period in feature properties\nconst includeValuesByPeriod = _ref2 => {\n  let {\n    data,\n    valuesByPeriod\n  } = _ref2;\n  const periods = Object.keys(valuesByPeriod);\n  return data.map(feature => ({\n    ...feature,\n    properties: {\n      ...feature.properties,\n      ...periods.reduce((values, periodId) => {\n        const periodValue = valuesByPeriod[periodId][feature.id];\n        values[`period_${periodId}`] = periodValue ? Number(periodValue.value) : null;\n        return values;\n      }, {})\n    }\n  }));\n};\nexport const downloadData = async _ref3 => {\n  let {\n    layer,\n    aggregations,\n    format,\n    humanReadableKeys,\n    nameProperty,\n    engine\n  } = _ref3;\n  const {\n    name,\n    layer: layerType\n  } = layer;\n  let layerData = layer.data;\n  if (layerType === EVENT_LAYER) {\n    const columns = await getEventColumns(layer, {\n      format,\n      nameProperty,\n      engine\n    });\n    const config = {\n      ...layer,\n      columns,\n      outputIdScheme: humanReadableKeys ? 'NAME' : 'ID',\n      columnNames: columns.reduce((res, col) => {\n        res[col.dimension] = col.name;\n        return res;\n      }, {})\n    };\n    const analyticsEngine = Analytics.getAnalytics(engine);\n    const result = await loadData({\n      request: await getAnalyticsRequest(config, {\n        nameProperty,\n        engine,\n        analyticsEngine\n      }),\n      config,\n      analyticsEngine\n    });\n    layerData = result.data;\n  } else if (layer.valuesByPeriod) {\n    layerData = includeValuesByPeriod(layer);\n  }\n  const data = aggregations ? layerData.map(d => ({\n    ...d,\n    properties: {\n      ...d.properties,\n      ...addPropNames(layer, aggregations[d.id])\n    }\n  })) : layerData;\n  FileSaver.saveAs(createGeoJsonBlob(data), standardizeFilename(name, 'geojson'));\n  return true;\n};","import FileSaver from 'file-saver';\nimport { toBlob } from 'html-to-image';\nexport const downloadMapImage = (sourceEl, filename) => toBlob(sourceEl).then(blob => FileSaver.saveAs(blob, filename));\nconst toStringFn = {}.toString;\n\n// https://github.com/bubkoo/html-to-image#browsers\n// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/svg/foreignobject.js\n// TODO: Safari is not supported, as it uses a stricter security model on <foreignObject> tag\nexport const downloadSupport = () => {\n  return !!document.createElementNS && /SVGForeignObject/.test(toStringFn.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));\n};","import * as types from '../constants/actionTypes.js';\nexport const newMap = () => ({\n  type: types.MAP_NEW\n});\nexport const setMap = config => ({\n  type: types.MAP_SET,\n  payload: config\n});\nexport const setMapProps = props => ({\n  type: types.MAP_PROPS_SET,\n  payload: props\n});\nexport const openCoordinatePopup = coord => ({\n  type: types.MAP_COORDINATE_OPEN,\n  payload: coord\n});\nexport const closeCoordinatePopup = () => ({\n  type: types.MAP_COORDINATE_CLOSE\n});\nexport const openContextMenu = payload => ({\n  type: types.MAP_CONTEXT_MENU_OPEN,\n  payload\n});\nexport const closeContextMenu = () => ({\n  type: types.MAP_CONTEXT_MENU_CLOSE\n});\nexport const showEarthEngineValue = (layerId, coordinate) => ({\n  type: types.MAP_EARTH_ENGINE_VALUE_SHOW,\n  layerId,\n  coordinate\n});\nexport const clearAlerts = () => ({\n  type: types.MAP_ALERTS_CLEAR\n});","import { isNil, omitBy, pick, isObject, omit } from 'lodash/fp';\nimport { EARTH_ENGINE_LAYER, GEOJSON_URL_LAYER, TRACKED_ENTITY_LAYER } from '../constants/layers.js';\n\n// TODO: get latitude, longitude, zoom from map + basemap: 'none'\nconst validMapProperties = ['basemap', 'id', 'latitude', 'longitude', 'mapViews', 'name', 'description', 'user', 'zoom', 'created', 'lastUpdated', 'subscribers'];\nconst validLayerProperties = ['aggregationType', 'areaRadius', 'band', 'classes', 'colorHigh',\n// Deprecated\n'colorLow',\n// Deprecated\n'colorScale', 'columns', 'config', 'created', 'datasetId', 'displayName', 'endDate', 'eventCoordinateField', 'eventClustering', 'eventPointColor', 'eventPointRadius', 'eventStatus', 'featureStyle',\n// used by GEOJSON_URL_LAYER, stored in layer config\n'filter', 'filters', 'followUp', 'id', 'labels', 'labelFontSize', 'labelFontStyle', 'labelFontWeight', 'labelFontColor', 'labelTemplate', 'lastUpdated', 'layer', 'layerId', 'legendSet', 'method', 'name', 'noDataColor', 'opacity', 'organisationUnitColor', 'organisationUnitGroupSet', 'organisationUnitSelectionMode', 'orgUnitField', 'orgUnitFieldDisplayName', 'style', 'period', 'periodType', 'renderingStrategy', 'program', 'programStage', 'programStatus', 'radiusHigh', 'radiusLow', 'rows', 'serverCluster', 'startDate', 'styleDataItem', 'thematicMapType', 'trackedEntityType', 'valueType', 'relationshipType', 'relatedPointColor', 'relatedPointRadius', 'relationshipLineColor', 'relationshipOutsideProgram'];\nconst models = ['program', 'programStage', 'organisationUnitGroupSet'];\nconst validModelProperties = ['id', 'name', 'path', 'dimensionType', 'dimensionItemType'];\nexport const cleanMapConfig = _ref => {\n  let {\n    config,\n    defaultBasemapId,\n    cleanMapviewConfig = true\n  } = _ref;\n  return {\n    ...omitBy(isNil, pick(validMapProperties, config)),\n    basemap: getBasemapString(config.basemap, defaultBasemapId),\n    mapViews: config.mapViews.map(view => cleanLayerConfig(view, cleanMapviewConfig))\n  };\n};\nconst getBasemapString = (basemap, defaultBasemapId) => {\n  if (!basemap) {\n    return defaultBasemapId;\n  }\n  if (basemap.isVisible === false) {\n    return 'none';\n  }\n  return basemap.id || defaultBasemapId;\n};\nconst cleanLayerConfig = (layer, cleanMapviewConfig) => ({\n  ...models2objects(pick(validLayerProperties, layer), cleanMapviewConfig)\n});\n\n// TODO: This feels hacky, find better way to clean map configs before saving\nconst models2objects = (layer, cleanMapviewConfig) => {\n  const {\n    layer: layerType\n  } = layer;\n  Object.keys(layer).forEach(key => {\n    layer[key] = models.includes(key) ? pick(validModelProperties, layer[key]) : layer[key];\n  });\n  if (layer.rows) {\n    layer.rows = layer.rows.map(cleanDimension);\n  }\n  if (layerType === EARTH_ENGINE_LAYER) {\n    if (cleanMapviewConfig) {\n      const {\n        layerId: id,\n        band,\n        style,\n        aggregationType,\n        period\n      } = layer;\n      const eeConfig = {\n        id,\n        style,\n        band,\n        aggregationType,\n        period\n      };\n\n      // Removes undefined keys before stringify\n      Object.keys(eeConfig).forEach(key => eeConfig[key] === undefined && delete eeConfig[key]);\n      layer.config = JSON.stringify(eeConfig);\n    }\n    delete layer.layerId;\n    delete layer.datasetId;\n    delete layer.style;\n    delete layer.period;\n    delete layer.filter;\n    delete layer.filters;\n    delete layer.periodType;\n    delete layer.aggregationType;\n    delete layer.band;\n  } else if (layerType === TRACKED_ENTITY_LAYER) {\n    if (cleanMapviewConfig) {\n      layer.config = JSON.stringify({\n        relationships: layer.relationshipType ? {\n          type: layer.relationshipType,\n          pointColor: layer.relatedPointColor,\n          pointRadius: layer.relatedPointRadius,\n          lineColor: layer.relationshipLineColor,\n          relationshipOutsideProgram: layer.relationshipOutsideProgram\n        } : null,\n        periodType: layer.periodType\n      });\n    }\n    delete layer.relationshipType;\n    delete layer.relatedPointColor;\n    delete layer.relatedPointRadius;\n    delete layer.relationshipLineColor;\n    delete layer.relationshipOutsideProgram;\n    delete layer.periodType;\n  } else if (layerType === GEOJSON_URL_LAYER) {\n    if (cleanMapviewConfig) {\n      layer.config = {\n        ...layer.config,\n        featureStyle: {\n          ...layer.featureStyle\n        }\n      };\n    }\n    delete layer.featureStyle;\n  }\n  delete layer.id;\n  if (isObject(layer.config)) {\n    layer.config = JSON.stringify(layer.config); // External overlay\n  }\n\n  if (layer.styleDataItem) {\n    // Remove legendSet from styleDataItem as this is stored in a separate property\n    // Remove names as these can be translated and will be fetched on layer load\n    layer.styleDataItem = omit(['legendSet', 'name', 'optionSet.name'], layer.styleDataItem);\n    if (layer.styleDataItem.optionSet) {\n      // Remove name and code from options as these are not persistent\n      layer.styleDataItem.optionSet.options.forEach(option => {\n        delete option.name;\n        delete option.code;\n      });\n    }\n  }\n\n  // Color scale needs to be stored as a string in analytical object\n  if (Array.isArray(layer.colorScale)) {\n    layer.colorScale = layer.colorScale.join(',');\n  }\n  return layer;\n};\nexport const cleanDimension = dim => ({\n  ...dim,\n  items: dim.items.map(item => pick(validModelProperties, item))\n});","import { FileMenu as UiFileMenu, preparePayloadForSave, preparePayloadForSaveAs, VIS_TYPE_MAP } from '@dhis2/analytics';\nimport { useDataMutation, useDataEngine } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setMapProps } from '../../actions/map.js';\nimport { ALERT_CRITICAL, ALERT_WARNING, ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC, ALERT_SUCCESS_DELAY } from '../../constants/alerts.js';\nimport { cleanMapConfig } from '../../util/favorites.js';\nimport { addOrgUnitPaths } from '../../util/helpers.js';\nimport history from '../../util/history.js';\nimport { fetchMap, fetchMapNameDesc, fetchMapSubscribers } from '../../util/requests.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nconst updateMapMutation = {\n  resource: 'maps',\n  type: 'update',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: {\n    skipTranslation: true,\n    skipSharing: true\n  },\n  data: _ref2 => {\n    let {\n      data\n    } = _ref2;\n    return data;\n  }\n};\nconst createMapMutation = {\n  resource: 'maps',\n  type: 'create',\n  data: _ref3 => {\n    let {\n      data\n    } = _ref3;\n    return data;\n  }\n};\nexport const getMapName = name => name || i18n.t('Untitled map, {{date}}', {\n  date: new Date().toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: '2-digit'\n  })\n});\nconst getSavedMessage = name => i18n.t('Map \"{{- name}}\" is saved.', {\n  name\n});\nconst getSaveFailureMessage = message => i18n.t('Failed to save map: {{message}}', {\n  message,\n  nsSeparator: ';'\n});\nconst FileMenu = _ref4 => {\n  let {\n    onFileMenuAction\n  } = _ref4;\n  const map = useSelector(state => state.map);\n  const dispatch = useDispatch();\n  const engine = useDataEngine();\n  const {\n    systemSettings,\n    currentUser\n  } = useCachedData();\n  const defaultBasemap = systemSettings.keyDefaultBaseMap;\n  //alerts\n  const saveAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC);\n  const renameFailedAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_WARNING);\n  const renameSuccessAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_SUCCESS_DELAY);\n  const saveAsAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC);\n  const deleteAlert = useAlert('Map successfully deleted', ALERT_SUCCESS_DELAY);\n  const fileMenuErrorAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const [putMap] = useDataMutation(updateMapMutation, {\n    onError: e => {\n      saveAlert.show({\n        msg: getSaveFailureMessage(e.message),\n        isError: true\n      });\n    }\n  });\n  const [renameMap] = useDataMutation(updateMapMutation, {\n    onError: () => {\n      renameFailedAlert.show({\n        msg: i18n.t('Rename failed'),\n        isError: true\n      });\n    }\n  });\n  const [postMap] = useDataMutation(createMapMutation, {\n    onError: e => {\n      saveAsAlert.show({\n        msg: getSaveFailureMessage(e.message),\n        isError: true\n      });\n    }\n  });\n  const onSave = async _ref5 => {\n    let {\n      name,\n      description\n    } = _ref5;\n    const {\n      subscribers\n    } = await fetchMapSubscribers({\n      id: map.id,\n      engine\n    });\n    const cleanedMap = cleanMapConfig({\n      config: map,\n      defaultBasemapId: defaultBasemap\n    });\n    const config = preparePayloadForSave({\n      visualization: {\n        ...cleanedMap,\n        subscribers,\n        type: VIS_TYPE_MAP\n      },\n      name,\n      description\n    });\n    await putMap({\n      id: map.id,\n      data: config\n    });\n    saveAlert.show({\n      msg: getSavedMessage(map.name)\n    });\n    if (map.id) {\n      history.replace(`/${map.id}`);\n    }\n  };\n  const onRename = async _ref6 => {\n    let {\n      name,\n      description\n    } = _ref6;\n    // fetch the original Map\n    const fetchedMap = await fetchMap({\n      id: map.id,\n      engine,\n      defaultBasemap,\n      withSubscribers: true\n    });\n    const latestMap = {\n      ...fetchedMap,\n      mapViews: addOrgUnitPaths(fetchedMap.mapViews)\n    };\n    const cleanedMap = cleanMapConfig({\n      config: latestMap,\n      defaultBasemapId: defaultBasemap,\n      cleanMapviewConfig: false\n    });\n    const config = preparePayloadForSave({\n      visualization: {\n        ...cleanedMap,\n        type: VIS_TYPE_MAP\n      },\n      name,\n      description\n    });\n    await renameMap({\n      id: map.id,\n      data: config\n    });\n    const {\n      map: updatedMapNameDesc\n    } = await fetchMapNameDesc({\n      id: map.id,\n      engine\n    });\n    dispatch(setMapProps(updatedMapNameDesc));\n    renameSuccessAlert.show({\n      msg: i18n.t('Rename successful')\n    });\n    onFileMenuAction();\n  };\n  const onSaveAs = async _ref7 => {\n    let {\n      name,\n      description\n    } = _ref7;\n    const cleanedMap = cleanMapConfig({\n      config: map,\n      defaultBasemapId: defaultBasemap\n    });\n    const config = preparePayloadForSaveAs({\n      visualization: {\n        ...cleanedMap,\n        type: VIS_TYPE_MAP\n      },\n      name,\n      description\n    });\n    const res = await postMap({\n      data: config\n    });\n    if (res.status === 'OK') {\n      saveAsAlert.show({\n        msg: getSavedMessage(getMapName(name))\n      });\n      if (res.response.uid) {\n        history.push(`/${res.response.uid}`);\n      }\n    }\n  };\n  const onDelete = () => {\n    onNew();\n    deleteAlert.show();\n  };\n  const onNew = () => {\n    if (history.location.pathname === '/') {\n      history.replace('/');\n    } else {\n      history.push('/');\n    }\n  };\n  const onOpen = async id => {\n    const path = `/${id}`;\n    if (history.location.pathname === path) {\n      history.replace(path);\n    } else {\n      history.push(path);\n    }\n  };\n  const onFileMenuError = e => fileMenuErrorAlert.show({\n    msg: e.message\n  });\n  return /*#__PURE__*/React.createElement(UiFileMenu, {\n    currentUser: currentUser,\n    fileType: \"map\",\n    fileObject: map,\n    onNew: onNew,\n    onOpen: onOpen,\n    onSave: onSave,\n    onSaveAs: onSaveAs,\n    onRename: onRename,\n    onDelete: onDelete,\n    onError: onFileMenuError,\n    onShare: onFileMenuAction,\n    onTranslate: onFileMenuAction\n  });\n};\nFileMenu.propTypes = {\n  onFileMenuAction: PropTypes.func.isRequired\n};\nexport default FileMenu;","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"Drawer_drawer__mdCkz\",\"left\":\"Drawer_left__Bb8Nw\",\"right\":\"Drawer_right__d7R2p\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Drawer.module.css';\nconst Drawer = _ref => {\n  let {\n    position = 'right',\n    className,\n    children,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(className, styles.drawer, {\n      [styles.left]: position === 'left',\n      [styles.right]: position === 'right'\n    }),\n    \"data-test\": dataTest\n  }, children);\n};\nDrawer.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  position: PropTypes.string\n};\nexport default Drawer;","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"Checkbox_checkbox__7HlL+\"};","import { Checkbox as UiCheckbox, Tooltip, IconInfo16 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Checkbox.module.css';\n\n// Wrapper around @dhis2/ui checkbox for unified handling and styling\nconst Checkbox = _ref => {\n  let {\n    label,\n    checked = false,\n    disabled,\n    dense = true,\n    tooltip,\n    onChange,\n    className,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.checkbox, className),\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(UiCheckbox, {\n    label: label,\n    checked: checked,\n    dense: dense,\n    disabled: disabled,\n    onChange: _ref2 => {\n      let {\n        checked\n      } = _ref2;\n      return onChange(checked);\n    }\n  }), tooltip && /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltip\n  }, /*#__PURE__*/React.createElement(IconInfo16, null)));\n};\nCheckbox.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  checked: PropTypes.bool,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  label: PropTypes.string,\n  tooltip: PropTypes.string\n};\nexport default Checkbox;","// extracted by mini-css-extract-plugin\nexport default {\"colorButton\":\"ColorButton_colorButton__-dp85\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ColorButton.module.css';\nconst ColorButton = _ref => {\n  let {\n    color,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"label\", {\n    className: cx(styles.colorButton, className),\n    style: {\n      backgroundImage: `radial-gradient(\n                        circle, ${color} 35%, transparent 40%\n                    )`\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"color\",\n    value: color,\n    onChange: e => onChange(e.target.value.toUpperCase())\n  }));\n};\nColorButton.propTypes = {\n  color: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string\n};\nexport default ColorButton;","// extracted by mini-css-extract-plugin\nexport default {\"colorPicker\":\"ColorPicker_colorPicker__C84HM\",\"label\":\"ColorPicker_label__VNgc2\",\"icon\":\"ColorPicker_icon__mL6n4\",\"dark\":\"ColorPicker_dark__09ZgO\"};","import { IconChevronDown24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { isDarkColor } from '../../util/colors.js';\nimport styles from './styles/ColorPicker.module.css';\nconst ColorPicker = _ref => {\n  let {\n    color,\n    label,\n    width,\n    height,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.colorPicker, className)\n  }, label && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, label), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      backgroundColor: color,\n      width: width || '100%',\n      height: height || 32\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.icon, {\n      [styles.dark]: !isDarkColor(color)\n    })\n  }, /*#__PURE__*/React.createElement(IconChevronDown24, null)), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"color\",\n    value: color,\n    onChange: e => onChange(e.target.value.toUpperCase())\n  }))));\n};\nColorPicker.propTypes = {\n  color: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  label: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default ColorPicker;","// extracted by mini-css-extract-plugin\nexport default {\"colorScale\":\"ColorScale_colorScale__pimdd\",\"item\":\"ColorScale_item__zK7Rn\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport colorbrewer from '../../constants/colorbrewer.js';\nimport styles from './styles/ColorScale.module.css';\n\n// Returns one color scale based on a code and number of classes\nconst ColorScale = _ref => {\n  let {\n    scale,\n    bins,\n    width,\n    onClick\n  } = _ref;\n  const colors = colorbrewer[scale][bins];\n  const itemWidth = width ? width / bins : 36;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    onClick: () => onClick(scale),\n    className: styles.colorScale,\n    style: {\n      ...(width && {\n        width\n      })\n    }\n  }, colors.map((color, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: styles.item,\n    style: {\n      backgroundColor: color,\n      width: itemWidth\n    }\n  })));\n};\nColorScale.propTypes = {\n  bins: PropTypes.number.isRequired,\n  scale: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  width: PropTypes.number\n};\nexport default ColorScale;","// extracted by mini-css-extract-plugin\nexport default {\"colorScale\":\"ColorScaleSelect_colorScale__VHsxt\",\"popover\":\"ColorScaleSelect_popover__i1BE6\"};","import { Popover } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useState, useRef } from 'react';\nimport { colorScales, getColorScale, getColorPalette } from '../../util/colors.js';\nimport ColorScale from './ColorScale.js';\nimport styles from './styles/ColorScaleSelect.module.css';\nconst ColorScaleSelect = _ref => {\n  let {\n    palette,\n    width,\n    onChange,\n    className\n  } = _ref;\n  const [isOpen, setIsOpen] = useState(false);\n  const anchorRef = useRef();\n  const bins = palette.length;\n  const scale = getColorScale(palette);\n  const onColorScaleSelect = scale => {\n    onChange(getColorPalette(scale, bins));\n    setIsOpen(false);\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: cx(styles.colorScale, className)\n  }, /*#__PURE__*/React.createElement(ColorScale, {\n    bins: bins,\n    scale: scale,\n    onClick: () => setIsOpen(true),\n    width: width || 260\n  })), isOpen && /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.popover,\n    style: {\n      width: width + 24 || 260\n    }\n  }, colorScales.map((scale, index) => /*#__PURE__*/React.createElement(ColorScale, {\n    key: index,\n    scale: scale,\n    bins: bins,\n    onClick: onColorScaleSelect,\n    width: width || 260\n  })))));\n};\nColorScaleSelect.propTypes = {\n  palette: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  width: PropTypes.number\n};\nexport default ColorScaleSelect;","import PropTypes from 'prop-types';\nconst ConditionalWrapper = _ref => {\n  let {\n    condition,\n    wrapper,\n    children\n  } = _ref;\n  return condition ? wrapper(children) : children;\n};\nConditionalWrapper.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  condition: PropTypes.bool.isRequired,\n  wrapper: PropTypes.elementType.isRequired\n};\nexport default ConditionalWrapper;","// extracted by mini-css-extract-plugin\nexport default {\"customRadioLabel\":\"CustomRadioLabel_customRadioLabel__ppURb\",\"labelsWrap\":\"CustomRadioLabel_labelsWrap__UdOUC\",\"icon\":\"CustomRadioLabel_icon__Wtp1t\",\"iconChecked\":\"CustomRadioLabel_iconChecked__-HbeD\",\"border\":\"CustomRadioLabel_border__F8nvJ\",\"disabled\":\"CustomRadioLabel_disabled__p8yrj\",\"label\":\"CustomRadioLabel_label__cfM5Z\",\"sublabel\":\"CustomRadioLabel_sublabel__xGhRy\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/CustomRadioLabel.module.css';\nconst CustomRadioLabel = _ref => {\n  let {\n    icon,\n    label,\n    sublabel,\n    checked,\n    disabled\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.customRadioLabel, {\n      [styles.disabled]: disabled\n    })\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.icon, {\n      [styles.iconChecked]: checked\n    })\n  }, icon), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.labelsWrap\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, label), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sublabel\n  }, sublabel)));\n};\nCustomRadioLabel.propTypes = {\n  checked: PropTypes.bool.isRequired,\n  icon: PropTypes.node.isRequired,\n  label: PropTypes.string.isRequired,\n  sublabel: PropTypes.string.isRequired,\n  disabled: PropTypes.bool\n};\nexport default CustomRadioLabel;","// extracted by mini-css-extract-plugin\nexport default {\"datePicker\":\"DatePicker_datePicker__QumBO\",\"label\":\"DatePicker_label__+Ajvr\",\"content\":\"DatePicker_content__psb1W\",\"box\":\"DatePicker_box__BB-cV\",\"inputDiv\":\"DatePicker_inputDiv__zcYR+\",\"input\":\"DatePicker_input__LTL60\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useEffect } from 'react';\nimport styles from './styles/DatePicker.module.css';\n\n// Fallback on browser native until full DatePicker support in @dhis2/ui\nconst DatePicker = _ref => {\n  let {\n    label,\n    name,\n    defaultVal,\n    onBlur,\n    className\n  } = _ref;\n  const inputEl = useRef(null);\n  useEffect(() => {\n    if (inputEl.current && defaultVal) {\n      inputEl.current.defaultValue = defaultVal.slice(0, 10);\n    }\n  }, [defaultVal]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.datePicker, className)\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: styles.label\n  }, label), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.box\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputDiv\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: styles.input,\n    ref: inputEl,\n    type: \"date\",\n    name: name,\n    onBlur: e => onBlur(e.target.value)\n  })))));\n};\nDatePicker.propTypes = {\n  label: PropTypes.string.isRequired,\n  onBlur: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  defaultVal: PropTypes.string,\n  name: PropTypes.string\n};\nexport default DatePicker;","// extracted by mini-css-extract-plugin\nexport default {\"inputField\":\"InputField_inputField__wKerC\"};","import { InputField } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/InputField.module.css';\nconst NumberField = _ref => {\n  let {\n    label,\n    value,\n    min,\n    max,\n    step = 1,\n    dense = true,\n    disabled,\n    helpText,\n    inputWidth,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(InputField, {\n    dense: dense,\n    type: \"number\",\n    min: String(min),\n    max: String(max),\n    step: String(step),\n    label: label,\n    value: Number.isNaN(value) ? '' : String(value),\n    disabled: disabled,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onChange(Number(value));\n    },\n    helpText: helpText,\n    inputWidth: inputWidth\n  }));\n};\nNumberField.propTypes = {\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  inputWidth: PropTypes.string,\n  max: PropTypes.number,\n  min: PropTypes.number,\n  step: PropTypes.number,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nexport default NumberField;","// extracted by mini-css-extract-plugin\nexport default {\"fontStyle\":\"FontStyle_fontStyle__3-gC4\",\"textSize\":\"FontStyle_textSize__1uiRc\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, IconTextBold24, IconTextItalic24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { LABEL_FONT_SIZE, LABEL_FONT_SIZE_MIN, LABEL_FONT_SIZE_MAX, LABEL_FONT_COLOR } from '../../constants/layers.js';\nimport { cssColor } from '../../util/colors.js';\nimport ColorButton from './ColorButton.js';\nimport NumberField from './NumberField.js';\nimport styles from './styles/FontStyle.module.css';\nconst FontStyle = _ref => {\n  let {\n    color,\n    size,\n    weight,\n    fontStyle,\n    onColorChange,\n    onSizeChange,\n    onWeightChange,\n    onStyleChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.fontStyle, className)\n  }, onSizeChange && /*#__PURE__*/React.createElement(NumberField, {\n    dense: true,\n    label: i18n.t('Size'),\n    min: LABEL_FONT_SIZE_MIN,\n    max: LABEL_FONT_SIZE_MAX,\n    value: parseInt(size !== undefined ? size : LABEL_FONT_SIZE, 10),\n    onChange: value => onSizeChange(value + 'px'),\n    className: styles.textSize\n  }), onColorChange && /*#__PURE__*/React.createElement(ColorButton, {\n    color: cssColor(color) || LABEL_FONT_COLOR,\n    onChange: onColorChange,\n    button: true\n  }), onWeightChange && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(IconTextBold24, null),\n    onClick: () => {\n      onWeightChange(weight === 'bold' ? 'normal' : 'bold');\n    },\n    secondary: true,\n    toggled: weight === 'bold'\n  }), onStyleChange && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(IconTextItalic24, null),\n    onClick: () => {\n      onStyleChange(fontStyle === 'italic' ? 'normal' : 'italic');\n    },\n    secondary: true,\n    toggled: fontStyle === 'italic'\n  }));\n};\nFontStyle.propTypes = {\n  className: PropTypes.string,\n  color: PropTypes.string,\n  fontStyle: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  weight: PropTypes.string,\n  onColorChange: PropTypes.func,\n  onSizeChange: PropTypes.func,\n  onStyleChange: PropTypes.func,\n  onWeightChange: PropTypes.func\n};\nexport default FontStyle;","// extracted by mini-css-extract-plugin\nexport default {\"help\":\"Help_help__NuORs\",\"content\":\"Help_content__tANr9\"};","import { IconInfo16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Help.module.css';\n\n// Adds info icon next to help content\nconst HelpWithIcon = _ref => {\n  let {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.help\n  }, /*#__PURE__*/React.createElement(IconInfo16, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, children));\n};\nHelpWithIcon.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default HelpWithIcon;","// extracted by mini-css-extract-plugin\nexport default {\"iconButton\":\"IconButton_iconButton__2JNZa\",\"disabled\":\"IconButton_disabled__JuD0G\"};","import { Tooltip } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/IconButton.module.css';\nconst IconButton = _ref => {\n  let {\n    tooltip,\n    onClick,\n    className,\n    children,\n    dataTest,\n    disabled,\n    ariaLabel\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onClick,\n    className: cx(styles.iconButton, className, {\n      [styles.disabled]: !!disabled\n    }),\n    \"data-test\": dataTest,\n    disabled: disabled,\n    \"aria-label\": ariaLabel\n  }, tooltip ? /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltip\n  }, children) : children);\n};\nIconButton.propTypes = {\n  ariaLabel: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  tooltip: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default IconButton;","// extracted by mini-css-extract-plugin\nexport default {\"imageSelect\":\"ImageSelect_imageSelect__wmj1K\",\"title\":\"ImageSelect_title__QUmHA\",\"imageContainer\":\"ImageSelect_imageContainer__7YHVp\",\"imageContainerSelected\":\"ImageSelect_imageContainerSelected__hGrAW\",\"image\":\"ImageSelect_image__j5GA1\",\"noImage\":\"ImageSelect_noImage__ZJ8Qm\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ImageSelect.module.css';\nconst ImageSelect = _ref => {\n  let {\n    id,\n    img,\n    title,\n    isSelected,\n    onClick,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageSelect, className),\n    title: title,\n    onClick: () => onClick(id)\n  }, title ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title\n  }, title) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageContainer, {\n      [styles.imageContainerSelected]: isSelected\n    })\n  }, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  })));\n};\nImageSelect.propTypes = {\n  id: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  img: PropTypes.string,\n  isSelected: PropTypes.bool,\n  title: PropTypes.string\n};\nexport default ImageSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { LABEL_TEMPLATE_NAME_ONLY, LABEL_TEMPLATE_NAME_AND_VALUE, LABEL_TEMPLATE_VALUE_ONLY } from '../../constants/layers.js';\nimport { SelectField } from '.';\nconst getLabelDisplayOptions = () => [{\n  id: LABEL_TEMPLATE_NAME_ONLY,\n  name: i18n.t('Name')\n}, {\n  id: LABEL_TEMPLATE_NAME_AND_VALUE,\n  name: i18n.t('Name and value')\n}, {\n  id: LABEL_TEMPLATE_VALUE_ONLY,\n  name: i18n.t('Value')\n}];\nconst LabelDisplayOptions = _ref => {\n  let {\n    option,\n    onDisplayOptionChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Display'),\n    loading: false,\n    items: getLabelDisplayOptions(),\n    value: option || null,\n    onChange: _ref2 => {\n      let {\n        id\n      } = _ref2;\n      return onDisplayOptionChange(id);\n    }\n  });\n};\nLabelDisplayOptions.propTypes = {\n  onDisplayOptionChange: PropTypes.func.isRequired,\n  option: PropTypes.string\n};\nexport default LabelDisplayOptions;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/MenuButton.module.css';\n\n/* Copied from https://github.com/dhis2/data-visualizer-app/blob/master/packages/app/src/components/MenuButton/MenuButton.js */\nconst MenuButton = _ref => {\n  let {\n    children,\n    dataTest,\n    disabled,\n    name,\n    onBlur,\n    onClick,\n    onFocus\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.menuButton,\n    \"data-test\": dataTest,\n    disabled: disabled,\n    name: name,\n    onBlur: onBlur,\n    onClick: onClick,\n    onFocus: onFocus\n  }, children);\n};\nMenuButton.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default MenuButton;","// extracted by mini-css-extract-plugin\nexport default {\"radioGroup\":\"RadioGroup_radioGroup__B8D+1\",\"row\":\"RadioGroup_row__D+3T7\",\"label\":\"RadioGroup_label__7qyHB\",\"boldLabel\":\"RadioGroup_boldLabel__H+wj6\"};","import { FieldGroup } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport styles from './styles/RadioGroup.module.css';\nexport const RadioContext = /*#__PURE__*/React.createContext();\nconst RadioGroup = _ref => {\n  let {\n    value,\n    label,\n    helpText,\n    display = 'column',\n    onChange,\n    boldLabel = false,\n    children,\n    dataTest\n  } = _ref;\n  const [radio, setRadio] = useState(value);\n  useEffect(() => {\n    setRadio(value);\n  }, [value]);\n  return /*#__PURE__*/React.createElement(RadioContext.Provider, {\n    value: {\n      radio,\n      onChange\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.radioGroup, {\n      [styles.row]: display === 'row'\n    }),\n    \"data-test\": \"radio-group\"\n  }, label && /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.label, {\n      [styles.boldLabel]: boldLabel\n    })\n  }, label), /*#__PURE__*/React.createElement(FieldGroup, {\n    helpText: helpText,\n    dataTest: dataTest\n  }, children)));\n};\nRadioGroup.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  boldLabel: PropTypes.bool,\n  children: PropTypes.arrayOf(PropTypes.node),\n  dataTest: PropTypes.string,\n  display: PropTypes.oneOf(['row', 'column']),\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default RadioGroup;","// extracted by mini-css-extract-plugin\nexport default {\"disabled\":\"Radio_disabled__zhLqQ\"};","import { Radio as UiRadio } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useContext } from 'react';\nimport { RadioContext } from './RadioGroup.js';\nimport styles from './styles/Radio.module.css';\nconst Radio = _ref => {\n  let {\n    value,\n    disabled,\n    dense = true,\n    dataTest,\n    label\n  } = _ref;\n  const {\n    radio,\n    onChange\n  } = useContext(RadioContext);\n\n  // onChange is from the parent component\n  const onClick = () => {\n    if (value !== radio) {\n      onChange(value);\n    }\n  };\n  return /*#__PURE__*/React.createElement(UiRadio, {\n    className: cx({\n      [styles.disabled]: disabled\n    }),\n    label: label,\n    dense: dense,\n    disabled: disabled,\n    checked: value === radio,\n    onChange: onClick,\n    dataTest: dataTest,\n    value: value\n  });\n};\nRadio.propTypes = {\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.node]).isRequired,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default Radio;","import { SingleSelectField, SingleSelectOption, MultiSelectField, MultiSelectOption } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport styles from './styles/InputField.module.css';\n\n/**\n * Wrapper component around @dhis2/ui SingleSelectField and MultiSelectField\n * Allows options to be created from an array of models (containing id and name properties)\n * id can be numbers, although @dhis2/ui requires option values to be strings.\n */\nconst SelectField = props => {\n  const {\n    dense = true,\n    emptyText,\n    errorText,\n    helpText,\n    warning,\n    items,\n    label,\n    prefix,\n    loading,\n    multiple,\n    filterable,\n    disabled,\n    onChange,\n    className,\n    value,\n    dataTest\n  } = props;\n  const isLoading = loading === true;\n  const Select = multiple ? MultiSelectField : SingleSelectField;\n  const Option = multiple ? MultiSelectOption : SingleSelectOption;\n  let selected;\n  if (multiple) {\n    selected = Array.isArray(value) ? value.map(v => String(v)) : [];\n  } else {\n    selected = value !== undefined && value !== null ? String(value) : '';\n  }\n\n  // Returns selected items in the original format\n  const onSelectChange = useCallback(_ref => {\n    let {\n      selected\n    } = _ref;\n    return onChange(multiple ? items.filter(item => selected.includes(String(item.id))).map(item => item.id) : items.find(item => String(item.id) === selected));\n  }, [items, multiple, onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className),\n    \"data-test\": \"select-field-container\"\n  }, /*#__PURE__*/React.createElement(Select, {\n    dense: dense,\n    label: label,\n    prefix: prefix,\n    selected: !isLoading ? selected : undefined,\n    filterable: filterable,\n    disabled: disabled,\n    loading: isLoading,\n    error: !!errorText,\n    warning: !!warning,\n    validationText: warning ? warning : errorText,\n    helpText: helpText,\n    empty: emptyText,\n    onChange: onSelectChange,\n    dataTest: dataTest\n  }, items && items.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Option, {\n      key: id,\n      value: String(id),\n      label: name\n    });\n  })));\n};\nSelectField.propTypes = {\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  emptyText: PropTypes.string,\n  // If set, shows empty text when no options\n  errorText: PropTypes.string,\n  // If set, shows the error message below the SelectField\n  filterable: PropTypes.bool,\n  helpText: PropTypes.string,\n  // If set, shows the help text below the SelectField\n  items: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    name: PropTypes.string\n  })),\n  label: PropTypes.string,\n  // If true, spinner will be shown in the select menu. If string, the text will be shown\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  // If true, then use multiple selection. Adds a checkbox to each menu item.\n  multiple: PropTypes.bool,\n  prefix: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number]))]),\n  warning: PropTypes.string,\n  // If set, shows the warning message below the SelectField\n  onChange: PropTypes.func\n};\nexport default SelectField;","import { TabBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nexport const TabContext = /*#__PURE__*/React.createContext();\nconst Tabs = _ref => {\n  let {\n    value,\n    onChange,\n    children\n  } = _ref;\n  const [tab, setTab] = useState(value);\n  useEffect(() => {\n    if (value !== tab) {\n      setTab(value);\n    }\n  }, [value, tab]);\n  return /*#__PURE__*/React.createElement(TabContext.Provider, {\n    value: {\n      tab,\n      onChange\n    }\n  }, /*#__PURE__*/React.createElement(TabBar, null, children));\n};\nTabs.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default Tabs;","import { Tab as UiTab } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useContext } from 'react';\nimport { TabContext } from './Tabs.js';\nconst Tab = _ref => {\n  let {\n    value,\n    dataTest,\n    children\n  } = _ref;\n  const {\n    tab,\n    onChange\n  } = useContext(TabContext);\n\n  // onChange is from the parent component\n  const onClick = () => {\n    if (value !== tab) {\n      onChange(value);\n    }\n  };\n  return /*#__PURE__*/React.createElement(UiTab, {\n    selected: value === tab,\n    onClick: onClick,\n    dataTest: dataTest\n  }, children);\n};\nTab.propTypes = {\n  children: PropTypes.node.isRequired,\n  value: PropTypes.string.isRequired,\n  dataTest: PropTypes.string\n};\nexport default Tab;","import { InputField } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/InputField.module.css';\n\n// Wrapper component around @dhis2/ui InputField\nconst TextField = _ref => {\n  let {\n    type,\n    label,\n    value,\n    dense = true,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(InputField, {\n    dense: dense,\n    type: type,\n    label: label,\n    value: value,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onChange(value);\n    }\n  }));\n};\nTextField.propTypes = {\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dense: PropTypes.bool,\n  type: PropTypes.string,\n  value: PropTypes.string\n};\nexport default TextField;","import { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nexport const loadingMaskClass = 'dhis2-map-loading-mask';\nconst MapLoadingMask = () => /*#__PURE__*/React.createElement(ComponentCover, {\n  className: loadingMaskClass,\n  dataTest: \"map-loading-mask\"\n}, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\nexport default MapLoadingMask;","// extracted by mini-css-extract-plugin\nexport default {\"legendLayers\":\"LegendLayers_legendLayers__3eibN\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setDownloadConfig } from '../../actions/download.js';\nimport { Checkbox } from '../core/index.js';\nimport styles from './styles/LegendLayers.module.css';\nconst LegendLayers = _ref => {\n  let {\n    layers,\n    show\n  } = _ref;\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendLayers\n  }, layers.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Checkbox, {\n      key: id,\n      label: name,\n      checked: show.includes(id),\n      onChange: checked => dispatch(setDownloadConfig({\n        showInLegend: checked ? [...show, id] : show.filter(l => l !== id)\n      }))\n    });\n  }).reverse());\n};\nLegendLayers.propTypes = {\n  layers: PropTypes.array.isRequired,\n  show: PropTypes.PropTypes.array\n};\nexport default LegendLayers;","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NorthArrowPosition_root__Z282w\",\"label\":\"NorthArrowPosition_label__Mt7Rc\",\"position\":\"NorthArrowPosition_position__nC8ll\",\"legend\":\"NorthArrowPosition_legend__iORB7\",\"selected\":\"NorthArrowPosition_selected__ZpCSm\",\"topleft\":\"NorthArrowPosition_topleft__jNTVd\",\"topright\":\"NorthArrowPosition_topright__VvryL\",\"bottomleft\":\"NorthArrowPosition_bottomleft__nvWp1\",\"bottomright\":\"NorthArrowPosition_bottomright__nV8UR\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/NorthArrowPosition.module.css';\nconst northArrowPositions = ['topleft', 'topright', 'bottomleft', 'bottomright'];\nconst NorthArrowPosition = _ref => {\n  let {\n    position,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.root\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: styles.label\n  }, i18n.t('Position:')), northArrowPositions.map(pos => /*#__PURE__*/React.createElement(\"div\", {\n    key: pos,\n    className: cx(styles.position, {\n      [styles.selected]: pos === position\n    }),\n    onClick: pos !== position ? () => onChange(pos) : null\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.legend, styles[pos])\n  }))));\n};\nNorthArrowPosition.propTypes = {\n  position: PropTypes.oneOf(northArrowPositions).isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default NorthArrowPosition;","// extracted by mini-css-extract-plugin\nexport default {\"downloadSettingsPanel\":\"DownloadSettings_downloadSettingsPanel__OBWWy\",\"downloadSettings\":\"DownloadSettings_downloadSettings__W0r45\",\"content\":\"DownloadSettings_content__8RUsT\",\"checkbox\":\"DownloadSettings_checkbox__jxcod\",\"buttons\":\"DownloadSettings_buttons__QS5l3\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip } from '@dhis2/ui';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setDownloadConfig } from '../../actions/download.js';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nimport { standardizeFilename } from '../../util/dataDownload.js';\nimport { downloadMapImage, downloadSupport } from '../../util/export-image.js';\nimport { getSplitViewLayer } from '../../util/helpers.js';\nimport { closeDownloadMode, getHashUrlParam } from '../../util/history.js';\nimport { getMapName } from '../app/FileMenu.js';\nimport Drawer from '../core/Drawer.js';\nimport { Checkbox, Help } from '../core/index.js';\nimport { loadingMaskClass } from '../map/MapLoadingMask.js';\nimport LegendLayers from './LegendLayers.js';\nimport NorthArrowPosition from './NorthArrowPosition.js';\nimport styles from './styles/DownloadSettings.module.css';\nconst mapContainerId = 'dhis2-map-container';\nconst mapClass = 'dhis2-map';\nconst renderedClass = 'dhis2-map-rendered';\nconst downloadingClass = 'dhis2-map-downloading';\nconst DownloadSettings = () => {\n  const isPushAnalytics = getHashUrlParam('isPushAnalytics');\n  const [isRendered, setIsRendered] = useState(false);\n  const [error, setError] = useState(null);\n  const dispatch = useDispatch();\n  const {\n    mapViews,\n    displayName: name,\n    displayDescription: description\n  } = useSelector(state => state.map);\n  const {\n    showName,\n    showDescription,\n    showLegend,\n    showInLegend,\n    showOverviewMap,\n    hasOverviewMapSpace,\n    showNorthArrow,\n    northArrowPosition,\n    includeMargins\n  } = useSelector(state => state.download);\n  const legendLayers = useMemo(() => mapViews.filter(layer => layer.legend && layer.isVisible), [mapViews]);\n  const onDownload = useCallback(() => {\n    const filename = standardizeFilename(getMapName(name), 'png');\n    let mapEl = document.getElementById(mapContainerId);\n    if (includeMargins) {\n      mapEl = mapEl.parentNode;\n    }\n\n    // Temporary added to remove close 'x' from map popups\n    mapEl.classList.add(downloadingClass);\n    downloadMapImage(mapEl, filename).then(() => mapEl.classList.remove(downloadingClass)).catch(setError);\n  }, [name, includeMargins]);\n  const hasLayers = mapViews.length > 0;\n  useEffect(() => {\n    // Set default values\n    dispatch(setDownloadConfig({\n      showName: !!name,\n      showDescription: !!description,\n      showLegend: !!legendLayers.length,\n      showInLegend: legendLayers.map(l => l.id),\n      showOverviewMap: hasLayers\n    }));\n  }, [name, description, legendLayers, hasLayers, dispatch]);\n  useEffect(() => {\n    if (isPushAnalytics) {\n      // Multiple map elements if split view\n      const mapElements = document.getElementsByClassName(mapClass);\n\n      // Observe is rendered class is added to map element\n      const observer = new MutationObserver(mutations => {\n        mutations.forEach(mutation => {\n          if (mutation.attributeName == 'class') {\n            setIsRendered(!document.querySelector(`.${loadingMaskClass}`) && mutation.target.classList.contains(renderedClass));\n          }\n        });\n      });\n      for (const mapEl of mapElements) {\n        mapEl.classList.remove(renderedClass);\n        observer.observe(mapEl, {\n          attributes: true\n        });\n      }\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [isPushAnalytics]);\n  useKeyDown('Escape', closeDownloadMode);\n  const isSupported = downloadSupport() && !error;\n  const isSplitView = !!getSplitViewLayer(mapViews);\n  const showMarginsCheckbox = false; // Not in use\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.downloadSettingsPanel,\n    \"data-test\": \"download-settings\"\n  }, /*#__PURE__*/React.createElement(Drawer, {\n    position: \"left\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.downloadSettings\n  }, /*#__PURE__*/React.createElement(\"h2\", null, i18n.t('Download map')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dialogContent\n  }, isSupported ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show map name'),\n    dataTest: \"input-show-map-name\",\n    checked: showName,\n    disabled: !name,\n    onChange: value => dispatch(setDownloadConfig({\n      showName: value\n    }))\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show map description'),\n    checked: showDescription,\n    disabled: !description,\n    onChange: value => dispatch(setDownloadConfig({\n      showDescription: value\n    })),\n    tooltip: description ? i18n.t('Description can be changed from File > Rename menu') : i18n.t('Set the map description when you save the map or from File > Rename menu')\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show legend'),\n    checked: showLegend,\n    disabled: !legendLayers.length,\n    onChange: value => dispatch(setDownloadConfig({\n      showLegend: value\n    }))\n  }), showLegend && legendLayers.length > 1 && /*#__PURE__*/React.createElement(LegendLayers, {\n    layers: legendLayers,\n    show: showInLegend\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show overview map'),\n    checked: showOverviewMap,\n    disabled: !hasOverviewMapSpace,\n    onChange: value => dispatch(setDownloadConfig({\n      showOverviewMap: value\n    }))\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show north arrow'),\n    checked: showNorthArrow,\n    disabled: isSplitView,\n    onChange: value => dispatch(setDownloadConfig({\n      showNorthArrow: value\n    }))\n  }), showNorthArrow && !isSplitView && /*#__PURE__*/React.createElement(NorthArrowPosition, {\n    position: northArrowPosition,\n    onChange: value => dispatch(setDownloadConfig({\n      northArrowPosition: value\n    }))\n  }), showMarginsCheckbox && /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Include margins in download'),\n    checked: includeMargins,\n    onChange: value => dispatch(setDownloadConfig({\n      includeMargins: value\n    }))\n  }), /*#__PURE__*/React.createElement(Help, null, i18n.t('Resize your browser window to change the map dimensions.'))) : i18n.t('Map download is not supported by your browser. Try Google Chrome or Firefox.')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttons\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: closeDownloadMode\n  }, isSupported ? i18n.t('Cancel') : i18n.t('Close')), isSupported && /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: isPushAnalytics && !isRendered,\n    onClick: onDownload,\n    className: \"push-analytics-download-button\"\n  }, i18n.t('Download')))))));\n};\nexport default DownloadSettings;","import * as types from '../constants/actionTypes.js';\nexport const openLayersPanel = () => ({\n  type: types.LAYERS_PANEL_OPEN\n});\nexport const closeLayersPanel = () => ({\n  type: types.LAYERS_PANEL_CLOSE\n});\nexport const openInterpretationsPanel = () => ({\n  type: types.INTERPRETATIONS_PANEL_OPEN\n});\nexport const closeInterpretationsPanel = () => ({\n  type: types.INTERPRETATIONS_PANEL_CLOSE\n});\nexport const openDownloadMode = () => ({\n  type: types.DOWNLOAD_MODE_OPEN\n});\nexport const closeDownloadMode = () => ({\n  type: types.DOWNLOAD_MODE_CLOSE\n});\nexport const layersSortingStart = () => ({\n  type: types.LAYERS_SORTING_START\n});\nexport const layersSortingEnd = () => ({\n  type: types.LAYERS_SORTING_END\n});","import i18n from '@dhis2/d2-i18n';\nimport { TILE_LAYER, BING_LAYER, AZURE_LAYER } from '../constants/layers.js';\nexport const FALLBACK_BASEMAP_ID = 'osmLight';\nexport const getFallbackBasemap = () => defaultBasemaps()[0];\nexport const getBasemap = id => defaultBasemaps().find(map => map.id === id);\nexport const defaultBasemaps = () => [{\n  id: FALLBACK_BASEMAP_ID,\n  name: i18n.t('OSM Light'),\n  img: 'images/osmlight.png',\n  config: {\n    type: TILE_LAYER,\n    url: '//cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',\n    attribution: '&copy; <a target=\"_blank\" rel=\"noreferrer\" href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a target=\"_blank\" rel=\"noreferrer\" href=\"https://cartodb.com/attributions\">CartoDB</a>'\n  },\n  isDark: false\n}, {\n  id: 'openStreetMap',\n  name: i18n.t('OSM Detailed'),\n  img: 'images/osm.png',\n  config: {\n    type: TILE_LAYER,\n    url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    attribution: '&copy; <a target=\"_blank\" rel=\"noreferrer\" href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n  },\n  isDark: false\n}, {\n  id: 'sentinel2eox',\n  name: i18n.t('Sentinel-2 EOX'),\n  img: 'images/s2eox.png',\n  config: {\n    type: TILE_LAYER,\n    layers: 's2cloudless-2024_3857',\n    format: 'image/jpeg',\n    url: '//tiles.maps.eox.at',\n    attribution: '&copy; <a target=\"_blank\" rel=\"noreferrer\" href=\"https://s2maps.eu/\">Sentinel-2 cloudless</a> by <a target=\"_blank\" rel=\"noreferrer\" href=\"https://eox.at/\">EOX IT Services GmbH</a> (Contains modified Copernicus Sentinel data 2024)'\n  },\n  isDark: false\n}, {\n  id: 'bingLight',\n  name: i18n.t('Bing Road'),\n  img: 'images/bingroad.png',\n  config: {\n    type: BING_LAYER,\n    style: 'CanvasLight',\n    apiKey: 'AotYGLQC0RDcofHC5pWLaW7k854n-6T9mTunsev9LEFwVqGaVnG8b4KERNY9PeKA' // TODO: Read from db\n  },\n\n  isDark: false\n}, {\n  id: 'bingDark',\n  name: i18n.t('Bing Dark'),\n  img: 'images/bingdark.png',\n  config: {\n    type: BING_LAYER,\n    style: 'CanvasDark'\n  },\n  isDark: true\n}, {\n  id: 'bingAerial',\n  name: i18n.t('Bing Aerial'),\n  img: 'images/bingaerial.jpeg',\n  config: {\n    type: BING_LAYER,\n    style: 'Aerial'\n  },\n  isDark: true\n}, {\n  id: 'bingHybrid',\n  name: i18n.t('Bing Aerial Labels'),\n  img: 'images/binghybrid.jpeg',\n  config: {\n    type: BING_LAYER,\n    style: 'AerialWithLabelsOnDemand'\n  },\n  isDark: true\n}, {\n  id: 'azureLight',\n  name: i18n.t('Azure Road'),\n  img: 'images/azureroad.png',\n  config: {\n    type: AZURE_LAYER,\n    style: ['microsoft.base.road']\n  },\n  isDark: false\n}, {\n  id: 'azureDark',\n  name: i18n.t('Azure Dark'),\n  img: 'images/azuredark.png',\n  config: {\n    type: AZURE_LAYER,\n    style: ['microsoft.base.darkgrey']\n  },\n  isDark: true\n}, {\n  id: 'azureAerial',\n  name: i18n.t('Azure Aerial'),\n  img: 'images/azureaerial.png',\n  config: {\n    type: AZURE_LAYER,\n    style: ['microsoft.imagery']\n  },\n  isDark: true\n}, {\n  id: 'azureHybrid',\n  name: i18n.t('Azure Aerial Labels'),\n  img: 'images/azurehybrid.png',\n  config: {\n    type: AZURE_LAYER,\n    style: ['microsoft.imagery', 'microsoft.base.hybrid.road']\n  },\n  isDark: true\n}];","import { arrayMoveImmutable } from 'array-move';\nimport * as types from '../constants/actionTypes.js';\nimport { generateUid } from '../util/uid.js';\nexport const defaultBasemapState = {\n  isVisible: true,\n  isExpanded: true,\n  opacity: 1\n};\nconst defaultState = {\n  bounds: [[-18.7, -34.9], [50.2, 35.9]],\n  basemap: defaultBasemapState,\n  mapViews: []\n};\nconst basemap = (state, action) => {\n  switch (action.type) {\n    case types.BASEMAP_SELECTED:\n      if (state.id === action.payload.id) {\n        return state;\n      }\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.BASEMAP_CHANGE_OPACITY:\n      return {\n        ...state,\n        opacity: action.opacity\n      };\n    case types.BASEMAP_TOGGLE_EXPAND:\n      return {\n        ...state,\n        isExpanded: !state.isExpanded\n      };\n    case types.BASEMAP_TOGGLE_VISIBILITY:\n      return {\n        ...state,\n        isVisible: !state.isVisible\n      };\n    default:\n      return state;\n  }\n};\nconst layer = (state, action) => {\n  let filters;\n  switch (action.type) {\n    case types.LAYER_UPDATE:\n      if (state.id !== action.payload.id) {\n        return state;\n      }\n      return {\n        ...action.payload\n      };\n    case types.LAYER_CHANGE_OPACITY:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        opacity: action.opacity\n      };\n    case types.LAYER_LOADING_SET:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isLoading: true\n      };\n    case types.LAYER_TOGGLE_VISIBILITY:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isVisible: !state.isVisible\n      };\n    case types.LAYER_TOGGLE_EXPAND:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isExpanded: !state.isExpanded\n      };\n\n    // Add/change filter\n    case types.DATA_FILTER_SET:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      return {\n        ...state,\n        dataFilters: {\n          ...state.dataFilters,\n          [action.fieldId]: action.filter\n        }\n      };\n\n    // Remove field from filter\n    case types.DATA_FILTER_CLEAR:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      filters = {\n        ...state.dataFilters\n      };\n      delete filters[action.fieldId];\n      return {\n        ...state,\n        dataFilters: filters\n      };\n    case types.MAP_ALERTS_CLEAR:\n      return {\n        ...state,\n        alerts: undefined\n      };\n    case types.MAP_EARTH_ENGINE_VALUE_SHOW:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      return {\n        ...state,\n        coordinate: action.coordinate\n      };\n    default:\n      return state;\n  }\n};\nconst map = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let mapViews;\n  let sortedMapViews;\n  switch (action.type) {\n    case types.MAP_NEW:\n      return {\n        ...defaultState\n      };\n    case types.MAP_SET:\n      return {\n        ...defaultState,\n        ...action.payload,\n        basemap: {\n          ...defaultState.basemap,\n          ...action.payload.basemap\n        }\n      };\n    case types.MAP_PROPS_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.MAP_COORDINATE_OPEN:\n      return {\n        ...state,\n        coordinatePopup: action.payload\n      };\n    case types.MAP_COORDINATE_CLOSE:\n      return {\n        ...state,\n        coordinatePopup: null\n      };\n    case types.BASEMAP_SELECTED:\n    case types.BASEMAP_CHANGE_OPACITY:\n    case types.BASEMAP_TOGGLE_EXPAND:\n    case types.BASEMAP_TOGGLE_VISIBILITY:\n      return {\n        ...state,\n        basemap: basemap(state.basemap, action)\n      };\n    case types.LAYER_ADD:\n      // Check to only allow external layers to be added once\n      if (state.mapViews.filter(l => l.id === action.payload.id).length) {\n        return state;\n      }\n      return {\n        ...state,\n        mapViews: [...state.mapViews, {\n          ...action.payload,\n          id: generateUid()\n        }]\n      };\n    case types.LAYER_REMOVE:\n      return {\n        ...state,\n        mapViews: state.mapViews.filter(layer => layer.id !== action.id)\n      };\n    case types.LAYER_SORT:\n      mapViews = [...state.mapViews].reverse(); // TODO: Refactor\n      sortedMapViews = arrayMoveImmutable(mapViews, action.oldIndex, action.newIndex).reverse();\n      return {\n        ...state,\n        mapViews: sortedMapViews\n      };\n    case types.LAYER_UPDATE:\n    case types.LAYER_EDIT:\n    case types.LAYER_CHANGE_OPACITY:\n    case types.LAYER_TOGGLE_VISIBILITY:\n    case types.LAYER_TOGGLE_EXPAND:\n    case types.DATA_FILTER_SET:\n    case types.DATA_FILTER_CLEAR:\n    case types.MAP_EARTH_ENGINE_VALUE_SHOW:\n      return {\n        ...state,\n        mapViews: state.mapViews.map(l => layer(l, action))\n      };\n    case types.LAYER_LOADING_SET:\n      {\n        return {\n          ...state,\n          mapViews: state.mapViews.map(l => layer(l, action))\n        };\n      }\n    case types.MAP_ALERTS_CLEAR:\n      return {\n        ...state,\n        alerts: undefined,\n        mapViews: state.mapViews.map(l => layer(l, action))\n      };\n    default:\n      return state;\n  }\n};\nexport default map;","import { useState, useEffect } from 'react';\nimport { useCachedData } from '../components/cachedDataProvider/CachedDataProvider.js';\nimport { getFallbackBasemap } from '../constants/basemaps.js';\nimport { defaultBasemapState } from '../reducers/map.js';\nconst emptyBasemap = {\n  config: {}\n};\nfunction useBasemapConfig(selected) {\n  const [basemap, setBasemap] = useState(emptyBasemap);\n  const {\n    systemSettings,\n    basemaps\n  } = useCachedData();\n  const defaultBasemap = systemSettings.keyDefaultBaseMap;\n  useEffect(() => {\n    const selectedId = selected.id || defaultBasemap;\n    const basemapToUse = basemaps.find(_ref => {\n      let {\n        id\n      } = _ref;\n      return id === selectedId;\n    }) || getFallbackBasemap();\n\n    // Make sure we don't override the basemap opacity\n    if (basemapToUse && selected.opacity !== undefined) {\n      delete basemapToUse.opacity;\n    }\n    const basemapConfig = {\n      ...defaultBasemapState,\n      ...selected,\n      ...basemapToUse\n    };\n    setBasemap(basemapConfig);\n  }, [defaultBasemap, selected, basemaps]);\n  return basemap;\n}\nexport default useBasemapConfig;","// extracted by mini-css-extract-plugin\nexport default {\"handle\":\"SortableHandle_handle__WZbWJ\"};","import { IconDragHandle24 } from '@dhis2/ui';\nimport React from 'react';\nimport { SortableHandle } from 'react-sortable-hoc';\nimport styles from './styles/SortableHandle.module.css';\nconst Handle = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.handle,\n  \"data-test\": \"sortable-handle\"\n}, /*#__PURE__*/React.createElement(IconDragHandle24, null));\nexport default SortableHandle(Handle);","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"LayerCard_card__MpAbs\",\"cardHeader\":\"LayerCard_cardHeader__IwswG\",\"title\":\"LayerCard_title__XV9bu\",\"overlay\":\"LayerCard_overlay__ZJOXG\",\"action\":\"LayerCard_action__2gk5x\",\"expand\":\"LayerCard_expand__nOig1\",\"content\":\"LayerCard_content__L8bFN\",\"collapsibleContent\":\"LayerCard_collapsibleContent__5bwIg\",\"expanded\":\"LayerCard_expanded__LlzMP\"};","// extracted by mini-css-extract-plugin\nexport default {\"menu\":\"LayerToolbarMore_menu__SgkGv\"};","import i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, MenuDivider, IconMore24, IconTable16, IconLaunch16, IconDownload16, IconEdit16, IconDelete16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { EARTH_ENGINE_LAYER } from '../../../constants/layers.js';\nimport { IconButton } from '../../core/index.js';\nimport styles from './styles/LayerToolbarMore.module.css';\nconst LayerToolbarMoreMenu = _ref => {\n  let {\n    layer = {},\n    onEdit,\n    onRemove,\n    toggleDataTable,\n    openAs,\n    downloadData,\n    dataTableOpen,\n    hasOrgUnitData,\n    isLoading,\n    hasError\n  } = _ref;\n  const [isOpen, setIsOpen] = useState(false);\n  const anchorRef = useRef();\n  const somethingAboveDivider = toggleDataTable || downloadData,\n    somethingBelowDivider = onRemove || onEdit,\n    showDivider = somethingAboveDivider && somethingBelowDivider;\n  if (!somethingAboveDivider && !somethingBelowDivider) {\n    return null;\n  }\n  const showDataTableDisabled = !hasOrgUnitData && (!dataTableOpen || dataTableOpen !== layer.id);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: i18n.t('More actions'),\n    onClick: () => setIsOpen(!isOpen),\n    dataTest: \"moremenubutton\",\n    ariaLabel: i18n.t('Toggle layer menu')\n  }, /*#__PURE__*/React.createElement(IconMore24, null))), isOpen && layer && /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right-start\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true,\n    dataTest: \"more-menu\"\n  }, toggleDataTable && /*#__PURE__*/React.createElement(MenuItem, {\n    label: dataTableOpen === layer.id ? i18n.t('Hide data table') : i18n.t('Show data table'),\n    icon: /*#__PURE__*/React.createElement(IconTable16, null),\n    onClick: () => {\n      setIsOpen(false);\n      toggleDataTable();\n    },\n    disabled: hasError || showDataTableDisabled\n  }), openAs && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Open in Data Visualizer app'),\n    icon: /*#__PURE__*/React.createElement(IconLaunch16, null),\n    onClick: () => {\n      setIsOpen(false);\n      openAs('CHART');\n    }\n  }), downloadData && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Download data'),\n    icon: /*#__PURE__*/React.createElement(IconDownload16, null),\n    onClick: () => {\n      setIsOpen(false);\n      downloadData();\n    },\n    disabled: hasError || !hasOrgUnitData || isLoading\n  }), showDivider && /*#__PURE__*/React.createElement(MenuDivider, null), onEdit && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Edit layer'),\n    icon: /*#__PURE__*/React.createElement(IconEdit16, null),\n    onClick: () => {\n      setIsOpen(false);\n      onEdit();\n    }\n  }), onRemove && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Remove layer'),\n    icon: /*#__PURE__*/React.createElement(IconDelete16, null),\n    destructive: true,\n    onClick: () => {\n      setIsOpen(false);\n      onRemove();\n    }\n  })))));\n};\nLayerToolbarMoreMenu.propTypes = {\n  dataTableOpen: PropTypes.string,\n  downloadData: PropTypes.func,\n  hasError: PropTypes.bool,\n  hasOrgUnitData: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  layer: PropTypes.object,\n  openAs: PropTypes.func,\n  toggleDataTable: PropTypes.func,\n  onEdit: PropTypes.func,\n  onRemove: PropTypes.func\n};\nexport default connect((_ref2, _ref3) => {\n  var _layer$aggregationTyp;\n  let {\n    dataTable: dataTableOpen,\n    aggregations\n  } = _ref2;\n  let {\n    layer = {}\n  } = _ref3;\n  const isEarthEngine = layer.layer === EARTH_ENGINE_LAYER;\n  const hasOrgUnitData = layer.data && (!isEarthEngine || ((_layer$aggregationTyp = layer.aggregationType) === null || _layer$aggregationTyp === void 0 ? void 0 : _layer$aggregationTyp.length) > 0);\n  const isLoading = isEarthEngine && hasOrgUnitData && !aggregations[layer.id];\n  return {\n    dataTableOpen,\n    hasOrgUnitData,\n    isLoading\n  };\n})(LayerToolbarMoreMenu);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OpacitySlider_container__Xc242\",\"slider\":\"OpacitySlider_slider__nnF6M\"};","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport styles from './styles/OpacitySlider.module.css';\nconst OpacitySlider = _ref => {\n  let {\n    opacity,\n    disabled,\n    onChange\n  } = _ref;\n  const lowerFill = `var(--colors-grey${disabled ? 400 : 600})`;\n  const upperFill = `var(--colors-grey${disabled ? 300 : 400})`;\n  const onSliderChange = useCallback(evt => onChange(Number(evt.target.value)), [onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"range\",\n    min: \"0\",\n    max: \"1\",\n    step: \"0.01\",\n    value: opacity,\n    disabled: disabled,\n    onChange: onSliderChange,\n    className: styles.slider,\n    style: {\n      background: `linear-gradient(\n                        to right,\n                        ${lowerFill} 0%,\n                        ${lowerFill} ${opacity * 100}%,\n                        ${upperFill} ${opacity * 100}%,\n                        ${upperFill} 100%\n                    )`\n    }\n  }));\n};\nOpacitySlider.propTypes = {\n  opacity: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\nexport default OpacitySlider;","// extracted by mini-css-extract-plugin\nexport default {\"toolbar\":\"LayerToolbar_toolbar__OJ+oR\",\"editButton\":\"LayerToolbar_editButton__Vr38M\",\"sliderContainer\":\"LayerToolbar_sliderContainer__8mAGL\",\"menuButton\":\"LayerToolbar_menuButton__GNUki\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Tooltip, IconEdit24, IconView24, IconViewOff24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconButton } from '../../core/index.js';\nimport LayerToolbarMoreMenu from './LayerToolbarMoreMenu.js';\nimport OpacitySlider from './OpacitySlider.js';\nimport styles from './styles/LayerToolbar.module.css';\nconst LayerToolbar = _ref => {\n  let {\n    hasOpacity,\n    opacity = 1,\n    isVisible,\n    onOpacityChange,\n    toggleLayerVisibility,\n    hasError,\n    ...expansionMenuProps\n  } = _ref;\n  const onEdit = expansionMenuProps.onEdit;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.toolbar,\n    \"data-test\": \"layertoolbar\"\n  }, onEdit && /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: i18n.t('Edit'),\n    onClick: onEdit,\n    className: styles.editButton,\n    dataTest: \"layer-edit-button\"\n  }, /*#__PURE__*/React.createElement(IconEdit24, null)), /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: !hasError ? i18n.t('Toggle visibility') : null,\n    onClick: toggleLayerVisibility,\n    className: cx({\n      visible: isVisible,\n      // for cypress testing only\n      notvisible: !isVisible // for cypress testing only\n    }),\n\n    dataTest: \"visibilitybutton\",\n    disabled: hasError\n  }, isVisible ? /*#__PURE__*/React.createElement(IconView24, null) : /*#__PURE__*/React.createElement(IconViewOff24, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sliderContainer\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: hasError ? i18n.t('Layer is invalid') : i18n.t('Set layer opacity'),\n    disabled: hasError\n  }, /*#__PURE__*/React.createElement(OpacitySlider, {\n    opacity: opacity,\n    disabled: hasError || !isVisible || !hasOpacity,\n    onChange: onOpacityChange\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menuButton\n  }, /*#__PURE__*/React.createElement(LayerToolbarMoreMenu, _extends({\n    hasError: hasError\n  }, expansionMenuProps))));\n};\nLayerToolbar.propTypes = {\n  toggleLayerVisibility: PropTypes.func.isRequired,\n  onOpacityChange: PropTypes.func.isRequired,\n  hasError: PropTypes.bool,\n  hasOpacity: PropTypes.bool,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number,\n  onEdit: PropTypes.func\n};\nLayerToolbar.defaultProps = {\n  hasOpacity: true\n};\nexport default LayerToolbar;","import i18n from '@dhis2/d2-i18n';\nimport { Card, IconChevronUp24, IconChevronDown24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconButton } from '../core/index.js';\nimport SortableHandle from './SortableHandle.js';\nimport styles from './styles/LayerCard.module.css';\nimport LayerToolbar from './toolbar/LayerToolbar.js';\nconst LayerCard = _ref => {\n  let {\n    title = '',\n    subtitle,\n    isOverlay,\n    isExpanded,\n    toggleExpand,\n    children,\n    ...layerToolbarProps\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.card, {\n      [styles.expanded]: isExpanded\n    }),\n    \"data-test\": `card-${title.replace(/ /g, '')}`\n  }, /*#__PURE__*/React.createElement(Card, {\n    dataTest: isOverlay ? 'layercard' : 'basemapcard'\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.cardHeader\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.title, {\n      [styles.overlay]: isOverlay\n    })\n  }, /*#__PURE__*/React.createElement(\"h2\", null, title), subtitle && /*#__PURE__*/React.createElement(\"h3\", null, subtitle)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.action\n  }, isOverlay && /*#__PURE__*/React.createElement(SortableHandle, null), /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: isExpanded ? i18n.t('Collapse') : i18n.t('Expand'),\n    onClick: toggleExpand,\n    className: styles.expand\n  }, isExpanded ? /*#__PURE__*/React.createElement(IconChevronUp24, null) : /*#__PURE__*/React.createElement(IconChevronDown24, null)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.collapsibleContent\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, children), /*#__PURE__*/React.createElement(LayerToolbar, layerToolbarProps))));\n};\nLayerCard.propTypes = {\n  isExpanded: PropTypes.bool.isRequired,\n  title: PropTypes.string.isRequired,\n  toggleExpand: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  isOverlay: PropTypes.bool,\n  subtitle: PropTypes.string\n};\nexport default LayerCard;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Basemap_container__BdP05\",\"imageContainer\":\"Basemap_imageContainer__h-+VD\",\"selected\":\"Basemap_selected__vl4S3\",\"image\":\"Basemap_image__stJ5L\",\"noImage\":\"Basemap_noImage__RJXCc\",\"name\":\"Basemap_name__7+oSg\",\"nameSelected\":\"Basemap_nameSelected__sEcco\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Basemap.module.css';\n\n// TODO: Use ImageSelect.js component for selectable image\nconst Basemap = _ref => {\n  let {\n    id,\n    img,\n    name,\n    config,\n    isSelected,\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    title: name,\n    onClick: () => onClick({\n      id,\n      config\n    }),\n    \"data-test\": \"basemaplistitem\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageContainer, {\n      [styles.selected]: isSelected\n    }),\n    \"data-test\": \"basemaplistitem-img\"\n  }, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  }, i18n.t('External basemap'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.name, {\n      [styles.nameSelected]: isSelected\n    }),\n    \"data-test\": \"basemaplistitem-name\"\n  }, i18n.t(name)));\n};\nBasemap.propTypes = {\n  config: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  img: PropTypes.string\n};\nexport default Basemap;","// extracted by mini-css-extract-plugin\nexport default {\"basemapList\":\"BasemapList_basemapList__YVxvb\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useCachedData } from '../../cachedDataProvider/CachedDataProvider.js';\nimport Basemap from './Basemap.js';\nimport styles from './styles/BasemapList.module.css';\nconst BasemapList = _ref => {\n  let {\n    selectedID,\n    selectBasemap\n  } = _ref;\n  const {\n    basemaps\n  } = useCachedData();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.basemapList,\n    \"data-test\": \"basemaplist\"\n  }, basemaps.map((basemap, index) => /*#__PURE__*/React.createElement(Basemap, _extends({\n    key: `basemap-${index}`,\n    onClick: selectBasemap,\n    isSelected: basemap.id === selectedID\n  }, basemap))));\n};\nBasemapList.propTypes = {\n  selectBasemap: PropTypes.func.isRequired,\n  selectedID: PropTypes.string.isRequired\n};\nexport default BasemapList;","import i18n from '@dhis2/d2-i18n';\nimport { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { changeBasemapOpacity, toggleBasemapExpand, toggleBasemapVisibility, selectBasemap } from '../../../actions/basemap.js';\nimport { VECTOR_STYLE } from '../../../constants/layers.js';\nimport useBasemapConfig from '../../../hooks/useBasemapConfig.js';\nimport LayerCard from '../LayerCard.js';\nimport BasemapList from './BasemapList.js';\nconst BasemapCard = props => {\n  const {\n    subtitle = i18n.t('Basemap'),\n    toggleBasemapExpand,\n    toggleBasemapVisibility,\n    changeBasemapOpacity,\n    selectBasemap\n  } = props;\n  const basemap = useBasemapConfig(props.basemap);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, basemap.id === undefined ? /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))) : /*#__PURE__*/React.createElement(LayerCard, {\n    hasOpacity: basemap.config.type === VECTOR_STYLE ? false : true,\n    title: basemap.name,\n    subtitle: subtitle,\n    opacity: basemap.opacity,\n    isExpanded: basemap.isExpanded,\n    isVisible: basemap.isVisible,\n    onOpacityChange: changeBasemapOpacity,\n    toggleExpand: toggleBasemapExpand,\n    toggleLayerVisibility: toggleBasemapVisibility\n  }, /*#__PURE__*/React.createElement(BasemapList, {\n    selectedID: basemap.id,\n    selectBasemap: selectBasemap\n  })));\n};\nBasemapCard.propTypes = {\n  basemap: PropTypes.object.isRequired,\n  changeBasemapOpacity: PropTypes.func.isRequired,\n  selectBasemap: PropTypes.func.isRequired,\n  toggleBasemapExpand: PropTypes.func.isRequired,\n  toggleBasemapVisibility: PropTypes.func.isRequired,\n  subtitle: PropTypes.string\n};\nexport default connect(state => ({\n  basemap: state.map.basemap\n}), {\n  changeBasemapOpacity,\n  toggleBasemapExpand,\n  toggleBasemapVisibility,\n  selectBasemap\n})(BasemapCard);","import * as types from '../constants/actionTypes.js';\nexport const selectBasemap = payload => ({\n  type: types.BASEMAP_SELECTED,\n  payload\n});\nexport const toggleBasemapExpand = () => ({\n  type: types.BASEMAP_TOGGLE_EXPAND\n});\nexport const toggleBasemapVisibility = () => ({\n  type: types.BASEMAP_TOGGLE_VISIBILITY\n});\nexport const changeBasemapOpacity = opacity => ({\n  type: types.BASEMAP_CHANGE_OPACITY,\n  opacity\n});","// extracted by mini-css-extract-plugin\nexport default {\"layersToggle\":\"LayersToggle_layersToggle__+STbf\",\"collapsed\":\"LayersToggle_collapsed__bncCI\"};","import { IconChevronLeft24, IconChevronRight24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { openLayersPanel, closeLayersPanel } from '../../actions/ui.js';\nimport styles from './styles/LayersToggle.module.css';\nconst LayersToggle = () => {\n  const dispatch = useDispatch();\n  const isOpen = useSelector(state => state.ui.layersPanelOpen);\n  const isDownload = useSelector(state => state.ui.downloadMode);\n  return !isDownload && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"layers-toggle-button\",\n    onClick: isOpen ? () => dispatch(closeLayersPanel()) : () => dispatch(openLayersPanel()),\n    className: cx(styles.layersToggle, {\n      [styles.collapsed]: !isOpen\n    })\n  }, isOpen ? /*#__PURE__*/React.createElement(IconChevronLeft24, null) : /*#__PURE__*/React.createElement(IconChevronRight24, null));\n};\nexport default LayersToggle;","import { THEMATIC_LAYER } from '../constants/layers.js';\nimport { getPeriodNameFromId, getDimensionsFromFilters } from './analytics.js';\nimport { cleanDimension } from './favorites.js';\nimport { loadDataItemLegendSet } from './legend.js';\nexport const USER_DATASTORE_NAMESPACE = 'analytics';\nexport const CURRENT_AO_KEY = 'currentAnalyticalObject';\nexport const APP_URLS = {\n  CHART: 'dhis-web-data-visualizer',\n  PIVOT: 'dhis-web-pivot'\n};\n\n// Combines all dimensions in columns, rows and filters\nconst getDimensionsFromAnalyticalObject = function () {\n  let ao = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    columns = [],\n    rows = [],\n    filters = []\n  } = ao;\n  return [...columns, ...rows, ...filters];\n};\n\n// Returns the data items of the first dx dimension in an analytical object\nexport const getDataDimensionsFromAnalyticalObject = ao => {\n  const dims = getDimensionsFromAnalyticalObject(ao);\n  const dataDim = dims.find(i => i.dimension === 'dx');\n\n  // We only use the first dx dimension\n  return dataDim ? dataDim.items : [];\n};\n\n// Returns a thematic layer config from an analytical object\nexport const getThematicLayerFromAnalyticalObject = async _ref => {\n  let {\n    ao = {},\n    dataId,\n    isVisible = true,\n    engine\n  } = _ref;\n  const {\n    yearlySeries,\n    aggregationType = 'DEFAULT'\n  } = ao;\n  const dataDims = getDataDimensionsFromAnalyticalObject(ao);\n  const dims = getDimensionsFromAnalyticalObject(ao);\n  const orgUnits = dims.find(i => i.dimension === 'ou');\n  const filters = getDimensionsFromFilters(dims); // Dynamic dimension filters\n  let period = dims.find(i => i.dimension === 'pe');\n  let dataDim = dataDims[0];\n  if (dataId) {\n    dataDim = dataDims.find(item => item.id === dataId);\n  }\n  if (!dataDim || !orgUnits || !period) {\n    return;\n  }\n\n  // Load default legend set for selected data dimension\n  const legendSet = await loadDataItemLegendSet(dataDim, engine);\n\n  // Currently we only support one period in map filters so we select the first\n  if (yearlySeries && yearlySeries.length) {\n    period = {\n      dimension: 'pe',\n      items: [{\n        id: yearlySeries[0],\n        name: getPeriodNameFromId(yearlySeries[0])\n      }]\n    };\n  }\n  return {\n    layer: THEMATIC_LAYER,\n    columns: [{\n      dimension: 'dx',\n      items: [dataDim]\n    }],\n    rows: [orgUnits],\n    filters: [period, ...filters],\n    aggregationType,\n    legendSet,\n    isVisible,\n    opacity: 0.9\n  };\n};\n\n// Translates a thematic layer to an analytical object\nexport const getAnalyticalObjectFromThematicLayer = function () {\n  let layer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    columns = [],\n    rows = [],\n    filters = [],\n    aggregationType = 'DEFAULT'\n  } = layer;\n  return {\n    columns,\n    rows: rows.map(cleanDimension),\n    filters,\n    aggregationType\n  };\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { guideLength, textPadding } from './Bubbles.js';\nconst Bubble = _ref => {\n  let {\n    radius,\n    maxRadius,\n    text,\n    textAlign,\n    color,\n    stroke,\n    pattern\n  } = _ref;\n  const leftAlign = textAlign === 'left';\n  const x = maxRadius;\n  const y = maxRadius * 2 - radius;\n  const x2 = leftAlign ? x - maxRadius - guideLength : x + maxRadius + guideLength;\n  const y2 = maxRadius * 2 - radius * 2;\n  const textX = x2 + (leftAlign ? -textPadding : textPadding);\n  const textAnchor = leftAlign ? 'end' : 'start';\n  return /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: x,\n    cy: y,\n    r: radius,\n    stroke: stroke || '#000',\n    style: {\n      fill: pattern ? `url(#${pattern})` : color || 'none',\n      strokeWidth: 0.5\n    }\n  }), text && /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"line\", {\n    x1: x,\n    x2: x2,\n    y1: y2,\n    y2: y2,\n    stroke: \"black\",\n    style: {\n      strokeDasharray: '2, 2',\n      strokeWidth: 0.5\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    x: textX,\n    y: y2,\n    textAnchor: textAnchor,\n    alignmentBaseline: \"middle\",\n    style: {\n      fontSize: 12\n    }\n  }, text)));\n};\nBubble.propTypes = {\n  maxRadius: PropTypes.number.isRequired,\n  radius: PropTypes.number.isRequired,\n  color: PropTypes.string,\n  pattern: PropTypes.string,\n  stroke: PropTypes.string,\n  text: PropTypes.string,\n  textAlign: PropTypes.oneOf(['left', 'right'])\n};\nexport default Bubble;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { scaleSqrt } from 'd3-scale';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { THEMATIC_RADIUS_DEFAULT } from '../../constants/layers.js';\nimport { createBubbleItems, createSingleColorBubbles, computeLayout } from '../../util/bubbles.js';\nimport Bubble from './Bubble.js';\nconst style = {\n  paddingTop: 10\n};\nexport const digitWidth = 6.8;\nexport const guideLength = 16;\nexport const textPadding = 4;\nconst Bubbles = _ref => {\n  let {\n    radiusLow,\n    radiusHigh,\n    color,\n    minValue,\n    maxValue,\n    classes,\n    isPlugin\n  } = _ref;\n  const legendWidth = isPlugin ? 150 : 245;\n  const noDataClass = classes.find(c => c.noData === true);\n  const bubbleClasses = classes.filter(c => !c.noData);\n  const height = radiusHigh * 2 + 4;\n  const scale = scaleSqrt().range([radiusLow, radiusHigh]);\n  if (isNaN(radiusLow) || isNaN(radiusHigh)) {\n    return null;\n  }\n  const bubbles = bubbleClasses.length ? createBubbleItems({\n    classes: bubbleClasses,\n    minValue,\n    maxValue,\n    scale,\n    radiusHigh\n  }) : createSingleColorBubbles({\n    color,\n    minValue,\n    maxValue,\n    scale,\n    radiusLow,\n    radiusHigh\n  });\n  const {\n    alternate,\n    offset,\n    showNumbers\n  } = computeLayout({\n    bubbles,\n    bubbleClasses,\n    radiusHigh,\n    legendWidth\n  });\n  if (showNumbers) {\n    bubbles.forEach((b, i) => {\n      if (!showNumbers.includes(i)) {\n        delete b.text;\n      }\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: legendWidth,\n    height: height + 20 + (noDataClass ? THEMATIC_RADIUS_DEFAULT + 1 : 0)\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: `translate(${alternate ? offset : '2'} 10)`\n  }, bubbles.map((bubble, i) => /*#__PURE__*/React.createElement(Bubble, _extends({\n    key: i\n  }, bubble, {\n    textAlign: alternate && i % 2 == 0 ? 'left' : 'right'\n  })))), noDataClass && /*#__PURE__*/React.createElement(React.Fragment, null, ' ', /*#__PURE__*/React.createElement(\"circle\", {\n    transform: `translate(${alternate ? offset : '2'} 20)`,\n    cx: radiusHigh,\n    cy: height,\n    r: THEMATIC_RADIUS_DEFAULT,\n    stroke: \"#000\",\n    style: {\n      fill: noDataClass.color,\n      strokeWidth: 0.5\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    transform: `translate(${alternate ? offset : '2'} 20)`,\n    x: radiusHigh + THEMATIC_RADIUS_DEFAULT + 5,\n    y: height + 4,\n    fontSize: 12\n  }, noDataClass.name))));\n};\nBubbles.propTypes = {\n  radiusHigh: PropTypes.number.isRequired,\n  radiusLow: PropTypes.number.isRequired,\n  classes: PropTypes.array,\n  color: PropTypes.string,\n  isPlugin: PropTypes.bool,\n  maxValue: PropTypes.number,\n  minValue: PropTypes.number\n};\nexport default Bubbles;","import i18n from '@dhis2/d2-i18n';\nimport { precisionRound } from 'd3-format';\nimport { digitWidth, guideLength, textPadding } from '../components/legend/Bubbles.js';\nimport { getContrastColor } from './colors.js';\nimport { getLongestTextLength } from './helpers.js';\nimport { getRoundToPrecisionFn } from './numbers.js';\nexport const createBubbleItems = _ref => {\n  let {\n    classes,\n    minValue,\n    maxValue,\n    scale,\n    radiusHigh\n  } = _ref;\n  const binSize = (maxValue - minValue) / classes.length;\n  const precision = precisionRound(binSize, maxValue);\n  const valueFormat = n => getRoundToPrecisionFn(precision)(n).toString();\n  const startValue = classes[0].startValue;\n  const endValue = classes[classes.length - 1].endValue;\n  const itemScale = scale.domain([startValue, endValue]);\n  const bubbles = [...classes].reverse().map(c => ({\n    radius: itemScale(c.endValue),\n    maxRadius: radiusHigh,\n    color: c.color,\n    text: valueFormat(c.endValue)\n  }));\n  bubbles.push({\n    radius: itemScale(startValue),\n    maxRadius: radiusHigh,\n    text: valueFormat(startValue)\n  });\n  return bubbles;\n};\nexport const createSingleColorBubbles = _ref2 => {\n  let {\n    color,\n    minValue,\n    maxValue,\n    scale,\n    radiusLow,\n    radiusHigh\n  } = _ref2;\n  const binSize = (maxValue - minValue) / 3;\n  const precision = precisionRound(binSize, maxValue);\n  const valueFormat = n => getRoundToPrecisionFn(precision)(n).toString();\n  const stroke = color && getContrastColor(color);\n  const itemScale = scale.domain([minValue, maxValue]);\n  const midValue = (maxValue + minValue) / 2;\n  return [{\n    radius: radiusHigh,\n    maxRadius: radiusHigh,\n    color,\n    stroke,\n    text: valueFormat(maxValue) || i18n.t('Max')\n  }, {\n    radius: itemScale(midValue),\n    maxRadius: radiusHigh,\n    color,\n    stroke,\n    text: valueFormat(midValue) || i18n.t('Mid')\n  }, {\n    radius: radiusLow,\n    maxRadius: radiusHigh,\n    color,\n    stroke,\n    text: valueFormat(minValue) || i18n.t('Min')\n  }];\n};\nexport const computeLayout = _ref3 => {\n  let {\n    bubbles,\n    bubbleClasses,\n    radiusHigh,\n    legendWidth\n  } = _ref3;\n  // Calculate the pixel length of the longest number\n  let textLength = Math.ceil(Math.max(getLongestTextLength(bubbleClasses, 'startValue'), getLongestTextLength(bubbleClasses, 'endValue')) * digitWidth);\n\n  // Calculate the total length if numbers are alternate on each side\n  const alternateLength = (radiusHigh + guideLength + textPadding + textLength) * 2;\n  let smallestGap = bubbles.reduce((prev, curr, i) => {\n    const gap = prev.radius - curr.radius;\n    const smallestGap = prev.gap === undefined || gap < prev.gap ? gap : prev.gap;\n    return i === bubbles.length - 1 ? Math.round(smallestGap * 2) : {\n      radius: curr.radius,\n      gap: smallestGap\n    };\n  });\n  const alternateFit = alternateLength < legendWidth;\n  const alternate = alternateFit && smallestGap > 5 && smallestGap < 12;\n  if (!alternateFit) {\n    smallestGap = smallestGap / 2;\n  }\n\n  // Too cramped to show number for each bubble\n  let showNumbers;\n  if (smallestGap < 6) {\n    const [maxBubble] = bubbles;\n    const minBubble = bubbles[bubbles.length - 1];\n    const gap = maxBubble.radius - minBubble.radius;\n    showNumbers = [0]; // Always show largest number\n\n    if (gap > 6) {\n      showNumbers.push(bubbles.length - 1);\n    }\n    if (gap > 15) {\n      const midRadius = minBubble.radius + gap / 2;\n\n      // Find the closest bubble above the mid radius\n      const midBubble = bubbles.reduce((prev, curr) => curr.radius >= midRadius && curr.radius - midRadius < prev.radius - midRadius ? curr : prev);\n      showNumbers.push(bubbles.indexOf(midBubble));\n    }\n  }\n  const bubblesWithVisibleText = Array.isArray(showNumbers) ? showNumbers.map(i => bubbles[i]) : bubbles;\n  textLength = Math.ceil(getLongestTextLength(bubblesWithVisibleText, 'text') * digitWidth);\n  const offset = textLength + guideLength + textPadding;\n  return {\n    alternate,\n    offset,\n    showNumbers\n  };\n};","// extracted by mini-css-extract-plugin\nexport default {\"legendItemRange\":\"LegendItemRange_legendItemRange__21prC\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/LegendItemRange.module.css';\nconst LegendItemRange = _ref => {\n  let {\n    name = '',\n    startValue,\n    endValue,\n    count\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"td\", {\n    className: styles.legendItemRange\n  }, isNaN(startValue) ? name : `${name} ${startValue} - ${endValue}`, count !== undefined ? ` (${count})` : '');\n};\nLegendItemRange.propTypes = {\n  count: PropTypes.number,\n  endValue: PropTypes.number,\n  name: PropTypes.string,\n  startValue: PropTypes.number\n};\nexport default LegendItemRange;","import PropTypes from 'prop-types';\nimport React from 'react';\nconst LineSymbol = _ref => {\n  let {\n    color,\n    weight\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    style: {\n      width: 24,\n      height: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    stroke: color,\n    fill: color,\n    strokeWidth: weight / 2,\n    d: \"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z\"\n  }));\n};\nLineSymbol.propTypes = {\n  color: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default LineSymbol;","import PropTypes from 'prop-types';\nimport React from 'react';\nconst PolygonSymbol = _ref => {\n  let {\n    color,\n    fill = 'none',\n    weight\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    style: {\n      width: 24,\n      height: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: fill,\n    stroke: color,\n    strokeWidth: weight,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M 3.5 18.5 l 7.5 2.5 l 11 -2 L 19 12 l 3 -4 l -8 -3 l -8 2 L 2 14 z\"\n  }));\n};\nPolygonSymbol.propTypes = {\n  color: PropTypes.string,\n  fill: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default PolygonSymbol;","// extracted by mini-css-extract-plugin\nexport default {\"legendItem\":\"LegendItem_legendItem__kscet\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport LegendItemRange from './LegendItemRange.js';\nimport LineSymbol from './LineSymbol.js';\nimport PolygonSymbol from './PolygonSymbol.js';\nimport styles from './styles/LegendItem.module.css';\nconst maxRadius = 15;\nconst maxLineWeight = 5;\nconst LegendItem = _ref => {\n  let {\n    type,\n    image,\n    color,\n    strokeColor,\n    fillColor,\n    radius,\n    weight,\n    name,\n    startValue,\n    endValue,\n    count\n  } = _ref;\n  if (!name && startValue === undefined) {\n    return null;\n  }\n  const symbol = {\n    backgroundImage: image ? `url(${image})` : 'none',\n    backgroundColor: color ? color : 'transparent'\n  };\n  if (strokeColor) {\n    symbol.border = `1px solid ${strokeColor}`;\n  }\n  if (radius) {\n    const r = Math.min(radius, maxRadius) * 2;\n    symbol.width = `${r}px`;\n    symbol.height = `${r}px`;\n    symbol.borderRadius = '50%';\n  }\n  const lineWeight = weight ? Math.min(weight, maxLineWeight) : null;\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    className: styles.legendItem,\n    \"data-test\": \"layerlegend-item\"\n  }, /*#__PURE__*/React.createElement(\"th\", null, weight ? type === 'LineString' ? /*#__PURE__*/React.createElement(LineSymbol, {\n    color: color,\n    weight: lineWeight\n  }) : /*#__PURE__*/React.createElement(PolygonSymbol, {\n    color: strokeColor || color,\n    fill: fillColor,\n    weight: lineWeight\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    style: symbol\n  })), /*#__PURE__*/React.createElement(LegendItemRange, {\n    name: name,\n    startValue: startValue,\n    endValue: endValue,\n    count: count\n  }));\n};\nLegendItem.propTypes = {\n  color: PropTypes.string,\n  count: PropTypes.number,\n  endValue: PropTypes.number,\n  fillColor: PropTypes.string,\n  image: PropTypes.string,\n  name: PropTypes.string,\n  radius: PropTypes.number,\n  startValue: PropTypes.number,\n  strokeColor: PropTypes.string,\n  type: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default LegendItem;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"Legend_legend__b62xP\",\"description\":\"Legend_description__d1w-g\",\"period\":\"Legend_period__5Y7TM\",\"legendImage\":\"Legend_legendImage__s5QrO\",\"filters\":\"Legend_filters__aEows\",\"coordinateFields\":\"Legend_coordinateFields__DPxbg\",\"group\":\"Legend_group__iPRiA\",\"unit\":\"Legend_unit__NMYIN\",\"explanation\":\"Legend_explanation__1cQVu\",\"source\":\"Legend_source__kRWdo\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Bubbles from './Bubbles.js';\nimport LegendItem from './LegendItem.js';\nimport styles from './styles/Legend.module.css';\n\n// Rendering a layer legend in the left drawer, on a map (download) or in a control (plugin)\nconst Legend = _ref => {\n  let {\n    description,\n    filters,\n    coordinateFields,\n    groups,\n    unit,\n    items,\n    bubbles,\n    explanation,\n    url,\n    source,\n    sourceUrl,\n    isPlugin = false\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"dl\", {\n    className: styles.legend,\n    \"data-test\": \"layerlegend\"\n  }, description && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, description), groups && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.group\n  }, groups.length > 1 ? i18n.t('Groups') : i18n.t('Group'), groups.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: id\n    }, name);\n  })), unit && items && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.unit\n  }, unit), bubbles ? /*#__PURE__*/React.createElement(Bubbles, _extends({}, bubbles, {\n    isPlugin: isPlugin,\n    classes: items\n  })) : Array.isArray(items) && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, items.map((item, index) => /*#__PURE__*/React.createElement(LegendItem, _extends({}, item, {\n    key: `item-${index}`\n  }))))), url && /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.legendImage,\n    src: url\n  }), Array.isArray(coordinateFields) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.coordinateFields\n  }, /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Coordinate field'), \":\"), coordinateFields.map((coordinateField, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index\n  }, coordinateField))), Array.isArray(filters) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filters,\n    \"data-test\": \"layerlegend-filters\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Filters'), \":\"), filters.map((filter, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index\n  }, filter))), Array.isArray(explanation) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.explanation\n  }, explanation.map((expl, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index\n  }, expl))), source && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.source\n  }, i18n.t('Source'), \":\\xA0\", sourceUrl ? /*#__PURE__*/React.createElement(\"a\", {\n    href: sourceUrl,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, source) : /*#__PURE__*/React.createElement(\"span\", null, source)));\n};\nLegend.propTypes = {\n  bubbles: PropTypes.shape({\n    radiusHigh: PropTypes.number.isRequired,\n    radiusLow: PropTypes.number.isRequired,\n    color: PropTypes.string\n  }),\n  coordinateFields: PropTypes.array,\n  description: PropTypes.string,\n  explanation: PropTypes.array,\n  filters: PropTypes.array,\n  groups: PropTypes.array,\n  isPlugin: PropTypes.bool,\n  items: PropTypes.array,\n  source: PropTypes.string,\n  sourceUrl: PropTypes.string,\n  unit: PropTypes.string,\n  url: PropTypes.string\n};\nexport default Legend;","// extracted by mini-css-extract-plugin\nexport default {\"btnProgress\":\"DataDownloadDialogActions_btnProgress__eZx74\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/DataDownloadDialogActions.module.css';\nconst DataDownloadDialogActions = _ref => {\n  let {\n    downloading,\n    onStartClick,\n    onCancelClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onCancelClick,\n    disabled: downloading\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    name: \"download-button\",\n    primary: true,\n    onClick: onStartClick,\n    disabled: downloading\n  }, i18n.t('Download'), downloading && /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true,\n    className: styles.btnProgress\n  })));\n};\nDataDownloadDialogActions.propTypes = {\n  downloading: PropTypes.bool.isRequired,\n  onCancelClick: PropTypes.func.isRequired,\n  onStartClick: PropTypes.func.isRequired\n};\nexport default DataDownloadDialogActions;","// extracted by mini-css-extract-plugin\nexport default {\"contentDiv\":\"DataDownloadDialog_contentDiv__ruX2n\",\"inputContainer\":\"DataDownloadDialog_inputContainer__bHEvv\",\"headingDiv\":\"DataDownloadDialog_headingDiv__Gfuok\",\"selectField\":\"DataDownloadDialog_selectField__kEAem\",\"checkboxRoot\":\"DataDownloadDialog_checkboxRoot__H51Al\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { EVENT_LAYER } from '../../../constants/layers.js';\nimport { getFormatOptions, downloadData } from '../../../util/dataDownload.js';\nimport { useCachedData } from '../../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField, Checkbox, Help } from '../../core/index.js';\nimport DataDownloadDialogActions from './DataDownloadDialogActions.js';\nimport styles from './styles/DataDownloadDialog.module.css';\nconst DataDownloadDialog = _ref => {\n  let {\n    layer,\n    onCloseDialog\n  } = _ref;\n  const engine = useDataEngine();\n  const {\n    nameProperty\n  } = useCachedData();\n  const formatOptions = getFormatOptions();\n  const [selectedFormat, setSelectedFormat] = useState(formatOptions[2]);\n  const [humanReadable, setHumanReadable] = useState(true);\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [error, setError] = useState(null);\n  const aggregations = useSelector(state => state.aggregations);\n  const onChangeFormat = format => {\n    setError(null);\n    setSelectedFormat(format);\n  };\n  const onChangeHumanReadable = isChecked => {\n    setError(null);\n    setHumanReadable(isChecked);\n  };\n  const onClose = () => {\n    setError(null);\n    onCloseDialog();\n  };\n  const onStartDownload = async () => {\n    setIsDownloading(true);\n    setError(null);\n    console.log('onStartDownload', {\n      nameProperty,\n      layer\n    });\n    try {\n      await downloadData({\n        layer,\n        aggregations: aggregations[layer.id],\n        format: selectedFormat.id,\n        humanReadableKeys: humanReadable,\n        nameProperty,\n        engine\n      });\n      setIsDownloading(false);\n      onClose();\n    } catch (e) {\n      console.log('download failed', e);\n      setIsDownloading(false);\n      setError(`download failed ${e}`);\n    }\n  };\n  if (!layer) {\n    console.error('Tried to open data download dialog without specifying a source layer!');\n  }\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    onClose: onClose,\n    dataTest: \"data-download-modal\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Download Layer Data')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contentDiv\n  }, i18n.t('Downloading GeoJSON data for \"{{layerName}}\"', {\n    layerName: layer.name\n  })), /*#__PURE__*/React.createElement(Help, null, i18n.t('GeoJSON is supported by most GIS software, including QGIS and ArcGIS Desktop.')), layer.layer === EVENT_LAYER && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputContainer\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.headingDiv\n  }, i18n.t('GeoJSON Properties:')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selectField\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('ID Format'),\n    items: formatOptions,\n    value: selectedFormat === null || selectedFormat === void 0 ? void 0 : selectedFormat.id,\n    onChange: onChangeFormat\n  })), /*#__PURE__*/React.createElement(Checkbox, {\n    className: styles.checkboxRoot,\n    label: i18n.t('Use human-readable keys'),\n    checked: humanReadable,\n    onChange: onChangeHumanReadable\n  }))), error && /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, i18n.t('Data download failed.'))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(DataDownloadDialogActions, {\n    downloading: isDownloading,\n    onStartClick: onStartDownload,\n    onCancelClick: onClose\n  })));\n};\nDataDownloadDialog.propTypes = {\n  onCloseDialog: PropTypes.func.isRequired,\n  layer: PropTypes.shape({\n    id: PropTypes.string,\n    layer: PropTypes.string,\n    name: PropTypes.string\n  })\n};\nexport default DataDownloadDialog;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"OverlayCard_legend__daq6o\",\"noticebox\":\"OverlayCard_noticebox__qAzJb\"};","import { useConfig } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport { useSetting } from '@dhis2/app-service-datastore';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { toggleDataTable } from '../../../actions/dataTable.js';\nimport { editLayer, removeLayer, changeLayerOpacity, toggleLayerExpand, toggleLayerVisibility } from '../../../actions/layers.js';\nimport { ALERT_SUCCESS, ALERT_MESSAGE_DYNAMIC } from '../../../constants/alerts.js';\nimport { DOWNLOADABLE_LAYER_TYPES, DATA_TABLE_LAYER_TYPES, OPEN_AS_LAYER_TYPES, EXTERNAL_LAYER } from '../../../constants/layers.js';\nimport { getAnalyticalObjectFromThematicLayer, APP_URLS, CURRENT_AO_KEY } from '../../../util/analyticalObject.js';\nimport Legend from '../../legend/Legend.js';\nimport DataDownloadDialog from '../download/DataDownloadDialog.js';\nimport LayerCard from '../LayerCard.js';\nimport styles from './styles/OverlayCard.module.css';\nconst OverlayCard = _ref => {\n  let {\n    layer,\n    editLayer,\n    removeLayer,\n    changeLayerOpacity,\n    toggleLayerExpand,\n    toggleLayerVisibility,\n    toggleDataTable\n  } = _ref;\n  const [showDataDownloadDialog, setShowDataDownloadDialog] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const [, /* actual value not used */{\n    set\n  }] = useSetting(CURRENT_AO_KEY);\n  const layerRemovedAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_SUCCESS);\n  const {\n    id,\n    name,\n    legend,\n    isExpanded = true,\n    opacity,\n    isVisible,\n    layer: layerType,\n    isLoaded,\n    loadError\n  } = layer;\n  const canEdit = layerType !== EXTERNAL_LAYER;\n  const canToggleDataTable = DATA_TABLE_LAYER_TYPES.includes(layerType);\n  const canDownload = DOWNLOADABLE_LAYER_TYPES.includes(layerType);\n  const canOpenAs = OPEN_AS_LAYER_TYPES.includes(layerType);\n  const getCardContent = () => {\n    if (loadError) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-test\": \"load-error-noticebox\",\n        className: styles.noticebox\n      }, /*#__PURE__*/React.createElement(NoticeBox, {\n        error: true,\n        title: i18n.t('Failed to load layer')\n      }, /*#__PURE__*/React.createElement(\"p\", null, loadError)));\n    }\n    return legend && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.legend\n    }, /*#__PURE__*/React.createElement(Legend, legend));\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(LayerCard, {\n    layer: layer,\n    title: isLoaded ? name : i18n.t('Loading layer') + '...',\n    subtitle: isLoaded && legend && legend.period ? legend.period : null,\n    opacity: opacity,\n    isOverlay: true,\n    isExpanded: isExpanded,\n    isVisible: isVisible,\n    toggleExpand: () => toggleLayerExpand(id),\n    onEdit: canEdit ? () => editLayer(layer) : undefined,\n    toggleDataTable: canToggleDataTable ? () => toggleDataTable(id) : undefined,\n    toggleLayerVisibility: () => toggleLayerVisibility(id),\n    onOpacityChange: newOpacity => changeLayerOpacity(id, newOpacity),\n    onRemove: () => {\n      removeLayer(id);\n      layerRemovedAlert.show({\n        msg: i18n.t('{{name}} deleted.', {\n          name\n        })\n      });\n    },\n    downloadData: canDownload ? () => setShowDataDownloadDialog(true) : undefined,\n    openAs: canOpenAs ? async type => {\n      const currentAO = getAnalyticalObjectFromThematicLayer(layer);\n\n      // Store AO in user data store\n      await set(currentAO);\n\n      // Open it in another app\n      window.open(`${baseUrl}/${APP_URLS[type]}/#/currentAnalyticalObject`, '_blank');\n    } : undefined,\n    hasError: !!loadError\n  }, getCardContent()), showDataDownloadDialog && /*#__PURE__*/React.createElement(DataDownloadDialog, {\n    layer: layer,\n    onCloseDialog: () => setShowDataDownloadDialog(false)\n  }));\n};\nOverlayCard.propTypes = {\n  changeLayerOpacity: PropTypes.func.isRequired,\n  editLayer: PropTypes.func.isRequired,\n  layer: PropTypes.object.isRequired,\n  removeLayer: PropTypes.func.isRequired,\n  toggleDataTable: PropTypes.func.isRequired,\n  toggleLayerExpand: PropTypes.func.isRequired,\n  toggleLayerVisibility: PropTypes.func.isRequired\n};\nexport default connect(null, {\n  editLayer,\n  removeLayer,\n  changeLayerOpacity,\n  toggleLayerExpand,\n  toggleLayerVisibility,\n  toggleDataTable\n})(OverlayCard);","// extracted by mini-css-extract-plugin\nexport default {\"layersPanel\":\"LayersPanel_layersPanel__wu0l5\",\"collapsed\":\"LayersPanel_collapsed__RoW6a\",\"layersPanelInner\":\"LayersPanel_layersPanelInner__rnwAP\"};","import cx from 'classnames';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { sortLayers } from '../../actions/layers.js';\nimport { layersSortingEnd, layersSortingStart } from '../../actions/ui.js';\nimport BasemapCard from '../layers/basemaps/BasemapCard.js';\nimport LayersToggle from '../layers/LayersToggle.js';\nimport OverlayCard from './overlays/OverlayCard.js';\nimport styles from './styles/LayersPanel.module.css';\nconst SortableLayer = SortableElement(OverlayCard);\n\n// Draggable layers - last layer on top\nconst SortableLayersList = SortableContainer(_ref => {\n  let {\n    layers\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"sortable-layers-list\"\n  }, layers.map((layer, index) => /*#__PURE__*/React.createElement(SortableLayer, {\n    key: layer.id,\n    index: index,\n    layer: layer\n  })));\n});\nconst LayersPanel = () => {\n  const layersPanelOpen = useSelector(state => state.ui.layersPanelOpen);\n  const layers = useSelector(state => [...state.map.mapViews].reverse());\n  const dispatch = useDispatch();\n  const onSortStart = () => {\n    document.body.classList.add('layersSorting');\n    dispatch(layersSortingStart());\n  };\n  const onSortEnd = _ref2 => {\n    let {\n      oldIndex,\n      newIndex\n    } = _ref2;\n    setTimeout(() => {\n      document.body.classList.remove('layersSorting');\n      dispatch(layersSortingEnd());\n    }, 100);\n    dispatch(sortLayers({\n      oldIndex,\n      newIndex\n    }));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.layersPanel, {\n      [styles.collapsed]: !layersPanelOpen\n    }),\n    \"data-test\": \"layers-panel\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.layersPanelInner\n  }, layersPanelOpen ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SortableLayersList, {\n    layers: layers,\n    onSortStart: onSortStart,\n    onSortEnd: onSortEnd,\n    useDragHandle: true\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(BasemapCard, null))) : null), /*#__PURE__*/React.createElement(LayersToggle, null));\n};\nexport default LayersPanel;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"DownloadLegend_legend__YHJfq\",\"title\":\"DownloadLegend_title__MUxpC\",\"period\":\"DownloadLegend_period__DhS7R\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport Legend from '../legend/Legend.js';\nimport styles from './styles/DownloadLegend.module.css';\nconst DownloadLegend = _ref => {\n  let {\n    layers\n  } = _ref;\n  return layers.filter(layer => layer.legend).map(layer => layer.legend).reverse().map((legend, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: styles.legend\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.title,\n    \"data-test\": \"download-legend-title\"\n  }, legend.title, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.period\n  }, legend.period)), /*#__PURE__*/React.createElement(Legend, legend)));\n};\nDownloadLegend.propTypes = {\n  layers: PropTypes.array.isRequired\n};\nexport default DownloadLegend;","import { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport log from 'loglevel';\nimport PropTypes from 'prop-types';\nimport { useMemo, useEffect } from 'react';\nimport { ALERT_CRITICAL, ALERT_MESSAGE_DYNAMIC } from '../../../constants/alerts.js';\nexport const BASEMAP_LAYER_INDEX = 0;\nconst getAlertError = message => {\n  return {\n    msg: i18n.t('Basemap could not be added: {{message}}', {\n      message,\n      nsSeparator: ';'\n    })\n  };\n};\nconst BasemapLayer = (_ref, _ref2) => {\n  let {\n    id,\n    config,\n    opacity,\n    isVisible\n  } = _ref;\n  let {\n    map,\n    isPlugin\n  } = _ref2;\n  const basemapNotFoundAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const basemapInvalidAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const basemap = useMemo(() => map.createLayer({\n    ...config,\n    id,\n    index: BASEMAP_LAYER_INDEX\n  }), [map, id, config]);\n  useEffect(() => {\n    map.addLayer(basemap).catch(errorMessage => {\n      log.error(`Basemap could not be added: ${errorMessage}`);\n      if (!isPlugin) {\n        const alertError = getAlertError(errorMessage);\n        if (errorMessage.includes('not found')) {\n          basemapNotFoundAlert.show(alertError);\n        } else {\n          basemapInvalidAlert.show(alertError);\n        }\n      }\n    });\n    return () => map.removeLayer(basemap);\n  }, [map, basemap, isPlugin]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    basemap.setOpacity(opacity);\n  }, [basemap, opacity]);\n  useEffect(() => {\n    basemap.setVisibility(isVisible);\n  }, [basemap, isVisible]);\n  return null;\n};\nBasemapLayer.contextTypes = {\n  map: PropTypes.object\n};\nBasemapLayer.propTypes = {\n  config: PropTypes.object,\n  id: PropTypes.string,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number\n};\nBasemapLayer.defaultProps = {\n  opacity: 1,\n  isVisible: true\n};\nexport default BasemapLayer;","import Point from '@mapbox/point-geometry';\nimport PropTypes from 'prop-types';\nimport { useState, useCallback, useEffect } from 'react';\nimport { GEOJSON_LAYER } from '../../constants/layers.js';\nimport { getCoordinatesBounds } from '../../util/geojson.js';\nconst layerId = 'overview-outline';\n\n// Returns a feature with the main map outline (with bearing and pitch)\nconst getMapOutline = map => {\n  const {\n    transform\n  } = map;\n  const {\n    width,\n    height\n  } = transform;\n  const upperLeft = transform.pointLocation(new Point(0, 0)).toArray();\n  const lowerLeft = transform.pointLocation(new Point(0, height)).toArray();\n  const lowerRight = transform.pointLocation(new Point(width, height)).toArray();\n  const upperRight = transform.pointLocation(new Point(width, 0)).toArray();\n  return {\n    type: 'Feature',\n    geometry: {\n      type: 'Polygon',\n      coordinates: [[upperLeft, lowerLeft, lowerRight, upperRight, upperLeft]]\n    },\n    properties: {}\n  };\n};\nconst OverviewMapOutline = _ref => {\n  let {\n    mainMap,\n    overviewMap,\n    isDark = false\n  } = _ref;\n  const [outline, setOutline] = useState(getMapOutline(mainMap));\n  const [sourceId, setSourceId] = useState();\n  const onMainMapMove = useCallback(() => {\n    setOutline(getMapOutline(mainMap));\n  }, [mainMap]);\n  useEffect(() => {\n    mainMap.on('move', onMainMapMove);\n    return () => {\n      mainMap.off('move', onMainMapMove);\n    };\n  }, [mainMap, onMainMapMove]);\n  useEffect(() => {\n    if (outline) {\n      const config = {\n        type: GEOJSON_LAYER,\n        id: layerId,\n        index: 1,\n        data: [outline],\n        style: {\n          color: 'transparent',\n          strokeColor: isDark ? 'orange' : '#333',\n          weight: 3\n        }\n      };\n      if (!sourceId) {\n        const layer = overviewMap.createLayer(config);\n        overviewMap.addLayer(layer);\n        setSourceId(layer.getId());\n      } else {\n        const source = overviewMap.getMapGL().getSource(sourceId);\n        if (source) {\n          source.setData(outline);\n        }\n      }\n\n      // Make sure outline bounds is inside overview map bounds\n      const mapBounds = overviewMap.getMapGL().getBounds();\n      const outlineBounds = getCoordinatesBounds(outline.geometry.coordinates[0]);\n\n      // If outline bounds is outside overview map bounds\n      if (!mapBounds.contains(outlineBounds[0]) || !mapBounds.contains(outlineBounds[1])) {\n        // Fit overview map to outline bounds\n        overviewMap.getMapGL().fitBounds(outlineBounds, {\n          padding: 80\n        });\n      }\n    }\n  }, [overviewMap, outline, sourceId, isDark]);\n  return null;\n};\nOverviewMapOutline.propTypes = {\n  mainMap: PropTypes.object.isRequired,\n  overviewMap: PropTypes.object.isRequired,\n  isDark: PropTypes.bool\n};\nexport default OverviewMapOutline;","// extracted by mini-css-extract-plugin\nexport default {\"overviewMap\":\"OverviewMap_overviewMap__ohPlZ\"};","import { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setDownloadConfig } from '../../actions/download.js';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport { BASEMAP_LAYER_INDEX } from '../map/layers/BasemapLayer.js';\nimport mapApi from '../map/MapApi.js';\nimport OverviewMapOutline from './OverviewMapOutline.js';\nimport styles from './styles/OverviewMap.module.css';\nconst maxHeight = 260;\nconst minHeight = 80;\nconst OverviewMap = _ref => {\n  let {\n    mainMap,\n    isSplitView,\n    resizeCount\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [overviewMap, setOverviewMap] = useState();\n  const basemap = useSelector(state => state.map.basemap);\n  const {\n    config,\n    isDark\n  } = useBasemapConfig(basemap);\n  const mapContainer = useRef();\n  const dispatch = useDispatch();\n  const onOverviewMapReady = useCallback(evt => setOverviewMap(evt.target), []);\n  const onMainMapMove = useCallback(() => {\n    if (overviewMap) {\n      const mapGl = overviewMap.getMapGL();\n      mapGl.resize();\n      mapGl.setCenter(mainMap.getCenter());\n      mapGl.setZoom(mainMap.getZoom() - (isSplitView ? 2 : 4));\n    }\n  }, [mainMap, overviewMap, isSplitView]);\n  useEffect(() => {\n    mainMap.on('move', onMainMapMove);\n    if (overviewMap) {\n      // Don't sync overview map after it is dragged by the user\n      overviewMap.getMapGL().once('drag', () => mainMap.off('move', onMainMapMove));\n    }\n    return () => {\n      mainMap.off('move', onMainMapMove);\n    };\n  }, [mainMap, overviewMap, onMainMapMove]);\n  useEffect(() => {\n    const map = mapApi({\n      attributionControl: false,\n      dragRotate: false,\n      touchZoomRotate: false,\n      pitchWithRotate: false,\n      minZoom: 0,\n      baseUrl\n    });\n    map.once('ready', onOverviewMapReady);\n    return () => {\n      map.off('ready', onOverviewMapReady);\n    };\n  }, [onOverviewMapReady, baseUrl]);\n  useEffect(() => {\n    if (overviewMap) {\n      mapContainer.current.appendChild(overviewMap.getContainer());\n    }\n  }, [overviewMap]);\n  useEffect(() => {\n    if (overviewMap && config) {\n      const basemapLayer = overviewMap.createLayer({\n        ...config,\n        index: BASEMAP_LAYER_INDEX\n      });\n      overviewMap.addLayer(basemapLayer);\n    }\n  }, [overviewMap, config]);\n  useEffect(() => {\n    if (overviewMap) {\n      onMainMapMove();\n    }\n  }, [overviewMap, onMainMapMove]);\n  useEffect(() => {\n    if (overviewMap) {\n      const mapEl = mapContainer.current;\n      mapEl.style.display = 'block';\n      mapEl.style.height = `${maxHeight}px`;\n      let mapHeight = mapEl.clientHeight;\n      if (mapHeight > maxHeight) {\n        mapHeight = maxHeight;\n      }\n      const hasSpace = mapHeight > minHeight;\n      if (hasSpace) {\n        mapEl.style.height = `${mapHeight}px`;\n        overviewMap.resize();\n      } else {\n        mapEl.style.display = 'none';\n      }\n\n      // Disable overview map checkbox if no space\n      dispatch(setDownloadConfig({\n        hasOverviewMapSpace: hasSpace\n      }));\n    }\n  }, [overviewMap, mapContainer, resizeCount, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: mapContainer,\n    className: styles.overviewMap,\n    \"data-test\": \"overview-map\"\n  }, overviewMap && /*#__PURE__*/React.createElement(OverviewMapOutline, {\n    mainMap: mainMap,\n    overviewMap: overviewMap,\n    isDark: isDark\n  }));\n};\nOverviewMap.propTypes = {\n  mainMap: PropTypes.object.isRequired,\n  isSplitView: PropTypes.bool,\n  resizeCount: PropTypes.number\n};\nexport default OverviewMap;","// extracted by mini-css-extract-plugin\nexport default {\"downloadMapInfo\":\"DownloadMapInfo_downloadMapInfo__R8XHq\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useWindowDimensions } from '../WindowDimensionsProvider.js';\nimport DownloadLegend from './DownloadLegend.js';\nimport OverviewMap from './OverviewMap.js';\nimport styles from './styles/DownloadMapInfo.module.css';\nconst DownloadMapInfo = _ref => {\n  let {\n    map,\n    isSplitView\n  } = _ref;\n  const [resizeCount, setResizeCount] = useState(0);\n  const {\n    height\n  } = useWindowDimensions();\n  const {\n    showName,\n    showDescription,\n    showLegend,\n    showInLegend,\n    showOverviewMap\n  } = useSelector(state => state.download);\n  const {\n    mapViews,\n    displayName: name,\n    displayDescription: description\n  } = useSelector(state => state.map);\n  useEffect(() => {\n    setResizeCount(count => count + 1);\n  }, [showName, showDescription, showInLegend, height]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.downloadMapInfo),\n    \"data-test\": \"download-map-info\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, showName && name && /*#__PURE__*/React.createElement(\"h1\", null, name), showDescription && description && /*#__PURE__*/React.createElement(\"p\", null, description), showLegend && /*#__PURE__*/React.createElement(DownloadLegend, {\n    layers: mapViews.filter(l => showInLegend.includes(l.id))\n  })), showOverviewMap && /*#__PURE__*/React.createElement(OverviewMap, {\n    mainMap: map,\n    isSplitView: isSplitView,\n    resizeCount: resizeCount\n  }));\n};\nDownloadMapInfo.propTypes = {\n  map: PropTypes.object.isRequired,\n  isSplitView: PropTypes.bool\n};\nexport default DownloadMapInfo;","// extracted by mini-css-extract-plugin\nexport default {\"northArrow\":\"NorthArrow_northArrow__PGidx\",\"topleft\":\"NorthArrow_topleft__uCzk6\",\"topright\":\"NorthArrow_topright__e3xeW\",\"bottomleft\":\"NorthArrow_bottomleft__1Abwx\",\"bottomright\":\"NorthArrow_bottomright__0mcJB\",\"downloadMapInfoOpen\":\"NorthArrow_downloadMapInfoOpen__4mYyN\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport styles from './styles/NorthArrow.module.css';\nconst NorthArrow = _ref => {\n  let {\n    map,\n    downloadMapInfoOpen,\n    width = 90,\n    height = 90,\n    northLetter = 'N'\n  } = _ref;\n  const [rotation, setRotation] = useState(map.getBearing());\n  const position = useSelector(state => state.download.northArrowPosition);\n  const basemap = useSelector(state => state.map.basemap);\n  const {\n    isDark\n  } = useBasemapConfig(basemap);\n  const color = isDark ? 'white' : 'black';\n  const onMapRotate = useCallback(evt => {\n    setRotation(-evt.target.getBearing());\n  }, []);\n  useEffect(() => {\n    map.on('rotate', onMapRotate);\n    return () => {\n      map.on('rotate', onMapRotate);\n    };\n  }, [map, onMapRotate]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.northArrow, styles[position], {\n      [styles.downloadMapInfoOpen]: downloadMapInfoOpen\n    }),\n    \"data-test\": \"north-arrow\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"24\",\n    cy: \"24\",\n    r: \"8\",\n    stroke: color,\n    strokeWidth: \"2\"\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    x: \"50%\",\n    y: \"50%\",\n    dominantBaseline: \"central\",\n    textAnchor: \"middle\",\n    fill: color\n  }, northLetter), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M24.4472 0.776393C24.3625 0.607001 24.1893 0.5 23.9999 0.5C23.8106 0.5 23.6374 0.607001 23.5527 0.776393L16.2178 15.4463C16.1098 15.6623 16.5106 15.9397 16.691 15.7792C18.6342 14.0503 21.1944 13 24 13C26.8055 13 29.3657 14.0503 31.3089 15.7792C31.4893 15.9396 31.8901 15.6623 31.7821 15.4463L24.4472 0.776393Z\",\n    fill: color,\n    transform: `rotate(${rotation}, 24, 24)`\n  })));\n};\nNorthArrow.propTypes = {\n  downloadMapInfoOpen: PropTypes.bool.isRequired,\n  map: PropTypes.object.isRequired,\n  height: PropTypes.number,\n  northLetter: PropTypes.string,\n  width: PropTypes.number\n};\nexport default NorthArrow;","// extracted by mini-css-extract-plugin\nexport default {\"mapName\":\"MapName_mapName__xDOCz\",\"name\":\"MapName_name__PyQgF map_box__WtUb7\"};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport styles from './styles/MapName.module.css';\nconst MapName = () => {\n  const name = useSelector(state => state.map.displayName);\n  const downloadMode = useSelector(state => state.ui.downloadMode);\n  return !downloadMode && name ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mapName,\n    \"data-test\": \"map-name\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles.name} dhis2-maps-title`\n  }, name)) : null;\n};\nexport default MapName;","export const mapControls = [{\n  type: 'zoom'\n}, {\n  type: 'fullscreen'\n}, {\n  type: 'fitBounds'\n}, {\n  type: 'scale',\n  imperial: false\n}, {\n  type: 'search'\n}, {\n  type: 'measure'\n}];\nexport const splitViewControls = [{\n  type: 'zoom'\n}, {\n  type: 'fullscreen'\n}, {\n  type: 'fitBounds'\n}, {\n  type: 'attribution',\n  prefix: false\n}];\nexport const pluginControls = [{\n  type: 'zoom'\n}];","import { mapControls, splitViewControls, pluginControls } from '../constants/mapControls.js';\n\n// Returns the map controls shown on a map\nexport const getMapControls = (isPlugin, isSplitView, controls) => {\n  let ctrls;\n  if (isPlugin) {\n    ctrls = controls || pluginControls;\n  } else {\n    ctrls = controls || isSplitView ? splitViewControls : mapControls;\n  }\n  return isSplitView ? ctrls.map(c => ({\n    ...c,\n    isSplitView\n  })) : ctrls;\n};","// extracted by mini-css-extract-plugin\nexport default {\"alert\":\"Alert_alert__-zGVv\"};","import { AlertBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Alert.module.css';\nconst Alert = _ref => {\n  let {\n    message,\n    critical,\n    warning,\n    onHidden\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.alert\n  }, /*#__PURE__*/React.createElement(AlertBar, {\n    critical: critical,\n    warning: warning,\n    duration: 10000,\n    onHidden: onHidden\n  }, message));\n};\nAlert.propTypes = {\n  message: PropTypes.string.isRequired,\n  onHidden: PropTypes.func.isRequired,\n  critical: PropTypes.string.boolean,\n  warning: PropTypes.string.boolean\n};\nexport default Alert;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport log from 'loglevel';\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { RENDERING_STRATEGY_SPLIT_BY_PERIOD, PADDING_DEFAULT, DURATION_DEFAULT } from '../../../constants/layers.js';\nclass Layer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {});\n    // Called when a map popup is closed\n    _defineProperty(this, \"onPopupClose\", () => {\n      this.setState({\n        popup: null\n      });\n    });\n    this.setPeriod();\n    this.createLayer();\n  }\n  componentDidUpdate(prevProps) {\n    let prevState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      id,\n      data,\n      index,\n      opacity,\n      isVisible,\n      editCounter,\n      dataFilters,\n      feature\n    } = this.props;\n    const {\n      period\n    } = this.state;\n    const {\n      period: prevPeriod\n    } = prevState || {};\n    const isEdited = editCounter !== prevProps.editCounter;\n\n    // Create new map if new id of editCounter is increased\n    if (id !== prevProps.id || data !== prevProps.data || (period === null || period === void 0 ? void 0 : period.id) !== (prevPeriod === null || prevPeriod === void 0 ? void 0 : prevPeriod.id) || dataFilters !== prevProps.dataFilters || isEdited) {\n      // Reset period if edited\n      if (isEdited) {\n        this.setPeriod(this.updateLayer.bind(this));\n      } else {\n        this.updateLayer(dataFilters !== prevProps.dataFilters);\n      }\n    }\n    if (index !== undefined && index !== prevProps.index) {\n      this.setLayerOrder();\n    }\n    if (opacity !== prevProps.opacity) {\n      this.setLayerOpacity();\n    }\n    if (isVisible !== prevProps.isVisible) {\n      this.setLayerVisibility();\n    }\n    if (feature !== prevProps.feature) {\n      this.highlightFeature(feature);\n    }\n  }\n  componentWillUnmount() {\n    this.removeLayer();\n  }\n\n  // Create new layer from config object (override in subclasses)\n  async createLayer() {\n    const {\n      id,\n      index = 0,\n      config,\n      opacity,\n      isVisible\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    this.layer = map.createLayer({\n      ...config,\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n    await map.addLayer(this.layer);\n  }\n  async updateLayer() {\n    await this.removeLayer();\n    await this.createLayer(true);\n    this.setLayerOrder();\n    this.setLayerVisibility();\n  }\n\n  // Override in subclass if needed\n  setPeriod(callback) {\n    if (callback) {\n      callback();\n    }\n  }\n  setLayerVisibility() {\n    this.layer.setVisibility(this.props.isVisible);\n  }\n  setLayerOpacity() {\n    this.layer.setOpacity(this.props.opacity);\n  }\n  setLayerOrder() {\n    if (this.layer) {\n      this.layer.setIndex(this.props.index);\n    }\n  }\n\n  // Fit map to layer bounds\n  fitBounds() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      map\n    } = this.context;\n    const {\n      fitToAllLayers = false,\n      padding = {},\n      duration = DURATION_DEFAULT\n    } = options;\n    if (this.layer.getBounds) {\n      map.fitBounds(fitToAllLayers ? map.getLayersBounds() : this.layer.getBounds(), {\n        padding: {\n          ...PADDING_DEFAULT,\n          ...padding\n        },\n        duration: duration,\n        essential: true,\n        bearing: map.getMapGL().getBearing()\n      });\n    }\n  }\n\n  // Fit map to layer bounds once (when first created)\n  fitBoundsOnce(options) {\n    if (!this.isZoomed || this.context.map.getZoom() === undefined) {\n      this.fitBounds({\n        ...options,\n        fitToAllLayers: !this.props.editCounter\n      });\n      this.isZoomed = true;\n    }\n  }\n  async removeLayer() {\n    if (this.layer) {\n      const {\n        map\n      } = this.context;\n      this.layer.off('contextmenu', this.onFeatureRightClick, this);\n      await map.removeLayer(this.layer);\n      delete this.layer;\n    }\n  }\n  highlightFeature(feature) {\n    if (this.layer.highlight) {\n      this.layer.highlight(feature ? feature.id : null);\n    }\n  }\n  render() {\n    return null;\n  }\n  onFeatureRightClick(evt) {\n    const [x, y] = evt.position;\n    const layerConfig = {\n      ...this.props\n    };\n    const {\n      id: layerId,\n      layer: layerType,\n      renderingStrategy\n    } = layerConfig;\n    const {\n      map\n    } = this.context;\n    const container = map.getContainer();\n    const {\n      left,\n      top\n    } = container.getBoundingClientRect();\n    const isSplitView = renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD;\n    this.props.openContextMenu({\n      ...evt,\n      position: [x, y],\n      offset: [left, top],\n      layerConfig,\n      layerId,\n      layerType,\n      isSplitView,\n      map,\n      container: isSplitView ? container.parentNode.parentNode : container\n    });\n    this.setState({\n      popup: null\n    });\n  }\n  onError(error) {\n    const message = error.message || error;\n    if (!this.context.isPlugin) {\n      this.setState({\n        error: message\n      });\n    } else {\n      log.error(message);\n    }\n  }\n  onErrorHidden() {\n    this.setState({\n      error: null\n    });\n  }\n}\n_defineProperty(Layer, \"contextTypes\", {\n  map: PropTypes.object,\n  isPlugin: PropTypes.bool\n});\n_defineProperty(Layer, \"propTypes\", {\n  id: PropTypes.string.isRequired,\n  config: PropTypes.object,\n  data: PropTypes.array,\n  dataFilters: PropTypes.object,\n  editCounter: PropTypes.number,\n  feature: PropTypes.object,\n  index: PropTypes.number,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number,\n  openContextMenu: PropTypes.func\n});\n_defineProperty(Layer, \"defaultProps\", {\n  opacity: 1,\n  isVisible: true\n});\nexport default Layer;","import i18n from '@dhis2/d2-i18n';\n\n// Thematic layer\nexport const getThematicAggregationTypes = () => [{\n  id: 'DEFAULT',\n  name: i18n.t('By data element')\n}, {\n  id: 'COUNT',\n  name: i18n.t('Count')\n}, {\n  id: 'AVERAGE',\n  name: i18n.t('Average')\n}, {\n  id: 'SUM',\n  name: i18n.t('Sum')\n}, {\n  id: 'STDDEV',\n  name: i18n.t('Standard deviation')\n}, {\n  id: 'VARIANCE',\n  name: i18n.t('Variance')\n}, {\n  id: 'MIN',\n  name: i18n.t('Min')\n}, {\n  id: 'MAX',\n  name: i18n.t('Max')\n}];\n\n// Earth Engine layer\nexport const getEarthEngineStatisticTypes = () => [{\n  id: 'percentage',\n  name: i18n.t('Percentage')\n}, {\n  id: 'hectares',\n  name: i18n.t('Hectares')\n}, {\n  id: 'acres',\n  name: i18n.t('Acres')\n}];\n\n// Earth Engine layer\nexport const getEarthEngineAggregationTypes = filter => {\n  const types = [{\n    id: 'count',\n    name: i18n.t('Count')\n  }, {\n    id: 'min',\n    name: i18n.t('Min')\n  }, {\n    id: 'max',\n    name: i18n.t('Max')\n  }, {\n    id: 'mean',\n    name: i18n.t('Mean')\n  }, {\n    id: 'median',\n    name: i18n.t('Median')\n  }, {\n    id: 'sum',\n    name: i18n.t('Sum')\n  }, {\n    id: 'stdDev',\n    name: i18n.t('Standard deviation'),\n    shortName: i18n.t('Std dev')\n  }, {\n    id: 'variance',\n    name: i18n.t('Variance')\n  }];\n  return filter ? types.filter(_ref => {\n    let {\n      id\n    } = _ref;\n    return filter.includes(id);\n  }) : types;\n};\nexport const getEarthEngineStatisticType = id => (getEarthEngineStatisticTypes().find(t => t.id === id) || {}).name;\nexport const getEarthEngineAggregationType = id => {\n  const {\n    name,\n    shortName\n  } = getEarthEngineAggregationTypes().find(t => t.id === id) || {};\n  return shortName || name;\n};","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitButton\":\"OrgUnitButton_orgUnitButton__cpD5v\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport styles from './styles/OrgUnitButton.module.css';\n\n/*\n *  Displays a button to open the org unit profile\n */\nconst OrgUnitButton = _ref => {\n  let {\n    id,\n    orgUnitProfile,\n    setOrgUnitProfile\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitButton\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    disabled: id === orgUnitProfile,\n    onClick: () => setOrgUnitProfile(id)\n  }, i18n.t('View profile')));\n};\nOrgUnitButton.propTypes = {\n  id: PropTypes.string.isRequired,\n  setOrgUnitProfile: PropTypes.func.isRequired,\n  orgUnitProfile: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    orgUnitProfile\n  } = _ref2;\n  return {\n    orgUnitProfile\n  };\n}, {\n  setOrgUnitProfile\n})(OrgUnitButton);","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nimport OrgUnitButton from '../orgunits/OrgUnitButton.js';\nimport './styles/MaplibrePopup.css';\nconst Popup = (props, context) => {\n  const {\n    className = '',\n    coordinates,\n    orgUnitId,\n    onClose,\n    children\n  } = props;\n  const {\n    map,\n    isPlugin\n  } = context;\n  const container = useMemo(() => document.createElement('div'), []);\n  useKeyDown('Escape', () => map.closePopup());\n\n  // Create and open popup on map\n  useEffect(() => {\n    container.className = className;\n    map.openPopup(container, coordinates, onClose);\n  }, [map, container, className, coordinates, onClose]);\n\n  // Close popup if component is unmounted\n  useEffect(() => {\n    return () => map.closePopup();\n  }, [map]);\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, children, isPlugin === false && orgUnitId && /*#__PURE__*/React.createElement(OrgUnitButton, {\n    id: orgUnitId\n  })), container);\n};\nPopup.contextTypes = {\n  map: PropTypes.object,\n  isPlugin: PropTypes.bool\n};\nPopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string\n};\nexport default Popup;","// extracted by mini-css-extract-plugin\nexport default {\"eventPopup\":\"Popup_eventPopup__WbR05\",\"trackedEntityPopup\":\"Popup_trackedEntityPopup__j3P3g\",\"thematicPopup\":\"Popup_thematicPopup__B7l58\",\"facilityPopup\":\"Popup_facilityPopup__hnIRb\",\"orgUnitPopup\":\"Popup_orgUnitPopup__il0Td\",\"earthEnginePopup\":\"Popup_earthEnginePopup__gy39D\",\"title\":\"Popup_title__Om4gj\",\"divider\":\"Popup_divider__g01nD\",\"loading\":\"Popup_loading__l95rx\"};","// extracted by mini-css-extract-plugin\nexport default {\"table\":\"EarthEnginePopup_table__xRHIs\",\"group\":\"EarthEnginePopup_group__13iuJ\",\"unit\":\"EarthEnginePopup_unit__c7mBN\",\"classes\":\"EarthEnginePopup_classes__CMWBe\"};","import i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getEarthEngineAggregationType } from '../../../../constants/aggregationTypes.js';\nimport { hasClasses } from '../../../../util/earthEngine.js';\nimport { getRoundToPrecisionFn, getPrecision } from '../../../../util/numbers.js';\nimport Popup from '../../Popup.js';\nimport styles from '../styles/Popup.module.css';\nimport earthEngineStyles from './styles/EarthEnginePopup.module.css';\nconst EarthEnginePopup = props => {\n  const {\n    coordinates,\n    feature,\n    data,\n    legend,\n    valueType,\n    onClose\n  } = props;\n  const {\n    id,\n    name\n  } = feature.properties;\n  const {\n    title,\n    period = '',\n    unit,\n    items = [],\n    groups\n  } = legend;\n  const values = typeof data === 'object' ? data[id] : null;\n  const classes = hasClasses(valueType);\n  const isPercentage = valueType === 'percentage';\n  const isLoading = data === 'loading';\n  let table = null;\n  if (values) {\n    if (classes) {\n      const valueFormat = getRoundToPrecisionFn(isPercentage ? 2 : 0);\n      table = /*#__PURE__*/React.createElement(\"table\", {\n        className: earthEngineStyles.table\n      }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n        colSpan: \"2\"\n      }, title, \" \", period), /*#__PURE__*/React.createElement(\"th\", null, valueType))), /*#__PURE__*/React.createElement(\"tbody\", null, items.filter(i => values[i.value]).sort((a, b) => values[b.value] - values[a.value]).map(_ref => {\n        let {\n          value,\n          name,\n          color\n        } = _ref;\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: value,\n          className: earthEngineStyles.classes\n        }, /*#__PURE__*/React.createElement(\"th\", {\n          style: {\n            backgroundColor: color\n          }\n        }), /*#__PURE__*/React.createElement(\"th\", null, name), /*#__PURE__*/React.createElement(\"td\", null, valueFormat(values[value]), isPercentage ? '%' : ''));\n      })));\n    } else {\n      const onlySum = valueType.length === 1 && valueType[0] === 'sum';\n\n      // Returns the value key for a type/group\n      const getValueKey = (type, group) => groups.length === 1 ? type : valueType.length === 1 ? group : `${group}_${type}`;\n\n      // Returns the value format (precision) for an aggregation type\n      const getValueFormat = type => getRoundToPrecisionFn(getPrecision(Object.values(data).map(ou => Object.keys(ou).filter(key => key.includes(type)).map(key => ou[key])).flat()));\n\n      // Create value format function for each aggregation type\n      const typeValueFormat = valueType.reduce((types, type) => {\n        types[type] = getValueFormat(type);\n        return types;\n      }, {});\n      const header = /*#__PURE__*/React.createElement(\"caption\", null, title, \" \", period, !onlySum && /*#__PURE__*/React.createElement(\"div\", {\n        className: earthEngineStyles.unit\n      }, unit));\n      if (groups) {\n        table = /*#__PURE__*/React.createElement(\"table\", {\n          className: earthEngineStyles.table\n        }, header, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, \"Group\"), valueType.map(type => /*#__PURE__*/React.createElement(\"th\", {\n          key: type\n        }, getEarthEngineAggregationType(type))))), /*#__PURE__*/React.createElement(\"tbody\", null, groups.map(_ref2 => {\n          let {\n            id,\n            name\n          } = _ref2;\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            key: id\n          }, /*#__PURE__*/React.createElement(\"th\", null, name), valueType.map(type => /*#__PURE__*/React.createElement(\"td\", {\n            key: type\n          }, typeValueFormat[type](values[getValueKey(type, id)]))));\n        })), groups.length > 1 && /*#__PURE__*/React.createElement(\"tfoot\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('All groups')), valueType.map(type => /*#__PURE__*/React.createElement(\"td\", {\n          key: type\n        }, typeValueFormat[type](values[type]))))));\n      } else {\n        table = /*#__PURE__*/React.createElement(\"table\", {\n          className: earthEngineStyles.table\n        }, header, /*#__PURE__*/React.createElement(\"tbody\", null, valueType.map(type => /*#__PURE__*/React.createElement(\"tr\", {\n          key: type\n        }, /*#__PURE__*/React.createElement(\"th\", null, getEarthEngineAggregationType(type), \":\"), /*#__PURE__*/React.createElement(\"td\", null, typeValueFormat[type](values[type]))))));\n      }\n    }\n  }\n  return /*#__PURE__*/React.createElement(Popup, {\n    coordinates: coordinates,\n    orgUnitId: id,\n    onClose: onClose,\n    className: styles.earthEnginePopup\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title\n  }, name), table, isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), i18n.t('Loading data')));\n};\nEarthEnginePopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  feature: PropTypes.object.isRequired,\n  legend: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  data: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  valueType: PropTypes.oneOfType([PropTypes.string, PropTypes.array])\n};\nexport default EarthEnginePopup;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { EARTH_ENGINE_LAYER } from '../../../../constants/layers.js';\nimport { getAuthTokenFn } from '../../../../util/earthEngine.js';\nimport { filterData } from '../../../../util/filter.js';\nimport MapLoadingMask from '../../MapLoadingMask.js';\nimport Alert from '../Alert.js';\nimport Layer from '../Layer.js';\nimport EarthEnginePopup from './EarthEnginePopup.js';\nexport default class EarthEngineLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      isLoading: true,\n      popup: null,\n      aggregations: null,\n      error: null\n    });\n    _defineProperty(this, \"updateLayer\", async filterChange => {\n      if (filterChange) {\n        this.applyFilter();\n      } else {\n        this.clearAggregations();\n        await this.removeLayer();\n        await this.createLayer(true);\n        this.setLayerOrder();\n      }\n    });\n  }\n  componentDidUpdate(prev) {\n    super.componentDidUpdate(prev);\n    const {\n      coordinate\n    } = this.props;\n    if (coordinate && coordinate !== prev.coordinate) {\n      try {\n        this.layer.showValue({\n          lng: coordinate[0],\n          lat: coordinate[1]\n        });\n      } catch (error) {\n        this.setState({\n          error: i18n.t('Google Earth Engine failed. Is the service configured for this DHIS2 instance?')\n        });\n      }\n    }\n  }\n  async createLayer(isUpdate) {\n    const {\n      id,\n      index,\n      format,\n      opacity,\n      isVisible,\n      datasetId,\n      band,\n      maskOperator,\n      attribution,\n      filter,\n      methods,\n      mosaic,\n      name,\n      unit,\n      legend,\n      value,\n      resolution,\n      projection,\n      style,\n      popup,\n      data,\n      aggregationType,\n      areaRadius,\n      tileScale,\n      unmaskAggregation,\n      engine\n    } = this.props;\n    const {\n      map,\n      isPlugin\n    } = this.context;\n    const config = {\n      type: EARTH_ENGINE_LAYER,\n      id,\n      index,\n      format,\n      opacity,\n      isVisible,\n      datasetId,\n      band,\n      maskOperator,\n      attribution,\n      filter,\n      methods,\n      mosaic,\n      name,\n      unit,\n      value,\n      noValue: i18n.t('no value'),\n      legend: legend.items,\n      resolution,\n      projection,\n      data,\n      aggregationType,\n      tileScale,\n      unmaskAggregation,\n      preload: !isPlugin && this.hasAggregations(),\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this),\n      onLoad: this.onLoad.bind(this)\n    };\n    if (style) {\n      config.style = style;\n    }\n    if (areaRadius) {\n      config.buffer = areaRadius;\n    }\n    if (popup) {\n      config.popup = popup;\n    }\n    if (isUpdate) {\n      this.setState({\n        isLoading: true\n      });\n    }\n    config.getAuthToken = getAuthTokenFn(engine);\n    try {\n      this.layer = map.createLayer(config);\n      await map.addLayer(this.layer);\n    } catch (error) {\n      this.onError(error);\n    }\n    this.fitBoundsOnce();\n  }\n  hasAggregations() {\n    const {\n      data,\n      aggregationType\n    } = this.props;\n    return data && (typeof aggregationType === 'string' || Array.isArray(aggregationType) && aggregationType.length);\n  }\n  getAggregations() {\n    if (this.hasAggregations() && !this.state.aggregations) {\n      this.setState({\n        aggregations: 'loading'\n      });\n      this.layer.getAggregations().then(this.addAggregationValues.bind(this)).catch(this.onError.bind(this));\n    }\n  }\n  addAggregationValues(aggregations) {\n    const {\n      id,\n      data,\n      setAggregations\n    } = this.props;\n\n    // Make aggregations available for data table and download\n    // setAggregations is not available in map plugin\n    if (setAggregations) {\n      setAggregations({\n        [id]: aggregations\n      });\n    }\n\n    // Make aggregations available for filtering and popup\n    this.setState({\n      data: data.map(f => ({\n        ...f,\n        properties: {\n          ...f.properties,\n          ...aggregations[f.id]\n        }\n      })),\n      aggregations\n    });\n  }\n  clearAggregations() {\n    if (this.hasAggregations()) {\n      const {\n        id,\n        setAggregations\n      } = this.props;\n      this.setState({\n        aggregations: undefined\n      });\n      if (setAggregations) {\n        setAggregations({\n          [id]: undefined\n        });\n      }\n    }\n  }\n  applyFilter() {\n    const {\n      data,\n      dataFilters\n    } = this.props;\n    const filteredData = filterData(this.state.data || data, dataFilters).map(f => f.id);\n    if (this.layer && this.layer.filter) {\n      this.layer.filter(filteredData);\n    }\n  }\n  render() {\n    const {\n      legend,\n      aggregationType\n    } = this.props;\n    const {\n      isLoading,\n      popup,\n      aggregations,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, isLoading && /*#__PURE__*/React.createElement(MapLoadingMask, null), error && /*#__PURE__*/React.createElement(Alert, {\n      critical: true,\n      message: error,\n      onHidden: () => this.setState({\n        error: null\n      })\n    }), popup && /*#__PURE__*/React.createElement(EarthEnginePopup, _extends({\n      data: aggregations || {},\n      legend: legend,\n      valueType: aggregationType,\n      onClose: this.onPopupClose\n    }, popup)));\n  }\n  onFeatureClick(evt) {\n    this.getAggregations();\n    this.setState({\n      popup: evt\n    });\n  }\n  onLoad() {\n    this.setState({\n      isLoading: false,\n      popup: null\n    });\n    if (!this.context.isPlugin) {\n      this.getAggregations();\n    }\n  }\n  onError(error) {\n    let message = error.message || error;\n    if (message.includes('memory limit exceeded') && this.props.error) {\n      message = this.props.error;\n    }\n    this.setState({\n      error: message,\n      isLoading: false,\n      aggregations: 'error'\n    });\n  }\n}","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { EVENT_ID_FIELD } from '../../../util/geojson.js';\nimport { formatDatetime, formatCoordinate, formatValueForDisplay } from '../../../util/helpers.js';\nimport { ORG_UNIT_QUERY } from '../../../util/orgUnits.js';\nimport Popup from '../Popup.js';\nimport styles from './styles/Popup.module.css';\nconst EVENTS_QUERY = {\n  events: {\n    resource: 'tracker/events',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }\n  }\n};\nconst getDataRows = _ref2 => {\n  let {\n    displayItems,\n    dataValues\n  } = _ref2;\n  const dataRows = [];\n\n  // Include rows for each data item used for styling and displayInReport\n  displayItems.forEach(_ref3 => {\n    let {\n      id,\n      name,\n      valueType,\n      options\n    } = _ref3;\n    const {\n      value\n    } = dataValues.find(d => d.dataElement === id) || {};\n    const formattedValue = formatValueForDisplay({\n      value,\n      valueType,\n      options\n    });\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: id\n    }, /*#__PURE__*/React.createElement(\"th\", null, name), /*#__PURE__*/React.createElement(\"td\", null, formattedValue)));\n  });\n  if (dataRows.length) {\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: \"divider\",\n      className: styles.divider\n    }));\n  }\n  return dataRows;\n};\n\n// Will display a popup for an event feature\nconst EventPopup = _ref4 => {\n  let {\n    coordinates,\n    feature,\n    styleDataItem,\n    nameProperty,\n    displayItems,\n    eventCoordinateFieldName,\n    onClose\n  } = _ref4;\n  const [orgUnit, setOrgUnit] = useState();\n  const {\n    refetch: refetchOrgUnit,\n    fetching: fetchingOrgUnit\n  } = useDataQuery(ORG_UNIT_QUERY, {\n    lazy: true\n  });\n  const {\n    error: errorEvent,\n    data: dataEvent,\n    refetch: refetchEvent,\n    fetching: fetchingEvent\n  } = useDataQuery(EVENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    const fetchEventandOU = async () => {\n      var _resultEvent$events;\n      const resultEvent = await refetchEvent({\n        id: feature.properties.id || feature.properties[EVENT_ID_FIELD]\n      });\n      const idOrgUnit = resultEvent === null || resultEvent === void 0 ? void 0 : (_resultEvent$events = resultEvent.events) === null || _resultEvent$events === void 0 ? void 0 : _resultEvent$events.orgUnit;\n      if (idOrgUnit) {\n        var _resultOrgUnit$orgUni;\n        const resultOrgUnit = await refetchOrgUnit({\n          id: idOrgUnit,\n          nameProperty\n        });\n        const nameOrgUnit = resultOrgUnit === null || resultOrgUnit === void 0 ? void 0 : (_resultOrgUnit$orgUni = resultOrgUnit.orgUnit) === null || _resultOrgUnit$orgUni === void 0 ? void 0 : _resultOrgUnit$orgUni.name;\n        setOrgUnit(nameOrgUnit);\n      }\n    };\n    fetchEventandOU();\n  }, [feature, nameProperty, refetchEvent, refetchOrgUnit]);\n  const {\n    type,\n    coordinates: coord\n  } = feature.geometry;\n  const {\n    dataValues = [],\n    occurredAt\n  } = (dataEvent === null || dataEvent === void 0 ? void 0 : dataEvent.events) || {};\n  const dataValueIndex = dataValues.findIndex(d => d.dataElement === (styleDataItem === null || styleDataItem === void 0 ? void 0 : styleDataItem.id));\n  if (dataValueIndex !== -1) {\n    dataValues[dataValueIndex] = {\n      dataElement: styleDataItem === null || styleDataItem === void 0 ? void 0 : styleDataItem.id,\n      value: feature.properties.value\n    };\n  } else {\n    dataValues.push({\n      dataElement: styleDataItem === null || styleDataItem === void 0 ? void 0 : styleDataItem.id,\n      value: feature.properties.value\n    });\n  }\n  return /*#__PURE__*/React.createElement(Popup, {\n    coordinates: coordinates,\n    onClose: onClose,\n    className: styles.eventPopup\n  }, errorEvent && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, i18n.t('Could not retrieve event data')), /*#__PURE__*/React.createElement(\"tr\", {\n    key: \"divider\",\n    className: styles.divider\n  }))), !fetchingEvent && !fetchingOrgUnit && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, (dataEvent === null || dataEvent === void 0 ? void 0 : dataEvent.events) && getDataRows({\n    displayItems,\n    dataValues\n  }), type === 'Point' && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, eventCoordinateFieldName || i18n.t('Event location')), /*#__PURE__*/React.createElement(\"td\", null, formatCoordinate(coord))), orgUnit && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Organisation unit')), /*#__PURE__*/React.createElement(\"td\", null, orgUnit)), occurredAt && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Event time')), /*#__PURE__*/React.createElement(\"td\", null, formatDatetime(occurredAt))))));\n};\nEventPopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  displayItems: PropTypes.array.isRequired,\n  feature: PropTypes.object.isRequired,\n  nameProperty: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  eventCoordinateFieldName: PropTypes.string,\n  styleDataItem: PropTypes.object\n};\nexport default EventPopup;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { Analytics } from '@dhis2/analytics';\nimport React from 'react';\nimport { EVENT_COLOR, EVENT_RADIUS } from '../../../constants/layers.js';\nimport { getContrastColor } from '../../../util/colors.js';\nimport { loadEventCoordinateFieldName } from '../../../util/coordinatesName.js';\nimport { getAnalyticsRequest, EVENT_PROGRAM_STAGE_DATA_ELEMENTS_QUERY, EVENT_PROGRAM_ATTRIBUTES_QUERY } from '../../../util/event.js';\nimport { filterData } from '../../../util/filter.js';\nimport { formatCount } from '../../../util/numbers.js';\nimport { OPTION_SET_QUERY } from '../../../util/requests.js';\nimport EventPopup from './EventPopup.js';\nimport Layer from './Layer.js';\nclass EventLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"clusterCount\", 0);\n    _defineProperty(this, \"state\", {\n      popup: null,\n      displayItems: null,\n      eventCoordinateFieldName: null\n    });\n    _defineProperty(this, \"onPopupClose\", () => {\n      this.setState({\n        popup: null\n      });\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      bounds,\n      data,\n      engine,\n      eventClustering,\n      eventCoordinateField,\n      eventPointColor,\n      eventPointRadius,\n      nameProperty,\n      program,\n      programStage,\n      serverCluster,\n      areaRadius,\n      styleDataItem,\n      legend,\n      dataFilters\n    } = this.props;\n    const analyticsEngine = Analytics.getAnalytics(engine);\n    const filteredData = filterData(data, dataFilters);\n\n    // Some older favorites don't have a valid color code\n    const color = eventPointColor && eventPointColor.charAt(0) !== '#' ? '#' + eventPointColor : eventPointColor;\n    const fillColor = color || EVENT_COLOR;\n    const strokeColor = !styleDataItem ? getContrastColor(fillColor) : undefined;\n    const countColor = strokeColor;\n    const radius = eventPointRadius || EVENT_RADIUS;\n    const map = this.context.map;\n    let eventRequest;\n\n    // Default props = no cluster\n    const config = {\n      type: 'events',\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      fillColor,\n      strokeColor,\n      countColor,\n      radius,\n      onClick: this.onEventClick.bind(this)\n    };\n    if (eventClustering) {\n      if (serverCluster) {\n        config.type = 'serverCluster';\n        config.bounds = bounds;\n        config.load = async (params, callback) => {\n          eventRequest = eventRequest || (await getAnalyticsRequest(this.props, {\n            analyticsEngine,\n            nameProperty,\n            engine\n          }));\n          eventRequest = eventRequest.withBbox(params.bbox).withClusterSize(params.clusterSize).withIncludeClusterPoints(params.includeClusterPoints);\n          const clusterData = await analyticsEngine.events.getCluster(eventRequest);\n          callback(params.tileId, this.toGeoJson(clusterData));\n        };\n      } else {\n        config.clusterPane = id;\n        if (styleDataItem && legend) {\n          config.type = 'donutCluster';\n          config.groups = legend.items;\n        } else {\n          config.type = 'clientCluster';\n        }\n      }\n    } else if (areaRadius) {\n      config.buffer = areaRadius;\n      config.bufferStyle = {\n        color: color || EVENT_COLOR,\n        weight: 1,\n        opacity: 0.2,\n        fillOpacity: 0.1\n      };\n    }\n    if (program && programStage) {\n      this.loadDisplayItems({\n        engine,\n        nameProperty,\n        styleDataItem,\n        program,\n        programStage,\n        eventCoordinateField\n      });\n    }\n\n    // Create and add event layer based on config object\n    this.layer = map.createLayer(config);\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  render() {\n    const {\n      styleDataItem,\n      nameProperty\n    } = this.props;\n    const {\n      popup,\n      displayItems,\n      eventCoordinateFieldName\n    } = this.state;\n    return popup && displayItems ? /*#__PURE__*/React.createElement(EventPopup, _extends({}, popup, {\n      styleDataItem: styleDataItem,\n      nameProperty: nameProperty,\n      displayItems: displayItems,\n      eventCoordinateFieldName: eventCoordinateFieldName,\n      onClose: this.onPopupClose\n    })) : null;\n  }\n  onEventClick(_ref) {\n    let {\n      feature,\n      coordinates\n    } = _ref;\n    this.setState({\n      popup: {\n        feature,\n        coordinates\n      }\n    });\n  }\n  // Convert server cluster response to GeoJSON\n  toGeoJson(data) {\n    const header = {};\n    const features = [];\n\n    // Convert headers to object for easier lookup\n    data.headers.forEach((h, i) => header[h.name] = i);\n    if (Array.isArray(data.rows)) {\n      data.rows.forEach(row => {\n        const extent = row[header.extent].match(/([-\\d.]+)/g);\n        const count = parseInt(row[header.count], 10);\n        const clusterId = ++this.clusterCount;\n        features.push({\n          type: 'Feature',\n          id: clusterId,\n          geometry: JSON.parse(row[header.center]),\n          properties: {\n            cluster: count > 1,\n            cluster_id: clusterId,\n            point_count: count,\n            point_count_abbreviated: formatCount(count),\n            bounds: [[extent[0], extent[1]], [extent[2], extent[3]]],\n            id: row[header.points]\n          }\n        });\n      });\n    }\n    return features;\n  }\n\n  // Loads the data items for a program stage to display in popup\n  async loadDisplayItems(_ref2) {\n    var _programStageResponse;\n    let {\n      engine,\n      nameProperty,\n      styleDataItem,\n      program,\n      programStage,\n      eventCoordinateField\n    } = _ref2;\n    const displayNameProp = nameProperty === 'name' ? 'displayName' : 'displayShortName';\n    let displayItems = [];\n    const programStageResponse = await engine.query(EVENT_PROGRAM_STAGE_DATA_ELEMENTS_QUERY, {\n      variables: {\n        id: programStage.id,\n        nameProperty: displayNameProp\n      }\n    });\n    const programStageDataElements = programStageResponse === null || programStageResponse === void 0 ? void 0 : (_programStageResponse = programStageResponse.programStage) === null || _programStageResponse === void 0 ? void 0 : _programStageResponse.programStageDataElements;\n    if (Array.isArray(programStageDataElements)) {\n      const filteredProgramStageItems = programStageDataElements.filter(d => d.displayInReports || d.dataElement.id === (styleDataItem === null || styleDataItem === void 0 ? void 0 : styleDataItem.id)).map(d => d.dataElement);\n      displayItems.push(...filteredProgramStageItems);\n      for (const d of filteredProgramStageItems) {\n        await this.loadOptionSet(d, engine);\n      }\n    }\n    if (styleDataItem && !displayItems.some(item => item.id === styleDataItem.id)) {\n      var _programResponse$prog;\n      const programResponse = await engine.query(EVENT_PROGRAM_ATTRIBUTES_QUERY, {\n        variables: {\n          id: program.id,\n          nameProperty: displayNameProp\n        }\n      });\n      const programTrackedEntityAttributes = programResponse === null || programResponse === void 0 ? void 0 : (_programResponse$prog = programResponse.program) === null || _programResponse$prog === void 0 ? void 0 : _programResponse$prog.programTrackedEntityAttributes;\n      if (Array.isArray(programTrackedEntityAttributes)) {\n        if (styleDataItem && !displayItems.some(item => item.id === styleDataItem.id)) {\n          const filteredProgramItems = programTrackedEntityAttributes.filter(d => d.trackedEntityAttribute.id === (styleDataItem === null || styleDataItem === void 0 ? void 0 : styleDataItem.id)).map(d => d.trackedEntityAttribute);\n          displayItems.push(...filteredProgramItems);\n          for (const d of filteredProgramItems) {\n            await this.loadOptionSet(d, engine);\n          }\n        }\n      }\n    }\n    if (styleDataItem) {\n      // Put styleDataItem first in array\n      displayItems = [...displayItems.filter(d => d.id === styleDataItem.id), ...displayItems.filter(d => d.id !== styleDataItem.id)];\n    }\n    const eventCoordinateFieldName = await loadEventCoordinateFieldName({\n      program,\n      programStage,\n      eventCoordinateField,\n      engine,\n      displayNameProp\n    });\n    this.setState({\n      displayItems,\n      eventCoordinateFieldName\n    });\n  }\n\n  // Loads an option set for an data element to get option names\n  async loadOptionSet(dataElement, engine) {\n    const {\n      optionSet\n    } = dataElement;\n    if (!optionSet || !optionSet.id) {\n      return dataElement;\n    }\n    if (optionSet && optionSet.id) {\n      const {\n        optionSet: fullOptionSet\n      } = await engine.query(OPTION_SET_QUERY, {\n        variables: {\n          id: optionSet.id\n        }\n      });\n      if (fullOptionSet && fullOptionSet.options) {\n        dataElement.options = fullOptionSet.options.reduce((byId, option) => {\n          byId[option.code] = option.name;\n          return byId;\n        }, {});\n      }\n    }\n  }\n}\nexport default EventLayer;","import i18n from '@dhis2/d2-i18n';\nimport { LABEL_FONT_SIZE, LABEL_FONT_STYLE, LABEL_FONT_WEIGHT, LABEL_FONT_COLOR } from '../constants/layers.js';\nimport { cssColor } from './colors.js';\nexport const getLabelStyle = _ref => {\n  let {\n    labelFontSize,\n    labelFontStyle,\n    labelFontWeight,\n    labelFontColor\n  } = _ref;\n  const fontSize = labelFontSize || LABEL_FONT_SIZE;\n  return {\n    fontSize,\n    fontStyle: labelFontStyle || LABEL_FONT_STYLE,\n    fontWeight: labelFontWeight || LABEL_FONT_WEIGHT,\n    lineHeight: parseInt(fontSize, 10) * 1.2 + 'px',\n    color: cssColor(labelFontColor) || LABEL_FONT_COLOR,\n    paddingTop: '10px',\n    labelNoData: i18n.t('No data')\n  };\n};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { isPlainObject } from 'lodash/fp';\nimport React from 'react';\nimport { ORG_UNIT_COLOR, GEOJSON_LAYER, GROUP_LAYER, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { getContrastColor } from '../../../util/colors.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Popup from '../Popup.js';\nimport Alert from './Alert.js';\nimport Layer from './Layer.js';\nimport styles from './styles/Popup.module.css';\nclass FacilityLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      labels,\n      areaRadius,\n      orgUnitFieldDisplayName,\n      associatedGeometries,\n      organisationUnitColor: color = ORG_UNIT_COLOR,\n      organisationUnitGroupSet\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n    const map = this.context.map;\n    const strokeColor = organisationUnitGroupSet ? color : getContrastColor(color);\n    const group = map.createLayer({\n      type: GROUP_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n\n    // Create layer config object\n    const config = {\n      type: GEOJSON_LAYER,\n      data: filteredData,\n      hoverLabel: '{name}',\n      style: {\n        color,\n        strokeColor\n      },\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this),\n      onError: this.onError.bind(this)\n    };\n\n    // Labels and label style\n    if (labels) {\n      config.label = LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = {\n        ...getLabelStyle(this.props),\n        paddingTop: '10px'\n      };\n    }\n    if (areaRadius) {\n      config.buffer = areaRadius;\n    }\n    if (associatedGeometries) {\n      group.addLayer({\n        type: GEOJSON_LAYER,\n        data: associatedGeometries,\n        hoverLabel: `{name}: ${orgUnitFieldDisplayName}`,\n        style: {\n          color: 'rgb(149, 200, 251)',\n          opacityFactor: 0.5\n        },\n        onClick: this.onAssociatedGeometryClick.bind(this),\n        onRightClick: this.onFeatureRightClick.bind(this)\n      });\n    }\n\n    // Create and add facility layer based on config object\n    group.addLayer(config);\n    this.layer = group;\n    map.addLayer(this.layer).catch(this.onError.bind(this));\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      feature\n    } = this.state.popup;\n    const {\n      id,\n      name,\n      dimensions,\n      parentName\n    } = feature.properties;\n    const {\n      orgUnitFieldDisplayName\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: styles.facilityPopup\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.title\n    }, name), this.state.isAssociatedGeometry && /*#__PURE__*/React.createElement(\"div\", null, orgUnitFieldDisplayName), isPlainObject(dimensions) && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Groups'), \":\", Object.keys(dimensions).map(id => dimensions[id]).join(', ')), parentName && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Parent unit'), \": \", parentName));\n  }\n  render() {\n    const {\n      popup,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, popup && this.getPopup(), error && /*#__PURE__*/React.createElement(Alert, {\n      warning: true,\n      message: error,\n      onHidden: this.onErrorHidden.bind(this)\n    }));\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n  onAssociatedGeometryClick(evt) {\n    this.setState({\n      popup: evt,\n      isAssociatedGeometry: true\n    });\n  }\n}\nexport default FacilityLayer;","import { GEOJSON_LAYER } from '../../../constants/layers.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getGeojsonDisplayData } from '../../../util/geojson.js';\nimport Layer from './Layer.js';\nclass GeoJsonLayer extends Layer {\n  createLayer() {\n    var _config$featureStyle;\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      featureStyle,\n      config,\n      error\n    } = this.props;\n    const {\n      map,\n      isPlugin\n    } = this.context;\n    if (error) {\n      return;\n    }\n    const filteredData = filterData(data, dataFilters);\n    const style = Object.keys(featureStyle).length > 0 ? {\n      ...featureStyle,\n      radius: featureStyle.pointSize\n    } : {\n      ...config.featureStyle,\n      radius: (_config$featureStyle = config.featureStyle) === null || _config$featureStyle === void 0 ? void 0 : _config$featureStyle.pointSize\n    };\n    this.layer = map.createLayer({\n      type: GEOJSON_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      style,\n      onClick: isPlugin ? Function.prototype : this.onFeatureClick.bind(this)\n    });\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  onFeatureClick(evt) {\n    const feature = this.props.data.find(d => d.properties.id === evt.feature.properties.id);\n    const data = getGeojsonDisplayData(feature).reduce((acc, _ref) => {\n      let {\n        dataKey,\n        value\n      } = _ref;\n      acc[dataKey] = value;\n      return acc;\n    }, {});\n    this.props.setFeatureProfile({\n      name: this.props.name,\n      data\n    });\n  }\n}\nexport default GeoJsonLayer;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { ORG_UNIT_COLOR, GEOJSON_LAYER, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\nimport styles from './styles/Popup.module.css';\nexport default class OrgUnitLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      labels,\n      radiusLow,\n      dataFilters,\n      organisationUnitColor = ORG_UNIT_COLOR\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n    const map = this.context.map;\n    const config = {\n      type: GEOJSON_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      hoverLabel: '{name}',\n      style: {\n        color: 'transparent',\n        strokeColor: organisationUnitColor\n      },\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this)\n    };\n    if (labels) {\n      config.label = LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = getLabelStyle(this.props);\n    }\n    if (radiusLow) {\n      config.style.radius = radiusLow;\n    }\n    this.layer = map.createLayer(config);\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      feature\n    } = this.state.popup;\n    const {\n      id,\n      name,\n      level,\n      parentName\n    } = feature.properties;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: styles.orgUnitPopup\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.title\n    }, name), level && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Level'), \": \", level), parentName && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Parent unit'), \": \", parentName));\n  }\n  render() {\n    return this.state.popup ? this.getPopup() : null;\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n}","import { bisector, tickStep } from 'd3-array';\nimport { timeMillisecond as millisecond, timeSecond as second, timeMinute as minute, timeHour as hour, timeDay as day, timeMonday as week, timeMonth as month, timeYear as year } from 'd3-time';\n\n// Based on https://github.com/d3/d3-time/blob/main/src/ticks.js\n// Week start on Monday, not Sunday as default in d3.js\n\nconst durationSecond = 1000;\nconst durationMinute = durationSecond * 60;\nconst durationHour = durationMinute * 60;\nconst durationDay = durationHour * 24;\nconst durationWeek = durationDay * 7;\nconst durationMonth = durationDay * 30;\nconst durationYear = durationDay * 365;\n\n//eslint-disable-next-line max-params\nfunction ticker(year, month, week, day, hour, minute) {\n  const tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) {\n      ;\n      [start, stop] = [stop, start];\n    }\n    const interval = count && typeof count.range === 'function' ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(_ref => {\n      let [,, step] = _ref;\n      return step;\n    }).right(tickIntervals, target);\n    if (i === tickIntervals.length) {\n      return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    }\n    if (i === 0) {\n      return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    }\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n  return ticks;\n}\nexport default ticker(year, month, week, day, hour, minute);","// extracted by mini-css-extract-plugin\nexport default {\"timeline\":\"Timeline_timeline__ES-XF map_box__WtUb7\",\"play\":\"Timeline_play__otgMb\",\"period\":\"Timeline_period__1ITu1\",\"selected\":\"Timeline_selected__q0WMO\"};","import cx from 'classnames';\nimport { axisBottom } from 'd3-axis';\nimport { scaleTime } from 'd3-scale';\nimport { select } from 'd3-selection';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { addPeriodsDetails, sortPeriodsByLevelAndStartDate, checkLastPeriod, getMinMaxDates } from '../../util/periods.js';\nimport timeTicks from '../../util/timeTicks.js';\nimport styles from './styles/Timeline.module.css';\nconst PADDING_LEFT = 40;\nconst PADDING_RIGHT = 20;\nconst LABEL_WIDTH = 80;\nconst RECT_HEIGHT = 8;\nconst RECT_OFFSET = 8;\nconst DELAY = 1500;\nconst MODE_PLAY = 'play';\nconst MODE_PAUSE = 'pause';\nconst Timeline = _ref => {\n  let {\n    period,\n    periods,\n    onChange,\n    resizeCount\n  } = _ref;\n  const [width, setWidth] = useState(null);\n  const [mode, setMode] = useState('start');\n  const [currentPeriod, setCurrentPeriod] = useState(period);\n  const svgRef = useRef(null);\n  const timeoutRef = useRef(null);\n  const TRANSPARENT_RECT = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0z\",\n    fillOpacity: \"0.0\"\n  });\n  const PLAY_ICON = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 5v14l11-7z\",\n    className: \"play-icon\",\n    \"data-test\": \"play-button\"\n  });\n  const PAUSE_ICON = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 19h4V5H6v14zm8-14v14h4V5h-4z\",\n    className: \"pause-icon\",\n    \"data-test\": \"pause-button\"\n  });\n  const updateWidth = useCallback(() => {\n    if (svgRef.current) {\n      var _svgRef$current$paren;\n      const box = (_svgRef$current$paren = svgRef.current.parentNode) === null || _svgRef$current$paren === void 0 ? void 0 : _svgRef$current$paren.getBoundingClientRect();\n      const newWidth = box ? box.width - PADDING_LEFT - PADDING_RIGHT : 0;\n      setWidth(newWidth);\n    }\n  }, []);\n  useEffect(() => {\n    window.addEventListener('resize', updateWidth);\n    updateWidth();\n    return () => window.removeEventListener('resize', updateWidth);\n  }, [updateWidth, resizeCount]);\n  const {\n    periodsWithTypeLevelAndRank,\n    distinctLevelsCount\n  } = useMemo(() => addPeriodsDetails(periods), [periods]);\n  const sortedPeriods = useMemo(() => sortPeriodsByLevelAndStartDate(periodsWithTypeLevelAndRank), [periodsWithTypeLevelAndRank]);\n  const isLastPeriod = useMemo(() => checkLastPeriod(currentPeriod, sortedPeriods), [currentPeriod, sortedPeriods]);\n  const timeScale = useMemo(() => {\n    if (!sortedPeriods.length || !width) {\n      return null;\n    }\n    return scaleTime().domain(getMinMaxDates(sortedPeriods)).range([0, width]);\n  }, [sortedPeriods, width]);\n  const setTimeAxis = useCallback(() => {\n    if (!timeScale) {\n      return;\n    }\n    const maxTicks = Math.round(width / LABEL_WIDTH);\n    const ticks = timeTicks(...timeScale.domain(), maxTicks);\n    const timeAxis = axisBottom(timeScale).tickValues(ticks);\n    select(svgRef.current).call(timeAxis);\n  }, [timeScale, width]);\n  useEffect(() => {\n    setTimeAxis();\n  }, [timeScale, setTimeAxis]);\n  const play = useCallback(() => {\n    timeoutRef.current = setTimeout(() => {\n      const currentPeriodIndex = sortedPeriods.findIndex(period => period.id === currentPeriod.id);\n      const nextPeriodIndex = currentPeriodIndex + 1;\n      if (nextPeriodIndex < sortedPeriods.length) {\n        setCurrentPeriod(sortedPeriods[nextPeriodIndex]);\n        onChange(sortedPeriods[nextPeriodIndex]);\n      } else {\n        setMode(MODE_PAUSE);\n      }\n    }, DELAY);\n    setMode(MODE_PLAY);\n  }, [sortedPeriods, currentPeriod, onChange]);\n  const pause = useCallback(() => {\n    clearTimeout(timeoutRef.current);\n    setMode(MODE_PAUSE);\n  }, []);\n  useEffect(() => {\n    mode === MODE_PLAY ? play() : pause();\n    return () => clearTimeout(timeoutRef.current);\n  }, [mode, play, pause]);\n  const onPlayPause = useCallback(() => {\n    mode === MODE_PLAY ? pause() : play();\n    if (isLastPeriod) {\n      setCurrentPeriod(sortedPeriods[0]);\n      onChange(sortedPeriods[0]);\n    }\n  }, [mode, isLastPeriod, play, pause, sortedPeriods, onChange]);\n  const onPeriodClick = clickedPeriod => {\n    if (clickedPeriod.id !== period.id) {\n      setCurrentPeriod(clickedPeriod);\n      onChange(clickedPeriod);\n    }\n    pause();\n  };\n  const rectTotalHeight = RECT_HEIGHT + (distinctLevelsCount - 1) * RECT_OFFSET;\n  const getPeriodRects = (sortedPeriods, timeScale) => {\n    return sortedPeriods.map(item => {\n      const isCurrent = period.id === item.id;\n      const x = timeScale(new Date(item.startDate));\n      const width = timeScale(new Date(item.endDate)) - x;\n      return /*#__PURE__*/React.createElement(\"rect\", {\n        key: item.id,\n        className: cx(styles.period, {\n          [styles.selected]: isCurrent\n        }),\n        x: x,\n        y: item.levelRank * RECT_OFFSET,\n        width: width,\n        height: RECT_HEIGHT,\n        onClick: () => onPeriodClick(item),\n        role: \"button\"\n      });\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    className: `dhis2-map-timeline ${styles.timeline}`,\n    style: {\n      height: `${32 + rectTotalHeight}px`,\n      bottom: '30px'\n    }\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    onClick: onPlayPause,\n    transform: `translate(7, ${rectTotalHeight / 2})`,\n    className: styles.play,\n    role: \"button\",\n    \"aria-label\": \"Play/Pause\"\n  }, TRANSPARENT_RECT, mode === MODE_PLAY ? PAUSE_ICON : PLAY_ICON), sortedPeriods && timeScale && /*#__PURE__*/React.createElement(\"g\", {\n    transform: `translate(${PADDING_LEFT}, 10)`\n  }, getPeriodRects(sortedPeriods, timeScale)), /*#__PURE__*/React.createElement(\"g\", {\n    transform: `translate(${PADDING_LEFT}, ${12 + rectTotalHeight})`,\n    ref: svgRef\n  }));\n};\nTimeline.propTypes = {\n  period: PropTypes.object.isRequired,\n  periods: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired,\n  resizeCount: PropTypes.number\n};\nexport default Timeline;","// extracted by mini-css-extract-plugin\nexport default {\"periodName\":\"PeriodName_periodName__JERjO\",\"period\":\"PeriodName_period__2BFNe map_box__WtUb7\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/PeriodName.module.css';\nconst PeriodName = _ref => {\n  let {\n    period,\n    isTimeline\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `dhis2-map-period ${styles.periodName}`,\n    style: isTimeline ? {\n      bottom: 86\n    } : null\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.period\n  }, period));\n};\nPeriodName.propTypes = {\n  period: PropTypes.string.isRequired,\n  isTimeline: PropTypes.bool\n};\nexport default PeriodName;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React, { Fragment } from 'react';\nimport { RENDERING_STRATEGY_SINGLE, RENDERING_STRATEGY_TIMELINE, RENDERING_STRATEGY_SPLIT_BY_PERIOD, THEMATIC_CHOROPLETH, THEMATIC_BUBBLE, BOUNDARY_LAYER, ORG_UNIT_COLOR, ORG_UNIT_RADIUS_SMALL, LABEL_TEMPLATE_NAME_ONLY, PADDING_TIMELINE, DURATION_TIMELINE } from '../../../constants/layers.js';\nimport { getPeriodFromFilters } from '../../../util/analytics.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport { sortPeriodsByLevelAndStartDate, addPeriodsDetails } from '../../../util/periods.js';\nimport Timeline from '../../periods/Timeline.js';\nimport { poleOfInaccessibility } from '../MapApi.js';\nimport PeriodName from '../PeriodName.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\nimport styles from './styles/Popup.module.css';\nexport const ThematicLayerContext = /*#__PURE__*/React.createContext();\n\n// Translating polygons to points using poleOfInaccessibility from maps-gl\nconst polygonsToPoints = features => features.map(feature => ({\n  ...feature,\n  geometry: {\n    type: 'Point',\n    coordinates: poleOfInaccessibility(feature.geometry)\n  }\n}));\nclass ThematicLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"onPeriodChange\", period => {\n      this.setState(prevState => {\n        const {\n          popup\n        } = prevState;\n        if (!popup) {\n          return {\n            period\n          };\n        }\n        const {\n          valuesByPeriod\n        } = this.props;\n        const newValues = valuesByPeriod[period.id] || {};\n        const updatedPopup = {\n          ...popup,\n          feature: {\n            ...popup.feature,\n            properties: {\n              ...popup.feature.properties,\n              ...(newValues[popup.feature.properties.id] || {\n                value: i18n.t('Not set')\n              })\n            }\n          }\n        };\n        return {\n          period,\n          popup: updatedPopup\n        };\n      });\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      labels,\n      valuesByPeriod,\n      renderingStrategy = RENDERING_STRATEGY_SINGLE,\n      thematicMapType = THEMATIC_CHOROPLETH,\n      noDataColor\n    } = this.props;\n    const {\n      period\n    } = this.state;\n    const {\n      isPlugin,\n      map\n    } = this.context;\n    const bubbleMap = thematicMapType === THEMATIC_BUBBLE;\n    let periodData = bubbleMap ? polygonsToPoints(data) : data;\n    if (renderingStrategy !== RENDERING_STRATEGY_SINGLE) {\n      const values = valuesByPeriod[period.id] || {};\n      periodData = periodData.map(f => ({\n        ...f,\n        properties: {\n          ...f.properties,\n          ...values[f.id],\n          ...(f.properties.hasAdditionalGeometry && f.geometry.type === 'Point' && {\n            color: ORG_UNIT_COLOR,\n            radius: ORG_UNIT_RADIUS_SMALL\n          })\n        }\n      }));\n\n      // Remove org unit features if noDataColor is missing\n      if (!noDataColor) {\n        periodData = periodData.filter(feature => values[feature.id] !== undefined);\n      }\n    }\n    const filteredData = filterData(periodData, dataFilters);\n    const config = {\n      type: 'choropleth',\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      hoverLabel: '{name} ({value})',\n      color: noDataColor,\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this)\n    };\n    if (labels) {\n      config.label = this.props.labelTemplate || LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = getLabelStyle(this.props);\n    }\n\n    // Add boundaries as a separate layer\n    if (bubbleMap) {\n      this.layer = map.createLayer({\n        type: 'group',\n        id,\n        index,\n        opacity,\n        isVisible\n      });\n      this.layer.addLayer({\n        type: BOUNDARY_LAYER,\n        data: data.map(f => ({\n          ...f,\n          properties: {\n            ...f.properties,\n            style: {\n              color: ORG_UNIT_COLOR,\n              weight: 0.5\n            }\n          }\n        })),\n        style: {}\n      });\n      this.layer.addLayer(config);\n    } else {\n      this.layer = map.createLayer(config);\n    }\n    map.addLayer(this.layer);\n    const options = {};\n    if (renderingStrategy === RENDERING_STRATEGY_TIMELINE) {\n      options.padding = PADDING_TIMELINE;\n      if (isPlugin) {\n        options.duration = DURATION_TIMELINE;\n      }\n    }\n    if (!isPlugin) {\n      this.fitBoundsOnce(options);\n    } else {\n      this.fitBounds(options);\n    }\n  }\n\n  // Set initial period\n  setPeriod(callback) {\n    const {\n      period,\n      periods,\n      renderingStrategy = RENDERING_STRATEGY_SINGLE\n    } = this.props;\n    if (!period && !periods) {\n      return;\n    }\n    const initialPeriod = {};\n    switch (renderingStrategy) {\n      case RENDERING_STRATEGY_TIMELINE:\n        initialPeriod.period = sortPeriodsByLevelAndStartDate(addPeriodsDetails(periods).periodsWithTypeLevelAndRank)[0];\n        break;\n      case RENDERING_STRATEGY_SPLIT_BY_PERIOD:\n        initialPeriod.period = period;\n        break;\n      default:\n        initialPeriod.period = null;\n        break;\n    }\n\n    // setPeriod without callback is called from the constructor (unmounted)\n    if (!callback) {\n      this.state = initialPeriod;\n    } else {\n      this.setState(initialPeriod, callback);\n    }\n  }\n  getPopup() {\n    const {\n      columns,\n      aggregationType,\n      legend\n    } = this.props;\n    const {\n      popup,\n      period\n    } = this.state;\n    const {\n      coordinates,\n      feature\n    } = popup;\n    const {\n      id,\n      name,\n      value\n    } = feature.properties;\n    const indicator = columns[0].items[0].name || '';\n    const periodName = period ? period.name : legend.period;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: styles.thematicPopup\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.title\n    }, name), /*#__PURE__*/React.createElement(\"div\", null, indicator), /*#__PURE__*/React.createElement(\"div\", null, periodName), /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Value'), \": \", value !== null && value !== void 0 ? value : i18n.t('No data')), aggregationType && aggregationType !== 'DEFAULT' && /*#__PURE__*/React.createElement(\"div\", null, aggregationType));\n  }\n  render() {\n    const {\n      periods,\n      renderingStrategy,\n      filters,\n      resizeCount\n    } = this.props;\n    const {\n      period,\n      popup\n    } = this.state;\n    const {\n      id\n    } = getPeriodFromFilters(filters) || {};\n    return /*#__PURE__*/React.createElement(Fragment, null, renderingStrategy === RENDERING_STRATEGY_TIMELINE && period && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(PeriodName, {\n      period: period.name,\n      isTimeline: true\n    }), /*#__PURE__*/React.createElement(ThematicLayerContext.Provider, {\n      value: {\n        map: this.context.map\n      }\n    }, /*#__PURE__*/React.createElement(Timeline, {\n      periodId: id,\n      period: period,\n      periods: periods,\n      onChange: this.onPeriodChange,\n      resizeCount: resizeCount\n    }))), popup && this.getPopup());\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n}\nexport default ThematicLayer;","export const TRACKED_ENTITY_TRACKED_ENTITY_TYPE_ATTRIBUTES_QUERY = {\n  trackedEntityType: {\n    resource: 'trackedEntityTypes',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: `trackedEntityTypeAttributes[displayInList,trackedEntityAttribute[id,${nameProperty}~rename(name),optionSet,valueType]]`,\n        paging: false\n      };\n    }\n  }\n};\nexport const TRACKED_ENTITY_PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY = {\n  program: {\n    resource: 'programs',\n    id: _ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id;\n    },\n    params: _ref4 => {\n      let {\n        nameProperty\n      } = _ref4;\n      return {\n        fields: `programTrackedEntityAttributes[displayInList,trackedEntityAttribute[id,${nameProperty}~rename(name),optionSet,valueType]]`,\n        paging: false\n      };\n    }\n  }\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { formatDatetime, formatCoordinate, formatValueForDisplay } from '../../../util/helpers.js';\nimport { ORG_UNIT_QUERY } from '../../../util/orgUnits.js';\nimport Popup from '../Popup.js';\nimport styles from './styles/Popup.module.css';\nconst TRACKED_ENTITIES_QUERY = {\n  trackedEntities: {\n    resource: `tracker/trackedEntities`,\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        program\n      } = _ref2;\n      return {\n        fields: 'updatedAt,orgUnit,attributes[displayName~rename(name),value,attribute],relationships',\n        program: program === null || program === void 0 ? void 0 : program.id\n      };\n    }\n  }\n};\nconst getDataRows = _ref3 => {\n  let {\n    displayAttributes,\n    attributes\n  } = _ref3;\n  const dataRows = [];\n\n  // Include rows for each displayInList attribute\n  displayAttributes.forEach(_ref4 => {\n    let {\n      id,\n      name,\n      valueType,\n      options\n    } = _ref4;\n    const {\n      value\n    } = attributes.find(d => d.attribute === id) || {};\n    const formattedValue = formatValueForDisplay({\n      value,\n      valueType,\n      options\n    });\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: id\n    }, /*#__PURE__*/React.createElement(\"th\", null, name), /*#__PURE__*/React.createElement(\"td\", null, formattedValue)));\n  });\n  if (dataRows.length) {\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: \"divider\",\n      className: styles.divider\n    }));\n  }\n  return dataRows;\n};\n\n// Will display a popup for an trackeentity feature\nconst TrackedEntityPopup = _ref5 => {\n  let {\n    coordinates,\n    feature,\n    activeDataSource,\n    program,\n    nameProperty,\n    displayAttributes,\n    onClose\n  } = _ref5;\n  const [orgUnit, setOrgUnit] = useState();\n  const {\n    refetch: refetchOrgUnit,\n    fetching: fetchingOrgUnit\n  } = useDataQuery(ORG_UNIT_QUERY, {\n    lazy: true\n  });\n  const {\n    error: errorTrackedEntity,\n    data: dataTrackedEntity,\n    refetch: refetchTrackedEntity,\n    fetching: fetchingTrackedEntity\n  } = useDataQuery(TRACKED_ENTITIES_QUERY, {\n    variables: {\n      id: feature.properties.id,\n      program\n    },\n    lazy: true\n  });\n  useEffect(() => {\n    const fetchTEandOU = async () => {\n      var _resultTrackedEntity$;\n      const resultTrackedEntity = await refetchTrackedEntity({\n        id: feature.properties.id\n      });\n      const idOrgUnit = resultTrackedEntity === null || resultTrackedEntity === void 0 ? void 0 : (_resultTrackedEntity$ = resultTrackedEntity.trackedEntities) === null || _resultTrackedEntity$ === void 0 ? void 0 : _resultTrackedEntity$.orgUnit;\n      if (idOrgUnit) {\n        var _resultOrgUnit$orgUni;\n        const resultOrgUnit = await refetchOrgUnit({\n          id: idOrgUnit,\n          nameProperty\n        });\n        const nameOrgUnit = resultOrgUnit === null || resultOrgUnit === void 0 ? void 0 : (_resultOrgUnit$orgUni = resultOrgUnit.orgUnit) === null || _resultOrgUnit$orgUni === void 0 ? void 0 : _resultOrgUnit$orgUni.name;\n        setOrgUnit(nameOrgUnit);\n      }\n    };\n    fetchTEandOU();\n  }, [feature, nameProperty, refetchTrackedEntity, refetchOrgUnit]);\n  const {\n    type,\n    coordinates: coord\n  } = feature.geometry;\n  const {\n    attributes = [],\n    updatedAt\n  } = (dataTrackedEntity === null || dataTrackedEntity === void 0 ? void 0 : dataTrackedEntity.trackedEntities) || {};\n  return /*#__PURE__*/React.createElement(Popup, {\n    coordinates: coordinates,\n    onClose: onClose,\n    className: styles.trackedEntityPopup\n  }, errorTrackedEntity && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, i18n.t('Could not retrieve tracked entity data')), /*#__PURE__*/React.createElement(\"tr\", {\n    key: \"divider\",\n    className: styles.divider\n  }))), !fetchingTrackedEntity && !fetchingOrgUnit && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, (dataTrackedEntity === null || dataTrackedEntity === void 0 ? void 0 : dataTrackedEntity.trackedEntities) && activeDataSource == 'primary' && getDataRows({\n    displayAttributes,\n    attributes\n  }), type === 'Point' && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Tracked entity location')), /*#__PURE__*/React.createElement(\"td\", null, formatCoordinate(coord))), orgUnit && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Organisation unit')), /*#__PURE__*/React.createElement(\"td\", null, orgUnit)), updatedAt && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Last updated')), /*#__PURE__*/React.createElement(\"td\", null, formatDatetime(updatedAt))))));\n};\nTrackedEntityPopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  displayAttributes: PropTypes.array.isRequired,\n  feature: PropTypes.object.isRequired,\n  nameProperty: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  activeDataSource: PropTypes.string,\n  program: PropTypes.object\n};\nexport default TrackedEntityPopup;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport React from 'react';\nimport { TEI_COLOR, TEI_RADIUS, TEI_RELATIONSHIP_LINE_COLOR, TEI_RELATED_COLOR, TEI_RELATED_RADIUS, GEOJSON_LAYER } from '../../../constants/layers.js';\nimport { GEO_TYPE_POINT, GEO_TYPE_POLYGON, GEO_TYPE_LINE, GEO_TYPE_FEATURE } from '../../../util/geojson.js';\nimport { OPTION_SET_QUERY } from '../../../util/requests.js';\nimport { TRACKED_ENTITY_TRACKED_ENTITY_TYPE_ATTRIBUTES_QUERY, TRACKED_ENTITY_PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY } from '../../../util/trackedEntity.js';\nimport Layer from './Layer.js';\nimport TrackedEntityPopup from './TrackedEntityPopup.js';\nconst getCentroid = points => {\n  const totals = points.reduce((accum, point) => {\n    accum[0] += point[0];\n    accum[1] += point[1];\n    return accum;\n  }, [0, 0]);\n  return [totals[0] / points.length, totals[1] / points.length];\n};\nconst geomToCentroid = geometry => {\n  switch (geometry.type) {\n    case GEO_TYPE_POINT:\n      return geometry.coordinates;\n    case GEO_TYPE_POLYGON:\n      // TODO: Support multipolygon / use turf\n      return getCentroid(geometry.coordinates[0]);\n    default:\n      return null;\n  }\n};\nconst makeRelationshipGeometry = _ref => {\n  let {\n    from,\n    to\n  } = _ref;\n  const fromGeom = geomToCentroid(from.geometry);\n  const toGeom = geomToCentroid(to.geometry);\n  if (!fromGeom || !toGeom) {\n    // console.error('Invalid relationship geometries', from, to);\n    return null;\n  }\n  return {\n    type: GEO_TYPE_FEATURE,\n    geometry: {\n      type: GEO_TYPE_LINE,\n      coordinates: [fromGeom, toGeom]\n    },\n    properties: {}\n  };\n};\nconst makeRelationshipLayer = (relationships, color, weight) => {\n  return {\n    type: GEOJSON_LAYER,\n    data: relationships.map(makeRelationshipGeometry).filter(x => !!x),\n    style: {\n      color,\n      weight\n    }\n  };\n};\nclass TrackedEntityLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null,\n      displayAttributes: null,\n      trackedEntityCoordinateFieldName: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      engine,\n      relationships,\n      secondaryData,\n      eventPointColor,\n      eventPointRadius,\n      nameProperty,\n      areaRadius,\n      relatedPointColor,\n      relatedPointRadius,\n      relationshipLineColor\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    const color = eventPointColor || TEI_COLOR;\n    const radius = eventPointRadius || TEI_RADIUS;\n    const config = {\n      type: GEOJSON_LAYER,\n      data,\n      style: {\n        color,\n        weight: 1,\n        radius\n      },\n      onClick: this.onEventClick.bind(this)\n    };\n    if (areaRadius) {\n      config.buffer = areaRadius;\n      config.bufferStyle = {\n        color,\n        weight: 1,\n        opacity: 0.2,\n        fillOpacity: 0.1\n      };\n    }\n\n    // Create and add layer based on config object\n    const group = map.createLayer({\n      type: 'group',\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n    this.loadDisplayAttributes(engine, nameProperty);\n    if (relationships) {\n      const secondaryConfig = {\n        type: GEOJSON_LAYER,\n        data: secondaryData,\n        style: {\n          color: relatedPointColor || TEI_RELATED_COLOR,\n          weight: 1,\n          radius: relatedPointRadius || TEI_RELATED_RADIUS\n        },\n        onClick: this.onEventClickSecondary.bind(this)\n      };\n      const relationshipConfig = makeRelationshipLayer(relationships, relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR, 1);\n      group.addLayer(relationshipConfig);\n      group.addLayer(secondaryConfig);\n    }\n    group.addLayer(config);\n    this.layer = group;\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  render() {\n    const {\n      program,\n      nameProperty\n    } = this.props;\n    const {\n      popup,\n      displayAttributes\n    } = this.state;\n    return popup ? /*#__PURE__*/React.createElement(TrackedEntityPopup, _extends({}, popup, {\n      program: program,\n      nameProperty: nameProperty,\n      displayAttributes: displayAttributes || [],\n      onClose: this.onPopupClose\n    })) : null;\n  }\n  onEventClick(_ref2) {\n    let {\n      feature,\n      coordinates\n    } = _ref2;\n    this.setState({\n      popup: {\n        feature,\n        coordinates,\n        activeDataSource: 'primary'\n      }\n    });\n  }\n  onEventClickSecondary(_ref3) {\n    let {\n      feature,\n      coordinates\n    } = _ref3;\n    this.setState({\n      popup: {\n        feature,\n        coordinates,\n        activeDataSource: 'secondary'\n      }\n    });\n  }\n  async loadDisplayAttributes(engine, nameProperty) {\n    const {\n      trackedEntityType,\n      program\n    } = this.props;\n    // Get relationshipType object from loader if we want to retrieve attributes from secondary dataset\n\n    const displayNameProp = nameProperty === 'name' ? 'displayName' : 'displayShortName';\n    const {\n      trackedEntityType: data\n    } = await engine.query(TRACKED_ENTITY_TRACKED_ENTITY_TYPE_ATTRIBUTES_QUERY, {\n      variables: {\n        id: trackedEntityType.id,\n        nameProperty: displayNameProp\n      }\n    });\n    let {\n      trackedEntityTypeAttributes: trackedEntityAttributes\n    } = data;\n    if (program) {\n      const {\n        program: data\n      } = await engine.query(TRACKED_ENTITY_PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY, {\n        variables: {\n          id: program.id,\n          nameProperty: displayNameProp\n        }\n      });\n      const {\n        programTrackedEntityAttributes\n      } = data;\n      trackedEntityAttributes = [...trackedEntityAttributes, ...programTrackedEntityAttributes.filter(attr1 => !trackedEntityAttributes.some(attr2 => attr1.trackedEntityAttribute.id === attr2.trackedEntityAttribute.id))];\n    }\n    let displayAttributes = [];\n    // let trackedEntityCoordinateFieldName when we support associated geometry\n\n    if (Array.isArray(trackedEntityAttributes)) {\n      displayAttributes = trackedEntityAttributes.filter(a => a.displayInList).map(a => a.trackedEntityAttribute);\n      for (const a of displayAttributes) {\n        await this.loadOptionSet(a, engine);\n      }\n    }\n    this.setState({\n      displayAttributes\n    });\n  }\n\n  // Loads an option set for an attribute to get option names\n  async loadOptionSet(attribute, engine) {\n    const {\n      optionSet\n    } = attribute;\n    if (!optionSet || !optionSet.id) {\n      return attribute;\n    }\n    if (optionSet && optionSet.id) {\n      const {\n        optionSet: fullOptionSet\n      } = await engine.query(OPTION_SET_QUERY, {\n        variables: {\n          id: optionSet.id\n        }\n      });\n      if (fullOptionSet && fullOptionSet.options) {\n        attribute.options = fullOptionSet.options.reduce((byId, option) => {\n          byId[option.code] = option.name;\n          return byId;\n        }, {});\n      }\n    }\n  }\n}\nexport default TrackedEntityLayer;","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"Map_map__gZqCB\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component, Fragment } from 'react';\nimport { onFullscreenChange } from '../../util/map.js';\nimport BasemapLayer from './layers/BasemapLayer.js';\nimport EarthEngineLayer from './layers/earthEngine/EarthEngineLayer.js';\nimport EventLayer from './layers/EventLayer.js';\nimport ExternalLayer from './layers/ExternalLayer.js';\nimport FacilityLayer from './layers/FacilityLayer.js';\nimport GeoJsonLayer from './layers/GeoJsonLayer.js';\nimport Layer from './layers/Layer.js';\nimport OrgUnitLayer from './layers/OrgUnitLayer.js';\nimport ThematicLayer from './layers/ThematicLayer.js';\nimport TrackedEntityLayer from './layers/TrackedEntityLayer.js';\nimport mapApi, { controlTypes } from './MapApi.js';\nimport Popup from './Popup.js';\nimport styles from './styles/Map.module.css';\nconst layerType = {\n  event: EventLayer,\n  trackedEntity: TrackedEntityLayer,\n  facility: FacilityLayer,\n  thematic: ThematicLayer,\n  orgUnit: OrgUnitLayer,\n  earthEngine: EarthEngineLayer,\n  external: ExternalLayer,\n  geoJsonUrl: GeoJsonLayer\n};\nclass Map extends Component {\n  constructor(props, context) {\n    super(props, context);\n    _defineProperty(this, \"state\", {});\n    _defineProperty(this, \"onRightClick\", evt => {\n      const [x, y] = evt.position;\n      const {\n        left,\n        top\n      } = this.map.getContainer().getBoundingClientRect();\n      this.props.openContextMenu({\n        ...evt,\n        position: [x, y],\n        offset: [left, top]\n      });\n    });\n    _defineProperty(this, \"onMapReady\", map => {\n      this.setState({\n        map\n      });\n      const {\n        setMapObject\n      } = this.props;\n      if (setMapObject) {\n        setMapObject(this.map);\n      }\n    });\n    // From built-in fullscreen control\n    _defineProperty(this, \"onFullscreenChange\", _ref => {\n      let {\n        isFullscreen\n      } = _ref;\n      onFullscreenChange(this.map, isFullscreen);\n    });\n    const {\n      isPlugin,\n      baseUrl\n    } = props;\n    const _map = mapApi({\n      scrollZoom: !isPlugin,\n      baseUrl\n    });\n    if (isPlugin) {\n      _map.toggleMultiTouch(true);\n      _map.on('fullscreenchange', this.onFullscreenChange);\n      window.addEventListener('resize', () => {\n        this.onFullscreenChange({\n          isFullscreen: false\n        });\n      });\n    } else {\n      _map.on('contextmenu', this.onRightClick, this);\n    }\n    this.map = _map;\n    _map.on('ready', this.onMapReady);\n  }\n  getChildContext() {\n    return {\n      map: this.map,\n      isPlugin: this.props.isPlugin\n    };\n  }\n  componentDidMount() {\n    const {\n      controls,\n      bounds,\n      latitude,\n      longitude,\n      zoom\n    } = this.props;\n    const {\n      map\n    } = this;\n\n    // Append map container to DOM\n    this.node.appendChild(map.getContainer());\n    map.resize();\n\n    // Add map controls\n    if (controls) {\n      controls.filter(control => controlTypes.includes(control.type)).forEach(control => map.addControl(control));\n    }\n    const layerBounds = map.getLayersBounds();\n    if (Array.isArray(layerBounds)) {\n      map.fitBounds(layerBounds);\n    } else if (bounds) {\n      map.fitBounds(bounds);\n    } else if (latitude && longitude && zoom) {\n      map.setView([longitude, latitude], zoom);\n    } else {\n      map.fitWorld();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      resizeCount,\n      isFullscreen,\n      isPlugin,\n      layersSorting\n    } = this.props;\n    if (resizeCount !== prevProps.resizeCount) {\n      this.map.resize();\n    }\n    if (layersSorting !== prevProps.layersSorting) {\n      this.map.setMouseMoveEnabled(!layersSorting);\n    }\n\n    // From map plugin resize method\n    if (isPlugin && isFullscreen !== prevProps.isFullscreen) {\n      onFullscreenChange(this.map, isFullscreen);\n    }\n  }\n\n  // Remove map\n  componentWillUnmount() {\n    if (this.map) {\n      this.map.off('ready', this.onMapReady);\n      this.map.remove();\n      delete this.map;\n    }\n  }\n  render() {\n    const {\n      basemap,\n      engine,\n      nameProperty,\n      layers,\n      feature,\n      coordinatePopup: coordinates,\n      closeCoordinatePopup,\n      openContextMenu,\n      setAggregations,\n      setFeatureProfile,\n      resizeCount\n    } = this.props;\n    const {\n      map\n    } = this.state;\n    const overlays = layers.filter(layer => layer.isLoaded);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: node => this.node = node,\n      className: styles.map\n    }, map && /*#__PURE__*/React.createElement(Fragment, null, overlays.map((config, index) => {\n      const Overlay = layerType[config.layer] || Layer;\n      const highlight = feature && feature.layerId === config.id ? feature : null;\n      return /*#__PURE__*/React.createElement(Overlay, _extends({\n        key: config.id,\n        index: overlays.length - index,\n        feature: highlight,\n        openContextMenu: openContextMenu,\n        setAggregations: setAggregations,\n        setFeatureProfile: setFeatureProfile,\n        engine: engine,\n        nameProperty: nameProperty,\n        resizeCount: resizeCount\n      }, config));\n    }), /*#__PURE__*/React.createElement(BasemapLayer, basemap), coordinates && /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      onClose: closeCoordinatePopup\n    }, i18n.t('Longitude'), \":\", ' ', coordinates[0].toFixed(6), /*#__PURE__*/React.createElement(\"br\", null), i18n.t('Latitude'), \":\", ' ', coordinates[1].toFixed(6))));\n  }\n}\n_defineProperty(Map, \"propTypes\", {\n  baseUrl: PropTypes.string.isRequired,\n  openContextMenu: PropTypes.func.isRequired,\n  basemap: PropTypes.object,\n  bounds: PropTypes.array,\n  closeCoordinatePopup: PropTypes.func,\n  controls: PropTypes.array,\n  coordinatePopup: PropTypes.array,\n  engine: PropTypes.object,\n  feature: PropTypes.object,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  latitude: PropTypes.number,\n  layers: PropTypes.array,\n  layersSorting: PropTypes.bool,\n  longitude: PropTypes.number,\n  nameProperty: PropTypes.string,\n  resizeCount: PropTypes.number,\n  setAggregations: PropTypes.func,\n  setFeatureProfile: PropTypes.func,\n  setMapObject: PropTypes.func,\n  zoom: PropTypes.number\n});\n_defineProperty(Map, \"defaultProps\", {\n  isPlugin: false\n});\n_defineProperty(Map, \"childContextTypes\", {\n  map: PropTypes.object.isRequired,\n  isPlugin: PropTypes.bool.isRequired\n});\nexport default Map;","import Layer from './Layer.js';\nexport default class ExternalLayer extends Layer {\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      config\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    this.layer = map.createLayer({\n      id,\n      index,\n      opacity,\n      isVisible,\n      ...config\n    });\n    map.addLayer(this.layer);\n  }\n}","// extracted by mini-css-extract-plugin\nexport default {\"mapItem\":\"MapItem_mapItem__b6yfQ\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { onFullscreenChange } from '../../util/map.js';\nimport mapApi from './MapApi.js';\nimport styles from './styles/MapItem.module.css';\nclass MapItem extends PureComponent {\n  constructor(props, context) {\n    super(props, context);\n    _defineProperty(this, \"state\", {});\n    _defineProperty(this, \"onMapReady\", map => this.setState({\n      map\n    }));\n    const {\n      isPlugin,\n      baseUrl\n    } = props;\n    this.map = mapApi({\n      attributionControl: false,\n      scrollZoom: !isPlugin,\n      baseUrl\n    });\n    if (isPlugin) {\n      this.map.toggleMultiTouch(true);\n    }\n    this.map.on('ready', this.onMapReady);\n  }\n  getChildContext() {\n    return {\n      map: this.map,\n      isPlugin: this.props.isPlugin\n    };\n  }\n  componentDidMount() {\n    const {\n      layerId,\n      index,\n      setMapControls\n    } = this.props;\n    const {\n      map\n    } = this;\n    this.node.appendChild(map.getContainer());\n    this.fitLayerBounds();\n    map.sync(layerId);\n\n    // Add map controls if first map\n    if (index == 0) {\n      setMapControls(map);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      count,\n      isFullscreen,\n      isPlugin,\n      layersSorting\n    } = this.props;\n    if (count !== prevProps.count) {\n      this.fitLayerBounds();\n    }\n    if (layersSorting !== prevProps.layersSorting) {\n      this.map.setMouseMoveEnabled(!layersSorting);\n    }\n    if (isPlugin && isFullscreen !== prevProps.isFullscreen) {\n      onFullscreenChange(this.map, isFullscreen);\n    }\n    this.map.resize();\n  }\n  componentWillUnmount() {\n    this.map.off('ready', this.onMapReady);\n    this.map.unsync(this.props.layerId);\n    this.map.remove();\n    delete this.map;\n  }\n  render() {\n    const {\n      count,\n      children\n    } = this.props;\n    const {\n      map\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: node => this.node = node,\n      className: styles.mapItem,\n      style: {\n        width: count === 4 ? '50%' : '33.3333%'\n      }\n    }, map && children);\n  }\n\n  // Zoom to layers bounds on mount\n  fitLayerBounds() {\n    this.map.resize();\n    const bounds = this.map.getLayersBounds();\n    if (bounds) {\n      this.map.fitBounds(bounds);\n    } else {\n      this.map.fitWorld();\n    }\n  }\n}\n_defineProperty(MapItem, \"childContextTypes\", {\n  map: PropTypes.object.isRequired,\n  isPlugin: PropTypes.bool.isRequired\n});\n_defineProperty(MapItem, \"propTypes\", {\n  baseUrl: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n  count: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n  layerId: PropTypes.string.isRequired,\n  setMapControls: PropTypes.func.isRequired,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  layersSorting: PropTypes.bool\n});\n_defineProperty(MapItem, \"defaultProps\", {\n  isPlugin: false\n});\nexport default MapItem;","// extracted by mini-css-extract-plugin\nexport default {\"splitView\":\"SplitView_splitView__BQU6v\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useConfig } from '@dhis2/app-runtime';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport BasemapLayer from './layers/BasemapLayer.js';\nimport ThematicLayer from './layers/ThematicLayer.js';\nimport MapItem from './MapItem.js';\nimport PeriodName from './PeriodName.js';\nimport styles from './styles/SplitView.module.css';\nconst SplitView = _ref => {\n  let {\n    isPlugin,\n    basemap,\n    layer,\n    feature,\n    controls,\n    openContextMenu,\n    isFullscreen,\n    interpretationModalOpen,\n    setMapObject,\n    layersSorting\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [showFullscreen, setShowFullscreen] = useState();\n  const [map, setMap] = useState(); // Called from map child\n  const containerRef = useRef();\n\n  // From built-in fullscreen control\n  const onFullscreenChange = useCallback(_ref2 => {\n    let {\n      isFullscreen\n    } = _ref2;\n    return setShowFullscreen(isFullscreen);\n  }, []);\n  useEffect(() => {\n    if (map && controls && containerRef.current) {\n      controls.forEach(control => {\n        map.addControl(control);\n        containerRef.current.append(map.getControlContainer(control.type));\n      });\n      if (setMapObject) {\n        setMapObject(map);\n      }\n    }\n  }, [map, controls, containerRef, setMapObject]);\n  useEffect(() => {\n    if (map && isPlugin) {\n      map.on('fullscreenchange', onFullscreenChange);\n    }\n    return () => {\n      if (map && isPlugin) {\n        map.off('fullscreenchange', onFullscreenChange);\n      }\n    };\n  }, [map, isPlugin, onFullscreenChange]);\n  useEffect(() => {\n    // From map plugin resize method\n    setShowFullscreen(isFullscreen);\n  }, [isFullscreen]);\n  const {\n    id,\n    periods = []\n  } = layer;\n  return !interpretationModalOpen ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: cx('dhis2-map-split-view', styles.splitView)\n  }, periods.map((period, index) => /*#__PURE__*/React.createElement(MapItem, {\n    key: period.id,\n    index: index,\n    count: periods.length,\n    layerId: id,\n    setMapControls: setMap,\n    isPlugin: isPlugin,\n    isFullscreen: showFullscreen,\n    baseUrl: baseUrl,\n    layersSorting: layersSorting\n  }, /*#__PURE__*/React.createElement(BasemapLayer, basemap), /*#__PURE__*/React.createElement(ThematicLayer, _extends({\n    index: 1\n  }, layer, {\n    // needs to be before period\n    period: period,\n    feature: feature,\n    openContextMenu: openContextMenu\n  })), /*#__PURE__*/React.createElement(PeriodName, {\n    period: period.name\n  })))) : null;\n};\nSplitView.propTypes = {\n  layer: PropTypes.object.isRequired,\n  openContextMenu: PropTypes.func.isRequired,\n  basemap: PropTypes.object,\n  controls: PropTypes.array,\n  feature: PropTypes.object,\n  interpretationModalOpen: PropTypes.bool,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  layersSorting: PropTypes.bool,\n  setMapObject: PropTypes.func\n};\nSplitView.defaultProps = {\n  openContextMenu: () => {}\n};\nexport default SplitView;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDataEngine, useConfig } from '@dhis2/app-runtime';\nimport { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { getSplitViewLayer } from '../../util/helpers.js';\nimport { getMapControls } from '../../util/mapControls.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport Map from './Map.js';\nimport SplitView from './SplitView.js';\n\n// Shared component between app and plugin\nconst MapView = props => {\n  const {\n    isPlugin,\n    isFullscreen,\n    basemap,\n    layers,\n    controls,\n    feature,\n    bounds,\n    coordinatePopup,\n    interpretationModalOpen,\n    openContextMenu,\n    setMapObject,\n    resizeCount,\n    layersSorting,\n    ...layerDispatchActions\n  } = props;\n  const {\n    baseUrl\n  } = useConfig();\n  const engine = useDataEngine();\n  const {\n    currentUser\n  } = useCachedData();\n  const nameProperty = currentUser.keyAnalysisDisplayProperty;\n  const splitViewLayer = getSplitViewLayer(layers);\n  const isSplitView = !!splitViewLayer;\n  const mapControls = useMemo(() => getMapControls(isPlugin, isSplitView, controls), [isPlugin, isSplitView, controls]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, basemap.id === undefined ? /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))) : /*#__PURE__*/React.createElement(React.Fragment, null, isSplitView ? /*#__PURE__*/React.createElement(SplitView, {\n    isPlugin: isPlugin,\n    isFullscreen: isFullscreen,\n    basemap: basemap,\n    layer: splitViewLayer,\n    controls: mapControls,\n    feature: feature,\n    interpretationModalOpen: interpretationModalOpen,\n    openContextMenu: openContextMenu,\n    resizeCount: resizeCount,\n    setMapObject: setMapObject,\n    layersSorting: layersSorting\n  }) : /*#__PURE__*/React.createElement(Map, _extends({\n    isPlugin: isPlugin,\n    isFullscreen: isFullscreen,\n    basemap: basemap,\n    layers: [...layers].reverse(),\n    bounds: bounds,\n    controls: mapControls,\n    feature: feature,\n    coordinatePopup: coordinatePopup,\n    openContextMenu: openContextMenu,\n    resizeCount: resizeCount,\n    setMapObject: setMapObject,\n    baseUrl: baseUrl,\n    engine: engine,\n    nameProperty: nameProperty,\n    layersSorting: layersSorting\n  }, layerDispatchActions))));\n};\nMapView.propTypes = {\n  basemap: PropTypes.object,\n  bounds: PropTypes.array,\n  controls: PropTypes.array,\n  coordinatePopup: PropTypes.array,\n  feature: PropTypes.object,\n  interpretationModalOpen: PropTypes.bool,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  layers: PropTypes.array,\n  layersSorting: PropTypes.bool,\n  openContextMenu: PropTypes.func,\n  resizeCount: PropTypes.number,\n  setMapObject: PropTypes.func\n};\nexport default MapView;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAggregations } from '../../actions/aggregations.js';\nimport { setFeatureProfile } from '../../actions/feature.js';\nimport { openContextMenu, closeCoordinatePopup } from '../../actions/map.js';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport MapLoadingMask from './MapLoadingMask.js';\nimport MapName from './MapName.js';\nimport MapView from './MapView.js';\nconst MapContainer = _ref => {\n  let {\n    resizeCount,\n    setMap\n  } = _ref;\n  const {\n    basemap,\n    coordinatePopup,\n    mapViews,\n    bounds\n  } = useSelector(state => state.map);\n  const interpretationModalOpen = useSelector(state => !!state.interpretation.id);\n  const feature = useSelector(state => state.feature);\n  const {\n    layersSorting\n  } = useSelector(state => state.ui);\n  const basemapConfig = useBasemapConfig(basemap);\n  const dispatch = useDispatch();\n  const loadedMapViews = mapViews.filter(layer => layer.isLoaded);\n  const isLoading = loadedMapViews.length !== mapViews.length;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MapName, null), /*#__PURE__*/React.createElement(MapView, {\n    isPlugin: false,\n    basemap: basemapConfig,\n    layers: loadedMapViews,\n    bounds: bounds,\n    feature: feature,\n    openContextMenu: config => dispatch(openContextMenu(config)),\n    coordinatePopup: coordinatePopup,\n    interpretationModalOpen: interpretationModalOpen,\n    closeCoordinatePopup: () => dispatch(closeCoordinatePopup()),\n    setAggregations: data => dispatch(setAggregations(data)),\n    setFeatureProfile: val => dispatch(setFeatureProfile(val)),\n    resizeCount: resizeCount,\n    setMapObject: setMap,\n    layersSorting: layersSorting\n  }), isLoading && /*#__PURE__*/React.createElement(MapLoadingMask, null));\n};\nMapContainer.propTypes = {\n  resizeCount: PropTypes.number.isRequired,\n  setMap: PropTypes.func.isRequired\n};\nexport default MapContainer;","import * as types from '../constants/actionTypes.js';\nexport const setAggregations = payload => ({\n  type: types.AGGREGATIONS_SET,\n  payload\n});","// extracted by mini-css-extract-plugin\nexport default {\"mapPosition\":\"MapPosition_mapPosition__Yx9lo\",\"mapContainer\":\"MapPosition_mapContainer__zTCuq\",\"download\":\"MapPosition_download__Dkt62\",\"mapContainerDownload\":\"MapPosition_mapContainerDownload__qsoiu\",\"downloadMapInfoOpen\":\"MapPosition_downloadMapInfoOpen__Uze65\",\"mapDefault\":\"MapPosition_mapDefault__agayy\",\"mapDownload\":\"MapPosition_mapDownload__LA7+9\"};","import cx from 'classnames';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { getSplitViewLayer } from '../../util/helpers.js';\nimport DownloadMapInfo from '../download/DownloadMapInfo.js';\nimport NorthArrow from '../download/NorthArrow.js';\nimport MapContainer from '../map/MapContainer.js';\nimport styles from './styles/MapPosition.module.css';\nconst MapPosition = () => {\n  const [map, setMap] = useState();\n  const [resizeCount, setResizeCount] = useState(0);\n  const {\n    showName,\n    showDescription,\n    showLegend,\n    showInLegend,\n    showOverviewMap,\n    showNorthArrow\n  } = useSelector(state => state.download);\n  const {\n    id: mapId,\n    mapViews: layers\n  } = useSelector(state => state.map);\n  const {\n    downloadMode,\n    layersPanelOpen,\n    rightPanelOpen,\n    dataTableHeight\n  } = useSelector(state => state.ui);\n  const dataTableOpen = useSelector(state => !!state.dataTable);\n  const downloadMapInfoOpen = downloadMode && (showName || showDescription || showLegend && !!showInLegend.length || showOverviewMap);\n  const isSplitView = !!getSplitViewLayer(layers);\n\n  // Trigger map resize when panels are expanded, collapsed or dragged\n  useEffect(() => {\n    setResizeCount(count => count + 1);\n  }, [dataTableOpen, dataTableHeight, downloadMapInfoOpen, layersPanelOpen, rightPanelOpen]);\n\n  // Reset bearing and pitch when new map (mapId changed)\n  useEffect(() => {\n    if (map) {\n      const mapgl = map.getMapGL();\n      if (mapgl) {\n        mapgl.setBearing(0);\n        mapgl.setPitch(0);\n      }\n    }\n  }, [map, mapId]);\n\n  // Fit layer bounds when app mode is toggled\n  useEffect(() => {\n    if (map) {\n      const mapgl = map.getMapGL();\n      mapgl.once('resize', () => {\n        map.fitBounds(map.getLayersBounds(), {\n          padding: 40,\n          bearing: mapgl.getBearing()\n        });\n      });\n      setTimeout(() => {\n        if (map.getMapGL()) {\n          map.resize();\n        }\n      }, 500);\n    }\n  }, [map, downloadMode]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.mapDefault, {\n      [styles.mapDownload]: downloadMode,\n      [styles.downloadMapInfoOpen]: downloadMapInfoOpen\n    }),\n    style: dataTableOpen ? {\n      height: `calc(100vh - var(--header-height) - var(--toolbar-height) - ${dataTableHeight}px)`\n    } : {}\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"dhis2-map-container\",\n    className: cx(styles.mapContainer, {\n      [styles.download]: downloadMode,\n      'dhis2-map-download': downloadMode,\n      'dhis2-map-new': !mapId\n    })\n  }, /*#__PURE__*/React.createElement(MapContainer, {\n    resizeCount: resizeCount,\n    setMap: setMap\n  }), downloadMode && map && /*#__PURE__*/React.createElement(React.Fragment, null, downloadMapInfoOpen && /*#__PURE__*/React.createElement(DownloadMapInfo, {\n    map: map.getMapGL(),\n    isSplitView: isSplitView\n  }), showNorthArrow && !isSplitView && /*#__PURE__*/React.createElement(NorthArrow, {\n    map: map.getMapGL(),\n    downloadMapInfoOpen: downloadMapInfoOpen\n  }))));\n};\nexport default MapPosition;","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"DownloadButton_button__y1y17\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport React from 'react';\nimport { openDownloadMode } from '../../util/history.js';\nimport styles from './styles/DownloadButton.module.css';\nconst DownloadButton = () => {\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: cx(styles.button, 'push-analytics-download-dropdown-menu-button'),\n    onClick: openDownloadMode\n  }, i18n.t('Download'));\n};\nexport default DownloadButton;","import { InterpretationsAndDetailsToggler as AnalyticsInterpretationsAndDetailsToggler } from '@dhis2/analytics';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { openInterpretationsPanel, closeInterpretationsPanel } from '../../actions/ui.js';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nconst InterpretationsToggle = () => {\n  const interpretationsEnabled = useSelector(state => Boolean(state.map.id));\n  const interpretationsOpen = useSelector(state => state.ui.rightPanelOpen && !state.orgUnitProfile);\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => {\n    if (interpretationsOpen) {\n      dispatch(closeInterpretationsPanel());\n    } else {\n      dispatch(openInterpretationsPanel());\n    }\n  }, [dispatch, interpretationsOpen]);\n  const onClose = useCallback(() => {\n    if (interpretationsOpen) {\n      dispatch(closeInterpretationsPanel());\n    }\n  }, [dispatch, interpretationsOpen]);\n  useKeyDown('Escape', onClose, true);\n  return /*#__PURE__*/React.createElement(AnalyticsInterpretationsAndDetailsToggler, {\n    disabled: !interpretationsEnabled,\n    onClick: onClick,\n    isShowing: interpretationsOpen\n  });\n};\nexport default InterpretationsToggle;","import * as types from '../constants/actionTypes.js';\n\n// Initialize visible layerSources\nexport const initLayerSources = newArray => ({\n  type: types.LAYER_SOURCES_INIT,\n  payload: newArray\n});\n\n// Add layerSource\nexport const addLayerSource = id => ({\n  type: types.LAYER_SOURCE_ADD,\n  payload: id\n});\n\n// Remove layerSource\nexport const removeLayerSource = id => ({\n  type: types.LAYER_SOURCE_REMOVE,\n  payload: id\n});","import { FALLBACK_BASEMAP_ID } from './basemaps.js';\nimport { MAP_SERVICE_KEY_TESTS } from './layers.js';\nexport const apiVersion = 40;\nexport const DEFAULT_SYSTEM_SETTINGS = {\n  keyDefaultBaseMap: FALLBACK_BASEMAP_ID\n};\nexport const SYSTEM_SETTINGS = ['keyAnalysisRelativePeriod', 'keyHideDailyPeriods', 'keyHideWeeklyPeriods', 'keyHideBiWeeklyPeriods', 'keyHideMonthlyPeriods', 'keyHideBiMonthlyPeriods', 'keyDefaultBaseMap', ...Object.keys(MAP_SERVICE_KEY_TESTS)];\nexport const MAPS_ADMIN_AUTHORITY_IDS = ['ALL', 'F_EXTERNAL_MAP_LAYER_PUBLIC_ADD'];\nexport const MAPS_APP_NAMESPACE = 'DHIS2_MAPS_APP_CORE';\nexport const MAPS_APP_KEY_MANAGED_LAYER_SOURCES = 'MANAGED_LAYER_SOURCES';","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addLayerSource, removeLayerSource } from '../actions/layerSources.js';\nimport { MAPS_APP_NAMESPACE, MAPS_APP_KEY_MANAGED_LAYER_SOURCES } from '../constants/settings.js';\nconst resourceLayerSourcesVisibility = `dataStore/${MAPS_APP_NAMESPACE}/${MAPS_APP_KEY_MANAGED_LAYER_SOURCES}`;\nconst useManagedLayerSourcesStore = () => {\n  const [error, setError] = useState();\n  const engine = useDataEngine();\n  const dispatch = useDispatch();\n  const managedLayerSources = useSelector(state => state.layerSources);\n\n  // Add layer id to data store & redux store\n  const showLayerSource = useCallback(layerId => {\n    if (!managedLayerSources.includes(layerId)) {\n      engine.mutate({\n        resource: resourceLayerSourcesVisibility,\n        type: 'update',\n        data: [...managedLayerSources, layerId]\n      }).then(response => {\n        if ([200, 201].includes(response.httpStatusCode)) {\n          dispatch(addLayerSource(layerId));\n        } else {\n          setError(response);\n        }\n      }).catch(setError);\n    }\n  }, [engine, dispatch, managedLayerSources]);\n\n  // Remove layer id from data store & redux store\n  const hideLayerSource = useCallback(layerId => {\n    if (managedLayerSources.includes(layerId)) {\n      engine.mutate({\n        resource: resourceLayerSourcesVisibility,\n        type: 'update',\n        data: managedLayerSources.filter(l => l !== layerId)\n      }).then(response => {\n        if ([200, 201].includes(response.httpStatusCode)) {\n          dispatch(removeLayerSource(layerId));\n        } else {\n          setError(response);\n        }\n      }).catch(setError);\n    }\n  }, [engine, dispatch, managedLayerSources]);\n  return {\n    managedLayerSources,\n    showLayerSource,\n    hideLayerSource,\n    error\n  };\n};\nexport default useManagedLayerSourcesStore;","// extracted by mini-css-extract-plugin\nexport default {\"layerSource\":\"LayerSource_layerSource__LZ9AT\",\"layerSourceInfo\":\"LayerSource_layerSourceInfo__NqHKO\",\"source\":\"LayerSource_source__eUHPZ\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Checkbox } from '../core/index.js';\nimport styles from './styles/LayerSource.module.css';\nconst LayerSource = _ref => {\n  let {\n    layerSource,\n    isAdded,\n    onShow,\n    onHide\n  } = _ref;\n  const {\n    layerId,\n    name,\n    img,\n    description,\n    source\n  } = layerSource;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.layerSource\n    // Is current layer already in list? y > trigger hide, n > trigger show\n    ,\n    onClick: () => isAdded ? onHide(layerId) : onShow(layerId)\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    dataTest: \"layersource-checkbox\",\n    checked: isAdded,\n    dense: false,\n    onChange: () => {}\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.layerSourceInfo\n  }, /*#__PURE__*/React.createElement(\"h2\", null, name), /*#__PURE__*/React.createElement(\"p\", null, description), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.source\n  }, i18n.t('Source'), \": \", source)));\n};\nLayerSource.propTypes = {\n  isAdded: PropTypes.bool.isRequired,\n  layerSource: PropTypes.object.isRequired,\n  onHide: PropTypes.func.isRequired,\n  onShow: PropTypes.func.isRequired\n};\nexport default LayerSource;","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"ManageLayerSourcesModal_description__C47kU\",\"layersTable\":\"ManageLayerSourcesModal_layersTable__Cxsy7\"};","import i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport earthEngineLayers from '../../constants/earthEngineLayers/index.js';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nimport useManagedLayerSourcesStore from '../../hooks/useManagedLayerSourcesStore.js';\nimport LayerSource from './LayerSource.js';\nimport styles from './styles/ManageLayerSourcesModal.module.css';\nconst nonLegacyEarthEngineLayers = earthEngineLayers.filter(l => !l.legacy).sort((a, b) => a.name.localeCompare(b.name));\nconst layerSources = [...nonLegacyEarthEngineLayers];\nconst ManageLayerSourcesModal = _ref => {\n  let {\n    onClose\n  } = _ref;\n  const {\n    managedLayerSources,\n    showLayerSource,\n    hideLayerSource\n  } = useManagedLayerSourcesStore();\n  useKeyDown('Escape', onClose);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    large: true,\n    position: \"middle\",\n    dataTest: \"managelayersourcesmodal\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, {\n    dataTest: \"managelayersourcesmodal-title\"\n  }, i18n.t('Configure available layer sources')), /*#__PURE__*/React.createElement(ModalContent, {\n    dataTest: \"managelayersourcesmodal-content\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, i18n.t('Choose which layer sources are available to add to maps. This selection applies to all users.')), layerSources.map(layerSource => /*#__PURE__*/React.createElement(LayerSource, {\n    key: layerSource.layerId,\n    layerSource: layerSource,\n    isAdded: managedLayerSources.includes(layerSource.layerId),\n    onShow: showLayerSource,\n    onHide: hideLayerSource\n  }))), /*#__PURE__*/React.createElement(ModalActions, {\n    dataTest: \"managelayersourcesmodal-actions\"\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"managelayersourcesmodal-button\",\n    secondary: true,\n    onClick: onClose\n  }, i18n.t('Close')))));\n};\nManageLayerSourcesModal.propTypes = {\n  onClose: PropTypes.func.isRequired\n};\nexport default ManageLayerSourcesModal;","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"ManageLayerSourcesButton_button__KU7EO\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { MAPS_ADMIN_AUTHORITY_IDS } from '../../constants/settings.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport styles from './styles/ManageLayerSourcesButton.module.css';\nconst ManageLayerSourcesButton = _ref => {\n  let {\n    onClick\n  } = _ref;\n  const {\n    currentUser\n  } = useCachedData();\n  const isMapsAdmin = MAPS_ADMIN_AUTHORITY_IDS.some(id => currentUser.authorities.has(id));\n  if (!isMapsAdmin) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.button\n  }, /*#__PURE__*/React.createElement(Button, {\n    dataTest: \"managelayersources-button\",\n    small: true,\n    secondary: true,\n    onClick: onClick\n  }, i18n.t('Manage available layer sources')));\n};\nManageLayerSourcesButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default ManageLayerSourcesButton;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Layer_container__trKbO\",\"image\":\"Layer_image__BhkIA\",\"noImage\":\"Layer_noImage__oZTQr\",\"name\":\"Layer_name__mVlxY\",\"tooltip\":\"Layer_tooltip__neBzd\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Layer.module.css';\nconst Layer = _ref => {\n  let {\n    layer,\n    onClick\n  } = _ref;\n  const {\n    img,\n    type,\n    name\n  } = layer;\n  const label = name || i18n.t(type);\n  const dataTest = `addlayeritem-${label.toLowerCase().replace(/\\s/g, '_')}`;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    onClick: () => onClick(layer),\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"bottom\",\n    content: label,\n    openDelay: 300,\n    closeDelay: 100,\n    className: styles.tooltip\n  }, /*#__PURE__*/React.createElement(\"div\", null, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  }, i18n.t('External layer')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.name\n  }, label))));\n};\nLayer.propTypes = {\n  layer: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired\n};\nexport default Layer;","// extracted by mini-css-extract-plugin\nexport default {\"layerList\":\"LayerList_layerList__5z1Zw\",\"list\":\"LayerList_list__QSLzN\",\"split\":\"LayerList_split__QTdIt\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Layer from './Layer.js';\nimport styles from './styles/LayerList.module.css';\nconst LayerList = _ref => {\n  let {\n    layers,\n    isSplitView,\n    onLayerSelect\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.layerList\n  }, isSplitView ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.split\n  }, i18n.t('Split view can not be combined with other layer types.')) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list,\n    \"data-test\": \"addlayerlist\"\n  }, layers.map((layer, index) => /*#__PURE__*/React.createElement(Layer, {\n    key: `layer-${index}`,\n    onClick: onLayerSelect,\n    layer: layer\n  }))));\n};\nLayerList.propTypes = {\n  layers: PropTypes.array.isRequired,\n  onLayerSelect: PropTypes.func.isRequired,\n  isSplitView: PropTypes.bool\n};\nexport default LayerList;","import { Popover } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { addLayer, editLayer } from '../../../actions/layers.js';\nimport earthEngineLayers from '../../../constants/earthEngineLayers/index.js';\nimport { EXTERNAL_LAYER } from '../../../constants/layers.js';\nimport useKeyDown from '../../../hooks/useKeyDown.js';\nimport useManagedLayerSourcesStore from '../../../hooks/useManagedLayerSourcesStore.js';\nimport { isSplitViewMap } from '../../../util/helpers.js';\nimport { useCachedData } from '../../cachedDataProvider/CachedDataProvider.js';\nimport ManageLayerSourcesButton from '../../layerSources/ManageLayerSourcesButton.js';\nimport LayerList from './LayerList.js';\nconst includeEarthEngineLayers = (defaultLayerSources, managedLayerSources) => {\n  // Earth Engine layers that are added to this DHIS2 instance\n  const managedEarthEngineLayers = earthEngineLayers.filter(l => !l.legacy && managedLayerSources.includes(l.layerId)).sort((a, b) => a.name.localeCompare(b.name));\n\n  // Make copy before slicing below\n  const layerSources = [...defaultLayerSources];\n\n  // Insert Earth Engine layers before external layers\n  layerSources.splice(5, 0, ...managedEarthEngineLayers);\n  return layerSources;\n};\nconst AddLayerPopover = _ref => {\n  let {\n    anchorEl,\n    onClose,\n    onManaging\n  } = _ref;\n  const isSplitView = useSelector(state => isSplitViewMap(state.map.mapViews));\n  const dispatch = useDispatch();\n  const {\n    defaultLayerSources\n  } = useCachedData();\n  const {\n    managedLayerSources\n  } = useManagedLayerSourcesStore();\n  const layerSources = includeEarthEngineLayers(defaultLayerSources, managedLayerSources);\n  useKeyDown('Escape', onClose);\n  const onLayerSelect = layer => {\n    const config = {\n      ...layer\n    };\n    const layerType = layer.layer;\n    dispatch(layerType === EXTERNAL_LAYER ? addLayer(config) : editLayer(config));\n    onClose();\n  };\n  return /*#__PURE__*/React.createElement(Popover, {\n    arrow: false,\n    reference: anchorEl,\n    placement: \"bottom-start\",\n    maxWidth: 700,\n    onClickOutside: onClose,\n    dataTest: \"addlayerpopover\"\n  }, /*#__PURE__*/React.createElement(LayerList, {\n    layers: layerSources,\n    isSplitView: isSplitView,\n    onLayerSelect: onLayerSelect\n  }), /*#__PURE__*/React.createElement(ManageLayerSourcesButton, {\n    onClick: onManaging\n  }));\n};\nAddLayerPopover.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onManaging: PropTypes.func.isRequired,\n  anchorEl: PropTypes.object\n};\nexport default AddLayerPopover;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"AddLayerButton_container__mZz+Q\",\"button\":\"AddLayerButton_button__1KcH9\",\"content\":\"AddLayerButton_content__52Hkk\"};","import i18n from '@dhis2/d2-i18n';\nimport { IconAddCircle24 } from '@dhis2/ui';\nimport React, { useState, useRef } from 'react';\nimport ManageLayerSourcesModal from '../../layerSources/ManageLayerSourcesModal.js';\nimport AddLayerPopover from './AddLayerPopover.js';\nimport styles from './styles/AddLayerButton.module.css';\nconst AddLayerButton = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isManaging, setIsManaging] = useState(false);\n  const buttonRef = useRef();\n  const toggleDialog = () => setIsOpen(!isOpen);\n  const onManaging = () => {\n    setIsManaging(true);\n    setIsOpen(false);\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    ref: buttonRef\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.button,\n    onClick: toggleDialog,\n    \"data-test\": \"add-layer-button\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(IconAddCircle24, null), /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Add layer'))))), isOpen && /*#__PURE__*/React.createElement(AddLayerPopover, {\n    anchorEl: buttonRef,\n    onClose: toggleDialog,\n    onManaging: onManaging\n  }), isManaging && /*#__PURE__*/React.createElement(ManageLayerSourcesModal, {\n    onClose: () => setIsManaging(false)\n  }));\n};\nexport default AddLayerButton;","import { Toolbar, HoverMenuBar } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport DownloadButton from '../download/DownloadButton.js';\nimport InterpretationsToggle from '../interpretations/InterpretationsToggle.js';\nimport AddLayerButton from '../layers/overlays/AddLayerButton.js';\nimport FileMenu from './FileMenu.js';\nconst AppMenu = _ref => {\n  let {\n    onFileMenuAction\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Toolbar, null, /*#__PURE__*/React.createElement(AddLayerButton, null), /*#__PURE__*/React.createElement(HoverMenuBar, null, /*#__PURE__*/React.createElement(FileMenu, {\n    onFileMenuAction: onFileMenuAction\n  }), /*#__PURE__*/React.createElement(DownloadButton, null)), /*#__PURE__*/React.createElement(InterpretationsToggle, null));\n};\nAppMenu.propTypes = {\n  onFileMenuAction: PropTypes.func.isRequired\n};\nexport default AppMenu;","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"FeatureProfile_drawer__6C7zS\",\"header\":\"FeatureProfile_header__2oNEE\",\"close\":\"FeatureProfile_close__G7Ga2\",\"content\":\"FeatureProfile_content__ot5Tg\",\"dataTable\":\"FeatureProfile_dataTable__37Zz0\",\"noData\":\"FeatureProfile_noData__7T1iN\"};","import i18n from '@dhis2/d2-i18n';\nimport { IconCross24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeFeatureProfile } from '../../actions/feature.js';\nimport Drawer from '../core/Drawer.js';\nimport styles from './styles/FeatureProfile.module.css';\nconst DrawerContent = _ref => {\n  let {\n    data\n  } = _ref;\n  if (Object.keys(data).length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noData\n    }, i18n.t('No data to show for this feature.'));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.featureData\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dataTable\n  }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, Object.keys(data).map(key => /*#__PURE__*/React.createElement(\"tr\", {\n    key: key\n  }, /*#__PURE__*/React.createElement(\"th\", null, key), /*#__PURE__*/React.createElement(\"td\", null, data[key])))))));\n};\nDrawerContent.propTypes = {\n  data: PropTypes.object.isRequired\n};\nconst FeatureProfile = () => {\n  const featureProfile = useSelector(state => state.featureProfile);\n  const dispatch = useDispatch();\n  const {\n    name,\n    data\n  } = featureProfile;\n  return /*#__PURE__*/React.createElement(Drawer, {\n    className: styles.drawer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"feature-profile-header\",\n    className: styles.header\n  }, name || i18n.t('Feature profile'), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.close,\n    onClick: () => dispatch(closeFeatureProfile())\n  }, /*#__PURE__*/React.createElement(IconCross24, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(DrawerContent, {\n    data: data\n  })));\n};\nexport default FeatureProfile;","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"ContextMenu_anchor__QxrcP\",\"menu\":\"ContextMenu_menu__lWeSg\"};","import { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, Tooltip, IconArrowUp16, IconArrowDown16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { ConditionalWrapper } from '../core/index.js';\nimport styles from './styles/ContextMenu.module.css';\nconst ContextMenu = props => {\n  const {\n    position,\n    offset,\n    feature,\n    container,\n    isSplitView,\n    onDrill,\n    onClose\n  } = props;\n  const {\n    isDisconnected: isOffline\n  } = useDhis2ConnectionStatus();\n  const anchorRef = useRef();\n  const [anchorPosition, setAnchorPosition] = useState();\n  useEffect(() => {\n    if (position) {\n      const [x, y] = position;\n      if (!isSplitView) {\n        setAnchorPosition({\n          left: x,\n          top: y\n        });\n      } else {\n        const [mapLeft, mapTop] = offset;\n        const {\n          left,\n          top\n        } = container.getBoundingClientRect();\n        setAnchorPosition({\n          left: mapLeft - left + x,\n          top: mapTop - top + y\n        });\n      }\n    }\n  }, [position, offset, container, isSplitView]);\n  const {\n    hasCoordinatesUp,\n    hasCoordinatesDown\n  } = feature.properties;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.anchor,\n    style: anchorPosition\n  }), /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: onClose\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(ConditionalWrapper, {\n    condition: isOffline,\n    wrapper: children => /*#__PURE__*/React.createElement(Tooltip, {\n      content: i18n.t('Not available offline')\n    }, children)\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill up one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowUp16, null),\n    disabled: !hasCoordinatesUp || isOffline,\n    onClick: () => onDrill('up')\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill down one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowDown16, null),\n    disabled: !hasCoordinatesDown || isOffline,\n    onClick: () => onDrill('down')\n  }))))));\n};\nContextMenu.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onDrill: PropTypes.func.isRequired,\n  container: PropTypes.instanceOf(Element),\n  feature: PropTypes.object,\n  isSplitView: PropTypes.bool,\n  offset: PropTypes.array,\n  position: PropTypes.array\n};\nexport default ContextMenu;","import { Analytics } from '@dhis2/analytics';\nimport { useDataEngine, useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport { useState, useEffect } from 'react';\nimport earthEngineLoader from '../../loaders/earthEngineLoader.js';\nimport eventLoader from '../../loaders/eventLoader.js';\nimport externalLoader from '../../loaders/externalLoader.js';\nimport facilityLoader from '../../loaders/facilityLoader.js';\nimport geoJsonUrlLoader from '../../loaders/geoJsonUrlLoader.js';\nimport orgUnitLoader from '../../loaders/orgUnitLoader.js';\nimport thematicLoader from '../../loaders/thematicLoader.js';\nimport trackedEntityLoader from '../../loaders/trackedEntityLoader.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nconst loaders = {\n  earthEngine: earthEngineLoader,\n  event: eventLoader,\n  external: externalLoader,\n  facility: facilityLoader,\n  orgUnit: orgUnitLoader,\n  thematic: thematicLoader,\n  geoJsonUrl: geoJsonUrlLoader,\n  trackedEntity: trackedEntityLoader\n};\nconst LayerLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  const {\n    baseUrl,\n    serverVersion\n  } = useConfig();\n  const engine = useDataEngine();\n  const [analyticsEngine] = useState(() => Analytics.getAnalytics(engine));\n  const {\n    currentUser\n  } = useCachedData();\n  const {\n    keyAnalysisDisplayProperty,\n    id: userId\n  } = currentUser;\n  useEffect(() => {\n    const loader = loaders[config.layer];\n    loader({\n      config,\n      engine,\n      keyAnalysisDisplayProperty,\n      // name/shortName\n      userId,\n      baseUrl,\n      analyticsEngine,\n      // Thematic and Event loader\n      serverVersion // Tracked entity loader\n    }).then(result => {\n      onLoad(result);\n    });\n  }, [config, onLoad, engine, analyticsEngine, userId, baseUrl, keyAnalysisDisplayProperty, serverVersion]);\n  return null;\n};\nLayerLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default LayerLoader;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport LayerLegend from '../legend/Legend.js';\n\n// Renders a legend with alerts for one map layer\nconst LegendLayer = _ref => {\n  let {\n    id,\n    legend,\n    alerts = []\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: id\n  }, legend && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"dhis2-map-legend-title\"\n  }, legend.title, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"dhis2-map-legend-period\"\n  }, legend.period)), /*#__PURE__*/React.createElement(LayerLegend, _extends({\n    isPlugin: true\n  }, legend))), alerts.map((alert, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"dhis2-map-legend-alert\"\n  }, alert.message)));\n};\nLegendLayer.propTypes = {\n  id: PropTypes.string.isRequired,\n  alerts: PropTypes.array,\n  data: PropTypes.array,\n  layer: PropTypes.string,\n  legend: PropTypes.object,\n  serverCluster: PropTypes.bool\n};\nexport default LegendLayer;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport LegendLayer from './LegendLayer.js';\nimport './styles/Legend.css';\n\n// Renders a legend for all map layers\nconst Legend = _ref => {\n  let {\n    layers\n  } = _ref;\n  const [isOpen, toggleOpen] = useState(false);\n  const legendLayers = layers.filter(layer => layer.legend || layer.alerts).reverse(); // Show top layer first\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend\"\n  }, isOpen ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend-content\",\n    onMouseLeave: () => toggleOpen(false)\n  }, legendLayers.map(layer => /*#__PURE__*/React.createElement(LegendLayer, _extends({\n    key: layer.id\n  }, layer)))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend-button\",\n    title: i18n.t('Legend'),\n    onMouseEnter: () => toggleOpen(true)\n  }));\n};\nLegend.propTypes = {\n  layers: PropTypes.array.isRequired\n};\nexport default Legend;","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"Map_map__+vlFw\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { CssReset, CssVariables, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { forwardRef, useState, useCallback, useEffect, useRef } from 'react';\nimport { drillUpDown } from '../../util/map.js';\nimport { didViewsChange } from '../../util/pluginHelper.js';\nimport MapView from '../map/MapView.js';\nimport ContextMenu from './ContextMenu.js';\nimport LayerLoader from './LayerLoader.js';\nimport Legend from './Legend.js';\nimport styles from './styles/Map.module.css';\nconst defaultBounds = [[-18.7, -34.9], [50.2, 35.9]];\nconst Map = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    basemap,\n    mapViews,\n    controls,\n    getResizeFunction\n  } = props;\n  const layers = useRef(mapViews.map(config => ({\n    ...config,\n    isLoaded: false\n  })));\n  useEffect(() => {\n    if (didViewsChange(layers.current, mapViews)) {\n      layers.current = mapViews.map(v => ({\n        ...v,\n        isLoaded: false\n      }));\n      setMapIsLoaded(false);\n    }\n  }, [mapViews]);\n  const [mapIsLoaded, setMapIsLoaded] = useState(mapViews.length === 0);\n  const [contextMenu, setContextMenu] = useState();\n  const [resizeCount, setResizeCount] = useState(0);\n  const onResize = () => setResizeCount(state => state + 1);\n  const onLayerLoad = useCallback(layer => {\n    layers.current = layers.current.map(l => layer.id === l.id ? layer : l);\n    if (layers.current.every(l => l.isLoaded)) {\n      setMapIsLoaded(true);\n    }\n  }, []);\n\n  // TODO: Remove when map.js is refactored\n  useEffect(() => {\n    if (getResizeFunction) {\n      getResizeFunction(onResize);\n    }\n  }, [getResizeFunction]);\n  const onDrill = async direction => {\n    const {\n      layerId,\n      feature\n    } = contextMenu;\n    let newConfig;\n    if (layerId && feature) {\n      const {\n        level,\n        id,\n        parentGraph,\n        grandParentId,\n        grandParentParentGraph\n      } = feature.properties;\n      const layerConfig = layers.current.find(layer => layer.id === layerId);\n      if (direction === 'up') {\n        newConfig = drillUpDown(layerConfig, grandParentId, grandParentParentGraph, parseInt(level) - 1);\n      } else {\n        newConfig = drillUpDown(layerConfig, id, parentGraph, parseInt(level) + 1);\n      }\n      layers.current = layers.current.map(layer => layer.id === layerId ? {\n        ...newConfig,\n        isLoaded: false\n      } : layer);\n      setMapIsLoaded(false);\n      setContextMenu();\n    }\n  };\n  if (!mapIsLoaded) {\n    const layersToLoad = layers.current.filter(config => !config.isLoaded && !config.isLoading);\n    layers.current = layers.current.map(layer => layersToLoad.find(l => l.id === layer.id) ? {\n      ...layer,\n      isLoading: true\n    } : layer);\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null), layersToLoad.map(config => /*#__PURE__*/React.createElement(LayerLoader, {\n      key: config.id,\n      config: config,\n      onLoad: onLayerLoad\n    })));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: `dhis2-map-plugin ${styles.map}`\n  }, /*#__PURE__*/React.createElement(CssReset, null), /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    theme: true\n  }), /*#__PURE__*/React.createElement(MapView, {\n    isPlugin: true,\n    isFullscreen: false,\n    basemap: basemap,\n    layers: layers.current,\n    controls: controls,\n    bounds: defaultBounds,\n    openContextMenu: setContextMenu,\n    resizeCount: resizeCount\n  }), mapViews.length > 0 && /*#__PURE__*/React.createElement(Legend, {\n    layers: layers.current\n  }), contextMenu && /*#__PURE__*/React.createElement(ContextMenu, _extends({}, contextMenu, {\n    onDrill: onDrill,\n    onClose: () => setContextMenu()\n  })));\n});\nMap.displayName = 'PluginMap';\nMap.propTypes = {\n  basemap: PropTypes.object,\n  controls: PropTypes.array,\n  getResizeFunction: PropTypes.func,\n  mapViews: PropTypes.array,\n  name: PropTypes.string\n};\nexport default Map;","import { EARTH_ENGINE_LAYER } from '../constants/layers.js';\nconst didViewsChange = (oldViews, newViews) => {\n  return newViews.some((newView, i) => {\n    const oldView = oldViews[i];\n\n    // EE layers don't have filters\n    if (oldView.layer === EARTH_ENGINE_LAYER) {\n      return false;\n    }\n    if (oldView.filters.length !== newView.filters.length || oldView.rows.length !== newView.rows.length) {\n      return true;\n    }\n    if (newView.filters.some((filter, j) => {\n      const oldItemIds = oldView.filters[j].items.map(item => item.id);\n      const newItemIds = filter.items.map(item => item.id);\n      return oldItemIds.length !== newItemIds.length || !oldItemIds.every((id, index) => id === newItemIds[index]);\n    })) {\n      return true;\n    }\n    if (newView.rows.some((row, j) => {\n      const oldItemIds = oldView.rows[j].items.map(item => item.id);\n      const newItemIds = row.items.map(item => item.id);\n      return oldItemIds.length !== newItemIds.length || !oldItemIds.every((id, index) => id === newItemIds[index]);\n    })) {\n      return true;\n    }\n    return false;\n  });\n};\nexport { didViewsChange };","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"InterpretationMap_map__pDQzD\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport { getPeriodsFromFilters } from '../../util/analytics.js';\nimport { getRelativePeriods } from '../../util/periods.js';\nimport Map from '../plugin/Map.js';\nimport styles from './styles/InterpretationMap.module.css';\nconst InterpretationMap = _ref => {\n  let {\n    visualization,\n    filters,\n    onResponsesReceived\n  } = _ref;\n  const [mapViews, setMapViews] = useState();\n  const basemapConfig = useBasemapConfig(visualization.basemap);\n  useEffect(() => {\n    // Find layers with relative periods\n    const relativePeriodLayers = visualization.mapViews.filter(config => {\n      const periods = getPeriodsFromFilters(config.filters);\n      return periods && periods.some(period => getRelativePeriods().some(p => p.id === period.id));\n    }).map(layer => ({\n      ...layer,\n      ...filters,\n      // includes relativePeriodDate\n      isLoaded: false\n    }));\n    if (relativePeriodLayers.length) {\n      // Replace relative period layers and update state\n      setMapViews(visualization.mapViews.map(layer => relativePeriodLayers.find(relativeLayer => relativeLayer.id === layer.id) || layer));\n    } else {\n      setMapViews(visualization.mapViews);\n    }\n  }, [visualization, filters]);\n  useEffect(() => {\n    if (mapViews) {\n      onResponsesReceived();\n    }\n  }, [mapViews, onResponsesReceived]);\n  return mapViews ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.map\n  }, /*#__PURE__*/React.createElement(Map, _extends({}, visualization, {\n    basemap: basemapConfig,\n    mapViews: mapViews\n  }))) : null;\n};\nInterpretationMap.propTypes = {\n  visualization: PropTypes.object.isRequired,\n  onResponsesReceived: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  filters: PropTypes.shape({\n    relativePeriodDate: PropTypes.string.isRequired\n  })\n};\nexport default InterpretationMap;","import { AboutAOUnit, InterpretationsUnit, InterpretationModal } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport queryString from 'query-string';\nimport React, { useRef, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport history, { getHashUrlParams } from '../../util/history.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport Drawer from '../core/Drawer.js';\nimport InterpretationMap from './InterpretationMap.js';\nconst openInterpretationModal = (interpretationId, initialFocus) => {\n  history.push(`${history.location.pathname}?${queryString.stringify({\n    interpretationId,\n    initialFocus\n  })}`);\n};\nconst closeInterpretationModal = () => {\n  history.push(history.location.pathname);\n};\nconst InterpretationsPanel = _ref => {\n  let {\n    renderCount\n  } = _ref;\n  const {\n    currentUser\n  } = useCachedData();\n  const interpretationsUnitRef = useRef();\n  const map = useSelector(state => state.map);\n  const interpretationId = useSelector(state => {\n    var _state$interpretation;\n    return (_state$interpretation = state.interpretation) === null || _state$interpretation === void 0 ? void 0 : _state$interpretation.id;\n  });\n  const onReplyIconClick = useCallback(interpretationId => {\n    openInterpretationModal(interpretationId, true);\n  }, []);\n  const {\n    initialFocus\n  } = getHashUrlParams(history.location);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Drawer, null, /*#__PURE__*/React.createElement(AboutAOUnit, {\n    type: \"map\",\n    id: map.id,\n    renderId: renderCount\n  }), /*#__PURE__*/React.createElement(InterpretationsUnit, {\n    ref: interpretationsUnitRef,\n    type: \"map\",\n    id: map.id,\n    currentUser: currentUser,\n    onInterpretationClick: openInterpretationModal,\n    onReplyIconClick: onReplyIconClick\n  })), interpretationId && /*#__PURE__*/React.createElement(InterpretationModal, {\n    currentUser: currentUser,\n    onInterpretationUpdate: () => interpretationsUnitRef.current.refresh(),\n    initialFocus: initialFocus,\n    interpretationId: interpretationId,\n    isVisualizationLoading: false,\n    onClose: closeInterpretationModal,\n    onResponsesReceived: Function.prototype // Required prop\n    ,\n    visualization: map,\n    pluginComponent: InterpretationMap\n  }));\n};\nInterpretationsPanel.propTypes = {\n  renderCount: PropTypes.number.isRequired\n};\nexport default InterpretationsPanel;","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { openInterpretationsPanel } from '../../actions/ui.js';\nimport InterpretationsPanel from './InterpretationsPanel.js';\nconst Interpretations = _ref => {\n  let {\n    renderCount\n  } = _ref;\n  const isMapLoaded = useSelector(state => state.map.id && !state.map.mapViews.find(layer => !layer.isLoaded));\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (isMapLoaded) {\n      dispatch(openInterpretationsPanel());\n    }\n  }, [isMapLoaded, dispatch]);\n  return isMapLoaded ? /*#__PURE__*/React.createElement(InterpretationsPanel, {\n    renderCount: renderCount\n  }) : null;\n};\nInterpretations.propTypes = {\n  renderCount: PropTypes.number.isRequired\n};\nexport default Interpretations;","import { useRef, useEffect } from 'react';\nconst usePrevious = value => {\n  const prev = useRef();\n  useEffect(() => {\n    prev.current = value;\n  }, [value]);\n  return prev.current;\n};\nexport default usePrevious;","// extracted by mini-css-extract-plugin\nexport default {\"periodSelect\":\"PeriodSelect_periodSelect__+hPnO\",\"select\":\"PeriodSelect_select__vspYN\",\"stepper\":\"PeriodSelect_stepper__Lpne3\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, Tooltip, IconChevronLeft24, IconChevronRight24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport usePrevious from '../../hooks/usePrevious.js';\nimport { getFixedPeriodsByType, filterFuturePeriods } from '../../util/periods.js';\nimport { getYear } from '../../util/time.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/PeriodSelect.module.css';\nconst PeriodSelect = _ref => {\n  let {\n    onChange,\n    className,\n    errorText,\n    firstDate,\n    lastDate,\n    period,\n    periodType,\n    periodsSettings\n  } = _ref;\n  const [year, setYear] = useState(getYear((period === null || period === void 0 ? void 0 : period.startDate) || lastDate));\n  const prevYear = usePrevious(year);\n\n  // Set periods when periodType or year changes\n  /* eslint-disable react-hooks/exhaustive-deps */\n  const periods = useMemo(() => periodType ? getFixedPeriodsByType({\n    periodType,\n    year,\n    firstDate,\n    lastDate,\n    periodsSettings\n  }) : [period],\n  // saved map period (not included in dependency array by design)\n  [periodType, year, firstDate, lastDate, periodsSettings]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n\n  const periodIndex = useMemo(() => period && periods.findIndex(p => p.id === period.id), [period, periods]);\n  const prevPeriodIndex = usePrevious(periodIndex);\n\n  // Increment/decrement year\n  const changeYear = useCallback(change => {\n    const newYear = year + change;\n    if ((!firstDate || newYear >= getYear(firstDate)) && (!lastDate || newYear <= getYear(lastDate))) {\n      setYear(newYear);\n    }\n  }, [year, firstDate, lastDate]);\n\n  // Autoselect most recent period\n  useEffect(() => {\n    if (!period && periods) {\n      onChange(filterFuturePeriods(periods)[0] || periods[0]);\n    }\n  }, [period, periods, onChange]);\n\n  // Keep the same period position when year changes\n  useEffect(() => {\n    if (year !== prevYear && prevPeriodIndex >= 0) {\n      const newPeriod = periods[prevPeriodIndex];\n      if (newPeriod) {\n        onChange(newPeriod);\n      }\n    }\n  }, [year, prevYear, periods, prevPeriodIndex, onChange]);\n  if (!periods) {\n    return null;\n  }\n  const value = period && periods.some(p => p.id === period.id) ? period.id : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.periodSelect, className)\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period'),\n    items: periods,\n    value: value,\n    onChange: onChange,\n    errorText: !value && errorText ? errorText : null,\n    className: styles.select,\n    dataTest: \"year-select\"\n  }), periodType && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.stepper\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Previous year')\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    icon: /*#__PURE__*/React.createElement(IconChevronLeft24, null),\n    onClick: () => changeYear(-1),\n    dataTest: \"button-previous-year\"\n  })), /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Next year')\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    icon: /*#__PURE__*/React.createElement(IconChevronRight24, null),\n    onClick: () => changeYear(1),\n    dataTest: \"button-next-year\"\n  }))));\n};\nPeriodSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  firstDate: PropTypes.string,\n  lastDate: PropTypes.string,\n  period: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    startDate: PropTypes.string\n  }),\n  periodType: PropTypes.string,\n  periodsSettings: PropTypes.object\n};\nexport default PeriodSelect;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitData\":\"OrgUnitData_orgUnitData__ITQsf\",\"periodSelect\":\"OrgUnitData_periodSelect__dViFh\",\"dataTable\":\"OrgUnitData_dataTable__SLpmV\",\"loadingMask\":\"OrgUnitData_loadingMask__86WXT\",\"noData\":\"OrgUnitData_noData__uy7mH\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { getFixedPeriodsByType, filterFuturePeriods } from '../../util/periods.js';\nimport PeriodSelect from '../periods/PeriodSelect.js';\nimport styles from './styles/OrgUnitData.module.css';\nconst ORGUNIT_PROFILE_QUERY = {\n  profile: {\n    resource: 'organisationUnitProfile',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/data`;\n    },\n    params: _ref2 => {\n      let {\n        period\n      } = _ref2;\n      return {\n        period\n      };\n    }\n  }\n};\n\n// Only YEARLY period type is supported in first version\nconst periodType = 'YEARLY';\nconst year = String(new Date().getFullYear());\nconst periods = getFixedPeriodsByType({\n  periodType,\n  year\n});\nconst defaultPeriod = filterFuturePeriods(periods)[0] || periods[0];\n\n/*\n *  Displays a period selector and org unit data items\n * (data elements, indicators, reporting rates, program indicators)\n */\nconst OrgUnitData = _ref3 => {\n  let {\n    id\n  } = _ref3;\n  const [period, setPeriod] = useState(defaultPeriod);\n  const {\n    loading,\n    data,\n    refetch\n  } = useDataQuery(ORGUNIT_PROFILE_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (id && period) {\n      refetch({\n        id,\n        period: period.id\n      });\n    }\n  }, [id, period, refetch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitData,\n    \"data-test\": \"org-unit-data\"\n  }, /*#__PURE__*/React.createElement(PeriodSelect, {\n    label: null,\n    periodType: periodType,\n    period: period,\n    onChange: setPeriod,\n    className: styles.periodSelect\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dataTable\n  }, loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loadingMask\n  }, /*#__PURE__*/React.createElement(CircularLoader, null)), Array.isArray(data === null || data === void 0 ? void 0 : data.profile.dataItems) && data.profile.dataItems.length ? /*#__PURE__*/React.createElement(\"table\", {\n    \"data-test\": \"org-unit-data-table\"\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, data.profile.dataItems.map(_ref4 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref4;\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: id\n    }, /*#__PURE__*/React.createElement(\"th\", null, label), /*#__PURE__*/React.createElement(\"td\", null, value));\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noData\n  }, i18n.t('No data found for this period.'))));\n};\nOrgUnitData.propTypes = {\n  id: PropTypes.string.isRequired\n};\nexport default OrgUnitData;","// extracted by mini-css-extract-plugin\nexport default {\"listItem\":\"ListItem_listItem__joSOw\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ListItem.module.css';\n\n// Left aligned label (no wrap) and right align value of variable width\nconst ListItem = _ref => {\n  let {\n    label,\n    formatter,\n    children\n  } = _ref;\n  return children !== null && children !== undefined && children !== '' ? /*#__PURE__*/React.createElement(\"table\", {\n    className: styles.listItem\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, label), /*#__PURE__*/React.createElement(\"td\", null, formatter ? formatter(children) : children)))) : null;\n};\nListItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  formatter: PropTypes.func\n};\nexport default ListItem;","// extracted by mini-css-extract-plugin\nexport default {\"info\":\"OrgUnitInfo_info__VLP7i\",\"level\":\"OrgUnitInfo_level__0H9j0\",\"desc\":\"OrgUnitInfo_desc__8tqdc\",\"list\":\"OrgUnitInfo_list__tFY1r\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconDimensionOrgUnit16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getRoundToPrecisionFn } from '../../util/numbers.js';\nimport { formatDate } from '../../util/time.js';\nimport ListItem from '../core/ListItem.js';\nimport styles from './styles/OrgUnitInfo.module.css';\nexport const coordFormat = getRoundToPrecisionFn(6); // Meter precision for longitude an latitude\n\n/*\n * Displays the fixed information for an org unit together with org unit groups (above) and metadata attributes (below)\n *\n * Available org unit info fields:\n * https://github.com/dhis2/dhis2-core/blob/master/dhis-2/dhis-services/dhis-service-reporting/src/main/java/org/hisp/dhis/orgunitprofile/OrgUnitInfo.java\n */\nconst OrgUnitInfo = _ref => {\n  let {\n    address,\n    attributes,\n    closedDate,\n    code,\n    comment,\n    contactPerson,\n    description,\n    email,\n    featureType,\n    groupSets,\n    id,\n    imageId,\n    latitude,\n    level,\n    levelName,\n    longitude,\n    name,\n    openingDate,\n    parentName,\n    phoneNumber,\n    shortName,\n    url\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.info,\n    \"data-test\": \"org-unit-info\"\n  }, imageId && /*#__PURE__*/React.createElement(\"img\", {\n    src: `${baseUrl}/api/fileResources/${imageId}/data`,\n    alt: i18n.t('Image of the organisation unit')\n  }), name && /*#__PURE__*/React.createElement(\"h3\", null, name), (level || levelName) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.level\n  }, /*#__PURE__*/React.createElement(IconDimensionOrgUnit16, null), i18n.t('Level'), \":\", ' ', levelName ? `${levelName}${level ? ` (${level})` : ''}` : level), parentName && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.level\n  }, /*#__PURE__*/React.createElement(IconDimensionOrgUnit16, null), i18n.t('Parent'), \": \", parentName), description && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.desc\n  }, description), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list\n  }, groupSets.map(_ref2 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: id,\n      label: label\n    }, value);\n  }), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Code')\n  }, code), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Short name')\n  }, shortName), featureType === 'POINT' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Opening date'),\n    formatter: formatDate\n  }, openingDate), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Closed date'),\n    formatter: formatDate\n  }, closedDate)), url && /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('URL')\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: url,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, i18n.t('Link'))), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Contact')\n  }, contactPerson), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Email')\n  }, email), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Address')\n  }, address), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Phone')\n  }, phoneNumber), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Longitude'),\n    formatter: coordFormat\n  }, longitude), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Latitude'),\n    formatter: coordFormat\n  }, latitude), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('ID')\n  }, id), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Comment')\n  }, comment), attributes.map(_ref3 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: id,\n      label: label\n    }, value);\n  })));\n};\nOrgUnitInfo.propTypes = {\n  attributes: PropTypes.array.isRequired,\n  groupSets: PropTypes.array.isRequired,\n  id: PropTypes.string.isRequired,\n  address: PropTypes.string,\n  closedDate: PropTypes.string,\n  code: PropTypes.string,\n  comment: PropTypes.string,\n  contactPerson: PropTypes.string,\n  description: PropTypes.string,\n  email: PropTypes.string,\n  featureType: PropTypes.string,\n  imageId: PropTypes.string,\n  latitude: PropTypes.number,\n  level: PropTypes.number,\n  levelName: PropTypes.string,\n  longitude: PropTypes.number,\n  name: PropTypes.string,\n  openingDate: PropTypes.string,\n  parentName: PropTypes.string,\n  phoneNumber: PropTypes.string,\n  shortName: PropTypes.string,\n  url: PropTypes.string\n};\nexport default OrgUnitInfo;","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"OrgUnitProfile_drawer__9OzQ+\",\"header\":\"OrgUnitProfile_header__Iohmm\",\"close\":\"OrgUnitProfile_close__zrxvA\",\"content\":\"OrgUnitProfile_content__vagrs\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, IconCross24 } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeOrgUnitProfile } from '../../actions/orgUnits.js';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nimport Drawer from '../core/Drawer.js';\nimport OrgUnitData from './OrgUnitData.js';\nimport OrgUnitInfo from './OrgUnitInfo.js';\nimport styles from './styles/OrgUnitProfile.module.css';\nconst ORGUNIT_PROFILE_QUERY = {\n  profile: {\n    resource: 'organisationUnitProfile',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/data`;\n    }\n  }\n};\n\n/*\n *  Loads an org unit profile and displays it in a right drawer component\n */\nconst OrgUnitProfile = () => {\n  const id = useSelector(state => state.orgUnitProfile);\n  const dispatch = useDispatch();\n  const {\n    loading,\n    data,\n    refetch\n  } = useDataQuery(ORGUNIT_PROFILE_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (id) {\n      refetch({\n        id\n      });\n    }\n  }, [id, refetch]);\n  useKeyDown('Escape', () => dispatch(closeOrgUnitProfile()), true);\n  if (!id) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Drawer, {\n    className: styles.drawer,\n    dataTest: \"org-unit-profile\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, i18n.t('Organisation unit profile'), /*#__PURE__*/React.createElement(\"span\", {\n    role: \"button\",\n    \"aria-label\": i18n.t('Close'),\n    className: styles.close,\n    onClick: () => dispatch(closeOrgUnitProfile())\n  }, /*#__PURE__*/React.createElement(IconCross24, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, loading && /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)), !loading && (data === null || data === void 0 ? void 0 : data.profile) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(OrgUnitInfo, _extends({}, data.profile.info, {\n    groupSets: data.profile.groupSets,\n    attributes: data.profile.attributes\n  })), /*#__PURE__*/React.createElement(OrgUnitData, {\n    id: id\n  }))));\n};\nexport default OrgUnitProfile;","// extracted by mini-css-extract-plugin\nexport default {\"detailsPanel\":\"DetailsPanel_detailsPanel__xkQzH\",\"collapsed\":\"DetailsPanel_collapsed__WdZAy\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport FeatureProfile from '../feature/FeatureProfile.js';\nimport Interpretations from '../interpretations/Interpretations.js';\nimport OrgUnitProfile from '../orgunits/OrgUnitProfile.js';\nimport styles from './styles/DetailsPanel.module.css';\nconst DetailsPanel = _ref => {\n  let {\n    interpretationsRenderCount\n  } = _ref;\n  const detailsPanelOpen = useSelector(state => state.ui.rightPanelOpen);\n  const viewOrgUnitProfile = useSelector(state => state.orgUnitProfile);\n  const viewFeatureProfile = useSelector(state => !!state.featureProfile);\n  const interpretationId = useSelector(state => {\n    var _state$interpretation;\n    return (_state$interpretation = state.interpretation) === null || _state$interpretation === void 0 ? void 0 : _state$interpretation.id;\n  });\n  const getContent = () => {\n    if (interpretationId || detailsPanelOpen && !viewOrgUnitProfile && !viewFeatureProfile) {\n      return /*#__PURE__*/React.createElement(Interpretations, {\n        renderCount: interpretationsRenderCount\n      });\n    }\n    if (detailsPanelOpen) {\n      if (viewOrgUnitProfile) {\n        return /*#__PURE__*/React.createElement(OrgUnitProfile, null);\n      }\n      if (viewFeatureProfile) {\n        return /*#__PURE__*/React.createElement(FeatureProfile, null);\n      }\n    }\n    return null;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"details-panel\",\n    className: cx(styles.detailsPanel, {\n      [styles.collapsed]: !detailsPanelOpen\n    })\n  }, getContent());\n};\nDetailsPanel.propTypes = {\n  interpretationsRenderCount: PropTypes.number.isRequired\n};\nexport default DetailsPanel;","import { useDataEngine } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useState, useEffect, createContext } from 'react';\n\n// Fetches the root org units associated with the current user with fallback to data capture org units\nconst ORG_UNITS_QUERY = {\n  roots: {\n    resource: 'organisationUnits',\n    params: () => ({\n      fields: ['id', 'displayName~rename(name)', 'path'],\n      // TODO organisationUnits has shortName\n      userDataViewFallback: true\n    })\n  },\n  levels: {\n    resource: 'organisationUnitLevels',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'level'],\n      order: 'level:asc',\n      paging: false\n    }\n  }\n};\nexport const OrgUnitsCtx = /*#__PURE__*/createContext({});\nconst OrgUnitsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [orgUnits, setOrgUnits] = useState();\n  const [error, setError] = useState();\n  const engine = useDataEngine();\n  useEffect(() => {\n    engine.query(ORG_UNITS_QUERY, {\n      onComplete: _ref2 => {\n        let {\n          levels,\n          roots\n        } = _ref2;\n        return setOrgUnits({\n          levels: levels.organisationUnitLevels,\n          roots: roots.organisationUnits\n        });\n      },\n      onError: setError\n    });\n  }, [engine]);\n  return /*#__PURE__*/React.createElement(OrgUnitsCtx.Provider, {\n    value: {\n      ...orgUnits,\n      loading: !orgUnits && !error,\n      error\n    }\n  }, children);\n};\nOrgUnitsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default OrgUnitsProvider;\nexport const useOrgUnits = () => useContext(OrgUnitsCtx);","import * as types from '../constants/actionTypes.js';\n\n// Add dimension filter\nexport const addDimensionFilter = filter => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_ADD,\n  filter\n});\n\n// Remove dimension filter\nexport const removeDimensionFilter = index => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_REMOVE,\n  index\n});\n\n// Chenge a dimension filter in an array\nexport const changeDimensionFilter = (index, filter) => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_CHANGE,\n  index,\n  filter\n});\n\n// Add event filter\nexport const addFilter = filter => ({\n  type: types.LAYER_EDIT_FILTER_ADD,\n  filter\n});\n\n// Remove event filter\nexport const removeFilter = index => ({\n  type: types.LAYER_EDIT_FILTER_REMOVE,\n  index\n});\n\n// Change event filter\nexport const changeFilter = (index, filter) => ({\n  type: types.LAYER_EDIT_FILTER_CHANGE,\n  index,\n  filter\n});\n\n// Set program used (event and thematic)\nexport const setProgram = program => ({\n  type: types.LAYER_EDIT_PROGRAM_SET,\n  program\n});\n\n// Set program stage used (event)\nexport const setProgramStage = programStage => ({\n  type: types.LAYER_EDIT_PROGRAM_STAGE_SET,\n  programStage\n});\n\n// Set data item (thematic)\nexport const setDataItem = (dataItem, dimension) => ({\n  type: types.LAYER_EDIT_DATA_ITEM_SET,\n  dataItem,\n  dimension\n});\n\n// Set program indicator used (thematic)\nexport const setDataElementGroup = dataElementGroup => ({\n  type: types.LAYER_EDIT_DATA_ELEMENT_GROUP_SET,\n  dataElementGroup\n});\n\n// Set data element operand (operand = true = details, operand = false = totals)\nexport const setOperand = operand => ({\n  type: types.LAYER_EDIT_OPERAND_SET,\n  operand\n});\n\n// Set data element used for styling (event)\nexport const setStyleDataItem = dataItem => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_SET,\n  dataItem\n});\n\n// Set options for style data element with option set (options are loaded separately) (event layer)\nexport const setOptionStyle = options => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET,\n  options\n});\nexport const setBooleanStyle = (value, color) => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET,\n  value,\n  color\n});\n\n// Set thematic map type (choropleth, bubble map)\nexport const setThematicMapType = type => ({\n  type: types.LAYER_EDIT_THEMATIC_MAP_TYPE_SET,\n  payload: type\n});\n\n// Set classification style (method, classes, colorScale)\nexport const setClassification = method => ({\n  type: types.LAYER_EDIT_CLASSIFICATION_SET,\n  method\n});\nexport const setColorScale = colorScale => ({\n  type: types.LAYER_EDIT_COLOR_SCALE_SET,\n  colorScale\n});\n\n// Set event status\nexport const setEventStatus = status => ({\n  type: types.LAYER_EDIT_EVENT_STATUS_SET,\n  status\n});\n\n// Set coordinate field\nexport const setEventCoordinateField = fieldId => ({\n  type: types.LAYER_EDIT_EVENT_COORDINATE_FIELD_SET,\n  fieldId\n});\n\n// Set fallback coordinate field\nexport const setFallbackCoordinateField = fieldId => ({\n  type: types.LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET,\n  fieldId\n});\n\n// Set if event clustering should be used (event)\nexport const setEventClustering = checked => ({\n  type: types.LAYER_EDIT_EVENT_CLUSTERING_SET,\n  checked\n});\n\n// Set event point radius (event layer)\nexport const setEventPointRadius = radius => ({\n  type: types.LAYER_EDIT_EVENT_POINT_RADIUS_SET,\n  radius\n});\n\n// Set event point color (event layer)\nexport const setEventPointColor = color => ({\n  type: types.LAYER_EDIT_EVENT_POINT_COLOR_SET,\n  color\n});\nexport const setRelatedPointColor = color => ({\n  type: types.LAYER_EDIT_RELATED_POINT_COLOR_SET,\n  color\n});\nexport const setRelatedPointRadius = radius => ({\n  type: types.LAYER_EDIT_RELATED_POINT_RADIUS_SET,\n  radius\n});\nexport const setRelationshipLineColor = color => ({\n  type: types.LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET,\n  color\n});\n\n// Set organisation unit group set (facility and org unit layer)\nexport const setOrganisationUnitGroupSet = organisationUnitGroupSet => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET,\n  organisationUnitGroupSet\n});\n\n// Set organisation unit color (org unit and facility layer)\nexport const setOrganisationUnitColor = color => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET,\n  color\n});\nexport const setOrganisationUnitField = payload => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET,\n  payload\n});\n\n// Set period label (earth engine)\nexport const setPeriodName = periodName => ({\n  type: types.LAYER_EDIT_PERIOD_NAME_SET,\n  periodName\n});\n\n// Set period type (thematic)\nexport const setPeriodType = (periodType, keepPeriod) => ({\n  type: types.LAYER_EDIT_PERIOD_TYPE_SET,\n  periodType,\n  keepPeriod\n});\n\n// Set periods (thematic)\nexport const setPeriods = periods => ({\n  type: types.LAYER_EDIT_PERIODS_SET,\n  periods\n});\n\n// Set period (event & thematic)\nexport const setPeriod = period => ({\n  type: types.LAYER_EDIT_PERIOD_SET,\n  period\n});\n\n// Set start date (event)\nexport const setStartDate = startDate => ({\n  type: types.LAYER_EDIT_START_DATE_SET,\n  startDate\n});\n\n// Set end date (event)\nexport const setEndDate = endDate => ({\n  type: types.LAYER_EDIT_END_DATE_SET,\n  endDate\n});\n\n// Set periods or dates backup\nexport const setBackupPeriodsDates = backupPeriodsDates => ({\n  type: types.LAYER_EDIT_BACKUP_PERIODSDATES_SET,\n  backupPeriodsDates\n});\n\n// Set value type (thematic)\nexport const setValueType = (valueType, keepColumns) => ({\n  type: types.LAYER_EDIT_VALUE_TYPE_SET,\n  valueType,\n  keepColumns // Kept if favorite is loaded\n});\n\n// Set indicator group (thematic)\nexport const setIndicatorGroup = indicatorGroup => ({\n  type: types.LAYER_EDIT_INDICATOR_GROUP_SET,\n  indicatorGroup\n});\n\n// Set aggregation type (thematic/earth engine)\nexport const setAggregationType = aggregationType => ({\n  type: types.LAYER_EDIT_AGGREGATION_TYPE_SET,\n  aggregationType\n});\n\n// Set organisation units\nexport const setOrgUnits = payload => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNITS_SET,\n  payload\n});\n\n// Set org. unit mode\nexport const setOrgUnitMode = mode => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_MODE_SET,\n  payload: mode\n});\n\n// Set layer style (EE)\nexport const setStyle = payload => ({\n  type: types.LAYER_EDIT_STYLE_SET,\n  payload\n});\n\n// Set collection filter (EE)\nexport const setFilter = filter => ({\n  type: types.LAYER_EDIT_FILTER_SET,\n  filter\n});\n\n// Set band (EE)\nexport const setBand = band => ({\n  type: types.LAYER_EDIT_BAND_SET,\n  payload: band\n});\n\n// Set label visibility\nexport const setLabels = isChecked => ({\n  type: types.LAYER_EDIT_LABELS_SET,\n  isChecked\n});\nexport const setLabelTemplate = template => ({\n  type: types.LAYER_EDIT_LABEL_TEMPLATE,\n  template\n});\n\n// Set label font style (italic)\nexport const setLabelFontSize = size => ({\n  type: types.LAYER_EDIT_LABEL_FONT_SIZE_SET,\n  size\n});\n\n// Set label font weight (bold)\nexport const setLabelFontWeight = weight => ({\n  type: types.LAYER_EDIT_LABEL_FONT_WEIGHT_SET,\n  weight\n});\n\n// Set label font style\nexport const setLabelFontStyle = style => ({\n  type: types.LAYER_EDIT_LABEL_FONT_STYLE_SET,\n  style\n});\n\n// Set label font color\nexport const setLabelFontColor = color => ({\n  type: types.LAYER_EDIT_LABEL_FONT_COLOR_SET,\n  color\n});\n\n// Set area radius (facility)\nexport const setBufferRadius = radius => ({\n  type: types.LAYER_EDIT_BUFFER_RADIUS_SET,\n  radius\n});\n\n// Set point radius low (thematic, org unit)\nexport const setRadiusLow = radius => ({\n  type: types.LAYER_EDIT_RADIUS_LOW_SET,\n  radius\n});\n\n// Set point radius high (thematic)\nexport const setRadiusHigh = radius => ({\n  type: types.LAYER_EDIT_RADIUS_HIGH_SET,\n  radius\n});\n\n// Set legend set (event, thematic)\nexport const setLegendSet = legendSet => ({\n  type: types.LAYER_EDIT_LEGEND_SET_SET,\n  legendSet\n});\n\n// Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const setOrgUnitPath = (id, path) => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_PATH_SET,\n  id,\n  path\n});\n\n// Set the tracked entity type\nexport const setTrackedEntityType = trackedEntityType => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_TYPE_SET,\n  trackedEntityType\n});\n\n// Set the type of tracked entity relationship to render\nexport const setTrackedEntityRelationshipType = relationshipType => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET,\n  relationshipType\n});\nexport const setTrackedEntityRelationshipOutsideProgram = checked => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET,\n  payload: checked\n});\n\n// Set program status for a TEI\nexport const setProgramStatus = status => ({\n  type: types.LAYER_EDIT_PROGRAM_STATUS_SET,\n  payload: status\n});\n\n// Set follow up status of a TEI for a given program\nexport const setFollowUpStatus = checked => ({\n  type: types.LAYER_EDIT_FOLLOW_UP_SET,\n  payload: checked\n});\n\n// Set display mode for periods\nexport const setRenderingStrategy = display => ({\n  type: types.LAYER_EDIT_RENDERING_STRATEGY_SET,\n  payload: display\n});\n\n// Set no data color\nexport const setNoDataColor = color => ({\n  type: types.LAYER_EDIT_NO_DATA_COLOR_SET,\n  payload: color\n});\n\n// Set period for EE layer\nexport const setEarthEnginePeriod = payload => ({\n  type: types.LAYER_EDIT_EARTH_ENGINE_PERIOD_SET,\n  payload\n});\n\n// Set feature style\nexport const setFeatureStyle = payload => ({\n  type: types.LAYER_EDIT_FEATURE_STYLE_SET,\n  payload\n});","// extracted by mini-css-extract-plugin\nexport default {\"geometryField\":\"AssociatedGeometrySelect_geometryField__v81Df\",\"geometryDescription\":\"AssociatedGeometrySelect_geometryDescription__cOr4n\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrganisationUnitField } from '../../actions/layerEdit.js';\nimport { NONE } from '../../constants/layers.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/AssociatedGeometrySelect.module.css';\nconst AssociatedGeometrySelect = () => {\n  const geometryField = useSelector(state => state.layerEdit.orgUnitField);\n  const [attributes, setAttributes] = useState([]);\n  const dispatch = useDispatch();\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        fetchedAttributes\n      } = await engine.query({\n        fetchedAttributes: {\n          resource: '/attributes.json?fields=id,name,description&filter=valueType:eq:GEOJSON&filter=organisationUnitAttribute:eq:true'\n        }\n      });\n      setAttributes(fetchedAttributes.attributes);\n    }\n    fetchData();\n  }, [engine]);\n  if (!attributes.length) {\n    return null;\n  }\n  const attribute = attributes.find(a => a.id === geometryField);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.geometryField\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    prefix: i18n.t('Use associated geometry'),\n    items: [{\n      id: NONE,\n      name: i18n.t('None (default)')\n    }, ...attributes],\n    value: geometryField || NONE,\n    onChange: val => dispatch(setOrganisationUnitField(val)),\n    \"data-test\": \"orgunitfieldselect\"\n  }), (attribute === null || attribute === void 0 ? void 0 : attribute.description) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.geometryDescription\n  }, attribute.description));\n};\nexport default AssociatedGeometrySelect;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitSelectMode\":\"OrgUnitSelectMode_orgUnitSelectMode__T7yqh\",\"selectField\":\"OrgUnitSelectMode_selectField__StkPV\"};","import i18n from '@dhis2/d2-i18n';\nimport React, { useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrgUnitMode } from '../../actions/layerEdit.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/OrgUnitSelectMode.module.css';\nconst OrgUnitSelectMode = () => {\n  const organisationUnitSelectionMode = useSelector(state => state.layerEdit.organisationUnitSelectionMode);\n  const dispatch = useDispatch();\n  const items = useMemo(() => [{\n    id: 'SELECTED',\n    name: i18n.t('Selected only')\n  }, {\n    id: 'CHILDREN',\n    name: i18n.t('Selected and below')\n  }, {\n    id: 'DESCENDANTS',\n    name: i18n.t('Selected and all below')\n  }], []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitSelectMode\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    prefix: i18n.t('Selection mode'),\n    items: items,\n    value: organisationUnitSelectionMode || 'SELECTED',\n    onChange: mode => dispatch(setOrgUnitMode(mode.id)),\n    className: styles.selectField\n  }));\n};\nOrgUnitSelectMode.propTypes = {};\nexport default OrgUnitSelectMode;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitSelect\":\"OrgUnitSelect_orgUnitSelect__TMlTS\",\"two\":\"OrgUnitSelect_two__sXMjW\",\"one\":\"OrgUnitSelect_one__Q4dms\",\"none\":\"OrgUnitSelect_none__eXtbq\",\"loader\":\"OrgUnitSelect_loader__xfr0j\"};","import { OrgUnitDimension } from '@dhis2/analytics';\nimport { CenteredContent, CircularLoader, Help } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrgUnits } from '../../actions/layerEdit.js';\nimport { translateOrgUnitLevels } from '../../util/orgUnits.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { useOrgUnits } from '../OrgUnitsProvider.js';\nimport AssociatedGeometrySelect from './AssociatedGeometrySelect.js';\nimport OrgUnitSelectMode from './OrgUnitSelectMode.js';\nimport styles from './styles/OrgUnitSelect.module.css';\nconst TWO_OTHER_SELECTS = 'two';\nconst ONE_OTHER_SELECT = 'one';\nconst NO_OTHER_SELECTS = 'none';\nconst OrgUnitSelect = _ref => {\n  let {\n    hideUserOrgUnits = false,\n    hideAssociatedGeometry = false,\n    hideSelectMode = true,\n    hideLevelSelect = false,\n    hideGroupSelect = false,\n    warning\n  } = _ref;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    roots,\n    levels,\n    loading,\n    error\n  } = useOrgUnits();\n  const rows = useSelector(state => state.layerEdit.rows);\n  const dispatch = useDispatch();\n  const setOrgUnitItems = useCallback(_ref2 => {\n    let {\n      items\n    } = _ref2;\n    return dispatch(setOrgUnits({\n      dimension: 'ou',\n      items\n    }));\n  }, [dispatch]);\n  const orgUnits = translateOrgUnitLevels(rows === null || rows === void 0 ? void 0 : rows.find(r => r.dimension === 'ou'), levels);\n  const hasOrgUnits = !!orgUnits.length;\n  if (error !== null && error !== void 0 && error.message) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.orgUnitSelect\n    }, /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, error.message));\n  } else if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.loader\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  const numOtherSelects = !hideAssociatedGeometry && !hideSelectMode ? TWO_OTHER_SELECTS : !hideAssociatedGeometry || !hideSelectMode ? ONE_OTHER_SELECT : NO_OTHER_SELECTS;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitSelect,\n    \"data-test\": \"org-unit-select\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx({\n      [styles.two]: numOtherSelects === TWO_OTHER_SELECTS,\n      [styles.one]: numOtherSelects === ONE_OTHER_SELECT,\n      [styles.none]: numOtherSelects === NO_OTHER_SELECTS\n    })\n  }, /*#__PURE__*/React.createElement(OrgUnitDimension, {\n    roots: roots === null || roots === void 0 ? void 0 : roots.map(r => r.id),\n    selected: orgUnits,\n    onSelect: setOrgUnitItems,\n    hideUserOrgUnits: hideUserOrgUnits,\n    hideLevelSelect: hideLevelSelect,\n    hideGroupSelect: hideGroupSelect,\n    warning: !hasOrgUnits ? warning : null,\n    displayNameProp: nameProperty\n  })), !hideAssociatedGeometry && /*#__PURE__*/React.createElement(AssociatedGeometrySelect, null), !hideSelectMode && /*#__PURE__*/React.createElement(OrgUnitSelectMode, null));\n};\nOrgUnitSelect.propTypes = {\n  hideAssociatedGeometry: PropTypes.bool,\n  hideGroupSelect: PropTypes.bool,\n  hideLevelSelect: PropTypes.bool,\n  hideSelectMode: PropTypes.bool,\n  hideUserOrgUnits: PropTypes.bool,\n  warning: PropTypes.string\n};\nexport default OrgUnitSelect;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"LayerDialog_content__yOwhz\",\"select\":\"LayerDialog_select__H+aQO\",\"periodSelect\":\"LayerDialog_periodSelect__Lu3bu\",\"tabContent\":\"LayerDialog_tabContent__YB2EL\",\"flexColumnFlow\":\"LayerDialog_flexColumnFlow__MxiUL\",\"flexRowFlow\":\"LayerDialog_flexRowFlow__rzZm6\",\"flexColumn\":\"LayerDialog_flexColumn__U-zxX\",\"flexInnerColumnFlow\":\"LayerDialog_flexInnerColumnFlow__NlPmr\",\"flexInnerColumn\":\"LayerDialog_flexInnerColumn__rp2dZ\",\"singleColumn\":\"LayerDialog_singleColumn__9aH-s\",\"header\":\"LayerDialog_header__wWtIV LayerDialog_flexInnerColumnFlow__NlPmr\",\"paragraph\":\"LayerDialog_paragraph__5ylxD\",\"notice\":\"LayerDialog_notice__NqDBr\",\"error\":\"LayerDialog_error__X8IM+\",\"indent\":\"LayerDialog_indent__SOwnw\",\"orgUnitTree\":\"LayerDialog_orgUnitTree__mz+A8 LayerDialog_flexColumn__U-zxX\",\"checkboxInline\":\"LayerDialog_checkboxInline__+o-r3\",\"fontInline\":\"LayerDialog_fontInline__pjIQS\",\"numberField\":\"LayerDialog_numberField__xao0N LayerDialog_flexInnerColumn__rp2dZ\",\"checkbox\":\"LayerDialog_checkbox__Q+Bjn\",\"navigation\":\"LayerDialog_navigation__JRIEj\",\"teiCheckbox\":\"LayerDialog_teiCheckbox__gydpM\",\"marginBottom\":\"LayerDialog_marginBottom__eDy3G\",\"narrowField\":\"LayerDialog_narrowField__8zheb\",\"narrowFieldIcon\":\"LayerDialog_narrowFieldIcon__tnbg+\",\"eeFlexFull\":\"LayerDialog_eeFlexFull__RVO9s\",\"legend\":\"LayerDialog_legend__2dtDS Legend_legend__b62xP\",\"legendTitle\":\"LayerDialog_legendTitle__QpOGC\",\"scale\":\"LayerDialog_scale__XqTMm\",\"eeError\":\"LayerDialog_eeError__cyeZB\",\"eeNotice\":\"LayerDialog_eeNotice__8G1Xx\",\"labelDisplayOptions\":\"LayerDialog_labelDisplayOptions__F3Rt9\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setAggregationType } from '../../../actions/layerEdit.js';\nimport { getEarthEngineAggregationTypes, getEarthEngineStatisticTypes } from '../../../constants/aggregationTypes.js';\nimport { hasClasses } from '../../../util/earthEngine.js';\nimport { SelectField } from '../../core/index.js';\nconst AggregationSelect = _ref => {\n  let {\n    aggregations,\n    defaultAggregations,\n    aggregationType,\n    setAggregationType\n  } = _ref;\n  const classes = hasClasses(defaultAggregations);\n  const types = classes ? getEarthEngineStatisticTypes() : getEarthEngineAggregationTypes(aggregations);\n  useEffect(() => {\n    if (!aggregationType && defaultAggregations) {\n      setAggregationType(defaultAggregations);\n    }\n  }, [aggregationType, defaultAggregations, setAggregationType]);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Aggregation method'),\n    items: types,\n    multiple: !classes,\n    value: aggregationType,\n    onChange: type => setAggregationType(classes ? type.id : type)\n  });\n};\nAggregationSelect.propTypes = {\n  setAggregationType: PropTypes.func.isRequired,\n  aggregationType: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  aggregations: PropTypes.array,\n  defaultAggregations: PropTypes.oneOfType([PropTypes.string, PropTypes.array])\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    aggregations: layerEdit.aggregations,\n    defaultAggregations: layerEdit.defaultAggregations,\n    aggregationType: layerEdit.aggregationType\n  };\n}, {\n  setAggregationType\n})(AggregationSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setBand } from '../../../actions/layerEdit.js';\nimport { SelectField } from '../../core/index.js';\nconst BandSelect = _ref => {\n  let {\n    band = [],\n    bands,\n    setBand,\n    errorText\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Groups'),\n    items: bands,\n    multiple: true,\n    value: band,\n    onChange: setBand,\n    errorText: errorText\n  });\n};\nBandSelect.propTypes = {\n  bands: PropTypes.array.isRequired,\n  setBand: PropTypes.func.isRequired,\n  band: PropTypes.array,\n  errorText: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    band: layerEdit.band,\n    bands: layerEdit.bands\n  };\n}, {\n  setBand\n})(BandSelect);","// extracted by mini-css-extract-plugin\nexport default {\"periodSelect\":\"PeriodSelect_periodSelect__3wn47\",\"year\":\"PeriodSelect_year__Mw4c0\",\"period\":\"PeriodSelect_period__EU6E+\",\"loading\":\"PeriodSelect_loading__5jmo+\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { BY_YEAR, EE_MONTHLY } from '../../../constants/periods.js';\nimport { getPeriods } from '../../../util/earthEngine.js';\nimport { SelectField } from '../../core/index.js';\nimport styles from './styles/PeriodSelect.module.css';\nconst EarthEnginePeriodSelect = _ref => {\n  let {\n    periodType,\n    period,\n    datasetId,\n    filters,\n    onChange,\n    onError,\n    errorText,\n    className\n  } = _ref;\n  const engine = useDataEngine();\n  const [periods, setPeriods] = useState();\n  const [yearPeriods, setYearPeriods] = useState();\n  const [year, setYear] = useState();\n  const byYear = periodType === BY_YEAR || periodType === EE_MONTHLY;\n  const years = useMemo(() => byYear && periods ? [...new Set(periods.map(p => p.year))].map(year => ({\n    id: year,\n    name: String(year)\n  })) : null, [byYear, periods]);\n  const onYearChange = useCallback(_ref2 => {\n    let {\n      id\n    } = _ref2;\n    setYear(id);\n  }, []);\n  useEffect(() => {\n    let isCancelled = false;\n    if (periodType) {\n      getPeriods({\n        datasetId,\n        periodType,\n        filters,\n        engine\n      }).then(periods => {\n        if (!isCancelled) {\n          setPeriods(periods);\n        }\n      }).catch(error => onError({\n        type: 'engine',\n        message: error.message\n      }));\n    }\n    return () => isCancelled = true;\n  }, [datasetId, periodType, filters, onError, engine]);\n\n  // Set year from period\n  useEffect(() => {\n    if (!year && byYear && period) {\n      setYear(period.year);\n    }\n  }, [year, byYear, period]);\n\n  // Set most recent period by default\n  useEffect(() => {\n    if (!period && Array.isArray(periods) && periods.length) {\n      onChange(periods[0]);\n    }\n  }, [period, periods, onChange]);\n\n  // Set avaiable periods for one year\n  useEffect(() => {\n    if (byYear && year && periods) {\n      setYearPeriods(periods.filter(p => p.year === year));\n    }\n  }, [year, byYear, periods]);\n\n  // If year is changed, set most recent period for one year\n  useEffect(() => {\n    if (byYear && period && yearPeriods && !yearPeriods.find(_ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id === period.id;\n    })) {\n      onChange(yearPeriods[0]);\n    }\n  }, [byYear, period, yearPeriods, onChange]);\n  const items = yearPeriods || periods;\n  return items ? /*#__PURE__*/React.createElement(\"div\", {\n    className: className\n  }, byYear && /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Year'),\n    items: years,\n    value: year,\n    onChange: onYearChange,\n    className: styles.year\n  }), /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period'),\n    loading: !periods,\n    items: items,\n    value: items && period && items.find(_ref4 => {\n      let {\n        id\n      } = _ref4;\n      return id === period.id;\n    }) && period.id,\n    onChange: onChange,\n    helpText: i18n.t('Available periods are set by the source data'),\n    errorText: !period && errorText ? errorText : null,\n    className: styles.period\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), i18n.t('Loading periods'));\n};\nEarthEnginePeriodSelect.propTypes = {\n  datasetId: PropTypes.string.isRequired,\n  periodType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onError: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  filters: PropTypes.array,\n  period: PropTypes.object\n};\nexport default EarthEnginePeriodSelect;","// extracted by mini-css-extract-plugin\nexport default {\"buffer\":\"BufferRadius_buffer__y-0RL\",\"numberField\":\"BufferRadius_numberField__leghw\",\"info\":\"BufferRadius_info__fNRZ1\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setBufferRadius } from '../../../actions/layerEdit.js';\nimport Checkbox from '../../core/Checkbox.js';\nimport NumberField from '../../core/NumberField.js';\nimport styles from './styles/BufferRadius.module.css';\n\n// Component to set buffer radius (checkbox toggle and number field)\n// radius will be undefined when a layer dialog is opened (can be used to set default value)\n// it will be null when the checkbox is unchecked\n// it will be empty string when the value is deleted\n// it will have a number value when a buffer is typed, or a default set\nconst BufferRadius = _ref => {\n  let {\n    radius,\n    defaultRadius = 1000,\n    hasOrgUnitField,\n    disabled,\n    className,\n    setBufferRadius\n  } = _ref;\n  const showBuffer = radius !== undefined && radius !== null;\n  const isDisabled = disabled || hasOrgUnitField;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.buffer, className)\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Buffer'),\n    checked: showBuffer,\n    disabled: isDisabled,\n    onChange: isChecked => setBufferRadius(isChecked ? radius || defaultRadius : null)\n  }), showBuffer && /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Radius in meters'),\n    value: Number.isInteger(radius) ? radius : '',\n    disabled: isDisabled,\n    onChange: value => setBufferRadius(value !== '' ? parseInt(value, 10) : ''),\n    min: 0,\n    className: styles.numberField\n  }), hasOrgUnitField && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.info\n  }, i18n.t(\"Buffer can't be combined with associated geometry.\")));\n};\nBufferRadius.propTypes = {\n  setBufferRadius: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  defaultRadius: PropTypes.number,\n  disabled: PropTypes.bool,\n  hasOrgUnitField: PropTypes.bool,\n  radius: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    radius: layerEdit.areaRadius\n  };\n}, {\n  setBufferRadius\n})(BufferRadius);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { createLegend } from '../../../loaders/earthEngineLoader.js';\nimport LegendItem from '../../legend/LegendItem.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst styleIsValid = _ref => {\n  let {\n    min,\n    max\n  } = _ref;\n  return !Number.isNaN(min) && !Number.isNaN(max) && max > min;\n};\nconst LegendPreview = _ref2 => {\n  let {\n    style,\n    showBelowMin\n  } = _ref2;\n  const legend = styleIsValid(style) && createLegend(style, showBelowMin);\n  return legend ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendTitle\n  }, i18n.t('Legend preview')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legend\n  }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, legend.map((item, index) => /*#__PURE__*/React.createElement(LegendItem, _extends({}, item, {\n    key: `item-${index}`\n  }))))))) : null;\n};\nLegendPreview.propTypes = {\n  showBelowMin: PropTypes.bool,\n  style: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.array.isRequired\n  })\n};\nexport default LegendPreview;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { setStyle } from '../../../actions/layerEdit.js';\nimport { getColorScale, getColorPalette } from '../../../util/colors.js';\nimport { NumberField, ColorScaleSelect } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst minSteps = 3;\nconst maxSteps = 9;\nconst StyleSelect = _ref => {\n  let {\n    unit,\n    style,\n    setStyle\n  } = _ref;\n  const {\n    min,\n    max,\n    palette\n  } = style;\n  const [steps, setSteps] = useState(palette.length);\n  const onStepsChange = useCallback(steps => {\n    if (steps >= minSteps && steps <= maxSteps) {\n      const scale = getColorScale(palette);\n      const newPalette = getColorPalette(scale, steps);\n      if (newPalette) {\n        setStyle({\n          palette: newPalette\n        });\n      }\n    }\n    setSteps(steps);\n  }, [palette, setStyle]);\n  let warningText;\n  if (Number.isNaN(min)) {\n    warningText = i18n.t('Min value is required');\n  } else if (Number.isNaN(max)) {\n    warningText = i18n.t('Max value is required');\n  } else if (max <= min) {\n    warningText = i18n.t('Max should be greater than min');\n  } else if (steps < minSteps || steps > maxSteps) {\n    warningText = i18n.t('Valid steps are {{minSteps}} to {{maxSteps}}', {\n      minSteps,\n      maxSteps\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Unit'), \": \", unit), /*#__PURE__*/React.createElement(\"div\", {\n    key: \"minmax\",\n    className: styles.flexInnerColumnFlow\n  }, /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Min'),\n    value: min,\n    onChange: min => setStyle({\n      min\n    }),\n    className: styles.flexInnerColumn\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Max'),\n    value: max,\n    onChange: max => setStyle({\n      max\n    }),\n    className: styles.flexInnerColumn\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Steps'),\n    value: steps,\n    min: minSteps,\n    max: maxSteps,\n    onChange: onStepsChange,\n    className: styles.stepField\n  }), warningText && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.eeError\n  }, warningText), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.scale\n  }, /*#__PURE__*/React.createElement(ColorScaleSelect, {\n    palette: style.palette,\n    onChange: palette => setStyle({\n      palette\n    }),\n    width: 260\n  }))));\n};\nStyleSelect.propTypes = {\n  setStyle: PropTypes.func.isRequired,\n  unit: PropTypes.string.isRequired,\n  style: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.array.isRequired\n  })\n};\nexport default connect(null, {\n  setStyle\n})(StyleSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { EE_BUFFER } from '../../../constants/layers.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport LegendPreview from './LegendPreview.js';\nimport StyleSelect from './StyleSelect.js';\nconst StyleTab = _ref => {\n  let {\n    unit,\n    style,\n    showBelowMin,\n    hasOrgUnitField\n  } = _ref;\n  const {\n    min,\n    max,\n    palette\n  } = style;\n  const isClassStyle = min !== undefined && max !== undefined && palette !== undefined && palette.length < 10;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, isClassStyle && /*#__PURE__*/React.createElement(StyleSelect, {\n    unit: unit,\n    style: style\n  }), /*#__PURE__*/React.createElement(BufferRadius, {\n    label: i18n.t('Facility buffer'),\n    defaultRadius: EE_BUFFER,\n    hasOrgUnitField: hasOrgUnitField\n  })), isClassStyle && /*#__PURE__*/React.createElement(LegendPreview, {\n    style: style,\n    showBelowMin: showBelowMin\n  }));\n};\nStyleTab.propTypes = {\n  hasOrgUnitField: PropTypes.bool.isRequired,\n  showBelowMin: PropTypes.bool,\n  style: PropTypes.oneOfType([PropTypes.array, PropTypes.shape({\n    color: PropTypes.string,\n    max: PropTypes.number,\n    min: PropTypes.number,\n    palette: PropTypes.array,\n    strokeWidth: PropTypes.number\n  })]),\n  unit: PropTypes.string\n};\nexport default StyleTab;","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setOrgUnits, setEarthEnginePeriod, setBufferRadius } from '../../../actions/layerEdit.js';\nimport { DEFAULT_ORG_UNIT_LEVEL, EE_BUFFER, NONE } from '../../../constants/layers.js';\nimport { Help, Tab, Tabs } from '../../core/index.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport AggregationSelect from './AggregationSelect.js';\nimport BandSelect from './BandSelect.js';\nimport PeriodSelect from './PeriodSelect.js';\nimport StyleTab from './StyleTab.js';\nconst EarthEngineDialog = props => {\n  const [tab, setTab] = useState('data');\n  const [error, setError] = useState();\n  const {\n    aggregations,\n    areaRadius,\n    band,\n    bands,\n    datasetId,\n    defaultAggregations,\n    description,\n    filters,\n    maskOperator,\n    notice,\n    orgUnitField,\n    orgUnits,\n    rows,\n    setOrgUnits,\n    source,\n    sourceUrl,\n    style,\n    period,\n    periodType,\n    setBufferRadius,\n    setEarthEnginePeriod,\n    unit,\n    resolution,\n    validateLayer,\n    onLayerValidation\n  } = props;\n  const noBandSelected = Array.isArray(bands) && (!band || !band.length);\n  const hasAggregations = !!(aggregations || defaultAggregations);\n  const hasMultipleAggregations = !aggregations || aggregations.length > 1;\n  const hasOrgUnitField = !!orgUnitField && orgUnitField !== NONE;\n\n  // Set default org unit level\n  useEffect(() => {\n    if (!rows) {\n      var _orgUnits$levels;\n      const defaultLevel = (_orgUnits$levels = orgUnits.levels) === null || _orgUnits$levels === void 0 ? void 0 : _orgUnits$levels[DEFAULT_ORG_UNIT_LEVEL];\n      if (defaultLevel) {\n        const {\n          id,\n          name\n        } = defaultLevel;\n        setOrgUnits({\n          dimension: 'ou',\n          items: [{\n            id: `LEVEL-${id}`,\n            name\n          }]\n        });\n      }\n    }\n  }, [rows, orgUnits, setOrgUnits]);\n  useEffect(() => {\n    if (!hasOrgUnitField && areaRadius === undefined) {\n      setBufferRadius(EE_BUFFER);\n    }\n  }, [hasOrgUnitField, areaRadius, setBufferRadius]);\n  useEffect(() => {\n    if (validateLayer) {\n      const isValid = !noBandSelected && (!periodType || period);\n      if (!isValid) {\n        if (noBandSelected) {\n          setError({\n            type: 'band',\n            message: i18n.t('This field is required')\n          });\n          setTab('data');\n        } else {\n          setError({\n            type: 'period',\n            message: i18n.t('This field is required')\n          });\n          setTab('period');\n        }\n      }\n      onLayerValidation(isValid);\n    }\n  }, [validateLayer, periodType, period, onLayerValidation, noBandSelected]);\n  if (error && error.type === 'engine') {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(NoticeBox, error, error.message));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: \"data\"\n  }, i18n.t('Data')), periodType && /*#__PURE__*/React.createElement(Tab, {\n    value: \"period\"\n  }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"orgunits\"\n  }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexRowFlow\n  }, /*#__PURE__*/React.createElement(Help, null, /*#__PURE__*/React.createElement(\"p\", null, description), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Data will be calculated on Google Earth Engine for the chosen organisation units.')), notice && /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.eeNotice\n  }, notice), /*#__PURE__*/React.createElement(\"p\", null, hasMultipleAggregations && /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Multiple aggregation methods are available.'), \"\\xA0\"), i18n.t('See the aggregation results by clicking map regions or viewing the data table. The results can also be downloaded.'))), bands && /*#__PURE__*/React.createElement(BandSelect, {\n    errorText: error && error.type === 'band' && error.message\n  }), hasAggregations && /*#__PURE__*/React.createElement(AggregationSelect, null), unit && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Unit'), \": \", unit), (resolution === null || resolution === void 0 ? void 0 : resolution.spatial) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Spatial resolution'), \":\", ' ', resolution === null || resolution === void 0 ? void 0 : resolution.spatial), (resolution === null || resolution === void 0 ? void 0 : resolution.temporal) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Temporal resolution'), \":\", ' ', resolution === null || resolution === void 0 ? void 0 : resolution.temporal), (resolution === null || resolution === void 0 ? void 0 : resolution.temporalCoverage) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Temporal coverage'), \":\", ' ', resolution === null || resolution === void 0 ? void 0 : resolution.temporalCoverage), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Source'), \":\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n    href: sourceUrl,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, source))), tab === 'period' && /*#__PURE__*/React.createElement(PeriodSelect, {\n    datasetId: datasetId,\n    periodType: periodType,\n    period: period,\n    filters: filters,\n    onChange: setEarthEnginePeriod,\n    onError: setError,\n    errorText: error && error.type === 'period' && error.message,\n    className: styles.flexRowFlow\n  }), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, null), tab === 'style' && /*#__PURE__*/React.createElement(StyleTab, {\n    unit: unit,\n    style: style,\n    showBelowMin: !maskOperator,\n    hasOrgUnitField: hasOrgUnitField\n  })));\n};\nEarthEngineDialog.propTypes = {\n  datasetId: PropTypes.string.isRequired,\n  setBufferRadius: PropTypes.func.isRequired,\n  setEarthEnginePeriod: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  aggregations: PropTypes.array,\n  areaRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  band: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  bands: PropTypes.array,\n  defaultAggregations: PropTypes.oneOfType([PropTypes.array, PropTypes.string]),\n  description: PropTypes.string,\n  filters: PropTypes.array,\n  legend: PropTypes.object,\n  maskOperator: PropTypes.string,\n  notice: PropTypes.string,\n  orgUnitField: PropTypes.string,\n  orgUnits: PropTypes.object,\n  period: PropTypes.object,\n  periodType: PropTypes.string,\n  precision: PropTypes.number,\n  resolution: PropTypes.shape({\n    spatial: PropTypes.string,\n    temporal: PropTypes.string,\n    temporalCoverage: PropTypes.string\n  }),\n  rows: PropTypes.array,\n  source: PropTypes.string,\n  sourceUrl: PropTypes.string,\n  style: PropTypes.oneOfType([PropTypes.array, PropTypes.shape({\n    max: PropTypes.number,\n    min: PropTypes.number,\n    palette: PropTypes.array\n  })]),\n  unit: PropTypes.string\n};\nexport default connect(null, {\n  setOrgUnits,\n  setEarthEnginePeriod,\n  setBufferRadius\n}, null, {\n  forwardRef: true\n})(EarthEngineDialog);","import { getNowInCalendar } from '@dhis2/multi-calendar-dates';\nimport { Temporal } from '@js-temporal/polyfill'; // 13th months in etiopic calendar cannot be returned by getFixedPeriodByDate (@dhis2/multi-calendar-dates)\n\nexport const DEFAULT_CALENDAR = 'iso8601';\nexport const DEFAULT_PLACEHOLDER = 'yyyy-mm-dd';\nconst JULIAN_CALENDAR_NAME = 'julian';\nconst NEPALI_CALENDAR_NAME = 'nepali';\nconst GREGORIAN_CALENDAR_NAME = 'gregory';\nconst ETHIOPIAN_CALENDAR_NAME = 'ethiopic';\nconst THAI_CALENDAR_NAME = 'buddhist';\n\n// dhis2CalendarsMap and NEPALI_CALENDAR_DATA cannot be imported from @dhis2/multi-calendar-dates\n\nconst dhis2CalendarsMap = {\n  iso8601: GREGORIAN_CALENDAR_NAME,\n  // this is not supported by getNowInCalendar\n  ethiopian: ETHIOPIAN_CALENDAR_NAME,\n  gregorian: GREGORIAN_CALENDAR_NAME,\n  julian: GREGORIAN_CALENDAR_NAME,\n  // this is not supported by Temporal\n  thai: THAI_CALENDAR_NAME\n};\nconst NEPALI_CALENDAR_DATA = {\n  // Used in @dhis2/multi-calendar-dates and @kbwood/world-calendars\n  // First value is used for 1st January calculation (not used here)\n  // This data are from http://www.ashesh.com.np\n  1970: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1971: [18, 31, 31, 32, 31, 32, 30, 30, 29, 30, 29, 30, 30],\n  1972: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 30],\n  1973: [19, 30, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  1974: [19, 31, 31, 32, 30, 31, 31, 30, 29, 30, 29, 30, 30],\n  1975: [18, 31, 31, 32, 32, 30, 31, 30, 29, 30, 29, 30, 30],\n  1976: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  1977: [18, 31, 32, 31, 32, 31, 31, 29, 30, 29, 30, 29, 31],\n  1978: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1979: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  1980: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  1981: [18, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 30, 30],\n  1982: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1983: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  1984: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  1985: [18, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 30, 30],\n  1986: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1987: [18, 31, 32, 31, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  1988: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  1989: [18, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  1990: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1991: [18, 31, 32, 31, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  // These data are from http://nepalicalendar.rat32.com/index.php\n  1992: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  1993: [18, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  1994: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1995: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 30],\n  1996: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  1997: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1998: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  1999: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2000: [17, 30, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2001: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2002: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2003: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2004: [17, 30, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2005: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2006: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2007: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2008: [17, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 29, 31],\n  2009: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2010: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2011: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2012: [17, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 30, 30],\n  2013: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2014: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2015: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2016: [17, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 30, 30],\n  2017: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2018: [18, 31, 32, 31, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2019: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2020: [17, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  2021: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2022: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 30],\n  2023: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2024: [17, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  2025: [18, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2026: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2027: [17, 30, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2028: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2029: [18, 31, 31, 32, 31, 32, 30, 30, 29, 30, 29, 30, 30],\n  2030: [17, 31, 32, 31, 32, 31, 30, 30, 30, 30, 30, 30, 31],\n  2031: [17, 31, 32, 31, 32, 31, 31, 31, 31, 31, 31, 31, 31],\n  2032: [17, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32],\n  2033: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2034: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2035: [17, 30, 32, 31, 32, 31, 31, 29, 30, 30, 29, 29, 31],\n  2036: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2037: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2038: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2039: [17, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 30, 30],\n  2040: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2041: [18, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2042: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2043: [17, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 30, 30],\n  2044: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2045: [18, 31, 32, 31, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2046: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2047: [17, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  2048: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2049: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 30],\n  2050: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2051: [17, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  2052: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2053: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 30],\n  2054: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2055: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 30, 29, 30],\n  2056: [17, 31, 31, 32, 31, 32, 30, 30, 29, 30, 29, 30, 30],\n  2057: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2058: [17, 30, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2059: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2060: [17, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2061: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2062: [17, 30, 32, 31, 32, 31, 31, 29, 30, 29, 30, 29, 31],\n  2063: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2064: [17, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2065: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2066: [17, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 29, 31],\n  2067: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2068: [17, 31, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2069: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2070: [17, 31, 31, 31, 32, 31, 31, 29, 30, 30, 29, 30, 30],\n  2071: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2072: [17, 31, 32, 31, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2073: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 31],\n  2074: [17, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  2075: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2076: [16, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 30],\n  2077: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2078: [17, 31, 31, 31, 32, 31, 31, 30, 29, 30, 29, 30, 30],\n  2079: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 29, 30, 30],\n  2080: [16, 31, 32, 31, 32, 31, 30, 30, 30, 29, 29, 30, 30],\n  // These data are from http://www.ashesh.com.np/nepali-calendar/\n  2081: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 29, 31],\n  2082: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 30, 30],\n  2083: [17, 31, 31, 32, 31, 31, 30, 30, 30, 29, 30, 30, 30],\n  2084: [17, 31, 31, 32, 31, 31, 30, 30, 30, 29, 30, 30, 30],\n  2085: [17, 31, 32, 31, 32, 31, 31, 30, 30, 29, 30, 30, 30],\n  2086: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 30, 30],\n  2087: [16, 31, 31, 32, 31, 31, 31, 30, 30, 29, 30, 30, 30],\n  2088: [16, 30, 31, 32, 32, 30, 31, 30, 30, 29, 30, 30, 30],\n  2089: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 30, 30],\n  2090: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 30, 30],\n  2091: [16, 31, 31, 32, 31, 31, 31, 30, 30, 29, 30, 30, 30],\n  2092: [16, 31, 31, 32, 32, 31, 30, 30, 30, 29, 30, 30, 30],\n  2093: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 30, 30],\n  2094: [17, 31, 31, 32, 31, 31, 30, 30, 30, 29, 30, 30, 30],\n  2095: [17, 31, 31, 32, 31, 31, 31, 30, 29, 30, 30, 30, 30],\n  2096: [17, 30, 31, 32, 32, 31, 30, 30, 29, 30, 29, 30, 30],\n  2097: [17, 31, 32, 31, 32, 31, 30, 30, 30, 29, 30, 30, 30],\n  2098: [17, 31, 31, 32, 31, 31, 31, 29, 30, 29, 30, 30, 31],\n  2099: [17, 31, 31, 32, 31, 31, 31, 30, 29, 29, 30, 30, 30],\n  2100: [17, 31, 32, 31, 32, 30, 31, 30, 29, 30, 29, 30, 30]\n};\nexport const getMaxDaysInMonth = (year, month, calendar) => {\n  if (calendar === JULIAN_CALENDAR_NAME && year % 4 === 0 && month === 2) {\n    return 29;\n  }\n  if (calendar === NEPALI_CALENDAR_NAME) {\n    return NEPALI_CALENDAR_DATA[year][month];\n  }\n  const calendarName = dhis2CalendarsMap[calendar] || calendar;\n  const date = Temporal.PlainDate.from({\n    year: year,\n    month: month,\n    day: 1,\n    calendar: calendarName\n  });\n  return date.daysInMonth;\n};\nexport const getMaxMonthsInYear = (year, calendar) => {\n  if (calendar === NEPALI_CALENDAR_NAME) {\n    return NEPALI_CALENDAR_DATA[year].length - 1;\n  }\n  const calendarName = dhis2CalendarsMap[calendar] || calendar;\n  const date = Temporal.PlainDate.from({\n    year: year,\n    month: 1,\n    day: 1,\n    calendar: calendarName\n  });\n  return date.monthsInYear;\n};\nexport const getDefaultDatesInCalendar = function () {\n  let calendar = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_CALENDAR;\n  const calendarName = dhis2CalendarsMap[calendar] || calendar;\n  const {\n    day,\n    month,\n    eraYear: year\n  } = getNowInCalendar(calendarName);\n  const formatDateString = (y, m, d) => `${y}-${m.toString().padStart(2, '0')}-${d.toString().padStart(2, '0')}`;\n  return {\n    startDate: formatDateString(year - 1, month, day),\n    endDate: formatDateString(year, month, day)\n  };\n};\nexport const getCurrentYearInCalendar = calendar => {\n  const calendarName = dhis2CalendarsMap[calendar] || calendar;\n  const today = getNowInCalendar(calendarName);\n  return today.eraYear;\n};\nexport function replaceAt(str, index, replacement) {\n  const cleanReplacement = replacement.replace(/\\D/g, '');\n  if (index >= str.length) {\n    return str + cleanReplacement;\n  }\n  if (index < 0) {\n    index = 0;\n  }\n  return cleanReplacement ? str.slice(0, index) + cleanReplacement + str.slice(index + 1) : str;\n}\nexport const formatDateInput = _ref => {\n  let {\n    date,\n    prevDate,\n    caret,\n    calendar = DEFAULT_CALENDAR\n  } = _ref;\n  if (!date) {\n    return '';\n  }\n  if (prevDate && date.length > caret) {\n    if (date.length <= prevDate.length) {\n      date = prevDate;\n    } else if (date[caret] === '-') {\n      date = replaceAt(prevDate, caret, date[caret - 1]);\n    } else {\n      date = replaceAt(prevDate, caret - 1, date[caret - 1]);\n    }\n  }\n  if (date.length === 7 && date[6] === '-') {\n    date = date.slice(0, -2) + '0' + date.slice(-2);\n  }\n  let finalHyphen = '';\n  if (date.length === 5 && date[4] === '-' || date.length === 6 && date[4] === '-' && date[5] === '-' || date.length === 8 && date[7] === '-' || date.length === 9 && date[7] === '-' && date[8] === '-') {\n    finalHyphen = '-';\n  }\n  const numericDate = date.replace(/\\D/g, '');\n  const year = numericDate.slice(0, 4);\n  const month = numericDate.slice(4, 6);\n  const day = numericDate.slice(6, 8);\n  if (numericDate.length < 4) {\n    return numericDate;\n  }\n  const formattedYear = year === '0000' ? getCurrentYearInCalendar(calendar) : year;\n  if (numericDate.length === 4) {\n    return `${formattedYear}${finalHyphen}`;\n  }\n  if (numericDate.length < 6) {\n    return `${formattedYear}-${month}`;\n  }\n  const maxMonth = getMaxMonthsInYear(year, calendar);\n  const formattedMonth = month === '00' ? 1 : month > maxMonth ? maxMonth : month;\n  if (numericDate.length === 6) {\n    return `${formattedYear}-${formattedMonth.toString().padStart(2, '0')}${finalHyphen}`;\n  }\n  if (numericDate.length < 8) {\n    return `${formattedYear}-${formattedMonth.toString().padStart(2, '0')}-${day}`;\n  }\n  const maxDaysInMonth = getMaxDaysInMonth(formattedYear, formattedMonth, calendar);\n  const formattedDay = day === '00' ? 1 : day > maxDaysInMonth ? maxDaysInMonth : day;\n  return `${formattedYear}-${formattedMonth.toString().padStart(2, '0')}-${formattedDay.toString().padStart(2, '0')}`;\n};\nexport const formatDateOnBlur = date => {\n  if (date.length === 5 && date[4] === '-' || date.length === 8 && date[7] === '-') {\n    return date.slice(0, -1);\n  } else if ((date === null || date === void 0 ? void 0 : date.length) === 9) {\n    return date.slice(0, -1) + '0' + date.slice(-1);\n  } else {\n    return date;\n  }\n};\nexport const nextCharIsAutoHyphen = _ref2 => {\n  let {\n    date,\n    prevDate,\n    caret\n  } = _ref2;\n  if (!date || !prevDate || !caret) {\n    return false;\n  }\n  const isInsertingNewChar = date.length === prevDate.length + 1;\n  const insertedCharIsDigit = /\\d/.test(date[caret - 1] || '');\n  const insertedCharIsHyphen = date[caret - 1] === '-';\n  const atHyphenPosition = caret === 5 || caret === 8;\n  const atEarlyHyphenPosition = caret === 7 && date.length === 7;\n  return isInsertingNewChar && (insertedCharIsDigit && atHyphenPosition || insertedCharIsHyphen && atEarlyHyphenPosition);\n};\nexport const nextCharIsManualHyphen = _ref3 => {\n  let {\n    date,\n    prevDate,\n    caret\n  } = _ref3;\n  if (!date || !prevDate || !caret) {\n    return false;\n  }\n  const atHyphenPosition = caret === 5 || caret === 8;\n  const insertedCharIsHyphen = date[caret - 1] === '-';\n  return atHyphenPosition && insertedCharIsHyphen;\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nimport { useCachedData } from '../components/cachedDataProvider/CachedDataProvider.js';\nimport { getValidDataItems } from '../util/helpers.js';\nconst PROGRAM_STAGE_DATA_ELEMENTS_QUERY = {\n  elements: {\n    resource: 'programStages',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: [`programStageDataElements[dataElement[id,${nameProperty}~rename(name),valueType,optionSet[id,displayName~rename(name)],legendSet]]`],\n        paging: false\n      };\n    }\n  }\n};\nexport const useProgramStageDataElements = _ref3 => {\n  let {\n    programStageId\n  } = _ref3;\n  const [dataElements, setDataElements] = useState(null);\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    refetch,\n    loading\n  } = useDataQuery(PROGRAM_STAGE_DATA_ELEMENTS_QUERY, {\n    lazy: true,\n    variables: {\n      nameProperty\n    },\n    onComplete: data => {\n      var _data$elements, _data$elements$progra;\n      const elements = (data === null || data === void 0 ? void 0 : (_data$elements = data.elements) === null || _data$elements === void 0 ? void 0 : (_data$elements$progra = _data$elements.programStageDataElements) === null || _data$elements$progra === void 0 ? void 0 : _data$elements$progra.map(attr => attr.dataElement)) || [];\n      setDataElements(getValidDataItems(elements));\n    }\n  });\n  useEffect(() => {\n    setDataElements(null);\n    if (programStageId) {\n      refetch({\n        id: programStageId\n      });\n    }\n  }, [programStageId, refetch]);\n  return {\n    dataElements,\n    loading\n  };\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nimport { useCachedData } from '../components/cachedDataProvider/CachedDataProvider.js';\nimport { getValidDataItems } from '../util/helpers.js';\nconst PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY = {\n  trackedEntityAttributes: {\n    resource: 'programs',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: [`trackedEntityType,programTrackedEntityAttributes[trackedEntityAttribute[id,${nameProperty}~rename(name),valueType,optionSet[id,displayName~rename(name)],legendSet]]`],\n        paging: false\n      };\n    }\n  }\n};\nexport const useProgramTrackedEntityAttributes = _ref3 => {\n  let {\n    programId\n  } = _ref3;\n  const [programAttributes, setProgramAttributes] = useState(null);\n  const [trackedEntityType, setTrackedEntityType] = useState(null);\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    refetch,\n    loading\n  } = useDataQuery(PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY, {\n    lazy: true,\n    variables: {\n      nameProperty\n    },\n    onComplete: data => {\n      var _data$trackedEntityAt, _data$trackedEntityAt2, _data$trackedEntityAt3;\n      const attributes = (data === null || data === void 0 ? void 0 : (_data$trackedEntityAt = data.trackedEntityAttributes) === null || _data$trackedEntityAt === void 0 ? void 0 : (_data$trackedEntityAt2 = _data$trackedEntityAt.programTrackedEntityAttributes) === null || _data$trackedEntityAt2 === void 0 ? void 0 : _data$trackedEntityAt2.map(attr => attr.trackedEntityAttribute)) || [];\n      setProgramAttributes(getValidDataItems(attributes));\n      setTrackedEntityType((data === null || data === void 0 ? void 0 : (_data$trackedEntityAt3 = data.trackedEntityAttributes) === null || _data$trackedEntityAt3 === void 0 ? void 0 : _data$trackedEntityAt3.trackedEntityType) || {});\n    }\n  });\n  useEffect(() => {\n    setProgramAttributes(null);\n    setTrackedEntityType(null);\n    if (programId) {\n      refetch({\n        id: programId\n      });\n    }\n  }, [programId, refetch]);\n  return {\n    programAttributes,\n    trackedEntityType,\n    loading\n  };\n};","import { useMemo } from 'react';\nimport { combineDataItems } from '../util/analytics.js';\nimport { useProgramStageDataElements } from './useProgramStageDataElements.js';\nimport { useProgramTrackedEntityAttributes } from './useProgramTrackedEntityAttributes.js';\nexport const useEventDataItems = _ref => {\n  let {\n    programId,\n    programStageId,\n    includeTypes,\n    excludeTypes\n  } = _ref;\n  const {\n    dataElements,\n    loading: dataElementsLoading\n  } = useProgramStageDataElements({\n    programStageId\n  });\n  const {\n    programAttributes,\n    trackedEntityType,\n    loading: attributesLoading\n  } = useProgramTrackedEntityAttributes({\n    programId\n  });\n  const eventDataItems = useMemo(() => {\n    if (dataElements !== null && programAttributes !== null) {\n      return combineDataItems(programAttributes, dataElements, includeTypes || null, excludeTypes || null);\n    }\n    return null;\n  }, [dataElements, programAttributes, includeTypes, excludeTypes]);\n  return {\n    eventDataItems,\n    trackedEntityType,\n    loading: dataElementsLoading || attributesLoading\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useEffect } from 'react';\nimport { EVENT_COORDINATE_DEFAULT, EVENT_COORDINATE_ENROLLMENT, EVENT_COORDINATE_TRACKED_ENTITY, EVENT_COORDINATE_ORG_UNIT, EVENT_COORDINATE_CASCADING, NONE } from '../../constants/layers.js';\nimport { useEventDataItems } from '../../hooks/useEventDataItems.js';\nimport { SelectField } from '../core/index.js';\nconst includeTypes = ['COORDINATE'];\nconst CoordinateField = _ref => {\n  let {\n    value,\n    program,\n    programStage,\n    eventCoordinateField,\n    onChange,\n    className\n  } = _ref;\n  const {\n    eventDataItems,\n    trackedEntityType\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    includeTypes\n  });\n  const defaultValue = eventCoordinateField ? NONE : EVENT_COORDINATE_DEFAULT;\n  const fields = useMemo(() => {\n    const isFallback = !!eventCoordinateField;\n    const fields = [];\n    if (isFallback) {\n      fields.push({\n        id: NONE,\n        name: i18n.t('None')\n      });\n      fields.push({\n        id: EVENT_COORDINATE_CASCADING,\n        name: i18n.t('Cascading')\n      });\n    }\n    fields.push({\n      id: EVENT_COORDINATE_DEFAULT,\n      name: i18n.t('Event location')\n    });\n    if (!trackedEntityType) {\n      return fields;\n    }\n    if (trackedEntityType !== null && trackedEntityType !== void 0 && trackedEntityType.id) {\n      fields.push({\n        id: EVENT_COORDINATE_ENROLLMENT,\n        name: i18n.t('Enrollment location')\n      });\n      fields.push({\n        id: EVENT_COORDINATE_TRACKED_ENTITY,\n        name: i18n.t('Tracked entity location')\n      });\n    }\n    if (eventDataItems) {\n      fields.push(...eventDataItems);\n    }\n    if (isFallback) {\n      fields.push({\n        id: EVENT_COORDINATE_ORG_UNIT,\n        name: i18n.t('Organisation unit location')\n      });\n    }\n    return eventCoordinateField ? fields.filter(f => f.id !== eventCoordinateField) : fields;\n  }, [trackedEntityType, eventDataItems, eventCoordinateField]);\n\n  // Reset default value when program or programStage is changed and prev value is not available anymore\n  useEffect(() => {\n    if (trackedEntityType && eventDataItems && !fields.find(f => f.id === value)) {\n      onChange(defaultValue);\n    }\n  }, [trackedEntityType, eventDataItems, fields, value, defaultValue, onChange]);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: eventCoordinateField ? i18n.t('Fallback coordinate field') : i18n.t('Coordinate field'),\n    items: fields,\n    value: fields.find(f => f.id === value) ? value : null,\n    loading: value !== EVENT_COORDINATE_DEFAULT && !trackedEntityType,\n    helpText: value === EVENT_COORDINATE_CASCADING ? trackedEntityType ? i18n.t('Enrollment > event > tracked entity > org unit coordinate') : i18n.t('Event > org unit coordinate') : null,\n    onChange: field => onChange(field.id),\n    className: className,\n    dataTest: \"coordinatefield\"\n  });\n};\nCoordinateField.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  eventCoordinateField: PropTypes.string,\n  program: PropTypes.object,\n  programStage: PropTypes.object,\n  value: PropTypes.string\n};\nexport default CoordinateField;","// extracted by mini-css-extract-plugin\nexport default {\"removeBtnContainer\":\"RemoveFilter_removeBtnContainer__DNHoQ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip, IconDelete24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/RemoveFilter.module.css';\n\n// Remove filter button used for both thematic and event filters\nconst RemoveFilter = _ref => {\n  let {\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.removeBtnContainer,\n    onClick: onClick\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Remove filter')\n  }, /*#__PURE__*/React.createElement(IconDelete24, null)));\n};\nRemoveFilter.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default RemoveFilter;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nconst OPTION_SET_QUERY = {\n  optionSet: {\n    resource: 'optionSets',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'options[id,code,displayName~rename(name),style[color]]'],\n      paging: false\n    }\n  }\n};\nconst useOptionSet = optionSetId => {\n  const [optionSet, setOptionSet] = useState(null);\n  const {\n    refetch,\n    loading\n  } = useDataQuery(OPTION_SET_QUERY, {\n    lazy: true,\n    onComplete: data => {\n      setOptionSet(data.optionSet);\n    }\n  });\n  useEffect(() => {\n    setOptionSet(null);\n    if (optionSetId) {\n      refetch({\n        id: optionSetId\n      });\n    }\n  }, [optionSetId, refetch]);\n  return {\n    optionSet,\n    loading\n  };\n};\nexport default useOptionSet;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\nconst OptionSetSelect = _ref => {\n  let {\n    options,\n    value,\n    onChange,\n    className\n  } = _ref;\n  // TODO: Temporarily fix until we have a searchable SelectField handling hundreds of options\n  if (options.length > 100) {\n    options = options.slice(0, 100);\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Options'),\n    items: options.map(option => ({\n      id: option.code,\n      name: option.name\n    })),\n    value: value,\n    multiple: true,\n    onChange: onChange,\n    className: className\n  });\n};\nOptionSetSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  options: PropTypes.array,\n  value: PropTypes.array\n};\nexport default OptionSetSelect;","// extracted by mini-css-extract-plugin\nexport default {\"operator\":\"FilterSelect_operator__DxRTN\",\"inputField\":\"FilterSelect_inputField__gY635\",\"checkbox\":\"FilterSelect_checkbox__HRwr5\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { numberValueTypes, textValueTypes, booleanValueTypes } from '../../../constants/valueTypes.js';\nimport useOptionSet from '../../../hooks/useOptionSet.js';\nimport { SelectField, NumberField, TextField, Checkbox, DatePicker } from '../../core/index.js';\nimport OptionSetSelect from '../../optionSet/OptionSetSelect.js';\nimport styles from './styles/FilterSelect.module.css';\nconst getOperators = (valueType, optionSetId) => {\n  let operators;\n  if (['NUMBER', 'INTEGER', 'INTEGER_POSITIVE', 'DATE'].includes(valueType)) {\n    operators = [{\n      id: 'EQ',\n      name: '='\n    }, {\n      id: 'GT',\n      name: '>'\n    }, {\n      id: 'GE',\n      name: '>='\n    }, {\n      id: 'LT',\n      name: '<'\n    }, {\n      id: 'LE',\n      name: '<='\n    }, {\n      id: 'NE',\n      name: '!='\n    }];\n  } else if (optionSetId) {\n    operators = [{\n      id: 'IN',\n      name: i18n.t('one of')\n    }];\n  } else if (textValueTypes.includes(valueType)) {\n    operators = [{\n      id: 'LIKE',\n      name: i18n.t('contains')\n    }, {\n      id: 'EQ',\n      name: i18n.t('is')\n    }, {\n      id: 'NE',\n      name: i18n.t('is not')\n    }];\n  }\n  return operators;\n};\nconst FilterSelect = _ref => {\n  let {\n    valueType,\n    filter,\n    optionSetId,\n    onChange\n  } = _ref;\n  const {\n    optionSet\n  } = useOptionSet(optionSetId);\n  const operators = getOperators(valueType, optionSetId);\n  let operator;\n  let value;\n  if (filter) {\n    const splitFilter = filter.split(':');\n    operator = splitFilter[0];\n    value = splitFilter[1];\n  } else if (operators) {\n    operator = operators[0].id;\n  }\n  const options = optionSetId && optionSetId === (optionSet === null || optionSet === void 0 ? void 0 : optionSet.id) ? optionSet.options : null;\n  return /*#__PURE__*/React.createElement(Fragment, null, operators && /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Operator'),\n    items: operators,\n    value: operator,\n    onChange: newOperator => onChange(`${newOperator.id}:${value ? value : ''}`),\n    className: styles.operator\n  }), options && /*#__PURE__*/React.createElement(OptionSetSelect, {\n    options: options,\n    value: value ? value.split(';') : null,\n    onChange: newValue => onChange(`${operator}:${newValue.join(';')}`),\n    className: styles.inputField\n  }), numberValueTypes.includes(valueType) && /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Value'),\n    value: value !== undefined ? Number(value) : value,\n    onChange: newValue => onChange(`${operator}:${newValue}`),\n    className: styles.inputField\n  }), textValueTypes.includes(valueType) && !optionSetId && /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.t('Value'),\n    value: value || '',\n    onChange: newValue => onChange(`${operator}:${newValue}`),\n    className: styles.inputField\n  }), booleanValueTypes.includes(valueType) && /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Yes'),\n    checked: value == 1 ? true : false,\n    onChange: isChecked => onChange(isChecked ? 'IN:1' : 'IN:0'),\n    className: styles.checkbox\n  }), valueType === 'DATE' && /*#__PURE__*/React.createElement(DatePicker, {\n    label: i18n.t('Date'),\n    value: value,\n    onChange: date => onChange(`${operator}:${date}`),\n    className: styles.inputField\n  }));\n};\nFilterSelect.propTypes = {\n  valueType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  filter: PropTypes.string,\n  optionSetId: PropTypes.string\n};\nexport default FilterSelect;","// extracted by mini-css-extract-plugin\nexport default {\"filterRow\":\"FilterRow_filterRow__Y3lTE\",\"dataItemSelect\":\"FilterRow_dataItemSelect__ajzRb\",\"help\":\"FilterRow_help__QAfzI\"};","import i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../../core/index.js';\nimport RemoveFilter from '../../filter/RemoveFilter.js';\nimport FilterSelect from './FilterSelect.js';\nimport styles from './styles/FilterRow.module.css';\nconst FilterRow = _ref => {\n  let {\n    index,\n    dimension,\n    filter,\n    dataItems,\n    onChange,\n    onRemove\n  } = _ref;\n  const {\n    valueType,\n    optionSet\n  } = dataItems.find(d => d.id === dimension) || {};\n  const onSelect = (_ref2, newFilter) => {\n    let {\n      id\n    } = _ref2;\n    const name = dataItems.filter(d => d.id === id)[0].name;\n    if (id !== dimension) {\n      // New dimension\n      onChange(index, {\n        dimension: id,\n        name,\n        filter: null\n      });\n    } else {\n      onChange(index, {\n        dimension: id,\n        name,\n        filter: newFilter\n      });\n    }\n  };\n  const internalError = dimension && !dataItems.find(item => item.id === dimension);\n  let internalErrorText;\n  if (internalError) {\n    internalErrorText = i18n.t('Previously selected value not available in list: {{id}}', {\n      id: dimension,\n      nsSeparator: '^^'\n    });\n  }\n  let selectValue = null;\n  if (!internalError) {\n    selectValue = dimension || null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterRow\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data item'),\n    items: dataItems,\n    value: selectValue,\n    onChange: onSelect,\n    className: styles.dataItemSelect\n  }), valueType && /*#__PURE__*/React.createElement(FilterSelect, {\n    valueType: valueType,\n    optionSetId: optionSet === null || optionSet === void 0 ? void 0 : optionSet.id,\n    filter: filter,\n    onChange: newFilter => onSelect({\n      id: dimension\n    }, newFilter)\n  }), /*#__PURE__*/React.createElement(RemoveFilter, {\n    onClick: () => onRemove(index)\n  }), internalError && /*#__PURE__*/React.createElement(Help, {\n    className: styles.help,\n    error: true\n  }, internalErrorText));\n};\nFilterRow.propTypes = {\n  dataItems: PropTypes.array.isRequired,\n  index: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  filter: PropTypes.string\n};\nexport default FilterRow;","// extracted by mini-css-extract-plugin\nexport default {\"filterGroup\":\"FilterGroup_filterGroup__E1a0A\",\"addFilter\":\"FilterGroup_addFilter__Shcz8\",\"note\":\"FilterGroup_note__hnJSP\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { addFilter, removeFilter, changeFilter } from '../../../actions/layerEdit.js';\nimport { useEventDataItems } from '../../../hooks/useEventDataItems.js';\nimport FilterRow from './FilterRow.js';\nimport styles from './styles/FilterGroup.module.css';\nconst excludeTypes = ['FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE'];\nconst FilterGroup = _ref => {\n  let {\n    filters = [],\n    program,\n    programStage\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    eventDataItems\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    excludeTypes\n  });\n  if (!programStage) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.note\n    }, i18n.t('Filtering is available after selecting a program stage.'));\n  }\n  if (eventDataItems === null) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterGroup\n  }, filters.map((item, index) => /*#__PURE__*/React.createElement(FilterRow, _extends({\n    key: index,\n    index: index,\n    dataItems: eventDataItems,\n    onChange: (index, item) => dispatch(changeFilter(index, item)),\n    onRemove: val => dispatch(removeFilter(val))\n  }, item))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addFilter\n  }, /*#__PURE__*/React.createElement(Button, {\n    basic: true,\n    onClick: () => dispatch(addFilter())\n  }, i18n.t('Add filter'))));\n};\nFilterGroup.propTypes = {\n  filters: PropTypes.array,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default FilterGroup;","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"Classification_select__g4tq7\",\"classes\":\"Classification_classes__pe3qP\",\"scale\":\"Classification_scale__j1o7v\",\"clear\":\"Classification_clear__wSOTp\"};","import i18n from '@dhis2/d2-i18n';\nimport { range } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setColorScale } from '../../actions/layerEdit.js';\nimport { getClassificationTypes, CLASSIFICATION_EQUAL_INTERVALS } from '../../constants/layers.js';\nimport { defaultColorScaleName, defaultClasses, defaultColorScale, getColorPalette, getColorScale } from '../../util/colors.js';\nimport { SelectField, ColorScaleSelect } from '../core/index.js';\nimport styles from './styles/Classification.module.css';\nconst classRange = range(3, 10).map(num => ({\n  id: num,\n  name: num.toString()\n})); // 3 - 9\n\nconst Classification = _ref => {\n  let {\n    method,\n    classes,\n    colorScale,\n    setClassification,\n    setColorScale\n  } = _ref;\n  const colorScaleName = colorScale ? getColorScale(colorScale) : defaultColorScaleName;\n  return [/*#__PURE__*/React.createElement(SelectField, {\n    key: \"classification\",\n    label: i18n.t('Classification'),\n    value: method || CLASSIFICATION_EQUAL_INTERVALS,\n    items: getClassificationTypes(),\n    onChange: method => setClassification(method.id),\n    className: styles.select\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    key: \"scale\"\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Classes'),\n    value: classes !== undefined ? classes : defaultClasses,\n    items: classRange,\n    onChange: item => setColorScale(getColorPalette(colorScaleName, item.id)),\n    className: styles.classes\n  }), /*#__PURE__*/React.createElement(ColorScaleSelect, {\n    palette: colorScale ? colorScale : defaultColorScale,\n    onChange: setColorScale,\n    width: 190,\n    className: styles.scale\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.clear\n  }))];\n};\nClassification.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  setColorScale: PropTypes.func.isRequired,\n  classes: PropTypes.number,\n  colorScale: PropTypes.array,\n  method: PropTypes.number\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    method: layerEdit.method,\n    classes: layerEdit.classes,\n    colorScale: layerEdit.colorScale\n  };\n}, {\n  setClassification,\n  setColorScale\n})(Classification);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLegendSet } from '../../actions/layerEdit.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all legend sets\nconst LEGEND_SETS_QUERY = {\n  sets: {\n    resource: 'legendSets',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst style = {\n  width: '100%'\n};\nconst LegendSetSelect = _ref => {\n  let {\n    legendSetError\n  } = _ref;\n  const legendSet = useSelector(state => state.layerEdit.legendSet);\n  const dispatch = useDispatch();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(LEGEND_SETS_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Legend set'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.sets.legendSets,\n    value: legendSet ? legendSet.id : null,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || legendSetError,\n    onChange: legendSet => dispatch(setLegendSet(legendSet)),\n    style: style\n  });\n};\nLegendSetSelect.propTypes = {\n  legendSetError: PropTypes.string\n};\nexport default LegendSetSelect;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification } from '../../actions/layerEdit.js';\nimport { getLegendTypes, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS } from '../../constants/layers.js';\nimport { Radio, RadioGroup } from '../core/index.js';\n\n// Select between user defined (automatic), predefined or single color\nconst LegendTypeSelect = _ref => {\n  let {\n    mapType,\n    method,\n    setClassification\n  } = _ref;\n  return method ? /*#__PURE__*/React.createElement(RadioGroup, {\n    value: method === CLASSIFICATION_EQUAL_COUNTS ? CLASSIFICATION_EQUAL_INTERVALS : method,\n    onChange: method => setClassification(Number(method))\n  }, getLegendTypes(mapType === 'BUBBLE').map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Radio, {\n      key: id,\n      value: String(id),\n      label: name\n    });\n  })) : null;\n};\nLegendTypeSelect.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  mapType: PropTypes.string,\n  method: PropTypes.number\n};\nexport default connect(null, {\n  setClassification\n})(LegendTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setColorScale } from '../../actions/layerEdit.js';\nimport { THEMATIC_COLOR } from '../../constants/layers.js';\nimport { ColorPicker } from '../core/index.js';\n\n// Displays a color picker for single color layer\nconst SingleColor = _ref => {\n  let {\n    color,\n    setColorScale\n  } = _ref;\n  // Set default color\n  useEffect(() => {\n    if (!color || color.length !== 7) {\n      setColorScale(THEMATIC_COLOR);\n    }\n  }, [color, setColorScale]);\n  return color ? /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Color'),\n    color: color,\n    onChange: setColorScale,\n    width: 100,\n    style: {\n      marginTop: -5\n    }\n  }) : null;\n};\nSingleColor.propTypes = {\n  setColorScale: PropTypes.func.isRequired,\n  color: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    color: layerEdit.colorScale\n  };\n}, {\n  setColorScale\n})(SingleColor);","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setLegendSet } from '../../actions/layerEdit.js';\nimport { CLASSIFICATION_PREDEFINED, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_SINGLE_COLOR } from '../../constants/layers.js';\nimport Classification from './Classification.js';\nimport LegendSetSelect from './LegendSetSelect.js';\nimport LegendTypeSelect from './LegendTypeSelect.js';\nimport SingleColor from './SingleColor.js';\n\n// Wrapper component for selecting legend style used for numeric map styles\nconst NumericLegendStyle = props => {\n  const {\n    mapType,\n    method,\n    dataItem,\n    legendSet,\n    setClassification,\n    setLegendSet,\n    legendSetError,\n    style\n  } = props;\n  const isSingleColor = method === CLASSIFICATION_SINGLE_COLOR;\n  const isPredefined = method === CLASSIFICATION_PREDEFINED;\n  useEffect(() => {\n    // Set default classification method\n    if (!method) {\n      // Use predefined legend if defined for data item\n      setClassification(dataItem && dataItem.legendSet ? CLASSIFICATION_PREDEFINED : CLASSIFICATION_EQUAL_INTERVALS);\n    }\n  }, [method, dataItem, setClassification]);\n  useEffect(() => {\n    // Set legend set defined for data item in use by default\n    if (isPredefined && !legendSet && dataItem !== null && dataItem !== void 0 && dataItem.legendSet) {\n      setLegendSet(dataItem.legendSet);\n    }\n  }, [isPredefined, legendSet, dataItem, setLegendSet]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(LegendTypeSelect, {\n    method: method,\n    mapType: mapType,\n    dataItem: dataItem\n  }), isSingleColor ? /*#__PURE__*/React.createElement(SingleColor, null) : isPredefined ? /*#__PURE__*/React.createElement(LegendSetSelect, {\n    legendSetError: legendSetError\n  }) : /*#__PURE__*/React.createElement(Classification, null));\n};\nNumericLegendStyle.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  setLegendSet: PropTypes.func.isRequired,\n  dataItem: PropTypes.object,\n  legendSet: PropTypes.object,\n  legendSetError: PropTypes.string,\n  mapType: PropTypes.string,\n  method: PropTypes.number,\n  style: PropTypes.object\n};\nexport default connect(_ref => {\n  let {\n    layerEdit\n  } = _ref;\n  return {\n    method: layerEdit.method,\n    legendSet: layerEdit.legendSet\n  };\n}, {\n  setClassification,\n  setLegendSet\n})(NumericLegendStyle);","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"OptionStyle_item__2QP3n\",\"color\":\"OptionStyle_color__gdTSK\",\"label\":\"OptionStyle_label__A8ydG\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { ColorPicker } from '../core/index.js';\nimport styles from './styles/OptionStyle.module.css';\nconst OptionStyle = _ref => {\n  let {\n    name,\n    color,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.item\n  }, /*#__PURE__*/React.createElement(ColorPicker, {\n    color: color,\n    onChange: onChange,\n    className: styles.color\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, name));\n};\nOptionStyle.propTypes = {\n  color: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default OptionStyle;","// extracted by mini-css-extract-plugin\nexport default {\"optionSetStyle\":\"OptionSetStyle_optionSetStyle__tvnSJ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Help, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setOptionStyle } from '../../actions/layerEdit.js';\nimport { qualitativeColors } from '../../constants/colors.js';\nimport useOptionSet from '../../hooks/useOptionSet.js';\nimport { getUniqueColor } from '../../util/colors.js';\nimport OptionStyle from './OptionStyle.js';\nimport styles from './styles/OptionSetStyle.module.css';\nconst MAX_OPTIONS = 50;\nconst getColor = getUniqueColor(qualitativeColors);\nconst addOptionStyle = (option, index) => ({\n  ...option,\n  style: {\n    color: option.style ? option.style.color : getColor(index)\n  }\n});\nconst OptionSetStyle = _ref => {\n  let {\n    styledOptionSet\n  } = _ref;\n  const {\n    optionSet\n  } = useOptionSet(styledOptionSet.id);\n  const [warning, setWarning] = useState();\n  const dispatch = useDispatch();\n  const options = styledOptionSet.id === (optionSet === null || optionSet === void 0 ? void 0 : optionSet.id) ? optionSet.options : null;\n  const styledOptions = styledOptionSet.options;\n  const onChange = useCallback((id, color) => {\n    dispatch(setOptionStyle(\n    // Update options style\n    styledOptionSet.options.map(option => option.id === id ? {\n      ...option,\n      style: {\n        color\n      }\n    } : option)));\n  }, [styledOptionSet, dispatch]);\n  useEffect(() => {\n    if (!styledOptions && options) {\n      if (options.length <= MAX_OPTIONS) {\n        // Set default options style\n        dispatch(setOptionStyle(options.map(addOptionStyle)));\n      } else {\n        setWarning(i18n.t('This data element has too many options ({{length}}). Max options for styling is {{max}}.', {\n          length: options.length,\n          max: MAX_OPTIONS\n        }));\n      }\n    }\n  }, [styledOptions, options, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.optionSetStyle\n  }, styledOptions ? styledOptions.map(_ref2 => {\n    let {\n      id,\n      name,\n      style\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(OptionStyle, {\n      key: id,\n      name: name,\n      color: style.color,\n      onChange: color => onChange(id, color)\n    });\n  }) : warning ? /*#__PURE__*/React.createElement(Help, {\n    warning: true\n  }, warning) : /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }));\n};\nOptionSetStyle.propTypes = {\n  styledOptionSet: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    options: PropTypes.array\n  }).isRequired\n};\nexport default OptionSetStyle;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setBooleanStyle } from '../../actions/layerEdit.js';\nimport { qualitativeColors } from '../../constants/colors.js';\nimport OptionStyle from '../optionSet/OptionStyle.js';\nconst style = {\n  marginTop: 20\n};\nconst BooleanStyle = _ref => {\n  let {\n    valueType,\n    values\n  } = _ref;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!values) {\n      dispatch(setBooleanStyle('true', qualitativeColors[0]));\n      if (valueType === 'BOOLEAN') {\n        dispatch(setBooleanStyle('false', qualitativeColors[1]));\n      }\n    }\n  }, [dispatch, valueType, values]);\n  if (!values) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(OptionStyle, {\n    name: i18n.t('Yes'),\n    color: values.true,\n    onChange: color => dispatch(setBooleanStyle('true', color))\n  }), valueType === 'BOOLEAN' && /*#__PURE__*/React.createElement(OptionStyle, {\n    name: i18n.t('No'),\n    color: values.false,\n    onChange: color => dispatch(setBooleanStyle('false', color))\n  }));\n};\nBooleanStyle.propTypes = {\n  valueType: PropTypes.string.isRequired,\n  values: PropTypes.shape({\n    true: PropTypes.string.isRequired,\n    false: PropTypes.string\n  })\n};\nexport default BooleanStyle;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { numberValueTypes, booleanValueTypes } from '../../constants/valueTypes.js';\nimport NumericLegendStyle from '../classification/NumericLegendStyle.js';\nimport OptionSetStyle from '../optionSet/OptionSetStyle.js';\nimport BooleanStyle from './BooleanStyle.js';\nconst DataItemStyle = _ref => {\n  let {\n    dataItem,\n    style\n  } = _ref;\n  if (!dataItem) {\n    return null;\n  }\n  const {\n    valueType,\n    optionSet\n  } = dataItem;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, !optionSet && numberValueTypes.includes(valueType) ? /*#__PURE__*/React.createElement(NumericLegendStyle, {\n    dataItem: dataItem,\n    style: {\n      width: '100%'\n    }\n  }) : null, !optionSet && booleanValueTypes.includes(valueType) ? /*#__PURE__*/React.createElement(BooleanStyle, dataItem) : null, optionSet ? /*#__PURE__*/React.createElement(OptionSetStyle, {\n    styledOptionSet: optionSet\n  }) : null);\n};\nDataItemStyle.propTypes = {\n  dataItem: PropTypes.object,\n  style: PropTypes.object\n};\nexport default DataItemStyle;","import i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setStyleDataItem } from '../../actions/layerEdit.js';\nimport { useEventDataItems } from '../../hooks/useEventDataItems.js';\nimport { SelectField } from '../core/index.js';\nimport DataItemStyle from './DataItemStyle.js';\nconst excludeTypes = ['DATE', 'FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE'];\n\n// Style by data item is used by event layer, and can be reused for TEI layer in the future.\n// Displays a select field with data items that support styling.\n// Styling options are shown when a data item is selected.\nconst StyleByDataItem = _ref => {\n  let {\n    program,\n    programStage,\n    error\n  } = _ref;\n  const styleDataItem = useSelector(state => state.layerEdit.styleDataItem);\n  const dispatch = useDispatch();\n  const {\n    eventDataItems\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    excludeTypes\n  });\n  const ITEM_NONE = {\n    id: 'none',\n    name: i18n.t('None')\n  };\n  const onChange = item => dispatch(setStyleDataItem(item.id !== ITEM_NONE.id ? item : null));\n  if (eventDataItems === null) {\n    return null;\n  }\n  const dataItems = [ITEM_NONE, ...eventDataItems];\n  const internalError = styleDataItem && !dataItems.find(item => item.id === styleDataItem.id);\n  let internalErrorText;\n  if (internalError) {\n    internalErrorText = i18n.t('Previously selected value not available in list: {{id}}', {\n      id: styleDataItem.id,\n      nsSeparator: '^^'\n    });\n  }\n  let selectValue = null;\n  if (!(error || internalError)) {\n    selectValue = styleDataItem ? styleDataItem.id : ITEM_NONE.id;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Style by data item'),\n    value: selectValue,\n    items: dataItems,\n    onChange: onChange,\n    dataTest: \"style-by-data-item-select\"\n  }), !(error || internalError) && styleDataItem && /*#__PURE__*/React.createElement(DataItemStyle, {\n    dataItem: styleDataItem\n  }), error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, error), internalError && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, internalErrorText));\n};\nStyleByDataItem.propTypes = {\n  error: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default StyleByDataItem;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { START_END_DATES } from '../../constants/periods.js';\nimport { getRelativePeriods } from '../../util/periods.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\nconst RelativePeriodSelect = _ref => {\n  let {\n    startEndDates,\n    period,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    systemSettings\n  } = useCachedData();\n  const hiddenPeriods = systemSettings.hiddenPeriods;\n  const periods = useMemo(() => (startEndDates ? [{\n    id: START_END_DATES,\n    name: i18n.t('Start/end dates')\n  }] : []).concat(getRelativePeriods(hiddenPeriods)), [hiddenPeriods, startEndDates]);\n  const value = period && periods.find(p => p.id === period.id) ? period.id : null;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period'),\n    items: periods,\n    value: value,\n    onChange: onChange,\n    className: className,\n    errorText: !value && errorText ? errorText : null,\n    dataTest: \"relative-period-select\"\n  });\n};\nRelativePeriodSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  period: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string\n  }),\n  startEndDates: PropTypes.bool\n};\nexport default RelativePeriodSelect;","// extracted by mini-css-extract-plugin\nexport default {\"row\":\"StartEndDate_row__bxUEm\",\"icon\":\"StartEndDate_icon__U7Cay\",\"field\":\"StartEndDate_field__0daOu\",\"error\":\"StartEndDate_error__mUp4Q\"};","import i18n from '@dhis2/d2-i18n';\nimport { Field, IconArrowRight16, CalendarInput, colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nimport { DEFAULT_CALENDAR, DEFAULT_PLACEHOLDER, formatDateInput, formatDateOnBlur, nextCharIsAutoHyphen, nextCharIsManualHyphen } from '../../util/date.js';\nimport styles from './styles/StartEndDate.module.css';\nconst StartEndDate = _ref => {\n  let {\n    onSelectStartDate,\n    onSelectEndDate,\n    errorText,\n    periodsSettings\n  } = _ref;\n  const dispatch = useDispatch();\n  const startDate = useSelector(state => state.layerEdit.startDate || '');\n  const endDate = useSelector(state => state.layerEdit.endDate || '');\n  const formattedStartDate = formatDateInput({\n    date: startDate\n  });\n  const formattedEndDate = formatDateInput({\n    date: endDate\n  });\n  const [startDateChangeCount, setStartDateChangeCount] = useState(0);\n  const [endDateChangeCount, setEndDateChangeCount] = useState(0);\n  const [startCaretPosition, setStartCaretPosition] = useState(null);\n  const [endCaretPosition, setEndCaretPosition] = useState(null);\n  const onDateChange = (type, date) => {\n    var _document$querySelect;\n    const stateMap = {\n      start: {\n        prevDate: startDate,\n        inputSelector: '.start input',\n        dispatchAction: onSelectStartDate,\n        setDateChangeCount: setStartDateChangeCount,\n        setCaret: setStartCaretPosition\n      },\n      end: {\n        prevDate: endDate,\n        inputSelector: '.end input',\n        dispatchAction: onSelectEndDate,\n        setDateChangeCount: setEndDateChangeCount,\n        setCaret: setEndCaretPosition\n      }\n    };\n    if (!(type in stateMap)) {\n      console.error(`Invalid type \"${type}\" passed to onDateChange. Expected \"start\" or \"end\".`);\n      return;\n    }\n    const {\n      prevDate,\n      inputSelector,\n      dispatchAction,\n      setDateChangeCount,\n      setCaret\n    } = stateMap[type];\n    if (prevDate === date) {\n      return;\n    }\n    const caret = (_document$querySelect = document.querySelector(inputSelector)) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.selectionStart;\n    const dateInfo = {\n      date,\n      prevDate,\n      caret\n    };\n    let newCaretPosition = caret;\n    if (nextCharIsAutoHyphen(dateInfo)) {\n      newCaretPosition = caret + 1;\n    } else if (nextCharIsManualHyphen(dateInfo)) {\n      // No change needed for caret position\n    } else if (/\\D/.test((date === null || date === void 0 ? void 0 : date[caret - 1]) || '')) {\n      newCaretPosition = caret - 1;\n    }\n    setCaret(newCaretPosition);\n    const formattedDate = formatDateInput(dateInfo);\n    dispatch(dispatchAction(formattedDate));\n    setDateChangeCount(prevCount => prevCount + 1);\n  };\n  useEffect(() => {\n    if (startCaretPosition !== null) {\n      const input = document.querySelector('.start input');\n      input.setSelectionRange(startCaretPosition, startCaretPosition);\n    }\n  }, [startDateChangeCount, startCaretPosition]);\n  useEffect(() => {\n    if (endCaretPosition !== null) {\n      const input = document.querySelector('.end input');\n      input.setSelectionRange(endCaretPosition, endCaretPosition);\n    }\n  }, [endDateChangeCount, endCaretPosition]);\n\n  // Forces calendar to close when using Tab/Enter navigation\n  useKeyDown(['Tab', 'Enter'], () => {\n    const backdropElement = document.querySelectorAll('.backdrop');\n    if ((backdropElement === null || backdropElement === void 0 ? void 0 : backdropElement.length) === 3) {\n      backdropElement[2].click();\n    }\n  });\n  const hasDate = startDate !== undefined && endDate !== undefined;\n  if (!hasDate) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Field, {\n    className: styles.field,\n    helpText: i18n.t('Start and end dates are inclusive and will be reflected in the outputs.')\n  }, (periodsSettings === null || periodsSettings === void 0 ? void 0 : periodsSettings.calendar) !== DEFAULT_CALENDAR && /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Start and end dates must be entered using the ISO 8601 (Gregorian) date format.')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.row\n  }, /*#__PURE__*/React.createElement(CalendarInput, {\n    className: \"start\",\n    label: i18n.t('Start date'),\n    calendar: DEFAULT_CALENDAR,\n    locale: periodsSettings === null || periodsSettings === void 0 ? void 0 : periodsSettings.locale,\n    date: formattedStartDate,\n    onDateSelect: e => dispatch(onSelectStartDate(e === null || e === void 0 ? void 0 : e.calendarDateString)),\n    onChange: e => onDateChange('start', e === null || e === void 0 ? void 0 : e.value),\n    onBlur: e => dispatch(onSelectStartDate(formatDateOnBlur(e === null || e === void 0 ? void 0 : e.value))),\n    placeholder: DEFAULT_PLACEHOLDER,\n    dataTest: \"start-date-input\",\n    clearable: true\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.icon\n  }, /*#__PURE__*/React.createElement(IconArrowRight16, {\n    color: colors.grey500\n  })), /*#__PURE__*/React.createElement(CalendarInput, {\n    className: \"end\",\n    label: i18n.t('End date'),\n    calendar: DEFAULT_CALENDAR,\n    locale: periodsSettings === null || periodsSettings === void 0 ? void 0 : periodsSettings.locale,\n    date: formattedEndDate,\n    onDateSelect: e => dispatch(onSelectEndDate(e === null || e === void 0 ? void 0 : e.calendarDateString)),\n    onChange: e => onDateChange('end', e === null || e === void 0 ? void 0 : e.value),\n    onBlur: e => dispatch(onSelectEndDate(formatDateOnBlur(e === null || e === void 0 ? void 0 : e.value))),\n    placeholder: DEFAULT_PLACEHOLDER,\n    dataTest: \"end-date-input\",\n    clearable: true\n  })), errorText && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.error\n  }, errorText));\n};\nStartEndDate.propTypes = {\n  onSelectEndDate: PropTypes.func.isRequired,\n  onSelectStartDate: PropTypes.func.isRequired,\n  errorText: PropTypes.string,\n  periodsSettings: PropTypes.shape({\n    calendar: PropTypes.string,\n    locale: PropTypes.string\n  })\n};\nexport default StartEndDate;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\nconst allProgramsItem = {\n  id: 'noPrograms',\n  name: i18n.t('No program')\n};\n\n// Load all programs\nconst PROGRAMS_QUERY = {\n  programs: {\n    resource: 'programs',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`, 'trackedEntityType[id,displayName~rename(name)]'],\n        paging: false\n      };\n    }\n  }\n};\nconst ProgramSelect = _ref2 => {\n  let {\n    program,\n    trackedEntityType,\n    className,\n    errorText,\n    onChange\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(PROGRAMS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const programs = data === null || data === void 0 ? void 0 : data.programs.programs;\n  let trackedEntityPrograms;\n  let value = program === null || program === void 0 ? void 0 : program.id;\n  if (programs && trackedEntityType) {\n    trackedEntityPrograms = [allProgramsItem, ...programs.filter(program => program.trackedEntityType && program.trackedEntityType.id === trackedEntityType.id)];\n    if (!value) {\n      value = 'noPrograms';\n    }\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program'),\n    loading: loading,\n    items: trackedEntityPrograms || programs,\n    value: value,\n    onChange: program => onChange(program.id !== 'noPrograms' ? program : null),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!program && errorText ? errorText : null),\n    dataTest: \"programselect\"\n  });\n};\nProgramSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  program: PropTypes.object,\n  trackedEntityType: PropTypes.object\n};\nexport default ProgramSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all stages for one program\nconst PROGRAM_STAGES_QUERY = {\n  stages: {\n    resource: 'programs',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: 'programStages[id,displayName~rename(name)]',\n      paging: false\n    }\n  }\n};\nconst ProgramStageSelect = _ref2 => {\n  let {\n    program,\n    programStage,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const onProgramStagesLoad = useCallback(data => {\n    const stages = data.stages.programStages;\n\n    // Select first program stage if only one\n    if (!programStage && (stages === null || stages === void 0 ? void 0 : stages.length) === 1) {\n      onChange(stages[0]);\n    }\n  }, [programStage, onChange]);\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(PROGRAM_STAGES_QUERY, {\n    onComplete: onProgramStagesLoad,\n    lazy: true\n  });\n\n  // Fetch program stages when program is changed\n  useEffect(() => {\n    refetch({\n      id: program.id\n    });\n  }, [program, refetch]);\n  let items = data === null || data === void 0 ? void 0 : data.stages.programStages;\n  if (!items && programStage) {\n    // If favorite is loaded, we only know the used program stage\n    items = [programStage];\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Stage'),\n    loading: loading,\n    items: items,\n    value: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!programStage && errorText ? errorText : null),\n    dataTest: \"programstageselect\"\n  });\n};\nProgramStageSelect.propTypes = {\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }).isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  programStage: PropTypes.object\n};\nexport default ProgramStageSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getEventStatuses, EVENT_STATUS_ALL } from '../../../constants/eventStatuses.js';\nimport { SelectField } from '../../core/index.js';\nconst EventStatusSelect = _ref => {\n  let {\n    value = EVENT_STATUS_ALL,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Event status'),\n    items: getEventStatuses(),\n    value: value,\n    onChange: valueType => onChange(valueType.id),\n    className: className\n  });\n};\nEventStatusSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default EventStatusSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, IconErrorFilled24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setProgram, setProgramStage, setEventStatus, setEventCoordinateField, setEventClustering, setEventPointColor, setEventPointRadius,\n// setFallbackCoordinateField,\nsetPeriod, setStartDate, setEndDate, setBackupPeriodsDates, setOrgUnits } from '../../../actions/layerEdit.js';\nimport { EVENT_COLOR, EVENT_RADIUS, EVENT_BUFFER, CLASSIFICATION_PREDEFINED, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { START_END_DATES } from '../../../constants/periods.js';\nimport { getPeriodFromFilters, getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { cssColor } from '../../../util/colors.js';\nimport { getDefaultDatesInCalendar } from '../../../util/date.js';\nimport { isPeriodAvailable } from '../../../util/periods.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport { Tab, Tabs, NumberField, ImageSelect, ColorPicker } from '../../core/index.js';\nimport CoordinateField from '../../dataItem/CoordinateField.js';\nimport FilterGroup from '../../dataItem/filter/FilterGroup.js';\nimport StyleByDataItem from '../../dataItem/StyleByDataItem.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport RelativePeriodSelect from '../../periods/RelativePeriodSelect.js';\nimport StartEndDate from '../../periods/StartEndDate.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport ProgramStageSelect from '../../program/ProgramStageSelect.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport EventStatusSelect from './EventStatusSelect.js';\nclass EventDialog extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      tab: 'data'\n    };\n  }\n  componentDidMount() {\n    const {\n      rows,\n      filters,\n      systemSettings,\n      startDate,\n      endDate,\n      orgUnits,\n      setPeriod,\n      setBackupPeriodsDates,\n      setOrgUnits,\n      backupPeriodsDates\n    } = this.props;\n    const period = getPeriodFromFilters(filters);\n    const {\n      keyAnalysisRelativePeriod: defaultPeriod,\n      hiddenPeriods\n    } = systemSettings;\n    const hasDate = startDate !== undefined && endDate !== undefined;\n\n    // Set default period from system settings\n    if (!period && !hasDate && defaultPeriod && isPeriodAvailable(defaultPeriod, hiddenPeriods)) {\n      setPeriod({\n        id: defaultPeriod\n      });\n    }\n\n    // Set default backup dates\n    if (!backupPeriodsDates) {\n      const defaultDates = getDefaultDatesInCalendar();\n      setBackupPeriodsDates(defaultDates);\n    }\n\n    // Set org unit tree roots as default\n    if (!rows && orgUnits.roots) {\n      setOrgUnits({\n        dimension: 'ou',\n        items: orgUnits.roots\n      });\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation,\n      filters,\n      startDate,\n      endDate,\n      setBackupPeriodsDates,\n      setStartDate,\n      setEndDate,\n      backupPeriodsDates\n    } = this.props;\n    const {\n      periodError\n    } = this.state;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n    const hasDate = startDate !== undefined || endDate !== undefined;\n    if (hasDate && getPeriodFromFilters(filters) !== undefined) {\n      setBackupPeriodsDates({\n        startDate,\n        endDate\n      });\n      setStartDate();\n      setEndDate();\n    } else if (!hasDate && getPeriodFromFilters(filters) === undefined) {\n      setStartDate(backupPeriodsDates === null || backupPeriodsDates === void 0 ? void 0 : backupPeriodsDates.startDate);\n      setEndDate(backupPeriodsDates === null || backupPeriodsDates === void 0 ? void 0 : backupPeriodsDates.endDate);\n    }\n    if (periodError && (startDate !== prev.startDate || endDate !== prev.endDate || getPeriodFromFilters(filters) !== getPeriodFromFilters(prev.filters))) {\n      this.setErrorState('periodError', null, 'period');\n    }\n  }\n  render() {\n    const {\n      // layer options\n      columns = [],\n      eventClustering,\n      eventStatus,\n      eventCoordinateField,\n      eventPointColor,\n      eventPointRadius,\n      // fallbackCoordinateField,\n      filters = [],\n      program,\n      programStage,\n      legendSet,\n      periodsSettings\n    } = this.props;\n    const {\n      // handlers\n      setProgram,\n      setProgramStage,\n      setEventStatus,\n      setEventCoordinateField,\n      setEventClustering,\n      setEventPointColor,\n      setEventPointRadius,\n      // setFallbackCoordinateField,\n      setPeriod\n    } = this.props;\n    const {\n      tab,\n      programError,\n      programStageError,\n      periodError,\n      orgUnitsError,\n      legendSetError\n    } = this.state;\n    const period = getPeriodFromFilters(filters) || {\n      id: START_END_DATES\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"eventdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"filter\"\n    }, i18n.t('Filter')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent,\n      \"data-test\": \"eventdialog-content\"\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-datatab\"\n    }, /*#__PURE__*/React.createElement(ProgramSelect, {\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError,\n      \"data-test\": \"eventdialog-programselect\"\n    }), program && /*#__PURE__*/React.createElement(ProgramStageSelect, {\n      program: program,\n      programStage: programStage,\n      onChange: setProgramStage,\n      className: styles.select,\n      errorText: programStageError\n    }), /*#__PURE__*/React.createElement(CoordinateField, {\n      program: program,\n      programStage: programStage,\n      value: eventCoordinateField,\n      onChange: setEventCoordinateField,\n      className: styles.select,\n      \"data-test\": \"eventdialog-coordinatefield\"\n    }), /*#__PURE__*/React.createElement(EventStatusSelect, {\n      value: eventStatus,\n      onChange: setEventStatus,\n      className: styles.select\n    })), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-periodtab\"\n    }, /*#__PURE__*/React.createElement(RelativePeriodSelect, {\n      period: period,\n      startEndDates: true,\n      onChange: setPeriod,\n      className: styles.select\n    }), period && period.id === START_END_DATES && /*#__PURE__*/React.createElement(StartEndDate, {\n      onSelectStartDate: setStartDate,\n      onSelectEndDate: setEndDate,\n      periodsSettings: periodsSettings\n    }), periodError && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.error\n    }, /*#__PURE__*/React.createElement(IconErrorFilled24, null), periodError)), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      hideAssociatedGeometry: true,\n      hideLevelSelect: true,\n      hideGroupSelect: true,\n      warning: orgUnitsError\n    }), tab === 'filter' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-filtertab\"\n    }, /*#__PURE__*/React.createElement(FilterGroup, {\n      program: program,\n      programStage: programStage,\n      filters: columns.filter(c => c.filter !== undefined)\n    })), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"eventdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ImageSelect, {\n      id: \"cluster\",\n      img: \"images/cluster.png\",\n      title: i18n.t('Group events'),\n      onClick: () => setEventClustering(true),\n      isSelected: eventClustering,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(ImageSelect, {\n      id: \"nocluster\",\n      img: \"images/nocluster.png\",\n      title: i18n.t('View all events'),\n      onClick: () => setEventClustering(false),\n      isSelected: !eventClustering,\n      className: styles.flexInnerColumn\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: cssColor(eventPointColor) || EVENT_COLOR,\n      onChange: setEventPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Radius'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: eventPointRadius || EVENT_RADIUS,\n      onChange: setEventPointRadius\n    })), /*#__PURE__*/React.createElement(BufferRadius, {\n      disabled: eventClustering,\n      defaultRadius: EVENT_BUFFER\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, program ? /*#__PURE__*/React.createElement(StyleByDataItem, {\n      program: program,\n      programStage: programStage,\n      error: !legendSet && legendSetError\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.notice\n    }, /*#__PURE__*/React.createElement(NoticeBox, null, i18n.t('You can style events by data element after selecting a program.')))))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      program,\n      programStage,\n      rows,\n      filters,\n      startDate,\n      endDate,\n      method,\n      legendSet,\n      styleDataItem\n    } = this.props;\n    const period = getPeriodFromFilters(filters) || {\n      id: START_END_DATES\n    };\n    if (!program) {\n      return this.setErrorState('programError', i18n.t('Program is required'), 'data');\n    }\n    if (!programStage) {\n      return this.setErrorState('programStageError', i18n.t('Program stage is required'), 'data');\n    }\n    if (period.id === START_END_DATES) {\n      const error = getStartEndDateError(startDate, endDate);\n      if (error) {\n        return this.setErrorState('periodError', error, 'period');\n      }\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected.'), 'orgunits');\n    }\n    if (method === CLASSIFICATION_PREDEFINED && !legendSet) {\n      return this.setErrorState('legendSetError', i18n.t('No legend set is selected'), 'style');\n    }\n    if (styleDataItem && styleDataItem.optionSet && !styleDataItem.optionSet.options) {\n      // Occurs when there are too many options\n      return this.setErrorState('styleDataItemError', '', 'style');\n    }\n    return true;\n  }\n}\n_defineProperty(EventDialog, \"propTypes\", {\n  setBackupPeriodsDates: PropTypes.func.isRequired,\n  setEndDate: PropTypes.func.isRequired,\n  setEventClustering: PropTypes.func.isRequired,\n  setEventCoordinateField: PropTypes.func.isRequired,\n  setEventPointColor: PropTypes.func.isRequired,\n  setEventPointRadius: PropTypes.func.isRequired,\n  setEventStatus: PropTypes.func.isRequired,\n  // setFallbackCoordinateField: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  setPeriod: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setProgramStage: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  backupPeriodsDates: PropTypes.object,\n  columns: PropTypes.array,\n  endDate: PropTypes.string,\n  eventClustering: PropTypes.bool,\n  eventCoordinateField: PropTypes.string,\n  eventPointColor: PropTypes.string,\n  eventPointRadius: PropTypes.number,\n  eventStatus: PropTypes.string,\n  // fallbackCoordinateField: PropTypes.string,\n  filters: PropTypes.array,\n  legendSet: PropTypes.object,\n  method: PropTypes.number,\n  orgUnits: PropTypes.object,\n  periodsSettings: PropTypes.object,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    trackedEntityType: PropTypes.object\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  styleDataItem: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    optionSet: PropTypes.shape({\n      options: PropTypes.array\n    })\n  }),\n  systemSettings: PropTypes.object\n});\nexport default connect(null, {\n  setProgram,\n  setProgramStage,\n  setEventStatus,\n  setEventCoordinateField,\n  setEventClustering,\n  setEventPointColor,\n  setEventPointRadius,\n  // setFallbackCoordinateField,\n  setPeriod,\n  setBackupPeriodsDates,\n  setStartDate,\n  setEndDate,\n  setOrgUnits\n}, null, {\n  forwardRef: true\n})(EventDialog);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useCallback } from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\n\n// Load org unit group sets\nconst ORG_UNIT_GROUP_SETS_QUERY = {\n  sets: {\n    resource: 'organisationUnitGroupSets',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst ITEM_NONE = {\n  id: 'none',\n  name: i18n.t('None')\n};\nconst GroupSetSelect = _ref2 => {\n  let {\n    label = i18n.t('Group set'),\n    value,\n    allowNone,\n    onChange,\n    className\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(ORG_UNIT_GROUP_SETS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const onGroupSetChange = useCallback(item => onChange(item.id !== ITEM_NONE.id ? item : undefined), [onChange]);\n  const groupSets = useMemo(() => [...(allowNone ? [ITEM_NONE] : []), ...((data === null || data === void 0 ? void 0 : data.sets.organisationUnitGroupSets) || [])], [data, allowNone]);\n  const internalError = value && !groupSets.find(item => item.id === value.id);\n  let internalErrorText;\n  if (internalError) {\n    internalErrorText = i18n.t('Previously selected value not available in list: {{id}}', {\n      id: value.id,\n      nsSeparator: '^^'\n    });\n  }\n  let selectValue = null;\n  if (!(error || internalError)) {\n    selectValue = value ? value.id : ITEM_NONE.id;\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: label,\n    loading: loading,\n    items: groupSets,\n    value: selectValue,\n    onChange: onGroupSetChange,\n    errorText: internalErrorText || (error === null || error === void 0 ? void 0 : error.message),\n    className: className,\n    dataTest: \"orgunitgroupsetselect\"\n  });\n};\nGroupSetSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  allowNone: PropTypes.bool,\n  className: PropTypes.string,\n  label: PropTypes.string,\n  value: PropTypes.object\n};\nexport default GroupSetSelect;","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"GroupStyle_item__6Iy9l\",\"color\":\"GroupStyle_color__F3Dhm\",\"symbol\":\"GroupStyle_symbol__JCmId\",\"label\":\"GroupStyle_label__1DbEY\"};","import { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/GroupStyle.module.css';\nconst GroupStyle = _ref => {\n  let {\n    name,\n    color,\n    symbol,\n    styleType\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const imagePath = `${baseUrl}/images/orgunitgroup/`;\n  const useColor = styleType !== 'SYMBOL';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.item\n  }, useColor ? /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.color,\n    style: {\n      backgroundColor: color\n    }\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.symbol,\n    style: {\n      backgroundImage: imagePath && symbol ? `url(${imagePath}${symbol})` : 'none'\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, name));\n};\nGroupStyle.propTypes = {\n  color: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  styleType: PropTypes.string.isRequired,\n  symbol: PropTypes.string\n};\nexport default GroupStyle;","// extracted by mini-css-extract-plugin\nexport default {\"groupSetStyle\":\"GroupSetStyle_groupSetStyle__fiBJG\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { STYLE_TYPE_COLOR } from '../../constants/layers.js';\nimport { ORG_UNITS_GROUP_SET_QUERY, parseGroupSet } from '../../util/orgUnits.js';\nimport GroupStyle from './GroupStyle.js';\nimport styles from './styles/GroupSetStyle.module.css';\nconst GroupSetStyle = _ref => {\n  let {\n    defaultStyleType = STYLE_TYPE_COLOR,\n    groupSet\n  } = _ref;\n  const [groups, setGroups] = useState([]);\n  const {\n    refetch\n  } = useDataQuery(ORG_UNITS_GROUP_SET_QUERY, {\n    lazy: true,\n    onComplete: _ref2 => {\n      let {\n        groupSets\n      } = _ref2;\n      const groupsWithColors = parseGroupSet({\n        organisationUnitGroups: groupSets.organisationUnitGroups\n      });\n      setGroups(groupsWithColors);\n    }\n  });\n  useEffect(() => {\n    if (groupSet !== null && groupSet !== void 0 && groupSet.id) {\n      refetch({\n        id: groupSet.id\n      });\n    }\n  }, [groupSet, refetch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"group-set-style\",\n    className: styles.groupSetStyle\n  }, groups.map(group => /*#__PURE__*/React.createElement(GroupStyle, _extends({\n    key: group.id,\n    styleType: defaultStyleType\n  }, group))));\n};\nGroupSetStyle.propTypes = {\n  defaultStyleType: PropTypes.string,\n  groupSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default GroupSetStyle;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setOrganisationUnitGroupSet } from '../../actions/layerEdit.js';\nimport styles from '../edit/styles/LayerDialog.module.css';\nimport GroupSetSelect from './GroupSetSelect.js';\nimport GroupSetStyle from './GroupSetStyle.js';\nconst StyleByGroupSet = _ref => {\n  let {\n    defaultStyleType,\n    groupSet,\n    setOrganisationUnitGroupSet\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(GroupSetSelect, {\n    label: i18n.t('Style by group set'),\n    value: groupSet,\n    allowNone: true,\n    onChange: setOrganisationUnitGroupSet,\n    className: styles.select\n  }), groupSet && /*#__PURE__*/React.createElement(GroupSetStyle, {\n    defaultStyleType: defaultStyleType,\n    groupSet: groupSet\n  }));\n};\nStyleByGroupSet.propTypes = {\n  setOrganisationUnitGroupSet: PropTypes.func.isRequired,\n  defaultStyleType: PropTypes.string,\n  groupSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    groupSet: layerEdit.organisationUnitGroupSet\n  };\n}, {\n  setOrganisationUnitGroupSet\n})(StyleByGroupSet);","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setLabels, setLabelFontColor, setLabelFontSize, setLabelFontWeight, setLabelFontStyle, setLabelTemplate } from '../../../actions/layerEdit.js';\nimport { LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { Checkbox, FontStyle, LabelDisplayOptions } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst Labels = _ref => {\n  let {\n    includeDisplayOption,\n    labels,\n    labelTemplate,\n    labelFontColor,\n    labelFontSize,\n    labelFontStyle,\n    labelFontWeight,\n    setLabels,\n    setLabelTemplate,\n    setLabelFontColor,\n    setLabelFontSize,\n    setLabelFontWeight,\n    setLabelFontStyle\n  } = _ref;\n  useEffect(() => {\n    if (labels && includeDisplayOption && !labelTemplate) {\n      setLabelTemplate(LABEL_TEMPLATE_NAME_ONLY);\n    }\n  }, [labels, includeDisplayOption, labelTemplate, setLabelTemplate]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.flexInnerColumnFlow)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Labels'),\n    checked: labels,\n    onChange: setLabels\n  }), labels && /*#__PURE__*/React.createElement(React.Fragment, null, includeDisplayOption && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.labelDisplayOptions\n  }, /*#__PURE__*/React.createElement(LabelDisplayOptions, {\n    option: labelTemplate,\n    onDisplayOptionChange: setLabelTemplate\n  })), /*#__PURE__*/React.createElement(FontStyle, {\n    color: labelFontColor,\n    size: labelFontSize,\n    weight: labelFontWeight,\n    fontStyle: labelFontStyle,\n    onColorChange: setLabelFontColor,\n    onSizeChange: setLabelFontSize,\n    onWeightChange: setLabelFontWeight,\n    onStyleChange: setLabelFontStyle\n  }))));\n};\nLabels.propTypes = {\n  setLabelFontColor: PropTypes.func.isRequired,\n  setLabelFontSize: PropTypes.func.isRequired,\n  setLabelFontStyle: PropTypes.func.isRequired,\n  setLabelFontWeight: PropTypes.func.isRequired,\n  setLabelTemplate: PropTypes.func.isRequired,\n  setLabels: PropTypes.func.isRequired,\n  includeDisplayOption: PropTypes.bool,\n  labelFontColor: PropTypes.string,\n  labelFontSize: PropTypes.string,\n  labelFontStyle: PropTypes.string,\n  labelFontWeight: PropTypes.string,\n  labelTemplate: PropTypes.string,\n  labels: PropTypes.bool\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    labels: layerEdit.labels,\n    labelTemplate: layerEdit.labelTemplate,\n    labelFontColor: layerEdit.labelFontColor,\n    labelFontSize: layerEdit.labelFontSize,\n    labelFontStyle: layerEdit.labelFontStyle,\n    labelFontWeight: layerEdit.labelFontWeight\n  };\n}, {\n  setLabels,\n  setLabelTemplate,\n  setLabelFontColor,\n  setLabelFontSize,\n  setLabelFontWeight,\n  setLabelFontStyle\n})(Labels);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setOrgUnits, setRadiusLow, setOrganisationUnitGroupSet, setOrganisationUnitColor } from '../../actions/layerEdit.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, FACILITY_BUFFER, STYLE_TYPE_SYMBOL, MIN_RADIUS, MAX_RADIUS, NONE } from '../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../util/analytics.js';\nimport { Tab, Tabs, NumberField, ColorPicker } from '../core/index.js';\nimport StyleByGroupSet from '../groupSet/StyleByGroupSet.js';\nimport OrgUnitSelect from '../orgunits/OrgUnitSelect.js';\nimport BufferRadius from './shared/BufferRadius.js';\nimport Labels from './shared/Labels.js';\nimport styles from './styles/LayerDialog.module.css';\nconst QUERY = {\n  configuration: {\n    resource: 'configuration'\n  }\n};\nconst ORGUNITS_TAB = 'orgunits';\nconst FacilityDialog = _ref => {\n  let {\n    rows = [],\n    radiusLow,\n    organisationUnitColor,\n    organisationUnitGroupSet,\n    orgUnitField,\n    id,\n    validateLayer,\n    onLayerValidation\n  } = _ref;\n  const [tab, setTab] = useState(ORGUNITS_TAB);\n  const [orgUnitsError, setOrgUnitsError] = useState();\n  const {\n    data\n  } = useDataQuery(QUERY);\n  const dispatch = useDispatch();\n  const facilityOrgUnitLevel = data === null || data === void 0 ? void 0 : data.configuration.facilityOrgUnitLevel;\n  const facilityOrgUnitGroupSet = data === null || data === void 0 ? void 0 : data.configuration.facilityOrgUnitGroupSet;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const hasOrgUnits = useCallback(() => {\n    if (!orgUnits.length) {\n      setTab(ORGUNITS_TAB);\n      setOrgUnitsError(i18n.t('No organisation units are selected'));\n      return false;\n    }\n    return true;\n  }, [orgUnits]);\n  useEffect(() => {\n    if (validateLayer) {\n      onLayerValidation(hasOrgUnits());\n    }\n  }, [validateLayer, onLayerValidation, hasOrgUnits]);\n  useEffect(() => {\n    if (!id) {\n      // Set default org unit level\n      if (facilityOrgUnitLevel) {\n        const {\n          id,\n          name\n        } = facilityOrgUnitLevel;\n        dispatch(setOrgUnits({\n          dimension: 'ou',\n          items: [{\n            id: `LEVEL-${id}`,\n            name\n          }]\n        }));\n      }\n\n      // Set default org unit group set\n      if (facilityOrgUnitGroupSet) {\n        dispatch(setOrganisationUnitGroupSet(facilityOrgUnitGroupSet));\n      }\n    }\n  }, [id, facilityOrgUnitLevel, facilityOrgUnitGroupSet, dispatch]);\n  const hasOrgUnitField = !!orgUnitField && orgUnitField !== NONE;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    \"data-test\": \"facilitydialog\"\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: ORGUNITS_TAB\n  }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, tab === ORGUNITS_TAB && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n    warning: orgUnitsError\n  }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow,\n    \"data-test\": \"facilitydialog-styletab\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(Labels, null), /*#__PURE__*/React.createElement(BufferRadius, {\n    defaultRadius: FACILITY_BUFFER,\n    hasOrgUnitField: hasOrgUnitField\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(StyleByGroupSet, {\n    defaultStyleType: STYLE_TYPE_SYMBOL\n  }), !organisationUnitGroupSet && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Point color'),\n    color: organisationUnitColor || ORG_UNIT_COLOR,\n    onChange: val => dispatch(setOrganisationUnitColor(val)),\n    className: styles.narrowField\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Point radius'),\n    value: radiusLow !== undefined ? radiusLow : ORG_UNIT_RADIUS,\n    min: MIN_RADIUS,\n    max: MAX_RADIUS,\n    onChange: val => dispatch(setRadiusLow(val)),\n    disabled: !!organisationUnitGroupSet,\n    className: styles.narrowFieldIcon\n  }))))));\n};\nFacilityDialog.propTypes = {\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  id: PropTypes.string,\n  orgUnitField: PropTypes.string,\n  organisationUnitColor: PropTypes.string,\n  organisationUnitGroupSet: PropTypes.object,\n  radiusLow: PropTypes.number,\n  rows: PropTypes.array\n};\nexport default FacilityDialog;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useEffect } from 'react';\nimport { Checkbox, ColorPicker, NumberField } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst FILL = 'color';\nconst STROKE_COLOR = 'strokeColor';\nconst STROKE_WIDTH = 'weight';\nconst POINT_SIZE = 'pointSize';\nconst FILL_TRANSPARENT = 'transparent';\nconst FIELD_TYPE_COLOR = 'color';\nconst FIELD_TYPE_NUMBER = 'number';\nconst defaultNoTransparentFillColor = '#EEEEEE';\n\n// Wrapped in a function to make sure i18n is applied\nconst getFields = () => [{\n  id: FILL,\n  label: i18n.t('Fill color'),\n  type: FIELD_TYPE_COLOR,\n  defaultValue: 'transparent',\n  allowTransparent: true\n}, {\n  id: STROKE_COLOR,\n  label: i18n.t('Line/stroke color'),\n  type: FIELD_TYPE_COLOR,\n  defaultValue: '#333333'\n}, {\n  id: STROKE_WIDTH,\n  label: i18n.t('Line/stroke width'),\n  type: FIELD_TYPE_NUMBER,\n  defaultValue: 1,\n  min: 0,\n  max: 10,\n  helpText: i18n.t('Line/stroke width must be between 0-10.')\n}, {\n  id: POINT_SIZE,\n  label: i18n.t('Point radius'),\n  type: FIELD_TYPE_NUMBER,\n  defaultValue: 5,\n  min: 1\n}];\nconst FeatureStyle = _ref => {\n  let {\n    style,\n    onChange\n  } = _ref;\n  const fields = useMemo(() => getFields(), []);\n  useEffect(() => {\n    if (!style) {\n      onChange({\n        [FILL]: FILL_TRANSPARENT,\n        [STROKE_COLOR]: '#333333',\n        [STROKE_WIDTH]: 1,\n        [POINT_SIZE]: 5\n      });\n    }\n  }, [style, onChange]);\n  if (!style) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, fields.map(_ref2 => {\n    let {\n      id,\n      label,\n      type,\n      allowTransparent,\n      min,\n      max,\n      defaultValue,\n      helpText\n    } = _ref2;\n    return type === FIELD_TYPE_COLOR ? /*#__PURE__*/React.createElement(\"div\", {\n      key: id\n    }, allowTransparent && /*#__PURE__*/React.createElement(Checkbox, {\n      label: label,\n      checked: style[id] !== FILL_TRANSPARENT,\n      onChange: isChecked => onChange({\n        [id]: isChecked ? defaultNoTransparentFillColor : FILL_TRANSPARENT\n      })\n    }), style[id] !== FILL_TRANSPARENT && /*#__PURE__*/React.createElement(ColorPicker, {\n      label: allowTransparent ? '' : label,\n      color: style[id],\n      onChange: color => onChange({\n        [id]: color\n      }),\n      className: styles.narrowField\n    })) : /*#__PURE__*/React.createElement(NumberField, {\n      key: id,\n      label: label,\n      value: style[id],\n      onChange: value => {\n        let val = parseInt(value);\n        if (min || max) {\n          if (val < min || Number.isNaN(val)) {\n            val = min;\n          }\n          if (val > max) {\n            val = max;\n          }\n        }\n        if (Number.isNaN(val)) {\n          val = defaultValue;\n        }\n        onChange({\n          [id]: parseInt(val)\n        });\n      },\n      inputWidth: '120px',\n      min: min,\n      max: max,\n      helpText: helpText\n    });\n  }));\n};\nFeatureStyle.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  style: PropTypes.object\n};\nexport default FeatureStyle;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setFeatureStyle } from '../../../actions/layerEdit.js';\nimport { Tab, Tabs } from '../../core/index.js';\nimport FeatureStyle from '../shared/FeatureStyle.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst GeoJsonDialog = _ref => {\n  let {\n    featureStyle,\n    validateLayer,\n    onLayerValidation\n  } = _ref;\n  const [tab, setTab] = useState('style');\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (validateLayer) {\n      onLayerValidation(true);\n    }\n  }, [validateLayer, onLayerValidation]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(FeatureStyle, {\n    style: featureStyle,\n    onChange: val => dispatch(setFeatureStyle(val))\n  })))));\n};\nGeoJsonDialog.propTypes = {\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  featureStyle: PropTypes.object\n};\nexport default GeoJsonDialog;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setRadiusLow, setOrganisationUnitColor } from '../../../actions/layerEdit.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, STYLE_TYPE_COLOR, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { Tab, Tabs, NumberField, ColorPicker } from '../../core/index.js';\nimport StyleByGroupSet from '../../groupSet/StyleByGroupSet.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport Labels from '../shared/Labels.js';\nimport styles from '../styles/LayerDialog.module.css';\nclass OrgUnitDialog extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      tab: 'orgunits'\n    });\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      radiusLow,\n      organisationUnitColor,\n      setOrganisationUnitColor,\n      setRadiusLow\n    } = this.props;\n    const {\n      tab,\n      orgUnitsError\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"orgunitdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      warning: orgUnitsError\n    }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"orgunitdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(Labels, null), /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Boundary color'),\n      color: organisationUnitColor || ORG_UNIT_COLOR,\n      onChange: setOrganisationUnitColor,\n      className: styles.narrowField\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point radius'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: radiusLow !== undefined ? radiusLow : ORG_UNIT_RADIUS,\n      onChange: setRadiusLow,\n      className: styles.narrowFieldIcon\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(StyleByGroupSet, {\n      defaultStyleType: STYLE_TYPE_COLOR\n    })))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      rows\n    } = this.props;\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected'), 'orgunits');\n    }\n    return true;\n  }\n}\n_defineProperty(OrgUnitDialog, \"propTypes\", {\n  setOrganisationUnitColor: PropTypes.func.isRequired,\n  setRadiusLow: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  organisationUnitColor: PropTypes.string,\n  radiusLow: PropTypes.number,\n  rows: PropTypes.array\n});\nexport default connect(null, {\n  setRadiusLow,\n  setOrganisationUnitColor\n}, null, {\n  forwardRef: true\n})(OrgUnitDialog);","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"LayerEdit_content__A1H9D\"};","// extracted by mini-css-extract-plugin\nexport default {\"calculationSelect\":\"CalculationSelect_calculationSelect__FZSw1\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField, Help } from '../core/index.js';\nimport styles from './styles/CalculationSelect.module.css';\n\n// Load all calculations\nconst CALCULATIONS_QUERY = {\n  calculations: {\n    resource: 'dataItems',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        filter: `dimensionItemType:eq:EXPRESSION_DIMENSION_ITEM`,\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst CalculationSelect = _ref2 => {\n  let {\n    calculation,\n    className,\n    errorText,\n    onChange\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(CALCULATIONS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const items = data === null || data === void 0 ? void 0 : data.calculations.dataItems;\n  const value = calculation === null || calculation === void 0 ? void 0 : calculation.id;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.calculationSelect\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Calculation'),\n    loading: loading,\n    items: items,\n    value: value,\n    onChange: dataItem => onChange(dataItem, 'calculation'),\n    className: className,\n    emptyText: i18n.t('No calculations found'),\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!calculation && errorText ? errorText : null),\n    filterable: true,\n    dataTest: \"calculationselect\"\n  }), /*#__PURE__*/React.createElement(Help, null, i18n.t('Calculations can be created in the Data Visualizer app.')));\n};\nCalculationSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  calculation: PropTypes.object,\n  className: PropTypes.string,\n  errorText: PropTypes.string\n};\nexport default CalculationSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all data element groups\nconst DATA_ELEMENT_GROUPS_QUERY = {\n  groups: {\n    resource: 'dataElementGroups',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementGroupSelect = _ref2 => {\n  let {\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(DATA_ELEMENT_GROUPS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element group'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.groups.dataElementGroups,\n    value: dataElementGroup === null || dataElementGroup === void 0 ? void 0 : dataElementGroup.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElementGroup && errorText ? errorText : null),\n    dataTest: \"dataelementgroupselect\"\n  });\n};\nDataElementGroupSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementGroupSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all data elements within a group\nconst DATA_ELEMENT_OPERAND_QUERY = {\n  operands: {\n    resource: 'dataElementOperands',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `dataElement.dataElementGroups.id:eq:${groupId}`,\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementOperandSelect = _ref2 => {\n  let {\n    dataElement,\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DATA_ELEMENT_OPERAND_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dataElementGroup) {\n      refetch({\n        groupId: dataElementGroup.id,\n        nameProperty\n      });\n    }\n  }, [dataElementGroup, nameProperty, refetch]);\n  if (!dataElementGroup && !dataElement) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.operands.dataElementOperands;\n  if (!items && dataElement) {\n    items = [dataElement]; // If favorite is loaded, we only know the used data element\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element operand'),\n    loading: loading,\n    items: items,\n    value: dataElement === null || dataElement === void 0 ? void 0 : dataElement.id,\n    onChange: dataElement => onChange(dataElement, 'operand'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElement && errorText ? errorText : null),\n    dataTest: \"dataelementoperandselect\"\n  });\n};\nDataElementOperandSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElement: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementOperandSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all data elements within a group\nconst DATA_ELEMENTS_QUERY = {\n  dataElements: {\n    resource: 'dataElements',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `dataElementGroups.id:eq:${groupId}`,\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`],\n        domainType: 'aggregate',\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementSelect = _ref2 => {\n  let {\n    dataElement,\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DATA_ELEMENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dataElementGroup) {\n      refetch({\n        groupId: dataElementGroup.id,\n        nameProperty\n      });\n    }\n  }, [dataElementGroup, nameProperty, refetch]);\n  if (!dataElementGroup && !dataElement) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.dataElements.dataElements;\n  if (!items && dataElement) {\n    items = [dataElement]; // If favorite is loaded, we only know the used data element\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element'),\n    loading: loading,\n    items: items,\n    value: dataElement === null || dataElement === void 0 ? void 0 : dataElement.id,\n    onChange: dataElement => onChange(dataElement, 'dataElement'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElement && errorText ? errorText : null),\n    dataTest: \"dataelementselect\"\n  });\n};\nDataElementSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElement: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Radio, RadioGroup } from '../core/index.js';\nconst TotalsDetailsSelect = _ref => {\n  let {\n    operand,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(RadioGroup, {\n    name: \"operand\",\n    value: operand === true ? 'details' : 'totals',\n    onChange: value => onChange(value === 'details'),\n    display: \"row\"\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: \"totals\",\n    label: i18n.t('Totals')\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"details\",\n    label: i18n.t('Details')\n  }));\n};\nTotalsDetailsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  operand: PropTypes.bool // true = 'details'\n};\n\nexport default TotalsDetailsSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useProgramTrackedEntityAttributes } from '../../hooks/useProgramTrackedEntityAttributes.js';\nimport { combineDataItems } from '../../util/analytics.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\nconst excludeValueTypes = ['FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE', 'DATE', 'TEXT', 'BOOLEAN', 'LONG_TEXT'];\nconst PROGRAM_DATA_ELEMENTS_QUERY = {\n  programDataElements: {\n    resource: 'programDataElements',\n    params: _ref => {\n      let {\n        id,\n        nameProperty\n      } = _ref;\n      return {\n        program: id,\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`, 'valueType'],\n        paging: false\n      };\n    }\n  }\n};\nconst EventDataItemSelect = _ref2 => {\n  let {\n    dataItem,\n    program,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    programAttributes\n  } = useProgramTrackedEntityAttributes({\n    programId: program === null || program === void 0 ? void 0 : program.id\n  });\n  const {\n    data,\n    refetch: refetchProgramDataElements\n  } = useDataQuery(PROGRAM_DATA_ELEMENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (program) {\n      refetchProgramDataElements({\n        id: program.id,\n        nameProperty\n      });\n    }\n  }, [program, refetchProgramDataElements, nameProperty]);\n  const dataItems = combineDataItems(programAttributes || [], (data === null || data === void 0 ? void 0 : data.programDataElements.programDataElements) || [], null, excludeValueTypes).map(item => ({\n    ...item,\n    id: !item.id.includes('.') ? `${program.id}.${item.id}` : item.id // Add program id to tracked entity attributes\n  }));\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Event data item'),\n    items: dataItems,\n    value: dataItem ? dataItem.id : null,\n    onChange: dataItem => onChange(dataItem, 'eventDataItem'),\n    className: className,\n    errorText: !dataItem && errorText ? errorText : null\n  });\n};\nEventDataItemSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataItem: PropTypes.object,\n  errorText: PropTypes.string,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default EventDataItemSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all data sets (reporting rates)\nconst DATA_SETS_QUERY = {\n  sets: {\n    resource: 'dataSets',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`, 'legendSet[id]'],\n        paging: false\n      };\n    }\n  }\n};\nconst DataSetsSelect = _ref2 => {\n  let {\n    dataSet,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(DATA_SETS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const dataSetId = dataSet ? dataSet.id.split('.')[0] : null; // Remove \".REPORTING_RATE\"\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data set'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.sets.dataSets,\n    value: dataSetId,\n    onChange: dataSet => onChange(dataSet, 'reportingRate') // Reporting rates\n    ,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataSet && errorText ? errorText : null)\n  });\n};\nDataSetsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataSetsSelect;","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"DimensionItemsSelect_select__ma-J4\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/DimensionItemsSelect.module.css';\n\n// Load dimension items\nconst DIMENSION_ITEMS_QUERY = {\n  items: {\n    resource: 'dimensions',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/items`;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        order: `${nameProperty}:asc`,\n        paging: false\n      };\n    }\n  }\n};\nconst DimensionItemsSelect = _ref3 => {\n  let {\n    dimension,\n    value,\n    onChange\n  } = _ref3;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DIMENSION_ITEMS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dimension) {\n      refetch({\n        id: dimension,\n        nameProperty\n      });\n    }\n  }, [dimension, nameProperty, refetch]);\n  const onDimensionItemClick = ids => onChange(ids.map(id => data.items.items.find(item => item.id === id)));\n  const items = data === null || data === void 0 ? void 0 : data.items.items;\n  const foundValues = value && items ? value.filter(id => items.find(f => f.id === id)) : undefined;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Items'),\n    loading: loading,\n    items: items,\n    value: foundValues,\n    multiple: true,\n    onChange: onDimensionItemClick,\n    errorText: error === null || error === void 0 ? void 0 : error.message,\n    className: styles.select,\n    dataTest: \"dimension-items-select-field\"\n  });\n};\nDimensionItemsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  value: PropTypes.array\n};\nexport default DimensionItemsSelect;","// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"DimensionSelect_dropdown__Y5vgH\",\"dimensions\":\"DimensionSelect_dimensions__BdCyG\"};","import { DimensionsPanel } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Popover, IconChevronDown24, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport styles from './styles/DimensionSelect.module.css';\n\n// Include the following dimension types\nconst dimensionTypes = ['CATEGORY', 'CATEGORY_OPTION_GROUP_SET', 'ORGANISATION_UNIT_GROUP_SET'];\n\n// Load above dimension types\nconst DIMENSIONS_QUERY = {\n  dimensions: {\n    resource: 'dimensions',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`, 'dimensionType'],\n        filter: `dimensionType:in:[${dimensionTypes.join(',')}]`,\n        order: `${nameProperty}:asc`,\n        paging: false\n      };\n    }\n  }\n};\nconst DimensionSelect = _ref2 => {\n  var _data$dimensions;\n  let {\n    dimension,\n    onChange\n  } = _ref2;\n  const [isOpen, setIsOpen] = useState(false);\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    error,\n    data\n  } = useDataQuery(DIMENSIONS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const dropdownRef = useRef();\n  const findDimension = id => data && data.dimensions.dimensions.find(d => d.id === id);\n  const selected = findDimension(dimension);\n  const onDimensionClick = dim => {\n    if (dim !== dimension) {\n      onChange(findDimension(dim));\n    }\n    setIsOpen(false);\n  };\n  if (error) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, error.message);\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setIsOpen(true),\n    className: styles.dropdown\n  }, /*#__PURE__*/React.createElement(\"label\", null, i18n.t('Dimension')), /*#__PURE__*/React.createElement(\"div\", {\n    ref: dropdownRef,\n    \"data-test\": \"dimension-select-field\"\n  }, /*#__PURE__*/React.createElement(\"span\", null, selected ? selected.name : ''), /*#__PURE__*/React.createElement(IconChevronDown24, null))), isOpen && /*#__PURE__*/React.createElement(Popover, {\n    reference: dropdownRef,\n    placement: \"bottom-start\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dimensions\n  }, /*#__PURE__*/React.createElement(DimensionsPanel, {\n    dimensions: data === null || data === void 0 ? void 0 : (_data$dimensions = data.dimensions) === null || _data$dimensions === void 0 ? void 0 : _data$dimensions.dimensions,\n    onDimensionClick: onDimensionClick,\n    selectedIds: [dimension]\n  }))));\n};\nDimensionSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  dimension: PropTypes.string\n};\nexport default DimensionSelect;","// extracted by mini-css-extract-plugin\nexport default {\"filterRow\":\"DimensionFilterRow_filterRow__v1Kno\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport RemoveFilter from '../filter/RemoveFilter.js';\nimport DimensionItemsSelect from './DimensionItemsSelect.js';\nimport DimensionSelect from './DimensionSelect.js';\nimport styles from './styles/DimensionFilterRow.module.css';\nconst DimensionFilterRow = _ref => {\n  let {\n    dimension,\n    items,\n    index,\n    onChange,\n    onRemove\n  } = _ref;\n  const onSelect = (dimension, items) => onChange(index, {\n    dimension,\n    items\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterRow\n  }, /*#__PURE__*/React.createElement(DimensionSelect, {\n    dimension: dimension,\n    onChange: selectedDimension => onSelect(selectedDimension.id)\n  }), /*#__PURE__*/React.createElement(DimensionItemsSelect, {\n    dimension: dimension,\n    value: items ? items.map(item => item.id) : null,\n    onChange: items => onSelect(dimension, items)\n  }), /*#__PURE__*/React.createElement(RemoveFilter, {\n    onClick: () => onRemove(index)\n  }));\n};\nDimensionFilterRow.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  index: PropTypes.number,\n  items: PropTypes.array\n};\nexport default DimensionFilterRow;","// extracted by mini-css-extract-plugin\nexport default {\"dimensionFilter\":\"DimensionFilter_dimensionFilter__4oaV1\",\"addFilter\":\"DimensionFilter_addFilter__bjOP-\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { addDimensionFilter, removeDimensionFilter, changeDimensionFilter } from '../../actions/layerEdit.js';\nimport DimensionFilterRow from './DimensionFilterRow.js';\nimport styles from './styles/DimensionFilter.module.css';\nconst DimensionFilter = _ref => {\n  let {\n    dimensions = [],\n    addDimensionFilter,\n    changeDimensionFilter,\n    removeDimensionFilter\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dimensionFilter\n  }, dimensions.map((item, index) => /*#__PURE__*/React.createElement(DimensionFilterRow, _extends({\n    key: index,\n    index: index,\n    onChange: changeDimensionFilter,\n    onRemove: removeDimensionFilter\n  }, item))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addFilter\n  }, /*#__PURE__*/React.createElement(Button, {\n    basic: true,\n    onClick: () => addDimensionFilter()\n  }, i18n.t('Add filter'))));\n};\nDimensionFilter.propTypes = {\n  addDimensionFilter: PropTypes.func.isRequired,\n  changeDimensionFilter: PropTypes.func.isRequired,\n  removeDimensionFilter: PropTypes.func.isRequired,\n  dimensions: PropTypes.array\n};\nexport default connect(null, {\n  addDimensionFilter,\n  removeDimensionFilter,\n  changeDimensionFilter\n})(DimensionFilter);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all indicator groups\nconst INDICATOR_GROUPS_QUERY = {\n  groups: {\n    resource: 'indicatorGroups',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst IndicatorGroupSelect = _ref => {\n  let {\n    indicatorGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(INDICATOR_GROUPS_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Indicator group'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.groups.indicatorGroups,\n    value: indicatorGroup === null || indicatorGroup === void 0 ? void 0 : indicatorGroup.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!indicatorGroup && errorText ? errorText : null),\n    dataTest: \"indicatorgroupselect\"\n  });\n};\nIndicatorGroupSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  indicatorGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default IndicatorGroupSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all indicators within a group\nconst INDICATORS_QUERY = {\n  indicators: {\n    resource: 'indicators',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `indicatorGroups.id:eq:${groupId}`,\n        fields: ['id', `${nameProperty}~rename(name)`, 'legendSet[id]'],\n        paging: false\n      };\n    }\n  }\n};\nconst IndicatorSelect = _ref2 => {\n  let {\n    indicator,\n    indicatorGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(INDICATORS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (indicatorGroup) {\n      refetch({\n        groupId: indicatorGroup.id,\n        nameProperty\n      });\n    }\n  }, [indicatorGroup, nameProperty, refetch]);\n  if (!indicatorGroup && !indicator) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.indicators.indicators;\n  if (!items && indicator) {\n    items = [indicator]; // If favorite is loaded, we only know the used indicator\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    key: \"indicators\",\n    loading: loading,\n    label: i18n.t('Indicator'),\n    items: items,\n    value: indicator === null || indicator === void 0 ? void 0 : indicator.id,\n    onChange: dataItem => onChange(dataItem, 'indicator'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!indicator && errorText ? errorText : null),\n    dataTest: \"indicatorselect\"\n  });\n};\nIndicatorSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  indicator: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  indicatorGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default IndicatorSelect;","import React from 'react';\nexport const IconPeriodDisplaySingle = () => {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"48\",\n    height: \"48\",\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip0_1354_2351)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"48\",\n    height: \"48\",\n    rx: \"5\",\n    fill: \"#CED5D7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M37.5 49.5H40.5H49V-1H-2.5V8.5L1.5 10.5L4.5 12.5L6.5 15.5V19L8 22L6.5 23.5V26L8 28.5H11L12 31.5L11 34L12 36.5L15 37.5L21 39.5L23.5 40.5L26.5 42L28.5 44.5L30.5 45.5L34 47L37.5 49.5Z\",\n    fill: \"#F8F6F5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.5 40.5L26.5 42H29.5L30 39L33 38.5L34 36L36 35L38 33L39 29L43 28V25L41 24V23L39 22V20L38 16L35 14.5V13L31 8L28.5 7H23.5L21 8H17L16 12H15L14 13L13 16H11L10 18H7L6.5 19L8 22L6.5 23.5V26L8 28.5H11L12 31.5L11 34L12 36.5L15 37.5L21 39.5L23.5 40.5Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.5 40.5L26.5 42H29.5L30 39L33 38.5L34 36L36 35L35 34L33 33V31L36 30V28L34 27H32L30 25H27L25 26H24V28L23 29V31L20 32V33.5L18 35L16 34H11L12 36.5L15 37.5L21 39.5L23.5 40.5Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 31.5L11 34H16L18 35L20 33.5V32L23 31V29L24 28V26H25L27 25H29.5L31 24L30 22V20H29L28 18L26 17L25.5 16.5H24V20L23 22L22 23H19V24L16 26H14L13.5 27L11 28.5L12 31.5Z\",\n    fill: \"#3C83BB\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 28.5H11L13.5 27L14 26H16L19 24V22L18 20L15 19.5V18H16L18 17V15L16.5 14L16 12H15L14 13L13 16H11L10 18H7L6.5 19L8 22L6.5 23.5V26L8 28.5Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31 8L28.5 7H24L23 9L21 12L22 15H24L26 17L28 18L29 20H31L35 21L39 20L38 16L35 14.5V13L31 8Z\",\n    fill: \"#CEE5F7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.5 40.5L26.5 42H29.5L30 39V37L29 35H27L25 36L23 37L22 39L23.5 40.5Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 32V33.5L21 35H22L23 36L24 37L26 36H27L28 35V33L29 32L31 31V30L30 29L28 28L27 27V25L25 26H24V28L23 29V31L20 32Z\",\n    fill: \"#1D5699\"\n  })), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"47\",\n    height: \"47\",\n    rx: \"4.5\",\n    stroke: \"#D5DDE5\"\n  }), /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0_1354_2351\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"48\",\n    height: \"48\",\n    rx: \"5\",\n    fill: \"white\"\n  }))));\n};\nexport const IconPeriodDisplaySplit = () => {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"48\",\n    height: \"48\",\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip0_1355_2503)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip1_1355_2503)\"\n  }, /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"path-3-inside-1_1355_2503\",\n    fill: \"white\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0H24V24H0V0Z\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0H24V24H0V0Z\",\n    fill: \"#CED5D7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.75 24.75H20.25H24.5V-0.5H-1.25V4.25L0.75 5.25L2.25 6.25L3.25 7.75V9.5L4 11L3.25 11.75V13L4 14.25H5.5L6 15.75L5.5 17L6 18.25L7.5 18.75L10.5 19.75L11.75 20.25L13.25 21L14.25 22.25L15.25 22.75L17 23.5L18.75 24.75Z\",\n    fill: \"#F8F6F5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.75 20.25L13.25 21H14.75L15 19.5L16.5 19.25L17 18L18 17.5L19 16.5L19.5 14.5L21.5 14V12.5L20.5 12V11.5L19.5 11V10L19 8L17.5 7.25V6.5L15.5 4L14.25 3.5H11.75L10.5 4H8.5L8 6H7.5L7 6.5L6.5 8H5.5L5 9H3.5L3.25 9.5L4 11L3.25 11.75V13L4 14.25H5.5L6 15.75L5.5 17L6 18.25L7.5 18.75L10.5 19.75L11.75 20.25Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.75 20.25L13.25 21H14.75L15 19.5L16.5 19.25L17 18L18 17.5L17.5 17L16.5 16.5V15.5L18 15V14L17 13.5H16L15 12.5H13.5L12.5 13H12V14L11.5 14.5V15.5L10 16V16.75L9 17.5L8 17H5.5L6 18.25L7.5 18.75L10.5 19.75L11.75 20.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 15.75L5.5 17H8L9 17.5L10 16.75V16L11.5 15.5V14.5L12 14V13H12.5L13.5 12.5H14.75L15.5 12L15 11V10H14.5L14 9L13 8.5L12.75 8.25H12V10L11.5 11L11 11.5H9.5V12L8 13H7L6.75 13.5L5.5 14.25L6 15.75Z\",\n    fill: \"#3C83BB\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4 14.25H5.5L6.75 13.5L7 13H8L9.5 12V11L9 10L7.5 9.75V9H8L9 8.5V7.5L8.25 7L8 6H7.5L7 6.5L6.5 8H5.5L5 9H3.5L3.25 9.5L4 11L3.25 11.75V13L4 14.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.5 4L14.25 3.5H12L11.5 4.5L10.5 6L11 7.5H12L13 8.5L14 9L14.5 10H15.5L17.5 10.5L19.5 10L19 8L17.5 7.25V6.5L15.5 4Z\",\n    fill: \"#CEE5F7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 16V16.75L10.5 17.5H11L11.5 18L12 18.5L13 18H13.5L14 17.5V16.5L14.5 16L15.5 15.5V15L15 14.5L14 14L13.5 13.5V12.5L12.5 13H12V14L11.5 14.5V15.5L10 16Z\",\n    fill: \"#1D5699\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23 0V24H25V0H23Z\",\n    fill: \"#D5DDE5\",\n    mask: \"url(#path-3-inside-1_1355_2503)\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip2_1355_2503)\"\n  }, /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"path-12-inside-2_1355_2503\",\n    fill: \"white\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24 24H48V48H24V24Z\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24 24H48V48H24V24Z\",\n    fill: \"#CED5D7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M42.75 48.75H44.25H48.5V23.5H22.75V28.25L24.75 29.25L26.25 30.25L27.25 31.75V33.5L28 35L27.25 35.75V37L28 38.25H29.5L30 39.75L29.5 41L30 42.25L31.5 42.75L34.5 43.75L35.75 44.25L37.25 45L38.25 46.25L39.25 46.75L41 47.5L42.75 48.75Z\",\n    fill: \"#F8F6F5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M35.75 44.25L37.25 45H38.75L39 43.5L40.5 43.25L41 42L42 41.5L43 40.5L43.5 38.5L45.5 38V36.5L44.5 36V35.5L43.5 35V34L43 32L41.5 31.25V30.5L39.5 28L38.25 27.5H35.75L34.5 28H32.5L32 30H31.5L31 30.5L30.5 32H29.5L29 33H27.5L27.25 33.5L28 35L27.25 35.75V37L28 38.25H29.5L30 39.75L29.5 41L30 42.25L31.5 42.75L34.5 43.75L35.75 44.25Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M35.75 44.25L37.25 45H38.75L39 43.5L40.5 43.25L41 42L42 41.5L41.5 41L40.5 40.5V39.5L42 39V38L41 37.5H40L39 36.5H37.5L36.5 37H36V38L35.5 38.5V39.5L34 40V40.75L33 41.5L32 41H29.5L30 42.25L31.5 42.75L34.5 43.75L35.75 44.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 39.75L29.5 41H32L33 41.5L34 40.75V40L35.5 39.5V38.5L36 38V37H36.5L37.5 36.5H38.75L39.5 36L39 35V34H38.5L38 33L37 32.5L36.75 32.25H36V34L35.5 35L35 35.5H33.5V36L32 37H31L30.75 37.5L29.5 38.25L30 39.75Z\",\n    fill: \"#3C83BB\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M28 38.25H29.5L30.75 37.5L31 37H32L33.5 36V35L33 34L31.5 33.75V33H32L33 32.5V31.5L32.25 31L32 30H31.5L31 30.5L30.5 32H29.5L29 33H27.5L27.25 33.5L28 35L27.25 35.75V37L28 38.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M39.5 28L38.25 27.5H36L35.5 28.5L34.5 30L35 31.5H36L37 32.5L38 33L38.5 34H39.5L41.5 34.5L43.5 34L43 32L41.5 31.25V30.5L39.5 28Z\",\n    fill: \"#CEE5F7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M34 40V40.75L34.5 41.5H35L35.5 42L36 42.5L37 42H37.5L38 41.5V40.5L38.5 40L39.5 39.5V39L39 38.5L38 38L37.5 37.5V36.5L36.5 37H36V38L35.5 38.5V39.5L34 40Z\",\n    fill: \"#1D5699\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24 25H48V23H24V25Z\",\n    fill: \"#D5DDE5\",\n    mask: \"url(#path-12-inside-2_1355_2503)\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip3_1355_2503)\"\n  }, /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"path-21-inside-3_1355_2503\",\n    fill: \"white\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 24H24V48H0V24Z\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 24H24V48H0V24Z\",\n    fill: \"#CED5D7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.75 48.75H20.25H24.5V23.5H-1.25V28.25L0.75 29.25L2.25 30.25L3.25 31.75V33.5L4 35L3.25 35.75V37L4 38.25H5.5L6 39.75L5.5 41L6 42.25L7.5 42.75L10.5 43.75L11.75 44.25L13.25 45L14.25 46.25L15.25 46.75L17 47.5L18.75 48.75Z\",\n    fill: \"#F8F6F5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.75 44.25L13.25 45H14.75L15 43.5L16.5 43.25L17 42L18 41.5L19 40.5L19.5 38.5L21.5 38V36.5L20.5 36V35.5L19.5 35V34L19 32L17.5 31.25V30.5L15.5 28L14.25 27.5H11.75L10.5 28H8.5L8 30H7.5L7 30.5L6.5 32H5.5L5 33H3.5L3.25 33.5L4 35L3.25 35.75V37L4 38.25H5.5L6 39.75L5.5 41L6 42.25L7.5 42.75L10.5 43.75L11.75 44.25Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.75 44.25L13.25 45H14.75L15 43.5L16.5 43.25L17 42L18 41.5L17.5 41L16.5 40.5V39.5L18 39V38L17 37.5H16L15 36.5H13.5L12.5 37H12V38L11.5 38.5V39.5L10 40V40.75L9 41.5L8 41H5.5L6 42.25L7.5 42.75L10.5 43.75L11.75 44.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 39.75L5.5 41H8L9 41.5L10 40.75V40L11.5 39.5V38.5L12 38V37H12.5L13.5 36.5H14.75L15.5 36L15 35V34H14.5L14 33L13 32.5L12.75 32.25H12V34L11.5 35L11 35.5H9.5V36L8 37H7L6.75 37.5L5.5 38.25L6 39.75Z\",\n    fill: \"#3C83BB\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4 38.25H5.5L6.75 37.5L7 37H8L9.5 36V35L9 34L7.5 33.75V33H8L9 32.5V31.5L8.25 31L8 30H7.5L7 30.5L6.5 32H5.5L5 33H3.5L3.25 33.5L4 35L3.25 35.75V37L4 38.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.5 28L14.25 27.5H12L11.5 28.5L10.5 30L11 31.5H12L13 32.5L14 33L14.5 34H15.5L17.5 34.5L19.5 34L19 32L17.5 31.25V30.5L15.5 28Z\",\n    fill: \"#CEE5F7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10 40V40.75L10.5 41.5H11L11.5 42L12 42.5L13 42H13.5L14 41.5V40.5L14.5 40L15.5 39.5V39L15 38.5L14 38L13.5 37.5V36.5L12.5 37H12V38L11.5 38.5V39.5L10 40Z\",\n    fill: \"#1D5699\"\n  })), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24 24H25V23H24V24ZM0 25H24V23H0V25ZM23 24V48H25V24H23Z\",\n    fill: \"#D5DDE5\",\n    mask: \"url(#path-21-inside-3_1355_2503)\"\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip4_1355_2503)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"24\",\n    height: \"24\",\n    transform: \"translate(24)\",\n    fill: \"#CED5D7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M42.75 24.75H44.25H48.5V-0.5H22.75V4.25L24.75 5.25L26.25 6.25L27.25 7.75V9.5L28 11L27.25 11.75V13L28 14.25H29.5L30 15.75L29.5 17L30 18.25L31.5 18.75L34.5 19.75L35.75 20.25L37.25 21L38.25 22.25L39.25 22.75L41 23.5L42.75 24.75Z\",\n    fill: \"#F8F6F5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M35.75 20.25L37.25 21H38.75L39 19.5L40.5 19.25L41 18L42 17.5L43 16.5L43.5 14.5L45.5 14V12.5L44.5 12V11.5L43.5 11V10L43 8L41.5 7.25V6.5L39.5 4L38.25 3.5H35.75L34.5 4H32.5L32 6H31.5L31 6.5L30.5 8H29.5L29 9H27.5L27.25 9.5L28 11L27.25 11.75V13L28 14.25H29.5L30 15.75L29.5 17L30 18.25L31.5 18.75L34.5 19.75L35.75 20.25Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M35.75 20.25L37.25 21H38.75L39 19.5L40.5 19.25L41 18L42 17.5L41.5 17L40.5 16.5V15.5L42 15V14L41 13.5H40L39 12.5H37.5L36.5 13H36V14L35.5 14.5V15.5L34 16V16.75L33 17.5L32 17H29.5L30 18.25L31.5 18.75L34.5 19.75L35.75 20.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 15.75L29.5 17H32L33 17.5L34 16.75V16L35.5 15.5V14.5L36 14V13H36.5L37.5 12.5H38.75L39.5 12L39 11V10H38.5L38 9L37 8.5L36.75 8.25H36V10L35.5 11L35 11.5H33.5V12L32 13H31L30.75 13.5L29.5 14.25L30 15.75Z\",\n    fill: \"#3C83BB\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M28 14.25H29.5L30.75 13.5L31 13H32L33.5 12V11L33 10L31.5 9.75V9H32L33 8.5V7.5L32.25 7L32 6H31.5L31 6.5L30.5 8H29.5L29 9H27.5L27.25 9.5L28 11L27.25 11.75V13L28 14.25Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M39.5 4L38.25 3.5H36L35.5 4.5L34.5 6L35 7.5H36L37 8.5L38 9L38.5 10H39.5L41.5 10.5L43.5 10L43 8L41.5 7.25V6.5L39.5 4Z\",\n    fill: \"#CEE5F7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M34 16V16.75L34.5 17.5H35L35.5 18L36 18.5L37 18H37.5L38 17.5V16.5L38.5 16L39.5 15.5V15L39 14.5L38 14L37.5 13.5V12.5L36.5 13H36V14L35.5 14.5V15.5L34 16Z\",\n    fill: \"#1D5699\"\n  }))), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"47\",\n    height: \"47\",\n    rx: \"4.5\",\n    stroke: \"#D5DDE5\"\n  }), /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0_1355_2503\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"48\",\n    height: \"48\",\n    rx: \"5\",\n    fill: \"white\"\n  })), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip1_1355_2503\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0H24V24H0V0Z\",\n    fill: \"white\"\n  })), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip2_1355_2503\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M24 24H48V48H24V24Z\",\n    fill: \"white\"\n  })), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip3_1355_2503\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 24H24V48H0V24Z\",\n    fill: \"white\"\n  })), /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip4_1355_2503\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"24\",\n    height: \"24\",\n    fill: \"white\",\n    transform: \"translate(24)\"\n  }))));\n};\nexport const IconPeriodDisplayTimeline = () => {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"48\",\n    height: \"48\",\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    clipPath: \"url(#clip0_1355_2474)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"48\",\n    height: \"48\",\n    rx: \"5\",\n    fill: \"#CED5D7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M37.5 49.5H40.5H49V-1H-2.5V8.5L1.5 10.5L4.5 12.5L6.5 15.5V19L8 22L6.5 23.5V26L8 28.5H11L12 31.5L11 34L12 36.5L15 37.5L21 39.5L23.5 40.5L26.5 42L28.5 44.5L30.5 45.5L34 47L37.5 49.5Z\",\n    fill: \"#F8F6F5\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.5 40.5L26.5 42H29.5L30 39L33 38.5L34 36L36 35L38 33L39 29L43 28V25L41 24V23L39 22V20L38 16L35 14.5V13L31 8L28.5 7H23.5L21 8H17L16 12H15L14 13L13 16H11L10 18H7L6.5 19L8 22L6.5 23.5V26L8 28.5H11L12 31.5L11 34L12 36.5L15 37.5L21 39.5L23.5 40.5Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.5 40.5L26.5 42H29.5L30 39L33 38.5L34 36L36 35L35 34L33 33V31L36 30V28L34 27H32L30 25H27L25 26H24V28L23 29V31L20 32V33.5L18 35L16 34H11L12 36.5L15 37.5L21 39.5L23.5 40.5Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 31.5L11 34H16L18 35L20 33.5V32L23 31V29L24 28V26H25L27 25H29.5L31 24L30 22V20H29L28 18L26 17L25.5 16.5H24V20L23 22L22 23H19V24L16 26H14L13.5 27L11 28.5L12 31.5Z\",\n    fill: \"#3C83BB\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8 28.5H11L13.5 27L14 26H16L19 24V22L18 20L15 19.5V18H16L18 17V15L16.5 14L16 12H15L14 13L13 16H11L10 18H7L6.5 19L8 22L6.5 23.5V26L8 28.5Z\",\n    fill: \"#6DACD3\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M31 8L28.5 7H24L23 9L21 12L22 15H24L26 17L28 18L29 20H31L35 21L39 20L38 16L35 14.5V13L31 8Z\",\n    fill: \"#CEE5F7\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M23.5 40.5L26.5 42H29.5L30 39V37L29 35H27L25 36L23 37L22 39L23.5 40.5Z\",\n    fill: \"#B0D2E9\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 32V33.5L21 35H22L23 36L24 37L26 36H27L28 35V33L29 32L31 31V30L30 29L28 28L27 27V25L25 26H24V28L23 29V31L20 32Z\",\n    fill: \"#1D5699\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"4\",\n    y: \"32\",\n    width: \"40\",\n    height: \"12\",\n    rx: \"1\",\n    fill: \"white\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 34V42L13 38L7 34Z\",\n    fill: \"#4A5768\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"33\",\n    y: \"36\",\n    width: \"3\",\n    height: \"4\",\n    fill: \"#4A5768\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"21\",\n    y: \"36\",\n    width: \"3\",\n    height: \"4\",\n    fill: \"#4A5768\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"27\",\n    y: \"36\",\n    width: \"3\",\n    height: \"4\",\n    fill: \"#4A5768\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"15\",\n    y: \"36\",\n    width: \"3\",\n    height: \"4\",\n    fill: \"#4A5768\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"39\",\n    y: \"36\",\n    width: \"3\",\n    height: \"4\",\n    fill: \"#4A5768\"\n  })), /*#__PURE__*/React.createElement(\"rect\", {\n    x: \"0.5\",\n    y: \"0.5\",\n    width: \"47\",\n    height: \"47\",\n    rx: \"4.5\",\n    stroke: \"#D5DDE5\"\n  }), /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n    id: \"clip0_1355_2474\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    width: \"48\",\n    height: \"48\",\n    rx: \"5\",\n    fill: \"white\"\n  }))));\n};","// extracted by mini-css-extract-plugin\nexport default {\"renderingStrategy\":\"RenderingStrategy_renderingStrategy__pR1O3\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RENDERING_STRATEGY_SINGLE, RENDERING_STRATEGY_TIMELINE, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../../constants/layers.js';\nimport { MULTIMAP_MIN_PERIODS, MULTIMAP_MAX_PERIODS } from '../../constants/periods.js';\nimport usePrevious from '../../hooks/usePrevious.js';\nimport { getPeriodsFromFilters } from '../../util/analytics.js';\nimport { countPeriods } from '../../util/periods.js';\nimport { CustomRadioLabel, Radio, RadioGroup } from '../core/index.js';\nimport { IconPeriodDisplaySingle, IconPeriodDisplaySplit, IconPeriodDisplayTimeline } from './icons.js';\nimport styles from './styles/RenderingStrategy.module.css';\nconst RenderingStrategy = _ref => {\n  let {\n    layerId,\n    value = RENDERING_STRATEGY_SINGLE,\n    periods = [],\n    onChange\n  } = _ref;\n  const prevPeriods = usePrevious(periods);\n  const totalPeriods = useMemo(() => countPeriods(periods), [periods]);\n  const hasOtherLayers = useSelector(_ref2 => {\n    let {\n      map\n    } = _ref2;\n    return map.mapViews.some(_ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id !== layerId;\n    });\n  });\n  const hasOtherTimelineLayers = useSelector(_ref4 => {\n    let {\n      map\n    } = _ref4;\n    return map.mapViews.some(layer => layer.renderingStrategy === RENDERING_STRATEGY_TIMELINE && layer.id !== layerId);\n  });\n  const hasTooManyPeriods = useSelector(_ref5 => {\n    let {\n      layerEdit\n    } = _ref5;\n    const periods = getPeriodsFromFilters(layerEdit.filters);\n    return countPeriods(periods) > MULTIMAP_MAX_PERIODS;\n  });\n  useEffect(() => {\n    if (periods === prevPeriods) {\n      return;\n    }\n    if (totalPeriods < MULTIMAP_MIN_PERIODS && value !== RENDERING_STRATEGY_SINGLE) {\n      onChange(RENDERING_STRATEGY_SINGLE);\n    } else if (totalPeriods > MULTIMAP_MAX_PERIODS && value === RENDERING_STRATEGY_SPLIT_BY_PERIOD) {\n      onChange(RENDERING_STRATEGY_SINGLE);\n    }\n  }, [value, periods, prevPeriods, onChange, totalPeriods]);\n  const getHelpText = useMemo(() => ({\n    [RENDERING_STRATEGY_SINGLE]: undefined,\n    [RENDERING_STRATEGY_TIMELINE]: totalPeriods < MULTIMAP_MIN_PERIODS ? i18n.t('Select at least {{number}} periods or 1 multi-period.', {\n      number: MULTIMAP_MIN_PERIODS\n    }) : hasOtherTimelineLayers ? i18n.t('Remove the existing timeline to add a new one.') : undefined,\n    [RENDERING_STRATEGY_SPLIT_BY_PERIOD]: totalPeriods < MULTIMAP_MIN_PERIODS ? i18n.t('Select at least {{number}} periods or 1 multi-period.', {\n      number: MULTIMAP_MIN_PERIODS\n    }) : hasTooManyPeriods ? i18n.t('Only up to a total of {{number}} periods (including those in multi-periods) can be selected.', {\n      number: MULTIMAP_MAX_PERIODS\n    }) : hasOtherLayers ? i18n.t('Remove all other layers to add a split map view.') : undefined\n  }), [totalPeriods, hasOtherTimelineLayers, hasTooManyPeriods, hasOtherLayers]);\n  const isDisabled = strategy => {\n    switch (strategy) {\n      case RENDERING_STRATEGY_TIMELINE:\n        return totalPeriods < MULTIMAP_MIN_PERIODS || hasOtherTimelineLayers;\n      case RENDERING_STRATEGY_SPLIT_BY_PERIOD:\n        return totalPeriods < MULTIMAP_MIN_PERIODS || hasTooManyPeriods || hasOtherLayers;\n      default:\n        return false;\n    }\n  };\n  const strategies = [{\n    value: RENDERING_STRATEGY_SINGLE,\n    icon: /*#__PURE__*/React.createElement(IconPeriodDisplaySingle, null),\n    label: i18n.t('Single'),\n    sublabel: i18n.t('Show periods as a combined layer. Data is aggregated.')\n  }, {\n    value: RENDERING_STRATEGY_TIMELINE,\n    icon: /*#__PURE__*/React.createElement(IconPeriodDisplayTimeline, null),\n    label: i18n.t('Timeline'),\n    sublabel: i18n.t('Show multiple periods as an interactive timeline.')\n  }, {\n    value: RENDERING_STRATEGY_SPLIT_BY_PERIOD,\n    icon: /*#__PURE__*/React.createElement(IconPeriodDisplaySplit, null),\n    label: i18n.t('Split'),\n    sublabel: i18n.t('Show multiple maps in view, one for each period (max {{number}}).', {\n      number: MULTIMAP_MAX_PERIODS\n    })\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.renderingStrategy\n  }, /*#__PURE__*/React.createElement(RadioGroup, {\n    label: i18n.t('Period display mode'),\n    value: value,\n    onChange: onChange,\n    boldLabel: true,\n    display: \"row\"\n  }, strategies.map(_ref6 => {\n    let {\n      value: strategy,\n      icon,\n      label,\n      sublabel\n    } = _ref6;\n    const content = /*#__PURE__*/React.createElement(Radio, {\n      value: strategy,\n      label: /*#__PURE__*/React.createElement(CustomRadioLabel, {\n        icon: icon,\n        label: label,\n        sublabel: sublabel,\n        checked: value === strategy,\n        disabled: isDisabled(strategy)\n      }),\n      disabled: isDisabled(strategy)\n    });\n    const tooltip = getHelpText[strategy];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: strategy\n    }, tooltip ? /*#__PURE__*/React.createElement(Tooltip, {\n      content: tooltip,\n      placement: \"top\"\n    }, content) : content);\n  })));\n};\nRenderingStrategy.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  layerId: PropTypes.string,\n  periods: PropTypes.array,\n  value: PropTypes.string\n};\nexport default RenderingStrategy;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { sortBy } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { SelectField } from '../core/index.js';\n\n// Load program indicators for one program\nconst PROGRAM_INDICATORS_QUERY = {\n  indicators: {\n    resource: 'programIndicators',\n    params: _ref => {\n      let {\n        id,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `program.id:eq:${id}`,\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst ProgramIndicatorSelect = _ref2 => {\n  let {\n    program,\n    programIndicator,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedData();\n  const {\n    data,\n    loading,\n    error,\n    refetch\n  } = useDataQuery(PROGRAM_INDICATORS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (program) {\n      refetch({\n        id: program.id,\n        nameProperty\n      });\n    }\n  }, [program, nameProperty, refetch]);\n  const indicators = sortBy('name', data === null || data === void 0 ? void 0 : data.indicators.programIndicators);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program indicator'),\n    loading: loading,\n    items: indicators,\n    value: programIndicator === null || programIndicator === void 0 ? void 0 : programIndicator.id,\n    onChange: programIndicator => onChange(programIndicator, 'programIndicator'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!programIndicator && errorText ? errorText : null)\n  });\n};\nProgramIndicatorSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  program: PropTypes.object,\n  programIndicator: PropTypes.object\n};\nexport default ProgramIndicatorSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setAggregationType } from '../../../actions/layerEdit.js';\nimport { getThematicAggregationTypes } from '../../../constants/aggregationTypes.js';\nimport { SelectField } from '../../core/index.js';\nconst AggregationTypeSelect = _ref => {\n  let {\n    aggregationType,\n    setAggregationType,\n    className\n  } = _ref;\n  const types = getThematicAggregationTypes();\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Aggregation type'),\n    items: getThematicAggregationTypes(),\n    value: aggregationType || types[0].id,\n    onChange: type => setAggregationType(type.id),\n    className: className\n  });\n};\nAggregationTypeSelect.propTypes = {\n  setAggregationType: PropTypes.func.isRequired,\n  aggregationType: PropTypes.string,\n  className: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    aggregationType: layerEdit.aggregationType\n  };\n}, {\n  setAggregationType\n})(AggregationTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setEventStatus } from '../../../actions/layerEdit.js';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { EVENT_STATUS_ALL, EVENT_STATUS_COMPLETED } from '../../../constants/eventStatuses.js';\nimport { Checkbox } from '../../core/index.js';\nconst eventDataTypes = [dimConf.indicator.objectName, dimConf.programIndicator.objectName, dimConf.eventDataItem.objectName];\nconst CompletedOnlyCheckbox = _ref => {\n  let {\n    valueType,\n    completedOnly,\n    setEventStatus\n  } = _ref;\n  const hasEventData = eventDataTypes.includes(valueType);\n  useEffect(() => {\n    if (completedOnly && !hasEventData) {\n      setEventStatus(EVENT_STATUS_ALL);\n    }\n  }, [completedOnly, hasEventData, setEventStatus]);\n  return hasEventData ? /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Only show completed events'),\n    checked: completedOnly,\n    onChange: isChecked => setEventStatus(isChecked ? EVENT_STATUS_COMPLETED : EVENT_STATUS_ALL)\n  }) : null;\n};\nCompletedOnlyCheckbox.propTypes = {\n  setEventStatus: PropTypes.func.isRequired,\n  completedOnly: PropTypes.bool,\n  valueType: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    completedOnly: layerEdit.eventStatus === EVENT_STATUS_COMPLETED\n  };\n}, {\n  setEventStatus\n})(CompletedOnlyCheckbox);","// extracted by mini-css-extract-plugin\nexport default {\"colorPicker\":\"NoDataColor_colorPicker__MkBea\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { NO_DATA_COLOR } from '../../../constants/layers.js';\nimport { Checkbox, ColorPicker } from '../../core/index.js';\nimport styles from './styles/NoDataColor.module.css';\nconst NoDataColor = _ref => {\n  let {\n    value,\n    onChange\n  } = _ref;\n  const onCheck = useCallback(val => onChange(val ? NO_DATA_COLOR : undefined), [onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Include org units with no data'),\n    checked: !!value,\n    onChange: onCheck\n  }), value && /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Color'),\n    color: value,\n    onChange: onChange,\n    width: 50,\n    className: styles.colorPicker\n  }));\n};\nNoDataColor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.string\n};\nexport default NoDataColor;","// extracted by mini-css-extract-plugin\nexport default {\"error\":\"RadiusSelect_error__YIA-1\"};","import i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { setRadiusLow, setRadiusHigh } from '../../../actions/layerEdit.js';\nimport { THEMATIC_RADIUS_LOW, THEMATIC_RADIUS_HIGH, THEMATIC_RADIUS_MIN, THEMATIC_RADIUS_MAX } from '../../../constants/layers.js';\nimport { NumberField } from '../../core/index.js';\nimport styles from './styles/RadiusSelect.module.css';\nexport const isValidRadius = function () {\n  let radiusLow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : THEMATIC_RADIUS_LOW;\n  let radiusHigh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : THEMATIC_RADIUS_HIGH;\n  return !isNaN(radiusLow) && !isNaN(radiusHigh) && radiusLow <= radiusHigh && radiusLow >= THEMATIC_RADIUS_MIN && radiusHigh <= THEMATIC_RADIUS_MAX;\n};\nconst RadiusSelect = _ref => {\n  let {\n    radiusLow = THEMATIC_RADIUS_LOW,\n    radiusHigh = THEMATIC_RADIUS_HIGH,\n    setRadiusLow,\n    setRadiusHigh,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Low radius'),\n    value: isNaN(radiusLow) ? '' : radiusLow,\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX,\n    onChange: setRadiusLow,\n    className: className\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('High radius'),\n    value: isNaN(radiusHigh) ? '' : radiusHigh,\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX,\n    onChange: setRadiusHigh,\n    className: className\n  }), !isValidRadius(radiusLow, radiusHigh) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.error\n  }, /*#__PURE__*/React.createElement(Help, {\n    warning: true\n  }, radiusHigh < radiusLow ? i18n.t('High radius should be greater than low radius') : i18n.t('Radius should be between {{min}} and {{max}}', {\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX\n  }))));\n};\nRadiusSelect.propTypes = {\n  setRadiusHigh: PropTypes.func.isRequired,\n  setRadiusLow: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  radiusHigh: PropTypes.number,\n  radiusLow: PropTypes.number\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    radiusLow: layerEdit.radiusLow,\n    radiusHigh: layerEdit.radiusHigh\n  };\n}, {\n  setRadiusLow,\n  setRadiusHigh\n})(RadiusSelect);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setThematicMapType } from '../../../actions/layerEdit.js';\nimport { THEMATIC_CHOROPLETH, getThematicMapTypes } from '../../../constants/layers.js';\nimport { ImageSelect } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\n\n// Select between choropleth and bubble map for thematic layers\nconst ThematicMapTypeSelect = _ref => {\n  let {\n    type = THEMATIC_CHOROPLETH,\n    setThematicMapType\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexInnerColumnFlow\n  }, getThematicMapTypes().map(_ref2 => {\n    let {\n      id,\n      name,\n      image\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(ImageSelect, {\n      key: id,\n      id: id,\n      img: image,\n      title: name,\n      onClick: setThematicMapType,\n      isSelected: type === id,\n      className: styles.flexInnerColumn\n    });\n  }));\n};\nThematicMapTypeSelect.propTypes = {\n  setThematicMapType: PropTypes.func.isRequired,\n  type: PropTypes.string\n};\nexport default connect(null, {\n  setThematicMapType\n})(ThematicMapTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { SelectField } from '../../core/index.js';\nconst getValueTypes = () => [{\n  id: dimConf.indicator.objectName,\n  name: i18n.t('Indicator')\n}, {\n  id: dimConf.dataElement.objectName,\n  name: i18n.t('Data element')\n}, {\n  id: dimConf.dataSet.objectName,\n  name: i18n.t('Reporting rates')\n}, {\n  id: dimConf.eventDataItem.objectName,\n  name: i18n.t('Event data items')\n}, {\n  id: dimConf.programIndicator.objectName,\n  name: i18n.t('Program indicators')\n}, {\n  id: dimConf.calculation.objectName,\n  name: i18n.t('Calculations')\n}];\nconst ValueTypeSelect = _ref => {\n  let {\n    value,\n    onChange,\n    className\n  } = _ref;\n  const items = useMemo(() => getValueTypes(), []);\n\n  // If value type is data element operand, make it data element\n  const type = value === dimConf.operand.objectName ? dimConf.dataElement.objectName : value;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Item type'),\n    items: items,\n    value: type,\n    onChange: valueType => onChange(valueType.id),\n    className: className,\n    dataTest: \"thematic-layer-value-type-select\"\n  });\n};\nValueTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default ValueTypeSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { PeriodDimension, getRelativePeriodsName } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { SegmentedControl, IconErrorFilled24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setDataItem, setDataElementGroup, setIndicatorGroup, setLegendSet, setNoDataColor, setOperand, setOrgUnits, setPeriods, setStartDate, setEndDate, setBackupPeriodsDates, setPeriodType, setRenderingStrategy, setProgram, setValueType } from '../../../actions/layerEdit.js';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { DEFAULT_ORG_UNIT_LEVEL, CLASSIFICATION_PREDEFINED, CLASSIFICATION_EQUAL_INTERVALS, RENDERING_STRATEGY_SINGLE } from '../../../constants/layers.js';\nimport { PREDEFINED_PERIODS, START_END_DATES } from '../../../constants/periods.js';\nimport { getDataItemFromColumns, getOrgUnitsFromRows, getPeriodsFromFilters, getDimensionsFromFilters } from '../../../util/analytics.js';\nimport { getDefaultDatesInCalendar } from '../../../util/date.js';\nimport { isPeriodAvailable } from '../../../util/periods.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport CalculationSelect from '../../calculations/CalculationSelect.js';\nimport NumericLegendStyle from '../../classification/NumericLegendStyle.js';\nimport { Tab, Tabs } from '../../core/index.js';\nimport DataElementGroupSelect from '../../dataElement/DataElementGroupSelect.js';\nimport DataElementOperandSelect from '../../dataElement/DataElementOperandSelect.js';\nimport DataElementSelect from '../../dataElement/DataElementSelect.js';\nimport TotalsDetailsSelect from '../../dataElement/TotalsDetailsSelect.js';\nimport EventDataItemSelect from '../../dataItem/EventDataItemSelect.js';\nimport DataSetsSelect from '../../dataSets/DataSetsSelect.js'; // Reporting rate\nimport DimensionFilter from '../../dimensions/DimensionFilter.js';\nimport IndicatorGroupSelect from '../../indicator/IndicatorGroupSelect.js';\nimport IndicatorSelect from '../../indicator/IndicatorSelect.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport RenderingStrategy from '../../periods/RenderingStrategy.js';\nimport StartEndDate from '../../periods/StartEndDate.js';\nimport ProgramIndicatorSelect from '../../program/ProgramIndicatorSelect.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport Labels from '../shared/Labels.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport AggregationTypeSelect from './AggregationTypeSelect.js';\nimport CompletedOnlyCheckbox from './CompletedOnlyCheckbox.js';\nimport NoDataColor from './NoDataColor.js';\nimport RadiusSelect, { isValidRadius } from './RadiusSelect.js';\nimport ThematicMapTypeSelect from './ThematicMapTypeSelect.js';\nimport ValueTypeSelect from './ValueTypeSelect.js';\nclass ThematicDialog extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      tab: 'data'\n    });\n  }\n  componentDidMount() {\n    const {\n      valueType,\n      columns,\n      rows,\n      filters,\n      orgUnits,\n      setValueType,\n      startDate,\n      systemSettings,\n      endDate,\n      setPeriods,\n      setBackupPeriodsDates,\n      setPeriodType,\n      setOrgUnits\n    } = this.props;\n    const dataItem = getDataItemFromColumns(columns);\n    const periods = getPeriodsFromFilters(filters);\n    const {\n      keyAnalysisRelativePeriod: defaultPeriod,\n      hiddenPeriods\n    } = systemSettings;\n\n    // Set value type if favorite is loaded\n    if (!valueType) {\n      if (dataItem && dataItem.dimensionItemType) {\n        const dimension = Object.keys(dimConf).find(dim => dimConf[dim].itemType === dataItem.dimensionItemType);\n        if (dimension) {\n          setValueType(dimConf[dimension].objectName, true);\n        }\n      } else {\n        setValueType(dimConf.indicator.objectName);\n      }\n    }\n    const hasDate = startDate !== undefined && endDate !== undefined;\n    if (hasDate) {\n      const keepPeriod = false;\n      setPeriodType({\n        value: START_END_DATES\n      }, keepPeriod);\n    } else {\n      const keepPeriod = true;\n      setPeriodType({\n        value: PREDEFINED_PERIODS\n      }, keepPeriod);\n    }\n\n    // Set default period from system settings\n    if ((periods === null || periods === void 0 ? void 0 : periods.length) == 0 && !hasDate && defaultPeriod && isPeriodAvailable(defaultPeriod, hiddenPeriods)) {\n      const defaultPeriods = [{\n        id: defaultPeriod,\n        name: getRelativePeriodsName()[defaultPeriod]\n      }];\n      setPeriods(defaultPeriods);\n      const defaultDates = getDefaultDatesInCalendar();\n      setBackupPeriodsDates(defaultDates);\n    }\n\n    // Set default org unit level\n    if (!rows) {\n      var _orgUnits$levels;\n      const defaultLevel = (_orgUnits$levels = orgUnits.levels) === null || _orgUnits$levels === void 0 ? void 0 : _orgUnits$levels[DEFAULT_ORG_UNIT_LEVEL];\n      if (defaultLevel) {\n        const {\n          id,\n          name\n        } = defaultLevel;\n        setOrgUnits({\n          dimension: 'ou',\n          items: [{\n            id: `LEVEL-${id}`,\n            name\n          }]\n        });\n      }\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      columns,\n      periodType,\n      renderingStrategy,\n      setPeriods,\n      setBackupPeriodsDates,\n      setStartDate,\n      setEndDate,\n      setClassification,\n      setLegendSet,\n      setRenderingStrategy,\n      validateLayer,\n      onLayerValidation,\n      startDate,\n      endDate,\n      filters,\n      backupPeriodsDates\n    } = this.props;\n    const {\n      periodError\n    } = this.state;\n\n    // Set rendering strategy to single if not relative period\n    if (periodType !== PREDEFINED_PERIODS && renderingStrategy !== RENDERING_STRATEGY_SINGLE) {\n      setRenderingStrategy(RENDERING_STRATEGY_SINGLE);\n    }\n\n    // Set the default classification/legend for selected data item without visiting the style tab\n    if (columns !== prev.columns) {\n      const dataItem = getDataItemFromColumns(columns);\n      if (dataItem) {\n        if (dataItem.legendSet) {\n          setClassification(CLASSIFICATION_PREDEFINED);\n          setLegendSet(dataItem.legendSet);\n        } else {\n          setClassification(CLASSIFICATION_EQUAL_INTERVALS);\n          setLegendSet();\n        }\n      }\n    }\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n    if (prev.periodType && periodType !== prev.periodType) {\n      switch (periodType) {\n        case PREDEFINED_PERIODS:\n          setBackupPeriodsDates({\n            startDate,\n            endDate\n          });\n          setPeriods((backupPeriodsDates === null || backupPeriodsDates === void 0 ? void 0 : backupPeriodsDates.periods) || []);\n          setStartDate();\n          setEndDate();\n          break;\n        case START_END_DATES:\n          setBackupPeriodsDates({\n            periods: getPeriodsFromFilters(filters)\n          });\n          setStartDate(backupPeriodsDates === null || backupPeriodsDates === void 0 ? void 0 : backupPeriodsDates.startDate);\n          setEndDate(backupPeriodsDates === null || backupPeriodsDates === void 0 ? void 0 : backupPeriodsDates.endDate);\n          setPeriods([]);\n          break;\n      }\n    } else if (periodError && (periodType !== prev.periodType || startDate !== prev.startDate || endDate !== prev.endDate || getPeriodsFromFilters(filters).length !== getPeriodsFromFilters(prev.filters).length)) {\n      this.setErrorState('periodError', null, 'period');\n    }\n  }\n  render() {\n    const {\n      // Layer options\n      columns,\n      dataElementGroup,\n      filters,\n      id,\n      indicatorGroup,\n      noDataColor,\n      operand,\n      periodType,\n      renderingStrategy,\n      program,\n      valueType,\n      thematicMapType,\n      systemSettings,\n      periodsSettings\n    } = this.props;\n    const {\n      // Handlers\n      setDataItem,\n      setDataElementGroup,\n      setIndicatorGroup,\n      setNoDataColor,\n      setOperand,\n      setPeriods,\n      setPeriodType,\n      setRenderingStrategy,\n      setProgram,\n      setValueType\n    } = this.props;\n    const {\n      tab,\n      indicatorGroupError,\n      indicatorError,\n      dataElementGroupError,\n      dataElementError,\n      dataSetError,\n      programError,\n      calculationError,\n      eventDataItemError,\n      programIndicatorError,\n      periodError,\n      orgUnitsError,\n      legendSetError\n    } = this.state;\n    const periods = getPeriodsFromFilters(filters);\n    const dataItem = getDataItemFromColumns(columns);\n    const dimensions = getDimensionsFromFilters(filters);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"thematicdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\",\n      dataTest: \"thematicdialog-tabs-data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\",\n      dataTest: \"thematicdialog-tabs-period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\",\n      dataTest: \"thematicdialog-tabs-orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"filter\",\n      dataTest: \"thematicdialog-tabs-filter\"\n    }, i18n.t('Filter')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\",\n      dataTest: \"thematicdialog-tabs-style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-datatab\"\n    }, /*#__PURE__*/React.createElement(ValueTypeSelect, {\n      value: valueType,\n      className: styles.select,\n      onChange: setValueType\n    }), (!valueType || valueType === dimConf.indicator.objectName) && [\n    /*#__PURE__*/\n    // Indicator (default)\n    React.createElement(IndicatorGroupSelect, {\n      key: \"group\",\n      indicatorGroup: indicatorGroup,\n      onChange: setIndicatorGroup,\n      className: styles.select,\n      errorText: indicatorGroupError\n    }), /*#__PURE__*/React.createElement(IndicatorSelect, {\n      key: \"indicator\",\n      indicatorGroup: indicatorGroup,\n      indicator: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: indicatorError\n    })], (valueType === dimConf.dataElement.objectName || valueType === dimConf.operand.objectName) && [\n    /*#__PURE__*/\n    // Data element\n    React.createElement(DataElementGroupSelect, {\n      key: \"group\",\n      dataElementGroup: dataElementGroup,\n      onChange: setDataElementGroup,\n      className: styles.select,\n      errorText: dataElementGroupError\n    }), dataElementGroup && /*#__PURE__*/React.createElement(TotalsDetailsSelect, {\n      key: \"totals\",\n      operand: operand,\n      onChange: setOperand,\n      className: styles.select\n    }), operand === true || valueType === dimConf.operand.objectName ? /*#__PURE__*/React.createElement(DataElementOperandSelect, {\n      key: \"element\",\n      dataElementGroup: dataElementGroup,\n      dataElement: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataElementError\n    }) : /*#__PURE__*/React.createElement(DataElementSelect, {\n      key: \"element\",\n      dataElementGroup: dataElementGroup,\n      dataElement: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataElementError\n    })], valueType === dimConf.dataSet.objectName &&\n    /*#__PURE__*/\n    // Reporting rates\n    React.createElement(DataSetsSelect, {\n      key: \"item\",\n      dataSet: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataSetError\n    }), valueType === dimConf.eventDataItem.objectName && [\n    /*#__PURE__*/\n    // Event data items\n    React.createElement(ProgramSelect, {\n      key: \"program\",\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError\n    }), program && /*#__PURE__*/React.createElement(EventDataItemSelect, {\n      key: \"item\",\n      program: program,\n      dataItem: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: eventDataItemError\n    })], valueType === dimConf.programIndicator.objectName && [\n    /*#__PURE__*/\n    // Program indicator\n    React.createElement(ProgramSelect, {\n      key: \"program\",\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError\n    }), program && /*#__PURE__*/React.createElement(ProgramIndicatorSelect, {\n      key: \"indicator\",\n      program: program,\n      programIndicator: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: programIndicatorError\n    })], valueType === dimConf.calculation.objectName && /*#__PURE__*/React.createElement(CalculationSelect, {\n      calculation: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: calculationError\n    }), /*#__PURE__*/React.createElement(AggregationTypeSelect, {\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(CompletedOnlyCheckbox, {\n      valueType: valueType\n    })), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-periodtab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.navigation\n    }, /*#__PURE__*/React.createElement(SegmentedControl, {\n      className: styles.flexRowFlow,\n      options: [{\n        label: i18n.t('Choose from presets'),\n        value: PREDEFINED_PERIODS\n      }, {\n        label: i18n.t('Define start - end dates'),\n        value: START_END_DATES\n      }],\n      selected: periodType,\n      onChange: e => setPeriodType({\n        value: e.value\n      }, true)\n    })), periodType === PREDEFINED_PERIODS && /*#__PURE__*/React.createElement(PeriodDimension, {\n      selectedPeriods: periods,\n      onSelect: e => {\n        setPeriods(e.items);\n      },\n      excludedPeriodTypes: systemSettings.hiddenPeriods,\n      height: \"348px\"\n    }), periodType === PREDEFINED_PERIODS && /*#__PURE__*/React.createElement(RenderingStrategy, {\n      value: renderingStrategy,\n      periods: periods,\n      layerId: id,\n      onChange: setRenderingStrategy\n    }), periodType === START_END_DATES && /*#__PURE__*/React.createElement(StartEndDate, {\n      onSelectStartDate: setStartDate,\n      onSelectEndDate: setEndDate,\n      periodsSettings: periodsSettings\n    }), periodError && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.error\n    }, /*#__PURE__*/React.createElement(IconErrorFilled24, null), periodError)), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      warning: orgUnitsError\n    }), tab === 'filter' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-filtertab\"\n    }, /*#__PURE__*/React.createElement(DimensionFilter, {\n      dimensions: dimensions\n    })), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"thematicdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(ThematicMapTypeSelect, {\n      type: thematicMapType\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(RadiusSelect, {\n      className: styles.numberField\n    })), /*#__PURE__*/React.createElement(Labels, {\n      includeDisplayOption: true\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(NumericLegendStyle, {\n      mapType: thematicMapType,\n      dataItem: dataItem,\n      legendSetError: legendSetError,\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(NoDataColor, {\n      value: noDataColor,\n      onChange: setNoDataColor\n    })))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      // Layer options\n      valueType,\n      indicatorGroup,\n      dataElementGroup,\n      program,\n      periodType,\n      columns,\n      rows,\n      filters,\n      startDate,\n      endDate,\n      radiusLow,\n      radiusHigh,\n      method,\n      legendSet\n    } = this.props;\n    const dataItem = getDataItemFromColumns(columns);\n    const periods = getPeriodsFromFilters(filters);\n\n    // Indicators\n    if (valueType === dimConf.indicator.objectName) {\n      if (!indicatorGroup && !dataItem) {\n        return this.setErrorState('indicatorGroupError', i18n.t('Indicator group is required'), 'data');\n      } else if (!dataItem) {\n        return this.setErrorState('indicatorError', i18n.t('Indicator is required'), 'data');\n      }\n    }\n\n    // Data elements\n    if (valueType === dimConf.dataElement.objectName || valueType === dimConf.operand.objectName) {\n      if (!dataElementGroup && !dataItem) {\n        return this.setErrorState('dataElementGroupError', i18n.t('Data element group is required'), 'data');\n      } else if (!dataItem) {\n        return this.setErrorState('dataElementError', i18n.t('Data element is required'), 'data');\n      }\n    }\n\n    // Reporting rates\n    if (valueType === dimConf.dataSet.objectName && !dataItem) {\n      return this.setErrorState('dataSetError', i18n.t('Data set is required'), 'data');\n    }\n\n    // Event data items / Program indicators\n    if (valueType === dimConf.eventDataItem.objectName || valueType === dimConf.programIndicator.objectName) {\n      if (!program && !dataItem) {\n        return this.setErrorState('programError', i18n.t('Program is required'), 'data');\n      } else if (!dataItem) {\n        return valueType === dimConf.eventDataItem.objectName ? this.setErrorState('eventDataItemError', i18n.t('Event data item is required'), 'data') : this.setErrorState('programIndicatorError', i18n.t('Program indicator is required'), 'data');\n      }\n    }\n\n    // Calculation\n    if (valueType === dimConf.calculation.objectName && !dataItem) {\n      return this.setErrorState('calculationError', i18n.t('Calculation is required'), 'data');\n    }\n    if ((periods !== null && periods !== void 0 ? periods : []).length === 0 && periodType !== START_END_DATES) {\n      return this.setErrorState('periodError', i18n.t('Period is required'), 'period');\n    } else if (periodType === START_END_DATES) {\n      const error = getStartEndDateError(startDate, endDate);\n      if (error) {\n        return this.setErrorState('periodError', error, 'period');\n      }\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected'), 'orgunits');\n    }\n    if (method === CLASSIFICATION_PREDEFINED && !legendSet) {\n      return this.setErrorState('legendSetError', i18n.t('No legend set is selected'), 'style');\n    }\n    if (!isValidRadius(radiusLow, radiusHigh)) {\n      this.setState({\n        tab: 'style'\n      });\n      return false;\n    }\n    return true;\n  }\n}\n_defineProperty(ThematicDialog, \"propTypes\", {\n  setBackupPeriodsDates: PropTypes.func.isRequired,\n  setClassification: PropTypes.func.isRequired,\n  setDataElementGroup: PropTypes.func.isRequired,\n  setDataItem: PropTypes.func.isRequired,\n  setEndDate: PropTypes.func.isRequired,\n  setIndicatorGroup: PropTypes.func.isRequired,\n  setLegendSet: PropTypes.func.isRequired,\n  setNoDataColor: PropTypes.func.isRequired,\n  setOperand: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  setPeriodType: PropTypes.func.isRequired,\n  setPeriods: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setRenderingStrategy: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  setValueType: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  backupPeriodsDates: PropTypes.object,\n  columns: PropTypes.array,\n  dataElementGroup: PropTypes.object,\n  endDate: PropTypes.string,\n  filters: PropTypes.array,\n  id: PropTypes.string,\n  indicatorGroup: PropTypes.object,\n  legendSet: PropTypes.object,\n  method: PropTypes.number,\n  noDataColor: PropTypes.string,\n  operand: PropTypes.bool,\n  orgUnits: PropTypes.object,\n  periodType: PropTypes.string,\n  periodsSettings: PropTypes.object,\n  program: PropTypes.object,\n  radiusHigh: PropTypes.number,\n  radiusLow: PropTypes.number,\n  renderingStrategy: PropTypes.string,\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  systemSettings: PropTypes.object,\n  thematicMapType: PropTypes.string,\n  valueType: PropTypes.string\n});\nexport default connect(null, {\n  setClassification,\n  setDataItem,\n  setDataElementGroup,\n  setIndicatorGroup,\n  setLegendSet,\n  setNoDataColor,\n  setOperand,\n  setOrgUnits,\n  setPeriods,\n  setBackupPeriodsDates,\n  setStartDate,\n  setEndDate,\n  setPeriodType,\n  setRenderingStrategy,\n  setProgram,\n  setValueType\n}, null, {\n  forwardRef: true\n})(ThematicDialog);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all tracked entity types\nconst TRACKED_ENTITY_TYPES_QUERY = {\n  types: {\n    resource: 'trackedEntityTypes',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst TrackedEntityTypeSelect = _ref => {\n  let {\n    trackedEntityType,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(TRACKED_ENTITY_TYPES_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Tracked Entity Type'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.types.trackedEntityTypes,\n    value: trackedEntityType === null || trackedEntityType === void 0 ? void 0 : trackedEntityType.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!trackedEntityType && errorText ? errorText : null),\n    dataTest: \"tetypeselect\"\n  });\n};\nTrackedEntityTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  trackedEntityType: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default TrackedEntityTypeSelect;","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"PeriodTypeSelect_label__CEOt1\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { LAST_UPDATED_DATES } from '../../../constants/periods.js';\nimport { Radio, RadioGroup } from '../../core/index.js';\nimport styles from './styles/PeriodTypeSelect.module.css';\nconst PeriodTypeSelect = _ref => {\n  let {\n    program,\n    periodType = LAST_UPDATED_DATES,\n    onChange\n  } = _ref;\n  const label = i18n.t('Select period when tracked entities were last updated');\n  return program ? /*#__PURE__*/React.createElement(RadioGroup, {\n    name: \"type\",\n    value: periodType,\n    onChange: type => onChange({\n      value: type\n    })\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: \"lastUpdated\",\n    label: label\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"program\",\n    label: `${i18n.t('Program/Enrollment date')}: ${i18n.t('the date a tracked entity was registered or enrolled in a program')}`\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, label, \":\");\n};\nPeriodTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  periodType: PropTypes.string,\n  program: PropTypes.object\n};\nexport default PeriodTypeSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getProgramStatuses } from '../../../constants/programStatuses.js';\nimport { SelectField } from '../../core/index.js';\nconst ProgramStatusSelect = _ref => {\n  let {\n    value = 'ALL',\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program status'),\n    items: getProgramStatuses(),\n    value: value,\n    onChange: valueType => onChange(valueType.id),\n    className: className\n  });\n};\nProgramStatusSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default ProgramStatusSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { SelectField } from '../../core/index.js';\nconst RELATIONSHIP_TYPES_QUERY = {\n  relationshipTypes: {\n    resource: 'relationshipTypes',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'fromConstraint']\n    }\n  }\n};\nconst TrackedEntityRelationshipTypeSelect = _ref => {\n  let {\n    trackedEntityType,\n    value,\n    onChange,\n    className\n  } = _ref;\n  const {\n    loading,\n    data,\n    error\n  } = useDataQuery(RELATIONSHIP_TYPES_QUERY);\n  const types = useMemo(() => (data === null || data === void 0 ? void 0 : data.relationshipTypes.relationshipTypes.filter(type => type.fromConstraint.relationshipEntity === 'TRACKED_ENTITY_INSTANCE' && type.fromConstraint.trackedEntityType.id === trackedEntityType.id)) || [], [data, trackedEntityType.id]);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    });\n  } else if (error) {\n    return /*#__PURE__*/React.createElement(\"span\", null, error.message);\n  }\n  if (!types.length) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 14,\n        marginLeft: 12\n      }\n    }, i18n.t('No relationship types were found for tracked entity type {{type}}', {\n      type: trackedEntityType.name\n    }));\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Relationship type'),\n    items: types,\n    value: value,\n    onChange: type => onChange(type.id),\n    className: className\n  });\n};\nTrackedEntityRelationshipTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  trackedEntityType: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  }),\n  value: PropTypes.string\n};\nexport default TrackedEntityRelationshipTypeSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, IconErrorFilled24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { setTrackedEntityType, setProgram, setProgramStatus, setFollowUpStatus, setTrackedEntityRelationshipType, setTrackedEntityRelationshipOutsideProgram, setPeriodType, setStartDate, setEndDate, setOrgUnits, setEventPointColor, setEventPointRadius, setRelatedPointColor, setRelatedPointRadius, setRelationshipLineColor, setStyleDataItem } from '../../../actions/layerEdit.js';\nimport { TEI_COLOR, TEI_RADIUS, TEI_BUFFER, TEI_RELATED_COLOR, TEI_RELATIONSHIP_LINE_COLOR, TEI_RELATED_RADIUS, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { LAST_UPDATED_DATES } from '../../../constants/periods.js';\nimport { getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { getDefaultDatesInCalendar } from '../../../util/date.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport { Tab, Tabs, NumberField, Checkbox, ColorPicker } from '../../core/index.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport StartEndDate from '../../periods/StartEndDate.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport TrackedEntityTypeSelect from '../../trackedEntity/TrackedEntityTypeSelect.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport PeriodTypeSelect from './PeriodTypeSelect.js';\nimport ProgramStatusSelect from './ProgramStatusSelect.js';\nimport TrackedEntityRelationshipTypeSelect from './TrackedEntityRelationshipTypeSelect.js';\nclass TrackedEntityDialog extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      tab: 'data',\n      showRelationshipsChecked: false\n    };\n  }\n  componentDidMount() {\n    const {\n      rows,\n      startDate,\n      endDate,\n      relationshipType,\n      orgUnits,\n      setStartDate,\n      setEndDate,\n      setOrgUnits\n    } = this.props;\n    const hasDate = startDate !== undefined && endDate !== undefined;\n\n    // Set default period (last year)\n    if (!hasDate) {\n      const defaultDates = getDefaultDatesInCalendar();\n      setStartDate(defaultDates.startDate);\n      setEndDate(defaultDates.endDate);\n    }\n    if (relationshipType) {\n      this.setState({\n        showRelationshipsChecked: true\n      });\n    }\n\n    // Set org unit tree roots as default\n    if (!rows && orgUnits.roots) {\n      setOrgUnits({\n        dimension: 'ou',\n        items: orgUnits.roots\n      });\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation,\n      startDate,\n      endDate,\n      program,\n      setPeriodType\n    } = this.props;\n    const {\n      periodError\n    } = this.state;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n    if (periodError && (startDate !== prev.startDate || endDate !== prev.endDate)) {\n      this.setErrorState('periodError', null, 'period');\n    }\n    if (!program && prev.program !== program) {\n      setPeriodType(LAST_UPDATED_DATES);\n    }\n  }\n  render() {\n    const {\n      eventPointColor,\n      eventPointRadius,\n      followUp,\n      periodType,\n      program,\n      programStatus,\n      trackedEntityType,\n      relationshipType,\n      relatedPointColor,\n      relatedPointRadius,\n      relationshipLineColor,\n      periodsSettings\n    } = this.props;\n    const {\n      setTrackedEntityType,\n      setPeriodType,\n      setProgram,\n      setProgramStatus,\n      setFollowUpStatus,\n      setTrackedEntityRelationshipType,\n      setEventPointColor,\n      setEventPointRadius,\n      setRelatedPointColor,\n      setRelatedPointRadius,\n      setRelationshipLineColor\n    } = this.props;\n    const {\n      tab,\n      trackedEntityTypeError,\n      orgUnitsError,\n      periodError\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"relationships\"\n    }, i18n.t('Relationships')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(TrackedEntityTypeSelect, {\n      trackedEntityType: trackedEntityType,\n      onChange: setTrackedEntityType,\n      className: styles.select,\n      errorText: trackedEntityTypeError\n    }), trackedEntityType && /*#__PURE__*/React.createElement(ProgramSelect, {\n      allPrograms: true,\n      program: program,\n      trackedEntityType: trackedEntityType,\n      onChange: setProgram,\n      className: styles.select\n    }), program && /*#__PURE__*/React.createElement(ProgramStatusSelect, {\n      value: programStatus,\n      onChange: setProgramStatus,\n      className: styles.select\n    }), program && /*#__PURE__*/React.createElement(Checkbox, {\n      label: i18n.t('Follow up'),\n      checked: followUp,\n      onChange: setFollowUpStatus\n    })), tab === 'relationships' && (!this.props.trackedEntityType ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 14,\n        paddingTop: 16,\n        marginLeft: 16\n      }\n    }, i18n.t('Please select a Tracked Entity Type before selecting a Relationship Type')) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.notice\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      warning: true,\n      title: \"Warning\"\n    }, i18n.t('Displaying tracked entity relationships in Maps is an experimental feature'))), /*#__PURE__*/React.createElement(Checkbox, {\n      label: i18n.t('Display Tracked Entity relationships'),\n      checked: this.state.showRelationshipsChecked,\n      onChange: checked => {\n        if (!checked) {\n          setTrackedEntityRelationshipType(null);\n        }\n        this.setState({\n          showRelationshipsChecked: checked\n        });\n      },\n      style: {\n        marginBottom: 0\n      }\n    }), this.state.showRelationshipsChecked && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(TrackedEntityRelationshipTypeSelect, {\n      trackedEntityType: this.props.trackedEntityType,\n      value: relationshipType,\n      onChange: setTrackedEntityRelationshipType,\n      className: cx(styles.select, styles.indent)\n    })))), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(PeriodTypeSelect, {\n      program: program,\n      periodType: periodType,\n      onChange: setPeriodType\n    }), /*#__PURE__*/React.createElement(StartEndDate, {\n      onSelectStartDate: setStartDate,\n      onSelectEndDate: setEndDate,\n      periodsSettings: periodsSettings\n    }), periodError && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.error\n    }, /*#__PURE__*/React.createElement(IconErrorFilled24, null), periodError)), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      hideUserOrgUnits: true,\n      hideAssociatedGeometry: true,\n      hideSelectMode: false,\n      hideLevelSelect: true,\n      hideGroupSelect: true,\n      warning: orgUnitsError\n    }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header\n    }, i18n.t('Tracked entity style'), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: eventPointColor || TEI_COLOR,\n      onChange: setEventPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point size'),\n      value: eventPointRadius || TEI_RADIUS,\n      onChange: setEventPointRadius,\n      className: styles.flexInnerColumn\n    })), /*#__PURE__*/React.createElement(BufferRadius, {\n      defaultRadius: TEI_BUFFER\n    }), relationshipType ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header\n    }, i18n.t('Related entity style'), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: relatedPointColor || TEI_RELATED_COLOR,\n      onChange: setRelatedPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point size'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: relatedPointRadius || TEI_RELATED_RADIUS,\n      onChange: setRelatedPointRadius,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Line Color'),\n      color: relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR,\n      onChange: setRelationshipLineColor,\n      className: styles.flexInnerColumn\n    }))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      trackedEntityType,\n      rows,\n      startDate,\n      endDate\n    } = this.props;\n    if (!trackedEntityType) {\n      return this.setErrorState('trackedEntityTypeError', i18n.t('Tracked Entity Type is required'), 'data');\n    }\n    const error = getStartEndDateError(startDate, endDate);\n    if (error) {\n      return this.setErrorState('periodError', error, 'period');\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected.'), 'orgunits');\n    }\n    return true;\n  }\n}\n_defineProperty(TrackedEntityDialog, \"propTypes\", {\n  setEndDate: PropTypes.func.isRequired,\n  setEventPointColor: PropTypes.func.isRequired,\n  setEventPointRadius: PropTypes.func.isRequired,\n  setFollowUpStatus: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  setPeriodType: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setProgramStatus: PropTypes.func.isRequired,\n  setRelatedPointColor: PropTypes.func.isRequired,\n  setRelatedPointRadius: PropTypes.func.isRequired,\n  setRelationshipLineColor: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  setTrackedEntityRelationshipType: PropTypes.func.isRequired,\n  setTrackedEntityType: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  endDate: PropTypes.string,\n  eventPointColor: PropTypes.string,\n  eventPointRadius: PropTypes.number,\n  followUp: PropTypes.bool,\n  orgUnits: PropTypes.object,\n  periodType: PropTypes.string,\n  periodsSettings: PropTypes.object,\n  program: PropTypes.object,\n  programStatus: PropTypes.string,\n  relatedPointColor: PropTypes.string,\n  relatedPointRadius: PropTypes.number,\n  relationshipLineColor: PropTypes.string,\n  relationshipType: PropTypes.string,\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  trackedEntityType: PropTypes.object\n});\nexport default connect(null, {\n  setTrackedEntityType,\n  setProgram,\n  setProgramStatus,\n  setFollowUpStatus,\n  setTrackedEntityRelationshipType,\n  setTrackedEntityRelationshipOutsideProgram,\n  setPeriodType,\n  setStartDate,\n  setEndDate,\n  setOrgUnits,\n  setEventPointColor,\n  setEventPointRadius,\n  setRelatedPointColor,\n  setRelatedPointRadius,\n  setRelationshipLineColor,\n  setStyleDataItem\n}, null, {\n  forwardRef: true\n})(TrackedEntityDialog);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { addLayer, updateLayer, cancelLayer } from '../../actions/layers.js';\nimport { EARTH_ENGINE_LAYER } from '../../constants/layers.js';\nimport useKeyDown from '../../hooks/useKeyDown.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\nimport { useOrgUnits } from '../OrgUnitsProvider.js';\nimport EarthEngineDialog from './earthEngine/EarthEngineDialog.js';\nimport EventDialog from './event/EventDialog.js';\nimport FacilityDialog from './FacilityDialog.js';\nimport GeoJsonDialog from './geoJson/GeoJsonDialog.js';\nimport OrgUnitDialog from './orgUnit/OrgUnitDialog.js';\nimport styles from './styles/LayerEdit.module.css';\nimport ThematicDialog from './thematic/ThematicDialog.js';\nimport TrackedEntityDialog from './trackedEntity/TrackedEntityDialog.js';\nconst layerDialogs = {\n  event: EventDialog,\n  trackedEntity: TrackedEntityDialog,\n  facility: FacilityDialog,\n  thematic: ThematicDialog,\n  orgUnit: OrgUnitDialog,\n  earthEngine: EarthEngineDialog,\n  geoJsonUrl: GeoJsonDialog\n};\nconst getLayerNames = () => ({\n  event: i18n.t('event'),\n  trackedEntity: i18n.t('tracked entity'),\n  facility: i18n.t('facility'),\n  thematic: i18n.t('thematic'),\n  orgUnit: i18n.t('org unit'),\n  earthEngine: i18n.t('Earth Engine'),\n  geoJsonUrl: i18n.t('feature')\n});\nconst LayerEdit = _ref => {\n  let {\n    layer,\n    addLayer,\n    updateLayer,\n    cancelLayer\n  } = _ref;\n  const [isValidLayer, setIsValidLayer] = useState(false);\n  const {\n    systemSettings,\n    periodsSettings\n  } = useCachedData();\n  const orgUnits = useOrgUnits();\n  const onValidateLayer = () => setIsValidLayer(true);\n  const onLayerValidation = isValid => {\n    setIsValidLayer(false);\n    if (isValid) {\n      const {\n        id,\n        editCounter = 0\n      } = layer;\n      const config = {\n        ...layer,\n        editCounter: editCounter + 1,\n        isLoaded: false,\n        isLoading: false\n      };\n      if (id) {\n        updateLayer(config);\n      } else {\n        addLayer(config);\n      }\n      cancelLayer();\n    }\n  };\n  useKeyDown('Escape', cancelLayer);\n  if (!layer) {\n    return null;\n  }\n  const type = layer.layer;\n  const LayerDialog = layerDialogs[type];\n  if (!LayerDialog) {\n    return null;\n  }\n  let name = getLayerNames()[type];\n  if (type === EARTH_ENGINE_LAYER) {\n    name = layer.name.toLowerCase();\n  }\n  const title = layer.id ? i18n.t('Edit {{name}} layer', {\n    name\n  }) : i18n.t('Add new {{name}} layer', {\n    name\n  });\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"top\",\n    dataTest: \"layeredit\",\n    large: true,\n    onClose: cancelLayer\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, title), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(LayerDialog, _extends({}, layer, {\n    systemSettings: systemSettings,\n    periodsSettings: periodsSettings,\n    orgUnits: orgUnits,\n    validateLayer: isValidLayer,\n    onLayerValidation: onLayerValidation\n  })))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: cancelLayer\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onValidateLayer,\n    dataTest: \"layeredit-addbtn\"\n  }, i18n.t(layer.id ? i18n.t('Update layer') : i18n.t('Add layer'))))));\n};\nLayerEdit.propTypes = {\n  addLayer: PropTypes.func.isRequired,\n  cancelLayer: PropTypes.func.isRequired,\n  updateLayer: PropTypes.func.isRequired,\n  layer: PropTypes.object\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    layer: layerEdit\n  };\n}, {\n  addLayer,\n  updateLayer,\n  cancelLayer\n})(LayerEdit);","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"ContextMenu_anchor__O9is8\",\"menu\":\"ContextMenu_menu__GYTJZ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, IconArrowUp16, IconArrowDown16, IconInfo16, IconLocation16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { updateLayer } from '../../actions/layers.js';\nimport { closeContextMenu, openCoordinatePopup, showEarthEngineValue } from '../../actions/map.js';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport { FACILITY_LAYER, EARTH_ENGINE_LAYER, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../../constants/layers.js';\nimport { drillUpDown } from '../../util/map.js';\nimport styles from './styles/ContextMenu.module.css';\nconst ContextMenu = props => {\n  const anchorRef = useRef();\n  const {\n    feature,\n    layerType,\n    layerConfig,\n    coordinates,\n    earthEngineLayers,\n    position,\n    offset,\n    closeContextMenu,\n    openCoordinatePopup,\n    showEarthEngineValue,\n    setOrgUnitProfile,\n    updateLayer\n  } = props;\n  if (!position) {\n    return null;\n  }\n  const isSplitView = (layerConfig === null || layerConfig === void 0 ? void 0 : layerConfig.renderingStrategy) === RENDERING_STRATEGY_SPLIT_BY_PERIOD;\n  const left = offset[0] + position[0];\n  const top = offset[1] + position[1];\n  const attr = (feature === null || feature === void 0 ? void 0 : feature.properties) || {};\n  const onClick = (item, id) => {\n    closeContextMenu();\n    switch (item) {\n      case 'drill_up':\n        updateLayer(drillUpDown(layerConfig, attr.grandParentId, attr.grandParentParentGraph, parseInt(attr.level) - 1));\n        break;\n      case 'drill_down':\n        updateLayer(drillUpDown(layerConfig, attr.id, attr.parentGraph, parseInt(attr.level) + 1));\n        break;\n      case 'show_info':\n        setOrgUnitProfile(attr.id);\n        break;\n      case 'show_coordinate':\n        openCoordinatePopup(coordinates);\n        break;\n      case 'show_ee_value':\n        showEarthEngineValue(id, coordinates);\n        break;\n      default:\n    }\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.anchor,\n    style: {\n      left,\n      top\n    }\n  }), /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: closeContextMenu\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true,\n    dataTest: \"context-menu\"\n  }, layerType !== FACILITY_LAYER && feature && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-drill-up\",\n    label: i18n.t('Drill up one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowUp16, null),\n    disabled: !attr.hasCoordinatesUp,\n    onClick: () => onClick('drill_up')\n  }), layerType !== FACILITY_LAYER && feature && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-drill-down\",\n    label: i18n.t('Drill down one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowDown16, null),\n    disabled: !attr.hasCoordinatesDown,\n    onClick: () => onClick('drill_down')\n  }), feature && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-view-profile\",\n    label: i18n.t('View profile'),\n    icon: /*#__PURE__*/React.createElement(IconInfo16, null),\n    onClick: () => onClick('show_info')\n  }), coordinates && !isSplitView && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-show-long-lat\",\n    label: i18n.t('Show longitude/latitude'),\n    icon: /*#__PURE__*/React.createElement(IconLocation16, null),\n    onClick: () => onClick('show_coordinate')\n  }), earthEngineLayers.map(layer => /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-show-ee-value\",\n    key: layer.id,\n    label: i18n.t('Show {{name}}', {\n      name: layer.name.toLowerCase()\n    }),\n    icon: /*#__PURE__*/React.createElement(IconLocation16, null),\n    onClick: () => onClick('show_ee_value', layer.id)\n  }))))));\n};\nContextMenu.propTypes = {\n  closeContextMenu: PropTypes.func.isRequired,\n  openCoordinatePopup: PropTypes.func.isRequired,\n  setOrgUnitProfile: PropTypes.func.isRequired,\n  showEarthEngineValue: PropTypes.func.isRequired,\n  updateLayer: PropTypes.func.isRequired,\n  coordinates: PropTypes.array,\n  earthEngineLayers: PropTypes.array,\n  feature: PropTypes.object,\n  layerConfig: PropTypes.object,\n  layerType: PropTypes.string,\n  map: PropTypes.object,\n  offset: PropTypes.array,\n  position: PropTypes.array\n};\nexport default connect(_ref => {\n  let {\n    contextMenu,\n    map\n  } = _ref;\n  return {\n    ...contextMenu,\n    earthEngineLayers: map.mapViews.filter(view => view.layer === EARTH_ENGINE_LAYER)\n  };\n}, {\n  closeContextMenu,\n  openCoordinatePopup,\n  showEarthEngineValue,\n  setOrgUnitProfile,\n  updateLayer\n})(ContextMenu);","import * as types from '../constants/actionTypes.js';\nexport const setAnalyticalObject = ao => ({\n  type: types.ANALYTICAL_OBJECT_SET,\n  payload: ao\n});\nexport const clearAnalyticalObject = () => ({\n  type: types.ANALYTICAL_OBJECT_CLEAR\n});","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"OpenAsMapDialog_content__2GKPD\",\"description\":\"OpenAsMapDialog_description__gcyKV\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useSetting } from '@dhis2/app-service-datastore';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport log from 'loglevel';\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { clearAnalyticalObject } from '../../actions/analyticalObject.js';\nimport { addLayer } from '../../actions/layers.js';\nimport { CURRENT_AO_KEY, getDataDimensionsFromAnalyticalObject, getThematicLayerFromAnalyticalObject } from '../../util/analyticalObject.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/OpenAsMapDialog.module.css';\nconst OpenAsMapDialog = () => {\n  var _allDataDimensions$;\n  const dispatch = useDispatch();\n  const [currentAO] = useSetting(CURRENT_AO_KEY);\n  const engine = useDataEngine();\n  const allDataDimensions = getDataDimensionsFromAnalyticalObject(currentAO);\n  const firstDimensionId = (_allDataDimensions$ = allDataDimensions[0]) === null || _allDataDimensions$ === void 0 ? void 0 : _allDataDimensions$.id;\n  const [selectedDataDims, setSelectedDataDims] = useState([firstDimensionId]);\n  const addLayersToMap = async () => {\n    const selectedDimensions = [...selectedDataDims].reverse();\n    const lastDataId = allDataDimensions[selectedDimensions.length - 1];\n\n    // Call in sequence\n    for (const dataId of selectedDimensions) {\n      const layer = await getThematicLayerFromAnalyticalObject({\n        ao: currentAO,\n        dataId,\n        isVisible: dataId === lastDataId,\n        engine\n      });\n      if (layer) {\n        dispatch(addLayer(layer));\n      }\n    }\n    dispatch(clearAnalyticalObject());\n  };\n  if (!allDataDimensions.length) {\n    log.info('No data items found in analytical object');\n    return null; // TODO show error\n  }\n\n  if (allDataDimensions.length === 1) {\n    addLayersToMap();\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Modal, {\n    small: true,\n    position: \"middle\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Open as map')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, i18n.t('This chart/table contains {{numItems}} data items. Choose which items you want to import from the list below. Each data item will be created as a map layer.', {\n    numItems: allDataDimensions.length\n  })), /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data items'),\n    items: allDataDimensions,\n    value: selectedDataDims,\n    multiple: true,\n    onChange: setSelectedDataDims\n  }))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: clearAnalyticalObject\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    disabled: !selectedDataDims.length,\n    primary: true,\n    onClick: addLayersToMap\n  }, i18n.t('Proceed')))));\n};\nexport default OpenAsMapDialog;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport LayerEdit from '../edit/LayerEdit.js';\nimport ContextMenu from '../map/ContextMenu.js';\nimport OpenAsMapDialog from '../openAs/OpenAsMapDialog.js';\nconst ModalContainer = () => {\n  const analyticalObject = useSelector(state => state.analyticalObject);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContextMenu, null), /*#__PURE__*/React.createElement(LayerEdit, null), analyticalObject && /*#__PURE__*/React.createElement(OpenAsMapDialog, null));\n};\nexport default ModalContainer;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"App_content__zOmw3\",\"downloadContent\":\"App_downloadContent__t8DM0\",\"appMapAndTable\":\"App_appMapAndTable__MVVuG\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useDispatch } from 'react-redux';\nimport { initLayerSources } from '../../actions/layerSources.js';\nimport { earthEngineLayersDefaultIds } from '../../constants/earthEngineLayers/index.js';\nimport { MAPS_APP_NAMESPACE, MAPS_APP_KEY_MANAGED_LAYER_SOURCES } from '../../constants/settings.js';\nexport const useLoadDataStore = () => {\n  // Keys: MAPS_APP_KEY_MANAGED_LAYER_SOURCES\n  const resourceLayerSourcesVisibility = `dataStore/${MAPS_APP_NAMESPACE}/${MAPS_APP_KEY_MANAGED_LAYER_SOURCES}`;\n  const layerSourceDefaultIds = [...earthEngineLayersDefaultIds];\n  const dispatch = useDispatch();\n  const engine = useDataEngine();\n  engine.query({\n    dataStore: {\n      resource: 'dataStore'\n    }\n  }).then(_ref => {\n    let {\n      dataStore\n    } = _ref;\n    if (!dataStore.includes(MAPS_APP_NAMESPACE)) {\n      // Create namespace/key if missing in datastore\n      engine.mutate({\n        resource: resourceLayerSourcesVisibility,\n        type: 'create',\n        data: layerSourceDefaultIds\n      }).then(() => {\n        dispatch(initLayerSources(layerSourceDefaultIds));\n      });\n    } else {\n      engine.query({\n        layerSourcesVisibility: {\n          resource: resourceLayerSourcesVisibility\n        }\n      }).then(_ref2 => {\n        let {\n          layerSourcesVisibility\n        } = _ref2;\n        if (!Array.isArray(layerSourcesVisibility)) {\n          // Reset namespace/key if integrity has been broken\n          engine.mutate({\n            resource: resourceLayerSourcesVisibility,\n            type: 'update',\n            data: layerSourceDefaultIds\n          }).then(() => {\n            dispatch(initLayerSources(layerSourceDefaultIds));\n          });\n        } else {\n          dispatch(initLayerSources(layerSourcesVisibility));\n        }\n      }).catch(() => {\n        // Create key if missing in namespace\n        engine.mutate({\n          resource: resourceLayerSourcesVisibility,\n          type: 'create',\n          data: layerSourceDefaultIds\n        }).then(() => {\n          dispatch(initLayerSources(layerSourceDefaultIds));\n        });\n      });\n    }\n  });\n};","import * as types from '../constants/actionTypes.js';\nexport const setInterpretation = id => ({\n  type: types.INTERPRETATION_SET,\n  payload: id\n});","export const dataStatisticsMutation = {\n  resource: 'dataStatistics',\n  params: _ref => {\n    let {\n      id\n    } = _ref;\n    return {\n      favorite: id,\n      eventType: 'MAP_VIEW'\n    };\n  },\n  type: 'create'\n};","import i18n from '@dhis2/d2-i18n';\nimport { layerTypes } from '../components/map/MapApi.js';\nimport { defaultBasemaps, getFallbackBasemap } from '../constants/basemaps.js';\nimport { MAP_SERVICE_KEY_TESTS, MAP_LAYER_POSITION_BASEMAP } from '../constants/layers.js';\nimport { createExternalBasemapLayer, supportedMapServices } from './external.js';\nexport const validateMapServiceKeys = async systemSettings => {\n  const keysStatus = Object.values(MAP_SERVICE_KEY_TESTS).flat().reduce((acc, _ref) => {\n    let {\n      type\n    } = _ref;\n    acc[type] = false;\n    return acc;\n  }, {});\n  for (const keyName of Object.keys(MAP_SERVICE_KEY_TESTS)) {\n    if (systemSettings[keyName]) {\n      for (const {\n        type,\n        url\n      } of MAP_SERVICE_KEY_TESTS[keyName]) {\n        try {\n          const response = await fetch(`${url}${systemSettings[keyName]}`);\n          if (response.ok) {\n            keysStatus[type] = systemSettings[keyName];\n          } else {\n            console.warn(i18n.t('{{keyName}} is not valid for layer type: {{type}}', {\n              keyName,\n              type,\n              nsSeparator: '^^'\n            }));\n          }\n        } catch (error) {\n          continue;\n        }\n      }\n    } else {\n      console.warn(i18n.t('{{keyName}} is not provided for layer type(s): {{types}}', {\n        keyName,\n        types: MAP_SERVICE_KEY_TESTS[keyName].map(l => l.type).join(', '),\n        nsSeparator: '^^'\n      }));\n    }\n  }\n  return keysStatus;\n};\nexport const getBasemapList = async _ref2 => {\n  let {\n    externalMapLayers,\n    systemSettings,\n    validationFn = validateMapServiceKeys\n  } = _ref2;\n  const keysStatus = await validationFn(systemSettings);\n  const externalBasemaps = externalMapLayers.filter(layer => layer.mapLayerPosition === MAP_LAYER_POSITION_BASEMAP && supportedMapServices.includes(layer.mapService)).map(createExternalBasemapLayer).filter(basemap => layerTypes.includes(basemap.config.type));\n  const basemapList = defaultBasemaps().filter(_ref3 => {\n    var _keysStatus$type;\n    let {\n      config: {\n        type\n      }\n    } = _ref3;\n    return layerTypes.includes(type) && ((_keysStatus$type = keysStatus[type]) !== null && _keysStatus$type !== void 0 ? _keysStatus$type : true);\n  }).map(basemap => {\n    if (keysStatus[basemap.config.type]) {\n      basemap.config.apiKey = keysStatus[basemap.config.type];\n    }\n    return basemap;\n  }).concat(externalBasemaps);\n  return basemapList;\n};\nexport const getBasemapOrFallback = _ref4 => {\n  let {\n    basemaps,\n    id,\n    defaultId,\n    onMissing\n  } = _ref4;\n  let basemap = basemaps.find(_ref5 => {\n    let {\n      id: basemapId\n    } = _ref5;\n    return basemapId === id;\n  });\n  if (!basemap) {\n    if (id && typeof onMissing === 'function') {\n      const msg = i18n.t('Could not load: {{id}}  using the default basemap instead.', {\n        id,\n        nsSeparator: '^^'\n      });\n      onMissing(msg);\n    }\n    basemap = basemaps.find(_ref6 => {\n      let {\n        id: basemapId\n      } = _ref6;\n      return basemapId === defaultId;\n    }) || getFallbackBasemap();\n  }\n  return basemap;\n};","import { useDataEngine } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport log from 'loglevel';\nimport { useRef, useEffect, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setAnalyticalObject } from '../../actions/analyticalObject.js';\nimport { setInterpretation } from '../../actions/interpretations.js';\nimport { newMap, setMap } from '../../actions/map.js';\nimport { openDownloadMode, closeDownloadMode } from '../../actions/ui.js';\nimport { ALERT_CRITICAL, ALERT_MESSAGE_DYNAMIC } from '../../constants/alerts.js';\nimport { CURRENT_AO_KEY } from '../../util/analyticalObject.js';\nimport { dataStatisticsMutation } from '../../util/apiDataStatistics.js';\nimport { getBasemapOrFallback } from '../../util/basemaps.js';\nimport { addOrgUnitPaths } from '../../util/helpers.js';\nimport history, { getHashUrlParams, defaultHashUrlParams } from '../../util/history.js';\nimport { fetchMap } from '../../util/requests.js';\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.js';\n\n// Used to avoid repeating `history` listener calls -- see below\nlet lastLocation;\nexport const useLoadMap = () => {\n  const previousParamsRef = useRef(defaultHashUrlParams);\n  const basemapInvalidAlertRef = useRef(useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL));\n  const {\n    systemSettings,\n    basemaps\n  } = useCachedData();\n  const defaultBasemap = systemSettings.keyDefaultBaseMap;\n  const engine = useDataEngine();\n  const dispatch = useDispatch();\n  const loadMap = useCallback(async hashLocation => {\n    const params = getHashUrlParams(hashLocation);\n    if (params.mapId === '') {\n      dispatch(newMap());\n    } else if (params.mapId === CURRENT_AO_KEY) {\n      dispatch(newMap());\n      dispatch(setAnalyticalObject(true));\n    } else {\n      try {\n        const map = await fetchMap({\n          id: params.mapId,\n          engine,\n          defaultBasemap\n        });\n        engine.mutate(dataStatisticsMutation, {\n          variables: {\n            id: params.mapId\n          },\n          onError: error => log.error('Error: ', error)\n        });\n        const basemapConfig = getBasemapOrFallback({\n          basemaps,\n          id: map.basemap.id,\n          defaultId: defaultBasemap,\n          onMissing: msg => basemapInvalidAlertRef.current.show({\n            msg\n          })\n        });\n        const mapForStore = {\n          ...map,\n          mapViews: addOrgUnitPaths(map.mapViews),\n          basemap: {\n            ...map.basemap,\n            ...basemapConfig\n          }\n        };\n        dispatch(setMap(mapForStore));\n      } catch (e) {\n        log.error(e);\n        dispatch(newMap());\n      }\n    }\n    if (params.isDownload) {\n      dispatch(openDownloadMode());\n    } else {\n      dispatch(closeDownloadMode());\n    }\n    dispatch(setInterpretation(params.interpretationId));\n    previousParamsRef.current = params;\n  }, [basemaps, defaultBasemap, dispatch, engine]);\n  useEffect(() => {\n    loadMap(history.location);\n  }, [loadMap]);\n  useEffect(() => {\n    const unlisten = history.listen(_ref => {\n      var _lastLocation, _lastLocation2, _lastLocation3;\n      let {\n        action,\n        location\n      } = _ref;\n      // Avoid duplicate actions for the same update object. This also\n      // avoids a loop, because dispatching a pop state effect below also\n      // triggers listeners again (but with the same location object key)\n      const {\n        key,\n        pathname,\n        search\n      } = location;\n      if (key === ((_lastLocation = lastLocation) === null || _lastLocation === void 0 ? void 0 : _lastLocation.key) && pathname === ((_lastLocation2 = lastLocation) === null || _lastLocation2 === void 0 ? void 0 : _lastLocation2.pathname) && search === ((_lastLocation3 = lastLocation) === null || _lastLocation3 === void 0 ? void 0 : _lastLocation3.search)) {\n        return;\n      }\n      lastLocation = location;\n      // Dispatch this event for external routing listeners to observe,\n      // e.g. global shell\n      const popStateEvent = new PopStateEvent('popstate', {\n        state: location.state\n      });\n      dispatchEvent(popStateEvent);\n      const params = getHashUrlParams(location);\n      if (action === 'REPLACE' || previousParamsRef.current.mapId !== params.mapId) {\n        loadMap(location);\n        return;\n      }\n      if (params.isDownload !== previousParamsRef.current.isDownload) {\n        if (params.isDownload) {\n          dispatch(openDownloadMode());\n        } else {\n          dispatch(closeDownloadMode());\n        }\n      }\n      dispatch(setInterpretation(params.interpretationId));\n      previousParamsRef.current = params;\n    });\n    return () => unlisten && unlisten();\n  }, [loadMap, dispatch]);\n};","import cx from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useLayersLoader } from '../../hooks/useLayersLoader.js';\nimport BottomPanel from '../datatable/BottomPanel.js';\nimport DownloadModeMenu from '../download/DownloadMenubar.js';\nimport DownloadSettings from '../download/DownloadSettings.js';\nimport LayersPanel from '../layers/LayersPanel.js';\nimport MapPosition from '../map/MapPosition.js';\nimport AppMenu from './AppMenu.js';\nimport DetailsPanel from './DetailsPanel.js';\nimport ModalContainer from './ModalContainer.js';\nimport './App.css';\nimport styles from './styles/App.module.css';\nimport { useLoadDataStore } from './useLoadDataStore.js';\nimport { useLoadMap } from './useLoadMap.js';\nconst App = () => {\n  useEffect(() => {\n    // Store the header height for height calculations\n    const headerHeight = document.querySelector('header').getBoundingClientRect().height;\n    document.documentElement.style.setProperty('--header-height', `${headerHeight}px`);\n  }, []);\n  useLoadMap();\n  useLoadDataStore();\n  useLayersLoader();\n  const [interpretationsRenderCount, setInterpretationsRenderCount] = useState(1);\n  const dataTableOpen = useSelector(state => !!state.dataTable);\n  const downloadModeOpen = useSelector(state => !!state.ui.downloadMode);\n  const detailsPanelOpen = useSelector(state => state.ui.rightPanelOpen && !state.orgUnitProfile);\n  const onFileMenuAction = () => detailsPanelOpen && setInterpretationsRenderCount(interpretationsRenderCount + 1);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, downloadModeOpen ? /*#__PURE__*/React.createElement(DownloadModeMenu, null) : /*#__PURE__*/React.createElement(AppMenu, {\n    onFileMenuAction: onFileMenuAction\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.content, {\n      [styles.downloadContent]: downloadModeOpen\n    })\n  }, downloadModeOpen ? /*#__PURE__*/React.createElement(DownloadSettings, null) : /*#__PURE__*/React.createElement(LayersPanel, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.appMapAndTable\n  }, /*#__PURE__*/React.createElement(MapPosition, null), dataTableOpen && /*#__PURE__*/React.createElement(BottomPanel, null)), !downloadModeOpen && /*#__PURE__*/React.createElement(DetailsPanel, {\n    interpretationsRenderCount: interpretationsRenderCount\n  })), /*#__PURE__*/React.createElement(ModalContainer, null));\n};\nexport default App;","import * as types from '../constants/actionTypes.js';\nconst dataTable = function () {\n  var _action$payload;\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let layerId;\n  switch (action.type) {\n    case types.AGGREGATIONS_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return {};\n    case types.LAYER_REMOVE:\n    case types.LAYER_UPDATE:\n      layerId = action.id || ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.id);\n      return layerId && state[layerId] ? {\n        ...state,\n        [layerId]: undefined\n      } : state;\n    default:\n      return state;\n  }\n};\nexport default dataTable;","import * as types from '../constants/actionTypes.js';\nconst analyticalObject = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.ANALYTICAL_OBJECT_SET:\n      return action.payload;\n    case types.ANALYTICAL_OBJECT_CLEAR:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default analyticalObject;","import * as types from '../constants/actionTypes.js';\nconst contextMenu = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.MAP_CONTEXT_MENU_OPEN:\n      return action.payload;\n    case types.MAP_CONTEXT_MENU_CLOSE:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default contextMenu;","import * as types from '../constants/actionTypes.js';\nconst dataTable = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.DATA_TABLE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n    case types.DOWNLOAD_MODE_CLOSE:\n    case types.DOWNLOAD_MODE_OPEN:\n      return null;\n    case types.DATA_TABLE_TOGGLE:\n      return state === action.id ? null : action.id;\n    case types.LAYER_REMOVE:\n      return state === action.id ? null : state;\n    default:\n      return state;\n  }\n};\nexport default dataTable;","import * as types from '../constants/actionTypes.js';\nconst defaultState = {\n  showName: true,\n  showDescription: true,\n  showLegend: true,\n  showInLegend: [],\n  showOverviewMap: true,\n  hasOverviewMapSpace: true,\n  showNorthArrow: true,\n  northArrowPosition: 'bottomright',\n  includeMargins: true\n};\nconst download = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.DOWNLOAD_CONFIG_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport default download;","import * as types from '../constants/actionTypes.js';\nconst feature = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.FEATURE_HIGHLIGHT:\n      return action.payload ? {\n        ...action.payload\n      } : null;\n    default:\n      return state;\n  }\n};\nexport default feature;","import * as types from '../constants/actionTypes.js';\nconst featureProfile = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.FEATURE_PROFILE_SET:\n      return action.payload;\n    case types.FEATURE_PROFILE_CLOSE:\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default featureProfile;","import * as types from '../constants/actionTypes.js';\nconst interpretation = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.INTERPRETATION_SET:\n      return {\n        ...state,\n        id: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport default interpretation;","import * as types from '../constants/actionTypes.js';\nimport { EVENT_STATUS_ALL } from '../constants/eventStatuses.js';\nimport { CLASSIFICATION_SINGLE_COLOR, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS, CLASSIFICATION_PREDEFINED, THEMATIC_CHOROPLETH, EE_BUFFER, NONE } from '../constants/layers.js';\nimport { START_END_DATES } from '../constants/periods.js';\nimport { setFiltersFromPeriod, setFiltersFromPeriods, setDataItemInColumns, setOrgUnitPathInRows, removePeriodFromFilters, changeDimensionInFilters, removeDimensionFromFilters } from '../util/analytics.js';\nconst layerEdit = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let columns;\n  let newState;\n  let program;\n  switch (action.type) {\n    case types.LAYER_EDIT:\n      delete action.payload.img;\n      return action.payload;\n    case types.LAYER_CANCEL:\n      return null;\n    case types.LAYER_EDIT_PROGRAM_SET:\n      program = action.program;\n      return {\n        ...state,\n        program: program ? {\n          ...program\n        } : null,\n        columns: [],\n        programStage: null,\n        styleDataItem: null\n      };\n    case types.LAYER_EDIT_PROGRAM_STAGE_SET:\n      return {\n        ...state,\n        programStage: {\n          ...action.programStage\n        },\n        columns: [],\n        styleDataItem: null\n      };\n    case types.LAYER_EDIT_VALUE_TYPE_SET:\n      return {\n        ...state,\n        valueType: action.valueType,\n        columns: action.keepColumns ? state.columns : [] // Kept if favorite is loaded\n      };\n\n    case types.LAYER_EDIT_INDICATOR_GROUP_SET:\n      return {\n        ...state,\n        indicatorGroup: {\n          id: action.indicatorGroup.id,\n          name: action.indicatorGroup.name\n        },\n        columns: []\n      };\n    case types.LAYER_EDIT_DATA_ELEMENT_GROUP_SET:\n      return {\n        ...state,\n        dataElementGroup: {\n          id: action.dataElementGroup.id,\n          name: action.dataElementGroup.name\n        },\n        columns: []\n      };\n    case types.LAYER_EDIT_OPERAND_SET:\n      return {\n        ...state,\n        operand: action.operand,\n        columns: []\n      };\n    case types.LAYER_EDIT_DATA_ITEM_SET:\n      return {\n        ...state,\n        columns: setDataItemInColumns(action.dataItem, action.dimension),\n        name: null\n      };\n    case types.LAYER_EDIT_PERIOD_NAME_SET:\n      return {\n        ...state,\n        periodName: action.periodName\n      };\n    case types.LAYER_EDIT_PERIOD_TYPE_SET:\n      return {\n        ...state,\n        periodType: action.periodType.value,\n        filters: action.keepPeriod ? state.filters : removePeriodFromFilters(state.filters)\n      };\n    case types.LAYER_EDIT_PERIOD_SET:\n      return {\n        ...state,\n        filters: action.period.id !== START_END_DATES ? setFiltersFromPeriod(state.filters, action.period) : []\n      };\n    case types.LAYER_EDIT_PERIODS_SET:\n      return {\n        ...state,\n        filters: !(action.periods.length === 1 && action.periods[0].id === START_END_DATES) ? setFiltersFromPeriods(state.filters, action.periods) : []\n      };\n    case types.LAYER_EDIT_BACKUP_PERIODSDATES_SET:\n      return {\n        ...state,\n        backupPeriodsDates: action.backupPeriodsDates\n      };\n    case types.LAYER_EDIT_RENDERING_STRATEGY_SET:\n      return {\n        ...state,\n        renderingStrategy: action.payload\n      };\n    case types.LAYER_EDIT_START_DATE_SET:\n      return {\n        ...state,\n        startDate: action.startDate\n      };\n    case types.LAYER_EDIT_END_DATE_SET:\n      return {\n        ...state,\n        endDate: action.endDate\n      };\n    case types.LAYER_EDIT_AGGREGATION_TYPE_SET:\n      // DEFAULT aggregation type is not stored\n      if (action.aggregationType === 'DEFAULT') {\n        const newState = {\n          ...state\n        };\n        delete newState.aggregationType;\n        return newState;\n      }\n      return {\n        ...state,\n        aggregationType: action.aggregationType\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_ADD:\n      return {\n        ...state,\n        filters: [...(state.filters || []), action.filter || {\n          dimension: null\n        }]\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_REMOVE:\n      return {\n        ...state,\n        filters: removeDimensionFromFilters(state.filters, action.index)\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_CHANGE:\n      return {\n        ...state,\n        filters: changeDimensionInFilters(state.filters, action.index, action.filter)\n      };\n    case types.LAYER_EDIT_FILTER_ADD:\n      return {\n        ...state,\n        columns: [...state.columns, action.filter || {\n          dimension: null,\n          name: null,\n          filter: null\n        }]\n      };\n    case types.LAYER_EDIT_FILTER_REMOVE:\n      columns = state.columns.filter(c => c.filter !== undefined); // Also used for style data element without filter\n\n      if (!columns || !columns[action.index]) {\n        return state;\n      }\n      return {\n        ...state,\n        columns: [...state.columns.filter(c => c.filter === undefined), ...columns.filter((c, i) => i !== action.index)]\n      };\n    case types.LAYER_EDIT_FILTER_CHANGE:\n      columns = state.columns.filter(c => c.filter !== undefined); // Also used for style data element without filter\n\n      if (!columns || !columns[action.index]) {\n        return state;\n      }\n      columns[action.index] = action.filter;\n      return {\n        ...state,\n        columns: [...state.columns.filter(c => c.filter === undefined), ...columns]\n      };\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_SET:\n      return {\n        ...state,\n        styleDataItem: action.dataItem\n      };\n\n    // Set options to data element option set\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET:\n      newState = {\n        ...state,\n        styleDataItem: {\n          ...state.styleDataItem,\n          optionSet: {\n            ...state.styleDataItem.optionSet,\n            options: action.options\n          }\n        }\n      };\n      delete newState.method;\n      delete newState.classes;\n      delete newState.colorScale;\n      return newState;\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET:\n      newState = {\n        ...state,\n        styleDataItem: {\n          ...state.styleDataItem,\n          values: {\n            ...state.styleDataItem.values,\n            [action.value]: action.color\n          }\n        }\n      };\n      delete newState.method;\n      delete newState.classes;\n      delete newState.colorScale;\n      return newState;\n    case types.LAYER_EDIT_THEMATIC_MAP_TYPE_SET:\n      newState = {\n        ...state,\n        thematicMapType: action.payload\n      };\n      if (action.payload === THEMATIC_CHOROPLETH && state.method === CLASSIFICATION_SINGLE_COLOR) {\n        delete newState.method;\n        delete newState.colorScale;\n        delete newState.classes;\n      }\n      return newState;\n    case types.LAYER_EDIT_CLASSIFICATION_SET:\n      newState = {\n        ...state,\n        method: action.method\n      };\n      if (state.method === CLASSIFICATION_SINGLE_COLOR || ![CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS].includes(action.method)) {\n        delete newState.colorScale;\n        delete newState.classes;\n      }\n      if (action.method !== CLASSIFICATION_PREDEFINED) {\n        delete newState.legendSet;\n      }\n      if (newState.styleDataItem) {\n        delete newState.styleDataItem.optionSet;\n      }\n      return newState;\n    case types.LAYER_EDIT_COLOR_SCALE_SET:\n      newState = {\n        ...state,\n        colorScale: action.colorScale,\n        classes: action.colorScale.length\n      };\n      if (newState.styleDataItem) {\n        delete newState.styleDataItem.optionSet;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_STATUS_SET:\n      newState = {\n        ...state\n      };\n\n      // Default\n      if (action.status === EVENT_STATUS_ALL) {\n        delete newState.eventStatus;\n      } else {\n        newState.eventStatus = action.status;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_COORDINATE_FIELD_SET:\n      return {\n        ...state,\n        eventCoordinateField: action.fieldId\n      };\n    case types.LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET:\n      newState = {\n        ...state\n      };\n      if (action.fieldId === NONE) {\n        delete newState.fallbackCoordinateField;\n      } else {\n        newState.fallbackCoordinateField = action.fieldId;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_CLUSTERING_SET:\n      return {\n        ...state,\n        eventClustering: action.checked\n      };\n    case types.LAYER_EDIT_EVENT_POINT_RADIUS_SET:\n      return {\n        ...state,\n        eventPointRadius: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_EVENT_POINT_COLOR_SET:\n      return {\n        ...state,\n        eventPointColor: action.color\n      };\n    case types.LAYER_EDIT_RELATED_POINT_COLOR_SET:\n      return {\n        ...state,\n        relatedPointColor: action.color\n      };\n    case types.LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET:\n      return {\n        ...state,\n        relationshipLineColor: action.color\n      };\n    case types.LAYER_EDIT_RELATED_POINT_RADIUS_SET:\n      return {\n        ...state,\n        relatedPointRadius: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET:\n      return {\n        ...state,\n        organisationUnitColor: action.color\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET:\n      return {\n        ...state,\n        organisationUnitGroupSet: action.organisationUnitGroupSet\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNITS_SET:\n      return {\n        ...state,\n        rows: [action.payload]\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET:\n      {\n        const {\n          id,\n          name\n        } = action.payload;\n        return {\n          ...state,\n          orgUnitField: id,\n          orgUnitFieldDisplayName: id !== NONE ? name : null,\n          areaRadius: id === NONE ? EE_BUFFER : null\n        };\n      }\n\n    // Set organisation unit tree path (temporary solution, as favorites don't include paths)\n    case types.LAYER_EDIT_ORGANISATION_UNIT_PATH_SET:\n      return {\n        ...state,\n        rows: setOrgUnitPathInRows(state.rows, action.id, action.path)\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_MODE_SET:\n      return {\n        ...state,\n        organisationUnitSelectionMode: action.payload\n      };\n    case types.LAYER_EDIT_BAND_SET:\n      return {\n        ...state,\n        band: action.payload\n      };\n    case types.LAYER_EDIT_STYLE_SET:\n      return {\n        ...state,\n        style: {\n          ...state.style,\n          ...action.payload\n        }\n      };\n    case types.LAYER_EDIT_FILTER_SET:\n      return {\n        ...state,\n        filter: action.filter\n      };\n    case types.LAYER_EDIT_LABELS_SET:\n      return {\n        ...state,\n        labels: action.isChecked\n      };\n    case types.LAYER_EDIT_LABEL_TEMPLATE:\n      return {\n        ...state,\n        labelTemplate: action.template\n      };\n    case types.LAYER_EDIT_LABEL_FONT_COLOR_SET:\n      return {\n        ...state,\n        labelFontColor: action.color\n      };\n    case types.LAYER_EDIT_LABEL_FONT_SIZE_SET:\n      return {\n        ...state,\n        labelFontSize: action.size\n      };\n    case types.LAYER_EDIT_LABEL_FONT_WEIGHT_SET:\n      return {\n        ...state,\n        labelFontWeight: action.weight\n      };\n    case types.LAYER_EDIT_LABEL_FONT_STYLE_SET:\n      return {\n        ...state,\n        labelFontStyle: action.style\n      };\n    case types.LAYER_EDIT_BUFFER_RADIUS_SET:\n      return {\n        ...state,\n        areaRadius: action.radius\n      };\n    case types.LAYER_EDIT_RADIUS_LOW_SET:\n      return {\n        ...state,\n        radiusLow: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_RADIUS_HIGH_SET:\n      return {\n        ...state,\n        radiusHigh: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_LEGEND_SET_SET:\n      return {\n        ...state,\n        legendSet: action.legendSet\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_TYPE_SET:\n      return {\n        ...state,\n        trackedEntityType: {\n          ...action.trackedEntityType\n        },\n        program: null,\n        programStage: null,\n        relationshipType: null,\n        relationshipOutsideProgram: null\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET:\n      return {\n        ...state,\n        relationshipType: action.relationshipType\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET:\n      return {\n        ...state,\n        relationshipOutsideProgram: action.payload\n      };\n    case types.LAYER_EDIT_PROGRAM_STATUS_SET:\n      newState = {\n        ...state\n      };\n\n      // Default\n      if (action.payload === 'ALL') {\n        delete newState.programStatus;\n      } else {\n        newState.programStatus = action.payload;\n      }\n      return newState;\n    case types.LAYER_EDIT_FOLLOW_UP_SET:\n      return {\n        ...state,\n        followUp: action.payload\n      };\n    case types.LAYER_EDIT_NO_DATA_COLOR_SET:\n      newState = {\n        ...state\n      };\n\n      // Default is to show no feature\n      if (!action.payload) {\n        delete newState.noDataColor;\n      } else {\n        newState.noDataColor = action.payload;\n      }\n      return newState;\n    case types.LAYER_EDIT_EARTH_ENGINE_PERIOD_SET:\n      return {\n        ...state,\n        period: action.payload\n      };\n    case types.LAYER_EDIT_FEATURE_STYLE_SET:\n      return {\n        ...state,\n        featureStyle: {\n          ...state.featureStyle,\n          ...action.payload\n        }\n      };\n    default:\n      return state;\n  }\n};\nexport default layerEdit;","import * as types from '../constants/actionTypes.js';\nconst layerSourcesReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.LAYER_SOURCES_INIT:\n      return action.payload;\n    case types.LAYER_SOURCE_ADD:\n      return [...state, action.payload];\n    case types.LAYER_SOURCE_REMOVE:\n      return state.filter(item => item !== action.payload);\n    default:\n      return state;\n  }\n};\nexport default layerSourcesReducer;","import * as types from '../constants/actionTypes.js';\nconst orgUnitProfile = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n      return action.payload;\n    case types.ORGANISATION_UNIT_PROFILE_CLOSE:\n    case types.FEATURE_PROFILE_SET:\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.DOWNLOAD_MODE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default orgUnitProfile;","import * as types from '../constants/actionTypes.js';\nconst defaultState = {\n  width: typeof window === 'object' ? window.innerWidth : null,\n  height: typeof window === 'object' ? window.innerHeight : null,\n  layersPanelOpen: true,\n  rightPanelOpen: false,\n  dataTableHeight: 300,\n  mapContextMenu: true,\n  downloadMode: false,\n  layersSorting: false\n};\nconst ui = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.LAYERS_PANEL_OPEN:\n      return {\n        ...state,\n        layersPanelOpen: true\n      };\n    case types.LAYERS_PANEL_CLOSE:\n      return {\n        ...state,\n        layersPanelOpen: false\n      };\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n    case types.FEATURE_PROFILE_SET:\n      return {\n        ...state,\n        rightPanelOpen: true\n      };\n    case types.INTERPRETATIONS_PANEL_CLOSE:\n    case types.ORGANISATION_UNIT_PROFILE_CLOSE:\n    case types.FEATURE_PROFILE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return {\n        ...state,\n        rightPanelOpen: false\n      };\n    case types.DOWNLOAD_MODE_OPEN:\n      return {\n        ...state,\n        downloadMode: true\n      };\n    case types.DOWNLOAD_MODE_CLOSE:\n      return {\n        ...state,\n        rightPanelOpen: false,\n        downloadMode: false\n      };\n    case types.DATA_TABLE_RESIZE:\n      return {\n        ...state,\n        dataTableHeight: action.height\n      };\n    case types.LAYERS_SORTING_START:\n      return {\n        ...state,\n        layersSorting: true\n      };\n    case types.LAYERS_SORTING_END:\n      return {\n        ...state,\n        layersSorting: false\n      };\n    default:\n      return state;\n  }\n};\nexport default ui;","import { combineReducers } from 'redux';\nimport aggregations from './aggregations.js';\nimport analyticalObject from './analyticalObject.js';\nimport contextMenu from './contextMenu.js';\nimport dataTable from './dataTable.js';\nimport download from './download.js';\nimport feature from './feature.js';\nimport featureProfile from './featureProfile.js';\nimport interpretation from './interpretation.js';\nimport layerEdit from './layerEdit.js';\nimport layerSources from './layerSources.js';\nimport map from './map.js';\nimport orgUnitProfile from './orgUnitProfile.js';\nimport ui from './ui.js';\nexport default combineReducers({\n  aggregations,\n  analyticalObject,\n  contextMenu,\n  dataTable,\n  download,\n  interpretation,\n  layerEdit,\n  layerSources,\n  map,\n  orgUnitProfile,\n  ui,\n  feature,\n  featureProfile\n});","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from '../reducers/index.js';\nconst composeEnhancer = process.env.NODE_ENV === 'development' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducer, composeEnhancer(applyMiddleware(thunk)));\nif (window.Cypress) {\n  window.store = store;\n}\nexport default store;","import i18n from '@dhis2/d2-i18n';\nimport { THEMATIC_LAYER, EVENT_LAYER, TRACKED_ENTITY_LAYER, FACILITY_LAYER, ORG_UNIT_LAYER } from '../constants/layers.js';\nexport const getDefaultLayerTypes = () => [{\n  layer: THEMATIC_LAYER,\n  type: i18n.t('Thematic'),\n  img: 'images/thematic.png',\n  opacity: 0.9\n}, {\n  layer: EVENT_LAYER,\n  type: i18n.t('Events'),\n  img: 'images/events.png',\n  opacity: 0.8,\n  eventClustering: true\n}, {\n  layer: TRACKED_ENTITY_LAYER,\n  type: i18n.t('Tracked entities'),\n  img: 'images/trackedentities.png',\n  opacity: 0.5\n}, {\n  layer: FACILITY_LAYER,\n  type: i18n.t('Facilities'),\n  img: 'images/facilities.png',\n  opacity: 1\n}, {\n  layer: ORG_UNIT_LAYER,\n  type: i18n.t('Org units'),\n  img: 'images/orgunits.png',\n  opacity: 1\n}];","import { layerTypes } from '../components/map/MapApi.js';\nimport { MAP_LAYER_POSITION_BASEMAP } from '../constants/layers.js';\nimport { DEFAULT_SYSTEM_SETTINGS, SYSTEM_SETTINGS } from '../constants/settings.js';\nimport { getBasemapList } from './basemaps.js';\nimport { createExternalOverlayLayer, supportedMapServices } from './external.js';\nimport { getDefaultLayerTypes } from './getDefaultLayerTypes.js';\nimport { getHiddenPeriods } from './periods.js';\nimport { EXTERNAL_MAP_LAYERS_QUERY } from './requests.js';\nexport const appQueries = {\n  currentUser: {\n    resource: 'me',\n    params: {\n      fields: 'id,username,displayName~rename(name),authorities,settings[keyAnalysisDisplayProperty,keyUiLocale]'\n    }\n  },\n  systemSettings: {\n    resource: 'systemSettings',\n    params: {\n      key: SYSTEM_SETTINGS\n    }\n  },\n  externalMapLayers: EXTERNAL_MAP_LAYERS_QUERY,\n  systemInfo: {\n    resource: 'system/info',\n    params: {\n      fields: 'calendar,dateFormat'\n    }\n  }\n};\nconst getDefaultLayerSources = externalMapLayers => {\n  const externalLayerSources = externalMapLayers.filter(layer => layer.mapLayerPosition !== MAP_LAYER_POSITION_BASEMAP).filter(layer => supportedMapServices.includes(layer.mapService)).map(createExternalOverlayLayer).filter(overlay => layerTypes.includes(overlay.config.type));\n  return getDefaultLayerTypes().concat(externalLayerSources);\n};\nexport const providerDataTransformation = async _ref => {\n  let {\n    currentUser,\n    systemSettings,\n    systemInfo,\n    externalMapLayers\n  } = _ref;\n  return {\n    currentUser: {\n      id: currentUser.id,\n      name: currentUser.name,\n      username: currentUser.username,\n      authorities: new Set(currentUser.authorities),\n      keyAnalysisDisplayProperty: currentUser.settings.keyAnalysisDisplayProperty\n    },\n    nameProperty: currentUser.settings.keyAnalysisDisplayProperty === 'name' ? 'displayName' : 'displayShortName',\n    systemSettings: {\n      ...DEFAULT_SYSTEM_SETTINGS,\n      ...systemSettings,\n      hiddenPeriods: getHiddenPeriods(systemSettings)\n    },\n    periodsSettings: {\n      locale: currentUser.settings.keyUiLocale,\n      calendar: systemInfo.calendar,\n      dateFormat: systemInfo.dateFormat\n    },\n    basemaps: await getBasemapList({\n      externalMapLayers: externalMapLayers.externalMapLayers,\n      systemSettings\n    }),\n    defaultLayerSources: getDefaultLayerSources(externalMapLayers.externalMapLayers)\n  };\n};","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport hi_INTranslations from './hi_IN/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport neTranslations from './ne/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('hi_IN', namespace, hi_INTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ne', namespace, neTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { DataStoreProvider } from '@dhis2/app-service-datastore';\nimport { CssVariables } from '@dhis2/ui';\nimport log from 'loglevel';\nimport queryString from 'query-string';\nimport React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport App from './components/app/App.js';\nimport { CachedDataProvider } from './components/cachedDataProvider/CachedDataProvider.js';\nimport OrgUnitsProvider from './components/OrgUnitsProvider.js';\nimport WindowDimensionsProvider from './components/WindowDimensionsProvider.js';\nimport store from './store/index.js';\nimport { USER_DATASTORE_NAMESPACE } from './util/analyticalObject.js';\nimport { appQueries, providerDataTransformation } from './util/app.js';\nimport './locales/index.js';\nimport history from './util/history.js';\nlog.setLevel(process.env.NODE_ENV === 'production' ? log.levels.INFO : log.levels.TRACE);\nconst replaceLegacyUrl = () => {\n  // support legacy urls\n  const queryParams = queryString.parse(window.location.search, {\n    parseBooleans: true\n  });\n  const [base] = window.location.href.split('?');\n  if (queryParams.id) {\n    // /?id=ytkZY3ChM6J\n    // /?id=ZBjCfSaLSqD&interpretationid=yKqhXZdeJ6a\n    // /?id=ZBjCfSaLSqD&interpretationId=yKqhXZdeJ6a\n\n    const interpretationId = queryParams.interpretationId || queryParams.interpretationid;\n    const interpretationQueryParams = interpretationId ? `?interpretationId=${interpretationId}` : '';\n\n    // replace history && hash history\n    window.history.replaceState({}, '', `${base}#/${queryParams.id}${interpretationQueryParams}`);\n    history.replace(`/${queryParams.id}${interpretationQueryParams}`);\n  } else if (queryParams.currentAnalyticalObject === true) {\n    // /?currentAnalyticalObject=true\n\n    // replace history && hash history\n    window.history.replaceState({}, '', `${base}#/currentAnalyticalObject`);\n    history.replace('/currentAnalyticalObject');\n  }\n};\nconst AppWrapper = () => {\n  replaceLegacyUrl();\n  return /*#__PURE__*/React.createElement(ReduxProvider, {\n    store: store\n  }, /*#__PURE__*/React.createElement(DataStoreProvider, {\n    namespace: USER_DATASTORE_NAMESPACE\n  }, /*#__PURE__*/React.createElement(CachedDataProvider, {\n    query: appQueries,\n    dataTransformation: providerDataTransformation\n  }, /*#__PURE__*/React.createElement(WindowDimensionsProvider, null, /*#__PURE__*/React.createElement(OrgUnitsProvider, null, /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    elevations: true,\n    spacers: true,\n    theme: true\n  }), /*#__PURE__*/React.createElement(App, null))))));\n};\nexport default AppWrapper;"],"names":["MAP_NEW","MAP_SET","MAP_PROPS_SET","MAP_CONTEXT_MENU_OPEN","MAP_CONTEXT_MENU_CLOSE","MAP_COORDINATE_OPEN","MAP_COORDINATE_CLOSE","MAP_EARTH_ENGINE_VALUE_SHOW","MAP_ALERTS_CLEAR","BASEMAP_SELECTED","BASEMAP_TOGGLE_EXPAND","BASEMAP_TOGGLE_VISIBILITY","BASEMAP_CHANGE_OPACITY","LAYER_ADD","LAYER_REMOVE","LAYER_CHANGE_OPACITY","LAYER_EDIT","LAYER_CANCEL","LAYER_LOADING_SET","LAYER_SORT","LAYER_TOGGLE_EXPAND","LAYER_TOGGLE_VISIBILITY","LAYER_UPDATE","DATA_TABLE_CLOSE","DATA_TABLE_TOGGLE","DATA_TABLE_RESIZE","DATA_FILTER_SET","DATA_FILTER_CLEAR","ORGANISATION_UNIT_PROFILE_SET","ORGANISATION_UNIT_PROFILE_CLOSE","LAYERS_PANEL_OPEN","LAYERS_PANEL_CLOSE","INTERPRETATIONS_PANEL_OPEN","INTERPRETATIONS_PANEL_CLOSE","LAYERS_SORTING_START","LAYERS_SORTING_END","LAYER_EDIT_PROGRAM_SET","LAYER_EDIT_PROGRAM_STAGE_SET","LAYER_EDIT_PERIOD_NAME_SET","LAYER_EDIT_PERIOD_SET","LAYER_EDIT_PERIODS_SET","LAYER_EDIT_START_DATE_SET","LAYER_EDIT_BACKUP_PERIODSDATES_SET","LAYER_EDIT_END_DATE_SET","LAYER_EDIT_FILTER_ADD","LAYER_EDIT_FILTER_REMOVE","LAYER_EDIT_FILTER_CHANGE","LAYER_EDIT_DIMENSION_FILTER_ADD","LAYER_EDIT_DIMENSION_FILTER_REMOVE","LAYER_EDIT_DIMENSION_FILTER_CHANGE","LAYER_EDIT_STYLE_DATA_ITEM_SET","LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET","LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET","LAYER_EDIT_THEMATIC_MAP_TYPE_SET","LAYER_EDIT_CLASSIFICATION_SET","LAYER_EDIT_COLOR_SCALE_SET","LAYER_EDIT_DATA_ITEM_SET","LAYER_EDIT_EVENT_STATUS_SET","LAYER_EDIT_EVENT_COORDINATE_FIELD_SET","LAYER_EDIT_EVENT_CLUSTERING_SET","LAYER_EDIT_EVENT_POINT_RADIUS_SET","LAYER_EDIT_EVENT_POINT_COLOR_SET","LAYER_EDIT_RELATED_POINT_COLOR_SET","LAYER_EDIT_RELATED_POINT_RADIUS_SET","LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET","LAYER_EDIT_ORGANISATION_UNITS_SET","LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET","LAYER_EDIT_ORGANISATION_UNIT_MODE_SET","LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET","LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET","LAYER_EDIT_VALUE_TYPE_SET","LAYER_EDIT_INDICATOR_GROUP_SET","LAYER_EDIT_PERIOD_TYPE_SET","LAYER_EDIT_RENDERING_STRATEGY_SET","LAYER_EDIT_AGGREGATION_TYPE_SET","LAYER_EDIT_DATA_ELEMENT_GROUP_SET","LAYER_EDIT_STYLE_SET","LAYER_EDIT_FILTER_SET","LAYER_EDIT_LABELS_SET","LAYER_EDIT_LABEL_TEMPLATE","LAYER_EDIT_LABEL_FONT_SIZE_SET","LAYER_EDIT_LABEL_FONT_WEIGHT_SET","LAYER_EDIT_LABEL_FONT_STYLE_SET","LAYER_EDIT_LABEL_FONT_COLOR_SET","LAYER_EDIT_BUFFER_RADIUS_SET","LAYER_EDIT_RADIUS_LOW_SET","LAYER_EDIT_RADIUS_HIGH_SET","LAYER_EDIT_LEGEND_SET_SET","LAYER_EDIT_ORGANISATION_UNIT_PATH_SET","LAYER_EDIT_OPERAND_SET","LAYER_EDIT_TRACKED_ENTITY_TYPE_SET","LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET","LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET","LAYER_EDIT_PROGRAM_STATUS_SET","LAYER_EDIT_FOLLOW_UP_SET","LAYER_EDIT_NO_DATA_COLOR_SET","LAYER_EDIT_BAND_SET","LAYER_EDIT_FEATURE_STYLE_SET","LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET","LAYER_EDIT_EARTH_ENGINE_PERIOD_SET","INTERPRETATION_SET","DOWNLOAD_MODE_OPEN","DOWNLOAD_MODE_CLOSE","DOWNLOAD_CONFIG_SET","ANALYTICAL_OBJECT_SET","ANALYTICAL_OBJECT_CLEAR","FEATURE_HIGHLIGHT","FEATURE_PROFILE_SET","FEATURE_PROFILE_CLOSE","AGGREGATIONS_SET","LAYER_SOURCES_INIT","LAYER_SOURCE_ADD","LAYER_SOURCE_REMOVE","addLayer","config","type","types","payload","editLayer","layer","updateLayer","CachedDataCtx","createContext","CachedDataProvider","_ref","query","dataTransformation","children","translucent","data","rawData","error","loading","useDataQuery","transformedData","setTransformedData","useState","undefined","transformLoading","setTransformLoading","Boolean","transformError","setTransformError","useEffect","isMounted","async","result","Promise","resolve","err","runTransformation","React","Layer","CenteredContent","CircularLoader","fallbackMsg","i18n","NoticeBox","title","message","Provider","value","useCachedData","useContext","ALERT_SUCCESS","success","ALERT_SUCCESS_DELAY","duration","ALERT_CRITICAL","critical","ALERT_WARNING","warning","ALERT_MESSAGE_DYNAMIC","msg","ALERT_OPTIONS_DYNAMIC","_ref2","isError","WARNING_NO_DATA","WARNING_NO_OU_COORD","WARNING_NO_GEOMETRY_COORD","ERROR_CRITICAL","CUSTOM_ALERT","loaderAlertAction","arguments","length","Function","prototype","errorAlert","useAlert","onHidden","warningAlert","infoAlert","info","noDataAlert","noOUCoordinatesAlert","noGeometryCoordinatesAlert","showAlerts","alerts","forEach","code","show","nsSeparator","VECTOR_STYLE","TILE_LAYER","BING_LAYER","AZURE_LAYER","EVENT_LAYER","THEMATIC_LAYER","FACILITY_LAYER","ORG_UNIT_LAYER","EXTERNAL_LAYER","EARTH_ENGINE_LAYER","TRACKED_ENTITY_LAYER","GEOJSON_LAYER","GEOJSON_URL_LAYER","MAP_SERVICE_KEY_TESTS","keyBingMapsApiKey","url","keyAzureMapsApiKey","DOWNLOADABLE_LAYER_TYPES","DATA_TABLE_LAYER_TYPES","MAP_LAYER_POSITION_BASEMAP","OPEN_AS_LAYER_TYPES","PADDING_DEFAULT","top","right","bottom","left","PADDING_TIMELINE","DURATION_DEFAULT","RENDERING_STRATEGY_SINGLE","RENDERING_STRATEGY_TIMELINE","RENDERING_STRATEGY_SPLIT_BY_PERIOD","THEMATIC_CHOROPLETH","THEMATIC_BUBBLE","THEMATIC_RADIUS_LOW","THEMATIC_RADIUS_HIGH","THEMATIC_RADIUS_MIN","THEMATIC_RADIUS_MAX","EVENT_CLIENT_PAGE_SIZE","EVENT_COLOR","EVENT_COORDINATE_DEFAULT","EVENT_COORDINATE_ENROLLMENT","EVENT_COORDINATE_TRACKED_ENTITY","EVENT_COORDINATE_CASCADING","COORDINATE_FIELD_NAMES","TEI_COLOR","TEI_RELATED_COLOR","TEI_RELATIONSHIP_LINE_COLOR","ORG_UNIT_COLOR","ORG_UNIT_RADIUS","EE_BUFFER","CLASSIFICATION_PREDEFINED","CLASSIFICATION_EQUAL_INTERVALS","CLASSIFICATION_EQUAL_COUNTS","CLASSIFICATION_SINGLE_COLOR","STYLE_TYPE_COLOR","STYLE_TYPE_SYMBOL","LABEL_TEMPLATE_NAME_ONLY","LABEL_FONT_SIZE","LABEL_FONT_COLOR","MAX_RADIUS","NONE","layerId","datasetId","format","img","name","description","notice","source","sourceUrl","unit","resolution","spatial","temporal","temporalCoverage","aggregations","defaultAggregations","style","color","strokeWidth","opacity","band","min","max","palette","maskOperator","periodType","filters","popup","legacyBuildingsDatasetId","legacy","legacyNighttimeDatasetId","mosaic","methods","multiply","periodGroups","DAILY","WEEKLY","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","SIXMONTHLY","YEARLY","FINANCIAL","PREDEFINED_PERIODS","FIXED_PERIODS","START_END_DATES","LAST_UPDATED_DATES","periodTypes","includeRelativePeriods","id","group","WEEKLYWED","WEEKLYTHU","WEEKLYSAT","WEEKLYSUN","SIXMONTHLYAPR","FYNOV","FYOCT","FYJUL","FYAPR","BY_YEAR","EE_MONTHLY","unmaskAggregation","bands","tileScale","earthEngineLayers","populationTotal","populationAgeSex","buildings","elevation","precipitationMonthly","temperatureMonthly","landcover","legacyBuildings","legacyNighttime","legacyPopulation100m","legacyPopulationWorldPop","legacyPrecipitation","legacyTemperature","earthEngineLayersDefaultIds","map","l","getEarthEngineLayer","find","dimConf","param","dimensionName","objectName","category","indicator","itemType","dataElement","operand","dataSet","eventDataItem","programDataElement","programAttribute","programIndicator","calculation","period","organisationUnit","reportingRate","numberValueTypes","textValueTypes","booleanValueTypes","dateValueTypes","datetimeValueTypes","coordinateValueTypes","getBaseFields","withSubscribers","baseFields","push","analysisFields","nameProperty","mapFields","fields","join","addOrgUnitPaths","mapViews","view","rows","organisationUnits","dim","items","orgUnit","path","ou","mandatoryDataItemAttributes","getValidDataItems","filter","item","isObject","every","prop","getSplitViewLayer","layers","renderingStrategy","getLongestTextLength","array","key","reduce","text","curr","String","formatCoordinate","Array","isArray","JSON","parse","v","isNaN","Number","toFixed","e","formatDatetime","match","hasValue","formatValueForDisplay","valueType","options","console","warn","stringify","includes","formatBoolean","formatDate","sumObjectValues","obj","Object","values","sum","getCssVar","cssVar","getComputedStyle","document","documentElement","getPropertyValue","replace","getPeriodTypes","hiddenPeriods","getFixedPeriodsByType","year","firstDate","lastDate","periodsSettings","getFixedPeriodsOptionsById","forceDescendingForYearTypes","offset","Date","now","getFullYear","getYearOffsetFromNow","periods","getPeriods","reversePeriods","filterPeriods","p","startDate","endDate","reverse","getRelativePeriods","getRelativePeriodsOptionsById","flat","isPeriodAvailable","filterFuturePeriods","date","_ref5","periodSetting","getHiddenPeriods","systemSettings","keys","setting","test","toUpperCase","countPeriods","deduplication","periodsDurationByType","periodsDetails","acc","_ref6","_periodsDetails$id","any","_ref7","first","last","Math","getPeriodsDurationByType","getRelativePeriodsDetails","addPeriodsDetails","periodsWithTypeAndLevel","periodId","Error","PERIOD_TYPE_REGEX","getPeriodTypeFromId","level","indexOf","getPeriodLevelFromPeriodType","distinctLevels","Set","sort","a","b","distinctLevelsCount","periodsWithTypeLevelAndRank","levelRank","sortPeriodsByLevelAndStartDate","abc","letters","concat","ALLOWED_CHARS","NUMBER_OF_CODEPOINTS","CODESIZE","randomWithMax","floor","random","generateUid","randomChars","charAt","i","CODE_PATTERN","isValidUid","createDimension","dimension","props","getDimensionItems","arr","dataItems","getDimension","getDataItemFromColumns","setDataItemInColumns","dataItem","dimensionItemType","legendSet","getOrgUnitsFromRows","setOrgUnitPathInRows","orgUnits","getPeriodFromFilters","getPeriodsFromFilters","removePeriodFromFilters","f","getPeriodNameFromId","_ref3","_ref4","setFiltersFromPeriod","setFiltersFromPeriods","getDimensionsFromFilters","d","getValidDimensionsFromFilters","removeDimensionFromFilters","index","dimensions","changeDimensionInFilters","getFilterOperatorAsText","operator","EQ","GT","GE","LT","LE","NE","IN","LIKE","getFilterValueName","names","split","val","combineDataItems","dataItemsA","dataItemsB","includeTypes","excludeTypes","sortBy","getMapLocale","acres","Area","Cancel","Delete","Distance","ha","km","mi","Perimeter","glyphs","baseUrl","div","createElement","className","width","height","MapApi","locale","DEFAULT_LOCALE","dateLocale","trimTime","dateTime","slice","toDate","shortDateRegexp","isValidDateFormat","dateString","substr","dateObj","getMonth","getDate","fallbackDateFormat","hasIntlSupport","global","Intl","DateTimeFormat","formatLocaleDate","showYear","month","day","formatStartEndDate","loc","getDateArray","parseInt","substring","getStartEndDateError","startDateStr","endDateStr","startDateArr","endDateArr","getYear","classAggregation","hasClasses","toLocaleString","getStaticFilterFromPeriod","_len","args","_key","arg","getStaticFiltersFromDynamic","nonDigits","getAuthTokenFn","engine","token","resource","status","token_type","_e$details","details","httpStatusCode","workerPromise","useSystemIndex","some","eeWorker","getAuthToken","EarthEngineWorker","loadEarthEngineWorker","getWorkerInstance","features","properties","toGeoJson","coord","co","gpid","gppg","ty","isString","pg","ids","compact","geometry","coordinates","na","hasCoordinatesDown","hcd","hasCoordinatesUp","hcu","le","grandParentParentGraph","grandParentId","parentGraph","parentId","pi","parentName","pn","drillUpDown","layerConfig","isLoaded","isLoading","onFullscreenChange","isFullscreen","resize","bounds","getLayersBounds","fitBounds","toggleMultiTouch","toggleScrollZoom","formatCount","count","num","round","getRoundToPrecisionFn","n","m","pow","getPrecision","sortedValues","minValue","maxValue","minMaxGap","absOfMaxValue","abs","qualitativeColors","YlGn","YlGnBu","GnBu","BuGn","PuBuGn","PuBu","BuPu","RdPu","PuRd","OrRd","YlOrRd","YlOrBr","Purples","Blues","Greens","Oranges","Reds","Greys","PuOr","BrBG","PRGn","PiYG","RdBu","RdGy","RdYlBu","Spectral","RdYlGn","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","YlOrBr_reverse","Reds_reverse","YlGn_reverse","Greens_reverse","Blues_reverse","BuPu_reverse","RdPu_reverse","PuRd_reverse","Greys_reverse","colorScales","getColorPalette","scale","classes","colorbrewer","getColorScale","defaultColorScaleName","defaultClasses","defaultColorScale","cssColor","getUniqueColor","defaultColors","colors","randomColor","toString","isDarkColor","hcl","getContrastColor","parseGroupSet","organisationUnitGroups","groups","localeCompare","getColor","groupsWithoutColors","g","findIndex","getGroupColor","getSymbol","groupsWithoutSymbols","symbol","getGroupSymbol","ORG_UNITS_GROUP_SET_QUERY","groupSets","params","ORG_UNIT_QUERY","getStyledOrgUnits","groupSet","organisationUnitColor","radiusLow","orgUnitLevels","styleType","isFacilityLayer","levelWeight","levelItems","levels","uniqBy","weight","useColor","styledFeatures","isPoint","hasAdditionalGeometry","getOrgUnitStyle","radius","ORG_UNIT_RADIUS_SMALL","iconUrl","groupItems","contextPath","image","getOrgUnitGroupLegendItems","facilityItems","legend","getCoordinateField","orgUnitField","orgUnitFieldDisplayName","addAssociatedGeometries","mainFeatures","associatedGeometries","associated","extractBasemap","defaultBasemapId","externalBasemap","mapLayerPosition","basemap","isVisible","gisAppLayerOrder","externalLayer","earthEngine","thematic4","thematic3","thematic2","thematic1","boundary","facility","event","upgradeGisAppLayers","updatedMapViews","mapView","orderedMapView","upgradeMapViews","colorScale","upgradedViews","parts","MAP_QUERY","MAP_NAME_DESC_QUERY","MAP_SUBSCRIBERS_QUERY","fetchMap","defaultBasemap","variables","then","getMigratedMapConfig","catch","EXTERNAL_MAP_LAYER_QUERY","_ref8","OPTION_SET_QUERY","optionSet","_ref9","paging","LEGEND_SET_QUERY","_ref10","GEOFEATURES_QUERY","geoFeatures","_ref11","orgUnitIds","keyAnalysisDisplayProperty","includeGroupSets","coordinateField","userId","displayProperty","_","createLegend","showBelowMin","step","precision","precisionRound","valueFormat","from","to","Infinity","aggregationType","dataset","geoFeatureData","coordFieldData","_layerConfig$filter","_filter$arguments","getPeriodFromFilter","isNightTimeLights","isExpanded","EVENT_STATUS_ALL","EVENT_STATUS_COMPLETED","getEventStatuses","EVENT_ID_FIELD","createEventFeature","headers","getGeometry","header","option","buildEventGeometryGetter","geomCol","h","TYPE_NUMBER","TYPE_STRING","DHIS2_PROP","getGeojsonDisplayData","feature","entries","startsWith","dataKey","GEO_TYPE_POINT","GEO_TYPE_POLYGON","GEO_TYPE_MULTIPOLYGON","GEO_TYPE_LINE","GEO_TYPE_FEATURE","GEO_TYPE_FEATURE_COLLECTION","rawGeometryTypes","EVENT_PROGRAM_STAGE_DATA_ELEMENTS_QUERY","programStage","EVENT_PROGRAM_ATTRIBUTES_QUERY","program","isValidDimension","METADATA_FORMAT_NAME","getEventColumns","programStageDataElements","el","displayInReports","getAnalyticsRequest","columns","styleDataItem","eventStatus","eventCoordinateField","fallbackCoordinateField","relativePeriodDate","isExtended","analyticsEngine","addStyleDataItem","col","analyticsRequest","request","withProgram","withStage","withCoordinatesOnly","addPeriodFilter","withStartDate","withEndDate","withRelativePeriodDate","addOrgUnitDimension","addDimension","withCoordinateField","withParameters","defaultCoordinateFallback","withEventStatus","loadData","response","events","getQuery","withPageSize","column","columnNames","idColName","idCol","metaData","row","outputIdScheme","createEventFeatures","loadEventCoordinateFieldName","displayNameProp","programStageData","coordElement","programData","programTrackedEntityAttributes","coordAttribute","trackedEntityAttribute","getLegendItemForValue","legendItems","clamp","startValue","endValue","isLast","getLegendItems","method","numClasses","bins","getEqualIntervals","getQuantiles","binSize","binCount","binLastValPos","bin","INDICATOR_QUERY","DATA_ELEMENT_QUERY","DATA_SET_QUERY","getPredefinedLegendItems","pickSome","pick","legends","getAutomaticLegendItems","styleByDefault","eventPointColor","eventPointRadius","getLegendUnit","styleByBoolean","true","false","displayValue","styleByNumeric","legendItem","getLegendItem","styleByOptionSet","getOptionSet","optionsByName","toLowerCase","optionIndex","optSet","opt","DATA_ELEMENT_NAME_QUERY","ATTRIBUTE_NAME_QUERY","accessDeniedAlert","filterErrorAlert","unknownErrorAlert","loadEventLayer","loadExtended","eventClustering","areaRadius","dataFilters","getFiltersFromColumns","alert","serverCluster","getCount","bbox","extent","getBounds","total","pager","styleByDataItem","pageSize","getFiltersAsText","getFilterOptionNames","eventCoordinateFieldName","coordinateFields","numericDataItemHeaders","newD","parseFloat","strokeColor","explanation","s","optionSets","all","set","_e$details2","_e$details3","MAP_SERVICE_GEOJSON_URL","mapServiceToTypeMap","supportedMapServices","createExternalBasemapLayer","createExternalLayerConfig","createExternalOverlayLayer","mapService","model","attribution","imageFormat","legendSetUrl","tms","parseLayerConfig","evt","featureStyle","_data","organisationUnitGroupSet","loadError","onError","getPointItems","orgUnitGroups","getPolygonItems","fillColor","EMPTY_FEATURE_STYLE","newConfig","geoJson","routesIndex","geojson","Blob","fetch","ok","json","fetchData","featureCollection","finalGeoJson","geometries","nonMultiType","buildGeoJsonFeatures","oneType","pointSize","apiFetchOrganisationUnitLevels","displayName","getPeriodsFromMetaData","pe","newEndDate","setHours","getValuesByPeriod","periodIndex","ouIndex","valueIndex","getValueById","getOrderedValues","presetPeriods","isOperand","isSingleMap","dataDimension","addDataDimension","withDisplayProperty","addPeriodDimension","addFilter","withAggregationType","completedOnly","aggregate","get","radiusHigh","thematicMapType","noDataColor","errorCode","isBubbleMap","isSingleColor","getApiResponseNames","valuesByPeriod","valueById","valueFeatures","orderedValues","noData","bubbles","getRadiusForValue","scaleSqrt","range","domain","orgunit","noDataLegendItem","targetItem","getProgramStatuses","TRACKED_ENTITY_INSTANCE","TEI_40_QUERY","orgUnitMode","trackedEntityType","ouMode","skipPaging","TEI_41_QUERY","normalizeInstances","instances","instance","_instance$geometry","out","parseTEInstanceId","trackedEntity","getInstanceRelationships","relationshipsById","targetInstances","localRels","relationships","rel","isValidRel","relationshipType","relationship","bidirectional","reversedTo","getDataWithRelationships","_from$program","_to$program","isVersion40","sourceInstances","queryOptions","organisationUnitSelectionMode","fromConstraint","toConstraint","relationshipEntity","isRecursiveTrackedEntityType","isRecursiveProgram","isToProgramDefined","recursiveProp","normalizedSourceInstances","normalizedPotentialTargetInstances","_recursiveProp","_recursiveProp2","_recursiveProp2$type","tei","targetInstanceIds","filteredSourceInstances","isIndexInstance","hasChildren","toIdMatches","fromIdMatches","primary","secondary","teiGeometryTypes","programStatus","followUp","enrollmentEnrolledAfter","enrollmentEnrolledBefore","updatedAfter","updatedBefore","RELATIONSHIP_TYPES_QUERY","TRACKED_ENTITY_TYPES_QUERY","serverVersion","customConfig","relatedPointColor","pointColor","relatedPointRadius","pointRadius","relationshipLineColor","lineColor","relationshipOutsideProgram","relationshipTypeID","minor","fieldsWithRelationships","boolFollowUp","trackedEntities","_instance$geometry2","secondaryData","relatedEntityType","featureType","dataWithRels","loaders","earthEngineLoader","eventLoader","external","externalLoader","facilityLoader","orgUnitLoader","thematic","thematicLoader","geoJsonUrl","geoJsonUrlLoader","trackedEntityLoader","useLayersLoader","useConfig","useDataEngine","Analytics","currentUser","useLoaderAlerts","allLayers","useSelector","state","dataTable","dispatch","useDispatch","showLoaderAlert","loader","loadLayer","closeDataTable","callback","longPress","timerRef","useRef","useMemo","handleKeyDown","useCallback","current","setTimeout","handleKeyUp","clearTimeout","window","addEventListener","removeEventListener","WindowDimensionsCtx","windowDims","innerHeight","innerWidth","setDimensions","handleResize","debounce","useWindowDimensions","highlightFeature","setFeatureProfile","setOrgUnitProfile","closeOrgUnitProfile","overlay","filterValue","Input","dataTest","dense","placeholder","onChange","setDataFilter","fieldId","clearDataFilter","filterData","filteredData","field","numericFilter","stringFilter","string","orFilter","isTrueFilter","INDEX","NAME","ID","VALUE","LEGEND","RANGE","LEVEL","PARENT_NAME","TYPE","COLOR","OUNAME","EVENTDATE","ERROR_SERVER_CLUSTER","ERROR_NO_VALID_DATA","ERROR_NO_HEADERS","ERROR_NON_HOMOGENOUS_FEATURES","getErrorCodeText","defaultFieldsMap","renderer","EMPTY_AGGREGATIONS","EMPTY_LAYER","useTableData","sortField","sortDirection","layerType","layerHeaders","dataWithAggregations","_headers","customFields","getEventHeaders","roundFn","str","txt","getEarthEngineHeaders","firstDataItem","align","itemId","_extends","assign","bind","target","hasOwnProperty","call","apply","this","ASCENDING","TableComponents","Table","context","DataTable","layout","styles","TableBody","DataTableBody","TableHead","DataTableHead","TableRow","DataTableRow","onClick","onMouseEnter","onMouseLeave","EmptyPlaceholder","colSpan","availableHeight","availableWidth","headerRowRef","columnWidths","setColumnWidths","activeLayerId","setSorting","useReducer","sorting","newSorting","sortData","showDetailView","_row$find","r","setFeatureHighlight","_row$find2","origin","clearFeatureHighlight","_event$toElement","toElement","relatedTarget","tagName","tableContext","requestAnimationFrame","measuredColumnWidths","cell","cells","rect","getBoundingClientRect","TableVirtuoso","components","fixedHeaderContent","ref","DataTableColumnHeader","onSortIconClick","sortIconTitle","onFilterIconClick","showFilter","FilterInput","itemContent","DataTableCell","cx","backgroundColor","ComponentCover","ErrorBoundary","Component","constructor","super","errorInfo","componentDidCatch","setState","render","IconDrag","viewBox","xmlns","fill","fillRule","ResizeHandle","onResize","onResizeEnd","minHeight","maxHeight","dragHeight","onDrag","getHeight","pageY","draggable","onDragStart","src","dataTransfer","setDragImage","setData","ondragover","onDragEnd","defaultProps","BottomPanel","dataTableHeight","ui","layersPanelOpen","rightPanelOpen","panelRef","tableHeight","tableWidth","useKeyDown","resizeDataTable","IconCross16","history","createHashHistory","defaultHashUrlParams","mapId","isDownload","interpretationId","DOWNLOAD","getHashUrlParams","queryString","search","parseBooleans","pathParts","pathname","openDownloadMode","location","closeDownloadMode","rootPath","setHeaderbarVisible","globalShellHeader","querySelector","iframeHeader","setHeaderStyle","display","DownloadMenubar","Button","IconChevronLeft24","setDownloadConfig","addPropNames","layerName","standardizeFilename","ext","downloadData","humanReadableKeys","layerData","res","periodValue","includeValuesByPeriod","FileSaver","createGeoJsonBlob","toStringFn","newMap","validMapProperties","validLayerProperties","models","validModelProperties","cleanMapConfig","cleanMapviewConfig","omitBy","isNil","getBasemapString","cleanLayerConfig","models2objects","cleanDimension","eeConfig","omit","updateMapMutation","skipTranslation","skipSharing","createMapMutation","getMapName","toLocaleDateString","getSavedMessage","getSaveFailureMessage","onFileMenuAction","keyDefaultBaseMap","saveAlert","renameFailedAlert","renameSuccessAlert","saveAsAlert","deleteAlert","fileMenuErrorAlert","putMap","useDataMutation","renameMap","postMap","onNew","UiFileMenu","fileType","fileObject","onOpen","onSave","subscribers","fetchMapSubscribers","cleanedMap","preparePayloadForSave","visualization","VIS_TYPE_MAP","onSaveAs","preparePayloadForSaveAs","uid","onRename","fetchedMap","latestMap","updatedMapNameDesc","fetchMapNameDesc","onDelete","onShare","onTranslate","position","label","checked","disabled","tooltip","UiCheckbox","Tooltip","content","IconInfo16","backgroundImage","Fragment","IconChevronDown24","itemWidth","isOpen","setIsOpen","anchorRef","onColorScaleSelect","ColorScale","Popover","reference","arrow","placement","onClickOutside","ConditionalWrapper","condition","wrapper","propTypes","PropTypes","isRequired","icon","sublabel","defaultVal","onBlur","inputEl","defaultValue","helpText","inputWidth","InputField","size","fontStyle","onColorChange","onSizeChange","onWeightChange","onStyleChange","NumberField","ColorButton","button","IconTextBold24","toggled","IconTextItalic24","ariaLabel","isSelected","onDisplayOptionChange","SelectField","RadioContext","boldLabel","radio","setRadio","FieldGroup","UiRadio","emptyText","errorText","prefix","multiple","filterable","Select","MultiSelectField","SingleSelectField","Option","MultiSelectOption","SingleSelectOption","selected","onSelectChange","validationText","empty","TabContext","tab","setTab","TabBar","UiTab","loadingMaskClass","MapLoadingMask","Checkbox","showInLegend","northArrowPositions","pos","renderedClass","downloadingClass","DownloadSettings","isPushAnalytics","isRendered","setIsRendered","setError","displayDescription","showName","showDescription","showLegend","showOverviewMap","hasOverviewMapSpace","showNorthArrow","northArrowPosition","includeMargins","download","legendLayers","onDownload","filename","mapEl","getElementById","parentNode","classList","add","downloadMapImage","sourceEl","toBlob","blob","remove","hasLayers","mapElements","getElementsByClassName","observer","MutationObserver","mutations","mutation","attributeName","contains","observe","attributes","disconnect","isSupported","createElementNS","isSplitView","Drawer","LegendLayers","NorthArrowPosition","Help","ButtonStrip","end","openInterpretationsPanel","closeInterpretationsPanel","FALLBACK_BASEMAP_ID","getFallbackBasemap","defaultBasemaps","isDark","apiKey","defaultBasemapState","defaultState","action","coordinate","sortedMapViews","coordinatePopup","arrayMoveImmutable","oldIndex","newIndex","emptyBasemap","setBasemap","basemaps","selectedId","basemapToUse","basemapConfig","SortableHandle","Handle","IconDragHandle24","connect","_layer$aggregationTyp","dataTableOpen","isEarthEngine","hasOrgUnitData","onEdit","onRemove","toggleDataTable","openAs","hasError","somethingAboveDivider","somethingBelowDivider","showDivider","showDataTableDisabled","IconButton","IconMore24","Menu","MenuItem","IconTable16","IconLaunch16","IconDownload16","MenuDivider","IconEdit16","IconDelete16","destructive","lowerFill","upperFill","onSliderChange","background","LayerToolbar","hasOpacity","onOpacityChange","toggleLayerVisibility","expansionMenuProps","IconEdit24","visible","notvisible","IconView24","IconViewOff24","OpacitySlider","LayerToolbarMoreMenu","subtitle","isOverlay","toggleExpand","layerToolbarProps","Card","IconChevronUp24","selectedID","selectBasemap","Basemap","changeBasemapOpacity","toggleBasemapExpand","toggleBasemapVisibility","useBasemapConfig","LayerCard","BasemapList","LayersToggle","downloadMode","IconChevronRight24","CURRENT_AO_KEY","APP_URLS","CHART","PIVOT","getDimensionsFromAnalyticalObject","ao","getDataDimensionsFromAnalyticalObject","dataDim","getThematicLayerFromAnalyticalObject","dataId","yearlySeries","dataDims","dims","DIMENSION_TYPE_INDICATOR","DIMENSION_TYPE_DATA_ELEMENT","DIMENSION_TYPE_DATA_SET","loadDataItemLegendSet","maxRadius","textAlign","stroke","pattern","leftAlign","x","y","x2","guideLength","y2","textX","textPadding","textAnchor","cy","x1","y1","strokeDasharray","alignmentBaseline","fontSize","paddingTop","digitWidth","isPlugin","legendWidth","noDataClass","c","bubbleClasses","itemScale","createBubbleItems","midValue","createSingleColorBubbles","alternate","showNumbers","textLength","ceil","alternateLength","smallestGap","prev","gap","alternateFit","maxBubble","minBubble","midRadius","midBubble","bubblesWithVisibleText","computeLayout","THEMATIC_RADIUS_DEFAULT","transform","bubble","Bubble","strokeLinecap","strokeLinejoin","border","borderRadius","lineWeight","LineSymbol","PolygonSymbol","LegendItemRange","Bubbles","LegendItem","expl","href","downloading","onStartClick","onCancelClick","small","onCloseDialog","formatOptions","selectedFormat","setSelectedFormat","humanReadable","setHumanReadable","isDownloading","setIsDownloading","onClose","Modal","ModalTitle","ModalContent","isChecked","ModalActions","DataDownloadDialogActions","log","removeLayer","changeLayerOpacity","toggleLayerExpand","showDataDownloadDialog","setShowDataDownloadDialog","useSetting","layerRemovedAlert","canEdit","canToggleDataTable","canDownload","canOpenAs","newOpacity","currentAO","getAnalyticalObjectFromThematicLayer","open","Legend","DataDownloadDialog","SortableLayer","SortableElement","OverlayCard","SortableLayersList","SortableContainer","LayersPanel","onSortStart","body","onSortEnd","sortLayers","useDragHandle","BasemapCard","BasemapLayer","basemapNotFoundAlert","basemapInvalidAlert","createLayer","errorMessage","alertError","setOpacity","setVisibility","contextTypes","getMapOutline","upperLeft","pointLocation","Point","toArray","OverviewMapOutline","mainMap","overviewMap","outline","setOutline","sourceId","setSourceId","onMainMapMove","on","off","getMapGL","getSource","getId","mapBounds","outlineBounds","POSITIVE_INFINITY","NEGATIVE_INFINITY","padding","resizeCount","setOverviewMap","mapContainer","onOverviewMapReady","mapGl","setCenter","getCenter","setZoom","getZoom","once","mapApi","attributionControl","dragRotate","touchZoomRotate","pitchWithRotate","minZoom","appendChild","getContainer","basemapLayer","mapHeight","clientHeight","hasSpace","setResizeCount","DownloadLegend","OverviewMap","downloadMapInfoOpen","northLetter","rotation","setRotation","getBearing","onMapRotate","dominantBaseline","clipRule","MapName","mapControls","imperial","splitViewControls","pluginControls","getMapControls","controls","ctrls","AlertBar","_defineProperty","input","hint","prim","Symbol","toPrimitive","TypeError","_toPrimitive","_toPropertyKey","defineProperty","enumerable","configurable","writable","PureComponent","setPeriod","componentDidUpdate","prevProps","prevState","editCounter","prevPeriod","isEdited","setLayerOrder","setLayerOpacity","setLayerVisibility","componentWillUnmount","setIndex","fitToAllLayers","essential","bearing","fitBoundsOnce","isZoomed","onFeatureRightClick","highlight","container","openContextMenu","onErrorHidden","getThematicAggregationTypes","getEarthEngineStatisticTypes","getEarthEngineAggregationTypes","shortName","getEarthEngineAggregationType","t","orgUnitProfile","Popup","orgUnitId","closePopup","openPopup","createPortal","OrgUnitButton","isPercentage","table","earthEngineStyles","onlySum","getValueKey","getValueFormat","typeValueFormat","EVENTS_QUERY","displayItems","setOrgUnit","refetch","refetchOrgUnit","fetching","fetchingOrgUnit","lazy","errorEvent","dataEvent","refetchEvent","fetchingEvent","_resultEvent$events","resultEvent","idOrgUnit","_resultOrgUnit$orgUni","resultOrgUnit","nameOrgUnit","fetchEventandOU","dataValues","occurredAt","dataValueIndex","dataRows","formattedValue","getDataRows","countColor","eventRequest","onEventClick","load","withBbox","withClusterSize","clusterSize","withIncludeClusterPoints","includeClusterPoints","clusterData","getCluster","tileId","clusterPane","buffer","bufferStyle","fillOpacity","loadDisplayItems","EventPopup","onPopupClose","clusterId","clusterCount","center","cluster","cluster_id","point_count","point_count_abbreviated","points","_programStageResponse","programStageResponse","filteredProgramStageItems","loadOptionSet","_programResponse$prog","programResponse","filteredProgramItems","fullOptionSet","byId","getLabelStyle","labelFontSize","labelFontStyle","labelFontWeight","labelFontColor","fontWeight","lineHeight","labelNoData","labels","hoverLabel","onFeatureClick","onRightClick","labelStyle","opacityFactor","onAssociatedGeometryClick","getPopup","isAssociatedGeometry","isPlainObject","Alert","_config$featureStyle","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","week","hour","minute","tickIntervals","second","start","stop","interval","bisector","tickStep","millisecond","tickInterval","ticks","MODE_PLAY","MODE_PAUSE","setWidth","mode","setMode","currentPeriod","setCurrentPeriod","svgRef","timeoutRef","TRANSPARENT_RECT","PLAY_ICON","PAUSE_ICON","updateWidth","_svgRef$current$paren","box","newWidth","sortedPeriods","isLastPeriod","checkLastPeriod","timeScale","scaleTime","getMinMaxDates","setTimeAxis","maxTicks","timeTicks","timeAxis","axisBottom","tickValues","select","play","currentPeriodIndex","nextPeriodIndex","pause","onPlayPause","rectTotalHeight","role","getPeriodRects","isCurrent","onPeriodClick","clickedPeriod","isTimeline","ThematicLayerContext","newValues","updatedPopup","bubbleMap","periodData","poleOfInaccessibility","labelTemplate","initialPeriod","periodName","PeriodName","Timeline","onPeriodChange","TRACKED_ENTITY_TRACKED_ENTITY_TYPE_ATTRIBUTES_QUERY","TRACKED_ENTITY_PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY","TRACKED_ENTITIES_QUERY","activeDataSource","displayAttributes","errorTrackedEntity","dataTrackedEntity","refetchTrackedEntity","fetchingTrackedEntity","_resultTrackedEntity$","resultTrackedEntity","fetchTEandOU","updatedAt","attribute","geomToCentroid","totals","accum","point","getCentroid","makeRelationshipGeometry","fromGeom","toGeom","trackedEntityCoordinateFieldName","loadDisplayAttributes","secondaryConfig","onEventClickSecondary","relationshipConfig","makeRelationshipLayer","TrackedEntityPopup","trackedEntityTypeAttributes","trackedEntityAttributes","attr1","attr2","displayInList","EventLayer","TrackedEntityLayer","FacilityLayer","ThematicLayer","filterChange","applyFilter","clearAggregations","showValue","lng","lat","isUpdate","projection","noValue","preload","hasAggregations","onLoad","getAggregations","addAggregationValues","setAggregations","EarthEnginePopup","GeoJsonLayer","Map","setMapObject","_map","scrollZoom","onMapReady","getChildContext","componentDidMount","latitude","longitude","zoom","node","control","controlTypes","addControl","layerBounds","setView","fitWorld","layersSorting","setMouseMoveEnabled","closeCoordinatePopup","overlays","Overlay","MapItem","setMapControls","fitLayerBounds","sync","unsync","SplitView","interpretationModalOpen","showFullscreen","setShowFullscreen","setMap","containerRef","append","getControlContainer","layerDispatchActions","splitViewLayer","interpretation","loadedMapViews","MapView","MapPosition","mapgl","setBearing","setPitch","MapContainer","DownloadMapInfo","NorthArrow","DownloadButton","InterpretationsToggle","interpretationsEnabled","interpretationsOpen","AnalyticsInterpretationsAndDetailsToggler","isShowing","initLayerSources","newArray","DEFAULT_SYSTEM_SETTINGS","SYSTEM_SETTINGS","MAPS_ADMIN_AUTHORITY_IDS","MAPS_APP_NAMESPACE","MAPS_APP_KEY_MANAGED_LAYER_SOURCES","resourceLayerSourcesVisibility","useManagedLayerSourcesStore","managedLayerSources","layerSources","showLayerSource","mutate","hideLayerSource","layerSource","isAdded","onShow","onHide","large","LayerSource","authorities","has","openDelay","closeDelay","onLayerSelect","anchorEl","onManaging","isSplitViewMap","defaultLayerSources","includeEarthEngineLayers","managedEarthEngineLayers","splice","maxWidth","LayerList","ManageLayerSourcesButton","AddLayerButton","isManaging","setIsManaging","buttonRef","toggleDialog","IconAddCircle24","AddLayerPopover","ManageLayerSourcesModal","Toolbar","HoverMenuBar","FileMenu","DrawerContent","FeatureProfile","featureProfile","IconCross24","onDrill","isDisconnected","isOffline","useDhis2ConnectionStatus","anchorPosition","setAnchorPosition","mapLeft","mapTop","IconArrowUp16","IconArrowDown16","LayerLoader","LayerLegend","toggleOpen","LegendLayer","defaultBounds","forwardRef","getResizeFunction","didViewsChange","oldViews","newView","oldView","j","oldItemIds","newItemIds","setMapIsLoaded","mapIsLoaded","contextMenu","setContextMenu","onLayerLoad","layersToLoad","CssReset","CssVariables","spacers","theme","ContextMenu","direction","onResponsesReceived","setMapViews","relativePeriodLayers","relativeLayer","openInterpretationModal","initialFocus","closeInterpretationModal","renderCount","interpretationsUnitRef","_state$interpretation","onReplyIconClick","AboutAOUnit","renderId","InterpretationsUnit","onInterpretationClick","InterpretationModal","onInterpretationUpdate","refresh","isVisualizationLoading","pluginComponent","InterpretationMap","isMapLoaded","InterpretationsPanel","setYear","prevYear","usePrevious","prevPeriodIndex","changeYear","change","newYear","newPeriod","ORGUNIT_PROFILE_QUERY","profile","defaultPeriod","PeriodSelect","formatter","coordFormat","address","closedDate","comment","contactPerson","email","imageId","levelName","openingDate","phoneNumber","alt","IconDimensionOrgUnit16","ListItem","OrgUnitProfile","OrgUnitInfo","OrgUnitData","interpretationsRenderCount","detailsPanelOpen","viewOrgUnitProfile","viewFeatureProfile","getContent","Interpretations","ORG_UNITS_QUERY","roots","userDataViewFallback","order","OrgUnitsCtx","setOrgUnits","onComplete","organisationUnitLevels","useOrgUnits","setProgram","setStyleDataItem","setOptionStyle","setBooleanStyle","setClassification","setColorScale","setEventStatus","setEventPointRadius","setEventPointColor","setOrganisationUnitGroupSet","setOrganisationUnitColor","setPeriodType","keepPeriod","setStartDate","setEndDate","setBackupPeriodsDates","backupPeriodsDates","setAggregationType","setBufferRadius","setRadiusLow","setLegendSet","AssociatedGeometrySelect","geometryField","layerEdit","setAttributes","fetchedAttributes","OrgUnitSelectMode","setOrgUnitMode","NO_OTHER_SELECTS","hideUserOrgUnits","hideAssociatedGeometry","hideSelectMode","hideLevelSelect","hideGroupSelect","setOrgUnitItems","levelNumber","translateOrgUnitLevels","hasOrgUnits","numOtherSelects","OrgUnitDimension","onSelect","setBand","setPeriods","yearPeriods","setYearPeriods","byYear","years","onYearChange","isCancelled","defaultRadius","hasOrgUnitField","showBuffer","isDisabled","isInteger","styleIsValid","setStyle","steps","setSteps","onStepsChange","newPalette","warningText","minSteps","maxSteps","ColorScaleSelect","isClassStyle","StyleSelect","BufferRadius","LegendPreview","setEarthEnginePeriod","validateLayer","onLayerValidation","noBandSelected","hasMultipleAggregations","_orgUnits$levels","defaultLevel","isValid","Tabs","Tab","BandSelect","AggregationSelect","OrgUnitSelect","StyleTab","DEFAULT_CALENDAR","DEFAULT_PLACEHOLDER","NEPALI_CALENDAR_NAME","GREGORIAN_CALENDAR_NAME","dhis2CalendarsMap","iso8601","ethiopian","gregorian","julian","thai","NEPALI_CALENDAR_DATA","getDefaultDatesInCalendar","calendar","calendarName","eraYear","getNowInCalendar","formatDateString","padStart","replaceAt","replacement","cleanReplacement","formatDateInput","prevDate","caret","finalHyphen","numericDate","formattedYear","getCurrentYearInCalendar","maxMonth","getMaxMonthsInYear","Temporal","monthsInYear","formattedMonth","maxDaysInMonth","getMaxDaysInMonth","daysInMonth","formattedDay","formatDateOnBlur","PROGRAM_STAGE_DATA_ELEMENTS_QUERY","elements","PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY","useProgramTrackedEntityAttributes","programId","programAttributes","setProgramAttributes","setTrackedEntityType","_data$trackedEntityAt","_data$trackedEntityAt2","_data$trackedEntityAt3","attr","useEventDataItems","programStageId","dataElements","dataElementsLoading","setDataElements","_data$elements","_data$elements$progra","useProgramStageDataElements","attributesLoading","eventDataItems","isFallback","IconDelete24","optionSetId","setOptionSet","useOptionSet","operators","getOperators","splitFilter","newOperator","OptionSetSelect","newValue","TextField","DatePicker","newFilter","internalError","internalErrorText","selectValue","FilterSelect","RemoveFilter","FilterRow","changeFilter","removeFilter","basic","classRange","colorScaleName","LEGEND_SETS_QUERY","sets","legendSetError","legendSets","mapType","RadioGroup","isBubble","Radio","ColorPicker","marginTop","isPredefined","LegendTypeSelect","SingleColor","LegendSetSelect","Classification","addOptionStyle","styledOptionSet","setWarning","styledOptions","OptionStyle","NumericLegendStyle","BooleanStyle","OptionSetStyle","ITEM_NONE","DataItemStyle","startEndDates","onSelectStartDate","onSelectEndDate","formattedStartDate","formattedEndDate","startDateChangeCount","setStartDateChangeCount","endDateChangeCount","setEndDateChangeCount","startCaretPosition","setStartCaretPosition","endCaretPosition","setEndCaretPosition","onDateChange","_document$querySelect","stateMap","inputSelector","dispatchAction","setDateChangeCount","setCaret","selectionStart","dateInfo","newCaretPosition","isInsertingNewChar","insertedCharIsDigit","insertedCharIsHyphen","atHyphenPosition","atEarlyHyphenPosition","nextCharIsAutoHyphen","nextCharIsManualHyphen","formattedDate","prevCount","setSelectionRange","backdropElement","querySelectorAll","click","Field","CalendarInput","onDateSelect","calendarDateString","clearable","IconArrowRight16","allProgramsItem","PROGRAMS_QUERY","programs","trackedEntityPrograms","PROGRAM_STAGES_QUERY","stages","onProgramStagesLoad","programStages","EventDialog","keyAnalysisRelativePeriod","periodError","validate","hasDate","setErrorState","setProgramStage","setEventCoordinateField","setEventClustering","programError","programStageError","orgUnitsError","ProgramSelect","ProgramStageSelect","CoordinateField","EventStatusSelect","RelativePeriodSelect","StartEndDate","IconErrorFilled24","FilterGroup","ImageSelect","StyleByDataItem","ORG_UNIT_GROUP_SETS_QUERY","allowNone","onGroupSetChange","organisationUnitGroupSets","imagePath","defaultStyleType","setGroups","groupsWithColors","GroupStyle","GroupSetSelect","GroupSetStyle","setLabels","setLabelTemplate","template","setLabelFontColor","setLabelFontSize","setLabelFontWeight","setLabelFontStyle","includeDisplayOption","LabelDisplayOptions","FontStyle","QUERY","configuration","ORGUNITS_TAB","setOrgUnitsError","facilityOrgUnitLevel","facilityOrgUnitGroupSet","Labels","StyleByGroupSet","FILL","STROKE_COLOR","STROKE_WIDTH","POINT_SIZE","FILL_TRANSPARENT","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","allowTransparent","FeatureStyle","OrgUnitDialog","CALCULATIONS_QUERY","calculations","DATA_ELEMENT_GROUPS_QUERY","dataElementGroup","dataElementGroups","DATA_ELEMENT_OPERAND_QUERY","operands","groupId","dataElementOperands","DATA_ELEMENTS_QUERY","domainType","excludeValueTypes","PROGRAM_DATA_ELEMENTS_QUERY","programDataElements","refetchProgramDataElements","DATA_SETS_QUERY","dataSetId","dataSets","DIMENSION_ITEMS_QUERY","foundValues","dimensionTypes","DIMENSIONS_QUERY","_data$dimensions","dropdownRef","findDimension","DimensionsPanel","onDimensionClick","selectedIds","DimensionSelect","selectedDimension","DimensionItemsSelect","addDimensionFilter","removeDimensionFilter","changeDimensionFilter","DimensionFilterRow","INDICATOR_GROUPS_QUERY","indicatorGroup","indicatorGroups","INDICATORS_QUERY","indicators","IconPeriodDisplaySingle","clipPath","rx","IconPeriodDisplaySplit","mask","IconPeriodDisplayTimeline","prevPeriods","totalPeriods","hasOtherLayers","hasOtherTimelineLayers","hasTooManyPeriods","getHelpText","number","strategy","strategies","CustomRadioLabel","PROGRAM_INDICATORS_QUERY","programIndicators","eventDataTypes","hasEventData","onCheck","isValidRadius","setRadiusHigh","setThematicMapType","ThematicDialog","setValueType","getRelativePeriodsName","setRenderingStrategy","setDataItem","setDataElementGroup","setIndicatorGroup","setNoDataColor","setOperand","indicatorGroupError","indicatorError","dataElementGroupError","dataElementError","dataSetError","calculationError","eventDataItemError","programIndicatorError","ValueTypeSelect","IndicatorGroupSelect","IndicatorSelect","DataElementGroupSelect","TotalsDetailsSelect","DataElementOperandSelect","DataElementSelect","DataSetsSelect","EventDataItemSelect","ProgramIndicatorSelect","CalculationSelect","AggregationTypeSelect","CompletedOnlyCheckbox","SegmentedControl","PeriodDimension","selectedPeriods","excludedPeriodTypes","RenderingStrategy","DimensionFilter","ThematicMapTypeSelect","RadiusSelect","NoDataColor","keepColumns","trackedEntityTypes","relationshipTypes","marginLeft","TrackedEntityDialog","showRelationshipsChecked","defaultDates","setProgramStatus","setFollowUpStatus","setTrackedEntityRelationshipType","setRelatedPointColor","setRelatedPointRadius","setRelationshipLineColor","trackedEntityTypeError","TrackedEntityTypeSelect","allPrograms","ProgramStatusSelect","marginBottom","TrackedEntityRelationshipTypeSelect","PeriodTypeSelect","layerDialogs","setTrackedEntityRelationshipOutsideProgram","FacilityDialog","EarthEngineDialog","GeoJsonDialog","cancelLayer","isValidLayer","setIsValidLayer","LayerDialog","onValidateLayer","closeContextMenu","openCoordinatePopup","showEarthEngineValue","IconLocation16","clearAnalyticalObject","OpenAsMapDialog","_allDataDimensions$","allDataDimensions","firstDimensionId","selectedDataDims","setSelectedDataDims","addLayersToMap","selectedDimensions","lastDataId","numItems","ModalContainer","analyticalObject","LayerEdit","setInterpretation","dataStatisticsMutation","favorite","eventType","validateMapServiceKeys","keysStatus","keyName","getBasemapList","externalMapLayers","validationFn","externalBasemaps","layerTypes","basemapList","_keysStatus$type","lastLocation","useLoadMap","previousParamsRef","basemapInvalidAlertRef","loadMap","hashLocation","defaultId","onMissing","basemapId","getBasemapOrFallback","mapForStore","unlisten","_lastLocation","_lastLocation2","_lastLocation3","popStateEvent","PopStateEvent","dispatchEvent","App","headerHeight","setProperty","useLoadDataStore","layerSourceDefaultIds","dataStore","layerSourcesVisibility","setInterpretationsRenderCount","downloadModeOpen","DownloadModeMenu","AppMenu","DetailsPanel","_action$payload","newState","mapContextMenu","combineReducers","composeEnhancer","compose","store","createStore","reducer","applyMiddleware","thunk","Cypress","appQueries","systemInfo","getDefaultLayerSources","externalLayerSources","providerDataTransformation","username","settings","keyUiLocale","dateFormat","namespace","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","hi_INTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","neTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","AppWrapper","replaceLegacyUrl","queryParams","base","interpretationid","interpretationQueryParams","replaceState","currentAnalyticalObject","ReduxProvider","DataStoreProvider","WindowDimensionsProvider","OrgUnitsProvider","elevations"],"sourceRoot":""}