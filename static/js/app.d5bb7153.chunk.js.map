{"version":3,"file":"static/js/app.d5bb7153.chunk.js","mappings":"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","sources":["D2App/constants/actionTypes.js","D2App/components/WindowDimensionsProvider.js","D2App/actions/feature.js","D2App/actions/orgUnits.js","D2App/util/time.js","D2App/constants/layers.js","D2App/constants/colorbrewer.js","D2App/util/colors.js","D2App/components/datatable/FilterInput.js","D2App/actions/dataFilters.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/DataTable.module.css?76ec","D2App/constants/valueTypes.js","D2App/components/map/mapLocale.js","D2App/components/map/MapApi.js","D2App/util/api.js","D2App/util/earthEngine.js","D2App/util/filter.js","D2App/util/geojson.js","D2App/util/numbers.js","D2App/util/uid.js","D2App/components/datatable/useTableData.js","D2App/components/datatable/DataTable.js","D2App/components/datatable/ErrorBoundary.js","D2App/components/core/icons.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/ResizeHandle.module.css?98ea","D2App/components/datatable/ResizeHandle.js","webpack://@dhis2/app-shell/./src/D2App/components/datatable/styles/BottomPanel.module.css?541b","D2App/components/datatable/BottomPanel.js","D2App/constants/layout.js","D2App/actions/dataTable.js","D2App/util/history.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadMenubar.module.css?9b80","D2App/components/download/DownloadMenubar.js","D2App/actions/download.js","D2App/constants/dimension.js","D2App/constants/periods.js","D2App/util/periods.js","D2App/util/analytics.js","D2App/util/event.js","D2App/util/dataDownload.js","D2App/util/export-image.js","D2App/util/helpers.js","D2App/actions/map.js","D2App/constants/alerts.js","D2App/util/favorites.js","D2App/components/app/FileMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Drawer.module.css?1c01","D2App/components/core/Drawer.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Checkbox.module.css?81c6","D2App/components/core/Checkbox.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorButton.module.css?efe6","D2App/components/core/ColorButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorPicker.module.css?df28","D2App/components/core/ColorPicker.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorScale.module.css?53ca","D2App/components/core/ColorScale.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ColorScaleSelect.module.css?0787","D2App/components/core/ColorScaleSelect.js","D2App/components/core/ConditionalWrapper.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/DatePicker.module.css?517f","D2App/components/core/DatePicker.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/InputField.module.css?d4da","D2App/components/core/NumberField.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/FontStyle.module.css?47fc","D2App/components/core/FontStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/Help.module.css?8a16","D2App/components/core/Help.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/IconButton.module.css?a7af","D2App/components/core/IconButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ImageSelect.module.css?360c","D2App/components/core/ImageSelect.js","D2App/components/core/LabelDisplayOptions.js","D2App/components/core/MenuButton.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/RadioGroup.module.css?3082","D2App/components/core/RadioGroup.js","D2App/components/core/Radio.js","D2App/components/core/SelectField.js","D2App/components/core/Tabs.js","D2App/components/core/Tab.js","D2App/components/core/TextField.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapLoadingMask.module.css?0ea5","D2App/components/map/MapLoadingMask.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/LegendLayers.module.css?0b90","D2App/components/download/LegendLayers.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/NorthArrowPosition.module.css?6e31","D2App/components/download/NorthArrowPosition.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadSettings.module.css?71ed","D2App/components/download/DownloadSettings.js","D2App/actions/layers.js","D2App/constants/basemaps.js","D2App/reducers/map.js","D2App/hooks/useBasemapConfig.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/SortableHandle.module.css?6182","D2App/components/layers/SortableHandle.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayerCard.module.css?d7f6","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/LayerToolbarMore.module.css?6050","D2App/components/layers/toolbar/LayerToolbarMoreMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/OpacitySlider.module.css?88b0","D2App/components/layers/toolbar/OpacitySlider.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/toolbar/styles/LayerToolbar.module.css?9f24","D2App/components/layers/toolbar/LayerToolbar.js","D2App/components/layers/LayerCard.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/basemaps/styles/Basemap.module.css?c36c","D2App/components/layers/basemaps/Basemap.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/basemaps/styles/BasemapList.module.css?e0bc","D2App/components/layers/basemaps/BasemapList.js","D2App/components/layers/basemaps/BasemapCard.js","D2App/actions/basemap.js","D2App/actions/ui.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayersToggle.module.css?991c","D2App/components/layers/LayersToggle.js","D2App/util/classify.js","D2App/util/legend.js","D2App/util/analyticalObject.js","D2App/components/legend/Bubble.js","D2App/components/legend/Bubbles.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/LegendItemRange.module.css?8d27","D2App/components/legend/LegendItemRange.js","D2App/components/legend/LineSymbol.js","D2App/components/legend/PolygonSymbol.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/LegendItem.module.css?1f16","D2App/components/legend/LegendItem.js","webpack://@dhis2/app-shell/./src/D2App/components/legend/styles/Legend.module.css?d865","D2App/components/legend/Legend.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/download/styles/DataDownloadDialogActions.module.css?ee09","D2App/components/layers/download/DataDownloadDialogActions.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/download/styles/DataDownloadDialog.module.css?4f52","D2App/components/layers/download/DataDownloadDialog.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/OverlayCard.module.css?1a36","D2App/components/layers/overlays/OverlayCard.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/styles/LayersPanel.module.css?3122","D2App/components/layers/LayersPanel.js","D2App/constants/earthEngine.js","D2App/util/map.js","D2App/constants/colors.js","D2App/util/orgUnits.js","D2App/loaders/earthEngineLoader.js","D2App/components/loaders/EarthEngineLoader.js","D2App/constants/eventStatuses.js","D2App/util/styleByDataItem.js","D2App/loaders/eventLoader.js","D2App/components/loaders/EventLoader.js","D2App/util/getMigratedMapConfig.js","D2App/util/requests.js","D2App/util/external.js","D2App/loaders/externalLoader.js","D2App/components/loaders/ExternalLoader.js","D2App/loaders/facilityLoader.js","D2App/components/loaders/FacilityLoader.js","D2App/loaders/geoJsonUrlLoader.js","D2App/components/loaders/GeoJsonUrlLoader.js","D2App/loaders/orgUnitLoader.js","D2App/components/loaders/OrgUnitLoader.js","D2App/loaders/thematicLoader.js","D2App/components/loaders/ThematicLoader.js","D2App/constants/programStatuses.js","D2App/util/teiRelationshipsParser.js","D2App/loaders/trackedEntityLoader.js","D2App/components/loaders/TrackedEntityLoader.js","D2App/components/loaders/LayerLoader.js","D2App/components/loaders/LayersLoader.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadLegend.module.css?2308","D2App/components/download/DownloadLegend.js","D2App/components/map/layers/BasemapLayer.js","D2App/components/download/OverviewMapOutline.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/OverviewMap.module.css?f9e8","D2App/components/download/OverviewMap.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadMapInfo.module.css?83f5","D2App/components/download/DownloadMapInfo.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/NorthArrow.module.css?d773","D2App/components/download/NorthArrow.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapName.module.css?be08","D2App/components/map/MapName.js","D2App/constants/mapControls.js","D2App/util/mapControls.js","webpack://@dhis2/app-shell/./src/D2App/components/map/layers/styles/Alert.module.css?d875","D2App/components/map/layers/Alert.js","D2App/components/map/layers/Layer.js","D2App/constants/aggregationTypes.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitButton.module.css?f02c","D2App/components/orgunits/OrgUnitButton.js","D2App/components/map/Popup.js","webpack://@dhis2/app-shell/./src/D2App/components/map/layers/earthEngine/styles/EarthEnginePopup.module.css?f052","D2App/components/map/layers/earthEngine/EarthEnginePopup.js","D2App/components/map/layers/earthEngine/EarthEngineLayer.js","D2App/components/map/layers/EventPopup.js","D2App/components/map/layers/EventLayer.js","D2App/util/labels.js","D2App/components/map/layers/FacilityLayer.js","D2App/components/map/layers/GeoJsonLayer.js","D2App/components/map/layers/OrgUnitLayer.js","D2App/util/timeTicks.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/Timeline.module.css?1955","D2App/components/periods/Timeline.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/PeriodName.module.css?a0ba","D2App/components/map/PeriodName.js","D2App/components/map/layers/ThematicLayer.js","D2App/components/BaseUrlShim.js","D2App/components/map/layers/TrackedEntityLayer.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/Map.module.css?c12a","D2App/components/map/Map.js","D2App/components/map/layers/ExternalLayer.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapItem.module.css?1a5e","D2App/components/map/MapItem.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/SplitView.module.css?a876","D2App/components/map/SplitView.js","D2App/components/map/MapView.js","D2App/components/map/MapContainer.js","D2App/actions/aggregations.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/MapPosition.module.css?ca45","D2App/components/map/MapPosition.js","webpack://@dhis2/app-shell/./src/D2App/components/download/styles/DownloadButton.module.css?956b","D2App/components/download/DownloadButton.js","D2App/components/interpretations/InterpretationsToggle.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/Layer.module.css?8e48","D2App/components/layers/overlays/Layer.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/LayerList.module.css?b312","D2App/components/layers/overlays/LayerList.js","D2App/components/layers/overlays/AddLayerPopover.js","webpack://@dhis2/app-shell/./src/D2App/components/layers/overlays/styles/AddLayerButton.module.css?d3e0","D2App/components/layers/overlays/AddLayerButton.js","D2App/components/app/AppMenu.js","webpack://@dhis2/app-shell/./src/D2App/components/feature/styles/FeatureProfile.module.css?6b21","D2App/components/feature/FeatureProfile.js","webpack://@dhis2/app-shell/./src/D2App/components/plugin/styles/ContextMenu.module.css?44df","D2App/components/plugin/ContextMenu.js","D2App/components/plugin/LegendLayer.js","D2App/components/plugin/Legend.js","webpack://@dhis2/app-shell/./src/D2App/components/plugin/styles/Map.module.css?b338","D2App/components/plugin/Map.js","webpack://@dhis2/app-shell/./src/D2App/components/interpretations/styles/InterpretationMap.module.css?a079","D2App/components/interpretations/InterpretationMap.js","D2App/components/interpretations/InterpretationsPanel.js","D2App/components/interpretations/Interpretations.js","webpack://@dhis2/app-shell/./src/D2App/components/periods/styles/PeriodSelect.module.css?36c8","D2App/components/periods/PeriodSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitData.module.css?43a7","D2App/components/orgunits/OrgUnitData.js","webpack://@dhis2/app-shell/./src/D2App/components/core/styles/ListItem.module.css?ab97","D2App/components/core/ListItem.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitInfo.module.css?de1e","D2App/components/orgunits/OrgUnitInfo.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitProfile.module.css?26b3","D2App/components/orgunits/OrgUnitProfile.js","webpack://@dhis2/app-shell/./src/D2App/components/app/styles/DetailsPanel.module.css?1c00","D2App/components/app/DetailsPanel.js","D2App/components/alerts/AlertStack.js","D2App/util/alerts.js","D2App/components/OrgUnitsProvider.js","D2App/actions/layerEdit.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/AssociatedGeometrySelect.module.css?87db","D2App/components/orgunits/AssociatedGeometrySelect.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitSelectMode.module.css?b186","D2App/components/orgunits/OrgUnitSelectMode.js","webpack://@dhis2/app-shell/./src/D2App/components/orgunits/styles/OrgUnitSelect.module.css?7aff","D2App/components/orgunits/OrgUnitSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/styles/LayerDialog.module.css?f8dd","D2App/components/edit/earthEngine/AggregationSelect.js","D2App/components/edit/earthEngine/BandSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/earthEngine/styles/PeriodSelect.module.css?e39b","D2App/components/edit/earthEngine/PeriodSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/shared/styles/BufferRadius.module.css?1852","D2App/components/edit/shared/BufferRadius.js","D2App/components/edit/earthEngine/LegendPreview.js","D2App/components/edit/earthEngine/StyleSelect.js","D2App/components/edit/earthEngine/StyleTab.js","D2App/components/edit/earthEngine/EarthEngineDialog.js","D2App/hooks/useProgramStageDataElements.js","D2App/hooks/useProgramTrackedEntityAttributes.js","D2App/hooks/useEventDataItems.js","D2App/hooks/usePrevious.js","D2App/components/dataItem/CoordinateField.js","webpack://@dhis2/app-shell/./src/D2App/components/filter/styles/RemoveFilter.module.css?e69f","D2App/components/filter/RemoveFilter.js","D2App/hooks/useOptionSet.js","D2App/components/optionSet/OptionSetSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterSelect.module.css?2d11","D2App/components/dataItem/filter/FilterSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterRow.module.css?a2c3","D2App/components/dataItem/filter/FilterRow.js","webpack://@dhis2/app-shell/./src/D2App/components/dataItem/filter/styles/FilterGroup.module.css?bedd","D2App/components/dataItem/filter/FilterGroup.js","webpack://@dhis2/app-shell/./src/D2App/components/classification/styles/Classification.module.css?2828","D2App/components/classification/Classification.js","D2App/components/classification/LegendSetSelect.js","D2App/components/classification/LegendTypeSelect.js","D2App/components/classification/SingleColor.js","D2App/components/classification/NumericLegendStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/optionSet/styles/OptionStyle.module.css?2060","D2App/components/optionSet/OptionStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/optionSet/styles/OptionSetStyle.module.css?352a","D2App/components/optionSet/OptionSetStyle.js","D2App/components/dataItem/BooleanStyle.js","D2App/components/dataItem/DataItemStyle.js","D2App/components/dataItem/StyleByDataItem.js","D2App/components/periods/RelativePeriodSelect.js","D2App/components/periods/StartEndDates.js","D2App/components/program/ProgramSelect.js","D2App/components/program/ProgramStageSelect.js","D2App/components/edit/event/EventStatusSelect.js","D2App/components/edit/event/EventDialog.js","D2App/components/groupSet/GroupSetSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/groupSet/styles/GroupStyle.module.css?34d9","D2App/components/groupSet/GroupStyle.js","webpack://@dhis2/app-shell/./src/D2App/components/groupSet/styles/GroupSetStyle.module.css?90af","D2App/components/groupSet/GroupSetStyle.js","D2App/components/groupSet/StyleByGroupSet.js","D2App/components/edit/shared/Labels.js","D2App/components/edit/FacilityDialog.js","D2App/components/edit/shared/FeatureStyle.js","D2App/components/edit/geoJson/GeoJsonDialog.js","D2App/components/edit/orgUnit/OrgUnitDialog.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/styles/LayerEdit.module.css?c2be","D2App/components/dataElement/DataElementGroupSelect.js","D2App/components/dataElement/DataElementOperandSelect.js","D2App/components/dataElement/DataElementSelect.js","D2App/components/dataElement/TotalsDetailsSelect.js","D2App/components/dataItem/EventDataItemSelect.js","D2App/components/dataSets/DataSetsSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionItemsSelect.module.css?a59e","D2App/components/dimensions/DimensionItemsSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionSelect.module.css?5588","D2App/components/dimensions/DimensionSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionFilterRow.module.css?2c67","D2App/components/dimensions/DimensionFilterRow.js","webpack://@dhis2/app-shell/./src/D2App/components/dimensions/styles/DimensionFilter.module.css?2d92","D2App/components/dimensions/DimensionFilter.js","D2App/components/indicator/IndicatorGroupSelect.js","D2App/components/indicator/IndicatorSelect.js","D2App/components/periods/PeriodTypeSelect.js","D2App/components/periods/RenderingStrategy.js","D2App/components/program/ProgramIndicatorSelect.js","D2App/components/edit/thematic/AggregationTypeSelect.js","D2App/components/edit/thematic/CompletedOnlyCheckbox.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/thematic/styles/NoDataColor.module.css?98db","D2App/components/edit/thematic/NoDataColor.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/thematic/styles/RadiusSelect.module.css?28ca","D2App/components/edit/thematic/RadiusSelect.js","D2App/components/edit/thematic/ThematicMapTypeSelect.js","D2App/components/edit/thematic/ValueTypeSelect.js","D2App/components/edit/thematic/ThematicDialog.js","D2App/components/trackedEntity/TrackedEntityTypeSelect.js","webpack://@dhis2/app-shell/./src/D2App/components/edit/trackedEntity/styles/PeriodTypeSelect.module.css?206f","D2App/components/edit/trackedEntity/PeriodTypeSelect.js","D2App/components/edit/trackedEntity/ProgramStatusSelect.js","D2App/components/edit/trackedEntity/TrackedEntityRelationshipTypeSelect.js","D2App/components/edit/trackedEntity/TrackedEntityDialog.js","D2App/components/edit/LayerEdit.js","webpack://@dhis2/app-shell/./src/D2App/components/map/styles/ContextMenu.module.css?92cf","D2App/components/map/ContextMenu.js","D2App/actions/analyticalObject.js","webpack://@dhis2/app-shell/./src/D2App/components/openAs/styles/OpenAsMapDialog.module.css?f069","D2App/components/openAs/OpenAsMapDialog.js","D2App/components/app/ModalContainer.js","webpack://@dhis2/app-shell/./src/D2App/components/app/styles/App.module.css?085e","D2App/actions/interpretations.js","D2App/util/apiDataStatistics.js","D2App/components/app/useLoadMap.js","D2App/components/app/App.js","D2App/reducers/aggregations.js","D2App/reducers/analyticalObject.js","D2App/reducers/contextMenu.js","D2App/reducers/dataTable.js","D2App/reducers/download.js","D2App/reducers/feature.js","D2App/reducers/featureProfile.js","D2App/reducers/interpretation.js","D2App/reducers/layerEdit.js","D2App/reducers/orgUnitProfile.js","D2App/reducers/ui.js","D2App/reducers/index.js","D2App/store/index.js","D2App/constants/settings.js","D2App/util/app.js","D2App/util/getDefaultLayerTypes.js","D2App/locales/index.js","D2App/AppWrapper.js"],"sourcesContent":["/* MAP */\nexport const MAP_NEW = 'MAP_NEW';\nexport const MAP_SET = 'MAP_SET';\nexport const MAP_PROPS_SET = 'MAP_PROPS_SET';\nexport const MAP_CONTEXT_MENU_OPEN = 'MAP_CONTEXT_MENU_OPEN';\nexport const MAP_CONTEXT_MENU_CLOSE = 'MAP_CONTEXT_MENU_CLOSE';\nexport const MAP_COORDINATE_OPEN = 'MAP_COORDINATE_OPEN';\nexport const MAP_COORDINATE_CLOSE = 'MAP_COORDINATE_CLOSE';\nexport const MAP_EARTH_ENGINE_VALUE_SHOW = 'MAP_EARTH_ENGINE_VALUE_SHOW';\nexport const MAP_ALERTS_CLEAR = 'MAP_ALERT_CLEAR';\n\n/* BASEMAP */\nexport const BASEMAP_SELECTED = 'BASEMAP_SELECTED';\nexport const BASEMAP_TOGGLE_EXPAND = 'BASEMAP_TOGGLE_EXPAND';\nexport const BASEMAP_TOGGLE_VISIBILITY = 'BASEMAP_TOGGLE_VISIBILITY';\nexport const BASEMAP_CHANGE_OPACITY = 'BASEMAP_CHANGE_OPACITY';\n\n/* LAYER */\nexport const LAYER_ADD = 'LAYER_ADD';\nexport const LAYER_REMOVE = 'LAYER_REMOVE';\nexport const LAYER_CHANGE_OPACITY = 'LAYER_CHANGE_OPACITY';\nexport const LAYER_EDIT = 'LAYER_EDIT';\nexport const LAYER_EDIT_SUCCESS = 'LAYER_EDIT_SUCCESS';\nexport const LAYER_CANCEL = 'LAYER_CANCEL';\nexport const LAYER_LOAD = 'LAYER_LOAD';\nexport const LAYER_LOAD_SUCCESS = 'LAYER_LOAD_SUCCESS';\nexport const LAYER_LOADING_SET = 'LAYER_LOADING_SET';\nexport const LAYER_SORT = 'LAYER_SORT';\nexport const LAYER_TOGGLE_EXPAND = 'LAYER_TOGGLE_EXPAND';\nexport const LAYER_TOGGLE_VISIBILITY = 'LAYER_TOGGLE_VISIBILITY';\nexport const LAYER_UPDATE = 'LAYER_UPDATE';\nexport const LAYER_DRILL = 'LAYER_DRILL';\n\n/* DATA TABLE */\nexport const DATA_TABLE_CLOSE = 'DATA_TABLE_CLOSE';\nexport const DATA_TABLE_TOGGLE = 'DATA_TABLE_TOGGLE';\nexport const DATA_TABLE_RESIZE = 'DATA_TABLE_RESIZE';\n\n/* DATA FILTER */\nexport const DATA_FILTER_SET = 'DATA_FILTER_SET';\nexport const DATA_FILTER_CLEAR = 'DATA_FILTER_CLEAR';\n\n/* ORGANISATION UNITS */\nexport const ORGANISATION_UNIT_PROFILE_SET = 'ORGANISATION_UNIT_PROFILE_SET';\nexport const ORGANISATION_UNIT_PROFILE_CLOSE = 'ORGANISATION_UNIT_PROFILE_CLOSE';\n\n/* USER INTERFACE */\nexport const LAYERS_PANEL_OPEN = 'LAYERS_PANEL_OPEN';\nexport const LAYERS_PANEL_CLOSE = 'LAYERS_PANEL_CLOSE';\nexport const INTERPRETATIONS_PANEL_OPEN = 'INTERPRETATIONS_PANEL_OPEN';\nexport const INTERPRETATIONS_PANEL_CLOSE = 'INTERPRETATIONS_PANEL_CLOSE';\n\n/* LAYER EDIT */\nexport const LAYER_EDIT_PROGRAM_SET = 'LAYER_EDIT_PROGRAM_SET';\nexport const LAYER_EDIT_PROGRAM_STAGE_SET = 'LAYER_EDIT_PROGRAM_STAGE_SET';\nexport const LAYER_EDIT_PROGRAM_INDICATOR_SET = 'LAYER_EDIT_PROGRAM_INDICATOR_SET';\nexport const LAYER_EDIT_PERIOD_NAME_SET = 'LAYER_EDIT_PERIOD_NAME_SET';\nexport const LAYER_EDIT_PERIOD_SET = 'LAYER_EDIT_PERIOD_SET';\nexport const LAYER_EDIT_START_DATE_SET = 'LAYER_EDIT_START_DATE_SET';\nexport const LAYER_EDIT_END_DATE_SET = 'LAYER_EDIT_END_DATE_SET';\nexport const LAYER_EDIT_FILTER_ADD = 'LAYER_EDIT_FILTER_ADD';\nexport const LAYER_EDIT_FILTER_REMOVE = 'LAYER_EDIT_FILTER_REMOVE';\nexport const LAYER_EDIT_FILTER_CHANGE = 'LAYER_EDIT_FILTER_CHANGE';\nexport const LAYER_EDIT_DIMENSION_FILTER_ADD = 'LAYER_EDIT_DIMENSION_FILTER_ADD';\nexport const LAYER_EDIT_DIMENSION_FILTER_REMOVE = 'LAYER_EDIT_DIMENSION_FILTER_REMOVE';\nexport const LAYER_EDIT_DIMENSION_FILTER_CHANGE = 'LAYER_EDIT_DIMENSION_FILTER_CHANGE';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_SET';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET';\nexport const LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET = 'LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET';\nexport const LAYER_EDIT_THEMATIC_MAP_TYPE_SET = 'LAYER_EDIT_THEMATIC_MAP_TYPE_SET';\nexport const LAYER_EDIT_CLASSIFICATION_SET = 'LAYER_EDIT_CLASSIFICATION_SET';\nexport const LAYER_EDIT_COLOR_SCALE_SET = 'LAYER_EDIT_COLOR_SCALE_SET';\nexport const LAYER_EDIT_DATA_ITEM_SET = 'LAYER_EDIT_DATA_ITEM_SET';\nexport const LAYER_EDIT_EVENT_STATUS_SET = 'LAYER_EDIT_EVENT_STATUS_SET';\nexport const LAYER_EDIT_EVENT_COORDINATE_FIELD_SET = 'LAYER_EDIT_EVENT_COORDINATE_FIELD_SET';\nexport const LAYER_EDIT_EVENT_CLUSTERING_SET = 'LAYER_EDIT_EVENT_CLUSTERING_SET';\nexport const LAYER_EDIT_EVENT_POINT_RADIUS_SET = 'LAYER_EDIT_EVENT_POINT_RADIUS_SET';\nexport const LAYER_EDIT_EVENT_POINT_COLOR_SET = 'LAYER_EDIT_EVENT_POINT_COLOR_SET';\nexport const LAYER_EDIT_RELATED_POINT_COLOR_SET = 'LAYER_EDIT_RELATED_POINT_COLOR_SET';\nexport const LAYER_EDIT_RELATED_POINT_RADIUS_SET = 'LAYER_EDIT_RELATED_POINT_RADIUS_SET';\nexport const LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET = 'LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET';\nexport const LAYER_EDIT_ORGANISATION_UNITS_SET = 'LAYER_EDIT_ORGANISATION_UNITS_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET = 'LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_MODE_SET = 'LAYER_EDIT_ORGANISATION_UNIT_MODE_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET = 'LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET = 'LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET';\nexport const LAYER_EDIT_VALUE_TYPE_SET = 'LAYER_EDIT_VALUE_TYPE_SET';\nexport const LAYER_EDIT_INDICATOR_GROUP_SET = 'LAYER_EDIT_INDICATOR_GROUP_SET';\nexport const LAYER_EDIT_PERIOD_TYPE_SET = 'LAYER_EDIT_PERIOD_TYPE_SET';\nexport const LAYER_EDIT_RENDERING_STRATEGY_SET = 'LAYER_EDIT_RENDERING_STRATEGY_SET';\nexport const LAYER_EDIT_AGGREGATION_TYPE_SET = 'LAYER_EDIT_AGGREGATION_TYPE_SET';\nexport const LAYER_EDIT_DATA_ELEMENT_GROUP_SET = 'LAYER_EDIT_DATA_ELEMENT_GROUP_SET';\nexport const LAYER_EDIT_PARAMS_SET = 'LAYER_EDIT_PARAMS_SET';\nexport const LAYER_EDIT_FILTER_SET = 'LAYER_EDIT_FILTER_SET';\nexport const LAYER_EDIT_LABELS_SET = 'LAYER_EDIT_LABELS_SET';\nexport const LAYER_EDIT_LABEL_TEMPLATE = 'LAYER_EDIT_LABEL_TEMPLATE';\nexport const LAYER_EDIT_LABEL_FONT_SIZE_SET = 'LAYER_EDIT_LABEL_FONT_SIZE_SET';\nexport const LAYER_EDIT_LABEL_FONT_WEIGHT_SET = 'LAYER_EDIT_LABEL_FONT_WEIGHT_SET';\nexport const LAYER_EDIT_LABEL_FONT_STYLE_SET = 'LAYER_EDIT_LABEL_FONT_STYLE_SET';\nexport const LAYER_EDIT_LABEL_FONT_COLOR_SET = 'LAYER_EDIT_LABEL_FONT_COLOR_SET';\nexport const LAYER_EDIT_BUFFER_RADIUS_SET = 'LAYER_EDIT_BUFFER_RADIUS_SET';\nexport const LAYER_EDIT_RADIUS_LOW_SET = 'LAYER_EDIT_RADIUS_LOW_SET';\nexport const LAYER_EDIT_RADIUS_HIGH_SET = 'LAYER_EDIT_RADIUS_HIGH_SET';\nexport const LAYER_EDIT_LEGEND_SET_SET = 'LAYER_EDIT_LEGEND_SET_SET';\nexport const LAYER_EDIT_ORGANISATION_UNIT_PATH_SET = 'LAYER_EDIT_ORGANISATION_UNIT_PATH_SET'; // Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const LAYER_EDIT_ORGANISATION_UNIT_PATH_LOAD = 'LAYER_EDIT_ORGANISATION_UNIT_PATH_LOAD'; // Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const LAYER_EDIT_OPERAND_SET = 'OPERAND_SET'; // Data element operands (details)\nexport const LAYER_EDIT_TRACKED_ENTITY_TYPE_SET = 'LAYER_EDIT_TRACKED_ENTITY_TYPE_SET';\nexport const LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET = 'LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET';\nexport const LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET = 'LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET';\nexport const LAYER_EDIT_PROGRAM_STATUS_SET = 'LAYER_EDIT_PROGRAM_STATUS_SET';\nexport const LAYER_EDIT_FOLLOW_UP_SET = 'LAYER_EDIT_FOLLOW_UP_SET';\nexport const LAYER_EDIT_NO_DATA_COLOR_SET = 'LAYER_EDIT_NO_DATA_COLOR_SET';\nexport const LAYER_EDIT_BAND_SET = 'LAYER_EDIT_BAND_SET';\nexport const LAYER_EDIT_FEATURE_STYLE_SET = 'LAYER_EDIT_FEATURE_STYLE_SET';\nexport const LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET = 'LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET';\n\n/* PERIODS */\nexport const RELATIVE_PERIODS_SET = 'RELATIVE_PERIODS_SET';\nexport const RELATIVE_PERIODS_TRANSLATE = 'RELATIVE_PERIODS_TRANSLATE';\n\n/* INTERPRETATIONS */\nexport const INTERPRETATION_SET = 'INTERPRETATION_SET';\n\n/* DOWNLOAD (PNG) */\nexport const DOWNLOAD_MODE_OPEN = 'DOWNLOAD_MODE_OPEN';\nexport const DOWNLOAD_MODE_CLOSE = 'DOWNLOAD_MODE_CLOSE';\nexport const DOWNLOAD_CONFIG_SET = 'DOWNLOAD_CONFIG_SET';\n\n/* ANALYTICAL OBJECTS (BETWEEN APPS) */\nexport const ANALYTICAL_OBJECT_SET = 'ANALYTICAL_OBJECT_SET';\nexport const ANALYTICAL_OBJECT_CLEAR = 'ANALYTICAL_OBJECT_CLEAR';\n\n/* FEATURE */\nexport const FEATURE_HIGHLIGHT = 'FEATURE_HIGHLIGHT';\nexport const FEATURE_PROFILE_SET = 'FEATURE_PROFILE_SET';\nexport const FEATURE_PROFILE_CLOSE = 'FEATURE_PROFILE_CLOSE';\n\n/* AGGREGATIONS */\nexport const AGGREGATIONS_SET = 'AGGREGATIONS_SET';","import { debounce } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nexport const WindowDimensionsCtx = /*#__PURE__*/createContext(null);\nconst windowDims = () => ({\n  height: window.innerHeight,\n  width: window.innerWidth\n});\nconst WindowDimensionsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [dimensions, setDimensions] = useState(windowDims());\n  useEffect(() => {\n    const handleResize = debounce(150, () => {\n      setDimensions(windowDims());\n    });\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(WindowDimensionsCtx.Provider, {\n    value: dimensions\n  }, children);\n};\nWindowDimensionsProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default WindowDimensionsProvider;\nexport const useWindowDimensions = () => useContext(WindowDimensionsCtx);","import * as types from '../constants/actionTypes.js';\nexport const highlightFeature = payload => ({\n  type: types.FEATURE_HIGHLIGHT,\n  payload\n});\nexport const setFeatureProfile = payload => ({\n  type: types.FEATURE_PROFILE_SET,\n  payload\n});\nexport const closeFeatureProfile = () => ({\n  type: types.FEATURE_PROFILE_CLOSE\n});","import * as types from '../constants/actionTypes.js';\nexport const setOrgUnitProfile = id => ({\n  type: types.ORGANISATION_UNIT_PROFILE_SET,\n  payload: id\n});\nexport const closeOrgUnitProfile = () => ({\n  type: types.ORGANISATION_UNIT_PROFILE_CLOSE\n});","import i18n from '@dhis2/d2-i18n';\nconst DEFAULT_LOCALE = 'en';\n\n// BCP 47 locale format\nconst dateLocale = locale => locale && locale.includes('_') ? locale.replace('_', '-') : locale;\n\n/**\n * Converts a date string or timestamp to a date object\n * @param {String|Number|Array|Date} date\n * @returns {String}\n */\nconst toDate = date => {\n  if (Array.isArray(date)) {\n    return new Date(date[0], date[1], date[2]);\n  }\n  return new Date(date);\n};\n\n// Simple check if the date part is correctly formatted\nconst shortDateRegexp = /^\\d{4}-\\d{2}-\\d{2}$/;\n\n/**\n * Checks if the date format is valid\n * @param {String} dateString\n * @returns {String}\n */\nconst isValidDateFormat = dateString => shortDateRegexp.test(dateString.substr(0, 10));\n\n/**\n * Formats a date string, timestamp or date array into format used by DHIS2 and <input> date\n * @param {String|Number|Array|Date} date\n * @returns {String}\n */\nexport const formatDate = date => {\n  const dateObj = toDate(date);\n  const year = dateObj.getFullYear();\n  const month = ('0' + (dateObj.getMonth() + 1)).slice(-2);\n  const day = ('0' + dateObj.getDate()).slice(-2);\n  return `${year}-${month}-${day}`; // xxxx-xx-xx\n};\n\n/**\n * Simple fallback date format if Intl is not supported\n * @param {String} dateString\n * @returns {String}\n */\nconst fallbackDateFormat = dateString => dateString.substr(0, 10);\n\n/**\n * Returns true if the Internationalization API is supported\n * @returns {Boolean}\n */\nconst hasIntlSupport = typeof global.Intl !== 'undefined' && Intl.DateTimeFormat;\n\n/**\n * Formats a date string or timestamp to the default display format: 13 Aug 2018 (en locale)\n * @param {String} dateString\n * @param {String} locale\n * @param {Boolean} showYear\n * @returns {String}\n */\nexport const formatLocaleDate = function (dateString, locale) {\n  let showYear = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  return hasIntlSupport ? new Intl.DateTimeFormat(dateLocale(locale || i18n.language || DEFAULT_LOCALE), {\n    year: showYear ? 'numeric' : undefined,\n    month: 'short',\n    day: 'numeric'\n  }).format(toDate(dateString)) : fallbackDateFormat(dateString);\n};\n\n/**\n * Formats a date range\n * @param {String|Array|Number} startDate\n * @param {String|Array|Number} endDate\n * @param {String} locale\n * @param {Boolean} showYear\n * @returns {String}\n */\n//eslint-disable-next-line max-params\nexport const formatStartEndDate = (startDate, endDate, locale, showYear) => {\n  const loc = locale || i18n.language || DEFAULT_LOCALE;\n  return `${formatLocaleDate(startDate, loc, showYear)} - ${formatLocaleDate(endDate, locale, showYear)}`;\n};\n\n/**\n * @param {String} dateString\n * @returns {Array}\n */\nexport const getDateArray = dateString => {\n  const year = parseInt(dateString.substring(0, 4));\n  const month = parseInt(dateString.substring(5, 7)) - 1;\n  const day = parseInt(dateString.substring(8, 10));\n  return [year, month, day];\n};\n\n/**\n * Checks for errors for start and end date strings or timestamps\n * @param {String} startDateStr\n * @param {String} endDateStr\n * @returns {String|null}\n */\nexport const getStartEndDateError = (startDateStr, endDateStr) => {\n  if (!isValidDateFormat(startDateStr)) {\n    return i18n.t('Start date is invalid');\n  } else if (!isValidDateFormat(endDateStr)) {\n    return i18n.t('End date is invalid');\n  }\n  const startDateArr = getDateArray(startDateStr);\n  const endDateArr = getDateArray(endDateStr);\n  if (toDate(endDateArr) < toDate(startDateArr)) {\n    return i18n.t('End date cannot be earlier than start date');\n  }\n  return null;\n};\n\n/**\n * Returns the year of the date, or the current year of no date is passed\n * @param {String|Number|Array|Date} startDate\n * @returns {Number}\n */\nexport const getYear = date => toDate(date || new Date()).getFullYear();","import i18n from '@dhis2/d2-i18n';\nimport { formatDate } from '../util/time.js';\nexport const VECTOR_STYLE = 'vectorStyle';\nexport const TILE_LAYER = 'tileLayer';\nexport const WMS_LAYER = 'wmsLayer';\nexport const GOOGLE_LAYER = 'googleLayer';\nexport const BING_LAYER = 'bingLayer';\nexport const EVENT_LAYER = 'event';\nexport const THEMATIC_LAYER = 'thematic';\nexport const FACILITY_LAYER = 'facility';\nexport const BOUNDARY_LAYER = 'boundary';\nexport const ORG_UNIT_LAYER = 'orgUnit';\nexport const EXTERNAL_LAYER = 'external';\nexport const EARTH_ENGINE_LAYER = 'earthEngine';\nexport const TRACKED_ENTITY_LAYER = 'trackedEntity';\nexport const GEOJSON_LAYER = 'geoJson';\nexport const GROUP_LAYER = 'group';\nexport const GEOJSON_URL_LAYER = 'geoJsonUrl';\nexport const DOWNLOADABLE_LAYER_TYPES = [FACILITY_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EVENT_LAYER, EARTH_ENGINE_LAYER, GEOJSON_URL_LAYER];\nexport const DATA_TABLE_LAYER_TYPES = [FACILITY_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EVENT_LAYER, EARTH_ENGINE_LAYER, GEOJSON_URL_LAYER];\nexport const MAP_LAYER_POSITION_BASEMAP = 'BASEMAP';\nexport const MAP_LAYER_POSITION_OVERLAY = 'OVERLAY';\nexport const OPEN_AS_LAYER_TYPES = [THEMATIC_LAYER];\nexport const DEFAULT_START_DATE = formatDate(new Date().setFullYear(new Date().getFullYear() - 1));\nexport const DEFAULT_END_DATE = formatDate(new Date());\nexport const DEFAULT_ORG_UNIT_LEVEL = 1; // 0 is root level\n\n/* RENDERING STRATEGY */\nexport const RENDERING_STRATEGY_SINGLE = 'SINGLE';\nexport const RENDERING_STRATEGY_TIMELINE = 'TIMELINE';\nexport const RENDERING_STRATEGY_SPLIT_BY_PERIOD = 'SPLIT_BY_PERIOD';\n\n/* THEMATIC LAYER */\nexport const THEMATIC_CHOROPLETH = 'CHOROPLETH';\nexport const THEMATIC_BUBBLE = 'BUBBLE';\nexport const THEMATIC_RADIUS_LOW = 5;\nexport const THEMATIC_RADIUS_HIGH = 30;\nexport const THEMATIC_RADIUS_MIN = 0;\nexport const THEMATIC_RADIUS_MAX = 50;\nexport const THEMATIC_COLOR = '#558CC0';\nexport const THEMATIC_BUFFER = 5000;\nexport const getThematicMapTypes = () => [{\n  id: THEMATIC_CHOROPLETH,\n  name: i18n.t('Choropleth'),\n  image: 'images/choropleth.png'\n}, {\n  id: THEMATIC_BUBBLE,\n  name: i18n.t('Bubble map'),\n  image: 'images/bubble.png'\n}];\n\n/* EVENT LAYER */\nexport const EVENT_CLIENT_PAGE_SIZE = 100000;\nexport const EVENT_SERVER_CLUSTER_COUNT = 2000;\nexport const EVENT_COLOR = '#333333';\nexport const EVENT_RADIUS = 6;\nexport const EVENT_BUFFER = 100;\nexport const EVENT_COORDINATE_DEFAULT = 'psigeometry';\nexport const EVENT_COORDINATE_ENROLLMENT = 'pigeometry';\nexport const EVENT_COORDINATE_TRACKED_ENTITY = 'teigeometry';\nexport const EVENT_COORDINATE_ORG_UNIT = 'ougeometry';\nexport const EVENT_COORDINATE_CASCADING = 'cascading';\n\n/* TEI LAYER */\nexport const TEI_COLOR = '#BB0000';\nexport const TEI_RADIUS = 6;\nexport const TEI_BUFFER = 100;\nexport const TEI_RELATED_COLOR = '#000000';\nexport const TEI_RELATED_RADIUS = 3;\nexport const TEI_RELATIONSHIP_LINE_COLOR = '#0000BB';\n\n/* FACILITY LAYER */\nexport const FACILITY_BUFFER = 5000;\n\n/* ORG UNIT LAYER */\nexport const ORG_UNIT_COLOR = '#333333';\nexport const ORG_UNIT_RADIUS = 6;\nexport const ORG_UNIT_RADIUS_SMALL = 1;\n\n/* EARTH ENGINE LAYER */\nexport const EE_BUFFER = 5000;\n\n/* CLASSIFICATION */\nexport const CLASSIFICATION_PREDEFINED = 1;\nexport const CLASSIFICATION_EQUAL_INTERVALS = 2;\nexport const CLASSIFICATION_EQUAL_COUNTS = 3;\nexport const CLASSIFICATION_SINGLE_COLOR = 10;\nexport const getLegendTypes = isBubble => [{\n  id: CLASSIFICATION_EQUAL_INTERVALS,\n  name: i18n.t('Automatic color legend')\n}, {\n  id: CLASSIFICATION_PREDEFINED,\n  name: i18n.t('Predefined color legend')\n}, ...(isBubble ? [{\n  id: CLASSIFICATION_SINGLE_COLOR,\n  name: i18n.t('Single color legend')\n}] : [])];\nexport const getClassificationTypes = () => [{\n  id: CLASSIFICATION_EQUAL_INTERVALS,\n  name: i18n.t('Equal intervals')\n}, {\n  id: CLASSIFICATION_EQUAL_COUNTS,\n  name: i18n.t('Equal counts')\n}];\nexport const STYLE_TYPE_COLOR = 'COLOR';\nexport const STYLE_TYPE_SYMBOL = 'SYMBOL';\nexport const getGroupSetStyleTypes = () => [{\n  id: STYLE_TYPE_COLOR,\n  name: i18n.t('Color')\n}, {\n  id: STYLE_TYPE_SYMBOL,\n  name: i18n.t('Symbol')\n}];\n\n/* LABEL TEMPLATES */\nexport const LABEL_TEMPLATE_NAME_ONLY = '{name}';\nexport const LABEL_TEMPLATE_NAME_AND_VALUE = '{name}\\n{value}';\nexport const LABEL_TEMPLATE_VALUE_ONLY = '{value}';\n\n/* LABEL STYLES */\nexport const LABEL_FONT_SIZE = '14px';\nexport const LABEL_FONT_SIZE_MIN = 6;\nexport const LABEL_FONT_SIZE_MAX = 100;\nexport const LABEL_FONT_STYLE = 'normal';\nexport const LABEL_FONT_WEIGHT = 'normal';\nexport const LABEL_FONT_COLOR = '#333333';\nexport const NO_DATA_COLOR = '#CCCCCC';\n\n/* POINT RADIUS */\nexport const MIN_RADIUS = 1;\nexport const MAX_RADIUS = 100;\nexport const NONE = 'none';","// This product includes color specifications and designs developed by Cynthia Brewer (http://colorbrewer.org/).\n// Please see license at http://colorbrewer.org/export/LICENSE.txt\nexport default {\n  YlGn: {\n    3: ['#f7fcb9', '#addd8e', '#31a354'],\n    4: ['#ffffcc', '#c2e699', '#78c679', '#238443'],\n    5: ['#ffffcc', '#c2e699', '#78c679', '#31a354', '#006837'],\n    6: ['#ffffcc', '#d9f0a3', '#addd8e', '#78c679', '#31a354', '#006837'],\n    7: ['#ffffcc', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#005a32'],\n    8: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#005a32'],\n    9: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529']\n  },\n  YlGnBu: {\n    3: ['#edf8b1', '#7fcdbb', '#2c7fb8'],\n    4: ['#ffffcc', '#a1dab4', '#41b6c4', '#225ea8'],\n    5: ['#ffffcc', '#a1dab4', '#41b6c4', '#2c7fb8', '#253494'],\n    6: ['#ffffcc', '#c7e9b4', '#7fcdbb', '#41b6c4', '#2c7fb8', '#253494'],\n    7: ['#ffffcc', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],\n    8: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#0c2c84'],\n    9: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58']\n  },\n  GnBu: {\n    3: ['#e0f3db', '#a8ddb5', '#43a2ca'],\n    4: ['#f0f9e8', '#bae4bc', '#7bccc4', '#2b8cbe'],\n    5: ['#f0f9e8', '#bae4bc', '#7bccc4', '#43a2ca', '#0868ac'],\n    6: ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#43a2ca', '#0868ac'],\n    7: ['#f0f9e8', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],\n    8: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#08589e'],\n    9: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081']\n  },\n  BuGn: {\n    3: ['#e5f5f9', '#99d8c9', '#2ca25f'],\n    4: ['#edf8fb', '#b2e2e2', '#66c2a4', '#238b45'],\n    5: ['#edf8fb', '#b2e2e2', '#66c2a4', '#2ca25f', '#006d2c'],\n    6: ['#edf8fb', '#ccece6', '#99d8c9', '#66c2a4', '#2ca25f', '#006d2c'],\n    7: ['#edf8fb', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#005824'],\n    8: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#005824'],\n    9: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b']\n  },\n  PuBuGn: {\n    3: ['#ece2f0', '#a6bddb', '#1c9099'],\n    4: ['#f6eff7', '#bdc9e1', '#67a9cf', '#02818a'],\n    5: ['#f6eff7', '#bdc9e1', '#67a9cf', '#1c9099', '#016c59'],\n    6: ['#f6eff7', '#d0d1e6', '#a6bddb', '#67a9cf', '#1c9099', '#016c59'],\n    7: ['#f6eff7', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016450'],\n    8: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016450'],\n    9: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636']\n  },\n  PuBu: {\n    3: ['#ece7f2', '#a6bddb', '#2b8cbe'],\n    4: ['#f1eef6', '#bdc9e1', '#74a9cf', '#0570b0'],\n    5: ['#f1eef6', '#bdc9e1', '#74a9cf', '#2b8cbe', '#045a8d'],\n    6: ['#f1eef6', '#d0d1e6', '#a6bddb', '#74a9cf', '#2b8cbe', '#045a8d'],\n    7: ['#f1eef6', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#034e7b'],\n    8: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#034e7b'],\n    9: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858']\n  },\n  BuPu: {\n    3: ['#e0ecf4', '#9ebcda', '#8856a7'],\n    4: ['#edf8fb', '#b3cde3', '#8c96c6', '#88419d'],\n    5: ['#edf8fb', '#b3cde3', '#8c96c6', '#8856a7', '#810f7c'],\n    6: ['#edf8fb', '#bfd3e6', '#9ebcda', '#8c96c6', '#8856a7', '#810f7c'],\n    7: ['#edf8fb', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#6e016b'],\n    8: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#6e016b'],\n    9: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b']\n  },\n  RdPu: {\n    3: ['#fde0dd', '#fa9fb5', '#c51b8a'],\n    4: ['#feebe2', '#fbb4b9', '#f768a1', '#ae017e'],\n    5: ['#feebe2', '#fbb4b9', '#f768a1', '#c51b8a', '#7a0177'],\n    6: ['#feebe2', '#fcc5c0', '#fa9fb5', '#f768a1', '#c51b8a', '#7a0177'],\n    7: ['#feebe2', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177'],\n    8: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177'],\n    9: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a']\n  },\n  PuRd: {\n    3: ['#e7e1ef', '#c994c7', '#dd1c77'],\n    4: ['#f1eef6', '#d7b5d8', '#df65b0', '#ce1256'],\n    5: ['#f1eef6', '#d7b5d8', '#df65b0', '#dd1c77', '#980043'],\n    6: ['#f1eef6', '#d4b9da', '#c994c7', '#df65b0', '#dd1c77', '#980043'],\n    7: ['#f1eef6', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#91003f'],\n    8: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#91003f'],\n    9: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f']\n  },\n  OrRd: {\n    3: ['#fee8c8', '#fdbb84', '#e34a33'],\n    4: ['#fef0d9', '#fdcc8a', '#fc8d59', '#d7301f'],\n    5: ['#fef0d9', '#fdcc8a', '#fc8d59', '#e34a33', '#b30000'],\n    6: ['#fef0d9', '#fdd49e', '#fdbb84', '#fc8d59', '#e34a33', '#b30000'],\n    7: ['#fef0d9', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#990000'],\n    8: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#990000'],\n    9: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000']\n  },\n  YlOrRd: {\n    3: ['#ffeda0', '#feb24c', '#f03b20'],\n    4: ['#ffffb2', '#fecc5c', '#fd8d3c', '#e31a1c'],\n    5: ['#ffffb2', '#fecc5c', '#fd8d3c', '#f03b20', '#bd0026'],\n    6: ['#ffffb2', '#fed976', '#feb24c', '#fd8d3c', '#f03b20', '#bd0026'],\n    7: ['#ffffb2', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#b10026'],\n    8: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#b10026'],\n    9: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026']\n  },\n  YlOrBr: {\n    3: ['#fff7bc', '#fec44f', '#d95f0e'],\n    4: ['#ffffd4', '#fed98e', '#fe9929', '#cc4c02'],\n    5: ['#ffffd4', '#fed98e', '#fe9929', '#d95f0e', '#993404'],\n    6: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#d95f0e', '#993404'],\n    7: ['#ffffd4', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#8c2d04'],\n    8: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#8c2d04'],\n    9: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506']\n  },\n  Purples: {\n    3: ['#efedf5', '#bcbddc', '#756bb1'],\n    4: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#6a51a3'],\n    5: ['#f2f0f7', '#cbc9e2', '#9e9ac8', '#756bb1', '#54278f'],\n    6: ['#f2f0f7', '#dadaeb', '#bcbddc', '#9e9ac8', '#756bb1', '#54278f'],\n    7: ['#f2f0f7', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#4a1486'],\n    8: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#4a1486'],\n    9: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d']\n  },\n  Blues: {\n    3: ['#deebf7', '#9ecae1', '#3182bd'],\n    4: ['#eff3ff', '#bdd7e7', '#6baed6', '#2171b5'],\n    5: ['#eff3ff', '#bdd7e7', '#6baed6', '#3182bd', '#08519c'],\n    6: ['#eff3ff', '#c6dbef', '#9ecae1', '#6baed6', '#3182bd', '#08519c'],\n    7: ['#eff3ff', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#084594'],\n    8: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#084594'],\n    9: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b']\n  },\n  Greens: {\n    3: ['#e5f5e0', '#a1d99b', '#31a354'],\n    4: ['#edf8e9', '#bae4b3', '#74c476', '#238b45'],\n    5: ['#edf8e9', '#bae4b3', '#74c476', '#31a354', '#006d2c'],\n    6: ['#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#31a354', '#006d2c'],\n    7: ['#edf8e9', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32'],\n    8: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#005a32'],\n    9: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b']\n  },\n  Oranges: {\n    3: ['#fee6ce', '#fdae6b', '#e6550d'],\n    4: ['#feedde', '#fdbe85', '#fd8d3c', '#d94701'],\n    5: ['#feedde', '#fdbe85', '#fd8d3c', '#e6550d', '#a63603'],\n    6: ['#feedde', '#fdd0a2', '#fdae6b', '#fd8d3c', '#e6550d', '#a63603'],\n    7: ['#feedde', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#8c2d04'],\n    8: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#8c2d04'],\n    9: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704']\n  },\n  Reds: {\n    3: ['#fee0d2', '#fc9272', '#de2d26'],\n    4: ['#fee5d9', '#fcae91', '#fb6a4a', '#cb181d'],\n    5: ['#fee5d9', '#fcae91', '#fb6a4a', '#de2d26', '#a50f15'],\n    6: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#de2d26', '#a50f15'],\n    7: ['#fee5d9', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#99000d'],\n    8: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#99000d'],\n    9: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d']\n  },\n  Greys: {\n    3: ['#f0f0f0', '#bdbdbd', '#636363'],\n    4: ['#f7f7f7', '#cccccc', '#969696', '#525252'],\n    5: ['#f7f7f7', '#cccccc', '#969696', '#636363', '#252525'],\n    6: ['#f7f7f7', '#d9d9d9', '#bdbdbd', '#969696', '#636363', '#252525'],\n    7: ['#f7f7f7', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525'],\n    8: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525'],\n    9: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000']\n  },\n  PuOr: {\n    3: ['#f1a340', '#f7f7f7', '#998ec3'],\n    4: ['#e66101', '#fdb863', '#b2abd2', '#5e3c99'],\n    5: ['#e66101', '#fdb863', '#f7f7f7', '#b2abd2', '#5e3c99'],\n    6: ['#b35806', '#f1a340', '#fee0b6', '#d8daeb', '#998ec3', '#542788'],\n    7: ['#b35806', '#f1a340', '#fee0b6', '#f7f7f7', '#d8daeb', '#998ec3', '#542788'],\n    8: ['#b35806', '#e08214', '#fdb863', '#fee0b6', '#d8daeb', '#b2abd2', '#8073ac', '#542788'],\n    9: ['#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788'],\n    10: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n    11: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b']\n  },\n  BrBG: {\n    3: ['#d8b365', '#f5f5f5', '#5ab4ac'],\n    4: ['#a6611a', '#dfc27d', '#80cdc1', '#018571'],\n    5: ['#a6611a', '#dfc27d', '#f5f5f5', '#80cdc1', '#018571'],\n    6: ['#8c510a', '#d8b365', '#f6e8c3', '#c7eae5', '#5ab4ac', '#01665e'],\n    7: ['#8c510a', '#d8b365', '#f6e8c3', '#f5f5f5', '#c7eae5', '#5ab4ac', '#01665e'],\n    8: ['#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#c7eae5', '#80cdc1', '#35978f', '#01665e'],\n    9: ['#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e'],\n    10: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    11: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30']\n  },\n  PRGn: {\n    3: ['#af8dc3', '#f7f7f7', '#7fbf7b'],\n    4: ['#7b3294', '#c2a5cf', '#a6dba0', '#008837'],\n    5: ['#7b3294', '#c2a5cf', '#f7f7f7', '#a6dba0', '#008837'],\n    6: ['#762a83', '#af8dc3', '#e7d4e8', '#d9f0d3', '#7fbf7b', '#1b7837'],\n    7: ['#762a83', '#af8dc3', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#7fbf7b', '#1b7837'],\n    8: ['#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837'],\n    9: ['#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837'],\n    10: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    11: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b']\n  },\n  PiYG: {\n    3: ['#e9a3c9', '#f7f7f7', '#a1d76a'],\n    4: ['#d01c8b', '#f1b6da', '#b8e186', '#4dac26'],\n    5: ['#d01c8b', '#f1b6da', '#f7f7f7', '#b8e186', '#4dac26'],\n    6: ['#c51b7d', '#e9a3c9', '#fde0ef', '#e6f5d0', '#a1d76a', '#4d9221'],\n    7: ['#c51b7d', '#e9a3c9', '#fde0ef', '#f7f7f7', '#e6f5d0', '#a1d76a', '#4d9221'],\n    8: ['#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221'],\n    9: ['#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221'],\n    10: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    11: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419']\n  },\n  RdBu: {\n    3: ['#ef8a62', '#f7f7f7', '#67a9cf'],\n    4: ['#ca0020', '#f4a582', '#92c5de', '#0571b0'],\n    5: ['#ca0020', '#f4a582', '#f7f7f7', '#92c5de', '#0571b0'],\n    6: ['#b2182b', '#ef8a62', '#fddbc7', '#d1e5f0', '#67a9cf', '#2166ac'],\n    7: ['#b2182b', '#ef8a62', '#fddbc7', '#f7f7f7', '#d1e5f0', '#67a9cf', '#2166ac'],\n    8: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac'],\n    9: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac'],\n    10: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    11: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061']\n  },\n  RdGy: {\n    3: ['#ef8a62', '#ffffff', '#999999'],\n    4: ['#ca0020', '#f4a582', '#bababa', '#404040'],\n    5: ['#ca0020', '#f4a582', '#ffffff', '#bababa', '#404040'],\n    6: ['#b2182b', '#ef8a62', '#fddbc7', '#e0e0e0', '#999999', '#4d4d4d'],\n    7: ['#b2182b', '#ef8a62', '#fddbc7', '#ffffff', '#e0e0e0', '#999999', '#4d4d4d'],\n    8: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#e0e0e0', '#bababa', '#878787', '#4d4d4d'],\n    9: ['#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d'],\n    10: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    11: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a']\n  },\n  RdYlBu: {\n    3: ['#fc8d59', '#ffffbf', '#91bfdb'],\n    4: ['#d7191c', '#fdae61', '#abd9e9', '#2c7bb6'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#abd9e9', '#2c7bb6'],\n    6: ['#d73027', '#fc8d59', '#fee090', '#e0f3f8', '#91bfdb', '#4575b4'],\n    7: ['#d73027', '#fc8d59', '#fee090', '#ffffbf', '#e0f3f8', '#91bfdb', '#4575b4'],\n    8: ['#d73027', '#f46d43', '#fdae61', '#fee090', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4'],\n    9: ['#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4'],\n    10: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    11: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695']\n  },\n  Spectral: {\n    3: ['#fc8d59', '#ffffbf', '#99d594'],\n    4: ['#d7191c', '#fdae61', '#abdda4', '#2b83ba'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#abdda4', '#2b83ba'],\n    6: ['#d53e4f', '#fc8d59', '#fee08b', '#e6f598', '#99d594', '#3288bd'],\n    7: ['#d53e4f', '#fc8d59', '#fee08b', '#ffffbf', '#e6f598', '#99d594', '#3288bd'],\n    8: ['#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd'],\n    9: ['#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd'],\n    10: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    11: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2']\n  },\n  RdYlGn: {\n    3: ['#fc8d59', '#ffffbf', '#91cf60'],\n    4: ['#d7191c', '#fdae61', '#a6d96a', '#1a9641'],\n    5: ['#d7191c', '#fdae61', '#ffffbf', '#a6d96a', '#1a9641'],\n    6: ['#d73027', '#fc8d59', '#fee08b', '#d9ef8b', '#91cf60', '#1a9850'],\n    7: ['#d73027', '#fc8d59', '#fee08b', '#ffffbf', '#d9ef8b', '#91cf60', '#1a9850'],\n    8: ['#d73027', '#f46d43', '#fdae61', '#fee08b', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850'],\n    9: ['#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850'],\n    10: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    11: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837']\n  },\n  Accent: {\n    3: ['#7fc97f', '#beaed4', '#fdc086'],\n    4: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99'],\n    5: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0'],\n    6: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f'],\n    7: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17'],\n    8: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666']\n  },\n  Dark2: {\n    3: ['#1b9e77', '#d95f02', '#7570b3'],\n    4: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a'],\n    5: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e'],\n    6: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02'],\n    7: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d'],\n    8: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666']\n  },\n  Paired: {\n    3: ['#a6cee3', '#1f78b4', '#b2df8a'],\n    4: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c'],\n    5: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99'],\n    6: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c'],\n    7: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f'],\n    8: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00'],\n    9: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6'],\n    10: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a'],\n    11: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99'],\n    12: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928']\n  },\n  Pastel1: {\n    3: ['#fbb4ae', '#b3cde3', '#ccebc5'],\n    4: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4'],\n    5: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6'],\n    6: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc'],\n    7: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd'],\n    8: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec'],\n    9: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n  },\n  Pastel2: {\n    3: ['#b3e2cd', '#fdcdac', '#cbd5e8'],\n    4: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4'],\n    5: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9'],\n    6: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae'],\n    7: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc'],\n    8: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc']\n  },\n  Set1: {\n    3: ['#e41a1c', '#377eb8', '#4daf4a'],\n    4: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3'],\n    5: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00'],\n    6: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33'],\n    7: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628'],\n    8: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf'],\n    9: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999']\n  },\n  Set2: {\n    3: ['#66c2a5', '#fc8d62', '#8da0cb'],\n    4: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3'],\n    5: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854'],\n    6: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f'],\n    7: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494'],\n    8: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3']\n  },\n  Set3: {\n    3: ['#8dd3c7', '#ffffb3', '#bebada'],\n    4: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072'],\n    5: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3'],\n    6: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462'],\n    7: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69'],\n    8: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5'],\n    9: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9'],\n    10: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd'],\n    11: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5'],\n    12: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f']\n  },\n  YlOrBr_reverse: {\n    3: ['#d95f0e', '#fec44f', '#fff7bc'],\n    4: ['#cc4c02', '#fe9929', '#fed98e', '#ffffd4'],\n    5: ['#993404', '#d95f0e', '#fe9929', '#fed98e', '#ffffd4'],\n    6: ['#993404', '#d95f0e', '#fe9929', '#fec44f', '#fee391', '#ffffd4'],\n    7: ['#8c2d04', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#ffffd4'],\n    8: ['#8c2d04', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#fff7bc', '#ffffe5'],\n    9: ['#662506', '#993404', '#cc4c02', '#ec7014', '#fe9929', '#fec44f', '#fee391', '#fff7bc', '#ffffe5']\n  },\n  Reds_reverse: {\n    3: ['#de2d26', '#fc9272', '#fee0d2'],\n    4: ['#cb181d', '#fb6a4a', '#fcae91', '#fee5d9'],\n    5: ['#a50f15', '#de2d26', '#fb6a4a', '#fcae91', '#fee5d9'],\n    6: ['#a50f15', '#de2d26', '#fb6a4a', '#fc9272', '#fcbba1', '#fee5d9'],\n    7: ['#99000d', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee5d9'],\n    8: ['#99000d', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee0d2', '#fff5f0'],\n    9: ['#67000d', '#a50f15', '#cb181d', '#ef3b2c', '#fb6a4a', '#fc9272', '#fcbba1', '#fee0d2', '#fff5f0']\n  },\n  YlGn_reverse: {\n    3: ['#31a354', '#addd8e', '#f7fcb9'],\n    4: ['#238443', '#78c679', '#c2e699', '#ffffcc'],\n    5: ['#006837', '#31a354', '#78c679', '#c2e699', '#ffffcc'],\n    6: ['#006837', '#31a354', '#78c679', '#addd8e', '#d9f0a3', '#ffffcc'],\n    7: ['#005a32', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#ffffcc'],\n    8: ['#005a32', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#f7fcb9', '#ffffe5'],\n    9: ['#004529', '#006837', '#238443', '#41ab5d', '#78c679', '#addd8e', '#d9f0a3', '#f7fcb9', '#ffffe5']\n  },\n  Greens_reverse: {\n    3: ['#31a354', '#a1d99b', '#e5f5e0'],\n    4: ['#238b45', '#74c476', '#bae4b3', '#edf8e9'],\n    5: ['#006d2c', '#31a354', '#74c476', '#bae4b3', '#edf8e9'],\n    6: ['#006d2c', '#31a354', '#74c476', '#a1d99b', '#c7e9c0', '#edf8e9'],\n    7: ['#005a32', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#edf8e9'],\n    8: ['#005a32', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#e5f5e0', '#f7fcf5'],\n    9: ['#00441b', '#006d2c', '#238b45', '#41ab5d', '#74c476', '#a1d99b', '#c7e9c0', '#e5f5e0', '#f7fcf5']\n  },\n  Blues_reverse: {\n    3: ['#3182bd', '#9ecae1', '#deebf7'],\n    4: ['#2171b5', '#6baed6', '#bdd7e7', '#eff3ff'],\n    5: ['#08519c', '#3182bd', '#6baed6', '#bdd7e7', '#eff3ff'],\n    6: ['#08519c', '#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#eff3ff'],\n    7: ['#084594', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#eff3ff'],\n    8: ['#084594', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#deebf7', '#f7fbff'],\n    9: ['#08306b', '#08519c', '#2171b5', '#4292c6', '#6baed6', '#9ecae1', '#c6dbef', '#deebf7', '#f7fbff']\n  },\n  BuPu_reverse: {\n    3: ['#8856a7', '#9ebcda', '#e0ecf4'],\n    4: ['#88419d', '#8c96c6', '#b3cde3', '#edf8fb'],\n    5: ['#810f7c', '#8856a7', '#8c96c6', '#b3cde3', '#edf8fb'],\n    6: ['#810f7c', '#8856a7', '#8c96c6', '#9ebcda', '#bfd3e6', '#edf8fb'],\n    7: ['#6e016b', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#edf8fb'],\n    8: ['#6e016b', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#e0ecf4', '#f7fcfd'],\n    9: ['#4d004b', '#810f7c', '#88419d', '#8c6bb1', '#8c96c6', '#9ebcda', '#bfd3e6', '#e0ecf4', '#f7fcfd']\n  },\n  RdPu_reverse: {\n    3: ['#c51b8a', '#fa9fb5', '#fde0dd'],\n    4: ['#ae017e', '#f768a1', '#fbb4b9', '#feebe2'],\n    5: ['#7a0177', '#c51b8a', '#f768a1', '#fbb4b9', '#feebe2'],\n    6: ['#7a0177', '#c51b8a', '#f768a1', '#fa9fb5', '#fcc5c0', '#feebe2'],\n    7: ['#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#feebe2'],\n    8: ['#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#fde0dd', '#fff7f3'],\n    9: ['#49006a', '#7a0177', '#ae017e', '#dd3497', '#f768a1', '#fa9fb5', '#fcc5c0', '#fde0dd', '#fff7f3']\n  },\n  PuRd_reverse: {\n    3: ['#dd1c77', '#c994c7', '#e7e1ef'],\n    4: ['#ce1256', '#df65b0', '#d7b5d8', '#f1eef6'],\n    5: ['#980043', '#dd1c77', '#df65b0', '#d7b5d8', '#f1eef6'],\n    6: ['#980043', '#dd1c77', '#df65b0', '#c994c7', '#d4b9da', '#f1eef6'],\n    7: ['#91003f', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#f1eef6'],\n    8: ['#91003f', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#e7e1ef', '#f7f4f9'],\n    9: ['#67001f', '#980043', '#ce1256', '#e7298a', '#df65b0', '#c994c7', '#d4b9da', '#e7e1ef', '#f7f4f9']\n  },\n  Greys_reverse: {\n    3: ['#636363', '#bdbdbd', '#f0f0f0'],\n    4: ['#525252', '#969696', '#cccccc', '#f7f7f7'],\n    5: ['#252525', '#636363', '#969696', '#cccccc', '#f7f7f7'],\n    6: ['#252525', '#636363', '#969696', '#bdbdbd', '#d9d9d9', '#f7f7f7'],\n    7: ['#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f7f7f7'],\n    8: ['#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f0f0f0', '#ffffff'],\n    9: ['#000000', '#252525', '#525252', '#737373', '#969696', '#bdbdbd', '#d9d9d9', '#f0f0f0', '#ffffff']\n  }\n};","import { hcl } from 'd3-color';\nimport { isString } from 'lodash/fp';\nimport colorbrewer from '../constants/colorbrewer.js';\n\n// Allowed color scales from ColorBrewer for EE (needs to have at least 9 classes)\nexport const colorScales = ['YlOrBr', 'Reds', 'YlGn', 'Greens', 'Blues', 'BuPu', 'RdPu', 'PuRd', 'Greys', 'YlOrBr_reverse', 'Reds_reverse', 'YlGn_reverse', 'Greens_reverse', 'Blues_reverse', 'BuPu_reverse', 'RdPu_reverse', 'PuRd_reverse', 'Greys_reverse', 'PuOr', 'BrBG', 'PRGn', 'PiYG', 'RdBu', 'RdGy', 'RdYlBu', 'Spectral', 'RdYlGn', 'Paired', 'Pastel1', 'Set1', 'Set3'];\n\n// Returns a color brewer scale for a number of classes\nexport const getColorPalette = (scale, classes) => {\n  return colorbrewer[scale][classes].join(',');\n};\n\n// Returns color scale name for a palette\nexport const getColorScale = palette => {\n  const classes = palette.split(',').length;\n  return colorScales.find(name => colorbrewer[name][classes].join(',') === palette);\n};\nexport const defaultColorScaleName = 'YlOrBr';\nexport const defaultClasses = 5;\nexport const defaultColorScale = getColorPalette(defaultColorScaleName, defaultClasses);\n\n// Correct colors not adhering to the css standard (add missing #)\nexport const cssColor = color => {\n  if (!isString(color)) {\n    return color;\n  } else if (color === '##normal') {\n    // ##normal is used in old map favorites\n    return null; // Will apply default color\n  }\n\n  return (/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(color) ? '#' : '') + color;\n};\n\n// Returns an unique color (first from an array, then random but still unique)\nexport const getUniqueColor = defaultColors => {\n  const colors = [...defaultColors];\n  function randomColor() {\n    const color = '#000000'.replace(/0/g, () => (~~(Math.random() * 16)).toString(16));\n\n    // Recursive until color is unique\n    if (colors.includes(color)) {\n      return randomColor();\n    }\n    colors.push(color);\n    return color;\n  }\n  return index => colors[index] || randomColor();\n};\n\n// Returns true if a color is dark\nexport const isDarkColor = color => hcl(color).l < 70;\n\n// Returns constrasting color\nexport const getContrastColor = color => isDarkColor(color) ? '#fff' : '#000';","import i18n from '@dhis2/d2-i18n';\nimport { Input } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setDataFilter, clearDataFilter } from '../../actions/dataFilters.js';\nconst FilterInput = _ref => {\n  let {\n    type,\n    dataKey,\n    name\n  } = _ref;\n  const dispatch = useDispatch();\n  const dataTable = useSelector(state => state.dataTable);\n  const map = useSelector(state => state.map);\n  const overlay = dataTable && map.mapViews.filter(layer => layer.id === dataTable)[0];\n  let layerId;\n  let filters;\n  if (overlay) {\n    layerId = overlay.id;\n    filters = overlay.dataFilters || {};\n  }\n  const filterValue = filters[dataKey] || '';\n  const onChange = _ref2 => {\n    let {\n      value\n    } = _ref2;\n    return value !== '' ? dispatch(setDataFilter(layerId, dataKey, value)) : dispatch(clearDataFilter(layerId, dataKey, value));\n  };\n  return /*#__PURE__*/React.createElement(Input, {\n    dataTest: `data-table-column-filter-input-${name}`,\n    dense: true,\n    placeholder: type === 'number' ? '2,>3&<8' : i18n.t('Search'),\n    value: filterValue,\n    onChange: onChange\n  });\n};\nFilterInput.propTypes = {\n  dataKey: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired\n};\nexport default FilterInput;","import * as types from '../constants/actionTypes.js';\nexport const setDataFilter = (layerId, fieldId, filter) => ({\n  type: types.DATA_FILTER_SET,\n  layerId,\n  fieldId,\n  filter\n});\nexport const clearDataFilter = (layerId, fieldId) => ({\n  type: types.DATA_FILTER_CLEAR,\n  layerId,\n  fieldId\n});","// extracted by mini-css-extract-plugin\nexport default {\"dataTable\":\"DataTable_dataTable__+C-oU\",\"dataCell\":\"DataTable_dataCell__BA8wh\",\"lightText\":\"DataTable_lightText__0kiW+\",\"columnHeader\":\"DataTable_columnHeader__MR-rW\",\"noResults\":\"DataTable_noResults__ywZKR\",\"noSupport\":\"DataTable_noSupport__ljTk-\"};","// Valid value types:\n// https://docs.dhis2.org/master/en/user/html/manage_data_element.html\n// https://play.dhis2.org/demo/api/schemas/dataElement\n\n// Number values types used for style by data item\nexport const numberValueTypes = ['AGE', 'INTEGER', 'INTEGER_NEGATIVE', 'INTEGER_POSITIVE', 'INTEGER_ZERO_OR_POSITIVE', 'NUMBER', 'PERCENTAGE', 'UNIT_INTERVAL'];\n\n// Text value types\nexport const textValueTypes = ['EMAIL', 'LETTER', 'LONG_TEXT', 'PHONE_NUMBER', 'TEXT', 'USERNAME'];\n\n// Boolean value types\nexport const booleanValueTypes = ['BOOLEAN', 'TRUE_ONLY'];","import i18n from '@dhis2/d2-i18n';\nconst getMapLocale = () => ({\n  acres: i18n.t('acres'),\n  Area: i18n.t('Area'),\n  Cancel: i18n.t('Cancel'),\n  'Center map on area': i18n.t('Center map on area'),\n  'Center map on line': i18n.t('Center map on line'),\n  'Click the next position': i18n.t('Click the next position'),\n  'Click where you want to start the measurement': i18n.t('Click where you want to start the measurement'),\n  Delete: i18n.t('Delete'),\n  Distance: i18n.t('Distance'),\n  'Enter fullscreen': i18n.t('Enter fullscreen'),\n  'Exit fullscreen': i18n.t('Exit fullscreen'),\n  'Finish measurement': i18n.t('Finish measurement'),\n  ha: i18n.t('ha'),\n  km: i18n.t('km'),\n  'Measure distances and areas': i18n.t('Measure distances and areas'),\n  mi: i18n.t('mi'),\n  Perimeter: i18n.t('Perimeter'),\n  'Reset bearing to north': i18n.t('Reset bearing to north'),\n  'Search for place or address': i18n.t('Search for place or address'),\n  'Zoom in': i18n.t('Zoom in'),\n  'Zoom out': i18n.t('Zoom out'),\n  'Zoom to content': i18n.t('Zoom to content')\n});\nexport default getMapLocale;","import MapApi, { layerTypes, controlTypes, loadEarthEngineWorker, poleOfInaccessibility } from '@dhis2/maps-gl';\nimport getMapLocale from './mapLocale.js';\n\n// Returns a new map instance\nconst map = options => {\n  const glyphs = `${options.baseUrl}/dhis-web-maps/fonts/{fontstack}/{range}.pbf`;\n  const div = document.createElement('div');\n  div.className = 'dhis2-map';\n  div.style.width = '100%';\n  div.style.height = '100%';\n  return new MapApi(div, {\n    ...options,\n    locale: getMapLocale(),\n    glyphs\n  });\n};\nexport { layerTypes, controlTypes, loadEarthEngineWorker, poleOfInaccessibility };\nexport default map;","import { getInstance as getD2 } from 'd2';\nimport { isString, isObject } from 'lodash/fp';\n\n// The api/configuration/xx endpoints returns an empty body if the config is not set\n// This is a replacement for response.json() which gives error if body is empty\n// https://stackoverflow.com/a/51320025\nconst getJsonResponse = async response => {\n  const string = await response.text();\n  const json = string === '' ? undefined : JSON.parse(string);\n  return json;\n};\nexport const apiFetchWithBaseUrl = async _ref => {\n  let {\n    url,\n    method,\n    body,\n    baseUrl\n  } = _ref;\n  const options = {\n    headers: {\n      'Content-Type': 'application/json' // Default API response\n    },\n\n    credentials: 'include'\n  };\n  if (method && body) {\n    options.method = method;\n    if (isString(body)) {\n      options.headers['Content-Type'] = 'text/html';\n      options.body = body;\n    } else if (isObject(body)) {\n      options.body = JSON.stringify(body);\n    }\n  }\n\n  // TODO: Better error handling\n  return fetch(encodeURI(baseUrl + url), options).then(response => ['POST', 'PUT', 'PATCH'].includes(method) ? response : getJsonResponse(response)).catch(error => console.log('Error: ', error));\n};\nexport const apiFetch = async (url, method, body) => {\n  const d2 = await getD2();\n  const options = {\n    headers: {\n      'Content-Type': 'application/json' // Default API response\n    }\n  };\n\n  options.credentials = 'include';\n  if (method && body) {\n    options.method = method;\n    if (isString(body)) {\n      options.headers['Content-Type'] = 'text/html';\n      options.body = body;\n    } else if (isObject(body)) {\n      options.body = JSON.stringify(body);\n    }\n  }\n  const baseUrl = d2.Api.getApi().baseUrl;\n\n  // TODO: Better error handling\n  return fetch(encodeURI(baseUrl + url), options).then(response => ['POST', 'PUT', 'PATCH'].includes(method) ? response : getJsonResponse(response)).catch(error => console.log('Error: ', error));\n};","import i18n from '@dhis2/d2-i18n';\nimport { loadEarthEngineWorker } from '../components/map/MapApi.js';\nimport { apiFetch } from './api.js';\nimport { formatStartEndDate } from './time.js';\nexport const classAggregation = ['percentage', 'hectares', 'acres'];\nexport const hasClasses = type => classAggregation.includes(type);\nexport const getStartEndDate = data => formatStartEndDate(data['system:time_start'], data['system:time_end'],\n// - 7200001, // Minus 2 hrs to end the day before\nnull, false);\nexport const getPeriodFromFilter = filter => {\n  if (!Array.isArray(filter) || !filter.length) {\n    return null;\n  }\n  const {\n    id,\n    name,\n    year,\n    arguments: args\n  } = filter[0];\n  return {\n    id: id || args[1],\n    name,\n    year\n  };\n};\n\n// Returns period name from filter\nexport const getPeriodNameFromFilter = filter => {\n  const period = getPeriodFromFilter(filter);\n  if (!period) {\n    return null;\n  }\n  const {\n    name,\n    year\n  } = period;\n  const showYear = year && String(year) !== name;\n  return `${name}${showYear ? ` ${year}` : ''}`;\n};\n\n// Returns auth token for EE API as a promise\n/* eslint-disable no-async-promise-executor */\nexport const getAuthToken = () => new Promise(async (resolve, reject) => {\n  const token = await apiFetch('/tokens/google').catch(() => reject(new Error(i18n.t('Cannot get authorization token for Google Earth Engine.'))));\n  if (token && token.status === 'ERROR') {\n    reject(new Error(i18n.t('This layer requires a Google Earth Engine account. Check the DHIS2 documentation for more information.')));\n  }\n  resolve({\n    token_type: 'Bearer',\n    ...token\n  });\n});\n\n/* eslint-enable no-async-promise-executor */\n\nlet workerPromise;\n\n// Load EE worker and set token\nconst getWorkerInstance = async () => {\n  workerPromise = workerPromise || (async () => {\n    const EarthEngineWorker = await loadEarthEngineWorker(getAuthToken);\n    return await new EarthEngineWorker();\n  })();\n  return workerPromise;\n};\nexport const getPeriods = async (eeId, periodType) => {\n  const getPeriod = _ref => {\n    let {\n      id,\n      properties\n    } = _ref;\n    const year = new Date(properties['system:time_start']).getFullYear();\n    const name = periodType === 'Yearly' ? String(year) : getStartEndDate(properties);\n\n    // Remove when old population should not be supported\n    if (eeId === 'WorldPop/POP') {\n      return {\n        id: name,\n        name,\n        year\n      };\n    }\n    return {\n      id,\n      name,\n      year\n    };\n  };\n  const eeWorker = await getWorkerInstance();\n  const {\n    features\n  } = await eeWorker.getPeriods(eeId);\n  return features.map(getPeriod);\n};\nexport const defaultFilters = _ref2 => {\n  let {\n    id,\n    name,\n    year\n  } = _ref2;\n  return [{\n    type: 'eq',\n    arguments: ['system:index', String(id)],\n    name,\n    year\n  }];\n};","// Filters an array of object with a set of filters\nexport const filterData = (data, filters) => {\n  if (!filters) {\n    return data;\n  }\n  let filteredData = [...data];\n  Object.keys(filters).forEach(field => {\n    // Loop through all filters\n    const filter = filters[field];\n    filteredData = filteredData.filter(d => {\n      // Loop through all data items\n      const props = d.properties || d; // GeoJSON or plain object\n      const value = props[field];\n      return typeof value === 'number' ? numericFilter(value, filter) : stringFilter(value, filter);\n    });\n  });\n  return filteredData;\n};\n\n// Simple check if string contains another string\nexport const stringFilter = (string, filter) => {\n  return ('' + string).toLowerCase().includes(filter.toLowerCase());\n};\n\n// Numeric filter supporting AND, OR, GREATER THAN, LESS THAN or equal number\nexport const numericFilter = (value, filter) => {\n  // TODO: Syntax error handling\n  return filter.split(',').some(orFilter => {\n    // OR filter\n    return orFilter.split('&').every(filter => isTrueFilter(value, filter)); // AND filter\n  });\n};\n\n// Returns true if the filter is true\nconst isTrueFilter = (value, filter) => {\n  if (filter.includes('>')) {\n    // GREATER THAN\n    return value >= Number(filter.split('>')[1]);\n  }\n  if (filter.includes('<')) {\n    // LESS THAN\n    return value <= Number(filter.split('<')[1]);\n  }\n  return value === Number(filter); // Equal number\n};","import findIndex from 'lodash/findIndex';\nexport const EVENT_ID_FIELD = 'psi';\n\n// TODO: Remove name mapping logic, use server params DataIDScheme / OuputIDScheme instead\n/* eslint-disable max-params */\nexport const createEventFeature = (headers, names, options, event, id, getGeometry) => {\n  const geometry = getGeometry(event);\n  const properties = event.reduce((props, value, i) => {\n    const header = headers[i];\n    let option;\n    if (header.optionSet) {\n      option = options.find(option => option.code === value);\n    }\n    return {\n      id,\n      type: geometry === null || geometry === void 0 ? void 0 : geometry.type,\n      ...props,\n      [names[header.name] || header.name]: option ? option.name : value\n    };\n  }, {});\n  return {\n    type: 'Feature',\n    id,\n    properties,\n    geometry\n  };\n};\nexport const buildEventGeometryGetter = headers => {\n  const geomCol = findIndex(headers, h => h.name === 'geometry');\n  return event => JSON.parse(event[geomCol]);\n};\nexport const createEventFeatures = function (response) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const names = {\n    ...response.headers.reduce((names, header) => ({\n      ...names,\n      [header.name]: header.column\n    }), {}),\n    ...config.columnNames // TODO: Check if columnNames is still needed\n  };\n\n  const idColName = config.idCol || EVENT_ID_FIELD;\n  const idCol = findIndex(response.headers, h => h.name === idColName);\n  const getGeometry = buildEventGeometryGetter(response.headers, config && config.eventCoordinateField);\n  const options = Object.values(response.metaData.items);\n  const data = response.rows.map(row => createEventFeature(response.headers, config.outputIdScheme !== 'ID' ? names : {}, options, row, row[idCol], getGeometry));\n\n  // Sort to draw polygons before points\n  data.sort(feature => feature.geometry.type === 'Polygon' ? -1 : 0);\n  return {\n    data,\n    names\n  };\n};\n\n// Include column for data element used for styling (if not already used in filter)\nexport const addStyleDataItem = (dataItems, styleDataItem) => styleDataItem && !dataItems.find(item => item.dimension === styleDataItem.id) ? [...dataItems, {\n  dimension: styleDataItem.id,\n  name: styleDataItem.name\n}] : [...dataItems];\nexport const getBounds = bbox => {\n  if (!bbox) {\n    return null;\n  }\n  const extent = bbox.match(/([-\\d.]+)/g);\n  return [[extent[0], extent[1]], [extent[2], extent[3]]];\n};\n\n// Returns bounds of coordinates array\nexport const getCoordinatesBounds = coordinates => coordinates.reduce((prev, coord) => [[Math.min(coord[0], prev[0][0]), Math.min(coord[1], prev[0][1])], [Math.max(coord[0], prev[1][0]), Math.max(coord[1], prev[1][1])]], [[Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY], [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY]]);\nconst TYPE_NUMBER = 'number';\nconst TYPE_STRING = 'string';\nexport const DHIS2_PROP = '__dhis2propertyid__';\nexport const getGeojsonDisplayData = feature => {\n  const {\n    properties\n  } = feature;\n  if (!properties) {\n    return [];\n  }\n  return Object.entries(properties).filter(_ref => {\n    let [, value] = _ref;\n    return typeof value === TYPE_NUMBER || typeof value === TYPE_STRING;\n  }).filter(_ref2 => {\n    let [key, value] = _ref2;\n    return (\n      // Remove id property if it was set internally\n      key === 'id' && typeof value === TYPE_STRING && value.startsWith(DHIS2_PROP) ? false : true\n    );\n  }).map(_ref3 => {\n    let [key, value] = _ref3;\n    const type = typeof value === TYPE_NUMBER ? TYPE_NUMBER : TYPE_STRING;\n    return {\n      name: key,\n      dataKey: key,\n      type,\n      value\n    };\n  });\n};\nexport const GEO_TYPE_POINT = 'Point';\nexport const GEO_TYPE_POLYGON = 'Polygon';\nexport const GEO_TYPE_LINE = 'LineString';\nconst GEO_TYPE_FEATURE = 'Feature';\nconst GEO_TYPE_FEATURE_COLLECTION = 'FeatureCollection';\nconst rawGeometryTypes = [GEO_TYPE_POINT, GEO_TYPE_LINE, GEO_TYPE_POLYGON, 'MultiPoint', 'MultiLineString', 'MultiPolygon'];\n\n// Ensure that we are always working with a FeatureCollection\nexport const buildGeoJsonFeatures = geoJson => {\n  let finalGeoJson = geoJson;\n  if (geoJson.type === GEO_TYPE_FEATURE) {\n    finalGeoJson = {\n      type: GEO_TYPE_FEATURE_COLLECTION,\n      features: [geoJson]\n    };\n  } else if (rawGeometryTypes.includes(geoJson.type)) {\n    finalGeoJson = {\n      type: GEO_TYPE_FEATURE_COLLECTION,\n      features: [{\n        type: GEO_TYPE_FEATURE,\n        geometry: geoJson,\n        properties: {}\n      }]\n    };\n  } else if (geoJson.type === 'GeometryCollection') {\n    const features = geoJson.geometries.map(geometry => ({\n      type: GEO_TYPE_FEATURE,\n      geometry,\n      properties: {}\n    }));\n    finalGeoJson = {\n      type: GEO_TYPE_FEATURE_COLLECTION,\n      features\n    };\n  }\n  const types = [];\n  const featureCollection = finalGeoJson.features.map((f, i) => {\n    const nonMultiType = f.geometry.type.replace('Multi', '');\n    // return list of types in the data (but not Multi* types,\n    // because those should get lumped in with the non-Multi* type for the legend)\n    if (!types.includes(nonMultiType)) {\n      types.push(nonMultiType);\n    }\n\n    // Ensures that all features have a properties.id property\n    // If properties.id is added, prefix it with DHIS2_PROP so that\n    // it can be filtered out of the data table\n    if (!f.properties.id) {\n      f.properties.id = `${DHIS2_PROP}${i}`;\n    }\n    return f;\n  });\n  return {\n    featureCollection,\n    types\n  };\n};","export const formatCount = count => {\n  let num;\n  if (count >= 1000 && count < 9500) {\n    num = (count / 1000).toFixed(1) + 'k'; // 3.3k\n  } else if (count >= 9500 && count < 999500) {\n    num = Math.round(count / 1000) + 'k'; // 33k\n  } else if (count >= 999500 && count < 1950000) {\n    num = (count / 1000000).toFixed(1) + 'M'; // 3.3M\n  } else if (count > 1950000) {\n    num = Math.round(count / 1000000) + 'M'; // 33M\n  }\n\n  return num || count;\n};\n\n// Returns a function that rounds number n to d decimals\nexport const getRoundToPrecisionFn = d => {\n  if (d === undefined) {\n    return n => n;\n  }\n  const m = Math.pow(10, d);\n  return n => Math.round(n * m) / m;\n};\n\n// Returns the number of decimals to round a number to\nexport const getPrecision = function () {\n  let values = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  if (values.length) {\n    const sortedValues = [...values].sort((a, b) => a - b);\n    const minValue = sortedValues[0];\n    const maxValue = sortedValues[sortedValues.length - 1];\n    const minMaxGap = maxValue - minValue;\n    const absOfMaxValue = Math.abs(maxValue);\n    if (absOfMaxValue >= 10000) {\n      return 0;\n    }\n    if (absOfMaxValue >= 1000) {\n      return minMaxGap > 10 ? 0 : 1;\n    }\n    if (absOfMaxValue >= 100) {\n      return minMaxGap > 1 ? 1 : 2;\n    }\n    if (absOfMaxValue >= 10) {\n      return minMaxGap > 0.1 ? 2 : 3;\n    }\n    if (absOfMaxValue >= 1) {\n      return minMaxGap > 0.01 ? 3 : 4;\n    }\n    return minMaxGap > 0.001 ? 4 : 5;\n  }\n  return 0;\n};","//  Copied from https://github.com/dhis2/d2/blob/master/src/uid.js\n\nconst abc = 'abcdefghijklmnopqrstuvwxyz';\nconst letters = abc.concat(abc.toUpperCase());\nconst ALLOWED_CHARS = `0123456789${letters}`;\nconst NUMBER_OF_CODEPOINTS = ALLOWED_CHARS.length;\nconst CODESIZE = 11;\nfunction randomWithMax(max) {\n  return Math.floor(Math.random() * max);\n}\nexport function generateUid() {\n  // First char should be a letter\n  let randomChars = letters.charAt(randomWithMax(letters.length));\n  for (let i = 1; i < CODESIZE; i += 1) {\n    randomChars += ALLOWED_CHARS.charAt(randomWithMax(NUMBER_OF_CODEPOINTS));\n  }\n\n  // return new String( randomChars );\n  return randomChars;\n}\nconst CODE_PATTERN = /^[a-zA-Z]{1}[a-zA-Z0-9]{10}$/;\nexport const isValidUid = code => code ? CODE_PATTERN.test(code) : false;","import i18n from '@dhis2/d2-i18n';\nimport { useMemo, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { EVENT_LAYER, THEMATIC_LAYER, ORG_UNIT_LAYER, EARTH_ENGINE_LAYER, FACILITY_LAYER, GEOJSON_URL_LAYER } from '../../constants/layers.js';\nimport { numberValueTypes } from '../../constants/valueTypes.js';\nimport { hasClasses } from '../../util/earthEngine.js';\nimport { filterData } from '../../util/filter.js';\nimport { getGeojsonDisplayData } from '../../util/geojson.js';\nimport { getRoundToPrecisionFn, getPrecision } from '../../util/numbers.js';\nimport { isValidUid } from '../../util/uid.js';\nconst ASCENDING = 'asc';\nconst TYPE_NUMBER = 'number';\nconst TYPE_STRING = 'string';\nconst TYPE_DATE = 'date';\nconst INDEX = 'index';\nconst NAME = 'name';\nconst ID = 'id';\nconst VALUE = 'value';\nconst LEGEND = 'legend';\nconst RANGE = 'range';\nconst LEVEL = 'level';\nconst PARENT_NAME = 'parentName';\nconst TYPE = 'type';\nconst COLOR = 'color';\nconst OUNAME = 'ouname';\nconst EVENTDATE = 'eventdate';\nconst ERROR_SERVER_CLUSTER = 'SERVER_CLUSTER';\nconst ERROR_NO_VALID_DATA = 'NO_VALID_DATA';\nconst ERROR_NO_HEADERS = 'NO_HEADERS';\nconst ERROR_NON_HOMOGENOUS_FEATURES = 'NON_HOMOGENOUS_FEATURES';\nconst getErrorCodeText = code => {\n  switch (code) {\n    case ERROR_SERVER_CLUSTER:\n      return i18n.t('Data table is not supported when events are grouped on the server.');\n    case ERROR_NO_VALID_DATA:\n      return i18n.t('No valid data was found for the current layer configuration.');\n    case ERROR_NON_HOMOGENOUS_FEATURES:\n      return i18n.t('Data table is not supported when there is more than one geometry type in the dataset.');\n    case ERROR_NO_HEADERS:\n      return i18n.t('No valid data fields were found for this layer.');\n    default:\n      return null;\n  }\n};\nconst defaultFieldsMap = () => ({\n  [INDEX]: {\n    name: i18n.t('Index'),\n    dataKey: INDEX,\n    type: TYPE_NUMBER\n  },\n  [NAME]: {\n    name: i18n.t('Name'),\n    dataKey: NAME,\n    type: TYPE_STRING\n  },\n  [ID]: {\n    name: i18n.t('Id'),\n    dataKey: ID,\n    type: TYPE_STRING\n  },\n  [LEVEL]: {\n    name: i18n.t('Level'),\n    dataKey: LEVEL,\n    type: TYPE_NUMBER\n  },\n  [PARENT_NAME]: {\n    name: i18n.t('Parent'),\n    dataKey: PARENT_NAME,\n    type: TYPE_STRING\n  },\n  [TYPE]: {\n    name: i18n.t('Type'),\n    dataKey: TYPE,\n    type: TYPE_STRING\n  },\n  [VALUE]: {\n    name: i18n.t('Value'),\n    dataKey: VALUE,\n    type: TYPE_NUMBER\n  },\n  [LEGEND]: {\n    name: i18n.t('Legend'),\n    dataKey: LEGEND,\n    type: TYPE_STRING\n  },\n  [RANGE]: {\n    name: i18n.t('Range'),\n    dataKey: RANGE,\n    type: TYPE_STRING\n  },\n  [OUNAME]: {\n    name: i18n.t('Org unit'),\n    dataKey: OUNAME,\n    type: TYPE_STRING\n  },\n  [EVENTDATE]: {\n    name: i18n.t('Event time'),\n    dataKey: EVENTDATE,\n    type: TYPE_DATE,\n    renderer: 'formatTime...'\n  },\n  [COLOR]: {\n    name: i18n.t('Color'),\n    dataKey: COLOR,\n    type: TYPE_STRING,\n    renderer: 'rendercolor'\n  }\n});\nconst getThematicHeaders = () => [INDEX, NAME, ID, VALUE, LEGEND, RANGE, LEVEL, PARENT_NAME, TYPE, COLOR].map(field => defaultFieldsMap()[field]);\nconst getEventHeaders = _ref => {\n  let {\n    layerHeaders = [],\n    styleDataItem\n  } = _ref;\n  const fields = [INDEX, OUNAME, ID, EVENTDATE].map(field => defaultFieldsMap()[field]);\n  const customFields = layerHeaders.filter(_ref2 => {\n    let {\n      name\n    } = _ref2;\n    return isValidUid(name);\n  }).map(_ref3 => {\n    let {\n      name: dataKey,\n      column: name,\n      valueType\n    } = _ref3;\n    return {\n      name,\n      dataKey,\n      type: numberValueTypes.includes(valueType) ? TYPE_NUMBER : TYPE_STRING\n    };\n  });\n  customFields.push(defaultFieldsMap()[TYPE]);\n  if (styleDataItem) {\n    customFields.push(defaultFieldsMap()[COLOR]);\n  }\n  return fields.concat(customFields);\n};\nconst getOrgUnitHeaders = () => [INDEX, NAME, ID, LEVEL, PARENT_NAME, TYPE].map(field => defaultFieldsMap()[field]);\nconst getFacilityHeaders = () => [INDEX, NAME, ID, TYPE].map(field => defaultFieldsMap()[field]);\nconst toTitleCase = str => str.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\nconst getEarthEngineHeaders = _ref4 => {\n  let {\n    aggregationType,\n    legend,\n    data\n  } = _ref4;\n  const {\n    title,\n    items\n  } = legend;\n  let customFields = [];\n  if (hasClasses(aggregationType) && items) {\n    customFields = items.map(_ref5 => {\n      let {\n        id,\n        name\n      } = _ref5;\n      return {\n        name,\n        dataKey: String(id),\n        roundFn: getRoundToPrecisionFn(2),\n        type: TYPE_NUMBER\n      };\n    });\n  } else if (Array.isArray(aggregationType) && aggregationType.length) {\n    customFields = aggregationType.map(type => {\n      let roundFn = null;\n      if (data !== null && data !== void 0 && data.length) {\n        const precision = getPrecision(data.map(d => d[type]));\n        roundFn = getRoundToPrecisionFn(precision);\n      }\n      return {\n        name: toTitleCase(`${type} ${title}`),\n        dataKey: type,\n        roundFn,\n        type: TYPE_NUMBER\n      };\n    });\n  }\n  return [INDEX, NAME, ID, TYPE].map(field => defaultFieldsMap()[field]).concat(customFields);\n};\nconst getGeoJsonUrlHeaders = firstDataItem => getGeojsonDisplayData(firstDataItem);\nconst EMPTY_AGGREGATIONS = {};\nconst EMPTY_LAYER = {};\nexport const useTableData = _ref6 => {\n  let {\n    layer,\n    sortField,\n    sortDirection\n  } = _ref6;\n  const allAggregations = useSelector(state => state.aggregations);\n  const aggregations = allAggregations[layer.id] || EMPTY_AGGREGATIONS;\n  const errorCode = useRef(null);\n  const {\n    layer: layerType,\n    aggregationType,\n    legend,\n    styleDataItem,\n    data,\n    dataFilters,\n    headers: layerHeaders,\n    serverCluster\n  } = layer || EMPTY_LAYER;\n  const dataWithAggregations = useMemo(() => {\n    errorCode.current = null;\n    if (serverCluster) {\n      errorCode.current = ERROR_SERVER_CLUSTER;\n      return null;\n    }\n    if (!(data !== null && data !== void 0 && data.length)) {\n      errorCode.current = ERROR_NO_VALID_DATA;\n      return null;\n    }\n    if (layerType === GEOJSON_URL_LAYER) {\n      return data.map(d => ({\n        ...d.properties\n      }));\n    }\n    return data.filter(d => !d.properties.hasAdditionalGeometry).map((d, index) => ({\n      ...(d.properties || d),\n      ...aggregations[d.id],\n      index\n    }));\n  }, [data, aggregations, serverCluster, layerType]);\n  const headers = useMemo(() => {\n    var _headers;\n    if (errorCode.current) {\n      return null;\n    }\n    let headers = null;\n    switch (layerType) {\n      case THEMATIC_LAYER:\n        headers = getThematicHeaders();\n        break;\n      case EVENT_LAYER:\n        headers = getEventHeaders({\n          layerHeaders,\n          styleDataItem\n        });\n        break;\n      case ORG_UNIT_LAYER:\n        headers = getOrgUnitHeaders();\n        break;\n      case EARTH_ENGINE_LAYER:\n        headers = getEarthEngineHeaders({\n          aggregationType,\n          legend,\n          data: dataWithAggregations\n        });\n        break;\n      case FACILITY_LAYER:\n        headers = getFacilityHeaders();\n        break;\n      case GEOJSON_URL_LAYER:\n        {\n          if (data.some(feature => feature.geometry.type !== data[0].geometry.type)) {\n            errorCode.current = ERROR_NON_HOMOGENOUS_FEATURES;\n            return null;\n          }\n          headers = getGeoJsonUrlHeaders(data[0]);\n          break;\n        }\n      default:\n        break;\n    }\n    if (!((_headers = headers) !== null && _headers !== void 0 && _headers.length)) {\n      errorCode.current = ERROR_NO_HEADERS;\n      return null;\n    }\n    return headers;\n  }, [layerType, aggregationType, legend, styleDataItem, dataWithAggregations, data, layerHeaders]);\n  const rows = useMemo(() => {\n    if (errorCode.current) {\n      return null;\n    }\n    if (!headers.length) {\n      errorCode.current = ERROR_NO_HEADERS;\n      return null;\n    }\n    const filteredData = filterData(dataWithAggregations, dataFilters);\n\n    //sort\n    filteredData.sort((a, b) => {\n      a = a[sortField];\n      b = b[sortField];\n      if (typeof a === TYPE_NUMBER) {\n        return sortDirection === ASCENDING ? a - b : b - a;\n      }\n      // TODO: Make sure sorting works across different locales\n      if (a !== undefined) {\n        return sortDirection === ASCENDING ? a.localeCompare(b) : b.localeCompare(a);\n      }\n      return 0;\n    });\n    return filteredData.map(item => headers.map(_ref7 => {\n      let {\n        dataKey,\n        roundFn,\n        type\n      } = _ref7;\n      const value = roundFn ? roundFn(item[dataKey]) : item[dataKey];\n      return {\n        dataKey,\n        value: type === TYPE_NUMBER && isNaN(value) ? null : value,\n        align: type === TYPE_NUMBER ? 'right' : 'left',\n        itemId: item.id\n      };\n    }));\n  }, [headers, dataWithAggregations, dataFilters, sortField, sortDirection]);\n\n  // EE layers and event layers may be loading additional data\n  const isLoading = layerType === EARTH_ENGINE_LAYER && (aggregationType === null || aggregationType === void 0 ? void 0 : aggregationType.length) && (!aggregations || aggregations === EMPTY_AGGREGATIONS) || layerType === EVENT_LAYER && !layer.isExtended && !serverCluster;\n  return {\n    headers,\n    rows,\n    isLoading,\n    error: getErrorCodeText(errorCode.current)\n  };\n};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { DataTable, DataTableRow, DataTableCell, DataTableColumnHeader, DataTableHead, DataTableBody, ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useReducer, useCallback, useMemo, useEffect, useRef, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { TableVirtuoso } from 'react-virtuoso';\nimport { highlightFeature, setFeatureProfile } from '../../actions/feature.js';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport { EVENT_LAYER, GEOJSON_URL_LAYER } from '../../constants/layers.js';\nimport { isDarkColor } from '../../util/colors.js';\nimport FilterInput from './FilterInput.js';\nimport styles from './styles/DataTable.module.css';\nimport { useTableData } from './useTableData.js';\nconst ASCENDING = 'asc';\nconst DESCENDING = 'desc';\nconst DataTableWithVirtuosoContext = _ref => {\n  let {\n    context,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(DataTable, _extends({}, props, {\n    layout: context.layout,\n    className: styles.dataTable\n  }));\n};\nDataTableWithVirtuosoContext.propTypes = {\n  context: PropTypes.shape({\n    layout: PropTypes.string\n  })\n};\nconst DataTableRowWithVirtuosoContext = _ref2 => {\n  let {\n    context,\n    item,\n    ...props\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(DataTableRow, _extends({\n    onClick: () => context.onClick(item),\n    onMouseEnter: () => context.onMouseEnter(item),\n    onMouseLeave: context.onMouseLeave\n  }, props));\n};\nDataTableRowWithVirtuosoContext.propTypes = {\n  context: PropTypes.shape({\n    onClick: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func\n  }),\n  item: PropTypes.arrayOf(PropTypes.shape({\n    dataKey: PropTypes.string,\n    itemId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    value: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n  }))\n};\nconst TableComponents = {\n  Table: DataTableWithVirtuosoContext,\n  TableBody: DataTableBody,\n  TableHead: DataTableHead,\n  TableRow: DataTableRowWithVirtuosoContext,\n  EmptyPlaceholder: () => /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: 99999\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noResults\n  }, i18n.t('No results found'))))\n};\nconst Table = _ref3 => {\n  let {\n    availableHeight,\n    availableWidth\n  } = _ref3;\n  const headerRowRef = useRef(null);\n  const [columnWidths, setColumnWidths] = useState([]);\n  const {\n    mapViews\n  } = useSelector(state => state.map);\n  const activeLayerId = useSelector(state => state.dataTable);\n  const dispatch = useDispatch();\n  const feature = useSelector(state => state.feature);\n  const [{\n    sortField,\n    sortDirection\n  }, setSorting] = useReducer((sorting, newSorting) => ({\n    ...sorting,\n    ...newSorting\n  }), {\n    sortField: 'name',\n    sortDirection: ASCENDING\n  });\n  const layer = mapViews.find(l => l.id === activeLayerId);\n  const sortData = useCallback(_ref4 => {\n    let {\n      name\n    } = _ref4;\n    setSorting({\n      sortField: name,\n      sortDirection: sortDirection === ASCENDING ? DESCENDING : ASCENDING\n    });\n  }, [sortDirection]);\n  const showDetailView = useCallback(row => {\n    if (layer.layer === EVENT_LAYER) {\n      return;\n    }\n    if (layer.layer === GEOJSON_URL_LAYER) {\n      const {\n        name\n      } = layer;\n      const data = row.reduce((acc, _ref5) => {\n        let {\n          dataKey,\n          value\n        } = _ref5;\n        acc[dataKey] = value;\n        return acc;\n      }, {});\n      dispatch(setFeatureProfile({\n        name,\n        data\n      }));\n    } else {\n      var _row$find;\n      const id = (_row$find = row.find(r => r.dataKey === 'id')) === null || _row$find === void 0 ? void 0 : _row$find.value;\n      id && dispatch(setOrgUnitProfile(id));\n    }\n  }, [dispatch, layer]);\n  const setFeatureHighlight = useCallback(row => {\n    var _row$find2;\n    const id = ((_row$find2 = row.find(r => r.dataKey === 'id')) === null || _row$find2 === void 0 ? void 0 : _row$find2.value) || row[0].itemId;\n    if (!id || !feature || id !== feature.id) {\n      dispatch(highlightFeature(id ? {\n        id,\n        layerId: layer.id,\n        origin: 'table'\n      } : null));\n    }\n  }, [feature, dispatch, layer.id]);\n  const clearFeatureHighlight = useCallback(event => {\n    var _event$toElement;\n    const nextElement = (_event$toElement = event.toElement) !== null && _event$toElement !== void 0 ? _event$toElement : event.relatedTarget;\n    // When hovering to the next row the next element is a `TD`\n    // If this is the case `setFeatureHighlight` will\n    // fire and the highlight does not need to be cleared\n    if (nextElement.tagName !== 'TD') {\n      dispatch(highlightFeature(null));\n    }\n  }, [dispatch]);\n  const tableContext = useMemo(() => ({\n    onClick: showDetailView,\n    onMouseEnter: setFeatureHighlight,\n    onMouseLeave: clearFeatureHighlight,\n    layout: columnWidths.length > 0 ? 'fixed' : 'auto'\n  }), [showDetailView, setFeatureHighlight, clearFeatureHighlight, columnWidths]);\n  const {\n    headers,\n    rows,\n    isLoading,\n    error\n  } = useTableData({\n    layer,\n    sortField,\n    sortDirection\n  });\n  useEffect(() => {\n    /* The combination of automtic table layout and virtual scrolling\n     * causes a content shift when scrolling and filtering because the\n     * cells in the DOM have a different content length which causes the\n     * columns to have a different width. To avoid that we measure the\n     * initial column widths and switch to a fixed layout based on these\n     * measured widths */\n    if (columnWidths.length === 0 && headerRowRef.current) {\n      requestAnimationFrame(() => {\n        const measuredColumnWidths = [];\n        for (const cell of headerRowRef.current.cells) {\n          const rect = cell.getBoundingClientRect();\n          measuredColumnWidths.push(Math.floor(rect.width));\n        }\n        setColumnWidths(measuredColumnWidths);\n      });\n    }\n  }, [columnWidths]);\n  useEffect(() => {\n    /* When the window is resized, the sidebar opens, or the table\n     * headers change, the table needs to switch back to its\n     * automatic layout so that the cells can subsequently can be\n     * measured again in the useEffect hook above */\n    if (!error) {\n      setColumnWidths([]);\n    }\n  }, [availableWidth, headers, error]);\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.noSupport\n    }, error);\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableVirtuoso, {\n    context: tableContext,\n    components: TableComponents,\n    style: {\n      height: availableHeight,\n      width: '100%'\n    },\n    data: rows,\n    fixedHeaderContent: () => /*#__PURE__*/React.createElement(DataTableRow, {\n      ref: headerRowRef\n    }, headers.map((_ref6, index) => {\n      let {\n        name,\n        dataKey,\n        type\n      } = _ref6;\n      return /*#__PURE__*/React.createElement(DataTableColumnHeader, {\n        className: styles.columnHeader,\n        key: `${dataKey}-${index}`,\n        onSortIconClick: sortData,\n        sortDirection: dataKey === sortField ? sortDirection : 'default',\n        sortIconTitle: i18n.t('Sort by {{column}}', {\n          column: name\n        }),\n        onFilterIconClick: type && Function.prototype,\n        showFilter: !!type && dataKey !== 'index',\n        name: dataKey,\n        filter: type && /*#__PURE__*/React.createElement(FilterInput, {\n          type: type,\n          dataKey: dataKey,\n          name: name\n        }),\n        width: columnWidths.length > 0 ? `${columnWidths[index]}px` : 'auto'\n      }, name);\n    })),\n    itemContent: (_, row) => row.map(_ref7 => {\n      let {\n        dataKey,\n        value,\n        align\n      } = _ref7;\n      return /*#__PURE__*/React.createElement(DataTableCell, {\n        key: `dtcell-${dataKey}`,\n        className: cx(styles.dataCell, {\n          [styles.lightText]: dataKey === 'color' && isDarkColor(value)\n        }),\n        backgroundColor: dataKey === 'color' ? value : null,\n        align: align\n      }, dataKey === 'color' ? value === null || value === void 0 ? void 0 : value.toLowerCase() : value);\n    })\n  }), isLoading && /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))));\n};\nTable.propTypes = {\n  availableHeight: PropTypes.number,\n  availableWidth: PropTypes.number\n};\nexport default Table;","import i18n from '@dhis2/d2-i18n';\nimport { CenteredContent } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      errorInfo: null\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    this.setState({\n      error,\n      errorInfo\n    });\n  }\n  render() {\n    const {\n      children\n    } = this.props;\n    if (this.state.error) {\n      return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Something went wrong')));\n    }\n    return children;\n  }\n}\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default ErrorBoundary;","import React from 'react';\nexport const IconDrag = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"8\",\n  viewBox: \"0 0 15 8\",\n  width: \"15\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m1.5 5c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm6 0c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm6 0c.8284271 0 1.5.67157288 1.5 1.5s-.6715729 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.6715729-1.5 1.5-1.5zm-6-5c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm-6 0c.82842712 0 1.5.67157288 1.5 1.5s-.67157288 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.67157288-1.5 1.5-1.5zm12 0c.8284271 0 1.5.67157288 1.5 1.5s-.6715729 1.5-1.5 1.5-1.5-.67157288-1.5-1.5.6715729-1.5 1.5-1.5z\",\n  fill: \"#6e7a8a\",\n  fillRule: \"evenodd\"\n}));","// extracted by mini-css-extract-plugin\nexport default {\"resizeHandle\":\"ResizeHandle_resizeHandle__688px\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconDrag } from '../core/icons.js';\nimport styles from './styles/ResizeHandle.module.css';\n\n// TODO: Remove globe cursor in chrome\n// https://stackoverflow.com/questions/6771196/stopping-chrome-from-changing-cursor-to-a-globe-while-dragging-a-link\n\nconst ResizeHandle = _ref => {\n  let {\n    onResize,\n    onResizeEnd,\n    minHeight,\n    maxHeight\n  } = _ref;\n  let dragHeight = 0;\n  const onDragStart = evt => {\n    // Set the drag ghost image to a transparent 1x1px\n    // https://stackoverflow.com/questions/7680285/how-do-you-turn-off-setdragimage\n    const img = document.createElement('img');\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    evt.dataTransfer.setDragImage(img, 0, 0);\n    evt.dataTransfer.setData('text/plain', 'node'); // Required to initialize dragging in Firefox\n\n    // https://stackoverflow.com/questions/23992091/drag-and-drop-directive-no-e-clientx-or-e-clienty-on-drag-event-in-firefox\n    document.ondragover = onDrag;\n  };\n  const onDrag = evt => {\n    const height = getHeight(evt || window.event);\n    if (height && onResize) {\n      onResize(height);\n      dragHeight = height;\n    }\n  };\n  const onDragEnd = evt => {\n    const height = getHeight(evt);\n    if (height && onResizeEnd) {\n      onResizeEnd(height);\n    }\n    document.ondragover = null;\n  };\n  const getHeight = evt => {\n    if (evt.pageY) {\n      const height = window.innerHeight - evt.pageY;\n      dragHeight = height < minHeight ? minHeight : height > maxHeight ? maxHeight : height;\n    }\n    return dragHeight;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.resizeHandle,\n    draggable: true,\n    onDragStart: evt => onDragStart(evt),\n    onDragEnd: evt => onDragEnd(evt)\n  }, /*#__PURE__*/React.createElement(IconDrag, null));\n};\nResizeHandle.propTypes = {\n  maxHeight: PropTypes.number.isRequired,\n  minHeight: PropTypes.number.isRequired,\n  onResize: PropTypes.func,\n  onResizeEnd: PropTypes.func\n};\nResizeHandle.defaultProps = {\n  minHeight: 50,\n  maxHeight: 500\n};\nexport default ResizeHandle;","// extracted by mini-css-extract-plugin\nexport default {\"bottomPanel\":\"BottomPanel_bottomPanel__v8ypx\",\"dataTableControls\":\"BottomPanel_dataTableControls__Qwyxi\",\"closeIcon\":\"BottomPanel_closeIcon__bVSfa\"};","import { IconCross16 } from '@dhis2/ui';\nimport React, { useRef, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeDataTable, resizeDataTable } from '../../actions/dataTable.js';\nimport { HEADER_HEIGHT, APP_MENU_HEIGHT, LAYERS_PANEL_WIDTH, RIGHT_PANEL_WIDTH } from '../../constants/layout.js';\nimport { useWindowDimensions } from '../WindowDimensionsProvider.js';\nimport DataTable from './DataTable.js';\nimport ErrorBoundary from './ErrorBoundary.js';\nimport ResizeHandle from './ResizeHandle.js';\nimport styles from './styles/BottomPanel.module.css';\n\n// Container for DataTable\nconst BottomPanel = () => {\n  const dataTableHeight = useSelector(state => state.ui.dataTableHeight);\n  const layersPanelOpen = useSelector(state => state.ui.layersPanelOpen);\n  const rightPanelOpen = useSelector(state => state.ui.rightPanelOpen);\n  const dispatch = useDispatch();\n  const {\n    width,\n    height\n  } = useWindowDimensions();\n  const panelRef = useRef(null);\n  const onResize = useCallback(h => panelRef.current.style.height = `${h}px`, [panelRef]);\n  const maxHeight = height - HEADER_HEIGHT - APP_MENU_HEIGHT;\n  const tableHeight = dataTableHeight < maxHeight ? dataTableHeight : maxHeight;\n  const layersWidth = layersPanelOpen ? LAYERS_PANEL_WIDTH : 0;\n  const rightPanelWidth = rightPanelOpen ? RIGHT_PANEL_WIDTH : 0;\n  const tableWidth = width - layersWidth - rightPanelWidth;\n  const dataTableControlsHeight = 20;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: panelRef,\n    className: styles.bottomPanel,\n    style: {\n      height: tableHeight,\n      width: tableWidth\n    },\n    \"data-test\": \"bottom-panel\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dataTableControls\n  }, /*#__PURE__*/React.createElement(ResizeHandle, {\n    maxHeight: maxHeight,\n    onResize: onResize,\n    onResizeEnd: height => dispatch(resizeDataTable(height))\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.closeIcon,\n    onClick: () => dispatch(closeDataTable())\n  }, /*#__PURE__*/React.createElement(IconCross16, null))), /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(DataTable, {\n    availableHeight: dataTableHeight - dataTableControlsHeight,\n    availableWidth: tableWidth\n  })));\n};\nexport default BottomPanel;","export const HEADER_HEIGHT = 48;\nexport const APP_MENU_HEIGHT = 32;\nexport const LAYERS_PANEL_WIDTH = 300;\nexport const RIGHT_PANEL_WIDTH = 380;","import * as types from '../constants/actionTypes.js';\nexport const closeDataTable = () => ({\n  type: types.DATA_TABLE_CLOSE\n});\nexport const toggleDataTable = id => ({\n  type: types.DATA_TABLE_TOGGLE,\n  id\n});\nexport const resizeDataTable = height => ({\n  type: types.DATA_TABLE_RESIZE,\n  height\n});","import { createHashHistory } from 'history';\nimport queryString from 'query-string';\nconst history = createHashHistory();\nexport default history;\nconst defaultHashUrlParams = {\n  mapId: '',\n  isDownload: false,\n  interpretationId: null\n};\nconst DOWNLOAD = 'download';\nconst getHashUrlParams = loc => {\n  const params = queryString.parse(loc.search || '', {\n    parseBooleans: true\n  });\n  const pathParts = loc.pathname.slice(1).split('/');\n  if (pathParts.length > 0) {\n    if (pathParts[0] === DOWNLOAD) {\n      params.mapId = '';\n      params.isDownload = true;\n    } else {\n      params.mapId = pathParts[0];\n      if (pathParts[1] === DOWNLOAD) {\n        params.isDownload = true;\n      }\n    }\n  }\n  return params;\n};\nconst getHashUrlParam = key => {\n  const params = getHashUrlParams(history.location);\n  return params[key];\n};\nconst openDownloadMode = () => {\n  if (history.location.pathname === '/') {\n    history.push(`/${DOWNLOAD}`);\n  } else {\n    history.push(`${history.location.pathname}/${DOWNLOAD}`);\n  }\n};\nconst closeDownloadMode = () => {\n  if (history.location.pathname === `/${DOWNLOAD}`) {\n    history.push('/');\n  } else {\n    const rootPath = history.location.pathname.split(`/${DOWNLOAD}`)[0];\n    history.push(rootPath);\n  }\n};\nexport { getHashUrlParams, getHashUrlParam, defaultHashUrlParams, openDownloadMode, closeDownloadMode };","// extracted by mini-css-extract-plugin\nexport default {\"downloadModeMenu\":\"DownloadMenubar_downloadModeMenu__qR1ZO\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, IconChevronLeft24, colors } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { closeDownloadMode } from '../../util/history.js';\nimport styles from './styles/DownloadMenubar.module.css';\nconst DownloadMenubar = () => {\n  useEffect(() => {\n    const header = document.getElementsByTagName('header')[0];\n    header.style.display = 'none';\n    return () => {\n      header.style.display = 'block';\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.downloadModeMenu\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: closeDownloadMode\n  }, /*#__PURE__*/React.createElement(IconChevronLeft24, {\n    color: colors.grey700\n  }), i18n.t('Exit download mode')));\n};\nexport default DownloadMenubar;","import * as types from '../constants/actionTypes.js';\nexport const setDownloadConfig = payload => ({\n  type: types.DOWNLOAD_CONFIG_SET,\n  payload\n});","export const dimConf = {\n  data: {\n    id: 'data',\n    value: 'data',\n    param: 'dx',\n    dimensionName: 'dx',\n    objectName: 'dx'\n  },\n  category: {\n    name: 'categories',\n    dimensionName: 'co',\n    objectName: 'co'\n  },\n  indicator: {\n    id: 'indicator',\n    value: 'indicators',\n    param: 'in',\n    dimensionName: 'dx',\n    objectName: 'in',\n    itemType: 'INDICATOR'\n  },\n  dataElement: {\n    id: 'dataElement',\n    value: 'dataElement',\n    param: 'de',\n    dimensionName: 'dx',\n    objectName: 'de',\n    itemType: 'DATA_ELEMENT' // AGGREGATE_DATA_ELEMENT\n  },\n\n  operand: {\n    id: 'operand',\n    value: 'operand',\n    param: 'dc',\n    dimensionName: 'dx',\n    objectName: 'dc',\n    itemType: 'DATA_ELEMENT_OPERAND'\n  },\n  dataSet: {\n    value: 'dataSets',\n    dimensionName: 'dx',\n    objectName: 'ds',\n    itemType: 'DATA_SET'\n  },\n  eventDataItem: {\n    value: 'eventDataItem',\n    dimensionName: 'dx',\n    objectName: 'di'\n  },\n  programDataElement: {\n    value: 'programDataElement',\n    dimensionName: 'dx',\n    objectName: 'di',\n    itemType: 'PROGRAM_DATA_ELEMENT'\n  },\n  programAttribute: {\n    value: 'programAttribute',\n    dimensionName: 'dx',\n    objectName: 'di',\n    itemType: 'PROGRAM_ATTRIBUTE'\n  },\n  programIndicator: {\n    value: 'programIndicator',\n    dimensionName: 'dx',\n    objectName: 'pi',\n    itemType: 'PROGRAM_INDICATOR'\n  },\n  period: {\n    id: 'period',\n    value: 'period',\n    param: 'pe',\n    dimensionName: 'pe',\n    objectName: 'pe'\n  },\n  organisationUnit: {\n    id: 'organisationUnit',\n    value: 'organisationUnit',\n    param: 'ou',\n    dimensionName: 'ou',\n    objectName: 'ou'\n  },\n  reportingRate: {\n    value: 'reportingRate',\n    dimensionName: 'dx',\n    objectName: 'ds',\n    itemType: 'REPORTING_RATE'\n  },\n  value: {\n    id: 'value',\n    value: 'value',\n    param: 'value',\n    dimensionName: 'value',\n    objectName: 'value'\n  }\n};","import { DAILY, WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, SIXMONTHLYAPR, YEARLY, FINANCIAL, FYNOV, FYOCT, FYJUL, FYAPR } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nexport const periodGroups = [DAILY, WEEKLY, BIWEEKLY, MONTHLY, BIMONTHLY, QUARTERLY, SIXMONTHLY, YEARLY, FINANCIAL];\n\n// TODO: import from @dhis2/analytics (needs to be defined)\nconst TODAY = 'TODAY';\nconst YESTERDAY = 'YESTERDAY';\nconst LAST_14_DAYS = 'LAST_14_DAYS';\nconst LAST_30_DAYS = 'LAST_30_DAYS';\nconst LAST_60_DAYS = 'LAST_60_DAYS';\nconst LAST_90_DAYS = 'LAST_90_DAYS';\nconst LAST_180_DAYS = 'LAST_180_DAYS';\nconst THIS_WEEK = 'THIS_WEEK';\nconst LAST_WEEK = 'LAST_WEEK';\nconst LAST_52_WEEKS = 'LAST_52_WEEKS';\nconst WEEKS_THIS_YEAR = 'WEEKS_THIS_YEAR';\nconst THIS_BIWEEK = 'THIS_BIWEEK';\nconst LAST_BIWEEK = 'LAST_BIWEEK';\nconst THIS_MONTH = 'THIS_MONTH';\nconst LAST_MONTH = 'LAST_MONTH';\nconst THIS_BIMONTH = 'THIS_BIMONTH';\nconst LAST_BIMONTH = 'LAST_BIMONTH';\nconst THIS_QUARTER = 'THIS_QUARTER';\nconst LAST_QUARTER = 'LAST_QUARTER';\nconst THIS_YEAR = 'THIS_YEAR';\nconst LAST_YEAR = 'LAST_YEAR';\nconst THIS_FINANCIAL_YEAR = 'THIS_FINANCIAL_YEAR';\nconst LAST_FINANCIAL_YEAR = 'LAST_FINANCIAL_YEAR';\nexport const RELATIVE_PERIODS = 'RELATIVE_PERIODS';\nexport const START_END_DATES = 'START_END_DATES';\nexport const periodTypes = () => [{\n  id: RELATIVE_PERIODS,\n  name: i18n.t('Relative')\n}, {\n  id: DAILY,\n  name: i18n.t('Daily'),\n  group: DAILY\n}, {\n  id: WEEKLY,\n  name: i18n.t('Weekly'),\n  group: WEEKLY\n}, {\n  id: WEEKLYWED,\n  name: i18n.t('Weekly (Start Wednesday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYTHU,\n  name: i18n.t('Weekly (Start Thursday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYSAT,\n  name: i18n.t('Weekly (Start Saturday)'),\n  group: WEEKLY\n}, {\n  id: WEEKLYSUN,\n  name: i18n.t('Weekly (Start Sunday)'),\n  group: WEEKLY\n}, {\n  id: BIWEEKLY,\n  name: i18n.t('Bi-weekly'),\n  group: BIWEEKLY\n}, {\n  id: MONTHLY,\n  name: i18n.t('Monthly'),\n  group: MONTHLY\n}, {\n  id: BIMONTHLY,\n  name: i18n.t('Bi-monthly'),\n  group: BIMONTHLY\n}, {\n  id: QUARTERLY,\n  name: i18n.t('Quarterly'),\n  group: QUARTERLY\n}, {\n  id: SIXMONTHLY,\n  name: i18n.t('Six-monthly'),\n  group: SIXMONTHLY\n}, {\n  id: SIXMONTHLYAPR,\n  name: i18n.t('Six-monthly April'),\n  group: SIXMONTHLY\n}, {\n  id: YEARLY,\n  name: i18n.t('Yearly'),\n  group: YEARLY\n}, {\n  id: FYNOV,\n  name: i18n.t('Financial year (Start November)'),\n  group: FINANCIAL\n}, {\n  id: FYOCT,\n  name: i18n.t('Financial year (Start October)'),\n  group: FINANCIAL\n}, {\n  id: FYJUL,\n  name: i18n.t('Financial year (Start July)'),\n  group: FINANCIAL\n}, {\n  id: FYAPR,\n  name: i18n.t('Financial year (Start April)'),\n  group: FINANCIAL\n}, {\n  id: START_END_DATES,\n  name: i18n.t('Start/end dates')\n}];\n\n// Periods that will only produce a single map (not for timeline/split view)\nexport const singleMapPeriods = [TODAY, YESTERDAY, THIS_WEEK, LAST_WEEK, THIS_BIWEEK, LAST_BIWEEK, THIS_MONTH, LAST_MONTH, THIS_BIMONTH, LAST_BIMONTH, THIS_QUARTER, LAST_QUARTER, THIS_YEAR, LAST_YEAR, THIS_FINANCIAL_YEAR, LAST_FINANCIAL_YEAR];\n\n// Periods not supported for split view (maximum 12 maps)\nexport const invalidSplitViewPeriods = [LAST_14_DAYS, LAST_30_DAYS, LAST_60_DAYS, LAST_90_DAYS, LAST_180_DAYS, LAST_52_WEEKS, WEEKS_THIS_YEAR];","import { getFixedPeriodsOptionsById, getRelativePeriodsOptionsById } from '@dhis2/analytics';\nimport { periodTypes, periodGroups } from '../constants/periods.js';\nconst getYearOffsetFromNow = year => year - new Date(Date.now()).getFullYear();\nexport const getPeriodTypes = function () {\n  let hiddenPeriods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return periodTypes().filter(_ref => {\n    let {\n      group\n    } = _ref;\n    return !hiddenPeriods.includes(group);\n  });\n};\nexport const getFixedPeriodsByType = (periodType, year) => {\n  const period = getFixedPeriodsOptionsById(periodType);\n  const forceDescendingForYearTypes = !!periodType.match(/^FY|YEARLY/);\n  const offset = getYearOffsetFromNow(year);\n  const periods = (period === null || period === void 0 ? void 0 : period.getPeriods({\n    offset,\n    reversePeriods: true\n  })) || null;\n  if (periods && forceDescendingForYearTypes) {\n    // TODO: the reverse() is a workaround for a bug in the analytics\n    // getPeriods function that no longer correctly reverses the order\n    // for YEARLY and FY period types\n    return periods.reverse();\n  }\n  return periods;\n};\nexport const getRelativePeriods = function () {\n  let hiddenPeriods = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return periodGroups.filter(id => !hiddenPeriods.includes(id)).map(id => getRelativePeriodsOptionsById(id).getPeriods()).flat();\n};\nexport const isPeriodAvailable = (id, hiddenPeriods) => !!getRelativePeriods(hiddenPeriods).find(p => p.id === id);\n\n// All period names\nexport const getPeriodNames = () => ({\n  ...getPeriodTypes().reduce((obj, _ref2) => {\n    let {\n      id,\n      name\n    } = _ref2;\n    obj[id] = name;\n    return obj;\n  }, {}),\n  ...getRelativePeriods().reduce((obj, _ref3) => {\n    let {\n      id,\n      name\n    } = _ref3;\n    obj[id] = name;\n    return obj;\n  }, {})\n});\nexport const filterFuturePeriods = periods => {\n  const now = new Date(Date.now());\n  return periods.filter(_ref4 => {\n    let {\n      startDate\n    } = _ref4;\n    return new Date(startDate) < now;\n  });\n};\nconst periodSetting = /keyHide(.*)Periods/;\nexport const getHiddenPeriods = systemSettings => {\n  return Object.keys(systemSettings).filter(setting => periodSetting.test(setting) && systemSettings[setting]).map(setting => setting.match(periodSetting)[1].toUpperCase());\n};","import i18n from '@dhis2/d2-i18n';\nimport { sortBy } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nimport { RENDERING_STRATEGY_TIMELINE, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../constants/layers.js';\nimport { getPeriodNames } from './periods.js';\nimport { isValidUid } from './uid.js';\n\n/* DIMENSIONS */\n\nconst createDimension = (dimension, items, props) => ({\n  dimension,\n  items,\n  ...props\n});\nconst getDimension = (dimension, arr) => arr.filter(item => item.dimension === dimension)[0];\nconst getDimensionItems = (dimension, arr) => {\n  const dataItems = getDimension(dimension, arr);\n  return dataItems && dataItems.items ? dataItems.items : [];\n};\n\n/* DATA ITEM */\n\nexport const getDataItemFromColumns = function () {\n  let columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('dx', columns)[0];\n};\nexport const setDataItemInColumns = (dataItem, dimension) => {\n  const dim = dimConf[dimension];\n  return dim ? [createDimension(dim.dimensionName, [{\n    id: dataItem.id + (dimension === 'reportingRate' ? '.REPORTING_RATE' : ''),\n    name: dataItem.name,\n    dimensionItemType: dim.itemType,\n    legendSet: dataItem.legendSet // TODO: Keep outside of columns?\n  }], {\n    objectName: dim.objectName\n  })] : [];\n};\n\n/* ORGANISATION UNIT */\n\nexport const getOrgUnitsFromRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('ou', rows) || [];\n};\n\n/* ORGANISATION UNIT NODES */\n\nconst isOrgUnitNode = ou => isValidUid(ou.id);\nexport const getOrgUnitNodesFromRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getOrgUnitsFromRows(rows).filter(isOrgUnitNode);\n};\n\n/* ORGANISATION UNIT PATH */\n// Set organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const setOrgUnitPathInRows = function () {\n  let rows = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let id = arguments.length > 1 ? arguments[1] : undefined;\n  let path = arguments.length > 2 ? arguments[2] : undefined;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const orgUnit = orgUnits.find(ou => ou.id === id);\n  return [createDimension('ou', [...orgUnits.filter(ou => ou.id !== id), {\n    ...orgUnit,\n    path\n  }])];\n};\n\n/* PERIODS */\n\nexport const getPeriodFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return getDimensionItems('pe', filters)[0];\n};\nexport const removePeriodFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return [...filters.filter(f => f.dimension !== 'pe')];\n};\nexport const getPeriodNameFromId = id => getPeriodNames()[id];\nexport const setFiltersFromPeriod = (filters, period) => [...removePeriodFromFilters(filters), createDimension('pe', [{\n  ...period\n}])];\n\n/* DYNAMIC DIMENSION FILTERS */\n\nexport const getDimensionsFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filters.filter(d => isValidUid(d.dimension) || d.dimension === null);\n};\nexport const getValidDimensionsFromFilters = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return filters.filter(d => isValidUid(d.dimension) && d.items && d.items.length);\n};\nexport const removeDimensionFromFilters = (filters, index) => {\n  const dimensions = getDimensionsFromFilters(filters);\n  if (!dimensions || !dimensions[index]) {\n    return filters;\n  }\n  return [...filters.filter(f => f.dimension === 'pe'), ...dimensions.filter((d, i) => i !== index)];\n};\nexport const changeDimensionInFilters = (filters, index, filter) => {\n  const dimensions = getDimensionsFromFilters(filters);\n  if (!dimensions || !dimensions[index]) {\n    return filters;\n  }\n  dimensions[index] = filter;\n  return [...filters.filter(f => f.dimension === 'pe'), ...dimensions];\n};\n\n/* FILTERS */\n\nexport const getFiltersFromColumns = function () {\n  let columns = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const filters = columns.filter(item => item.filter);\n  return filters.length ? filters : null;\n};\n\n// Returns list of filters in a readable format\nexport const getFiltersAsText = function () {\n  let filters = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let names = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return filters.map(_ref => {\n    let {\n      dimension,\n      filter\n    } = _ref;\n    const [operator, value] = filter.split(':');\n    const filterName = names[dimension];\n    const filterOperator = getFilterOperatorAsText(operator, value);\n    const filterValue = getFilterValueName(value, operator, names);\n    return `${filterName} ${filterOperator} ${filterValue}`;\n  });\n};\n\n// Returns filter operator in a readable format\nexport const getFilterOperatorAsText = (operator, value) => {\n  // If only one value, use is / is not\n  if (!value.includes(';')) {\n    if (operator === 'IN') {\n      return i18n.t('is');\n    } else if (operator === '!IN') {\n      return i18n.t('is not');\n    }\n  }\n  return {\n    EQ: '=',\n    GT: '>',\n    GE: '>=',\n    LT: '<',\n    LE: '<=',\n    NE: '!=',\n    IN: i18n.t('one of'),\n    '!IN': i18n.t('not one of'),\n    LIKE: i18n.t('contains'),\n    '!LIKE': i18n.t(\"doesn't contains\")\n  }[operator];\n};\n\n// Returns filter value is a readable fromat\nexport const getFilterValueName = (value, operator, names) => {\n  if (operator === 'IN') {\n    if (value === '1') {\n      return i18n.t('true');\n    } else if (value === '0') {\n      return i18n.t('false');\n    }\n  }\n  return value.split(';').map(val => names[val] || val).join(', ');\n};\n\n// Combine data items into one array and exclude certain value types\n/* eslint-disable max-params */\nexport const combineDataItems = function () {\n  let dataItemsA = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let dataItemsB = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  let includeTypes = arguments.length > 2 ? arguments[2] : undefined;\n  let excludeTypes = arguments.length > 3 ? arguments[3] : undefined;\n  return sortBy('name', [...dataItemsA, ...dataItemsB].filter(item => (!includeTypes || includeTypes.includes(item.valueType)) && (!excludeTypes || !excludeTypes.includes(item.valueType))));\n};\n\n/* eslint-enable max-params */\n\n// TODO: This is VERY expensive because metaData.items can have 100000+ elements.  Consider removing.\n// Builds an object with key/names pairs from an API response\nexport const getApiResponseNames = _ref2 => {\n  let {\n    metaData,\n    headers\n  } = _ref2;\n  return {\n    ...Object.keys(metaData.items).reduce((names, key) => ({\n      ...names,\n      [key]: metaData.items[key].name\n    }), {}),\n    ...headers.reduce((names, header) => ({\n      ...names,\n      [header.name]: header.column\n    }), {}),\n    true: i18n.t('Yes'),\n    false: i18n.t('No')\n  };\n};\n\n// Returns the rendering strategy used\nexport const getRenderingStrategy = _ref3 => {\n  let {\n    mapViews\n  } = _ref3;\n  if (Array.isArray(mapViews)) {\n    if (mapViews.some(view => view.renderingStrategy === RENDERING_STRATEGY_TIMELINE)) {\n      return 'timeline';\n    } else if (mapViews.some(view => view.renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD)) {\n      return 'split-by-period';\n    }\n  }\n  return 'single';\n};","import { EVENT_CLIENT_PAGE_SIZE, EVENT_COORDINATE_CASCADING, EVENT_COORDINATE_DEFAULT } from '../constants/layers.js';\nimport { getOrgUnitsFromRows, getPeriodFromFilters } from './analytics.js';\nimport { addStyleDataItem, createEventFeatures } from './geojson.js';\n\n// Empty filter sometimes returned for saved maps\n// Dimension without filter and empty items array returns false\nconst isValidDimension = _ref => {\n  let {\n    dimension,\n    filter,\n    items\n  } = _ref;\n  return Boolean(dimension && (filter || !items || items.length));\n};\nconst METADATA_FORMAT_NAME = 'name';\nexport const getEventColumns = async (layer, _ref2) => {\n  let {\n    format = METADATA_FORMAT_NAME,\n    nameProperty,\n    d2\n  } = _ref2;\n  const result = await d2.models.programStage.get(layer.programStage.id, {\n    fields: `programStageDataElements[displayInReports,dataElement[id,code,${nameProperty}~rename(name),optionSet]]`,\n    paging: false\n  });\n  return result.programStageDataElements.filter(el => el.displayInReports).map(el => ({\n    dimension: el.dataElement.id,\n    name: el.dataElement[format]\n  }));\n};\n\n// Also used to query for server cluster in map/EventLayer.js\n// TODO: Use DataIDScheme / OutputIDScheme instead of requesting all metaData (which can easily dwarf the actual response data)\nexport const getAnalyticsRequest = async (_ref3, _ref4) => {\n  let {\n    program,\n    programStage,\n    filters,\n    startDate,\n    endDate,\n    rows,\n    columns,\n    styleDataItem,\n    eventStatus,\n    eventCoordinateField = EVENT_COORDINATE_DEFAULT,\n    fallbackCoordinateField,\n    relativePeriodDate,\n    isExtended\n  } = _ref3;\n  let {\n    d2,\n    nameProperty\n  } = _ref4;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const period = getPeriodFromFilters(filters);\n  const dataItems = addStyleDataItem(columns.filter(isValidDimension), styleDataItem);\n\n  // Add \"display in reports\" columns that are not already present\n  if (isExtended) {\n    const displayColumns = await getEventColumns({\n      programStage\n    }, {\n      d2,\n      nameProperty\n    });\n    displayColumns.forEach(col => {\n      if (!dataItems.find(item => item.dimension === col.dimension)) {\n        dataItems.push(col);\n      }\n    });\n  }\n  let analyticsRequest = new d2.analytics.request().withProgram(program.id).withStage(programStage.id).withCoordinatesOnly(true);\n  analyticsRequest = period ? analyticsRequest.addPeriodFilter(period.id) : analyticsRequest.withStartDate(startDate).withEndDate(endDate);\n  if (relativePeriodDate) {\n    analyticsRequest = analyticsRequest.withRelativePeriodDate(relativePeriodDate);\n  }\n  analyticsRequest = analyticsRequest.addOrgUnitDimension(orgUnits.map(ou => ou.id));\n  if (dataItems) {\n    dataItems.forEach(item => {\n      analyticsRequest = analyticsRequest.addDimension(item.dimension, item.filter);\n    });\n  }\n  analyticsRequest = analyticsRequest.withCoordinateField(eventCoordinateField);\n  if (fallbackCoordinateField) {\n    if (fallbackCoordinateField === EVENT_COORDINATE_CASCADING) {\n      analyticsRequest = analyticsRequest.withParameters({\n        defaultCoordinateFallback: true\n      });\n    } else {\n      analyticsRequest = analyticsRequest.withParameters({\n        fallbackCoordinateField\n      });\n    }\n  }\n  if (eventStatus && eventStatus !== 'ALL') {\n    analyticsRequest = analyticsRequest.withEventStatus(eventStatus);\n  }\n  return analyticsRequest;\n};\nexport const loadData = async function (request) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let d2 = arguments.length > 2 ? arguments[2] : undefined;\n  const response = await d2.analytics.events.getQuery(request.withPageSize(EVENT_CLIENT_PAGE_SIZE)); // DHIS2-10742\n\n  const {\n    data,\n    names\n  } = createEventFeatures(response, config);\n  return {\n    data,\n    names,\n    response\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport FileSaver from 'file-saver';\nimport { EVENT_LAYER } from '../constants/layers.js';\nimport { hasClasses } from './earthEngine.js';\nimport { getAnalyticsRequest, getEventColumns, loadData } from './event.js';\nexport const getFormatOptions = () => [{\n  id: 'id',\n  name: i18n.t('ID')\n}, {\n  id: 'code',\n  name: i18n.t('Code')\n}, {\n  id: 'name',\n  name: i18n.t('Name')\n}];\n\n// Add readable prop names before downloading EE data\n// Classed data (landcover) will use the class names\n// Other layers will include layer name after aggregation type\nexport const addPropNames = (layer, data) => {\n  const {\n    aggregationType,\n    name,\n    legend\n  } = layer;\n  const layerName = name.replace(/ /g, '_').toLowerCase();\n  const {\n    items\n  } = legend;\n  return hasClasses(aggregationType) ? items.reduce((obj, _ref) => {\n    let {\n      id,\n      name\n    } = _ref;\n    return {\n      ...obj,\n      [name]: data[id]\n    };\n  }, {}) : Object.keys(data).reduce((obj, id) => ({\n    ...obj,\n    [`${id}_${layerName}`]: data[id]\n  }), {});\n};\n\n// Replaces anything that's not a letter, number or space\n// Multiple spaces is replaced by a single space in the last replace\nexport const standardizeFilename = (name, ext) => `${name.replace(/[^a-z0-9 ]/gi, '').replace(/  +/g, ' ')}.${ext}`;\nexport const createGeoJsonBlob = data => {\n  const geojson = {\n    type: 'FeatureCollection',\n    features: data\n  };\n  const blob = new Blob([JSON.stringify(geojson)], {\n    type: 'application/json;charset=utf-8'\n  });\n  return blob;\n};\n\n// Includes values for each period in feature properties\nconst includeValuesByPeriod = _ref2 => {\n  let {\n    data,\n    valuesByPeriod\n  } = _ref2;\n  const periods = Object.keys(valuesByPeriod);\n  return data.map(feature => ({\n    ...feature,\n    properties: {\n      ...feature.properties,\n      ...periods.reduce((values, periodId) => {\n        const periodValue = valuesByPeriod[periodId][feature.id];\n        values[`period_${periodId}`] = periodValue ? Number(periodValue.value) : null;\n        return values;\n      }, {})\n    }\n  }));\n};\nexport const downloadData = async _ref3 => {\n  let {\n    layer,\n    aggregations,\n    format,\n    humanReadableKeys,\n    d2,\n    nameProperty\n  } = _ref3;\n  const {\n    name,\n    layer: layerType\n  } = layer;\n  let layerData = layer.data;\n  if (layerType === EVENT_LAYER) {\n    const columns = await getEventColumns(layer, {\n      format,\n      nameProperty,\n      d2\n    });\n    const config = {\n      ...layer,\n      columns,\n      outputIdScheme: humanReadableKeys ? 'NAME' : 'ID',\n      columnNames: columns.reduce((res, col) => {\n        res[col.dimension] = col.name;\n        return res;\n      }, {})\n    };\n    const result = await loadData(await getAnalyticsRequest(config, {\n      d2,\n      nameProperty\n    }), config, d2);\n    layerData = result.data;\n  } else if (layer.valuesByPeriod) {\n    layerData = includeValuesByPeriod(layer);\n  }\n  const data = aggregations ? layerData.map(d => ({\n    ...d,\n    properties: {\n      ...d.properties,\n      ...addPropNames(layer, aggregations[d.id])\n    }\n  })) : layerData;\n  FileSaver.saveAs(createGeoJsonBlob(data), standardizeFilename(name, 'geojson'));\n  return true;\n};","import FileSaver from 'file-saver';\nimport { toBlob } from 'html-to-image';\nexport const downloadMapImage = (sourceEl, filename) => toBlob(sourceEl).then(blob => FileSaver.saveAs(blob, filename));\nconst toStringFn = {}.toString;\n\n// https://github.com/bubkoo/html-to-image#browsers\n// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/svg/foreignobject.js\n// TODO: Safari is not supported, as it uses a stricter security model on <foreignObject> tag\nexport const downloadSupport = () => {\n  return !!document.createElementNS && /SVGForeignObject/.test(toStringFn.call(document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')));\n};","import { isObject } from 'lodash/fp';\nimport { RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../constants/layers.js';\nconst propertyMap = {\n  name: 'name',\n  displayName: 'name',\n  shortName: 'shortName',\n  displayShortName: 'shortName'\n};\nexport const getDisplayProperty = (d2, displayProperty) => {\n  const keyAnalysisDisplayProperty = d2.currentUser.settings.keyAnalysisDisplayProperty;\n  return propertyMap[keyAnalysisDisplayProperty] || propertyMap[displayProperty] || 'name'; // TODO: check\n};\n\n/*\nexport const getDisplayPropertyUrl = d2 => {\n    return `${getDisplayProperty(d2)}~rename(name)`; // TODO\n};\n*/\n\nexport const getDisplayPropertyUrl = () => `displayName~rename(name)`;\nconst baseFields = ['id', 'user', 'displayName~rename(name)', 'description', 'longitude', 'latitude', 'zoom', 'basemap', 'publicAccess', 'created', 'lastUpdated', 'access', 'update', 'manage', 'delete', 'href'];\nconst analysisFields = () => {\n  const namePropertyUrl = getDisplayPropertyUrl();\n  return ['*', `columns[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${namePropertyUrl}]]`, `rows[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${namePropertyUrl}]]`, `filters[dimension,filter,items[dimensionItem~rename(id),dimensionItemType,${namePropertyUrl}]]`, 'organisationUnits[id,path]',\n  // Added to retrieve org unit paths\n  'dataDimensionItems', `program[id,${namePropertyUrl}]`, 'programStage[id,displayName~rename(name)]', 'legendSet[id,displayName~rename(name)]', 'trackedEntityType[id,displayName~rename(name)]', 'organisationUnitSelectionMode', '!href', '!publicAccess', '!rewindRelativePeriods', '!userOrganisationUnit', '!userOrganisationUnitChildren', '!userOrganisationUnitGrandChildren', '!externalAccess', '!access', '!relativePeriods', '!columnDimensions', '!rowDimensions', '!filterDimensions', '!user', '!organisationUnitGroups', '!itemOrganisationUnitGroups', '!userGroupAccesses', '!indicators', '!dataElements', '!dataElementOperands', '!dataElementGroups', '!dataSets', '!periods', '!organisationUnitLevels', '!sortOrder', '!topLimit'];\n};\nexport const mapFields = () => {\n  const fields = analysisFields();\n  return `${baseFields.join(',')}, mapViews[${fields.join(',')}]`;\n};\nexport const legendFields = ['*', '!created', '!lastUpdated', '!displayName', '!externalAccess', '!access', '!userGroupAccesses'];\nexport const legendSetFields = ['id,displayName~rename(name),legends[' + legendFields.join(',') + ']'];\n\n// Add path to org unit dimension  - https://jira.dhis2.org/browse/DHIS2-4212\nexport const addOrgUnitPaths = mapViews => mapViews.map(view => view.rows && view.organisationUnits ? {\n  ...view,\n  rows: view.rows.map(dim => ({\n    ...dim,\n    items: dim.items.map(orgUnit => ({\n      ...orgUnit,\n      path: (view.organisationUnits.find(ou => ou.id === orgUnit.id) || {}).path\n    }))\n  }))\n} : view);\nconst mandatoryDataItemAttributes = ['id', 'name', 'valueType'];\n\n// Checks if a data item is valid (program stage data elements and tracked entity attributes)\nexport const getValidDataItems = items => items.filter(item => isObject(item) && mandatoryDataItemAttributes.every(prop => prop in item));\n\n// Returns split view layer if exist\nexport const getSplitViewLayer = layers => layers.find(layer => layer.renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD);\n\n// Checks if split view map\nexport const isSplitViewMap = layers => !!getSplitViewLayer(layers);\nexport const formatCoordinate = value => {\n  try {\n    return JSON.parse(value).map(v => v.toFixed(6)).join(', ');\n  } catch (e) {\n    return value;\n  }\n};\n\n// Formats a DHIS2 time string\nexport const formatTime = time => `${time.substring(0, 10)} ${time.substring(11, 16)}`;\n\n// Get the longest text length from an object property in an array\nexport const getLongestTextLength = (array, key) => array.reduce((text, curr) => curr[key] && String(curr[key]).length > text.length ? String(curr[key]) : text, '').length;","import * as types from '../constants/actionTypes.js';\nexport const newMap = () => ({\n  type: types.MAP_NEW\n});\nexport const setMap = config => ({\n  type: types.MAP_SET,\n  payload: config\n});\nexport const setMapProps = props => ({\n  type: types.MAP_PROPS_SET,\n  payload: props\n});\nexport const openCoordinatePopup = coord => ({\n  type: types.MAP_COORDINATE_OPEN,\n  payload: coord\n});\nexport const closeCoordinatePopup = () => ({\n  type: types.MAP_COORDINATE_CLOSE\n});\nexport const openContextMenu = payload => ({\n  type: types.MAP_CONTEXT_MENU_OPEN,\n  payload\n});\nexport const closeContextMenu = () => ({\n  type: types.MAP_CONTEXT_MENU_CLOSE\n});\nexport const showEarthEngineValue = (layerId, coordinate) => ({\n  type: types.MAP_EARTH_ENGINE_VALUE_SHOW,\n  layerId,\n  coordinate\n});\nexport const clearAlerts = () => ({\n  type: types.MAP_ALERTS_CLEAR\n});","export const ALERT_SUCCESS = {\n  success: true\n};\nexport const ALERT_SUCCESS_DELAY = {\n  success: true,\n  duration: 3000\n};\nexport const ALERT_CRITICAL = {\n  critical: true\n};\nexport const ALERT_MESSAGE_DYNAMIC = _ref => {\n  let {\n    msg\n  } = _ref;\n  return msg;\n};\nexport const ALERT_OPTIONS_DYNAMIC = _ref2 => {\n  let {\n    isError\n  } = _ref2;\n  return isError ? ALERT_CRITICAL : ALERT_SUCCESS;\n};","import { isNil, omitBy, pick, isObject, omit } from 'lodash/fp';\nimport { EARTH_ENGINE_LAYER, GEOJSON_URL_LAYER, TRACKED_ENTITY_LAYER } from '../constants/layers.js';\n\n// TODO: get latitude, longitude, zoom from map + basemap: 'none'\nconst validMapProperties = ['basemap', 'id', 'latitude', 'longitude', 'mapViews', 'name', 'description', 'user', 'zoom', 'publicAccess', 'created', 'lastUpdated'];\nconst validLayerProperties = ['aggregationType', 'areaRadius', 'band', 'classes', 'colorHigh',\n// Deprecated\n'colorLow',\n// Deprecated\n'colorScale', 'columns', 'config', 'created', 'datasetId', 'displayName', 'endDate', 'eventCoordinateField', 'eventClustering', 'eventPointColor', 'eventPointRadius', 'eventStatus', 'featureStyle',\n// used by GEOJSON_URL_LAYER, stored in layer config\n'filter', 'filters', 'followUp', 'id', 'labels', 'labelFontSize', 'labelFontStyle', 'labelFontWeight', 'labelFontColor', 'labelTemplate', 'lastUpdated', 'layer', 'layerId', 'legendSet', 'method', 'name', 'noDataColor', 'opacity', 'organisationUnitColor', 'organisationUnitGroupSet', 'organisationUnitSelectionMode', 'orgUnitField', 'orgUnitFieldDisplayName', 'params', 'periodName', 'periodType', 'renderingStrategy', 'program', 'programStage', 'programStatus', 'radiusHigh', 'radiusLow', 'rows', 'serverCluster', 'startDate', 'styleDataItem', 'thematicMapType', 'trackedEntityType', 'valueType', 'relationshipType', 'relatedPointColor', 'relatedPointRadius', 'relationshipLineColor', 'relationshipOutsideProgram'];\nconst models = ['program', 'programStage', 'organisationUnitGroupSet'];\nconst validModelProperties = ['id', 'name', 'path', 'dimensionType', 'dimensionItemType'];\nexport const cleanMapConfig = _ref => {\n  let {\n    config,\n    defaultBasemapId\n  } = _ref;\n  return {\n    ...omitBy(isNil, pick(validMapProperties, config)),\n    basemap: getBasemapString(config.basemap, defaultBasemapId),\n    mapViews: config.mapViews.map(cleanLayerConfig)\n  };\n};\nconst getBasemapString = (basemap, defaultBasemapId) => {\n  if (!basemap) {\n    return defaultBasemapId;\n  }\n  if (basemap.isVisible === false) {\n    return 'none';\n  }\n  return basemap.id || defaultBasemapId;\n};\nconst cleanLayerConfig = layer => ({\n  ...models2objects(pick(validLayerProperties, layer))\n});\n\n// TODO: This feels hacky, find better way to clean map configs before saving\nconst models2objects = layer => {\n  const {\n    layer: layerType\n  } = layer;\n  Object.keys(layer).forEach(key => {\n    layer[key] = models.includes(key) ? pick(validModelProperties, layer[key]) : layer[key];\n  });\n  if (layer.rows) {\n    layer.rows = layer.rows.map(cleanDimension);\n  }\n  if (layerType === EARTH_ENGINE_LAYER) {\n    const {\n      layerId: id,\n      band,\n      params,\n      aggregationType,\n      filter\n    } = layer;\n    const eeConfig = {\n      id,\n      params,\n      band,\n      aggregationType,\n      filter\n    };\n\n    // Removes undefined keys before stringify\n    Object.keys(eeConfig).forEach(key => eeConfig[key] === undefined && delete eeConfig[key]);\n    layer.config = JSON.stringify(eeConfig);\n    delete layer.layerId;\n    delete layer.datasetId;\n    delete layer.params;\n    delete layer.filter;\n    delete layer.filters;\n    delete layer.periodType;\n    delete layer.periodName;\n    delete layer.aggregationType;\n    delete layer.band;\n  } else if (layerType === TRACKED_ENTITY_LAYER) {\n    layer.config = JSON.stringify({\n      relationships: layer.relationshipType ? {\n        type: layer.relationshipType,\n        pointColor: layer.relatedPointColor,\n        pointRadius: layer.relatedPointRadius,\n        lineColor: layer.relationshipLineColor,\n        relationshipOutsideProgram: layer.relationshipOutsideProgram\n      } : null,\n      periodType: layer.periodType\n    });\n    delete layer.relationshipType;\n    delete layer.relatedPointColor;\n    delete layer.relatedPointRadius;\n    delete layer.relationshipLineColor;\n    delete layer.relationshipOutsideProgram;\n    delete layer.periodType;\n  } else if (layerType === GEOJSON_URL_LAYER) {\n    layer.config = {\n      ...layer.config,\n      featureStyle: {\n        ...layer.featureStyle\n      }\n    };\n    delete layer.featureStyle;\n  }\n  delete layer.id;\n  if (isObject(layer.config)) {\n    layer.config = JSON.stringify(layer.config); // External overlay\n  }\n\n  if (layer.styleDataItem) {\n    // Remove legendSet from styleDataItem as this is stored in a separate property\n    // Remove names as these can be translated and will be fetched on layer load\n    layer.styleDataItem = omit(['legendSet', 'name', 'optionSet.name'], layer.styleDataItem);\n    if (layer.styleDataItem.optionSet) {\n      // Remove name and code from options as these are not persistent\n      layer.styleDataItem.optionSet.options.forEach(option => {\n        delete option.name;\n        delete option.code;\n      });\n    }\n  }\n  return layer;\n};\nexport const cleanDimension = dim => ({\n  ...dim,\n  items: dim.items.map(item => pick(validModelProperties, item))\n});","import { FileMenu as UiFileMenu, useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataMutation } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setMapProps } from '../../actions/map.js';\nimport { ALERT_CRITICAL, ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC, ALERT_SUCCESS_DELAY } from '../../constants/alerts.js';\nimport { cleanMapConfig } from '../../util/favorites.js';\nimport history from '../../util/history.js';\nconst updateMapMutation = {\n  resource: 'maps',\n  type: 'update',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: {\n    skipTranslation: true,\n    skipSharing: true\n  },\n  data: _ref2 => {\n    let {\n      data\n    } = _ref2;\n    return data;\n  }\n};\nconst createMapMutation = {\n  resource: 'maps',\n  type: 'create',\n  data: _ref3 => {\n    let {\n      data\n    } = _ref3;\n    return data;\n  }\n};\nexport const getMapName = name => name || i18n.t('Untitled map, {{date}}', {\n  date: new Date().toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: '2-digit'\n  })\n});\nconst getSavedMessage = name => i18n.t('Map \"{{- name}}\" is saved.', {\n  name\n});\nconst getSaveFailureMessage = message => i18n.t('Failed to save map: {{message}}', {\n  message,\n  nsSeparator: ';'\n});\nconst FileMenu = _ref4 => {\n  let {\n    onFileMenuAction\n  } = _ref4;\n  const map = useSelector(state => state.map);\n  const dispatch = useDispatch();\n  const {\n    systemSettings,\n    currentUser\n  } = useCachedDataQuery();\n  const defaultBasemap = systemSettings.keyDefaultBaseMap;\n  //alerts\n  const saveAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC);\n  const saveAsAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_OPTIONS_DYNAMIC);\n  const deleteAlert = useAlert('Map successfully deleted', ALERT_SUCCESS_DELAY);\n  const fileMenuErrorAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const [putMap] = useDataMutation(updateMapMutation, {\n    onError: e => {\n      saveAlert.show({\n        msg: getSaveFailureMessage(e.message),\n        isError: true\n      });\n    }\n  });\n  const [postMap] = useDataMutation(createMapMutation, {\n    onError: e => {\n      saveAsAlert.show({\n        msg: getSaveFailureMessage(e.message),\n        isError: true\n      });\n    }\n  });\n  const onSave = async () => {\n    const config = cleanMapConfig({\n      config: map,\n      defaultBasemapId: defaultBasemap\n    });\n    await putMap({\n      id: map.id,\n      data: config\n    });\n    saveAlert.show({\n      msg: getSavedMessage(map.name)\n    });\n    if (map.id) {\n      history.replace(`/${map.id}`);\n    }\n  };\n  const onSaveAs = async _ref5 => {\n    let {\n      name,\n      description\n    } = _ref5;\n    const data = {\n      ...cleanMapConfig({\n        config: map,\n        defaultBasemapId: defaultBasemap\n      }),\n      name: getMapName(name),\n      description\n    };\n    delete data.id;\n    const res = await postMap({\n      data\n    });\n    if (res.status === 'OK') {\n      saveAsAlert.show({\n        msg: getSavedMessage(getMapName(name))\n      });\n      if (res.response.uid) {\n        history.push(`/${res.response.uid}`);\n      }\n    }\n  };\n  const onRename = _ref6 => {\n    let {\n      name,\n      description\n    } = _ref6;\n    dispatch(setMapProps({\n      name: getMapName(name),\n      description\n    }));\n    onFileMenuAction();\n  };\n  const onDelete = () => {\n    onNew();\n    deleteAlert.show();\n  };\n  const onNew = () => {\n    if (history.location.pathname === '/') {\n      history.replace('/');\n    } else {\n      history.push('/');\n    }\n  };\n  const onOpen = async id => {\n    const path = `/${id}`;\n    if (history.location.pathname === path) {\n      history.replace(path);\n    } else {\n      history.push(path);\n    }\n  };\n  const onFileMenuError = e => fileMenuErrorAlert.show({\n    msg: e.message\n  });\n  return /*#__PURE__*/React.createElement(UiFileMenu, {\n    currentUser: currentUser,\n    fileType: \"map\",\n    fileObject: map,\n    onNew: onNew,\n    onOpen: onOpen,\n    onSave: onSave,\n    onSaveAs: onSaveAs,\n    onRename: onRename,\n    onDelete: onDelete,\n    onError: onFileMenuError,\n    onShare: onFileMenuAction,\n    onTranslate: onFileMenuAction\n  });\n};\nFileMenu.propTypes = {\n  onFileMenuAction: PropTypes.func.isRequired\n};\nexport default FileMenu;","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"Drawer_drawer__mdCkz\",\"left\":\"Drawer_left__Bb8Nw\",\"right\":\"Drawer_right__d7R2p\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Drawer.module.css';\nconst Drawer = _ref => {\n  let {\n    position = 'right',\n    className,\n    children,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(className, styles.drawer, {\n      [styles.left]: position === 'left',\n      [styles.right]: position === 'right'\n    }),\n    \"data-test\": dataTest\n  }, children);\n};\nDrawer.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  position: PropTypes.string\n};\nexport default Drawer;","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"Checkbox_checkbox__7HlL+\"};","import { Checkbox as UiCheckbox, Tooltip, IconInfo16 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Checkbox.module.css';\n\n// Wrapper around @dhis2/ui checkbox for unified handling and styling\nconst Checkbox = _ref => {\n  let {\n    label,\n    checked = false,\n    disabled,\n    dense = true,\n    tooltip,\n    onChange,\n    className,\n    dataTest\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.checkbox, className),\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(UiCheckbox, {\n    label: label,\n    checked: checked,\n    dense: dense,\n    disabled: disabled,\n    onChange: _ref2 => {\n      let {\n        checked\n      } = _ref2;\n      return onChange(checked);\n    }\n  }), tooltip && /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltip\n  }, /*#__PURE__*/React.createElement(IconInfo16, null)));\n};\nCheckbox.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  checked: PropTypes.bool,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  label: PropTypes.string,\n  tooltip: PropTypes.string\n};\nexport default Checkbox;","// extracted by mini-css-extract-plugin\nexport default {\"colorButton\":\"ColorButton_colorButton__-dp85\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ColorButton.module.css';\nconst ColorButton = _ref => {\n  let {\n    color,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"label\", {\n    className: cx(styles.colorButton, className),\n    style: {\n      backgroundImage: `radial-gradient(\n                        circle, ${color} 35%, transparent 40%\n                    )`\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"color\",\n    value: color,\n    onChange: e => onChange(e.target.value.toUpperCase())\n  }));\n};\nColorButton.propTypes = {\n  color: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string\n};\nexport default ColorButton;","// extracted by mini-css-extract-plugin\nexport default {\"colorPicker\":\"ColorPicker_colorPicker__C84HM\",\"label\":\"ColorPicker_label__VNgc2\",\"icon\":\"ColorPicker_icon__mL6n4\",\"dark\":\"ColorPicker_dark__09ZgO\"};","import { IconChevronDown24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { isDarkColor } from '../../util/colors.js';\nimport styles from './styles/ColorPicker.module.css';\nconst ColorPicker = _ref => {\n  let {\n    color,\n    label,\n    width,\n    height,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.colorPicker, className)\n  }, label && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, label), /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      backgroundColor: color,\n      width: width || '100%',\n      height: height || 32\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: cx(styles.icon, {\n      [styles.dark]: !isDarkColor(color)\n    })\n  }, /*#__PURE__*/React.createElement(IconChevronDown24, null)), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"color\",\n    value: color,\n    onChange: e => onChange(e.target.value.toUpperCase())\n  }))));\n};\nColorPicker.propTypes = {\n  color: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  label: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default ColorPicker;","// extracted by mini-css-extract-plugin\nexport default {\"colorScale\":\"ColorScale_colorScale__pimdd\",\"item\":\"ColorScale_item__zK7Rn\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport colorbrewer from '../../constants/colorbrewer.js';\nimport styles from './styles/ColorScale.module.css';\n\n// Returns one color scale based on a code and number of classes\nconst ColorScale = _ref => {\n  let {\n    scale,\n    bins,\n    width,\n    onClick\n  } = _ref;\n  const colors = colorbrewer[scale][bins];\n  const itemWidth = width ? width / bins : 36;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    onClick: () => onClick(scale),\n    className: styles.colorScale,\n    style: {\n      ...(width && {\n        width\n      })\n    }\n  }, colors.map((color, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: styles.item,\n    style: {\n      backgroundColor: color,\n      width: itemWidth\n    }\n  })));\n};\nColorScale.propTypes = {\n  bins: PropTypes.number.isRequired,\n  scale: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  width: PropTypes.number\n};\nexport default ColorScale;","// extracted by mini-css-extract-plugin\nexport default {\"colorScale\":\"ColorScaleSelect_colorScale__VHsxt\",\"popover\":\"ColorScaleSelect_popover__i1BE6\"};","import { Popover } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useState, useRef } from 'react';\nimport { colorScales, getColorScale, getColorPalette } from '../../util/colors.js';\nimport ColorScale from './ColorScale.js';\nimport styles from './styles/ColorScaleSelect.module.css';\nconst ColorScaleSelect = _ref => {\n  let {\n    palette,\n    width,\n    onChange,\n    className\n  } = _ref;\n  const [isOpen, setIsOpen] = useState(false);\n  const anchorRef = useRef();\n  const bins = palette.split(',').length;\n  const scale = getColorScale(palette);\n  const onColorScaleSelect = scale => {\n    const classes = palette.split(',').length;\n    onChange(getColorPalette(scale, classes));\n    setIsOpen(false);\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: cx(styles.colorScale, className)\n  }, /*#__PURE__*/React.createElement(ColorScale, {\n    bins: bins,\n    scale: scale,\n    onClick: () => setIsOpen(true),\n    width: width || 260\n  })), isOpen && /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.popover,\n    style: {\n      width: width + 24 || 260\n    }\n  }, colorScales.map((scale, index) => /*#__PURE__*/React.createElement(ColorScale, {\n    key: index,\n    scale: scale,\n    bins: bins,\n    onClick: onColorScaleSelect,\n    width: width || 260\n  })))));\n};\nColorScaleSelect.propTypes = {\n  palette: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  width: PropTypes.number\n};\nexport default ColorScaleSelect;","import PropTypes from 'prop-types';\nconst ConditionalWrapper = _ref => {\n  let {\n    condition,\n    wrapper,\n    children\n  } = _ref;\n  return condition ? wrapper(children) : children;\n};\nConditionalWrapper.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  condition: PropTypes.bool.isRequired,\n  wrapper: PropTypes.elementType.isRequired\n};\nexport default ConditionalWrapper;","// extracted by mini-css-extract-plugin\nexport default {\"datePicker\":\"DatePicker_datePicker__QumBO\",\"label\":\"DatePicker_label__+Ajvr\",\"content\":\"DatePicker_content__psb1W\",\"box\":\"DatePicker_box__BB-cV\",\"inputDiv\":\"DatePicker_inputDiv__zcYR+\",\"input\":\"DatePicker_input__LTL60\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useEffect } from 'react';\nimport styles from './styles/DatePicker.module.css';\n\n// Fallback on browser native until full DatePicker support in @dhis2/ui\nconst DatePicker = _ref => {\n  let {\n    label,\n    name,\n    defaultVal,\n    onBlur,\n    className\n  } = _ref;\n  const inputEl = useRef(null);\n  useEffect(() => {\n    if (inputEl.current && defaultVal) {\n      inputEl.current.defaultValue = defaultVal.slice(0, 10);\n    }\n  }, [defaultVal]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.datePicker, className)\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: styles.label\n  }, label), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.box\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputDiv\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: styles.input,\n    ref: inputEl,\n    type: \"date\",\n    name: name,\n    onBlur: e => onBlur(e.target.value)\n  })))));\n};\nDatePicker.propTypes = {\n  label: PropTypes.string.isRequired,\n  onBlur: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  defaultVal: PropTypes.string,\n  name: PropTypes.string\n};\nexport default DatePicker;","// extracted by mini-css-extract-plugin\nexport default {\"inputField\":\"InputField_inputField__wKerC\"};","import { InputField } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/InputField.module.css';\nconst NumberField = _ref => {\n  let {\n    label,\n    value,\n    min,\n    max,\n    step = 1,\n    dense = true,\n    disabled,\n    helpText,\n    inputWidth,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(InputField, {\n    dense: dense,\n    type: \"number\",\n    min: String(min),\n    max: String(max),\n    step: String(step),\n    label: label,\n    value: Number.isNaN(value) ? '' : String(value),\n    disabled: disabled,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onChange(value);\n    },\n    helpText: helpText,\n    inputWidth: inputWidth\n  }));\n};\nNumberField.propTypes = {\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  helpText: PropTypes.string,\n  inputWidth: PropTypes.string,\n  max: PropTypes.number,\n  min: PropTypes.number,\n  step: PropTypes.number,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nexport default NumberField;","// extracted by mini-css-extract-plugin\nexport default {\"fontStyle\":\"FontStyle_fontStyle__3-gC4\",\"textSize\":\"FontStyle_textSize__1uiRc\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, IconTextBold24, IconTextItalic24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { LABEL_FONT_SIZE, LABEL_FONT_SIZE_MIN, LABEL_FONT_SIZE_MAX, LABEL_FONT_COLOR } from '../../constants/layers.js';\nimport { cssColor } from '../../util/colors.js';\nimport ColorButton from './ColorButton.js';\nimport NumberField from './NumberField.js';\nimport styles from './styles/FontStyle.module.css';\nconst FontStyle = _ref => {\n  let {\n    color,\n    size,\n    weight,\n    fontStyle,\n    onColorChange,\n    onSizeChange,\n    onWeightChange,\n    onStyleChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.fontStyle, className)\n  }, onSizeChange && /*#__PURE__*/React.createElement(NumberField, {\n    dense: true,\n    label: i18n.t('Size'),\n    min: LABEL_FONT_SIZE_MIN,\n    max: LABEL_FONT_SIZE_MAX,\n    value: parseInt(size !== undefined ? size : LABEL_FONT_SIZE, 10),\n    onChange: value => onSizeChange(value + 'px'),\n    className: styles.textSize\n  }), onColorChange && /*#__PURE__*/React.createElement(ColorButton, {\n    color: cssColor(color) || LABEL_FONT_COLOR,\n    onChange: onColorChange,\n    button: true\n  }), onWeightChange && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(IconTextBold24, null),\n    onClick: () => {\n      onWeightChange(weight === 'bold' ? 'normal' : 'bold');\n    },\n    secondary: true,\n    toggled: weight === 'bold'\n  }), onStyleChange && /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(IconTextItalic24, null),\n    onClick: () => {\n      onStyleChange(fontStyle === 'italic' ? 'normal' : 'italic');\n    },\n    secondary: true,\n    toggled: fontStyle === 'italic'\n  }));\n};\nFontStyle.propTypes = {\n  className: PropTypes.string,\n  color: PropTypes.string,\n  fontStyle: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  weight: PropTypes.string,\n  onColorChange: PropTypes.func,\n  onSizeChange: PropTypes.func,\n  onStyleChange: PropTypes.func,\n  onWeightChange: PropTypes.func\n};\nexport default FontStyle;","// extracted by mini-css-extract-plugin\nexport default {\"help\":\"Help_help__NuORs\",\"content\":\"Help_content__tANr9\"};","import { IconInfo16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Help.module.css';\n\n// Adds info icon next to help content\nconst HelpWithIcon = _ref => {\n  let {\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.help\n  }, /*#__PURE__*/React.createElement(IconInfo16, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, children));\n};\nHelpWithIcon.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default HelpWithIcon;","// extracted by mini-css-extract-plugin\nexport default {\"iconButton\":\"IconButton_iconButton__2JNZa\",\"disabled\":\"IconButton_disabled__JuD0G\"};","import { Tooltip } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/IconButton.module.css';\nconst IconButton = _ref => {\n  let {\n    tooltip,\n    onClick,\n    className,\n    children,\n    dataTest,\n    disabled,\n    ariaLabel\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onClick,\n    className: cx(styles.iconButton, className, {\n      [styles.disabled]: !!disabled\n    }),\n    \"data-test\": dataTest,\n    disabled: disabled,\n    \"aria-label\": ariaLabel\n  }, tooltip ? /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltip\n  }, children) : children);\n};\nIconButton.propTypes = {\n  ariaLabel: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  tooltip: PropTypes.string,\n  onClick: PropTypes.func\n};\nexport default IconButton;","// extracted by mini-css-extract-plugin\nexport default {\"imageSelect\":\"ImageSelect_imageSelect__wmj1K\",\"title\":\"ImageSelect_title__QUmHA\",\"imageContainer\":\"ImageSelect_imageContainer__7YHVp\",\"imageContainerSelected\":\"ImageSelect_imageContainerSelected__hGrAW\",\"image\":\"ImageSelect_image__j5GA1\",\"noImage\":\"ImageSelect_noImage__ZJ8Qm\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ImageSelect.module.css';\nconst ImageSelect = _ref => {\n  let {\n    id,\n    img,\n    title,\n    isSelected,\n    onClick,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageSelect, className),\n    title: title,\n    onClick: () => onClick(id)\n  }, title ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title\n  }, title) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageContainer, {\n      [styles.imageContainerSelected]: isSelected\n    })\n  }, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  })));\n};\nImageSelect.propTypes = {\n  id: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  img: PropTypes.string,\n  isSelected: PropTypes.bool,\n  title: PropTypes.string\n};\nexport default ImageSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { LABEL_TEMPLATE_NAME_ONLY, LABEL_TEMPLATE_NAME_AND_VALUE, LABEL_TEMPLATE_VALUE_ONLY } from '../../constants/layers.js';\nimport { SelectField } from '.';\nconst getLabelDisplayOptions = () => [{\n  id: LABEL_TEMPLATE_NAME_ONLY,\n  name: i18n.t('Name')\n}, {\n  id: LABEL_TEMPLATE_NAME_AND_VALUE,\n  name: i18n.t('Name and value')\n}, {\n  id: LABEL_TEMPLATE_VALUE_ONLY,\n  name: i18n.t('Value')\n}];\nconst LabelDisplayOptions = _ref => {\n  let {\n    option,\n    onDisplayOptionChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Display'),\n    loading: false,\n    items: getLabelDisplayOptions(),\n    value: option || null,\n    onChange: _ref2 => {\n      let {\n        id\n      } = _ref2;\n      return onDisplayOptionChange(id);\n    }\n  });\n};\nLabelDisplayOptions.propTypes = {\n  onDisplayOptionChange: PropTypes.func.isRequired,\n  option: PropTypes.string\n};\nexport default LabelDisplayOptions;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/MenuButton.module.css';\n\n/* Copied from https://github.com/dhis2/data-visualizer-app/blob/master/packages/app/src/components/MenuButton/MenuButton.js */\nconst MenuButton = _ref => {\n  let {\n    children,\n    dataTest,\n    disabled,\n    name,\n    onBlur,\n    onClick,\n    onFocus\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.menuButton,\n    \"data-test\": dataTest,\n    disabled: disabled,\n    name: name,\n    onBlur: onBlur,\n    onClick: onClick,\n    onFocus: onFocus\n  }, children);\n};\nMenuButton.propTypes = {\n  children: PropTypes.node,\n  dataTest: PropTypes.string,\n  disabled: PropTypes.bool,\n  name: PropTypes.string,\n  onBlur: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default MenuButton;","// extracted by mini-css-extract-plugin\nexport default {\"radioGroup\":\"RadioGroup_radioGroup__B8D+1\",\"row\":\"RadioGroup_row__D+3T7\"};","import { FieldGroup } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport styles from './styles/RadioGroup.module.css';\nexport const RadioContext = /*#__PURE__*/React.createContext();\nconst RadioGroup = _ref => {\n  let {\n    value,\n    label,\n    helpText,\n    display,\n    onChange,\n    children,\n    dataTest\n  } = _ref;\n  const [radio, setRadio] = useState(value);\n  useEffect(() => {\n    if (value !== radio) {\n      setRadio(value);\n    }\n  }, [value, radio]);\n  return /*#__PURE__*/React.createElement(RadioContext.Provider, {\n    value: {\n      radio,\n      onChange\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.radioGroup, {\n      [styles.row]: display === 'row'\n    })\n  }, /*#__PURE__*/React.createElement(FieldGroup, {\n    label: label,\n    helpText: helpText,\n    dataTest: dataTest\n  }, children)));\n};\nRadioGroup.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  children: PropTypes.arrayOf(PropTypes.node),\n  dataTest: PropTypes.string,\n  display: PropTypes.string,\n  helpText: PropTypes.string,\n  label: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default RadioGroup;","import { Radio as UiRadio } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useContext } from 'react';\nimport { RadioContext } from './RadioGroup.js';\nconst Radio = _ref => {\n  let {\n    value,\n    disabled,\n    dense = true,\n    dataTest,\n    label\n  } = _ref;\n  const {\n    radio,\n    onChange\n  } = useContext(RadioContext);\n\n  // onChange is from the parent component\n  const onClick = () => {\n    if (value !== radio) {\n      onChange(value);\n    }\n  };\n  return /*#__PURE__*/React.createElement(UiRadio, {\n    label: label,\n    dense: dense,\n    disabled: disabled,\n    checked: value === radio,\n    onChange: onClick,\n    dataTest: dataTest,\n    value: value\n  });\n};\nRadio.propTypes = {\n  label: PropTypes.string.isRequired,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default Radio;","import { SingleSelectField, SingleSelectOption, MultiSelectField, MultiSelectOption } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport styles from './styles/InputField.module.css';\n\n/**\n * Wrapper component around @dhis2/ui SingleSelectField and MultiSelectField\n * Allows options to be created from an array of models (containing id and name properties)\n * id can be numbers, although @dhis2/ui requires option values to be strings.\n */\nconst SelectField = props => {\n  const {\n    dense = true,\n    errorText,\n    helpText,\n    warning,\n    items,\n    label,\n    prefix,\n    loading,\n    multiple,\n    disabled,\n    onChange,\n    className,\n    value,\n    dataTest\n  } = props;\n  const isLoading = loading === true;\n  const Select = multiple ? MultiSelectField : SingleSelectField;\n  const Option = multiple ? MultiSelectOption : SingleSelectOption;\n  let selected;\n  if (multiple) {\n    selected = Array.isArray(value) ? value.map(v => String(v)) : [];\n  } else {\n    selected = value !== undefined && value !== null ? String(value) : '';\n  }\n\n  // Returns selected items in the original format\n  const onSelectChange = useCallback(_ref => {\n    let {\n      selected\n    } = _ref;\n    return onChange(multiple ? items.filter(item => selected.includes(String(item.id))).map(item => item.id) : items.find(item => String(item.id) === selected));\n  }, [items, multiple, onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(Select, {\n    dense: dense,\n    label: label,\n    prefix: prefix,\n    selected: !isLoading ? selected : undefined,\n    disabled: disabled,\n    loading: isLoading,\n    error: !!errorText,\n    warning: !!warning,\n    validationText: warning ? warning : errorText,\n    helpText: helpText,\n    onChange: onSelectChange,\n    dataTest: dataTest\n  }, items && items.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Option, {\n      key: id,\n      value: String(id),\n      label: name\n    });\n  })));\n};\nSelectField.propTypes = {\n  className: PropTypes.string,\n  dataTest: PropTypes.string,\n  dense: PropTypes.bool,\n  disabled: PropTypes.bool,\n  errorText: PropTypes.string,\n  // If set, shows the error message below the SelectField\n  helpText: PropTypes.string,\n  // If set, shows the help text below the SelectField\n  items: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    name: PropTypes.string\n  })),\n  label: PropTypes.string,\n  // If true, spinner will be shown in the select menu. If string, the text will be shown\n  loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  // If true, then use multiple selection. Adds a checkbox to each menu item.\n  multiple: PropTypes.bool,\n  prefix: PropTypes.string,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number]))]),\n  warning: PropTypes.string,\n  // If set, shows the warning message below the SelectField\n  onChange: PropTypes.func\n};\nexport default SelectField;","import { TabBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nexport const TabContext = /*#__PURE__*/React.createContext();\nconst Tabs = _ref => {\n  let {\n    value,\n    onChange,\n    children\n  } = _ref;\n  const [tab, setTab] = useState(value);\n  useEffect(() => {\n    if (value !== tab) {\n      setTab(value);\n    }\n  }, [value, tab]);\n  return /*#__PURE__*/React.createElement(TabContext.Provider, {\n    value: {\n      tab,\n      onChange\n    }\n  }, /*#__PURE__*/React.createElement(TabBar, null, children));\n};\nTabs.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default Tabs;","import { Tab as UiTab } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useContext } from 'react';\nimport { TabContext } from './Tabs.js';\nconst Tab = _ref => {\n  let {\n    value,\n    dataTest,\n    children\n  } = _ref;\n  const {\n    tab,\n    onChange\n  } = useContext(TabContext);\n\n  // onChange is from the parent component\n  const onClick = () => {\n    if (value !== tab) {\n      onChange(value);\n    }\n  };\n  return /*#__PURE__*/React.createElement(UiTab, {\n    selected: value === tab,\n    onClick: onClick,\n    dataTest: dataTest\n  }, children);\n};\nTab.propTypes = {\n  children: PropTypes.node.isRequired,\n  value: PropTypes.string.isRequired,\n  dataTest: PropTypes.string\n};\nexport default Tab;","import { InputField } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/InputField.module.css';\n\n// Wrapper component around @dhis2/ui InputField\nconst TextField = _ref => {\n  let {\n    type,\n    label,\n    value,\n    dense = true,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.inputField, className)\n  }, /*#__PURE__*/React.createElement(InputField, {\n    dense: dense,\n    type: type,\n    label: label,\n    value: value,\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return onChange(value);\n    }\n  }));\n};\nTextField.propTypes = {\n  label: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dense: PropTypes.bool,\n  type: PropTypes.string,\n  value: PropTypes.string\n};\nexport default TextField;","// extracted by mini-css-extract-plugin\nexport default {\"cover\":\"MapLoadingMask_cover__hmYUQ\"};","import { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport cx from 'classnames';\nimport React from 'react';\nimport styles from './styles/MapLoadingMask.module.css';\nexport const loadingMaskClass = 'dhis2-map-loading-mask';\nconst MapLoadingMask = () => /*#__PURE__*/React.createElement(ComponentCover, {\n  translucent: true,\n  className: cx(styles.cover, loadingMaskClass),\n  dataTest: \"map-loading-mask\"\n}, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\nexport default MapLoadingMask;","// extracted by mini-css-extract-plugin\nexport default {\"legendLayers\":\"LegendLayers_legendLayers__3eibN\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setDownloadConfig } from '../../actions/download.js';\nimport { Checkbox } from '../core/index.js';\nimport styles from './styles/LegendLayers.module.css';\nconst LegendLayers = _ref => {\n  let {\n    layers,\n    show\n  } = _ref;\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendLayers\n  }, layers.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Checkbox, {\n      key: id,\n      label: name,\n      checked: show.includes(id),\n      onChange: checked => dispatch(setDownloadConfig({\n        showInLegend: checked ? [...show, id] : show.filter(l => l !== id)\n      }))\n    });\n  }).reverse());\n};\nLegendLayers.propTypes = {\n  layers: PropTypes.array.isRequired,\n  show: PropTypes.PropTypes.array\n};\nexport default LegendLayers;","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NorthArrowPosition_root__Z282w\",\"label\":\"NorthArrowPosition_label__Mt7Rc\",\"position\":\"NorthArrowPosition_position__nC8ll\",\"legend\":\"NorthArrowPosition_legend__iORB7\",\"selected\":\"NorthArrowPosition_selected__ZpCSm\",\"topleft\":\"NorthArrowPosition_topleft__jNTVd\",\"topright\":\"NorthArrowPosition_topright__VvryL\",\"bottomleft\":\"NorthArrowPosition_bottomleft__nvWp1\",\"bottomright\":\"NorthArrowPosition_bottomright__nV8UR\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/NorthArrowPosition.module.css';\nconst northArrowPositions = ['topleft', 'topright', 'bottomleft', 'bottomright'];\nconst NorthArrowPosition = _ref => {\n  let {\n    position,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.root\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: styles.label\n  }, i18n.t('Position:')), northArrowPositions.map(pos => /*#__PURE__*/React.createElement(\"div\", {\n    key: pos,\n    className: cx(styles.position, {\n      [styles.selected]: pos === position\n    }),\n    onClick: pos !== position ? () => onChange(pos) : null\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.legend, styles[pos])\n  }))));\n};\nNorthArrowPosition.propTypes = {\n  position: PropTypes.oneOf(northArrowPositions).isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default NorthArrowPosition;","// extracted by mini-css-extract-plugin\nexport default {\"downloadSettingsPanel\":\"DownloadSettings_downloadSettingsPanel__OBWWy\",\"downloadSettings\":\"DownloadSettings_downloadSettings__W0r45\",\"content\":\"DownloadSettings_content__8RUsT\",\"checkbox\":\"DownloadSettings_checkbox__jxcod\",\"buttons\":\"DownloadSettings_buttons__QS5l3\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip } from '@dhis2/ui';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setDownloadConfig } from '../../actions/download.js';\nimport { standardizeFilename } from '../../util/dataDownload.js';\nimport { downloadMapImage, downloadSupport } from '../../util/export-image.js';\nimport { getSplitViewLayer } from '../../util/helpers.js';\nimport { closeDownloadMode, getHashUrlParam } from '../../util/history.js';\nimport { getMapName } from '../app/FileMenu.js';\nimport Drawer from '../core/Drawer.js';\nimport { Checkbox, Help } from '../core/index.js';\nimport { loadingMaskClass } from '../map/MapLoadingMask.js';\nimport LegendLayers from './LegendLayers.js';\nimport NorthArrowPosition from './NorthArrowPosition.js';\nimport styles from './styles/DownloadSettings.module.css';\nconst mapContainerId = 'dhis2-map-container';\nconst mapClass = 'dhis2-map';\nconst renderedClass = 'dhis2-map-rendered';\nconst downloadingClass = 'dhis2-map-downloading';\nconst DownloadSettings = () => {\n  const isPushAnalytics = getHashUrlParam('isPushAnalytics');\n  const [isRendered, setIsRendered] = useState(false);\n  const [error, setError] = useState(null);\n  const dispatch = useDispatch();\n  const {\n    mapViews,\n    name,\n    description\n  } = useSelector(state => state.map);\n  const {\n    showName,\n    showDescription,\n    showLegend,\n    showInLegend,\n    showOverviewMap,\n    hasOverviewMapSpace,\n    showNorthArrow,\n    northArrowPosition,\n    includeMargins\n  } = useSelector(state => state.download);\n  const legendLayers = useMemo(() => mapViews.filter(layer => layer.legend && layer.isVisible), [mapViews]);\n  const onDownload = useCallback(() => {\n    const filename = standardizeFilename(getMapName(name), 'png');\n    let mapEl = document.getElementById(mapContainerId);\n    if (includeMargins) {\n      mapEl = mapEl.parentNode;\n    }\n\n    // Temporary added to remove close 'x' from map popups\n    mapEl.classList.add(downloadingClass);\n    downloadMapImage(mapEl, filename).then(() => mapEl.classList.remove(downloadingClass)).catch(setError);\n  }, [name, includeMargins]);\n  const hasLayers = mapViews.length > 0;\n  useEffect(() => {\n    // Set default values\n    dispatch(setDownloadConfig({\n      showName: !!name,\n      showDescription: !!description,\n      showLegend: !!legendLayers.length,\n      showInLegend: legendLayers.map(l => l.id),\n      showOverviewMap: hasLayers\n    }));\n  }, [name, description, legendLayers, hasLayers, dispatch]);\n  useEffect(() => {\n    if (isPushAnalytics) {\n      // Multiple map elements if split view\n      const mapElements = document.getElementsByClassName(mapClass);\n\n      // Observe is rendered class is added to map element\n      const observer = new MutationObserver(mutations => {\n        mutations.forEach(mutation => {\n          if (mutation.attributeName == 'class') {\n            setIsRendered(!document.querySelector(`.${loadingMaskClass}`) && mutation.target.classList.contains(renderedClass));\n          }\n        });\n      });\n      for (const mapEl of mapElements) {\n        mapEl.classList.remove(renderedClass);\n        observer.observe(mapEl, {\n          attributes: true\n        });\n      }\n      return () => {\n        observer.disconnect();\n      };\n    }\n  }, [isPushAnalytics]);\n  const isSupported = downloadSupport() && !error;\n  const isSplitView = !!getSplitViewLayer(mapViews);\n  const showMarginsCheckbox = false; // Not in use\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.downloadSettingsPanel,\n    \"data-test\": \"download-settings\"\n  }, /*#__PURE__*/React.createElement(Drawer, {\n    position: \"left\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.downloadSettings\n  }, /*#__PURE__*/React.createElement(\"h2\", null, i18n.t('Download map')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dialogContent\n  }, isSupported ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show map name'),\n    dataTest: \"input-show-map-name\",\n    checked: showName,\n    disabled: !name,\n    onChange: value => dispatch(setDownloadConfig({\n      showName: value\n    }))\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show map description'),\n    checked: showDescription,\n    disabled: !description,\n    onChange: value => dispatch(setDownloadConfig({\n      showDescription: value\n    })),\n    tooltip: description ? i18n.t('Description can be changed from File > Rename menu') : i18n.t('Set the map description when you save the map or from File > Rename menu')\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show legend'),\n    checked: showLegend,\n    disabled: !legendLayers.length,\n    onChange: value => dispatch(setDownloadConfig({\n      showLegend: value\n    }))\n  }), showLegend && legendLayers.length > 1 && /*#__PURE__*/React.createElement(LegendLayers, {\n    layers: legendLayers,\n    show: showInLegend\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show overview map'),\n    checked: showOverviewMap,\n    disabled: !hasOverviewMapSpace,\n    onChange: value => dispatch(setDownloadConfig({\n      showOverviewMap: value\n    }))\n  }), /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show north arrow'),\n    checked: showNorthArrow,\n    disabled: isSplitView,\n    onChange: value => dispatch(setDownloadConfig({\n      showNorthArrow: value\n    }))\n  }), showNorthArrow && !isSplitView && /*#__PURE__*/React.createElement(NorthArrowPosition, {\n    position: northArrowPosition,\n    onChange: value => dispatch(setDownloadConfig({\n      northArrowPosition: value\n    }))\n  }), showMarginsCheckbox && /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Include margins in download'),\n    checked: includeMargins,\n    onChange: value => dispatch(setDownloadConfig({\n      includeMargins: value\n    }))\n  }), /*#__PURE__*/React.createElement(Help, null, i18n.t('Resize your browser window to change the map dimensions.'))) : i18n.t('Map download is not supported by your browser. Try Google Chrome or Firefox.')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.buttons\n  }, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: closeDownloadMode\n  }, isSupported ? i18n.t('Cancel') : i18n.t('Close')), isSupported && /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: isPushAnalytics && !isRendered,\n    onClick: onDownload,\n    className: \"push-analytics-download-button\"\n  }, i18n.t('Download')))))));\n};\nexport default DownloadSettings;","import * as types from '../constants/actionTypes.js';\n\n// Add new layer\nexport const addLayer = config => ({\n  type: types.LAYER_ADD,\n  payload: config\n});\n\n// Remove an overlay\nexport const removeLayer = id => ({\n  type: types.LAYER_REMOVE,\n  id\n});\n\n// Edit overlay\nexport const editLayer = layer => ({\n  type: types.LAYER_EDIT,\n  payload: layer\n});\n\n// Cancel overlay (stop editing)\nexport const cancelLayer = () => ({\n  type: types.LAYER_CANCEL\n});\n\n// Update existing overlay\nexport const updateLayer = layer => ({\n  type: types.LAYER_UPDATE,\n  payload: layer\n});\n\n// Expand/collapse overlay card\nexport const toggleLayerExpand = id => ({\n  type: types.LAYER_TOGGLE_EXPAND,\n  id\n});\n\n// Show/hide overlay on map\nexport const toggleLayerVisibility = id => ({\n  type: types.LAYER_TOGGLE_VISIBILITY,\n  id\n});\n\n// Set overlay opacity\nexport const changeLayerOpacity = (id, opacity) => ({\n  type: types.LAYER_CHANGE_OPACITY,\n  id,\n  opacity\n});\n\n// Change ordering of overlays\nexport const sortLayers = _ref => {\n  let {\n    oldIndex,\n    newIndex\n  } = _ref;\n  return {\n    type: types.LAYER_SORT,\n    oldIndex,\n    newIndex\n  };\n};\n\n// Set that layer is loading\nexport const setLayerLoading = id => ({\n  type: types.LAYER_LOADING_SET,\n  id\n});","import i18n from '@dhis2/d2-i18n';\nimport { TILE_LAYER, BING_LAYER } from '../constants/layers.js';\nexport const FALLBACK_BASEMAP_ID = 'osmLight';\nexport const getFallbackBasemap = () => defaultBasemaps()[0];\nexport const getBasemap = id => defaultBasemaps().find(map => map.id === id);\nexport const defaultBasemaps = () => [{\n  id: FALLBACK_BASEMAP_ID,\n  name: i18n.t('OSM Light'),\n  img: 'images/osmlight.png',\n  config: {\n    type: TILE_LAYER,\n    url: '//cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png',\n    attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"http://cartodb.com/attributions\">CartoDB</a>'\n  },\n  isDark: false\n}, {\n  id: 'openStreetMap',\n  name: i18n.t('OSM Detailed'),\n  img: 'images/osm.png',\n  config: {\n    type: TILE_LAYER,\n    url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n    attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\n  },\n  isDark: false\n}, {\n  id: 'bingLight',\n  name: i18n.t('Bing Road'),\n  img: 'images/bingroad.png',\n  config: {\n    type: BING_LAYER,\n    style: 'CanvasLight',\n    apiKey: 'AotYGLQC0RDcofHC5pWLaW7k854n-6T9mTunsev9LEFwVqGaVnG8b4KERNY9PeKA' // TODO: Read from db\n  },\n\n  isDark: false\n}, {\n  id: 'bingDark',\n  name: i18n.t('Bing Dark'),\n  img: 'images/bingdark.png',\n  config: {\n    type: BING_LAYER,\n    style: 'CanvasDark'\n  },\n  isDark: true\n}, {\n  id: 'bingAerial',\n  name: i18n.t('Bing Aerial'),\n  img: 'images/bingaerial.jpeg',\n  config: {\n    type: BING_LAYER,\n    style: 'Aerial'\n  },\n  isDark: true\n}, {\n  id: 'bingHybrid',\n  name: i18n.t('Bing Aerial Labels'),\n  img: 'images/binghybrid.jpeg',\n  config: {\n    type: BING_LAYER,\n    style: 'AerialWithLabelsOnDemand'\n  },\n  isDark: true\n}];","import { arrayMoveImmutable } from 'array-move';\nimport { generateUid } from 'd2/uid';\nimport * as types from '../constants/actionTypes.js';\nexport const defaultBasemapState = {\n  isVisible: true,\n  isExpanded: true,\n  opacity: 1\n};\nconst defaultState = {\n  bounds: [[-18.7, -34.9], [50.2, 35.9]],\n  basemap: defaultBasemapState,\n  mapViews: []\n};\nconst basemap = (state, action) => {\n  switch (action.type) {\n    case types.BASEMAP_SELECTED:\n      if (state.id === action.payload.id) {\n        return state;\n      }\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.BASEMAP_CHANGE_OPACITY:\n      return {\n        ...state,\n        opacity: action.opacity\n      };\n    case types.BASEMAP_TOGGLE_EXPAND:\n      return {\n        ...state,\n        isExpanded: !state.isExpanded\n      };\n    case types.BASEMAP_TOGGLE_VISIBILITY:\n      return {\n        ...state,\n        isVisible: !state.isVisible\n      };\n    default:\n      return state;\n  }\n};\nconst layer = (state, action) => {\n  let filters;\n  switch (action.type) {\n    case types.LAYER_UPDATE:\n      if (state.id !== action.payload.id) {\n        return state;\n      }\n      return {\n        ...action.payload\n      };\n    case types.LAYER_CHANGE_OPACITY:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        opacity: action.opacity\n      };\n    case types.LAYER_LOADING_SET:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isLoading: true\n      };\n    case types.LAYER_TOGGLE_VISIBILITY:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isVisible: !state.isVisible\n      };\n    case types.LAYER_TOGGLE_EXPAND:\n      if (state.id !== action.id) {\n        return state;\n      }\n      return {\n        ...state,\n        isExpanded: !state.isExpanded\n      };\n\n    // Add/change filter\n    case types.DATA_FILTER_SET:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      return {\n        ...state,\n        dataFilters: {\n          ...state.dataFilters,\n          [action.fieldId]: action.filter\n        }\n      };\n\n    // Remove field from filter\n    case types.DATA_FILTER_CLEAR:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      filters = {\n        ...state.dataFilters\n      };\n      delete filters[action.fieldId];\n      return {\n        ...state,\n        dataFilters: filters\n      };\n    case types.MAP_ALERTS_CLEAR:\n      return {\n        ...state,\n        alerts: undefined\n      };\n    case types.MAP_EARTH_ENGINE_VALUE_SHOW:\n      if (state.id !== action.layerId) {\n        return state;\n      }\n      return {\n        ...state,\n        coordinate: action.coordinate\n      };\n    default:\n      return state;\n  }\n};\nconst map = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let mapViews;\n  let sortedMapViews;\n  switch (action.type) {\n    case types.MAP_NEW:\n      return {\n        ...defaultState\n      };\n    case types.MAP_SET:\n      return {\n        ...defaultState,\n        ...action.payload,\n        basemap: {\n          ...defaultState.basemap,\n          ...action.payload.basemap\n        }\n      };\n    case types.MAP_PROPS_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.MAP_COORDINATE_OPEN:\n      return {\n        ...state,\n        coordinatePopup: action.payload\n      };\n    case types.MAP_COORDINATE_CLOSE:\n      return {\n        ...state,\n        coordinatePopup: null\n      };\n    case types.BASEMAP_SELECTED:\n    case types.BASEMAP_CHANGE_OPACITY:\n    case types.BASEMAP_TOGGLE_EXPAND:\n    case types.BASEMAP_TOGGLE_VISIBILITY:\n      return {\n        ...state,\n        basemap: basemap(state.basemap, action)\n      };\n    case types.LAYER_ADD:\n      // Check to only allow external layers to be added once\n      if (state.mapViews.filter(l => l.id === action.payload.id).length) {\n        return state;\n      }\n      return {\n        ...state,\n        mapViews: [...state.mapViews, {\n          ...action.payload,\n          id: generateUid()\n        }]\n      };\n    case types.LAYER_REMOVE:\n      return {\n        ...state,\n        mapViews: state.mapViews.filter(layer => layer.id !== action.id)\n      };\n    case types.LAYER_SORT:\n      mapViews = [...state.mapViews].reverse(); // TODO: Refactor\n      sortedMapViews = arrayMoveImmutable(mapViews, action.oldIndex, action.newIndex).reverse();\n      return {\n        ...state,\n        mapViews: sortedMapViews\n      };\n    case types.LAYER_UPDATE:\n    case types.LAYER_EDIT:\n    case types.LAYER_CHANGE_OPACITY:\n    case types.LAYER_TOGGLE_VISIBILITY:\n    case types.LAYER_TOGGLE_EXPAND:\n    case types.DATA_FILTER_SET:\n    case types.DATA_FILTER_CLEAR:\n    case types.MAP_EARTH_ENGINE_VALUE_SHOW:\n      return {\n        ...state,\n        mapViews: state.mapViews.map(l => layer(l, action))\n      };\n    case types.LAYER_LOADING_SET:\n      {\n        return {\n          ...state,\n          mapViews: state.mapViews.map(l => layer(l, action))\n        };\n      }\n    case types.MAP_ALERTS_CLEAR:\n      return {\n        ...state,\n        alerts: undefined,\n        mapViews: state.mapViews.map(l => layer(l, action))\n      };\n    default:\n      return state;\n  }\n};\nexport default map;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useState, useEffect } from 'react';\nimport { getFallbackBasemap } from '../constants/basemaps.js';\nimport { defaultBasemapState } from '../reducers/map.js';\nconst emptyBasemap = {\n  config: {}\n};\nfunction useBasemapConfig(selected) {\n  const [basemap, setBasemap] = useState(emptyBasemap);\n  const {\n    systemSettings,\n    basemaps\n  } = useCachedDataQuery();\n  const defaultBasemap = systemSettings.keyDefaultBaseMap;\n  useEffect(() => {\n    const selectedId = selected.id || defaultBasemap;\n    const basemapToUse = basemaps.find(_ref => {\n      let {\n        id\n      } = _ref;\n      return id === selectedId;\n    }) || getFallbackBasemap();\n\n    // Make sure we don't override the basemap opacity\n    if (basemapToUse && selected.opacity !== undefined) {\n      delete basemapToUse.opacity;\n    }\n    const basemapConfig = {\n      ...defaultBasemapState,\n      ...selected,\n      ...basemapToUse\n    };\n    setBasemap(basemapConfig);\n  }, [defaultBasemap, selected, basemaps]);\n  return basemap;\n}\nexport default useBasemapConfig;","// extracted by mini-css-extract-plugin\nexport default {\"handle\":\"SortableHandle_handle__WZbWJ\"};","import { IconDragHandle24 } from '@dhis2/ui';\nimport React from 'react';\nimport { SortableHandle } from 'react-sortable-hoc';\nimport styles from './styles/SortableHandle.module.css';\nconst Handle = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.handle\n}, /*#__PURE__*/React.createElement(IconDragHandle24, null));\nexport default SortableHandle(Handle);","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"LayerCard_card__MpAbs\",\"cardHeader\":\"LayerCard_cardHeader__IwswG\",\"title\":\"LayerCard_title__XV9bu\",\"overlay\":\"LayerCard_overlay__ZJOXG\",\"action\":\"LayerCard_action__2gk5x\",\"expand\":\"LayerCard_expand__nOig1\",\"content\":\"LayerCard_content__L8bFN\",\"collapsibleContent\":\"LayerCard_collapsibleContent__5bwIg\",\"expanded\":\"LayerCard_expanded__LlzMP\"};","// extracted by mini-css-extract-plugin\nexport default {\"menu\":\"LayerToolbarMore_menu__SgkGv\"};","import i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, MenuDivider, IconMore24, IconTable16, IconVisualizationColumn16, IconDownload16, IconEdit16, IconDelete16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { EARTH_ENGINE_LAYER } from '../../../constants/layers.js';\nimport { IconButton } from '../../core/index.js';\nimport styles from './styles/LayerToolbarMore.module.css';\nconst LayerToolbarMoreMenu = _ref => {\n  let {\n    layer = {},\n    onEdit,\n    onRemove,\n    toggleDataTable,\n    openAs,\n    downloadData,\n    dataTableOpen,\n    hasOrgUnitData,\n    isLoading,\n    hasError\n  } = _ref;\n  const [isOpen, setIsOpen] = useState(false);\n  const anchorRef = useRef();\n  const somethingAboveDivider = toggleDataTable || downloadData,\n    somethingBelowDivider = onRemove || onEdit,\n    showDivider = somethingAboveDivider && somethingBelowDivider;\n  if (!somethingAboveDivider && !somethingBelowDivider) {\n    return null;\n  }\n  const showDataTableDisabled = !hasOrgUnitData && (!dataTableOpen || dataTableOpen !== layer.id);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: i18n.t('More actions'),\n    onClick: () => setIsOpen(!isOpen),\n    dataTest: \"moremenubutton\",\n    ariaLabel: i18n.t('Toggle layer menu')\n  }, /*#__PURE__*/React.createElement(IconMore24, null))), isOpen && layer && /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right-start\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true,\n    dataTest: \"more-menu\"\n  }, toggleDataTable && /*#__PURE__*/React.createElement(MenuItem, {\n    label: dataTableOpen === layer.id ? i18n.t('Hide data table') : i18n.t('Show data table'),\n    icon: /*#__PURE__*/React.createElement(IconTable16, null),\n    onClick: () => {\n      setIsOpen(false);\n      toggleDataTable();\n    },\n    disabled: hasError || showDataTableDisabled\n  }), openAs && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Open as chart'),\n    icon: /*#__PURE__*/React.createElement(IconVisualizationColumn16, null),\n    onClick: () => {\n      setIsOpen(false);\n      openAs('CHART');\n    }\n  }), downloadData && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Download data'),\n    icon: /*#__PURE__*/React.createElement(IconDownload16, null),\n    onClick: () => {\n      setIsOpen(false);\n      downloadData();\n    },\n    disabled: hasError || !hasOrgUnitData || isLoading\n  }), showDivider && /*#__PURE__*/React.createElement(MenuDivider, null), onEdit && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Edit layer'),\n    icon: /*#__PURE__*/React.createElement(IconEdit16, null),\n    onClick: () => {\n      setIsOpen(false);\n      onEdit();\n    },\n    disabled: hasError\n  }), onRemove && /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Remove layer'),\n    icon: /*#__PURE__*/React.createElement(IconDelete16, null),\n    destructive: true,\n    onClick: () => {\n      setIsOpen(false);\n      onRemove();\n    }\n  })))));\n};\nLayerToolbarMoreMenu.propTypes = {\n  dataTableOpen: PropTypes.string,\n  downloadData: PropTypes.func,\n  hasError: PropTypes.bool,\n  hasOrgUnitData: PropTypes.bool,\n  isLoading: PropTypes.bool,\n  layer: PropTypes.object,\n  openAs: PropTypes.func,\n  toggleDataTable: PropTypes.func,\n  onEdit: PropTypes.func,\n  onRemove: PropTypes.func\n};\nexport default connect((_ref2, _ref3) => {\n  var _layer$aggregationTyp;\n  let {\n    dataTable: dataTableOpen,\n    aggregations\n  } = _ref2;\n  let {\n    layer = {}\n  } = _ref3;\n  const isEarthEngine = layer.layer === EARTH_ENGINE_LAYER;\n  const hasOrgUnitData = layer.data && (!isEarthEngine || ((_layer$aggregationTyp = layer.aggregationType) === null || _layer$aggregationTyp === void 0 ? void 0 : _layer$aggregationTyp.length) > 0);\n  const isLoading = isEarthEngine && hasOrgUnitData && !aggregations[layer.id];\n  return {\n    dataTableOpen,\n    hasOrgUnitData,\n    isLoading\n  };\n})(LayerToolbarMoreMenu);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OpacitySlider_container__Xc242\",\"slider\":\"OpacitySlider_slider__nnF6M\"};","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport styles from './styles/OpacitySlider.module.css';\nconst OpacitySlider = _ref => {\n  let {\n    opacity,\n    disabled,\n    onChange\n  } = _ref;\n  const lowerFill = `var(--colors-grey${disabled ? 400 : 600})`;\n  const upperFill = `var(--colors-grey${disabled ? 300 : 400})`;\n  const onSliderChange = useCallback(evt => onChange(Number(evt.target.value)), [onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"range\",\n    min: \"0\",\n    max: \"1\",\n    step: \"0.01\",\n    value: opacity,\n    disabled: disabled,\n    onChange: onSliderChange,\n    className: styles.slider,\n    style: {\n      background: `linear-gradient(\n                        to right,\n                        ${lowerFill} 0%,\n                        ${lowerFill} ${opacity * 100}%,\n                        ${upperFill} ${opacity * 100}%,\n                        ${upperFill} 100%\n                    )`\n    }\n  }));\n};\nOpacitySlider.propTypes = {\n  opacity: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool\n};\nexport default OpacitySlider;","// extracted by mini-css-extract-plugin\nexport default {\"toolbar\":\"LayerToolbar_toolbar__OJ+oR\",\"editButton\":\"LayerToolbar_editButton__Vr38M\",\"sliderContainer\":\"LayerToolbar_sliderContainer__8mAGL\",\"menuButton\":\"LayerToolbar_menuButton__GNUki\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Tooltip, IconEdit24, IconView24, IconViewOff24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconButton } from '../../core/index.js';\nimport LayerToolbarMoreMenu from './LayerToolbarMoreMenu.js';\nimport OpacitySlider from './OpacitySlider.js';\nimport styles from './styles/LayerToolbar.module.css';\nconst LayerToolbar = _ref => {\n  let {\n    hasOpacity,\n    opacity = 1,\n    isVisible,\n    onOpacityChange,\n    toggleLayerVisibility,\n    hasError,\n    ...expansionMenuProps\n  } = _ref;\n  const onEdit = expansionMenuProps.onEdit;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.toolbar,\n    \"data-test\": \"layertoolbar\"\n  }, onEdit && /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: !hasError ? i18n.t('Edit') : null,\n    onClick: onEdit,\n    className: styles.editButton,\n    dataTest: \"editbutton\",\n    disabled: hasError\n  }, /*#__PURE__*/React.createElement(IconEdit24, null)), /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: !hasError ? i18n.t('Toggle visibility') : null,\n    onClick: toggleLayerVisibility,\n    className: cx({\n      visible: isVisible,\n      // for cypress testing only\n      notvisible: !isVisible // for cypress testing only\n    }),\n\n    dataTest: \"visibilitybutton\",\n    disabled: hasError\n  }, isVisible ? /*#__PURE__*/React.createElement(IconView24, null) : /*#__PURE__*/React.createElement(IconViewOff24, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sliderContainer\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: hasError ? i18n.t('Layer is invalid') : i18n.t('Set layer opacity'),\n    disabled: hasError\n  }, /*#__PURE__*/React.createElement(OpacitySlider, {\n    opacity: opacity,\n    disabled: hasError || !isVisible || !hasOpacity,\n    onChange: onOpacityChange\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menuButton\n  }, /*#__PURE__*/React.createElement(LayerToolbarMoreMenu, _extends({\n    hasError: hasError\n  }, expansionMenuProps))));\n};\nLayerToolbar.propTypes = {\n  toggleLayerVisibility: PropTypes.func.isRequired,\n  onOpacityChange: PropTypes.func.isRequired,\n  hasError: PropTypes.bool,\n  hasOpacity: PropTypes.bool,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number,\n  onEdit: PropTypes.func\n};\nLayerToolbar.defaultProps = {\n  hasOpacity: true\n};\nexport default LayerToolbar;","import i18n from '@dhis2/d2-i18n';\nimport { Card, IconChevronUp24, IconChevronDown24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IconButton } from '../core/index.js';\nimport SortableHandle from './SortableHandle.js';\nimport styles from './styles/LayerCard.module.css';\nimport LayerToolbar from './toolbar/LayerToolbar.js';\nconst LayerCard = _ref => {\n  let {\n    title,\n    subtitle,\n    isOverlay,\n    isExpanded,\n    toggleExpand,\n    children,\n    ...layerToolbarProps\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.card, {\n      [styles.expanded]: isExpanded\n    }),\n    \"data-test\": `card-${title.replace(/ /g, '')}`\n  }, /*#__PURE__*/React.createElement(Card, {\n    dataTest: isOverlay ? 'layercard' : 'basemapcard'\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.cardHeader\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.title, {\n      [styles.overlay]: isOverlay\n    })\n  }, /*#__PURE__*/React.createElement(\"h2\", null, title), subtitle && /*#__PURE__*/React.createElement(\"h3\", null, subtitle)), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.action\n  }, isOverlay && /*#__PURE__*/React.createElement(SortableHandle, null), /*#__PURE__*/React.createElement(IconButton, {\n    tooltip: isExpanded ? i18n.t('Collapse') : i18n.t('Expand'),\n    onClick: toggleExpand,\n    className: styles.expand,\n    dataTest: \"editbutton\"\n  }, isExpanded ? /*#__PURE__*/React.createElement(IconChevronUp24, null) : /*#__PURE__*/React.createElement(IconChevronDown24, null)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.collapsibleContent\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, children), /*#__PURE__*/React.createElement(LayerToolbar, layerToolbarProps))));\n};\nLayerCard.propTypes = {\n  isExpanded: PropTypes.bool.isRequired,\n  title: PropTypes.string.isRequired,\n  toggleExpand: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  isOverlay: PropTypes.bool,\n  subtitle: PropTypes.string\n};\nexport default LayerCard;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Basemap_container__BdP05\",\"imageContainer\":\"Basemap_imageContainer__h-+VD\",\"selected\":\"Basemap_selected__vl4S3\",\"image\":\"Basemap_image__stJ5L\",\"noImage\":\"Basemap_noImage__RJXCc\",\"name\":\"Basemap_name__7+oSg\",\"nameSelected\":\"Basemap_nameSelected__sEcco\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Basemap.module.css';\n\n// TODO: Use ImageSelect.js component for selectable image\nconst Basemap = _ref => {\n  let {\n    id,\n    img,\n    name,\n    config,\n    isSelected,\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    title: name,\n    onClick: () => onClick({\n      id,\n      config\n    }),\n    \"data-test\": \"basemaplistitem\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.imageContainer, {\n      [styles.selected]: isSelected\n    }),\n    \"data-test\": \"basemaplistitem-img\"\n  }, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  }, i18n.t('External basemap'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.name, {\n      [styles.nameSelected]: isSelected\n    }),\n    \"data-test\": \"basemaplistitem-name\"\n  }, i18n.t(name)));\n};\nBasemap.propTypes = {\n  config: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n  name: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  img: PropTypes.string\n};\nexport default Basemap;","// extracted by mini-css-extract-plugin\nexport default {\"basemapList\":\"BasemapList_basemapList__YVxvb\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useCachedDataQuery } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Basemap from './Basemap.js';\nimport styles from './styles/BasemapList.module.css';\nconst BasemapList = _ref => {\n  let {\n    selectedID,\n    selectBasemap\n  } = _ref;\n  const {\n    basemaps\n  } = useCachedDataQuery();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.basemapList,\n    \"data-test\": \"basemaplist\"\n  }, basemaps.map((basemap, index) => /*#__PURE__*/React.createElement(Basemap, _extends({\n    key: `basemap-${index}`,\n    onClick: selectBasemap,\n    isSelected: basemap.id === selectedID\n  }, basemap))));\n};\nBasemapList.propTypes = {\n  selectBasemap: PropTypes.func.isRequired,\n  selectedID: PropTypes.string.isRequired\n};\nexport default BasemapList;","import i18n from '@dhis2/d2-i18n';\nimport { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { changeBasemapOpacity, toggleBasemapExpand, toggleBasemapVisibility, selectBasemap } from '../../../actions/basemap.js';\nimport { VECTOR_STYLE } from '../../../constants/layers.js';\nimport useBasemapConfig from '../../../hooks/useBasemapConfig.js';\nimport LayerCard from '../LayerCard.js';\nimport BasemapList from './BasemapList.js';\nconst BasemapCard = props => {\n  const {\n    subtitle = i18n.t('Basemap'),\n    toggleBasemapExpand,\n    toggleBasemapVisibility,\n    changeBasemapOpacity,\n    selectBasemap\n  } = props;\n  const basemap = useBasemapConfig(props.basemap);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, basemap.id === undefined ? /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))) : /*#__PURE__*/React.createElement(LayerCard, {\n    hasOpacity: basemap.config.type === VECTOR_STYLE ? false : true,\n    title: basemap.name,\n    subtitle: subtitle,\n    opacity: basemap.opacity,\n    isExpanded: basemap.isExpanded,\n    isVisible: basemap.isVisible,\n    onOpacityChange: changeBasemapOpacity,\n    toggleExpand: toggleBasemapExpand,\n    toggleLayerVisibility: toggleBasemapVisibility\n  }, /*#__PURE__*/React.createElement(BasemapList, {\n    selectedID: basemap.id,\n    selectBasemap: selectBasemap\n  })));\n};\nBasemapCard.propTypes = {\n  basemap: PropTypes.object.isRequired,\n  changeBasemapOpacity: PropTypes.func.isRequired,\n  selectBasemap: PropTypes.func.isRequired,\n  toggleBasemapExpand: PropTypes.func.isRequired,\n  toggleBasemapVisibility: PropTypes.func.isRequired,\n  subtitle: PropTypes.string\n};\nexport default connect(state => ({\n  basemap: state.map.basemap\n}), {\n  changeBasemapOpacity,\n  toggleBasemapExpand,\n  toggleBasemapVisibility,\n  selectBasemap\n})(BasemapCard);","import * as types from '../constants/actionTypes.js';\nexport const selectBasemap = payload => ({\n  type: types.BASEMAP_SELECTED,\n  payload\n});\nexport const toggleBasemapExpand = () => ({\n  type: types.BASEMAP_TOGGLE_EXPAND\n});\nexport const toggleBasemapVisibility = () => ({\n  type: types.BASEMAP_TOGGLE_VISIBILITY\n});\nexport const changeBasemapOpacity = opacity => ({\n  type: types.BASEMAP_CHANGE_OPACITY,\n  opacity\n});","import * as types from '../constants/actionTypes.js';\nexport const openLayersPanel = () => ({\n  type: types.LAYERS_PANEL_OPEN\n});\nexport const closeLayersPanel = () => ({\n  type: types.LAYERS_PANEL_CLOSE\n});\nexport const openInterpretationsPanel = () => ({\n  type: types.INTERPRETATIONS_PANEL_OPEN\n});\nexport const closeInterpretationsPanel = () => ({\n  type: types.INTERPRETATIONS_PANEL_CLOSE\n});\nexport const openDownloadMode = () => ({\n  type: types.DOWNLOAD_MODE_OPEN\n});\nexport const closeDownloadMode = () => ({\n  type: types.DOWNLOAD_MODE_CLOSE\n});","// extracted by mini-css-extract-plugin\nexport default {\"layersToggle\":\"LayersToggle_layersToggle__+STbf\",\"collapsed\":\"LayersToggle_collapsed__bncCI\"};","import { IconChevronLeft24, IconChevronRight24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { openLayersPanel, closeLayersPanel } from '../../actions/ui.js';\nimport styles from './styles/LayersToggle.module.css';\nconst LayersToggle = () => {\n  const dispatch = useDispatch();\n  const isOpen = useSelector(state => state.ui.layersPanelOpen);\n  const isDownload = useSelector(state => state.ui.downloadMode);\n  return !isDownload && /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"layers-toggle-button\",\n    onClick: isOpen ? () => dispatch(closeLayersPanel()) : () => dispatch(openLayersPanel()),\n    className: cx(styles.layersToggle, {\n      [styles.collapsed]: !isOpen\n    })\n  }, isOpen ? /*#__PURE__*/React.createElement(IconChevronLeft24, null) : /*#__PURE__*/React.createElement(IconChevronRight24, null));\n};\nexport default LayersToggle;","// Utils for thematic mapping\nimport { precisionRound } from 'd3-format';\nimport { CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS } from '../constants/layers.js';\nimport { getRoundToPrecisionFn } from './numbers.js';\n\n// Returns legend item where a value belongs\nexport const getLegendItemForValue = (legendItems, value) => {\n  const isLast = index => index === legendItems.length - 1;\n  return legendItems.find((item, index) => value >= item.startValue && (value < item.endValue || isLast(index) && value == item.endValue));\n};\nexport const getLegendItems = (values, method, numClasses) => {\n  const minValue = values[0];\n  const maxValue = values[values.length - 1];\n  let bins;\n  if (method === CLASSIFICATION_EQUAL_INTERVALS) {\n    bins = getEqualIntervals(minValue, maxValue, numClasses);\n  } else if (method === CLASSIFICATION_EQUAL_COUNTS) {\n    bins = getQuantiles(values, numClasses);\n  }\n  return bins;\n};\n\n// This function is not in use, but keeping it\n// just in case it's needed in the future\n// export const getClassBins = (values, method, numClasses) => {\n//     const minValue = values[0]\n//     const maxValue = values[values.length - 1]\n//     let bins\n\n//     if (method === CLASSIFICATION_EQUAL_INTERVALS) {\n//         bins = getEqualIntervals(minValue, maxValue, numClasses)\n//     } else if (method === CLASSIFICATION_EQUAL_COUNTS) {\n//         bins = getQuantiles(values, numClasses)\n//     }\n\n//     return bins\n// }\n\nconst getEqualIntervals = (minValue, maxValue, numClasses) => {\n  const bins = [];\n  const binSize = (maxValue - minValue) / numClasses;\n  const precision = precisionRound(binSize, maxValue);\n  const valueFormat = getRoundToPrecisionFn(precision);\n  for (let i = 0; i < numClasses; i++) {\n    const startValue = minValue + i * binSize;\n    const endValue = i < numClasses - 1 ? startValue + binSize : maxValue;\n    bins.push({\n      startValue: valueFormat(startValue),\n      endValue: valueFormat(endValue)\n    });\n  }\n  return bins;\n};\nconst getQuantiles = (values, numClasses) => {\n  const minValue = values[0];\n  const maxValue = values[values.length - 1];\n  const bins = [];\n  const binCount = values.length / numClasses;\n  const precision = precisionRound((maxValue - minValue) / numClasses, maxValue);\n  const valueFormat = getRoundToPrecisionFn(precision);\n  let binLastValPos = binCount === 0 ? 0 : binCount;\n  if (values.length > 0) {\n    bins[0] = minValue;\n    for (let i = 1; i < numClasses; i++) {\n      bins[i] = values[Math.round(binLastValPos)];\n      binLastValPos += binCount;\n    }\n  }\n\n  // bin can be undefined if few values\n  return bins.filter(bin => bin !== undefined).map((value, index) => ({\n    startValue: valueFormat(value),\n    endValue: valueFormat(bins[index + 1] || maxValue)\n  }));\n};","import { getInstance as getD2 } from 'd2';\nimport { sortBy, pick } from 'lodash/fp';\nimport { CLASSIFICATION_EQUAL_INTERVALS } from '../constants/layers.js';\nimport { getLegendItems } from '../util/classify.js';\nimport { defaultClasses, defaultColorScale } from '../util/colors.js';\nexport const loadLegendSet = async legendSet => {\n  const d2 = await getD2();\n  return d2.models.legendSet.get(legendSet.id); // TODO: Restrict loading fields\n};\n\nexport const loadDataItemLegendSet = async dataItem => {\n  const type = (dataItem.dimensionItemType || '').toLowerCase();\n  const d2 = await getD2();\n  if (!type || !d2.models[type]) {\n    return;\n  }\n  return d2.models[type].get(dataItem.id, {\n    fields: 'legendSet[id,displayName~rename(name)]'\n  }).then(model => model.legendSet);\n};\nexport const formatLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => ({\n    color: item.color,\n    name: item.name,\n    range: item.startValue + ' - ' + item.endValue\n  }));\n};\nexport const getBinsFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  const lastItem = sortedItems[sortedItems.length - 1];\n  const bins = sortedItems.map(item => item.startValue);\n  bins.push(lastItem.endValue);\n  return bins;\n};\nexport const getColorScaleFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => item.color);\n};\nexport const getLabelsFromLegendItems = legendItems => {\n  const sortedItems = sortBy('startValue', legendItems);\n  return sortedItems.map(item => item.name);\n};\n\n// Returns a legend created from a pre-defined legend set\nexport const getPredefinedLegendItems = legendSet => {\n  const pickSome = pick(['name', 'startValue', 'endValue', 'color']);\n  return sortBy('startValue', legendSet.legends).map(pickSome).map(item => item.name === `${item.startValue} - ${item.endValue}` ? {\n    ...item,\n    name: ''\n  } // Clear name if same as startValue - endValue\n  : item);\n};\n\n/* eslint-disable max-params */\nexport const getAutomaticLegendItems = function (data) {\n  let method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : CLASSIFICATION_EQUAL_INTERVALS;\n  let classes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultClasses;\n  let colorScale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : defaultColorScale;\n  const items = data.length ? getLegendItems(data, method, classes) : [];\n  const colors = colorScale.split(',');\n  return items.map((item, index) => ({\n    ...item,\n    color: colors[index]\n  }));\n};\n/* eslint-enable max-params */","import { THEMATIC_LAYER } from '../constants/layers.js';\nimport { getPeriodNameFromId, getDimensionsFromFilters } from './analytics.js';\nimport { cleanDimension } from './favorites.js';\nimport { loadDataItemLegendSet } from './legend.js';\nexport const USER_DATASTORE_NAMESPACE = 'analytics';\nexport const CURRENT_AO_KEY = 'currentAnalyticalObject';\nexport const APP_URLS = {\n  CHART: 'dhis-web-data-visualizer',\n  PIVOT: 'dhis-web-pivot'\n};\n\n// Combines all dimensions in columns, rows and filters\nconst getDimensionsFromAnalyticalObject = function () {\n  let ao = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    columns = [],\n    rows = [],\n    filters = []\n  } = ao;\n  return [...columns, ...rows, ...filters];\n};\n\n// Returns the data items of the first dx dimension in an analytical object\nexport const getDataDimensionsFromAnalyticalObject = ao => {\n  const dims = getDimensionsFromAnalyticalObject(ao);\n  const dataDim = dims.find(i => i.dimension === 'dx');\n\n  // We only use the first dx dimension\n  return dataDim ? dataDim.items : [];\n};\n\n// Returns a thematic layer config from an analytical object\nexport const getThematicLayerFromAnalyticalObject = async function () {\n  let ao = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let dataId = arguments.length > 1 ? arguments[1] : undefined;\n  let isVisible = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  const {\n    yearlySeries,\n    aggregationType = 'DEFAULT'\n  } = ao;\n  const dataDims = getDataDimensionsFromAnalyticalObject(ao);\n  const dims = getDimensionsFromAnalyticalObject(ao);\n  const orgUnits = dims.find(i => i.dimension === 'ou');\n  const filters = getDimensionsFromFilters(dims); // Dynamic dimension filters\n  let period = dims.find(i => i.dimension === 'pe');\n  let dataDim = dataDims[0];\n  if (dataId) {\n    dataDim = dataDims.find(item => item.id === dataId);\n  }\n  if (!dataDim || !orgUnits || !period) {\n    return;\n  }\n\n  // Load default legend set for selected data dimension\n  const legendSet = await loadDataItemLegendSet(dataDim);\n\n  // Currently we only support one period in map filters so we select the first\n  if (yearlySeries && yearlySeries.length) {\n    period = {\n      dimension: 'pe',\n      items: [{\n        id: yearlySeries[0],\n        name: getPeriodNameFromId(yearlySeries[0])\n      }]\n    };\n  }\n  return {\n    layer: THEMATIC_LAYER,\n    columns: [{\n      dimension: 'dx',\n      items: [dataDim]\n    }],\n    rows: [orgUnits],\n    filters: [period, ...filters],\n    aggregationType,\n    legendSet,\n    isVisible,\n    opacity: 0.9\n  };\n};\n\n// Translates a thematic layer to an analytical object\nexport const getAnalyticalObjectFromThematicLayer = function () {\n  let layer = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    columns = [],\n    rows = [],\n    filters = [],\n    aggregationType = 'DEFAULT'\n  } = layer;\n  return {\n    columns,\n    rows: rows.map(cleanDimension),\n    filters,\n    aggregationType\n  };\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { guideLength, textPadding } from './Bubbles.js';\nconst Bubble = _ref => {\n  let {\n    radius,\n    maxRadius,\n    text,\n    textAlign,\n    color,\n    stroke,\n    pattern\n  } = _ref;\n  const leftAlign = textAlign === 'left';\n  const x = maxRadius;\n  const y = maxRadius * 2 - radius;\n  const x2 = leftAlign ? x - maxRadius - guideLength : x + maxRadius + guideLength;\n  const y2 = maxRadius * 2 - radius * 2;\n  const textX = x2 + (leftAlign ? -textPadding : textPadding);\n  const textAnchor = leftAlign ? 'end' : 'start';\n  return /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: x,\n    cy: y,\n    r: radius,\n    stroke: stroke || '#000',\n    style: {\n      fill: pattern ? `url(#${pattern})` : color || 'none',\n      strokeWidth: 0.5\n    }\n  }), text && /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"line\", {\n    x1: x,\n    x2: x2,\n    y1: y2,\n    y2: y2,\n    stroke: \"black\",\n    style: {\n      strokeDasharray: '2, 2',\n      strokeWidth: 0.5\n    }\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    x: textX,\n    y: y2,\n    textAnchor: textAnchor,\n    alignmentBaseline: \"middle\",\n    style: {\n      fontSize: 12\n    }\n  }, text)));\n};\nBubble.propTypes = {\n  maxRadius: PropTypes.number.isRequired,\n  radius: PropTypes.number.isRequired,\n  color: PropTypes.string,\n  pattern: PropTypes.string,\n  stroke: PropTypes.string,\n  text: PropTypes.string,\n  textAlign: PropTypes.oneOf(['left', 'right'])\n};\nexport default Bubble;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { scaleSqrt } from 'd3-scale';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getContrastColor } from '../../util/colors.js';\nimport { getLongestTextLength } from '../../util/helpers.js';\nimport Bubble from './Bubble.js';\nconst style = {\n  paddingTop: 10\n};\nconst legendWidth = 245;\nconst digitWidth = 6.8;\nexport const guideLength = 16;\nexport const textPadding = 4;\nconst Bubbles = _ref => {\n  let {\n    radiusLow,\n    radiusHigh,\n    color,\n    classes\n  } = _ref;\n  const height = radiusHigh * 2 + 4;\n  const scale = scaleSqrt().range([radiusLow, radiusHigh]);\n  const radiusMid = scale(0.5);\n  if (isNaN(radiusLow) || isNaN(radiusHigh)) {\n    return null;\n  }\n  let bubbles = [];\n\n  // If color legend\n  if (Array.isArray(classes) && classes.length) {\n    const startValue = classes[0].startValue;\n    const endValue = classes[classes.length - 1].endValue;\n    const itemScale = scale.domain([startValue, endValue]);\n    bubbles = [...classes].reverse().map(c => ({\n      radius: itemScale(c.endValue),\n      maxRadius: radiusHigh,\n      color: c.color,\n      text: String(c.endValue)\n    }));\n\n    // Add the smallest bubble for the lowest value\n    bubbles.push({\n      radius: itemScale(startValue),\n      maxRadius: radiusHigh,\n      text: String(startValue)\n    });\n  } else {\n    // If single color\n    const stroke = color && getContrastColor(color);\n    bubbles = [{\n      radius: radiusHigh,\n      maxRadius: radiusHigh,\n      color,\n      stroke,\n      text: i18n.t('Max')\n    }, {\n      radius: radiusMid,\n      maxRadius: radiusHigh,\n      color,\n      stroke,\n      text: i18n.t('Mid')\n    }, {\n      radius: radiusLow,\n      maxRadius: radiusHigh,\n      color,\n      stroke,\n      text: i18n.t('Min')\n    }];\n  }\n\n  // Calculate the pixel length of the longest number\n  let textLength = Math.ceil(Math.max(getLongestTextLength(classes, 'startValue'), getLongestTextLength(classes, 'endValue')) * digitWidth);\n\n  // Calculate the total length if numbers are alternate on each side\n  const alternateLength = (radiusHigh + guideLength + textPadding + textLength) * 2;\n  let smallestGap = bubbles.reduce((prev, curr, i) => {\n    const gap = prev.radius - curr.radius;\n    const smallestGap = prev.gap === undefined || gap < prev.gap ? gap : prev.gap;\n    return i === bubbles.length - 1 ? Math.round(smallestGap * 2) : {\n      radius: curr.radius,\n      gap: smallestGap\n    };\n  });\n  const alternateFit = alternateLength < legendWidth;\n  const alternate = alternateFit && smallestGap > 5 && smallestGap < 12;\n  if (!alternateFit) {\n    smallestGap = smallestGap / 2;\n  }\n\n  // Too cramped to show number for each bubble\n  if (smallestGap < 6) {\n    const [maxBubble] = bubbles;\n    const minBubble = bubbles[bubbles.length - 1];\n    const gap = maxBubble.radius - minBubble.radius;\n    const showNumbers = [0]; // Always show largest number\n\n    if (gap > 6) {\n      showNumbers.push(bubbles.length - 1);\n    }\n    if (gap > 15) {\n      const midRadius = minBubble.radius + gap / 2;\n\n      // Find the closest bubble above the mid radius\n      const midBubble = bubbles.reduce((prev, curr) => curr.radius >= midRadius && curr.radius - midRadius < prev.radius - midRadius ? curr : prev);\n      showNumbers.push(bubbles.indexOf(midBubble));\n    }\n    bubbles.forEach((b, i) => {\n      if (!showNumbers.includes(i)) {\n        delete b.text;\n      }\n    });\n  }\n  textLength = Math.ceil(getLongestTextLength(bubbles, 'text') * digitWidth);\n  const offset = textLength + guideLength + textPadding;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: legendWidth,\n    height: height + 20\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: `translate(${alternate ? offset : '2'} 10)`\n  }, bubbles.map((bubble, i) => /*#__PURE__*/React.createElement(Bubble, _extends({\n    key: i\n  }, bubble, {\n    textAlign: alternate && i % 2 == 0 ? 'left' : 'right'\n  }))))));\n};\nBubbles.propTypes = {\n  radiusHigh: PropTypes.number.isRequired,\n  radiusLow: PropTypes.number.isRequired,\n  classes: PropTypes.array,\n  color: PropTypes.string\n};\nexport default Bubbles;","// extracted by mini-css-extract-plugin\nexport default {\"legendItemRange\":\"LegendItemRange_legendItemRange__21prC\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/LegendItemRange.module.css';\nconst LegendItemRange = _ref => {\n  let {\n    name = '',\n    startValue,\n    endValue,\n    count\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"td\", {\n    className: styles.legendItemRange\n  }, isNaN(startValue) ? name : `${name} ${startValue} - ${endValue}`, count !== undefined ? ` (${count})` : '');\n};\nLegendItemRange.propTypes = {\n  count: PropTypes.number,\n  endValue: PropTypes.number,\n  name: PropTypes.string,\n  startValue: PropTypes.number\n};\nexport default LegendItemRange;","import PropTypes from 'prop-types';\nimport React from 'react';\nconst LineSymbol = _ref => {\n  let {\n    color,\n    weight\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    style: {\n      width: 24,\n      height: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    stroke: color,\n    fill: color,\n    strokeWidth: weight / 2,\n    d: \"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z\"\n  }));\n};\nLineSymbol.propTypes = {\n  color: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default LineSymbol;","import PropTypes from 'prop-types';\nimport React from 'react';\nconst PolygonSymbol = _ref => {\n  let {\n    color,\n    fill = 'none',\n    weight\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    style: {\n      width: 24,\n      height: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    fill: fill,\n    stroke: color,\n    strokeWidth: weight,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M 3.5 18.5 l 7.5 2.5 l 11 -2 L 19 12 l 3 -4 l -8 -3 l -8 2 L 2 14 z\"\n  }));\n};\nPolygonSymbol.propTypes = {\n  color: PropTypes.string,\n  fill: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default PolygonSymbol;","// extracted by mini-css-extract-plugin\nexport default {\"legendItem\":\"LegendItem_legendItem__kscet\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport LegendItemRange from './LegendItemRange.js';\nimport LineSymbol from './LineSymbol.js';\nimport PolygonSymbol from './PolygonSymbol.js';\nimport styles from './styles/LegendItem.module.css';\nconst maxRadius = 15;\nconst maxLineWeight = 5;\nconst LegendItem = _ref => {\n  let {\n    type,\n    image,\n    color,\n    strokeColor,\n    fillColor,\n    radius,\n    weight,\n    name,\n    startValue,\n    endValue,\n    count\n  } = _ref;\n  if (!name && startValue === undefined) {\n    return null;\n  }\n  const symbol = {\n    backgroundImage: image ? `url(${image})` : 'none',\n    backgroundColor: color ? color : 'transparent'\n  };\n  if (strokeColor) {\n    symbol.border = `1px solid ${strokeColor}`;\n  }\n  if (radius) {\n    const r = Math.min(radius, maxRadius) * 2;\n    symbol.width = `${r}px`;\n    symbol.height = `${r}px`;\n    symbol.borderRadius = '50%';\n  }\n  const lineWeight = weight ? Math.min(weight, maxLineWeight) : null;\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    className: styles.legendItem,\n    \"data-test\": \"layerlegend-item\"\n  }, /*#__PURE__*/React.createElement(\"th\", null, weight ? type === 'LineString' ? /*#__PURE__*/React.createElement(LineSymbol, {\n    color: color,\n    weight: lineWeight\n  }) : /*#__PURE__*/React.createElement(PolygonSymbol, {\n    color: strokeColor || color,\n    fill: fillColor,\n    weight: lineWeight\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    style: symbol\n  })), /*#__PURE__*/React.createElement(LegendItemRange, {\n    name: name,\n    startValue: startValue,\n    endValue: endValue,\n    count: count\n  }));\n};\nLegendItem.propTypes = {\n  color: PropTypes.string,\n  count: PropTypes.number,\n  endValue: PropTypes.number,\n  fillColor: PropTypes.string,\n  image: PropTypes.string,\n  name: PropTypes.string,\n  radius: PropTypes.number,\n  startValue: PropTypes.number,\n  strokeColor: PropTypes.string,\n  type: PropTypes.string,\n  weight: PropTypes.number\n};\nexport default LegendItem;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"Legend_legend__b62xP\",\"description\":\"Legend_description__d1w-g\",\"period\":\"Legend_period__5Y7TM\",\"legendImage\":\"Legend_legendImage__s5QrO\",\"filters\":\"Legend_filters__aEows\",\"group\":\"Legend_group__iPRiA\",\"unit\":\"Legend_unit__NMYIN\",\"explanation\":\"Legend_explanation__1cQVu\",\"source\":\"Legend_source__kRWdo\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Bubbles from './Bubbles.js';\nimport LegendItem from './LegendItem.js';\nimport styles from './styles/Legend.module.css';\n\n// Rendering a layer legend in the left drawer, on a map (download) or in a control (plugin)\nconst Legend = _ref => {\n  let {\n    description,\n    filters,\n    groups,\n    unit,\n    items,\n    bubbles,\n    explanation,\n    url,\n    source,\n    sourceUrl\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"dl\", {\n    className: styles.legend,\n    \"data-test\": \"layerlegend\"\n  }, description && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, description), groups && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.group\n  }, groups.length > 1 ? i18n.t('Groups') : i18n.t('Group'), groups.map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: id\n    }, name);\n  })), unit && items && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.unit\n  }, unit), bubbles ? /*#__PURE__*/React.createElement(Bubbles, _extends({}, bubbles, {\n    classes: items\n  })) : Array.isArray(items) && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, items.map((item, index) => /*#__PURE__*/React.createElement(LegendItem, _extends({}, item, {\n    key: `item-${index}`\n  }))))), url && /*#__PURE__*/React.createElement(\"img\", {\n    className: styles.legendImage,\n    src: url\n  }), Array.isArray(filters) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filters\n  }, /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Filters'), \":\"), filters.map((filter, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index\n  }, filter))), Array.isArray(explanation) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.explanation\n  }, explanation.map((expl, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index\n  }, expl))), source && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.source\n  }, i18n.t('Source'), \":\\xA0\", sourceUrl ? /*#__PURE__*/React.createElement(\"a\", {\n    href: sourceUrl,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, source) : /*#__PURE__*/React.createElement(\"span\", null, source)));\n};\nLegend.propTypes = {\n  bubbles: PropTypes.shape({\n    radiusHigh: PropTypes.number.isRequired,\n    radiusLow: PropTypes.number.isRequired,\n    color: PropTypes.string\n  }),\n  description: PropTypes.string,\n  explanation: PropTypes.array,\n  filters: PropTypes.array,\n  groups: PropTypes.array,\n  items: PropTypes.array,\n  source: PropTypes.string,\n  sourceUrl: PropTypes.string,\n  unit: PropTypes.string,\n  url: PropTypes.string\n};\nexport default Legend;","// extracted by mini-css-extract-plugin\nexport default {\"btnProgress\":\"DataDownloadDialogActions_btnProgress__eZx74\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/DataDownloadDialogActions.module.css';\nconst DataDownloadDialogActions = _ref => {\n  let {\n    downloading,\n    onStartClick,\n    onCancelClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onCancelClick,\n    disabled: downloading\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    name: \"download-button\",\n    primary: true,\n    onClick: onStartClick,\n    disabled: downloading\n  }, i18n.t('Download'), downloading && /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true,\n    className: styles.btnProgress\n  })));\n};\nDataDownloadDialogActions.propTypes = {\n  downloading: PropTypes.bool.isRequired,\n  onCancelClick: PropTypes.func.isRequired,\n  onStartClick: PropTypes.func.isRequired\n};\nexport default DataDownloadDialogActions;","// extracted by mini-css-extract-plugin\nexport default {\"contentDiv\":\"DataDownloadDialog_contentDiv__ruX2n\",\"inputContainer\":\"DataDownloadDialog_inputContainer__bHEvv\",\"headingDiv\":\"DataDownloadDialog_headingDiv__Gfuok\",\"selectField\":\"DataDownloadDialog_selectField__kEAem\",\"checkboxRoot\":\"DataDownloadDialog_checkboxRoot__H51Al\"};","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { EVENT_LAYER } from '../../../constants/layers.js';\nimport { getFormatOptions, downloadData } from '../../../util/dataDownload.js';\nimport { SelectField, Checkbox, Help } from '../../core/index.js';\nimport DataDownloadDialogActions from './DataDownloadDialogActions.js';\nimport styles from './styles/DataDownloadDialog.module.css';\nconst DataDownloadDialog = _ref => {\n  let {\n    layer,\n    onCloseDialog\n  } = _ref;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const formatOptions = getFormatOptions();\n  const {\n    d2\n  } = useD2();\n  const [selectedFormat, setSelectedFormat] = useState(formatOptions[2]);\n  const [humanReadable, setHumanReadable] = useState(true);\n  const [isDownloading, setIsDownloading] = useState(false);\n  const [error, setError] = useState(null);\n  const aggregations = useSelector(state => state.aggregations);\n  const onChangeFormat = format => {\n    setError(null);\n    setSelectedFormat(format);\n  };\n  const onChangeHumanReadable = isChecked => {\n    setError(null);\n    setHumanReadable(isChecked);\n  };\n  const onClose = () => {\n    setError(null);\n    onCloseDialog();\n  };\n  const onStartDownload = async () => {\n    setIsDownloading(true);\n    setError(null);\n    try {\n      await downloadData({\n        layer,\n        aggregations: aggregations[layer.id],\n        format: selectedFormat.id,\n        humanReadableKeys: humanReadable,\n        d2,\n        nameProperty\n      });\n      setIsDownloading(false);\n      onClose();\n    } catch (e) {\n      console.log('download failed', e);\n      setIsDownloading(false);\n      setError(`download failed ${e}`);\n    }\n  };\n  if (!layer) {\n    console.error('Tried to open data download dialog without specifying a source layer!');\n  }\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    onClose: onClose,\n    dataTest: \"data-download-modal\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Download Layer Data')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contentDiv\n  }, i18n.t('Downloading GeoJSON data for \"{{layerName}}\"', {\n    layerName: layer.name\n  })), /*#__PURE__*/React.createElement(Help, null, i18n.t('GeoJSON is supported by most GIS software, including QGIS and ArcGIS Desktop.')), layer.layer === EVENT_LAYER && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inputContainer\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.headingDiv\n  }, i18n.t('GeoJSON Properties:')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selectField\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('ID Format'),\n    items: formatOptions,\n    value: selectedFormat === null || selectedFormat === void 0 ? void 0 : selectedFormat.id,\n    onChange: onChangeFormat\n  })), /*#__PURE__*/React.createElement(Checkbox, {\n    className: styles.checkboxRoot,\n    label: i18n.t('Use human-readable keys'),\n    checked: humanReadable,\n    onChange: onChangeHumanReadable\n  }))), error && /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, i18n.t('Data download failed.'))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(DataDownloadDialogActions, {\n    downloading: isDownloading,\n    onStartClick: onStartDownload,\n    onCancelClick: onClose\n  })));\n};\nDataDownloadDialog.propTypes = {\n  onCloseDialog: PropTypes.func.isRequired,\n  layer: PropTypes.shape({\n    id: PropTypes.string,\n    layer: PropTypes.string,\n    name: PropTypes.string\n  })\n};\nexport default DataDownloadDialog;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"OverlayCard_legend__daq6o\",\"noticebox\":\"OverlayCard_noticebox__qAzJb\"};","import { useConfig } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport { useSetting } from '@dhis2/app-service-datastore';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { toggleDataTable } from '../../../actions/dataTable.js';\nimport { editLayer, removeLayer, changeLayerOpacity, toggleLayerExpand, toggleLayerVisibility } from '../../../actions/layers.js';\nimport { ALERT_SUCCESS, ALERT_MESSAGE_DYNAMIC } from '../../../constants/alerts.js';\nimport { DOWNLOADABLE_LAYER_TYPES, DATA_TABLE_LAYER_TYPES, OPEN_AS_LAYER_TYPES, EXTERNAL_LAYER } from '../../../constants/layers.js';\nimport { getAnalyticalObjectFromThematicLayer, APP_URLS, CURRENT_AO_KEY } from '../../../util/analyticalObject.js';\nimport Legend from '../../legend/Legend.js';\nimport DataDownloadDialog from '../download/DataDownloadDialog.js';\nimport LayerCard from '../LayerCard.js';\nimport styles from './styles/OverlayCard.module.css';\nconst OverlayCard = _ref => {\n  let {\n    layer,\n    editLayer,\n    removeLayer,\n    changeLayerOpacity,\n    toggleLayerExpand,\n    toggleLayerVisibility,\n    toggleDataTable\n  } = _ref;\n  const [showDataDownloadDialog, setShowDataDownloadDialog] = useState(false);\n  const {\n    baseUrl\n  } = useConfig();\n  const [, /* actual value not used */{\n    set\n  }] = useSetting(CURRENT_AO_KEY);\n  const layerRemovedAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_SUCCESS);\n  const {\n    id,\n    name,\n    legend,\n    isExpanded = true,\n    opacity,\n    isVisible,\n    layer: layerType,\n    isLoaded,\n    loadError\n  } = layer;\n  const canEdit = layerType !== EXTERNAL_LAYER;\n  const canToggleDataTable = DATA_TABLE_LAYER_TYPES.includes(layerType);\n  const canDownload = DOWNLOADABLE_LAYER_TYPES.includes(layerType);\n  const canOpenAs = OPEN_AS_LAYER_TYPES.includes(layerType);\n  const getCardContent = () => {\n    if (loadError) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        \"data-test\": \"load-error-noticebox\",\n        className: styles.noticebox\n      }, /*#__PURE__*/React.createElement(NoticeBox, {\n        error: true,\n        title: i18n.t('Failed to load layer')\n      }, /*#__PURE__*/React.createElement(\"p\", null, loadError)));\n    }\n    return legend && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.legend\n    }, /*#__PURE__*/React.createElement(Legend, legend));\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(LayerCard, {\n    layer: layer,\n    title: isLoaded ? name : i18n.t('Loading layer') + '...',\n    subtitle: isLoaded && legend && legend.period ? legend.period : null,\n    opacity: opacity,\n    isOverlay: true,\n    isExpanded: isExpanded,\n    isVisible: isVisible,\n    toggleExpand: () => toggleLayerExpand(id),\n    onEdit: canEdit ? () => editLayer(layer) : undefined,\n    toggleDataTable: canToggleDataTable ? () => toggleDataTable(id) : undefined,\n    toggleLayerVisibility: () => toggleLayerVisibility(id),\n    onOpacityChange: newOpacity => changeLayerOpacity(id, newOpacity),\n    onRemove: () => {\n      removeLayer(id);\n      layerRemovedAlert.show({\n        msg: i18n.t('{{name}} deleted.', {\n          name\n        })\n      });\n    },\n    downloadData: canDownload ? () => setShowDataDownloadDialog(true) : undefined,\n    openAs: canOpenAs ? async type => {\n      const currentAO = getAnalyticalObjectFromThematicLayer(layer);\n\n      // Store AO in user data store\n      await set(currentAO);\n\n      // Open it in another app\n      window.location.href = `${baseUrl}/${APP_URLS[type]}/#/currentAnalyticalObject`;\n    } : undefined,\n    hasError: !!loadError\n  }, getCardContent()), showDataDownloadDialog && /*#__PURE__*/React.createElement(DataDownloadDialog, {\n    layer: layer,\n    onCloseDialog: () => setShowDataDownloadDialog(false)\n  }));\n};\nOverlayCard.propTypes = {\n  changeLayerOpacity: PropTypes.func.isRequired,\n  editLayer: PropTypes.func.isRequired,\n  layer: PropTypes.object.isRequired,\n  removeLayer: PropTypes.func.isRequired,\n  toggleDataTable: PropTypes.func.isRequired,\n  toggleLayerExpand: PropTypes.func.isRequired,\n  toggleLayerVisibility: PropTypes.func.isRequired\n};\nexport default connect(null, {\n  editLayer,\n  removeLayer,\n  changeLayerOpacity,\n  toggleLayerExpand,\n  toggleLayerVisibility,\n  toggleDataTable\n})(OverlayCard);","// extracted by mini-css-extract-plugin\nexport default {\"layersPanel\":\"LayersPanel_layersPanel__wu0l5\",\"collapsed\":\"LayersPanel_collapsed__RoW6a\",\"layersPanelInner\":\"LayersPanel_layersPanelInner__rnwAP\"};","import cx from 'classnames';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { sortLayers } from '../../actions/layers.js';\nimport BasemapCard from '../layers/basemaps/BasemapCard.js';\nimport LayersToggle from '../layers/LayersToggle.js';\nimport OverlayCard from './overlays/OverlayCard.js';\nimport styles from './styles/LayersPanel.module.css';\nconst SortableLayer = SortableElement(OverlayCard);\n\n// Draggable layers - last layer on top\nconst SortableLayersList = SortableContainer(_ref => {\n  let {\n    layers\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"sortable-layers-list\"\n  }, layers.map((layer, index) => /*#__PURE__*/React.createElement(SortableLayer, {\n    key: layer.id,\n    index: index,\n    layer: layer\n  })));\n});\nconst LayersPanel = () => {\n  const layersPanelOpen = useSelector(state => state.ui.layersPanelOpen);\n  const layers = useSelector(state => [...state.map.mapViews].reverse());\n  const dispatch = useDispatch();\n  const onSort = _ref2 => {\n    let {\n      oldIndex,\n      newIndex\n    } = _ref2;\n    return dispatch(sortLayers({\n      oldIndex,\n      newIndex\n    }));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.layersPanel, {\n      [styles.collapsed]: !layersPanelOpen\n    }),\n    \"data-test\": \"layers-panel\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.layersPanelInner\n  }, layersPanelOpen ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SortableLayersList, {\n    layers: layers,\n    onSortEnd: onSort,\n    useDragHandle: true\n  }), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(BasemapCard, null))) : null), /*#__PURE__*/React.createElement(LayersToggle, null));\n};\nexport default LayersPanel;","import i18n from '@dhis2/d2-i18n';\nimport { defaultFilters } from '../util/earthEngine.js';\nimport { EARTH_ENGINE_LAYER } from './layers.js';\n\n// layerId should be unique\n// datasetId is the Earth Engine dataset id\nexport const earthEngineLayers = () => [{\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj_TOTAL',\n  datasetId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj',\n  name: i18n.t('Population'),\n  unit: i18n.t('people per hectare'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop_age_sex_cons_unadj',\n  img: 'images/population.png',\n  defaultAggregations: ['sum', 'mean'],\n  periodType: 'Yearly',\n  band: 'population',\n  filters: _ref => {\n    let {\n      id,\n      name,\n      year\n    } = _ref;\n    return [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }];\n  },\n  mosaic: true,\n  params: {\n    min: 0,\n    max: 25,\n    palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj',\n  datasetId: 'WorldPop/GP/100m/pop_age_sex_cons_unadj',\n  name: i18n.t('Population age groups'),\n  unit: i18n.t('people per hectare'),\n  description: i18n.t('Estimated number of people living in an area, grouped by age and gender.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop_age_sex_cons_unadj',\n  img: 'images/population.png',\n  periodType: 'Yearly',\n  defaultAggregations: ['sum', 'mean'],\n  bands: [{\n    id: 'M_0',\n    name: i18n.t('Male 0 - 1 years')\n  }, {\n    id: 'M_1',\n    name: i18n.t('Male 1 - 4 years')\n  }, {\n    id: 'M_5',\n    name: i18n.t('Male 5 - 9 years')\n  }, {\n    id: 'M_10',\n    name: i18n.t('Male 10 - 14 years')\n  }, {\n    id: 'M_15',\n    name: i18n.t('Male 15 - 19 years')\n  }, {\n    id: 'M_20',\n    name: i18n.t('Male 20 - 24 years')\n  }, {\n    id: 'M_25',\n    name: i18n.t('Male 25 - 29 years')\n  }, {\n    id: 'M_30',\n    name: i18n.t('Male 30 - 34 years')\n  }, {\n    id: 'M_35',\n    name: i18n.t('Male 35 - 39 years')\n  }, {\n    id: 'M_40',\n    name: i18n.t('Male 40 - 44 years')\n  }, {\n    id: 'M_45',\n    name: i18n.t('Male 45 - 49 years')\n  }, {\n    id: 'M_50',\n    name: i18n.t('Male 50 - 54 years')\n  }, {\n    id: 'M_55',\n    name: i18n.t('Male 55 - 59 years')\n  }, {\n    id: 'M_60',\n    name: i18n.t('Male 60 - 64 years')\n  }, {\n    id: 'M_65',\n    name: i18n.t('Male 65 - 69 years')\n  }, {\n    id: 'M_70',\n    name: i18n.t('Male 70 - 74 years')\n  }, {\n    id: 'M_75',\n    name: i18n.t('Male 75 - 79 years')\n  }, {\n    id: 'M_80',\n    name: i18n.t('Male 80 years and above')\n  }, {\n    id: 'F_0',\n    name: i18n.t('Female 0 - 1 years')\n  }, {\n    id: 'F_1',\n    name: i18n.t('Female 1 - 4 years')\n  }, {\n    id: 'F_5',\n    name: i18n.t('Female 5 - 9 years')\n  }, {\n    id: 'F_10',\n    name: i18n.t('Female 10 - 14 years')\n  }, {\n    id: 'F_15',\n    name: i18n.t('Female 15 - 19 years')\n  }, {\n    id: 'F_20',\n    name: i18n.t('Female 20 - 24 years')\n  }, {\n    id: 'F_25',\n    name: i18n.t('Female 25 - 29 years')\n  }, {\n    id: 'F_30',\n    name: i18n.t('Female 30 - 34 years')\n  }, {\n    id: 'F_35',\n    name: i18n.t('Female 35 - 39 years')\n  }, {\n    id: 'F_40',\n    name: i18n.t('Female 40 - 44 years')\n  }, {\n    id: 'F_45',\n    name: i18n.t('Female 45 - 49 years')\n  }, {\n    id: 'F_50',\n    name: i18n.t('Female 50 - 54 years')\n  }, {\n    id: 'F_55',\n    name: i18n.t('Female 55 - 59 years')\n  }, {\n    id: 'F_60',\n    name: i18n.t('Female 60 - 64 years')\n  }, {\n    id: 'F_65',\n    name: i18n.t('Female 65 - 69 years')\n  }, {\n    id: 'F_70',\n    name: i18n.t('Female 70 - 74 years'),\n    multiple: true\n  }, {\n    id: 'F_75',\n    name: i18n.t('Female 75 - 79 years')\n  }, {\n    id: 'F_80',\n    name: i18n.t('Female 80 years and above')\n  }],\n  filters: _ref2 => {\n    let {\n      id,\n      name,\n      year\n    } = _ref2;\n    return [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }];\n  },\n  mosaic: true,\n  params: {\n    min: 0,\n    max: 10,\n    palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n  },\n\n  opacity: 0.9,\n  tileScale: 4\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'GOOGLE/Research/open-buildings/v1/polygons',\n  datasetId: 'GOOGLE/Research/open-buildings/v1/polygons',\n  format: 'FeatureCollection',\n  name: i18n.t('Building footprints'),\n  unit: i18n.t('Number of buildings'),\n  description: i18n.t('The outlines of buildings derived from high-resolution satellite imagery. Only for the continent of Africa.'),\n  notice: i18n.t('Building counts are only available for smaller organisation unit areas.'),\n  error: i18n.t('Select a smaller area or single organization unit to see the count of buildings.'),\n  source: 'NASA / USGS / JPL-Caltech / Google Earth Engine',\n  sourceUrl: 'https://sites.research.google/open-buildings/',\n  img: 'images/buildings.png',\n  aggregations: ['count'],\n  defaultAggregations: ['count'],\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'USGS/SRTMGL1_003',\n  datasetId: 'USGS/SRTMGL1_003',\n  name: i18n.t('Elevation'),\n  unit: i18n.t('meters'),\n  description: i18n.t('Elevation above sea-level.'),\n  source: 'NASA / USGS / JPL-Caltech / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/USGS%2FSRTMGL1_003',\n  img: 'images/elevation.png',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  band: 'elevation',\n  params: {\n    min: 0,\n    max: 1500,\n    palette: '#ffffd4,#fee391,#fec44f,#fe9929,#d95f0e,#993404' // YlOrBr\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'UCSB-CHG/CHIRPS/PENTAD',\n  datasetId: 'UCSB-CHG/CHIRPS/PENTAD',\n  name: i18n.t('Precipitation'),\n  unit: i18n.t('millimeter'),\n  description: i18n.t('Precipitation collected from satellite and weather stations on the ground. The values are in millimeters within 5 days periods. Updated monthly, during the 3rd week of the following month.'),\n  source: 'UCSB / CHG / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/UCSB-CHG%2FCHIRPS%2FPENTAD',\n  periodType: 'Custom',\n  band: 'precipitation',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  mask: true,\n  img: 'images/precipitation.png',\n  params: {\n    min: 0,\n    max: 100,\n    palette: '#eff3ff,#c6dbef,#9ecae1,#6baed6,#3182bd,#08519c' // Blues\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'MODIS/006/MOD11A2',\n  datasetId: 'MODIS/006/MOD11A2',\n  name: i18n.t('Temperature'),\n  unit: i18n.t('°C during daytime'),\n  description: i18n.t('Land surface temperatures collected from satellite. Blank spots will appear in areas with a persistent cloud cover.'),\n  source: 'NASA LP DAAC / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/MODIS%2FMOD11A2',\n  img: 'images/temperature.png',\n  aggregations: ['min', 'max', 'mean', 'median', 'stdDev', 'variance'],\n  defaultAggregations: ['mean', 'min', 'max'],\n  periodType: 'Custom',\n  band: 'LST_Day_1km',\n  mask: true,\n  methods: {\n    toFloat: [],\n    multiply: [0.02],\n    subtract: [273.15]\n  },\n  params: {\n    min: 0,\n    max: 40,\n    palette: '#fff5f0,#fee0d2,#fcbba1,#fc9272,#fb6a4a,#ef3b2c,#cb181d,#a50f15,#67000d' // Reds\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  layerId: 'MODIS/006/MCD12Q1',\n  // Layer id kept for backward compability for saved maps\n  datasetId: 'MODIS/061/MCD12Q1',\n  // No longer in use: 'MODIS/006/MCD12Q1' / 'MODIS/051/MCD12Q1',\n  name: i18n.t('Landcover'),\n  description: i18n.t('Distinct landcover types collected from satellites.'),\n  source: 'NASA LP DAAC / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/MODIS_061_MCD12Q1',\n  periodType: 'Yearly',\n  band: 'LC_Type1',\n  filters: defaultFilters,\n  defaultAggregations: 'percentage',\n  legend: {\n    items: [\n    // http://www.eomf.ou.edu/static/IGBP.pdf\n    {\n      id: 1,\n      name: i18n.t('Evergreen Needleleaf forest'),\n      color: '#162103'\n    }, {\n      id: 2,\n      name: i18n.t('Evergreen Broadleaf forest'),\n      color: '#235123'\n    }, {\n      id: 3,\n      name: i18n.t('Deciduous Needleleaf forest'),\n      color: '#399b38'\n    }, {\n      id: 4,\n      name: i18n.t('Deciduous Broadleaf forest'),\n      color: '#38eb38'\n    }, {\n      id: 5,\n      name: i18n.t('Mixed forest'),\n      color: '#39723b'\n    }, {\n      id: 6,\n      name: i18n.t('Closed shrublands'),\n      color: '#6a2424'\n    }, {\n      id: 7,\n      name: i18n.t('Open shrublands'),\n      color: '#c3a55f'\n    }, {\n      id: 8,\n      name: i18n.t('Woody savannas'),\n      color: '#b76124'\n    }, {\n      id: 9,\n      name: i18n.t('Savannas'),\n      color: '#d99125'\n    }, {\n      id: 10,\n      name: i18n.t('Grasslands'),\n      color: '#92af1f'\n    }, {\n      id: 11,\n      name: i18n.t('Permanent wetlands'),\n      color: '#10104c'\n    }, {\n      id: 12,\n      name: i18n.t('Croplands'),\n      color: '#cdb400'\n    }, {\n      id: 13,\n      name: i18n.t('Urban and built-up'),\n      color: '#cc0202'\n    }, {\n      id: 14,\n      name: i18n.t('Cropland/Natural vegetation mosaic'),\n      color: '#332808'\n    }, {\n      id: 15,\n      name: i18n.t('Snow and ice'),\n      color: '#d7cdcc'\n    }, {\n      id: 16,\n      name: i18n.t('Barren or sparsely vegetated'),\n      color: '#f7e174'\n    }, {\n      id: 17,\n      name: i18n.t('Water'),\n      color: '#aec3d6'\n    }]\n  },\n  mask: false,\n  popup: '{name}: {value}',\n  img: 'images/landcover.png',\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  legacy: true,\n  // Kept for backward compability\n  layerId: 'WorldPop/GP/100m/pop',\n  datasetId: 'WorldPop/GP/100m/pop',\n  name: i18n.t('Population'),\n  unit: i18n.t('people per hectare'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://developers.google.com/earth-engine/datasets/catalog/WorldPop_GP_100m_pop',\n  img: 'images/population.png',\n  defaultAggregations: ['sum', 'mean'],\n  periodType: 'Yearly',\n  filters: _ref3 => {\n    let {\n      id,\n      name,\n      year\n    } = _ref3;\n    return [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }];\n  },\n  mosaic: true,\n  params: {\n    min: 0,\n    max: 10,\n    palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  legacy: true,\n  // Kept for backward compability\n  layerId: 'WorldPop/POP',\n  datasetId: 'WorldPop/POP',\n  name: i18n.t('Population'),\n  unit: i18n.t('people per km²'),\n  description: i18n.t('Estimated number of people living in an area.'),\n  source: 'WorldPop / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/WorldPop%2FPOP',\n  img: 'images/population.png',\n  periodType: 'Yearly',\n  filters: _ref4 => {\n    let {\n      id,\n      name,\n      year\n    } = _ref4;\n    return [{\n      id,\n      name,\n      type: 'eq',\n      arguments: ['year', year]\n    }, {\n      type: 'eq',\n      arguments: ['UNadj', 'yes']\n    }];\n  },\n  mosaic: true,\n  params: {\n    min: 0,\n    max: 1000,\n    palette: '#fee5d9,#fcbba1,#fc9272,#fb6a4a,#de2d26,#a50f15' // Reds\n  },\n\n  methods: {\n    multiply: [100] // Convert from people/hectare to people/km2\n  },\n\n  opacity: 0.9\n}, {\n  layer: EARTH_ENGINE_LAYER,\n  legacy: true,\n  // Kept for backward compability\n  layerId: 'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS',\n  datasetId: 'NOAA/DMSP-OLS/NIGHTTIME_LIGHTS',\n  name: i18n.t('Nighttime lights'),\n  unit: i18n.t('light intensity'),\n  description: i18n.t('Light intensity from cities, towns, and other sites with persistent lighting, including gas flares.'),\n  source: 'NOAA / Google Earth Engine',\n  sourceUrl: 'https://explorer.earthengine.google.com/#detail/NOAA%2FDMSP-OLS%2FNIGHTTIME_LIGHTS',\n  periodType: 'Yearly',\n  band: 'stable_lights',\n  mask: true,\n  img: 'images/nighttime.png',\n  params: {\n    min: 0,\n    max: 63,\n    palette: '#ffffd4,#fee391,#fec44f,#fe9929,#ec7014,#cc4c02,#8c2d04' // YlOrBr\n  },\n\n  opacity: 0.9\n}];\nexport const getEarthEngineLayer = id => earthEngineLayers().find(l => l.layerId === id);","import { compact, sortBy, isString } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nexport const toGeoJson = organisationUnits => sortBy('le', organisationUnits).map(ou => {\n  const coord = JSON.parse(ou.co);\n  let gpid = '';\n  let gppg = '';\n  let type = 'Point';\n  if (ou.ty === 2) {\n    type = 'Polygon';\n    if (ou.co.substring(0, 4) === '[[[[') {\n      type = 'MultiPolygon';\n    }\n  }\n\n  // Grand parent\n  if (isString(ou.pg) && ou.pg.length) {\n    const ids = compact(ou.pg.split('/'));\n\n    // Grand parent id\n    if (ids.length >= 2) {\n      gpid = ids[ids.length - 2];\n    }\n\n    // Grand parent parent graph\n    if (ids.length > 2) {\n      gppg = '/' + ids.slice(0, ids.length - 2).join('/');\n    }\n  }\n  return {\n    type: 'Feature',\n    id: ou.id,\n    geometry: {\n      type,\n      coordinates: coord\n    },\n    properties: {\n      type,\n      id: ou.id,\n      name: ou.na,\n      hasCoordinatesDown: ou.hcd,\n      hasCoordinatesUp: ou.hcu,\n      level: ou.le,\n      grandParentParentGraph: gppg,\n      grandParentId: gpid,\n      parentGraph: ou.pg,\n      parentId: ou.pi,\n      parentName: ou.pn,\n      dimensions: ou.dimensions\n    }\n  };\n}).filter(_ref => {\n  let {\n    geometry\n  } = _ref;\n  return Array.isArray(geometry.coordinates) && geometry.coordinates.length && geometry.coordinates.flat().length;\n});\n\n//eslint-disable-next-line max-params\nexport const drillUpDown = (layerConfig, parentId, parentGraph, level) => ({\n  ...layerConfig,\n  rows: [{\n    dimension: dimConf.organisationUnit.objectName,\n    items: [{\n      id: parentId,\n      path: `${parentGraph}/${parentId}`\n    }, {\n      id: 'LEVEL-' + level\n    }]\n  }],\n  isLoaded: false,\n  isLoading: false\n});\n\n// Called when plugin maps enter or exit fullscreen\nexport const onFullscreenChange = function (map) {\n  let isFullscreen = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  map.resize();\n  if (!isFullscreen) {\n    const bounds = map.getLayersBounds();\n    if (Array.isArray(bounds)) {\n      map.fitBounds(bounds);\n    }\n  }\n  map.toggleMultiTouch(!isFullscreen);\n  map.toggleScrollZoom(isFullscreen);\n};","// Qualitative colors From ColorBrewer (reordered 12-class)\nexport const qualitativeColors = ['#1f78b4', '#ff7f00', '#33a02c', '#a6cee3', '#b2df8a', '#fb9a99', '#fdbf6f', '#cab2d6', '#ffff99', '#b15928', '#6a3d9a', '#e31a1c'];","import i18n from '@dhis2/d2-i18n';\nimport { uniqBy } from 'lodash/fp';\nimport { qualitativeColors } from '../constants/colors.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, ORG_UNIT_RADIUS_SMALL, STYLE_TYPE_COLOR, STYLE_TYPE_SYMBOL, NONE } from '../constants/layers.js';\nimport { apiFetch } from './api.js';\nimport { getUniqueColor } from './colors.js';\nimport { getDisplayPropertyUrl } from './helpers.js';\nconst getGroupColor = groups => {\n  const groupsWithoutColors = groups.filter(g => !g.color);\n  const colors = getUniqueColor(qualitativeColors);\n  return group => {\n    const index = groupsWithoutColors.findIndex(g => g.id === group.id);\n    return colors(index);\n  };\n};\n\n// Default symbol 21-25 are coloured circles\nconst getGroupSymbol = groups => {\n  const groupsWithoutSymbols = groups.filter(g => !g.symbol);\n  return group => {\n    const index = groupsWithoutSymbols.findIndex(g => g.id === group.id);\n    return index < 5 ? `${21 + index}.png` : '25.png';\n  };\n};\nexport const parseGroupSet = _ref => {\n  let {\n    organisationUnitGroups: groups\n  } = _ref;\n  groups.sort((a, b) => a.name.localeCompare(b.name));\n  const getColor = getGroupColor(groups);\n  const getSymbol = getGroupSymbol(groups);\n  return groups.map(group => ({\n    ...group,\n    color: group.color || getColor(group),\n    symbol: group.symbol || getSymbol(group)\n  }));\n};\nexport const fetchOrgUnitGroupSet = id => apiFetch(`/organisationUnitGroupSets/${id}?fields=organisationUnitGroups[id,name,color,symbol]`).then(parseGroupSet);\nexport const getPointItems = data => data.filter(d => d.ty === 1);\nexport const getPolygonItems = data => data.filter(d => d.ty === 2);\nexport const getOrgUnitStyle = (dimensions, groupSet) => groupSet && groupSet.organisationUnitGroups && dimensions && dimensions[groupSet.id] ? groupSet.organisationUnitGroups.find(g => g.id === dimensions[groupSet.id]) : {};\nexport const getOrgUnitGroupLegendItems = function () {\n  let groups = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let useColor = arguments.length > 1 ? arguments[1] : undefined;\n  let contextPath = arguments.length > 2 ? arguments[2] : undefined;\n  return groups.map(_ref2 => {\n    let {\n      name,\n      color = true,\n      symbol\n    } = _ref2;\n    return useColor ? {\n      name,\n      color\n    } : {\n      name,\n      image: `${contextPath}/images/orgunitgroup/${symbol}`\n    };\n  });\n};\n\n/* eslint-disable max-params */\nexport const getStyledOrgUnits = function () {\n  let features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let groupSet = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let {\n    organisationUnitColor = ORG_UNIT_COLOR,\n    radiusLow = ORG_UNIT_RADIUS\n  } = arguments.length > 2 ? arguments[2] : undefined;\n  let contextPath = arguments.length > 3 ? arguments[3] : undefined;\n  let orgUnitLevels = arguments.length > 4 ? arguments[4] : undefined;\n  const {\n    name,\n    styleType = orgUnitLevels ? STYLE_TYPE_COLOR : STYLE_TYPE_SYMBOL,\n    organisationUnitGroups = []\n  } = groupSet;\n  const isFacilityLayer = !orgUnitLevels;\n  let levelWeight;\n  let levelItems = [];\n  if (!isFacilityLayer) {\n    const levels = uniqBy(f => f.properties.level, features).map(f => f.properties.level).sort();\n    levelWeight = level => Math.pow(levels.length - levels.indexOf(level), 1.2);\n    levelItems = levels.map(level => ({\n      name: orgUnitLevels[level],\n      color: organisationUnitColor,\n      weight: levelWeight(level)\n    }));\n  }\n  const useColor = styleType === STYLE_TYPE_COLOR;\n  let styledFeatures = features.map(f => {\n    const isPoint = f.geometry.type === 'Point';\n    const {\n      hasAdditionalGeometry\n    } = f.properties;\n    const {\n      color,\n      symbol\n    } = getOrgUnitStyle(f.properties.dimensions, groupSet);\n    let radius;\n    if (isPoint) {\n      radius = hasAdditionalGeometry ? ORG_UNIT_RADIUS_SMALL + 1 : radiusLow;\n    }\n    const properties = {\n      ...f.properties,\n      radius\n    };\n    if (useColor && color) {\n      properties.color = hasAdditionalGeometry ? ORG_UNIT_COLOR : color;\n    } else if (symbol) {\n      properties.iconUrl = `${contextPath}/images/orgunitgroup/${symbol}`;\n    }\n    if (properties.level && levelWeight) {\n      properties.weight = levelWeight(f.properties.level);\n    }\n    return {\n      ...f,\n      properties\n    };\n  });\n\n  // Only include facilities having a group membership\n  if (isFacilityLayer && groupSet.id && !useColor) {\n    styledFeatures = styledFeatures.filter(f => f.properties.iconUrl);\n  }\n  const groupItems = getOrgUnitGroupLegendItems(organisationUnitGroups, useColor, contextPath);\n  const facilityItems = isFacilityLayer && !groupSet.id ? [{\n    name: i18n.t('Facility'),\n    color: organisationUnitColor,\n    radius: radiusLow\n  }] : [];\n  return {\n    styledFeatures,\n    legend: {\n      unit: name,\n      items: [...levelItems, ...groupItems, ...facilityItems]\n    }\n  };\n};\n/* eslint-enable max-params */\n\n// This function returns the org unit level names used in the legend\nexport const getOrgUnitLevels = async d2 => {\n  const orgUnitLevels = await d2.models.organisationUnitLevels.list({\n    fields: `id,${getDisplayPropertyUrl(d2)},level`,\n    paging: false\n  });\n  return orgUnitLevels ? orgUnitLevels.toArray().reduce((obj, item) => ({\n    ...obj,\n    [item.level]: item.name\n  }), {}) : {};\n};\n\n// Converts \"LEVEL-x\" to newer \"LEVEL-uid\" format\nexport const translateOrgUnitLevels = function (orgUnits) {\n  let orgUnitLevels = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  const items = (orgUnits === null || orgUnits === void 0 ? void 0 : orgUnits.items) || [];\n  return items.map(item => {\n    const levelNumber = item.id.match(/^LEVEL-([0-9])+$/);\n    if (levelNumber) {\n      const level = orgUnitLevels.find(l => l.level === Number(levelNumber[1]));\n      if (level) {\n        const {\n          id,\n          name\n        } = level;\n        return {\n          id: `LEVEL-${id}`,\n          name\n        };\n      }\n    }\n    return item;\n  });\n};\n\n// Returns coordinate field from layer config\nexport const getCoordinateField = _ref3 => {\n  let {\n    orgUnitField,\n    orgUnitFieldDisplayName\n  } = _ref3;\n  return orgUnitField && orgUnitField !== NONE ? {\n    id: orgUnitField,\n    name: orgUnitFieldDisplayName\n  } : null;\n};\n\n// Combines main org unit features with associated geometries\nexport const addAssociatedGeometries = (mainFeatures, associatedGeometries) => {\n  // Return main features if there are no associated geomteries\n  if (!associatedGeometries) {\n    return mainFeatures;\n  }\n\n  // If there are associated geometries we only return main features that are\n  // points - and only if the associated geometry is not existing or not a point.\n  // The returned main feature points with an associated geometry gets an extra\n  // \"hasAdditionalGeometry\" property (used to only show the same org unit once\n  // in the data table).\n  return mainFeatures.filter(f => {\n    const associated = associatedGeometries.find(a => a.id === f.id);\n    if (f.geometry.type === 'Point') {\n      return associated ? associated.geometry.type !== 'Point' : true;\n    } else {\n      return false;\n    }\n  }).map(f => {\n    const associated = associatedGeometries.find(a => a.id === f.id);\n    return associated ? {\n      ...f,\n      properties: {\n        ...f.properties,\n        hasAdditionalGeometry: true\n      }\n    } : f;\n  }).concat(associatedGeometries);\n};","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { precisionRound } from 'd3-format';\nimport { getEarthEngineLayer } from '../constants/earthEngine.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { hasClasses, getPeriodNameFromFilter } from '../util/earthEngine.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { toGeoJson } from '../util/map.js';\nimport { getRoundToPrecisionFn } from '../util/numbers.js';\nimport { getCoordinateField, addAssociatedGeometries } from '../util/orgUnits.js';\n\n// Returns a promise\nconst earthEngineLoader = async config => {\n  const {\n    rows,\n    aggregationType\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const coordinateField = getCoordinateField(config);\n  const alerts = [];\n  let layerConfig = {};\n  let dataset;\n  let features;\n  if (orgUnits && orgUnits.length) {\n    const d2 = await getD2();\n    const displayProperty = getDisplayProperty(d2).toUpperCase();\n    const orgUnitParams = orgUnits.map(item => item.id);\n    let mainFeatures;\n    let associatedGeometries;\n    const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayProperty);\n    try {\n      mainFeatures = await featuresRequest.getAll().then(toGeoJson);\n      if (coordinateField) {\n        associatedGeometries = await featuresRequest.getAll({\n          coordinateField: coordinateField.id\n        }).then(toGeoJson);\n        if (!associatedGeometries.length) {\n          alerts.push({\n            warning: true,\n            message: i18n.t('{{name}}: No coordinates found', {\n              name: coordinateField.name,\n              nsSeparator: ';'\n            })\n          });\n        }\n      }\n      features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n      if (!features.length) {\n        alerts.push({\n          warning: true,\n          message: i18n.t('Selected org units: No coordinates found', {\n            nsSeparator: ';'\n          })\n        });\n      }\n    } catch (error) {\n      alerts.push({\n        critical: true,\n        message: i18n.t('Error: {{message}}', {\n          message: error.message,\n          nsSeparator: ';'\n        })\n      });\n    }\n  }\n  if (typeof config.config === 'string') {\n    // From database as favorite\n    layerConfig = JSON.parse(config.config);\n\n    // Backward compability for layers with periods saved before 2.36\n    // (could also be fixed in a db update script)\n    if (layerConfig.image) {\n      var _layerConfig$filter;\n      const filter = (_layerConfig$filter = layerConfig.filter) === null || _layerConfig$filter === void 0 ? void 0 : _layerConfig$filter[0];\n      if (filter) {\n        var _filter$arguments;\n        const period = (_filter$arguments = filter.arguments) === null || _filter$arguments === void 0 ? void 0 : _filter$arguments[1];\n        let name = String(layerConfig.image);\n        if (typeof period === 'string' && period.length > 4) {\n          const year = period.substring(0, 4);\n          filter.year = parseInt(year, 10);\n          if (name.slice(-4) === year) {\n            name = name.slice(0, -4);\n          }\n        }\n        filter.name = name;\n      }\n    }\n    dataset = getEarthEngineLayer(layerConfig.id);\n    if (dataset) {\n      delete layerConfig.id;\n    }\n    delete config.config;\n  } else {\n    dataset = getEarthEngineLayer(layerConfig.id);\n  }\n  const layer = {\n    ...dataset,\n    ...config,\n    ...layerConfig\n  };\n  const {\n    unit,\n    filter,\n    description,\n    source,\n    sourceUrl,\n    band,\n    bands\n  } = layer;\n  const {\n    name\n  } = dataset || config;\n  const period = getPeriodNameFromFilter(filter);\n  const data = Array.isArray(features) && features.length ? features : undefined;\n  const hasBand = b => Array.isArray(band) ? band.includes(b.id) : band === b.id;\n  const groups = band && Array.isArray(bands) && bands.length ? bands.filter(hasBand) : null;\n  const legend = {\n    ...layer.legend,\n    title: name,\n    period,\n    groups,\n    unit,\n    description,\n    source,\n    sourceUrl\n  };\n\n  // Create/update legend items from params\n  if (!hasClasses(aggregationType) && layer.params) {\n    legend.items = createLegend(layer.params);\n  }\n  return {\n    ...layer,\n    legend,\n    name,\n    data,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport const createLegend = _ref => {\n  let {\n    min,\n    max,\n    palette\n  } = _ref;\n  const colors = palette.split(',');\n  const step = (max - min) / (colors.length - (min > 0 ? 2 : 1));\n  const precision = precisionRound(step, max);\n  const valueFormat = getRoundToPrecisionFn(precision);\n  let from = min;\n  let to = valueFormat(min + step);\n  return colors.map((color, index) => {\n    const item = {\n      color\n    };\n    if (index === 0 && min > 0) {\n      // Less than min\n      item.from = 0;\n      item.to = min;\n      item.name = '< ' + min;\n      to = min;\n    } else if (from < max) {\n      item.from = from;\n      item.to = to;\n      item.name = from + ' - ' + to;\n    } else {\n      // Higher than max\n      item.from = from;\n      item.name = '> ' + from;\n    }\n    from = to;\n    to = valueFormat(min + step * (index + (min > 0 ? 1 : 2)));\n    return item;\n  });\n};\nexport default earthEngineLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport earthEngineLoader from '../../loaders/earthEngineLoader.js';\nconst EarthEngineLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    earthEngineLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nEarthEngineLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default EarthEngineLoader;","import i18n from '@dhis2/d2-i18n';\nexport const EVENT_STATUS_ALL = 'ALL';\nexport const EVENT_STATUS_ACTIVE = 'ACTIVE';\nexport const EVENT_STATUS_COMPLETED = 'COMPLETED';\nexport const getEventStatuses = () => [{\n  id: EVENT_STATUS_ALL,\n  name: i18n.t('All')\n}, {\n  id: EVENT_STATUS_ACTIVE,\n  name: i18n.t('Active')\n}, {\n  id: EVENT_STATUS_COMPLETED,\n  name: i18n.t('Completed')\n}];","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { curry } from 'lodash/fp';\nimport { EVENT_COLOR, EVENT_RADIUS, CLASSIFICATION_PREDEFINED } from '../constants/layers.js';\nimport { numberValueTypes } from '../constants/valueTypes.js';\nimport { cssColor } from '../util/colors.js';\nimport { getLegendItemForValue } from './classify.js';\nimport { loadLegendSet, getAutomaticLegendItems, getPredefinedLegendItems } from './legend.js';\n\n// \"Style by data item\" handling for event layer\n// Can be reused for TEI layer when the Web API is improved\n// This function is modifiyng the config object before it's added to the redux store\nexport const styleByDataItem = async config => {\n  const {\n    styleDataItem\n  } = config;\n  if (styleDataItem.optionSet) {\n    await styleByOptionSet(config);\n  } else if (numberValueTypes.includes(styleDataItem.valueType)) {\n    await styleByNumeric(config);\n  } else if (styleDataItem.valueType === 'BOOLEAN') {\n    await styleByBoolean(config);\n  }\n  config.legend.items.push({\n    name: i18n.t('Not set'),\n    color: cssColor(config.eventPointColor) || EVENT_COLOR,\n    radius: config.eventPointRadius || EVENT_RADIUS\n  });\n  return config;\n};\nexport const styleByBoolean = async config => {\n  const {\n    styleDataItem,\n    data,\n    legend,\n    eventPointRadius\n  } = config;\n  const {\n    id,\n    name,\n    values\n  } = styleDataItem;\n  config.data = data.map(feature => {\n    const value = feature.properties[id] || '0';\n    if (!value) {\n      return feature;\n    }\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value: value === '1' ? i18n.t('Yes') : i18n.t('No'),\n        color: value === '1' ? values.true : values.false\n      }\n    };\n  });\n  legend.unit = name || (await getDataElementName(id));\n  legend.items = [{\n    name: i18n.t('Yes'),\n    color: values.true,\n    radius: eventPointRadius || EVENT_RADIUS\n  }];\n  if (values.false) {\n    legend.items.push({\n      name: i18n.t('No'),\n      color: values.false,\n      radius: eventPointRadius || EVENT_RADIUS\n    });\n  }\n  return config;\n};\nexport const styleByNumeric = async config => {\n  const {\n    styleDataItem,\n    method,\n    classes,\n    colorScale,\n    eventPointRadius,\n    data\n  } = config;\n\n  // If legend set\n  if (method === CLASSIFICATION_PREDEFINED) {\n    // Load legend set from server\n    const legendSet = await loadLegendSet(config.legendSet);\n\n    // Use legend set name and legend unit\n    config.legend.unit = legendSet.name;\n\n    // Generate legend items from legendSet\n    config.legend.items = getPredefinedLegendItems(legendSet);\n  } else {\n    // Create array of sorted values needed for classification\n    const sortedValues = data.map(feature => Number(feature.properties[styleDataItem.id])).sort((a, b) => a - b);\n\n    // Use data item name as legend unit (load from server if needed)\n    config.legend.unit = styleDataItem.name || (await getDataElementName(styleDataItem.id));\n\n    // Generate legend items based on layer config\n    config.legend.items = getAutomaticLegendItems(sortedValues, method, classes, colorScale);\n  }\n\n  // Add radius and count to each legend item\n  config.legend.items.forEach(item => {\n    item.radius = eventPointRadius || EVENT_RADIUS;\n    item.count = 0;\n  });\n\n  // Helper function to get legend item for data value\n  const getLegendItem = curry(getLegendItemForValue)(config.legend.items);\n\n  // Add style data value and color to each feature\n  config.data = config.data.map(feature => {\n    const value = Number(feature.properties[styleDataItem.id]);\n    const legendItem = getLegendItem(value);\n    if (legendItem) {\n      legendItem.count++;\n    }\n    return {\n      ...feature,\n      properties: {\n        ...feature.properties,\n        value,\n        color: legendItem ? legendItem.color : null\n      }\n    };\n  });\n  return config;\n};\nexport const styleByOptionSet = async config => {\n  const {\n    styleDataItem\n  } = config;\n  const optionSet = await getOptionSet(styleDataItem.optionSet);\n  const id = styleDataItem.id;\n\n  // Replace styleDataItem with a version with names\n  config.styleDataItem = {\n    ...styleDataItem,\n    name: optionSet.name,\n    optionSet\n  };\n\n  // For easier and faster lookup below\n  // TODO: There might be options with duplicate name, so code/id would be safer\n  // If we use code/id we also need to retrive name to show in popup/data table/download\n  const optionsByName = optionSet.options.reduce((obj, option) => {\n    obj[option.name.toLowerCase()] = option;\n    return obj;\n  }, {});\n\n  // Add style data value and color to each feature\n  config.data = config.data.map(feature => {\n    const name = feature.properties[id];\n    if (name) {\n      const option = optionsByName[name.toLowerCase()];\n      if (option) {\n        return {\n          ...feature,\n          properties: {\n            ...feature.properties,\n            value: option.name,\n            color: option.style.color\n          }\n        };\n      }\n    }\n    return feature;\n  });\n\n  // Add legend data\n  config.legend.unit = optionSet.name;\n  config.legend.items = optionSet.options.map(option => ({\n    name: option.name,\n    color: option.style.color,\n    radius: config.eventPointRadius || EVENT_RADIUS\n  }));\n  return config;\n};\n\n// The style option set included in a favorite is stripped for names\n// and this function add the names if needed\nconst getOptionSet = async optionSet => {\n  // Return unmodified option set if names are included\n  if (optionSet.name) {\n    return optionSet;\n  }\n\n  // Load option set from server\n  const d2 = await getD2();\n  const optSet = await d2.models.optionSet.get(optionSet.id, {\n    fields: 'displayName~rename(name),options[id,code,displayName~rename(name)]'\n  });\n\n  // Return modified option set with names and codes\n  return {\n    ...optionSet,\n    name: optSet.name,\n    options: optionSet.options.map(option => ({\n      ...optSet.options.find(opt => opt.id === option.id),\n      ...option\n    }))\n  };\n};\nconst getDataElementName = async id => {\n  const d2 = await getD2();\n  return d2.models.dataElement.get(id, {\n    fields: 'displayName~rename(name)'\n  }).then(model => model.name);\n};","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { getEventStatuses } from '../constants/eventStatuses.js';\nimport { EVENT_CLIENT_PAGE_SIZE, EVENT_SERVER_CLUSTER_COUNT, EVENT_COLOR, EVENT_RADIUS } from '../constants/layers.js';\nimport { numberValueTypes } from '../constants/valueTypes.js';\nimport { getFiltersFromColumns, getFiltersAsText, getPeriodFromFilters, getPeriodNameFromId } from '../util/analytics.js';\nimport { cssColor, getContrastColor } from '../util/colors.js';\nimport { getAnalyticsRequest, loadData } from '../util/event.js';\nimport { getBounds } from '../util/geojson.js';\nimport { styleByDataItem } from '../util/styleByDataItem.js';\nimport { formatStartEndDate, getDateArray } from '../util/time.js';\nimport { isValidUid } from '../util/uid.js';\n\n// Server clustering if more than 2000 events\nconst useServerCluster = count => count > EVENT_SERVER_CLUSTER_COUNT;\nconst accessDeniedAlert = {\n  warning: true,\n  message: i18n.t(\"You don't have access to this layer data\")\n};\nconst filterErrorAlert = {\n  warning: true,\n  message: i18n.t('The event filter is not supported')\n};\nconst unknownErrorAlert = {\n  critical: true,\n  message: i18n.t('An unknown error occurred while reading layer data')\n};\n\n// TODO: Refactor to share code with other loaders\n// Returns a promise\nconst eventLoader = async (layerConfig, loadExtended) => {\n  const config = {\n    ...layerConfig\n  };\n  try {\n    await loadEventLayer(config, loadExtended);\n  } catch (e) {\n    if (e.httpStatusCode === 403 || e.httpStatusCode === 409) {\n      config.alerts = [e.message.includes('filter is invalid') ? filterErrorAlert : accessDeniedAlert];\n    } else {\n      config.alerts = [unknownErrorAlert];\n    }\n  }\n  config.isLoaded = true;\n  config.isLoading = false;\n  config.isExpanded = true;\n  config.isVisible = true;\n  return config;\n};\nconst loadEventLayer = async (config, loadExtended) => {\n  const {\n    columns,\n    endDate,\n    eventStatus,\n    eventClustering,\n    eventPointColor,\n    eventPointRadius,\n    filters,\n    programStage,\n    startDate,\n    styleDataItem,\n    areaRadius\n  } = config;\n  const period = getPeriodFromFilters(filters);\n  const dataFilters = getFiltersFromColumns(columns);\n  const d2 = await getD2();\n  config.isExtended = loadExtended;\n  const analyticsRequest = await getAnalyticsRequest(config, {\n    d2,\n    nameProperty: d2.currentUser.settings.keyAnalysisDisplayProperty\n  });\n  let alert;\n  config.name = programStage.name;\n  config.legend = {\n    title: config.name,\n    period: period ? getPeriodNameFromId(period.id) : formatStartEndDate(getDateArray(startDate), getDateArray(endDate)),\n    items: []\n  };\n\n  // Delete serverCluster option if previously set\n  delete config.serverCluster;\n\n  // Check if events should be clustered on the server or the client\n  // Style by data item is only supported in the client (donuts)\n  if (eventClustering && !styleDataItem) {\n    const response = await getCount(analyticsRequest);\n    config.bounds = getBounds(response.extent);\n    //FIXME\n    //eslint-disable-next-line react-hooks/rules-of-hooks\n    config.serverCluster = useServerCluster(response.count);\n  }\n  if (!config.serverCluster) {\n    config.outputIdScheme = 'ID'; // Required for StyleByDataItem to work\n    const {\n      names,\n      data,\n      response\n    } = await loadData(analyticsRequest, config, d2);\n    const {\n      total\n    } = response.metaData.pager;\n    config.data = data;\n    if (Array.isArray(config.data) && config.data.length) {\n      if (styleDataItem) {\n        await styleByDataItem(config);\n      }\n      if (total > EVENT_CLIENT_PAGE_SIZE) {\n        alert = {\n          warning: true,\n          message: `${config.name}: ${i18n.t('Displaying first {{pageSize}} events out of {{total}}', {\n            pageSize: EVENT_CLIENT_PAGE_SIZE,\n            total\n          })}`\n        };\n      }\n    } else {\n      alert = {\n        warning: true,\n        message: `${config.name}: ${i18n.t('No data found')}`\n      };\n    }\n\n    // TODO: Add filters to legend when using server cluster\n    // Currently not done as names are not available\n    config.legend.filters = dataFilters && getFiltersAsText(dataFilters, {\n      ...names,\n      ...(await getFilterOptionNames(dataFilters, response.headers))\n    });\n    config.headers = response.headers;\n    const numericDataItemHeaders = config.headers.filter(header => isValidUid(header.name) && numberValueTypes.includes(header.valueType));\n    if (numericDataItemHeaders.length) {\n      config.data = config.data.map(d => {\n        const newD = {\n          ...d\n        };\n        numericDataItemHeaders.forEach(header => {\n          newD.properties[header.name] = parseFloat(d.properties[header.name]);\n        });\n        return newD;\n      });\n    }\n  }\n  if (!styleDataItem) {\n    const color = cssColor(eventPointColor) || EVENT_COLOR;\n    const strokeColor = getContrastColor(color);\n    config.legend.items = [{\n      name: i18n.t('Event'),\n      color,\n      strokeColor,\n      radius: eventPointRadius || EVENT_RADIUS\n    }];\n  }\n  const explanation = [];\n  if (eventStatus) {\n    explanation.push(`${i18n.t('Event status')}: ${getEventStatuses().find(s => s.id === eventStatus).name}`);\n  }\n  if (areaRadius) {\n    explanation.push(`${i18n.t('Buffer')}: ${areaRadius} ${'m'}`);\n  }\n  if (explanation.length) {\n    config.legend.explanation = explanation;\n  }\n  if (alert) {\n    config.alerts = [alert];\n  }\n};\nexport const getCount = async request => {\n  const d2 = await getD2();\n  return await d2.analytics.events.getCount(request);\n};\n\n// If the layer included filters using option sets, this function return an object\n// mapping option codes to named used to translate codes in the legend\nconst getFilterOptionNames = async (filters, headers) => {\n  const d2 = await getD2();\n  if (!filters) {\n    return null;\n  }\n\n  // Returns array of option set ids used for filtering\n  const optionSets = filters.map(filter => headers.find(header => header.name === filter.dimension)).filter(header => header.optionSet).map(header => header.optionSet);\n  if (!optionSets.length) {\n    return;\n  }\n  const mappedOptionSets = await Promise.all(optionSets.map(id => d2.models.optionSets.get(id, {\n    fields: 'options[code,displayName~rename(name)]'\n  }).then(model => model.options).then(options => options.reduce((obj, _ref) => {\n    let {\n      code,\n      name\n    } = _ref;\n    obj[code] = name;\n    return obj;\n  }, {}))));\n\n  // Returns one object with all option codes mapped to names\n  return mappedOptionSets.reduce((obj, set) => ({\n    ...obj,\n    ...set\n  }), {});\n};\nexport default eventLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport eventLoader from '../../loaders/eventLoader.js';\nconst EventLoader = _ref => {\n  let {\n    config,\n    dataTableOpen,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    eventLoader(config, dataTableOpen).then(onLoad);\n  }, [config, onLoad, dataTableOpen]);\n  return null;\n};\nEventLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  dataTableOpen: PropTypes.bool.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default EventLoader;","import { isString, isObject, sortBy } from 'lodash/fp';\nimport { EXTERNAL_LAYER } from '../constants/layers.js';\nexport const getMigratedMapConfig = (config, defaultBasemapId) => renameBoundaryLayerToOrgUnitLayer(upgradeGisAppLayers(extractBasemap(config, defaultBasemapId)));\n\n// Different ways of specifying a basemap - TODO: simplify!\nconst extractBasemap = (config, defaultBasemapId) => {\n  const externalBasemap = config.mapViews.find(view => view.layer === EXTERNAL_LAYER && JSON.parse(view.config || {}).mapLayerPosition === 'BASEMAP');\n  let basemap;\n  let mapViews = config.mapViews;\n  if (externalBasemap) {\n    basemap = JSON.parse(externalBasemap.config);\n    mapViews = config.mapViews.filter(view => view.id !== externalBasemap.id);\n  } else if (isString(config.basemap)) {\n    basemap = config.basemap === 'none' ? {\n      id: defaultBasemapId,\n      isVisible: false\n    } : {\n      id: config.basemap\n    };\n  } else if (isObject(config.basemap)) {\n    basemap = config.basemap;\n  } else {\n    basemap = {\n      id: defaultBasemapId\n    };\n  }\n  return {\n    ...config,\n    basemap: basemap,\n    mapViews: mapViews\n  };\n};\n\n// Detection if map config is from previous GIS app\n// TODO: Better to store app version as part of config object?\n\n// Layer order in the previous GIS app (bottom to top)\nconst gisAppLayerOrder = {\n  externalLayer: 1,\n  // TODO: Distinguish between basemaps and overlays\n  earthEngine: 2,\n  thematic4: 3,\n  thematic3: 4,\n  thematic2: 5,\n  thematic1: 6,\n  boundary: 7,\n  facility: 8,\n  event: 9\n};\nconst isGisAppFormat = layers => layers.some(config => config.layer.match(/thematic[1-4]/));\nconst upgradeGisAppLayers = config => {\n  const {\n    mapViews\n  } = config;\n  if (!isGisAppFormat(mapViews)) {\n    return config;\n  }\n  const updatedMapViews = sortBy(mapView => gisAppLayerOrder[mapView.layer], mapViews).map(orderedMapView => ({\n    ...orderedMapView,\n    layer: orderedMapView.layer.replace(/\\d$/, '') // Remove thematic number used in previous versions\n  }));\n\n  return {\n    ...config,\n    mapViews: updatedMapViews\n  };\n};\n\n// Change layer name from boundary to orgUnit when loading an old map\n// TODO: Change in db with an upgrade script\nconst renameBoundaryLayerToOrgUnitLayer = config => ({\n  ...config,\n  mapViews: config.mapViews.map(v => v.layer === 'boundary' ? {\n    ...v,\n    layer: 'orgUnit'\n  } : v)\n});","import { getInstance as getD2 } from 'd2';\nimport { getMigratedMapConfig } from './getMigratedMapConfig.js';\nimport { mapFields } from './helpers.js';\n// API requests\n\nconst fetchMapQuery = {\n  resource: 'maps',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: {\n    fields: mapFields()\n  }\n};\nexport const fetchMap = async (id, engine, keyDefaultBaseMap) => engine.query({\n  map: fetchMapQuery\n}, {\n  variables: {\n    id\n  }\n}).then(map => getMigratedMapConfig(map.map, keyDefaultBaseMap)).catch(() => {\n  throw new Error(`Could not load map with id \"${id}\"`);\n});\nexport const fetchExternalLayersQuery = {\n  resource: 'externalMapLayers',\n  params: {\n    fields: 'id,displayName~rename(name),service,url,attribution,mapService,layers,imageFormat,mapLayerPosition,legendSet,legendSetUrl',\n    paging: false\n  }\n};\n\n// Fetch a single externalLayer\nexport const getExternalLayer = async id => {\n  const d2 = await getD2();\n  return d2.models.externalMapLayers.get(id);\n};","import { EXTERNAL_LAYER, TILE_LAYER, WMS_LAYER, VECTOR_STYLE, GEOJSON_URL_LAYER, GEOJSON_LAYER } from '../constants/layers.js';\nimport { getExternalLayer } from './requests.js';\nconst MAP_SERVICE_WMS = 'WMS';\nconst MAP_SERVICE_TMS = 'TMS';\nconst MAP_SERVICE_XYZ = 'XYZ';\nconst MAP_SERVICE_VECTOR_STYLE = 'VECTOR_STYLE';\nconst MAP_SERVICE_GEOJSON_URL = 'GEOJSON_URL';\nconst mapServiceToTypeMap = {\n  [MAP_SERVICE_WMS]: WMS_LAYER,\n  [MAP_SERVICE_XYZ]: TILE_LAYER,\n  [MAP_SERVICE_TMS]: TILE_LAYER,\n  [MAP_SERVICE_VECTOR_STYLE]: VECTOR_STYLE,\n  [MAP_SERVICE_GEOJSON_URL]: GEOJSON_LAYER\n};\nexport const supportedMapServices = Object.keys(mapServiceToTypeMap);\nexport const createExternalBasemapLayer = layer => ({\n  layer: EXTERNAL_LAYER,\n  id: layer.id,\n  name: layer.name,\n  opacity: 1,\n  config: createExternalLayerConfig(layer)\n});\nexport const createExternalOverlayLayer = layer => ({\n  layer: layer.mapService === MAP_SERVICE_GEOJSON_URL ? GEOJSON_URL_LAYER : EXTERNAL_LAYER,\n  img: 'images/featurelayer.png',\n  name: layer.name,\n  opacity: 1,\n  config: createExternalLayerConfig(layer)\n});\n\n// Create external layer config\nconst createExternalLayerConfig = model => {\n  const {\n    id,\n    name,\n    attribution,\n    mapService,\n    url,\n    layers,\n    imageFormat,\n    legendSet,\n    legendSetUrl\n  } = model;\n  const type = mapServiceToTypeMap[mapService];\n  const format = imageFormat === 'JPG' ? 'image/jpeg' : 'image/png';\n  const tms = mapService === MAP_SERVICE_TMS;\n  return {\n    id,\n    type,\n    url,\n    attribution,\n    name,\n    layers,\n    tms,\n    format,\n    legendSet,\n    legendSetUrl\n  };\n};\n\n// Parse external layer config returned as a string in ao\nexport const parseLayerConfig = async layerConfig => {\n  let config;\n  try {\n    config = JSON.parse(layerConfig);\n  } catch (evt) {\n    return;\n  }\n\n  // We could use the config object as stored, but better to\n  // use a fresh layer config from the API\n  if (config.id) {\n    try {\n      const layer = await getExternalLayer(config.id);\n      const newConfig = createExternalLayerConfig(layer);\n      newConfig.featureStyle = {\n        ...config.featureStyle\n      };\n    } catch (evt) {\n      return config;\n    }\n  }\n  return config;\n};","import { EXTERNAL_LAYER } from '../constants/layers.js';\nimport { parseLayerConfig } from '../util/external.js';\nimport { loadLegendSet, getPredefinedLegendItems } from '../util/legend.js';\nconst externalLoader = async layer => {\n  let config;\n  if (typeof layer.config === 'string') {\n    // External layer is loaded in analytical object\n    config = await parseLayerConfig(layer.config);\n  } else {\n    config = {\n      ...layer.config\n    };\n  }\n  const legend = {\n    title: config.name\n  };\n  if (config.legendSet) {\n    const legendItems = await loadLegendSet(config.legendSet);\n    legend.items = getPredefinedLegendItems(legendItems);\n  }\n  if (config.legendSetUrl) {\n    legend.url = config.legendSetUrl;\n  }\n  return {\n    ...layer,\n    layer: EXTERNAL_LAYER,\n    name: config.name,\n    legend,\n    config,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport default externalLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport externalLoader from '../../loaders/externalLoader.js';\nconst ExternalLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    externalLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nExternalLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default ExternalLoader;","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { toGeoJson } from '../util/map.js';\nimport { fetchOrgUnitGroupSet, getPointItems, getPolygonItems, getStyledOrgUnits, getCoordinateField } from '../util/orgUnits.js';\nconst facilityLoader = async config => {\n  const {\n    rows,\n    organisationUnitGroupSet: groupSet,\n    areaRadius\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const includeGroupSets = !!groupSet;\n  const coordinateField = getCoordinateField(config);\n  const alerts = [];\n  const orgUnitParams = orgUnits.map(item => item.id);\n  let associatedGeometries;\n  const d2 = await getD2();\n  const displayProperty = getDisplayProperty(d2).toUpperCase();\n  const {\n    contextPath\n  } = d2.system.systemInfo;\n  const name = i18n.t('Facilities');\n  const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayProperty);\n  const requests = [featuresRequest.getAll({\n    includeGroupSets\n  }).then(getPointItems).then(toGeoJson).catch(error => {\n    if (error && error.message) {\n      alerts.push({\n        critical: true,\n        message: i18n.t('Error: {{message}}', {\n          message: error.message,\n          nsSeparator: ';'\n        })\n      });\n    }\n  })];\n\n  // Load organisationUnitGroups if not passed\n  if (includeGroupSets && !groupSet.organisationUnitGroups) {\n    requests.push(fetchOrgUnitGroupSet(groupSet.id));\n  }\n  const [features, organisationUnitGroups] = await Promise.all(requests);\n  if (organisationUnitGroups) {\n    groupSet.organisationUnitGroups = organisationUnitGroups;\n  }\n  const {\n    styledFeatures,\n    legend\n  } = getStyledOrgUnits(features, groupSet, config, contextPath);\n  legend.title = name;\n  if (coordinateField) {\n    associatedGeometries = await featuresRequest.getAll({\n      coordinateField: coordinateField.id,\n      includeGroupSets\n    }).then(getPolygonItems).then(toGeoJson);\n    if (!associatedGeometries.length) {\n      alerts.push({\n        warning: true,\n        message: i18n.t('{{name}}: No coordinates found', {\n          name: coordinateField.name,\n          nsSeparator: ';'\n        })\n      });\n    }\n    legend.items.push({\n      name: coordinateField.name,\n      type: 'polygon',\n      strokeColor: '#333',\n      fillColor: 'rgba(149, 200, 251, 0.5)',\n      weight: 0.5\n    });\n  }\n  if (areaRadius) {\n    legend.explanation = [`${areaRadius} ${'m'} ${'buffer'}`];\n  }\n  if (!styledFeatures.length) {\n    alerts.push({\n      warning: true,\n      message: i18n.t('Facilities: No coordinates found', {\n        nsSeparator: ';'\n      })\n    });\n  }\n  return {\n    ...config,\n    data: styledFeatures,\n    associatedGeometries,\n    name,\n    legend,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport default facilityLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport facilityLoader from '../../loaders/facilityLoader.js';\nconst EventLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    facilityLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nEventLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default EventLoader;","import i18n from '@dhis2/d2-i18n';\nimport { parseLayerConfig } from '../util/external.js';\nimport { buildGeoJsonFeatures, GEO_TYPE_LINE, GEO_TYPE_POINT, GEO_TYPE_POLYGON } from '../util/geojson.js';\nconst fetchData = async (url, engine, instanceBaseUrl) => {\n  if (url.includes(instanceBaseUrl)) {\n    // API route, use engine\n    const routesIndex = url.indexOf('routes');\n    if (routesIndex === -1) {\n      throw new Error();\n    }\n    return engine.query({\n      geojson: {\n        resource: url.slice(routesIndex)\n      }\n    }).then(async data => data.geojson instanceof Blob ? JSON.parse(await data.geojson.text()) // TODO - remove once Blob fix implemented in app-runtime (LIBS-542)\n    : data.geojson).catch(() => {\n      throw new Error();\n    });\n  } else {\n    // External route, use fetch\n    return fetch(url).then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n      return response.json();\n    }).catch(() => {\n      throw new Error();\n    });\n  }\n};\nconst EMPTY_FEATURE_STYLE = {};\nconst geoJsonUrlLoader = async (layer, engine, instanceBaseUrl) => {\n  const {\n    config\n  } = layer;\n  let newConfig;\n  let featureStyle;\n  // keep featureStyle property outside of config while in app\n  if (typeof config === 'string') {\n    // External layer is loaded in analytical object\n    newConfig = await parseLayerConfig(config);\n    featureStyle = {\n      ...newConfig.featureStyle\n    } || EMPTY_FEATURE_STYLE;\n    delete newConfig.featureStyle;\n  } else {\n    newConfig = {\n      ...config\n    };\n    featureStyle = layer.featureStyle || EMPTY_FEATURE_STYLE;\n  }\n  let geoJson;\n  let loadError;\n  try {\n    geoJson = await fetchData(newConfig.url, engine, instanceBaseUrl);\n  } catch (e) {\n    loadError = i18n.t('There was a problem with this layer. Contact a system administrator.');\n  }\n  let data = [];\n  const legend = {\n    title: newConfig.name,\n    items: []\n  };\n  if (!loadError) {\n    const {\n      featureCollection,\n      types\n    } = buildGeoJsonFeatures(geoJson);\n    data = featureCollection;\n    const oneType = types.length === 1;\n    types.forEach(type => {\n      let legendItem;\n      if (type === GEO_TYPE_POLYGON) {\n        legendItem = {\n          name: oneType ? i18n.t('Feature') : i18n.t('Polygon'),\n          type: GEO_TYPE_POLYGON,\n          ...featureStyle,\n          fillColor: featureStyle.color\n        };\n      } else if (type === GEO_TYPE_LINE) {\n        legendItem = {\n          name: oneType ? i18n.t('Feature') : i18n.t('Line'),\n          type: GEO_TYPE_LINE,\n          ...featureStyle,\n          color: featureStyle.strokeColor\n        };\n      } else {\n        legendItem = {\n          name: oneType ? i18n.t('Feature') : i18n.t('Point'),\n          type: GEO_TYPE_POINT,\n          radius: featureStyle.pointSize,\n          color: featureStyle.color,\n          strokeColor: featureStyle.strokeColor\n        };\n      }\n      legend.items.push(legendItem);\n    });\n  }\n  return {\n    ...layer,\n    name: newConfig.name,\n    // TODO - will be fixed by DHIS2-16088\n    legend,\n    data,\n    config: newConfig,\n    featureStyle,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true,\n    loadError\n  };\n};\nexport default geoJsonUrlLoader;","import { useDataEngine, useConfig } from '@dhis2/app-runtime';\nimport { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport { ALERT_CRITICAL, ALERT_MESSAGE_DYNAMIC } from '../../constants/alerts.js';\nimport geoJsonUrlLoader from '../../loaders/geoJsonUrlLoader.js';\nconst GeoJsonUrlLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  const loadFailedAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const engine = useDataEngine();\n  const {\n    systemInfo\n  } = useConfig();\n  const {\n    instanceBaseUrl\n  } = systemInfo;\n  useEffect(() => {\n    geoJsonUrlLoader(config, engine, instanceBaseUrl).then(data => {\n      if (data.loadError) {\n        loadFailedAlert.show({\n          msg: i18n.t('{{layername}}: {{message}}', {\n            layername: data.name,\n            message: data.loadError,\n            nsSeparator: '^^'\n          })\n        });\n      }\n      return onLoad(data);\n    });\n  }, [config, onLoad, engine, instanceBaseUrl, loadFailedAlert]);\n  return null;\n};\nGeoJsonUrlLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default GeoJsonUrlLoader;","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { toGeoJson } from '../util/map.js';\nimport { fetchOrgUnitGroupSet, addAssociatedGeometries, getOrgUnitLevels, getStyledOrgUnits, getCoordinateField } from '../util/orgUnits.js';\nconst orgUnitLoader = async config => {\n  const {\n    rows,\n    organisationUnitGroupSet: groupSet\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const orgUnitParams = orgUnits.map(item => item.id);\n  const includeGroupSets = !!groupSet;\n  const coordinateField = getCoordinateField(config);\n  const d2 = await getD2();\n  const displayProperty = getDisplayProperty(d2).toUpperCase();\n  const {\n    contextPath\n  } = d2.system.systemInfo;\n  const name = i18n.t('Organisation units');\n  const alerts = [];\n  const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayProperty);\n  let associatedGeometries;\n  const requests = [featuresRequest.getAll({\n    includeGroupSets\n  }).then(toGeoJson).catch(error => {\n    if (error && error.message) {\n      alerts.push({\n        critical: true,\n        message: i18n.t('Error: {{message}}', {\n          message: error.message,\n          nsSeparator: ';'\n        })\n      });\n    }\n  }), getOrgUnitLevels(d2)];\n\n  // Load organisationUnitGroups if not passed\n  if (includeGroupSets && !groupSet.organisationUnitGroups) {\n    requests.push(fetchOrgUnitGroupSet(groupSet.id));\n  }\n  const [mainFeatures = [], orgUnitLevels, organisationUnitGroups] = await Promise.all(requests);\n  if (!mainFeatures.length && !alerts.length) {\n    alerts.push({\n      warning: true,\n      message: i18n.t('Selected org units: No coordinates found', {\n        nsSeparator: ';'\n      })\n    });\n  }\n  if (organisationUnitGroups) {\n    groupSet.organisationUnitGroups = organisationUnitGroups;\n  }\n  if (coordinateField) {\n    associatedGeometries = await featuresRequest.getAll({\n      coordinateField: coordinateField.id,\n      includeGroupSets\n    }).then(toGeoJson);\n    if (!associatedGeometries.length) {\n      alerts.push({\n        warning: true,\n        message: i18n.t('{{name}}: No coordinates found', {\n          name: coordinateField.name,\n          nsSeparator: ';'\n        })\n      });\n    }\n  }\n  const features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n  const {\n    styledFeatures,\n    legend\n  } = getStyledOrgUnits(features, groupSet, config, contextPath, orgUnitLevels);\n  legend.title = name;\n  return {\n    ...config,\n    data: styledFeatures,\n    name,\n    legend,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nexport default orgUnitLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport orgUnitLoader from '../../loaders/orgUnitLoader.js';\nconst OrgUnitLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    orgUnitLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nOrgUnitLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default OrgUnitLoader;","import i18n from '@dhis2/d2-i18n';\nimport { getInstance as getD2 } from 'd2';\nimport { scaleSqrt } from 'd3-scale';\nimport { findIndex, curry } from 'lodash/fp';\nimport { dimConf } from '../constants/dimension.js';\nimport { EVENT_STATUS_COMPLETED } from '../constants/eventStatuses.js';\nimport { THEMATIC_BUBBLE, THEMATIC_RADIUS_LOW, THEMATIC_RADIUS_HIGH, RENDERING_STRATEGY_SINGLE, CLASSIFICATION_PREDEFINED, CLASSIFICATION_SINGLE_COLOR, ORG_UNIT_COLOR, ORG_UNIT_RADIUS_SMALL, NO_DATA_COLOR } from '../constants/layers.js';\nimport { getOrgUnitsFromRows, getPeriodFromFilters, getValidDimensionsFromFilters, getDataItemFromColumns, getApiResponseNames } from '../util/analytics.js';\nimport { getLegendItemForValue } from '../util/classify.js';\nimport { getDisplayProperty } from '../util/helpers.js';\nimport { loadLegendSet, getPredefinedLegendItems, getAutomaticLegendItems } from '../util/legend.js';\nimport { toGeoJson } from '../util/map.js';\nimport { getCoordinateField, addAssociatedGeometries } from '../util/orgUnits.js';\nimport { formatStartEndDate, getDateArray } from '../util/time.js';\nconst thematicLoader = async config => {\n  const {\n    columns,\n    radiusLow = THEMATIC_RADIUS_LOW,\n    radiusHigh = THEMATIC_RADIUS_HIGH,\n    classes,\n    colorScale,\n    renderingStrategy = RENDERING_STRATEGY_SINGLE,\n    thematicMapType,\n    noDataColor\n  } = config;\n  const dataItem = getDataItemFromColumns(columns);\n  const coordinateField = getCoordinateField(config);\n  let error;\n  const response = await loadData(config).catch(err => {\n    error = err;\n  });\n  if (!response) {\n    return {\n      ...config,\n      ...(error ? {\n        alerts: [{\n          critical: true,\n          message: `${i18n.t('Error')}: ${error.message || error}`\n        }]\n      } : {}),\n      name: dataItem ? dataItem.name : i18n.t('Thematic layer'),\n      data: [],\n      legend: null,\n      isLoaded: true,\n      isLoading: false,\n      isVisible: true\n    };\n  }\n  const [mainFeatures, data, associatedGeometries] = response;\n  const features = addAssociatedGeometries(mainFeatures, associatedGeometries);\n  const isSingleMap = renderingStrategy === RENDERING_STRATEGY_SINGLE;\n  const isBubbleMap = thematicMapType === THEMATIC_BUBBLE;\n  const isSingleColor = config.method === CLASSIFICATION_SINGLE_COLOR;\n  const period = getPeriodFromFilters(config.filters);\n  const periods = getPeriodsFromMetaData(data.metaData);\n  const dimensions = getValidDimensionsFromFilters(config.filters);\n  const names = getApiResponseNames(data);\n  const valuesByPeriod = !isSingleMap ? getValuesByPeriod(data) : null;\n  const valueById = getValueById(data);\n  const valueFeatures = noDataColor ? features : features.filter(_ref => {\n    let {\n      id\n    } = _ref;\n    return valueById[id] !== undefined;\n  });\n  const orderedValues = getOrderedValues(data);\n  let minValue = orderedValues[0];\n  let maxValue = orderedValues[orderedValues.length - 1];\n  const name = names[dataItem.id];\n  const alerts = [];\n  let legendSet = config.legendSet;\n\n  // Use legend set defined for data item as default\n  if (!legendSet && dataItem.legendSet && (config.method === undefined || config.method === CLASSIFICATION_PREDEFINED)) {\n    legendSet = dataItem.legendSet;\n  }\n\n  // Favorites often have wrong method\n  const method = legendSet ? CLASSIFICATION_PREDEFINED : config.method;\n  if (legendSet) {\n    legendSet = await loadLegendSet(legendSet);\n  }\n  let legendItems = [];\n  if (!isSingleColor) {\n    legendItems = legendSet ? getPredefinedLegendItems(legendSet) : getAutomaticLegendItems(orderedValues, method, classes, colorScale);\n  }\n  const legend = {\n    title: name,\n    period: period ? names[period.id] || period.id : formatStartEndDate(getDateArray(config.startDate), getDateArray(config.endDate)),\n    items: legendItems\n  };\n  if (dimensions && dimensions.length) {\n    legend.filters = dimensions.map(d => `${names[d.dimension]}: ${d.items.map(i => names[i.id]).join(', ')}`);\n  }\n  if (isSingleMap) {\n    legend.items.forEach(item => item.count = 0);\n  }\n  if (isBubbleMap) {\n    legend.bubbles = {\n      radiusLow,\n      radiusHigh,\n      color: isSingleColor ? colorScale : null\n    };\n  }\n  const getLegendItem = curry(getLegendItemForValue)(legend.items);\n  if (legendSet && Array.isArray(legend.items) && legend.items.length >= 2) {\n    minValue = legend.items[0].startValue;\n    maxValue = legend.items[legend.items.length - 1].endValue;\n  }\n  const getRadiusForValue = scaleSqrt().range([radiusLow, radiusHigh]).domain([minValue, maxValue]).clamp(true);\n  if (!valueFeatures.length) {\n    if (!features.length) {\n      alerts.push({\n        warning: true,\n        message: i18n.t('Selected org units: No coordinates found', {\n          nsSeparator: ';'\n        })\n      });\n    } else {\n      alerts.push({\n        warning: true,\n        message: `${name}: ${i18n.t('No data found')}`\n      });\n    }\n  }\n  if (coordinateField && !associatedGeometries.length) {\n    alerts.push({\n      warning: true,\n      message: i18n.t('{{name}}: No coordinates found', {\n        name: coordinateField.name,\n        nsSeparator: ';'\n      })\n    });\n  }\n  if (valuesByPeriod) {\n    const periods = Object.keys(valuesByPeriod);\n    periods.forEach(period => {\n      const orgUnits = Object.keys(valuesByPeriod[period]);\n      orgUnits.forEach(orgunit => {\n        const item = valuesByPeriod[period][orgunit];\n        const value = Number(item.value);\n        const legend = getLegendItem(value);\n        if (isSingleColor) {\n          item.color = colorScale;\n        } else {\n          item.color = legend ? legend.color : NO_DATA_COLOR;\n        }\n        item.radius = getRadiusForValue(value);\n      });\n    });\n  } else {\n    valueFeatures.forEach(_ref2 => {\n      let {\n        id,\n        geometry,\n        properties\n      } = _ref2;\n      const value = valueById[id];\n      const item = getLegendItem(value);\n      const isPoint = geometry.type === 'Point';\n      const {\n        hasAdditionalGeometry\n      } = properties;\n      if (isSingleColor) {\n        properties.color = colorScale;\n      } else if (item) {\n        // Only count org units once in legend\n        if (!hasAdditionalGeometry) {\n          item.count++;\n        }\n        properties.color = hasAdditionalGeometry && isPoint ? ORG_UNIT_COLOR : item.color;\n        properties.legend = item.name; // Shown in data table\n        properties.range = `${item.startValue} - ${item.endValue}`; // Shown in data table\n      }\n\n      properties.value = value;\n      properties.radius = hasAdditionalGeometry ? ORG_UNIT_RADIUS_SMALL : getRadiusForValue(value);\n    });\n  }\n  if (noDataColor && Array.isArray(legend.items) && !isBubbleMap) {\n    legend.items.push({\n      color: noDataColor,\n      name: i18n.t('No data')\n    });\n  }\n  return {\n    ...config,\n    data: valueFeatures,\n    periods,\n    valuesByPeriod,\n    name,\n    legend,\n    method,\n    alerts,\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nconst getPeriodsFromMetaData = _ref3 => {\n  let {\n    dimensions,\n    items\n  } = _ref3;\n  return dimensions.pe.map(id => {\n    const {\n      name,\n      startDate,\n      endDate\n    } = items[id];\n    const newEndDate = new Date(endDate);\n\n    // Set to midnight to include the last day\n    newEndDate.setHours(24);\n    return {\n      id,\n      name,\n      startDate: new Date(startDate),\n      endDate: newEndDate\n    };\n  });\n};\nconst getValuesByPeriod = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const periodIndex = findIndex(['name', 'pe'], headers);\n  const ouIndex = findIndex(['name', 'ou'], headers);\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.reduce((obj, row) => {\n    const period = row[periodIndex];\n    const periodObj = obj[period] = obj[period] || {};\n    periodObj[row[ouIndex]] = {\n      value: row[valueIndex]\n    };\n    return obj;\n  }, {});\n};\n\n// Returns an object mapping org. units and values\nconst getValueById = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const ouIndex = findIndex(['name', 'ou'], headers);\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.reduce((obj, row) => {\n    obj[row[ouIndex]] = parseFloat(row[valueIndex]);\n    return obj;\n  }, {});\n};\n\n// Returns an array of ordered values\nconst getOrderedValues = data => {\n  const {\n    headers,\n    rows\n  } = data;\n  const valueIndex = findIndex(['name', 'value'], headers);\n  return rows.map(row => parseFloat(row[valueIndex])).sort((a, b) => a - b);\n};\n\n// Load features and data values from api\nconst loadData = async config => {\n  const {\n    rows,\n    columns,\n    filters,\n    displayProperty,\n    startDate,\n    endDate,\n    userOrgUnit,\n    valueType,\n    relativePeriodDate,\n    aggregationType,\n    renderingStrategy = RENDERING_STRATEGY_SINGLE,\n    eventStatus\n  } = config;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const period = getPeriodFromFilters(filters);\n  const dimensions = getValidDimensionsFromFilters(config.filters);\n  const dataItem = getDataItemFromColumns(columns);\n  const coordinateField = getCoordinateField(config);\n  const isOperand = columns[0].dimension === dimConf.operand.objectName;\n  const isSingleMap = renderingStrategy === RENDERING_STRATEGY_SINGLE;\n  const d2 = await getD2();\n  const displayPropertyUpper = getDisplayProperty(d2, displayProperty).toUpperCase();\n  const geoFeaturesParams = {};\n  const orgUnitParams = orgUnits.map(item => item.id);\n  let dataDimension = isOperand ? dataItem.id.split('.')[0] : dataItem.id;\n  if (valueType === 'ds') {\n    dataDimension += '.REPORTING_RATE';\n  }\n  let analyticsRequest = new d2.analytics.request().addOrgUnitDimension(orgUnits.map(ou => ou.id)).addDataDimension(dataDimension).withDisplayProperty(displayPropertyUpper);\n  if (!isSingleMap) {\n    analyticsRequest = analyticsRequest.addPeriodDimension(period.id);\n  } else {\n    analyticsRequest = period ? analyticsRequest.addPeriodFilter(period.id) : analyticsRequest.withStartDate(startDate).withEndDate(endDate);\n  }\n  if (dimensions) {\n    dimensions.forEach(d => analyticsRequest = analyticsRequest.addFilter(d.dimension, d.items.map(i => i.id)));\n  }\n  if (Array.isArray(userOrgUnit) && userOrgUnit.length) {\n    geoFeaturesParams.userOrgUnit = userOrgUnit.join(';');\n    analyticsRequest = analyticsRequest.withUserOrgUnit(userOrgUnit);\n  }\n  if (relativePeriodDate) {\n    analyticsRequest = analyticsRequest.withRelativePeriodDate(relativePeriodDate);\n  }\n  if (aggregationType) {\n    analyticsRequest = analyticsRequest.withAggregationType(aggregationType);\n  }\n  if (isOperand) {\n    analyticsRequest = analyticsRequest.addDimension('co');\n  }\n  if (eventStatus === EVENT_STATUS_COMPLETED) {\n    analyticsRequest = analyticsRequest.withParameters({\n      completedOnly: true\n    });\n  }\n  const featuresRequest = d2.geoFeatures.byOrgUnit(orgUnitParams).displayProperty(displayPropertyUpper);\n\n  // Features request\n  const orgUnitReq = featuresRequest.getAll(geoFeaturesParams).then(toGeoJson);\n\n  // Data request\n  const dataReq = d2.analytics.aggregate.get(analyticsRequest);\n  const requests = [orgUnitReq, dataReq];\n  if (coordinateField) {\n    // Associated geometry request\n    requests.push(featuresRequest.getAll({\n      ...geoFeaturesParams,\n      coordinateField: coordinateField.id\n    }).then(toGeoJson));\n  }\n\n  // Return promise with all requests\n  return Promise.all(requests);\n};\nexport default thematicLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport thematicLoader from '../../loaders/thematicLoader.js';\nconst ThematicLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    thematicLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nThematicLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default ThematicLoader;","import i18n from '@dhis2/d2-i18n';\nexport const getProgramStatuses = () => [{\n  id: 'ALL',\n  name: i18n.t('All')\n}, {\n  id: 'ACTIVE',\n  name: i18n.t('Active')\n}, {\n  id: 'COMPLETED',\n  name: i18n.t('Completed')\n}, {\n  id: 'CANCELLED',\n  name: i18n.t('Cancelled')\n}];","import { apiFetch } from './api.js';\nconst TRACKED_ENTITY_INSTANCE = 'TRACKED_ENTITY_INSTANCE';\nexport const fetchTEIs = async _ref => {\n  let {\n    type,\n    orgUnits,\n    fields,\n    organisationUnitSelectionMode\n  } = _ref;\n  let url = `/trackedEntityInstances?skipPaging=true&fields=${fields}&ou=${orgUnits}`;\n  if (organisationUnitSelectionMode) {\n    url += `&ouMode=${organisationUnitSelectionMode}`;\n  }\n  url += `&trackedEntityType=${type.id}`;\n  const data = await apiFetch(url);\n  return data.trackedEntityInstances;\n};\nconst normalizeInstances = instances => {\n  return instances.filter(instance => !!instance.coordinates).reduce((out, instance) => {\n    out[instance.id] = instance;\n    return out;\n  }, {});\n};\nexport const parseTEInstanceId = instance => instance.trackedEntityInstance.trackedEntityInstance;\nconst isValidRel = (rel, type, id) => rel.relationshipType === type && parseTEInstanceId(rel.from) === id;\nconst isIndexInstance = (instance, type) => {\n  let hasChildren = false;\n  for (let i = 0; i < instance.relationships.length; ++i) {\n    const rel = instance.relationships[i];\n    if (rel.relationshipType !== type) {\n      continue;\n    }\n    if (parseTEInstanceId(rel.to) === instance.id) {\n      return false;\n    }\n    if (parseTEInstanceId(rel.from) === instance.id) {\n      hasChildren = true;\n    }\n  }\n  return hasChildren;\n};\n\n/* eslint-disable max-params */\nconst getInstanceRelationships = (relationshipsById, from, targetInstances, type, isRecursive) => {\n  const localRels = from.relationships.filter(rel => isValidRel(rel, type, from.id));\n  localRels.forEach(rel => {\n    const id = rel.relationship;\n    if (relationshipsById[id]) {\n      return;\n    }\n    const to = targetInstances[parseTEInstanceId(rel.to)];\n    if (!to) {\n      // console.error('NOT FOUND', rel.to);\n      return;\n    }\n    relationshipsById[id] = {\n      id,\n      from,\n      to\n    };\n    if (isRecursive) {\n      getInstanceRelationships(relationshipsById, to, targetInstances, type, true);\n    }\n  });\n};\n/* eslint-enable max-params */\n\nconst fields = ['trackedEntityInstance~rename(id)', 'featureType', 'coordinates', 'relationships'];\nexport const getDataWithRelationships = async (sourceInstances, relationshipType, _ref2) => {\n  let {\n    orgUnits,\n    organisationUnitSelectionMode\n  } = _ref2;\n  const from = relationshipType.fromConstraint;\n  const to = relationshipType.toConstraint;\n  if (from.relationshipEntity !== TRACKED_ENTITY_INSTANCE || to.relationshipEntity !== TRACKED_ENTITY_INSTANCE) {\n    return [];\n  }\n  const isRecursive = from.trackedEntityType.id === to.trackedEntityType.id;\n  const targetInstances = normalizeInstances(isRecursive ? sourceInstances : await fetchTEIs({\n    type: to.trackedEntityType,\n    fields,\n    orgUnits,\n    organisationUnitSelectionMode\n  }));\n  const filteredSourceInstances = isRecursive ? sourceInstances.filter(instance => isIndexInstance(instance, relationshipType.id)) : sourceInstances;\n  const relationshipsById = {};\n  filteredSourceInstances.forEach(instance => getInstanceRelationships(relationshipsById, instance, targetInstances, relationshipType.id, isRecursive));\n  filteredSourceInstances.forEach(instance => {\n    delete targetInstances[instance.id];\n  });\n  return {\n    primary: filteredSourceInstances,\n    relationships: Object.values(relationshipsById),\n    secondary: Object.values(targetInstances)\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport { TEI_COLOR, TEI_RADIUS, TEI_RELATED_COLOR, TEI_RELATED_RADIUS, TEI_RELATIONSHIP_LINE_COLOR } from '../constants/layers.js';\nimport { getProgramStatuses } from '../constants/programStatuses.js';\nimport { getOrgUnitsFromRows } from '../util/analytics.js';\nimport { apiFetch } from '../util/api.js';\nimport { getDataWithRelationships } from '../util/teiRelationshipsParser.js';\nimport { formatStartEndDate, getDateArray } from '../util/time.js';\nconst fields = ['trackedEntityInstance~rename(id)', 'featureType', 'coordinates'];\n\n// Mapping netween DHIS2 types and GeoJSON types\nconst geometryTypesMap = {\n  POINT: 'Point',\n  POLYGON: 'Polygon',\n  MULTI_POLYGON: 'MultiPolygon'\n};\n\n// Valid geometry types for TEIs\nconst geometryTypes = Object.keys(geometryTypesMap);\n\n//TODO: Refactor to share code with other loaders\nconst trackedEntityLoader = async config => {\n  if (config.config && typeof config.config === 'string') {\n    try {\n      const customConfig = JSON.parse(config.config);\n      config.relationshipType = customConfig.relationships.type;\n      config.relatedPointColor = customConfig.relationships.pointColor;\n      config.relatedPointRadius = customConfig.relationships.pointRadius;\n      config.relationshipLineColor = customConfig.relationships.lineColor;\n      config.relationshipOutsideProgram = customConfig.relationships.relationshipOutsideProgram;\n      config.periodType = customConfig.periodType;\n    } catch (e) {\n      // Failed to load JSON relationship config, assuming no relationships\n    }\n    delete config.config;\n  }\n  const {\n    trackedEntityType,\n    program,\n    programStatus,\n    followUp,\n    relationshipType: relationshipTypeID,\n    periodType,\n    startDate,\n    endDate,\n    rows,\n    organisationUnitSelectionMode,\n    eventPointColor,\n    eventPointRadius,\n    areaRadius,\n    relatedPointColor,\n    relatedPointRadius,\n    relationshipLineColor\n  } = config;\n  const name = program ? program.name : i18n.t('Tracked entity');\n  const legend = {\n    title: name,\n    period: formatStartEndDate(getDateArray(startDate), getDateArray(endDate)),\n    items: [{\n      name: trackedEntityType.name + (areaRadius ? ` + ${areaRadius} ${'m'} ${'buffer'}` : ''),\n      color: eventPointColor || TEI_COLOR,\n      radius: eventPointRadius || TEI_RADIUS\n    }]\n  };\n  const orgUnits = getOrgUnitsFromRows(rows).map(ou => ou.id).join(';');\n  const fieldsWithRelationships = [...fields, 'relationships'];\n  // https://docs.dhis2.org/2.29/en/developer/html/webapi_tracked_entity_instance_query.html\n  let url = `/trackedEntityInstances?skipPaging=true&fields=${fieldsWithRelationships}&ou=${orgUnits}`;\n  let alert;\n  let explanation;\n  if (organisationUnitSelectionMode) {\n    url += `&ouMode=${organisationUnitSelectionMode}`;\n  }\n  if (program) {\n    url += `&program=${program.id}`;\n    if (programStatus) {\n      url += `&programStatus=${programStatus}`;\n      explanation = `${i18n.t('Program status')}: ${getProgramStatuses().find(s => s.id === programStatus).name}`;\n    }\n    if (followUp !== undefined) {\n      url += `&followUp=${followUp ? 'TRUE' : 'FALSE'}`;\n    }\n  } else {\n    url += `&trackedEntityType=${trackedEntityType.id}`;\n  }\n  if (periodType === 'program') {\n    url += `&programStartDate=${startDate}&programEndDate=${endDate}`;\n  } else {\n    url += `&lastUpdatedStartDate=${startDate}&lastUpdatedEndDate=${endDate}`;\n  }\n\n  // https://docs.dhis2.org/master/en/developer/html/webapi_tracker_api.html#webapi_tei_grid_query_request_syntax\n  const primaryData = await apiFetch(url);\n  const instances = primaryData.trackedEntityInstances.filter(instance => geometryTypes.includes(instance.featureType) && instance.coordinates);\n  if (!instances.length) {\n    alert = {\n      warning: true,\n      message: `${trackedEntityType.name}: ${i18n.t('No tracked entities found')}`\n    };\n  }\n  let data, relationships, secondaryData;\n  if (relationshipTypeID) {\n    const relationshipType = await apiFetch(`/relationshipTypes/${relationshipTypeID}`);\n    const relatedTypeId = relationshipType.toConstraint.trackedEntityType.id;\n    const relatedEntityType = await apiFetch(`/trackedEntityTypes/${relatedTypeId}?fields=displayName,featureType`);\n    const isPoint = relatedEntityType.featureType === 'POINT';\n    legend.items.push({\n      type: 'LineString',\n      name: relationshipType.displayName,\n      color: relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR,\n      weight: 1\n    }, {\n      name: `${relatedEntityType.displayName} (${i18n.t('related')})`,\n      color: relatedPointColor || TEI_RELATED_COLOR,\n      radius: isPoint ? relatedPointRadius || TEI_RELATED_RADIUS : undefined,\n      weight: !isPoint ? 1 : undefined\n    });\n    const dataWithRels = await getDataWithRelationships(instances, relationshipType, {\n      orgUnits,\n      organisationUnitSelectionMode\n    });\n    data = toGeoJson(dataWithRels.primary);\n    relationships = dataWithRels.relationships;\n    secondaryData = toGeoJson(dataWithRels.secondary);\n  } else {\n    data = toGeoJson(instances);\n  }\n  if (explanation) {\n    legend.explanation = [explanation];\n  }\n  return {\n    ...config,\n    name,\n    data,\n    relationships,\n    secondaryData,\n    legend,\n    ...(alert ? {\n      alerts: [alert]\n    } : {}),\n    isLoaded: true,\n    isLoading: false,\n    isExpanded: true,\n    isVisible: true\n  };\n};\nconst toGeoJson = instances => instances.map(_ref => {\n  let {\n    id,\n    featureType,\n    coordinates\n  } = _ref;\n  return {\n    type: 'Feature',\n    geometry: {\n      type: geometryTypesMap[featureType],\n      coordinates: JSON.parse(coordinates)\n    },\n    properties: {\n      id\n    }\n  };\n});\nexport default trackedEntityLoader;","import PropTypes from 'prop-types';\nimport { useEffect } from 'react';\nimport trackedEntityLoader from '../../loaders/trackedEntityLoader.js';\nconst TrackedEntityLoader = _ref => {\n  let {\n    config,\n    onLoad\n  } = _ref;\n  useEffect(() => {\n    trackedEntityLoader(config).then(onLoad);\n  }, [config, onLoad]);\n  return null;\n};\nTrackedEntityLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired\n};\nexport default TrackedEntityLoader;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport EarthEngineLoader from './EarthEngineLoader.js';\nimport EventLoader from './EventLoader.js';\nimport ExternalLoader from './ExternalLoader.js';\nimport FacilityLoader from './FacilityLoader.js';\nimport GeoJsonUrlLoader from './GeoJsonUrlLoader.js';\nimport OrgUnitLoader from './OrgUnitLoader.js';\nimport ThematicLoader from './ThematicLoader.js';\nimport TrackedEntityLoader from './TrackedEntityLoader.js';\nconst layerType = {\n  earthEngine: EarthEngineLoader,\n  event: EventLoader,\n  external: ExternalLoader,\n  facility: FacilityLoader,\n  orgUnit: OrgUnitLoader,\n  thematic: ThematicLoader,\n  trackedEntity: TrackedEntityLoader,\n  geoJsonUrl: GeoJsonUrlLoader\n};\nconst LayerLoader = _ref => {\n  let {\n    config,\n    dataTableOpen,\n    onLoad\n  } = _ref;\n  const Loader = layerType[config.layer];\n  if (!Loader) {\n    console.log('Unknown layer type', config.layer, config);\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Loader, {\n    config: config,\n    onLoad: onLoad,\n    dataTableOpen: dataTableOpen\n  });\n};\nLayerLoader.defaultProps = {\n  dataTableOpen: false,\n  onError: Function.prototype\n};\nLayerLoader.propTypes = {\n  config: PropTypes.object.isRequired,\n  onLoad: PropTypes.func.isRequired,\n  dataTableOpen: PropTypes.bool\n};\nexport default LayerLoader;","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLayerLoading, updateLayer } from '../../actions/layers.js';\nimport { EVENT_LAYER } from '../../constants/layers.js';\nimport LayerLoader from './LayerLoader.js';\nconst LayersLoader = () => {\n  const dataTable = useSelector(state => state.dataTable);\n  const layersToLoad = useSelector(_ref => {\n    let {\n      map\n    } = _ref;\n    return map.mapViews.filter(_ref2 => {\n      let {\n        id,\n        isLoading,\n        isLoaded,\n        isExtended,\n        layer: layerType,\n        serverCluster\n      } = _ref2;\n      // The layer is currently being loaded - don't load again\n      if (isLoading) {\n        return false;\n      } else {\n        // The layer is not loaded - load it\n        if (!isLoaded) {\n          return true;\n        }\n\n        // The layer is loaded but the data table is now displayed and\n        // event extended data hasn't been loaded yet - so load it\n        if (layerType === EVENT_LAYER && id === dataTable && !isExtended && !serverCluster) {\n          return true;\n        }\n        return false;\n      }\n    });\n  });\n  const dispatch = useDispatch();\n  const onLoad = layer => dispatch(updateLayer(layer));\n  useEffect(() => {\n    layersToLoad.forEach(layer => dispatch(setLayerLoading(layer.id)));\n  }, [layersToLoad, dispatch]);\n  if (!layersToLoad.length) {\n    return null;\n  }\n  return layersToLoad.map(config => /*#__PURE__*/React.createElement(LayerLoader, {\n    key: config.id,\n    config: config,\n    onLoad: onLoad,\n    dataTableOpen: !!dataTable\n  }));\n};\nexport default LayersLoader;","// extracted by mini-css-extract-plugin\nexport default {\"legend\":\"DownloadLegend_legend__YHJfq\",\"title\":\"DownloadLegend_title__MUxpC\",\"period\":\"DownloadLegend_period__DhS7R\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport Legend from '../legend/Legend.js';\nimport styles from './styles/DownloadLegend.module.css';\nconst DownloadLegend = _ref => {\n  let {\n    layers\n  } = _ref;\n  return layers.filter(layer => layer.legend).map(layer => layer.legend).reverse().map((legend, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: styles.legend\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.title,\n    \"data-test\": \"download-legend-title\"\n  }, legend.title, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.period\n  }, legend.period)), /*#__PURE__*/React.createElement(Legend, legend)));\n};\nDownloadLegend.propTypes = {\n  layers: PropTypes.array.isRequired\n};\nexport default DownloadLegend;","import { useAlert } from '@dhis2/app-service-alerts';\nimport i18n from '@dhis2/d2-i18n';\nimport log from 'loglevel';\nimport PropTypes from 'prop-types';\nimport { useMemo, useEffect } from 'react';\nimport { ALERT_CRITICAL, ALERT_MESSAGE_DYNAMIC } from '../../../constants/alerts.js';\nexport const BASEMAP_LAYER_INDEX = 0;\nconst getAlertError = message => {\n  return {\n    msg: i18n.t('Basemap could not be added: {{message}}', {\n      message,\n      nsSeparator: ';'\n    })\n  };\n};\nconst BasemapLayer = (_ref, _ref2) => {\n  let {\n    id,\n    config,\n    opacity,\n    isVisible\n  } = _ref;\n  let {\n    map,\n    isPlugin\n  } = _ref2;\n  const basemapNotFoundAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const basemapInvalidAlert = useAlert(ALERT_MESSAGE_DYNAMIC, ALERT_CRITICAL);\n  const basemap = useMemo(() => map.createLayer({\n    ...config,\n    id,\n    index: BASEMAP_LAYER_INDEX\n  }), [map, id, config]);\n  useEffect(() => {\n    map.addLayer(basemap).catch(errorMessage => {\n      log.error(`Basemap could not be added: ${errorMessage}`);\n      if (!isPlugin) {\n        const alertError = getAlertError(errorMessage);\n        if (errorMessage.includes('not found')) {\n          basemapNotFoundAlert.show(alertError);\n        } else {\n          basemapInvalidAlert.show(alertError);\n        }\n      }\n    });\n    return () => map.removeLayer(basemap);\n  }, [map, basemap, isPlugin]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    basemap.setOpacity(opacity);\n  }, [basemap, opacity]);\n  useEffect(() => {\n    basemap.setVisibility(isVisible);\n  }, [basemap, isVisible]);\n  return null;\n};\nBasemapLayer.contextTypes = {\n  map: PropTypes.object\n};\nBasemapLayer.propTypes = {\n  config: PropTypes.object,\n  id: PropTypes.string,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number\n};\nBasemapLayer.defaultProps = {\n  opacity: 1,\n  isVisible: true\n};\nexport default BasemapLayer;","import Point from '@mapbox/point-geometry';\nimport PropTypes from 'prop-types';\nimport { useState, useCallback, useEffect } from 'react';\nimport { GEOJSON_LAYER } from '../../constants/layers.js';\nimport { getCoordinatesBounds } from '../../util/geojson.js';\nconst layerId = 'overview-outline';\n\n// Returns a feature with the main map outline (with bearing and pitch)\nconst getMapOutline = map => {\n  const {\n    transform\n  } = map;\n  const {\n    width,\n    height\n  } = transform;\n  const upperLeft = transform.pointLocation(new Point(0, 0)).toArray();\n  const lowerLeft = transform.pointLocation(new Point(0, height)).toArray();\n  const lowerRight = transform.pointLocation(new Point(width, height)).toArray();\n  const upperRight = transform.pointLocation(new Point(width, 0)).toArray();\n  return {\n    type: 'Feature',\n    geometry: {\n      type: 'Polygon',\n      coordinates: [[upperLeft, lowerLeft, lowerRight, upperRight, upperLeft]]\n    },\n    properties: {}\n  };\n};\nconst OverviewMapOutline = _ref => {\n  let {\n    mainMap,\n    overviewMap,\n    isDark = false\n  } = _ref;\n  const [outline, setOutline] = useState(getMapOutline(mainMap));\n  const [sourceId, setSourceId] = useState();\n  const onMainMapMove = useCallback(() => {\n    setOutline(getMapOutline(mainMap));\n  }, [mainMap]);\n  useEffect(() => {\n    mainMap.on('move', onMainMapMove);\n    return () => {\n      mainMap.off('move', onMainMapMove);\n    };\n  }, [mainMap, onMainMapMove]);\n  useEffect(() => {\n    if (outline) {\n      const config = {\n        type: GEOJSON_LAYER,\n        id: layerId,\n        index: 1,\n        data: [outline],\n        style: {\n          color: 'transparent',\n          strokeColor: isDark ? 'orange' : '#333',\n          weight: 3\n        }\n      };\n      if (!sourceId) {\n        const layer = overviewMap.createLayer(config);\n        overviewMap.addLayer(layer);\n        setSourceId(layer.getId());\n      } else {\n        const source = overviewMap.getMapGL().getSource(sourceId);\n        if (source) {\n          source.setData(outline);\n        }\n      }\n\n      // Make sure outline bounds is inside overview map bounds\n      const mapBounds = overviewMap.getMapGL().getBounds();\n      const outlineBounds = getCoordinatesBounds(outline.geometry.coordinates[0]);\n\n      // If outline bounds is outside overview map bounds\n      if (!mapBounds.contains(outlineBounds[0]) || !mapBounds.contains(outlineBounds[1])) {\n        // Fit overview map to outline bounds\n        overviewMap.getMapGL().fitBounds(outlineBounds, {\n          padding: 80\n        });\n      }\n    }\n  }, [overviewMap, outline, sourceId, isDark]);\n  return null;\n};\nOverviewMapOutline.propTypes = {\n  mainMap: PropTypes.object.isRequired,\n  overviewMap: PropTypes.object.isRequired,\n  isDark: PropTypes.bool\n};\nexport default OverviewMapOutline;","// extracted by mini-css-extract-plugin\nexport default {\"overviewMap\":\"OverviewMap_overviewMap__ohPlZ\"};","import { useConfig } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setDownloadConfig } from '../../actions/download.js';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport { BASEMAP_LAYER_INDEX } from '../map/layers/BasemapLayer.js';\nimport mapApi from '../map/MapApi.js';\nimport OverviewMapOutline from './OverviewMapOutline.js';\nimport styles from './styles/OverviewMap.module.css';\nconst maxHeight = 260;\nconst minHeight = 80;\nconst OverviewMap = _ref => {\n  let {\n    mainMap,\n    isSplitView,\n    resizeCount\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [overviewMap, setOverviewMap] = useState();\n  const basemap = useSelector(state => state.map.basemap);\n  const {\n    config,\n    isDark\n  } = useBasemapConfig(basemap);\n  const mapContainer = useRef();\n  const dispatch = useDispatch();\n  const onOverviewMapReady = useCallback(evt => setOverviewMap(evt.target), []);\n  const onMainMapMove = useCallback(() => {\n    if (overviewMap) {\n      const mapGl = overviewMap.getMapGL();\n      mapGl.resize();\n      mapGl.setCenter(mainMap.getCenter());\n      mapGl.setZoom(mainMap.getZoom() - (isSplitView ? 2 : 4));\n    }\n  }, [mainMap, overviewMap, isSplitView]);\n  useEffect(() => {\n    mainMap.on('move', onMainMapMove);\n    if (overviewMap) {\n      // Don't sync overview map after it is dragged by the user\n      overviewMap.getMapGL().once('drag', () => mainMap.off('move', onMainMapMove));\n    }\n    return () => {\n      mainMap.off('move', onMainMapMove);\n    };\n  }, [mainMap, overviewMap, onMainMapMove]);\n  useEffect(() => {\n    const map = mapApi({\n      attributionControl: false,\n      dragRotate: false,\n      touchZoomRotate: false,\n      pitchWithRotate: false,\n      minZoom: 0,\n      baseUrl\n    });\n    map.once('ready', onOverviewMapReady);\n    return () => {\n      map.off('ready', onOverviewMapReady);\n    };\n  }, [onOverviewMapReady, baseUrl]);\n  useEffect(() => {\n    if (overviewMap) {\n      mapContainer.current.appendChild(overviewMap.getContainer());\n    }\n  }, [overviewMap]);\n  useEffect(() => {\n    if (overviewMap && config) {\n      const basemapLayer = overviewMap.createLayer({\n        ...config,\n        index: BASEMAP_LAYER_INDEX\n      });\n      overviewMap.addLayer(basemapLayer);\n    }\n  }, [overviewMap, config]);\n  useEffect(() => {\n    if (overviewMap) {\n      onMainMapMove();\n    }\n  }, [overviewMap, onMainMapMove]);\n  useEffect(() => {\n    if (overviewMap) {\n      const mapEl = mapContainer.current;\n      mapEl.style.display = 'block';\n      mapEl.style.height = `${maxHeight}px`;\n      let mapHeight = mapEl.clientHeight;\n      if (mapHeight > maxHeight) {\n        mapHeight = maxHeight;\n      }\n      const hasSpace = mapHeight > minHeight;\n      if (hasSpace) {\n        mapEl.style.height = `${mapHeight}px`;\n        overviewMap.resize();\n      } else {\n        mapEl.style.display = 'none';\n      }\n\n      // Disable overview map checkbox if no space\n      dispatch(setDownloadConfig({\n        hasOverviewMapSpace: hasSpace\n      }));\n    }\n  }, [overviewMap, mapContainer, resizeCount, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: mapContainer,\n    className: styles.overviewMap,\n    \"data-test\": \"overview-map\"\n  }, overviewMap && /*#__PURE__*/React.createElement(OverviewMapOutline, {\n    mainMap: mainMap,\n    overviewMap: overviewMap,\n    isDark: isDark\n  }));\n};\nOverviewMap.propTypes = {\n  mainMap: PropTypes.object.isRequired,\n  isSplitView: PropTypes.bool,\n  resizeCount: PropTypes.number\n};\nexport default OverviewMap;","// extracted by mini-css-extract-plugin\nexport default {\"downloadMapInfo\":\"DownloadMapInfo_downloadMapInfo__R8XHq\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useWindowDimensions } from '../WindowDimensionsProvider.js';\nimport DownloadLegend from './DownloadLegend.js';\nimport OverviewMap from './OverviewMap.js';\nimport styles from './styles/DownloadMapInfo.module.css';\nconst DownloadMapInfo = _ref => {\n  let {\n    map,\n    isSplitView\n  } = _ref;\n  const [resizeCount, setResizeCount] = useState(0);\n  const {\n    height\n  } = useWindowDimensions();\n  const {\n    showName,\n    showDescription,\n    showLegend,\n    showInLegend,\n    showOverviewMap\n  } = useSelector(state => state.download);\n  const {\n    mapViews,\n    name,\n    description\n  } = useSelector(state => state.map);\n  useEffect(() => {\n    setResizeCount(count => count + 1);\n  }, [showName, showDescription, showInLegend, height]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.downloadMapInfo),\n    \"data-test\": \"download-map-info\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, showName && name && /*#__PURE__*/React.createElement(\"h1\", null, name), showDescription && description && /*#__PURE__*/React.createElement(\"p\", null, description), showLegend && /*#__PURE__*/React.createElement(DownloadLegend, {\n    layers: mapViews.filter(l => showInLegend.includes(l.id))\n  })), showOverviewMap && /*#__PURE__*/React.createElement(OverviewMap, {\n    mainMap: map,\n    isSplitView: isSplitView,\n    resizeCount: resizeCount\n  }));\n};\nDownloadMapInfo.propTypes = {\n  map: PropTypes.object.isRequired,\n  isSplitView: PropTypes.bool\n};\nexport default DownloadMapInfo;","// extracted by mini-css-extract-plugin\nexport default {\"northArrow\":\"NorthArrow_northArrow__PGidx\",\"topleft\":\"NorthArrow_topleft__uCzk6\",\"topright\":\"NorthArrow_topright__e3xeW\",\"bottomleft\":\"NorthArrow_bottomleft__1Abwx\",\"bottomright\":\"NorthArrow_bottomright__0mcJB\",\"downloadMapInfoOpen\":\"NorthArrow_downloadMapInfoOpen__4mYyN\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport styles from './styles/NorthArrow.module.css';\nconst NorthArrow = _ref => {\n  let {\n    map,\n    downloadMapInfoOpen,\n    width = 90,\n    height = 90,\n    northLetter = 'N'\n  } = _ref;\n  const [rotation, setRotation] = useState(map.getBearing());\n  const position = useSelector(state => state.download.northArrowPosition);\n  const basemap = useSelector(state => state.map.basemap);\n  const {\n    isDark\n  } = useBasemapConfig(basemap);\n  const color = isDark ? 'white' : 'black';\n  const onMapRotate = useCallback(evt => {\n    setRotation(-evt.target.getBearing());\n  }, []);\n  useEffect(() => {\n    map.on('rotate', onMapRotate);\n    return () => {\n      map.on('rotate', onMapRotate);\n    };\n  }, [map, onMapRotate]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.northArrow, styles[position], {\n      [styles.downloadMapInfoOpen]: downloadMapInfoOpen\n    }),\n    \"data-test\": \"north-arrow\"\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    cx: \"24\",\n    cy: \"24\",\n    r: \"8\",\n    stroke: color,\n    strokeWidth: \"2\"\n  }), /*#__PURE__*/React.createElement(\"text\", {\n    x: \"50%\",\n    y: \"50%\",\n    dominantBaseline: \"central\",\n    textAnchor: \"middle\",\n    fill: color\n  }, northLetter), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M24.4472 0.776393C24.3625 0.607001 24.1893 0.5 23.9999 0.5C23.8106 0.5 23.6374 0.607001 23.5527 0.776393L16.2178 15.4463C16.1098 15.6623 16.5106 15.9397 16.691 15.7792C18.6342 14.0503 21.1944 13 24 13C26.8055 13 29.3657 14.0503 31.3089 15.7792C31.4893 15.9396 31.8901 15.6623 31.7821 15.4463L24.4472 0.776393Z\",\n    fill: color,\n    transform: `rotate(${rotation}, 24, 24)`\n  })));\n};\nNorthArrow.propTypes = {\n  downloadMapInfoOpen: PropTypes.bool.isRequired,\n  map: PropTypes.object.isRequired,\n  height: PropTypes.number,\n  northLetter: PropTypes.string,\n  width: PropTypes.number\n};\nexport default NorthArrow;","// extracted by mini-css-extract-plugin\nexport default {\"mapName\":\"MapName_mapName__xDOCz\",\"name\":\"MapName_name__PyQgF map_box__WtUb7\"};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport styles from './styles/MapName.module.css';\nconst MapName = () => {\n  const name = useSelector(state => state.map.name);\n  const downloadMode = useSelector(state => state.ui.downloadMode);\n  return !downloadMode && name ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mapName\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${styles.name} dhis2-maps-title`\n  }, name)) : null;\n};\nexport default MapName;","export const mapControls = [{\n  type: 'zoom'\n}, {\n  type: 'fullscreen'\n}, {\n  type: 'fitBounds'\n}, {\n  type: 'scale',\n  imperial: false\n}, {\n  type: 'search'\n}, {\n  type: 'measure'\n}];\nexport const splitViewControls = [{\n  type: 'zoom'\n}, {\n  type: 'fullscreen'\n}, {\n  type: 'fitBounds'\n}, {\n  type: 'attribution',\n  prefix: false\n}];\nexport const pluginControls = [{\n  type: 'zoom'\n}];","import { mapControls, splitViewControls, pluginControls } from '../constants/mapControls.js';\n\n// Returns the map controls shown on a map\nexport const getMapControls = (isPlugin, isSplitView, controls) => {\n  let ctrls;\n  if (isPlugin) {\n    ctrls = controls || pluginControls;\n  } else {\n    ctrls = controls || isSplitView ? splitViewControls : mapControls;\n  }\n  return isSplitView ? ctrls.map(c => ({\n    ...c,\n    isSplitView\n  })) : ctrls;\n};","// extracted by mini-css-extract-plugin\nexport default {\"alert\":\"Alert_alert__-zGVv\"};","import { AlertBar } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Alert.module.css';\nconst Alert = _ref => {\n  let {\n    message,\n    critical,\n    warning,\n    onHidden\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.alert\n  }, /*#__PURE__*/React.createElement(AlertBar, {\n    critical: critical,\n    warning: warning,\n    duration: 10000,\n    onHidden: onHidden\n  }, message));\n};\nAlert.propTypes = {\n  message: PropTypes.string.isRequired,\n  onHidden: PropTypes.func.isRequired,\n  critical: PropTypes.string.boolean,\n  warning: PropTypes.string.boolean\n};\nexport default Alert;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport log from 'loglevel';\nimport PropTypes from 'prop-types';\nimport { PureComponent } from 'react';\nimport { RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../../../constants/layers.js';\nclass Layer extends PureComponent {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {});\n    // Called when a map popup is closed\n    _defineProperty(this, \"onPopupClose\", () => {\n      this.setState({\n        popup: null\n      });\n    });\n    this.setPeriod();\n    this.createLayer();\n  }\n  componentDidUpdate(prevProps) {\n    let prevState = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      id,\n      data,\n      index,\n      opacity,\n      isVisible,\n      editCounter,\n      dataFilters,\n      feature\n    } = this.props;\n    const {\n      period\n    } = this.state;\n    const {\n      period: prevPeriod\n    } = prevState || {};\n    const isEdited = editCounter !== prevProps.editCounter;\n\n    // Create new map if new id of editCounter is increased\n    if (id !== prevProps.id || data !== prevProps.data || (period === null || period === void 0 ? void 0 : period.id) !== (prevPeriod === null || prevPeriod === void 0 ? void 0 : prevPeriod.id) || dataFilters !== prevProps.dataFilters || isEdited) {\n      // Reset period if edited\n      if (isEdited) {\n        this.setPeriod(this.updateLayer.bind(this));\n      } else {\n        this.updateLayer(dataFilters !== prevProps.dataFilters);\n      }\n    }\n    if (index !== undefined && index !== prevProps.index) {\n      this.setLayerOrder();\n    }\n    if (opacity !== prevProps.opacity) {\n      this.setLayerOpacity();\n    }\n    if (isVisible !== prevProps.isVisible) {\n      this.setLayerVisibility();\n    }\n    if (feature !== prevProps.feature) {\n      this.highlightFeature(feature);\n    }\n  }\n  componentWillUnmount() {\n    this.removeLayer();\n  }\n\n  // Create new layer from config object (override in subclasses)\n  async createLayer() {\n    const {\n      id,\n      index = 0,\n      config,\n      opacity,\n      isVisible\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    this.layer = map.createLayer({\n      ...config,\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n    await map.addLayer(this.layer);\n  }\n  async updateLayer() {\n    await this.removeLayer();\n    await this.createLayer(true);\n    this.setLayerOrder();\n    this.setLayerVisibility();\n  }\n\n  // Override in subclass if needed\n  setPeriod(callback) {\n    if (callback) {\n      callback();\n    }\n  }\n  setLayerVisibility() {\n    this.layer.setVisibility(this.props.isVisible);\n  }\n  setLayerOpacity() {\n    this.layer.setOpacity(this.props.opacity);\n  }\n  setLayerOrder() {\n    if (this.layer) {\n      this.layer.setIndex(this.props.index);\n    }\n  }\n\n  // Fit map to layer bounds\n  fitBounds() {\n    const {\n      map\n    } = this.context;\n    if (this.layer.getBounds) {\n      map.fitBounds(this.layer.getBounds(), {\n        padding: 40,\n        duration: 0,\n        bearing: map.getMapGL().getBearing()\n      });\n    }\n  }\n\n  // Fit map to layer bounds once (when first created)\n  fitBoundsOnce() {\n    if (!this.isZoomed || this.context.map.getZoom() === undefined) {\n      this.fitBounds();\n      this.isZoomed = true;\n    }\n  }\n  async removeLayer() {\n    if (this.layer) {\n      const {\n        map\n      } = this.context;\n      this.layer.off('contextmenu', this.onFeatureRightClick, this);\n      await map.removeLayer(this.layer);\n      delete this.layer;\n    }\n  }\n  highlightFeature(feature) {\n    if (this.layer.highlight) {\n      this.layer.highlight(feature ? feature.id : null);\n    }\n  }\n  render() {\n    return null;\n  }\n  onFeatureRightClick(evt) {\n    const [x, y] = evt.position;\n    const layerConfig = {\n      ...this.props\n    };\n    const {\n      id: layerId,\n      layer: layerType,\n      renderingStrategy\n    } = layerConfig;\n    const {\n      map\n    } = this.context;\n    const container = map.getContainer();\n    const {\n      left,\n      top\n    } = container.getBoundingClientRect();\n    const isSplitView = renderingStrategy === RENDERING_STRATEGY_SPLIT_BY_PERIOD;\n    this.props.openContextMenu({\n      ...evt,\n      position: [x, y],\n      offset: [left, top],\n      layerConfig,\n      layerId,\n      layerType,\n      isSplitView,\n      map,\n      container: isSplitView ? container.parentNode.parentNode : container\n    });\n    this.setState({\n      popup: null\n    });\n  }\n  onError(error) {\n    const message = error.message || error;\n    if (!this.context.isPlugin) {\n      this.setState({\n        error: message\n      });\n    } else {\n      log.error(message);\n    }\n  }\n  onErrorHidden() {\n    this.setState({\n      error: null\n    });\n  }\n}\n_defineProperty(Layer, \"contextTypes\", {\n  map: PropTypes.object,\n  isPlugin: PropTypes.bool\n});\n_defineProperty(Layer, \"propTypes\", {\n  id: PropTypes.string.isRequired,\n  config: PropTypes.object,\n  data: PropTypes.array,\n  dataFilters: PropTypes.object,\n  editCounter: PropTypes.number,\n  feature: PropTypes.object,\n  index: PropTypes.number,\n  isVisible: PropTypes.bool,\n  opacity: PropTypes.number,\n  openContextMenu: PropTypes.func\n});\n_defineProperty(Layer, \"defaultProps\", {\n  opacity: 1,\n  isVisible: true\n});\nexport default Layer;","import i18n from '@dhis2/d2-i18n';\n\n// Thematic layer\nexport const getThematicAggregationTypes = () => [{\n  id: 'DEFAULT',\n  name: i18n.t('By data element')\n}, {\n  id: 'COUNT',\n  name: i18n.t('Count')\n}, {\n  id: 'AVERAGE',\n  name: i18n.t('Average')\n}, {\n  id: 'SUM',\n  name: i18n.t('Sum')\n}, {\n  id: 'STDDEV',\n  name: i18n.t('Standard deviation')\n}, {\n  id: 'VARIANCE',\n  name: i18n.t('Variance')\n}, {\n  id: 'MIN',\n  name: i18n.t('Min')\n}, {\n  id: 'MAX',\n  name: i18n.t('Max')\n}];\n\n// Earth Engine layer\nexport const getEarthEngineStatisticTypes = () => [{\n  id: 'percentage',\n  name: i18n.t('Percentage')\n}, {\n  id: 'hectares',\n  name: i18n.t('Hectares')\n}, {\n  id: 'acres',\n  name: i18n.t('Acres')\n}];\n\n// Earth Engine layer\nexport const getEarthEngineAggregationTypes = filter => {\n  const types = [{\n    id: 'count',\n    name: i18n.t('Count')\n  }, {\n    id: 'min',\n    name: i18n.t('Min')\n  }, {\n    id: 'max',\n    name: i18n.t('Max')\n  }, {\n    id: 'mean',\n    name: i18n.t('Mean')\n  }, {\n    id: 'median',\n    name: i18n.t('Median')\n  }, {\n    id: 'sum',\n    name: i18n.t('Sum')\n  }, {\n    id: 'stdDev',\n    name: i18n.t('Standard deviation'),\n    shortName: i18n.t('Std dev')\n  }, {\n    id: 'variance',\n    name: i18n.t('Variance')\n  }];\n  return filter ? types.filter(_ref => {\n    let {\n      id\n    } = _ref;\n    return filter.includes(id);\n  }) : types;\n};\nexport const getEarthEngineStatisticType = id => (getEarthEngineStatisticTypes().find(t => t.id === id) || {}).name;\nexport const getEarthEngineAggregationType = id => {\n  const {\n    name,\n    shortName\n  } = getEarthEngineAggregationTypes().find(t => t.id === id) || {};\n  return shortName || name;\n};","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitButton\":\"OrgUnitButton_orgUnitButton__cpD5v\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport styles from './styles/OrgUnitButton.module.css';\n\n/*\n *  Displays a button to open the org unit profile\n */\nconst OrgUnitButton = _ref => {\n  let {\n    id,\n    orgUnitProfile,\n    setOrgUnitProfile\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitButton\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    disabled: id === orgUnitProfile,\n    onClick: () => setOrgUnitProfile(id)\n  }, i18n.t('View profile')));\n};\nOrgUnitButton.propTypes = {\n  id: PropTypes.string.isRequired,\n  setOrgUnitProfile: PropTypes.func.isRequired,\n  orgUnitProfile: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    orgUnitProfile\n  } = _ref2;\n  return {\n    orgUnitProfile\n  };\n}, {\n  setOrgUnitProfile\n})(OrgUnitButton);","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport OrgUnitButton from '../orgunits/OrgUnitButton.js';\nimport './styles/Popup.css';\nconst Popup = (props, context) => {\n  const {\n    className = '',\n    coordinates,\n    orgUnitId,\n    onClose,\n    children\n  } = props;\n  const {\n    map,\n    isPlugin\n  } = context;\n  const container = useMemo(() => document.createElement('div'), []);\n\n  // Create and open popup on map\n  useEffect(() => {\n    container.className = className;\n    map.openPopup(container, coordinates, onClose);\n  }, [map, container, className, coordinates, onClose]);\n\n  // Close popup if component is unmounted\n  useEffect(() => {\n    return () => map.closePopup();\n  }, [map]);\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, children, isPlugin === false && orgUnitId && /*#__PURE__*/React.createElement(OrgUnitButton, {\n    id: orgUnitId\n  })), container);\n};\nPopup.contextTypes = {\n  map: PropTypes.object,\n  isPlugin: PropTypes.bool\n};\nPopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string\n};\nexport default Popup;","// extracted by mini-css-extract-plugin\nexport default {\"popup\":\"EarthEnginePopup_popup__i8opR\",\"title\":\"EarthEnginePopup_title__mlHAY\",\"table\":\"EarthEnginePopup_table__xRHIs\",\"group\":\"EarthEnginePopup_group__13iuJ\",\"unit\":\"EarthEnginePopup_unit__c7mBN\",\"classes\":\"EarthEnginePopup_classes__CMWBe\",\"loading\":\"EarthEnginePopup_loading__YqycZ\"};","import i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getEarthEngineAggregationType } from '../../../../constants/aggregationTypes.js';\nimport { hasClasses } from '../../../../util/earthEngine.js';\nimport { getRoundToPrecisionFn, getPrecision } from '../../../../util/numbers.js';\nimport Popup from '../../Popup.js';\nimport styles from './styles/EarthEnginePopup.module.css';\nconst EarthEnginePopup = props => {\n  const {\n    coordinates,\n    feature,\n    data,\n    legend,\n    valueType,\n    onClose\n  } = props;\n  const {\n    id,\n    name\n  } = feature.properties;\n  const {\n    title,\n    period = '',\n    unit,\n    items = [],\n    groups\n  } = legend;\n  const values = typeof data === 'object' ? data[id] : null;\n  const classes = hasClasses(valueType);\n  const isPercentage = valueType === 'percentage';\n  const isLoading = data === 'loading';\n  let table = null;\n  if (values) {\n    if (classes) {\n      const valueFormat = getRoundToPrecisionFn(isPercentage ? 2 : 0);\n      table = /*#__PURE__*/React.createElement(\"table\", {\n        className: styles.table\n      }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", {\n        colSpan: \"2\"\n      }, title, \" \", period), /*#__PURE__*/React.createElement(\"th\", null, valueType))), /*#__PURE__*/React.createElement(\"tbody\", null, items.filter(i => values[i.id]).sort((a, b) => values[b.id] - values[a.id]).map(_ref => {\n        let {\n          id,\n          name,\n          color\n        } = _ref;\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: id,\n          className: styles.classes\n        }, /*#__PURE__*/React.createElement(\"th\", {\n          style: {\n            backgroundColor: color\n          }\n        }), /*#__PURE__*/React.createElement(\"th\", null, name), /*#__PURE__*/React.createElement(\"td\", null, valueFormat(values[id]), isPercentage ? '%' : ''));\n      })));\n    } else {\n      const onlySum = valueType.length === 1 && valueType[0] === 'sum';\n\n      // Returns the value key for a type/group\n      const getValueKey = (type, group) => groups.length === 1 ? type : valueType.length === 1 ? group : `${group}_${type}`;\n\n      // Returns the value format (precision) for an aggregation type\n      const getValueFormat = type => getRoundToPrecisionFn(getPrecision(Object.values(data).map(ou => Object.keys(ou).filter(key => key.includes(type)).map(key => ou[key])).flat()));\n\n      // Create value format function for each aggregation type\n      const typeValueFormat = valueType.reduce((types, type) => {\n        types[type] = getValueFormat(type);\n        return types;\n      }, {});\n      const header = /*#__PURE__*/React.createElement(\"caption\", null, title, \" \", period, !onlySum && /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.unit\n      }, unit));\n      if (groups) {\n        table = /*#__PURE__*/React.createElement(\"table\", {\n          className: styles.table\n        }, header, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, \"Group\"), valueType.map(type => /*#__PURE__*/React.createElement(\"th\", {\n          key: type\n        }, getEarthEngineAggregationType(type))))), /*#__PURE__*/React.createElement(\"tbody\", null, groups.map(_ref2 => {\n          let {\n            id,\n            name\n          } = _ref2;\n          return /*#__PURE__*/React.createElement(\"tr\", {\n            key: id\n          }, /*#__PURE__*/React.createElement(\"th\", null, name), valueType.map(type => /*#__PURE__*/React.createElement(\"td\", {\n            key: type\n          }, typeValueFormat[type](values[getValueKey(type, id)]))));\n        })), groups.length > 1 && /*#__PURE__*/React.createElement(\"tfoot\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('All groups')), valueType.map(type => /*#__PURE__*/React.createElement(\"td\", {\n          key: type\n        }, typeValueFormat[type](values[type]))))));\n      } else {\n        table = /*#__PURE__*/React.createElement(\"table\", {\n          className: styles.table\n        }, header, /*#__PURE__*/React.createElement(\"tbody\", null, valueType.map(type => /*#__PURE__*/React.createElement(\"tr\", {\n          key: type\n        }, /*#__PURE__*/React.createElement(\"th\", null, getEarthEngineAggregationType(type), \":\"), /*#__PURE__*/React.createElement(\"td\", null, typeValueFormat[type](values[type]))))));\n      }\n    }\n  }\n  return /*#__PURE__*/React.createElement(Popup, {\n    coordinates: coordinates,\n    orgUnitId: id,\n    onClose: onClose,\n    className: \"dhis2-map-popup-orgunit\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.popup\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.title\n  }, name), table, isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), i18n.t('Loading data'))));\n};\nEarthEnginePopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  feature: PropTypes.object.isRequired,\n  legend: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  data: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  valueType: PropTypes.oneOfType([PropTypes.string, PropTypes.array])\n};\nexport default EarthEnginePopup;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { EARTH_ENGINE_LAYER } from '../../../../constants/layers.js';\nimport { getAuthToken } from '../../../../util/earthEngine.js';\nimport { filterData } from '../../../../util/filter.js';\nimport MapLoadingMask from '../../MapLoadingMask.js';\nimport Alert from '../Alert.js';\nimport Layer from '../Layer.js';\nimport EarthEnginePopup from './EarthEnginePopup.js';\nexport default class EarthEngineLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      isLoading: true,\n      popup: null,\n      aggregations: null,\n      error: null\n    });\n    _defineProperty(this, \"updateLayer\", async filterChange => {\n      if (filterChange) {\n        this.applyFilter();\n      } else {\n        this.clearAggregations();\n        await this.removeLayer();\n        await this.createLayer(true);\n        this.setLayerOrder();\n      }\n    });\n  }\n  componentDidUpdate(prev) {\n    super.componentDidUpdate(prev);\n    const {\n      coordinate\n    } = this.props;\n    if (coordinate && coordinate !== prev.coordinate) {\n      try {\n        this.layer.showValue({\n          lng: coordinate[0],\n          lat: coordinate[1]\n        });\n      } catch (error) {\n        this.setState({\n          error: i18n.t('Google Earth Engine failed. Is the service configured for this DHIS2 instance?')\n        });\n      }\n    }\n  }\n  async createLayer(isUpdate) {\n    const {\n      id,\n      index,\n      format,\n      opacity,\n      isVisible,\n      datasetId,\n      band,\n      mask,\n      attribution,\n      filter,\n      methods,\n      mosaic,\n      name,\n      unit,\n      legend,\n      value,\n      resolution,\n      projection,\n      params,\n      popup,\n      data,\n      aggregationType,\n      areaRadius,\n      tileScale\n    } = this.props;\n    const {\n      map,\n      isPlugin\n    } = this.context;\n    const config = {\n      type: EARTH_ENGINE_LAYER,\n      id,\n      index,\n      format,\n      opacity,\n      isVisible,\n      datasetId,\n      band,\n      mask,\n      attribution,\n      filter,\n      methods,\n      mosaic,\n      name,\n      unit,\n      value,\n      noValue: i18n.t('no value'),\n      legend: legend.items,\n      resolution,\n      projection,\n      data,\n      aggregationType,\n      tileScale,\n      preload: !isPlugin && this.hasAggregations(),\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this),\n      onLoad: this.onLoad.bind(this)\n    };\n    if (params) {\n      config.params = params;\n    }\n    if (areaRadius) {\n      config.buffer = areaRadius;\n    }\n    if (popup) {\n      config.popup = popup;\n    }\n    if (isUpdate) {\n      this.setState({\n        isLoading: true\n      });\n    }\n    config.getAuthToken = getAuthToken;\n    try {\n      this.layer = map.createLayer(config);\n      await map.addLayer(this.layer);\n    } catch (error) {\n      this.onError(error);\n    }\n    this.fitBoundsOnce();\n  }\n  hasAggregations() {\n    const {\n      data,\n      aggregationType\n    } = this.props;\n    return data && (typeof aggregationType === 'string' || Array.isArray(aggregationType) && aggregationType.length);\n  }\n  getAggregations() {\n    if (this.hasAggregations() && !this.state.aggregations) {\n      this.setState({\n        aggregations: 'loading'\n      });\n      this.layer.getAggregations().then(this.addAggregationValues.bind(this)).catch(this.onError.bind(this));\n    }\n  }\n  addAggregationValues(aggregations) {\n    const {\n      id,\n      data,\n      setAggregations\n    } = this.props;\n\n    // Make aggregations available for data table and download\n    // setAggregations is not available in map plugin\n    if (setAggregations) {\n      setAggregations({\n        [id]: aggregations\n      });\n    }\n\n    // Make aggregations available for filtering and popup\n    this.setState({\n      data: data.map(f => ({\n        ...f,\n        properties: {\n          ...f.properties,\n          ...aggregations[f.id]\n        }\n      })),\n      aggregations\n    });\n  }\n  clearAggregations() {\n    if (this.hasAggregations()) {\n      const {\n        id,\n        setAggregations\n      } = this.props;\n      this.setState({\n        aggregations: undefined\n      });\n      if (setAggregations) {\n        setAggregations({\n          [id]: undefined\n        });\n      }\n    }\n  }\n  applyFilter() {\n    const {\n      data,\n      dataFilters\n    } = this.props;\n    const filteredData = filterData(this.state.data || data, dataFilters).map(f => f.id);\n    if (this.layer && this.layer.filter) {\n      this.layer.filter(filteredData);\n    }\n  }\n  render() {\n    const {\n      legend,\n      aggregationType\n    } = this.props;\n    const {\n      isLoading,\n      popup,\n      aggregations,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, isLoading && /*#__PURE__*/React.createElement(MapLoadingMask, null), error && /*#__PURE__*/React.createElement(Alert, {\n      critical: true,\n      message: error,\n      onHidden: () => this.setState({\n        error: null\n      })\n    }), popup && /*#__PURE__*/React.createElement(EarthEnginePopup, _extends({\n      data: aggregations || {},\n      legend: legend,\n      valueType: aggregationType,\n      onClose: this.onPopupClose\n    }, popup)));\n  }\n  onFeatureClick(evt) {\n    this.getAggregations();\n    this.setState({\n      popup: evt\n    });\n  }\n  onLoad() {\n    this.setState({\n      isLoading: false,\n      popup: null\n    });\n    if (!this.context.isPlugin) {\n      this.getAggregations();\n    }\n  }\n  onError(error) {\n    let message = error.message || error;\n    if (message.includes('memory limit exceeded') && this.props.error) {\n      message = this.props.error;\n    }\n    this.setState({\n      error: message,\n      isLoading: false,\n      aggregations: 'error'\n    });\n  }\n}","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { EVENT_ID_FIELD } from '../../../util/geojson.js';\nimport { formatTime, formatCoordinate } from '../../../util/helpers.js';\nimport Popup from '../Popup.js';\n\n// Returns true if value is not undefined or null;\nconst hasValue = value => value !== undefined || value !== null;\nconst EVENTS_QUERY = {\n  events: {\n    resource: 'events',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    }\n  }\n};\nconst getDataRows = _ref2 => {\n  let {\n    displayElements,\n    dataValues,\n    styleDataItem,\n    value\n  } = _ref2;\n  const dataRows = [];\n\n  // Include data element used for styling if not included below\n  if (styleDataItem && !displayElements.find(d => d.id === styleDataItem.id)) {\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: styleDataItem.id\n    }, /*#__PURE__*/React.createElement(\"th\", null, styleDataItem.name), /*#__PURE__*/React.createElement(\"td\", null, hasValue(value) ? value : i18n.t('Not set'))));\n  }\n\n  // Include rows for each displayInReport data elements\n  displayElements.forEach(_ref3 => {\n    let {\n      id,\n      name,\n      valueType,\n      options\n    } = _ref3;\n    const {\n      value\n    } = dataValues.find(d => d.dataElement === id) || {};\n    let formattedValue = value;\n    if (valueType === 'COORDINATE' && value) {\n      formattedValue = formatCoordinate(value);\n    } else if (options) {\n      formattedValue = options[value];\n    } else if (!hasValue(value)) {\n      formattedValue = i18n.t('Not set');\n    }\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: id\n    }, /*#__PURE__*/React.createElement(\"th\", null, name), /*#__PURE__*/React.createElement(\"td\", null, formattedValue)));\n  });\n  if (dataRows.length) {\n    dataRows.push( /*#__PURE__*/React.createElement(\"tr\", {\n      key: \"divider\",\n      style: {\n        height: 5\n      }\n    }));\n  }\n  return dataRows;\n};\n\n// Will display a popup for an event feature\nconst EventPopup = _ref4 => {\n  let {\n    coordinates,\n    feature,\n    styleDataItem,\n    displayElements,\n    eventCoordinateFieldName,\n    onClose\n  } = _ref4;\n  const {\n    error,\n    data,\n    refetch\n  } = useDataQuery(EVENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    refetch({\n      id: feature.properties.id || feature.properties[EVENT_ID_FIELD]\n    });\n  }, [feature, refetch]);\n  const {\n    type,\n    coordinates: coord\n  } = feature.geometry;\n  const {\n    value\n  } = feature.properties;\n  const {\n    dataValues = [],\n    eventDate,\n    orgUnitName\n  } = (data === null || data === void 0 ? void 0 : data.events) || {};\n  return /*#__PURE__*/React.createElement(Popup, {\n    coordinates: coordinates,\n    onClose: onClose,\n    className: \"dhis2-map-popup-event\"\n  }, error && /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Could not retrieve event data')), !error && /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, (data === null || data === void 0 ? void 0 : data.events) && getDataRows({\n    displayElements,\n    dataValues,\n    styleDataItem,\n    value\n  }), type === 'Point' && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, eventCoordinateFieldName || i18n.t('Event location')), /*#__PURE__*/React.createElement(\"td\", null, coord[0].toFixed(6), \" \", coord[1].toFixed(6))), orgUnitName && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Organisation unit')), /*#__PURE__*/React.createElement(\"td\", null, orgUnitName)), eventDate && /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Event time')), /*#__PURE__*/React.createElement(\"td\", null, formatTime(eventDate))))));\n};\nEventPopup.propTypes = {\n  coordinates: PropTypes.array.isRequired,\n  displayElements: PropTypes.array.isRequired,\n  feature: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  eventCoordinateFieldName: PropTypes.string,\n  styleDataItem: PropTypes.object\n};\nexport default EventPopup;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { getInstance as getD2 } from 'd2';\nimport React from 'react';\nimport { EVENT_COLOR, EVENT_RADIUS } from '../../../constants/layers.js';\nimport { getContrastColor } from '../../../util/colors.js';\nimport { getAnalyticsRequest } from '../../../util/event.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getDisplayPropertyUrl } from '../../../util/helpers.js';\nimport { formatCount } from '../../../util/numbers.js';\nimport EventPopup from './EventPopup.js';\nimport Layer from './Layer.js';\nclass EventLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"clusterCount\", 0);\n    _defineProperty(this, \"state\", {\n      popup: null,\n      dataElements: null,\n      eventCoordinateFieldName: null\n    });\n    _defineProperty(this, \"onPopupClose\", () => {\n      this.setState({\n        popup: null\n      });\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      bounds,\n      data,\n      eventClustering,\n      eventPointColor,\n      eventPointRadius,\n      program,\n      programStage,\n      serverCluster,\n      areaRadius,\n      styleDataItem,\n      legend,\n      dataFilters\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n\n    // Some older favorites don't have a valid color code\n    const color = eventPointColor && eventPointColor.charAt(0) !== '#' ? '#' + eventPointColor : eventPointColor;\n    const fillColor = color || EVENT_COLOR;\n    const strokeColor = !styleDataItem ? getContrastColor(fillColor) : undefined;\n    const countColor = strokeColor;\n    const radius = eventPointRadius || EVENT_RADIUS;\n    const map = this.context.map;\n    let d2;\n    let eventRequest;\n\n    // Data elements to display in event popup\n    this.displayElements = {};\n\n    // Default props = no cluster\n    const config = {\n      type: 'events',\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      fillColor,\n      strokeColor,\n      countColor,\n      radius,\n      onClick: this.onEventClick.bind(this)\n    };\n    if (eventClustering) {\n      if (serverCluster) {\n        config.type = 'serverCluster';\n        config.bounds = bounds;\n        config.load = async (params, callback) => {\n          d2 = d2 || (await getD2());\n          eventRequest = eventRequest || (await getAnalyticsRequest(this.props, {\n            d2,\n            nameProperty: d2.currentUser.settings.keyAnalysisDisplayProperty\n          }));\n          eventRequest = eventRequest.withBbox(params.bbox).withClusterSize(params.clusterSize).withIncludeClusterPoints(params.includeClusterPoints);\n          const clusterData = await d2.analytics.events.getCluster(eventRequest);\n          callback(params.tileId, this.toGeoJson(clusterData));\n        };\n      } else {\n        config.clusterPane = id;\n        if (styleDataItem && legend) {\n          config.type = 'donutCluster';\n          config.groups = legend.items;\n        } else {\n          config.type = 'clientCluster';\n        }\n      }\n    } else if (areaRadius) {\n      config.buffer = areaRadius;\n      config.bufferStyle = {\n        color: color || EVENT_COLOR,\n        weight: 1,\n        opacity: 0.2,\n        fillOpacity: 0.1\n      };\n    }\n    if (program && programStage) {\n      this.loadDisplayElements();\n    }\n\n    // Create and add event layer based on config object\n    this.layer = map.createLayer(config);\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  render() {\n    const {\n      styleDataItem\n    } = this.props;\n    const {\n      popup,\n      displayElements,\n      eventCoordinateFieldName\n    } = this.state;\n    return popup && displayElements ? /*#__PURE__*/React.createElement(EventPopup, _extends({}, popup, {\n      styleDataItem: styleDataItem,\n      displayElements: displayElements,\n      eventCoordinateFieldName: eventCoordinateFieldName,\n      onClose: this.onPopupClose\n    })) : null;\n  }\n  onEventClick(_ref) {\n    let {\n      feature,\n      coordinates\n    } = _ref;\n    this.setState({\n      popup: {\n        feature,\n        coordinates\n      }\n    });\n  }\n  // Convert server cluster response to GeoJSON\n  toGeoJson(data) {\n    const header = {};\n    const features = [];\n\n    // Convert headers to object for easier lookup\n    data.headers.forEach((h, i) => header[h.name] = i);\n    if (Array.isArray(data.rows)) {\n      data.rows.forEach(row => {\n        const extent = row[header.extent].match(/([-\\d.]+)/g);\n        const count = parseInt(row[header.count], 10);\n        const clusterId = ++this.clusterCount;\n        features.push({\n          type: 'Feature',\n          id: clusterId,\n          geometry: JSON.parse(row[header.center]),\n          properties: {\n            cluster: count > 1,\n            cluster_id: clusterId,\n            point_count: count,\n            point_count_abbreviated: formatCount(count),\n            bounds: [[extent[0], extent[1]], [extent[2], extent[3]]],\n            id: row[header.points]\n          }\n        });\n      });\n    }\n    return features;\n  }\n\n  // Loads the data elements for a program stage to display in popup\n  async loadDisplayElements() {\n    const {\n      programStage,\n      eventCoordinateField\n    } = this.props;\n    const d2 = await getD2();\n    const data = await d2.models.programStage.get(programStage.id, {\n      fields: `programStageDataElements[displayInReports,dataElement[id,${getDisplayPropertyUrl(d2)},optionSet,valueType]]`,\n      paging: false\n    });\n    const {\n      programStageDataElements\n    } = data;\n    let displayElements = [];\n    let eventCoordinateFieldName;\n    if (Array.isArray(programStageDataElements)) {\n      displayElements = programStageDataElements.filter(d => d.displayInReports).map(d => d.dataElement);\n      for (const d of displayElements) {\n        await this.loadOptionSet(d);\n      }\n      if (eventCoordinateField) {\n        const coordElement = programStageDataElements.find(d => d.dataElement.id === eventCoordinateField);\n        if (coordElement) {\n          eventCoordinateFieldName = coordElement.dataElement.name;\n        }\n      }\n    }\n    this.setState({\n      displayElements,\n      eventCoordinateFieldName\n    });\n  }\n\n  // Loads an option set for an data element to get option names\n  async loadOptionSet(dataElement) {\n    const {\n      optionSet\n    } = dataElement;\n    if (!optionSet || !optionSet.id) {\n      return dataElement;\n    }\n    const d2 = await getD2();\n    if (optionSet && optionSet.id) {\n      const fullOptionSet = await d2.models.optionSets.get(optionSet.id, {\n        fields: 'id,displayName~rename(name),options[code,displayName~rename(name)]',\n        paging: false\n      });\n      if (fullOptionSet && fullOptionSet.options) {\n        dataElement.options = fullOptionSet.options.reduce((byId, option) => {\n          byId[option.code] = option.name;\n          return byId;\n        }, {});\n      }\n    }\n  }\n}\nexport default EventLayer;","import { LABEL_FONT_SIZE, LABEL_FONT_STYLE, LABEL_FONT_WEIGHT, LABEL_FONT_COLOR } from '../constants/layers.js';\nimport { cssColor } from './colors.js';\nexport const getLabelStyle = _ref => {\n  let {\n    labelFontSize,\n    labelFontStyle,\n    labelFontWeight,\n    labelFontColor\n  } = _ref;\n  const fontSize = labelFontSize || LABEL_FONT_SIZE;\n  return {\n    fontSize,\n    fontStyle: labelFontStyle || LABEL_FONT_STYLE,\n    fontWeight: labelFontWeight || LABEL_FONT_WEIGHT,\n    lineHeight: parseInt(fontSize, 10) * 1.2 + 'px',\n    color: cssColor(labelFontColor) || LABEL_FONT_COLOR,\n    paddingTop: '10px'\n  };\n};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { isPlainObject } from 'lodash/fp';\nimport React from 'react';\nimport { ORG_UNIT_COLOR, GEOJSON_LAYER, GROUP_LAYER, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { getContrastColor } from '../../../util/colors.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Popup from '../Popup.js';\nimport Alert from './Alert.js';\nimport Layer from './Layer.js';\nclass FacilityLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      labels,\n      areaRadius,\n      orgUnitFieldDisplayName,\n      associatedGeometries,\n      organisationUnitColor: color = ORG_UNIT_COLOR,\n      organisationUnitGroupSet\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n    const map = this.context.map;\n    const strokeColor = organisationUnitGroupSet ? color : getContrastColor(color);\n    const group = map.createLayer({\n      type: GROUP_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n\n    // Create layer config object\n    const config = {\n      type: GEOJSON_LAYER,\n      data: filteredData,\n      hoverLabel: '{name}',\n      style: {\n        color,\n        strokeColor\n      },\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this),\n      onError: this.onError.bind(this)\n    };\n\n    // Labels and label style\n    if (labels) {\n      config.label = LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = {\n        ...getLabelStyle(this.props),\n        paddingTop: '10px'\n      };\n    }\n    if (areaRadius) {\n      config.buffer = areaRadius;\n    }\n    if (associatedGeometries) {\n      group.addLayer({\n        type: GEOJSON_LAYER,\n        data: associatedGeometries,\n        hoverLabel: `{name}: ${orgUnitFieldDisplayName}`,\n        style: {\n          color: 'rgb(149, 200, 251)',\n          opacityFactor: 0.5\n        },\n        onClick: this.onAssociatedGeometryClick.bind(this),\n        onRightClick: this.onFeatureRightClick.bind(this)\n      });\n    }\n\n    // Create and add facility layer based on config object\n    group.addLayer(config);\n    this.layer = group;\n    map.addLayer(this.layer).catch(this.onError.bind(this));\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      feature\n    } = this.state.popup;\n    const {\n      id,\n      name,\n      dimensions,\n      pn\n    } = feature.properties;\n    const {\n      orgUnitFieldDisplayName\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: \"dhis2-map-popup-orgunit\"\n    }, /*#__PURE__*/React.createElement(\"em\", null, name), this.state.isAssociatedGeometry && /*#__PURE__*/React.createElement(\"div\", null, orgUnitFieldDisplayName), isPlainObject(dimensions) && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Groups'), \":\", Object.keys(dimensions).map(id => dimensions[id]).join(', ')), pn && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Parent unit'), \": \", pn));\n  }\n  render() {\n    const {\n      popup,\n      error\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, popup && this.getPopup(), error && /*#__PURE__*/React.createElement(Alert, {\n      warning: true,\n      message: error,\n      onHidden: this.onErrorHidden.bind(this)\n    }));\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n  onAssociatedGeometryClick(evt) {\n    this.setState({\n      popup: evt,\n      isAssociatedGeometry: true\n    });\n  }\n}\nexport default FacilityLayer;","import { GEOJSON_LAYER } from '../../../constants/layers.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getGeojsonDisplayData } from '../../../util/geojson.js';\nimport Layer from './Layer.js';\nclass GeoJsonLayer extends Layer {\n  createLayer() {\n    var _config$featureStyle;\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      featureStyle,\n      config,\n      error\n    } = this.props;\n    const {\n      map,\n      isPlugin\n    } = this.context;\n    if (error) {\n      return;\n    }\n    const filteredData = filterData(data, dataFilters);\n    const style = Object.keys(featureStyle).length > 0 ? {\n      ...featureStyle,\n      radius: featureStyle.pointSize\n    } : {\n      ...config.featureStyle,\n      radius: (_config$featureStyle = config.featureStyle) === null || _config$featureStyle === void 0 ? void 0 : _config$featureStyle.pointSize\n    };\n    this.layer = map.createLayer({\n      type: GEOJSON_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      style,\n      onClick: isPlugin ? Function.prototype : this.onFeatureClick.bind(this)\n    });\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  onFeatureClick(evt) {\n    const feature = this.props.data.find(d => d.properties.id === evt.feature.properties.id);\n    const data = getGeojsonDisplayData(feature).reduce((acc, _ref) => {\n      let {\n        dataKey,\n        value\n      } = _ref;\n      acc[dataKey] = value;\n      return acc;\n    }, {});\n    this.props.setFeatureProfile({\n      name: this.props.name,\n      data\n    });\n  }\n}\nexport default GeoJsonLayer;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { ORG_UNIT_COLOR, GEOJSON_LAYER, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\nexport default class OrgUnitLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      labels,\n      radiusLow,\n      dataFilters,\n      organisationUnitColor = ORG_UNIT_COLOR\n    } = this.props;\n    const filteredData = filterData(data, dataFilters);\n    const map = this.context.map;\n    const config = {\n      type: GEOJSON_LAYER,\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      hoverLabel: '{name}',\n      style: {\n        color: 'transparent',\n        strokeColor: organisationUnitColor\n      },\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this)\n    };\n    if (labels) {\n      config.label = LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = getLabelStyle(this.props);\n    }\n    if (radiusLow) {\n      config.style.radius = radiusLow;\n    }\n    this.layer = map.createLayer(config);\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      feature\n    } = this.state.popup;\n    const {\n      id,\n      name,\n      level,\n      parentName\n    } = feature.properties;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: \"dhis2-map-popup-orgunit\"\n    }, /*#__PURE__*/React.createElement(\"em\", null, name), level && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Level'), \": \", level), parentName && /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Parent unit'), \": \", parentName));\n  }\n  render() {\n    return this.state.popup ? this.getPopup() : null;\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n}","import { bisector, tickStep } from 'd3-array';\nimport { timeMillisecond as millisecond, timeSecond as second, timeMinute as minute, timeHour as hour, timeDay as day, timeMonday as week, timeMonth as month, timeYear as year } from 'd3-time';\n\n// Based on https://github.com/d3/d3-time/blob/main/src/ticks.js\n// Week start on Monday, not Sunday as default in d3.js\n\nconst durationSecond = 1000;\nconst durationMinute = durationSecond * 60;\nconst durationHour = durationMinute * 60;\nconst durationDay = durationHour * 24;\nconst durationWeek = durationDay * 7;\nconst durationMonth = durationDay * 30;\nconst durationYear = durationDay * 365;\n\n//eslint-disable-next-line max-params\nfunction ticker(year, month, week, day, hour, minute) {\n  const tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) {\n      ;\n      [start, stop] = [stop, start];\n    }\n    const interval = count && typeof count.range === 'function' ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(_ref => {\n      let [,, step] = _ref;\n      return step;\n    }).right(tickIntervals, target);\n    if (i === tickIntervals.length) {\n      return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    }\n    if (i === 0) {\n      return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    }\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n  return ticks;\n}\nexport default ticker(year, month, week, day, hour, minute);","// extracted by mini-css-extract-plugin\nexport default {\"timeline\":\"Timeline_timeline__ES-XF map_box__WtUb7\",\"play\":\"Timeline_play__otgMb\",\"period\":\"Timeline_period__1ITu1\",\"selected\":\"Timeline_selected__q0WMO\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport cx from 'classnames';\nimport { axisBottom } from 'd3-axis';\nimport { scaleTime } from 'd3-scale';\nimport { select } from 'd3-selection';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport timeTicks from '../../util/timeTicks.js';\nimport styles from './styles/Timeline.module.css';\nconst paddingLeft = 40;\nconst paddingRight = 20;\nconst labelWidth = 80;\nconst delay = 1500;\nconst playBtn = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8 5v14l11-7z\"\n});\nconst pauseBtn = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"\n});\nconst doubleTicksPeriods = ['LAST_6_BIMONTHS', 'BIMONTHS_THIS_YEAR'];\nclass Timeline extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      width: null,\n      mode: 'start'\n    });\n    // Returns array of period rectangles\n    _defineProperty(this, \"getPeriodRects\", () => {\n      const {\n        period,\n        periods\n      } = this.props;\n      return periods.map(item => {\n        const isCurrent = period.id === item.id;\n        const {\n          id,\n          startDate,\n          endDate\n        } = item;\n        const x = this.timeScale(startDate);\n        const width = this.timeScale(endDate) - x;\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: id,\n          className: cx(styles.period, {\n            [styles.selected]: isCurrent\n          }),\n          x: x,\n          y: \"0\",\n          width: width,\n          height: \"16\",\n          onClick: () => this.onPeriodClick(item)\n        });\n      });\n    });\n    // Set time scale\n    _defineProperty(this, \"setTimeScale\", () => {\n      const {\n        periods\n      } = this.props;\n      const {\n        width\n      } = this.state;\n      if (!periods.length) {\n        return;\n      }\n      const {\n        startDate\n      } = periods[0];\n      const {\n        endDate\n      } = periods[periods.length - 1];\n\n      // Link time domain to timeline width\n      this.timeScale = scaleTime().domain([startDate, endDate]).range([0, width]);\n    });\n    // Set timeline axis\n    _defineProperty(this, \"setTimeAxis\", () => {\n      const {\n        periodId,\n        periods\n      } = this.props;\n      const numPeriods = periods.length * (doubleTicksPeriods.includes(periodId) ? 2 : 1);\n      const {\n        width\n      } = this.state;\n      const maxTicks = Math.round(width / labelWidth);\n      const numTicks = maxTicks < numPeriods ? maxTicks : numPeriods;\n      const timeAxis = axisBottom(this.timeScale);\n      const [startDate, endDate] = this.timeScale.domain();\n      const ticks = timeTicks(startDate, endDate, numTicks);\n      timeAxis.tickValues(ticks);\n      select(this.node).call(timeAxis);\n    });\n    // Set timeline width from DOM el\n    _defineProperty(this, \"setWidth\", () => {\n      if (this.node) {\n        // clientWith returns 0 for SVG elements in Firefox\n        const box = this.node.parentNode.getBoundingClientRect();\n        const width = box.right - box.left - paddingLeft - paddingRight;\n        this.setState({\n          width\n        });\n      }\n    });\n    // Handler for play/pause button\n    _defineProperty(this, \"onPlayPause\", () => {\n      if (this.state.mode === 'play') {\n        this.stop();\n      } else {\n        this.play();\n      }\n    });\n    // Play animation\n    _defineProperty(this, \"play\", () => {\n      const {\n        period,\n        periods,\n        onChange\n      } = this.props;\n      const index = periods.findIndex(p => p.id === period.id);\n      const isLastPeriod = index === periods.length - 1;\n\n      // If new animation\n      if (!this.timeout) {\n        // Switch to first period if last\n        if (isLastPeriod) {\n          onChange(periods[0]);\n        }\n        this.setState({\n          mode: 'play'\n        });\n      } else {\n        // Stop animation if last period\n        if (isLastPeriod) {\n          this.stop();\n          return;\n        }\n\n        // Switch to next period\n        onChange(periods[index + 1]);\n      }\n\n      // Call itself after delay\n      this.timeout = setTimeout(this.play, delay);\n    });\n    // Stop animation\n    _defineProperty(this, \"stop\", () => {\n      this.setState({\n        mode: 'stop'\n      });\n      clearTimeout(this.timeout);\n      delete this.timeout;\n    });\n  }\n  componentDidMount() {\n    this.setWidth();\n    this.context.map.on('resize', this.setWidth);\n  }\n  componentDidUpdate() {\n    this.setTimeAxis();\n  }\n  componentWillUnmount() {\n    this.context.map.off('resize', this.setWidth);\n  }\n  render() {\n    const {\n      mode\n    } = this.state;\n    this.setTimeScale();\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      className: `dhis2-map-timeline ${styles.timeline}`\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      onClick: this.onPlayPause,\n      transform: \"translate(7,5)\",\n      className: styles.play\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M0 0h24v24H0z\",\n      fillOpacity: \"0.0\"\n    }), mode === 'play' ? pauseBtn : playBtn), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(${paddingLeft},10)`\n    }, this.getPeriodRects()), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(${paddingLeft},25)`,\n      ref: node => this.node = node\n    }));\n  }\n  // Handler for period click\n  onPeriodClick(period) {\n    // Switch to period if different\n    if (period.id !== this.props.period.id) {\n      this.props.onChange(period);\n    }\n\n    // Stop animation if running\n    this.stop();\n  }\n}\n_defineProperty(Timeline, \"contextTypes\", {\n  map: PropTypes.object\n});\n_defineProperty(Timeline, \"propTypes\", {\n  period: PropTypes.object.isRequired,\n  periodId: PropTypes.string.isRequired,\n  periods: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired\n});\nexport default Timeline;","// extracted by mini-css-extract-plugin\nexport default {\"periodName\":\"PeriodName_periodName__JERjO\",\"period\":\"PeriodName_period__2BFNe map_box__WtUb7\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/PeriodName.module.css';\nconst PeriodName = _ref => {\n  let {\n    period,\n    isTimeline\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `dhis2-map-period ${styles.periodName}`,\n    style: isTimeline ? {\n      bottom: 86\n    } : null\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.period\n  }, period));\n};\nPeriodName.propTypes = {\n  period: PropTypes.string.isRequired,\n  isTimeline: PropTypes.bool\n};\nexport default PeriodName;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React, { Fragment } from 'react';\nimport { RENDERING_STRATEGY_SINGLE, RENDERING_STRATEGY_TIMELINE, THEMATIC_CHOROPLETH, THEMATIC_BUBBLE, BOUNDARY_LAYER, ORG_UNIT_COLOR, ORG_UNIT_RADIUS_SMALL, LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { getPeriodFromFilters } from '../../../util/analytics.js';\nimport { filterData } from '../../../util/filter.js';\nimport { getLabelStyle } from '../../../util/labels.js';\nimport Timeline from '../../periods/Timeline.js';\nimport { poleOfInaccessibility } from '../MapApi.js';\nimport PeriodName from '../PeriodName.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\n\n// Translating polygons to points using poleOfInaccessibility from maps-gl\nconst polygonsToPoints = features => features.map(feature => ({\n  ...feature,\n  geometry: {\n    type: 'Point',\n    coordinates: poleOfInaccessibility(feature.geometry)\n  }\n}));\nclass ThematicLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"onPeriodChange\", period => this.setState({\n      period\n    }));\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      dataFilters,\n      labels,\n      valuesByPeriod,\n      renderingStrategy = RENDERING_STRATEGY_SINGLE,\n      thematicMapType = THEMATIC_CHOROPLETH,\n      noDataColor\n    } = this.props;\n    const {\n      period\n    } = this.state;\n    const bubbleMap = thematicMapType === THEMATIC_BUBBLE;\n    let periodData = bubbleMap ? polygonsToPoints(data) : data;\n    if (renderingStrategy !== RENDERING_STRATEGY_SINGLE) {\n      const values = valuesByPeriod[period.id] || {};\n      periodData = periodData.map(f => ({\n        ...f,\n        properties: {\n          ...f.properties,\n          ...values[f.id],\n          ...(f.properties.hasAdditionalGeometry && f.geometry.type === 'Point' && {\n            color: ORG_UNIT_COLOR,\n            radius: ORG_UNIT_RADIUS_SMALL\n          })\n        }\n      }));\n\n      // Remove org unit features if noDataColor is missing\n      if (!noDataColor) {\n        periodData = periodData.filter(feature => values[feature.id] !== undefined);\n      }\n    }\n    const map = this.context.map;\n    const filteredData = filterData(periodData, dataFilters);\n    const config = {\n      type: 'choropleth',\n      id,\n      index,\n      opacity,\n      isVisible,\n      data: filteredData,\n      hoverLabel: '{name} ({value})',\n      color: noDataColor,\n      onClick: this.onFeatureClick.bind(this),\n      onRightClick: this.onFeatureRightClick.bind(this)\n    };\n    if (labels) {\n      config.label = this.props.labelTemplate || LABEL_TEMPLATE_NAME_ONLY;\n      config.labelStyle = getLabelStyle(this.props);\n    }\n\n    // Add boundaries as a separate layer\n    if (bubbleMap) {\n      this.layer = map.createLayer({\n        type: 'group',\n        id,\n        index,\n        opacity,\n        isVisible\n      });\n      this.layer.addLayer({\n        type: BOUNDARY_LAYER,\n        data: data.map(f => ({\n          ...f,\n          properties: {\n            ...f.properties,\n            style: {\n              color: ORG_UNIT_COLOR,\n              weight: 0.5\n            }\n          }\n        })),\n        style: {}\n      });\n      this.layer.addLayer(config);\n    } else {\n      this.layer = map.createLayer(config);\n    }\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n\n  // Set initial period\n  setPeriod(callback) {\n    const {\n      period,\n      periods,\n      renderingStrategy = RENDERING_STRATEGY_SINGLE\n    } = this.props;\n    if (!period && !periods) {\n      return;\n    }\n    const initialPeriod = {\n      period: renderingStrategy === RENDERING_STRATEGY_SINGLE ? null : period || periods[0]\n    };\n\n    // setPeriod without callback is called from the constructor (unmounted)\n    if (!callback) {\n      this.state = initialPeriod;\n    } else {\n      this.setState(initialPeriod, callback);\n    }\n  }\n  getPopup() {\n    const {\n      columns,\n      aggregationType,\n      legend\n    } = this.props;\n    const {\n      popup,\n      period\n    } = this.state;\n    const {\n      coordinates,\n      feature\n    } = popup;\n    const {\n      id,\n      name,\n      value\n    } = feature.properties;\n    const indicator = columns[0].items[0].name || '';\n    const periodName = period ? period.name : legend.period;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      orgUnitId: id,\n      onClose: this.onPopupClose,\n      className: \"dhis2-map-popup-orgunit\"\n    }, /*#__PURE__*/React.createElement(\"em\", null, name), /*#__PURE__*/React.createElement(\"div\", null, indicator), /*#__PURE__*/React.createElement(\"div\", null, periodName), /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Value'), \": \", value), aggregationType && aggregationType !== 'DEFAULT' && /*#__PURE__*/React.createElement(\"div\", null, aggregationType));\n  }\n  render() {\n    const {\n      periods,\n      renderingStrategy,\n      filters\n    } = this.props;\n    const {\n      period,\n      popup\n    } = this.state;\n    const {\n      id\n    } = getPeriodFromFilters(filters) || {};\n    return /*#__PURE__*/React.createElement(Fragment, null, renderingStrategy === RENDERING_STRATEGY_TIMELINE && period && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(PeriodName, {\n      period: period.name,\n      isTimeline: true\n    }), /*#__PURE__*/React.createElement(Timeline, {\n      periodId: id,\n      period: period,\n      periods: periods,\n      onChange: this.onPeriodChange\n    })), popup && this.getPopup());\n  }\n  onFeatureClick(evt) {\n    this.setState({\n      popup: evt\n    });\n  }\n}\nexport default ThematicLayer;","import { useConfig } from '@dhis2/app-runtime';\nexport const BaseUrlShim = _ref => {\n  let {\n    children\n  } = _ref;\n  const {\n    baseUrl,\n    apiVersion\n  } = useConfig();\n  return children({\n    baseUrl: `${baseUrl}/api/${apiVersion}`\n  });\n};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport React from 'react';\nimport { TEI_COLOR, TEI_RADIUS, TEI_RELATIONSHIP_LINE_COLOR, TEI_RELATED_COLOR, TEI_RELATED_RADIUS } from '../../../constants/layers.js';\nimport { apiFetchWithBaseUrl } from '../../../util/api.js';\nimport { formatTime } from '../../../util/helpers.js';\nimport { BaseUrlShim } from '../../BaseUrlShim.js';\nimport Popup from '../Popup.js';\nimport Layer from './Layer.js';\nconst getCentroid = points => {\n  const totals = points.reduce((accum, point) => {\n    accum[0] += point[0];\n    accum[1] += point[1];\n    return accum;\n  }, [0, 0]);\n  return [totals[0] / points.length, totals[1] / points.length];\n};\nconst fetchTEI = async (id, fieldsString, baseUrl) => {\n  const data = await apiFetchWithBaseUrl({\n    url: `/trackedEntityInstances/${id}?fields=${fieldsString}`,\n    baseUrl\n  });\n  return data;\n};\nconst geomToCentroid = (type, coords) => {\n  switch (type) {\n    case 'POINT':\n      return JSON.parse(coords);\n    case 'POLYGON':\n      // TODO: Support multipolygon / use turf\n      return getCentroid(JSON.parse(coords)[0]);\n    default:\n      return null;\n  }\n};\nconst makeRelationshipGeometry = _ref => {\n  let {\n    from,\n    to\n  } = _ref;\n  const fromGeom = geomToCentroid(from.featureType, from.coordinates);\n  const toGeom = geomToCentroid(to.featureType, to.coordinates);\n  if (!fromGeom || !toGeom) {\n    // console.error('Invalid relationship geometries', from, to);\n    return null;\n  }\n  return {\n    type: 'Feature',\n    geometry: {\n      type: 'LineString',\n      coordinates: [fromGeom, toGeom]\n    },\n    properties: {}\n  };\n};\nconst makeRelationshipLayer = (relationships, color, weight) => {\n  return {\n    type: 'geoJson',\n    data: relationships.map(makeRelationshipGeometry).filter(x => !!x),\n    style: {\n      color,\n      weight\n    }\n  };\n};\nclass TrackedEntityLayer extends Layer {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      popup: null\n    });\n  }\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      data,\n      relationships,\n      secondaryData,\n      eventPointColor,\n      eventPointRadius,\n      areaRadius,\n      relatedPointColor,\n      relatedPointRadius,\n      relationshipLineColor\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    const color = eventPointColor || TEI_COLOR;\n    const radius = eventPointRadius || TEI_RADIUS;\n    const config = {\n      type: 'geoJson',\n      data,\n      style: {\n        color,\n        weight: 1,\n        radius\n      },\n      onClick: this.onEntityClick.bind(this)\n    };\n    if (areaRadius) {\n      config.buffer = areaRadius;\n      config.bufferStyle = {\n        color,\n        weight: 1,\n        opacity: 0.2,\n        fillOpacity: 0.1\n      };\n    }\n\n    // Create and add layer based on config object\n    const group = map.createLayer({\n      type: 'group',\n      id,\n      index,\n      opacity,\n      isVisible\n    });\n    if (relationships) {\n      const secondaryConfig = {\n        type: 'geoJson',\n        data: secondaryData,\n        style: {\n          color: relatedPointColor || TEI_RELATED_COLOR,\n          weight: 1,\n          radius: relatedPointRadius || TEI_RELATED_RADIUS\n        },\n        onClick: this.onEntityClick.bind(this)\n      };\n      const relationshipConfig = makeRelationshipLayer(relationships, relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR, 1);\n      group.addLayer(relationshipConfig);\n      group.addLayer(secondaryConfig);\n    }\n    group.addLayer(config);\n    this.layer = group;\n    map.addLayer(this.layer);\n\n    // Fit map to layer bounds once (when first created)\n    this.fitBoundsOnce();\n  }\n  getPopup() {\n    const {\n      coordinates,\n      data\n    } = this.state.popup;\n    const {\n      attributes = [],\n      lastUpdated\n    } = data;\n    return /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      onClose: this.onPopupClose\n    }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, attributes.map(_ref2 => {\n      let {\n        name,\n        value\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: name\n      }, /*#__PURE__*/React.createElement(\"th\", null, name, \":\"), /*#__PURE__*/React.createElement(\"td\", null, value));\n    }), /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, i18n.t('Last updated'), \":\"), /*#__PURE__*/React.createElement(\"td\", null, formatTime(lastUpdated))))));\n  }\n  render() {\n    return this.state.popup ? this.getPopup() : null;\n  }\n  async onEntityClick(evt) {\n    const {\n      feature,\n      coordinates\n    } = evt;\n    const data = await fetchTEI(feature.properties.id, 'lastUpdated,attributes[displayName~rename(name),value],relationships', this.props.baseUrl);\n    this.setState({\n      popup: {\n        feature,\n        coordinates,\n        data\n      }\n    });\n  }\n}\nconst TrackedEntityLayerWithBaseUrl = props => /*#__PURE__*/React.createElement(BaseUrlShim, null, _ref3 => {\n  let {\n    baseUrl\n  } = _ref3;\n  return /*#__PURE__*/React.createElement(TrackedEntityLayer, _extends({\n    baseUrl: baseUrl\n  }, props));\n});\nexport default TrackedEntityLayerWithBaseUrl;","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"Map_map__gZqCB\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component, Fragment } from 'react';\nimport { onFullscreenChange } from '../../util/map.js';\nimport BasemapLayer from './layers/BasemapLayer.js';\nimport EarthEngineLayer from './layers/earthEngine/EarthEngineLayer.js';\nimport EventLayer from './layers/EventLayer.js';\nimport ExternalLayer from './layers/ExternalLayer.js';\nimport FacilityLayer from './layers/FacilityLayer.js';\nimport GeoJsonLayer from './layers/GeoJsonLayer.js';\nimport Layer from './layers/Layer.js';\nimport OrgUnitLayer from './layers/OrgUnitLayer.js';\nimport ThematicLayer from './layers/ThematicLayer.js';\nimport TrackedEntityLayer from './layers/TrackedEntityLayer.js';\nimport mapApi, { controlTypes } from './MapApi.js';\nimport Popup from './Popup.js';\nimport styles from './styles/Map.module.css';\nconst layerType = {\n  event: EventLayer,\n  trackedEntity: TrackedEntityLayer,\n  facility: FacilityLayer,\n  thematic: ThematicLayer,\n  orgUnit: OrgUnitLayer,\n  earthEngine: EarthEngineLayer,\n  external: ExternalLayer,\n  geoJsonUrl: GeoJsonLayer\n};\nclass Map extends Component {\n  constructor(props, context) {\n    super(props, context);\n    _defineProperty(this, \"state\", {});\n    _defineProperty(this, \"onRightClick\", evt => {\n      const [x, y] = evt.position;\n      const {\n        left,\n        top\n      } = this.map.getContainer().getBoundingClientRect();\n      this.props.openContextMenu({\n        ...evt,\n        position: [x, y],\n        offset: [left, top]\n      });\n    });\n    _defineProperty(this, \"onMapReady\", map => {\n      this.setState({\n        map\n      });\n      const {\n        setMapObject\n      } = this.props;\n      if (setMapObject) {\n        setMapObject(this.map);\n      }\n    });\n    // From built-in fullscreen control\n    _defineProperty(this, \"onFullscreenChange\", _ref => {\n      let {\n        isFullscreen\n      } = _ref;\n      onFullscreenChange(this.map, isFullscreen);\n    });\n    const {\n      isPlugin,\n      baseUrl\n    } = props;\n    const _map = mapApi({\n      scrollZoom: !isPlugin,\n      baseUrl\n    });\n    if (isPlugin) {\n      _map.toggleMultiTouch(true);\n      _map.on('fullscreenchange', this.onFullscreenChange);\n    } else {\n      _map.on('contextmenu', this.onRightClick, this);\n    }\n    this.map = _map;\n    _map.on('ready', this.onMapReady);\n  }\n  getChildContext() {\n    return {\n      map: this.map,\n      isPlugin: this.props.isPlugin\n    };\n  }\n  componentDidMount() {\n    const {\n      controls,\n      bounds,\n      latitude,\n      longitude,\n      zoom\n    } = this.props;\n    const {\n      map\n    } = this;\n\n    // Append map container to DOM\n    this.node.appendChild(map.getContainer());\n    map.resize();\n\n    // Add map controls\n    if (controls) {\n      controls.filter(control => controlTypes.includes(control.type)).forEach(control => map.addControl(control));\n    }\n    const layerBounds = map.getLayersBounds();\n    if (Array.isArray(layerBounds)) {\n      map.fitBounds(layerBounds);\n    } else if (bounds) {\n      map.fitBounds(bounds);\n    } else if (latitude && longitude && zoom) {\n      map.setView([longitude, latitude], zoom);\n    } else {\n      map.fitWorld();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      resizeCount,\n      isFullscreen,\n      isPlugin\n    } = this.props;\n    if (resizeCount !== prevProps.resizeCount) {\n      this.map.resize();\n    }\n\n    // From map plugin resize method\n    if (isPlugin && isFullscreen !== prevProps.isFullscreen) {\n      onFullscreenChange(this.map, isFullscreen);\n    }\n  }\n\n  // Remove map\n  componentWillUnmount() {\n    if (this.map) {\n      this.map.off('ready', this.onMapReady);\n      this.map.remove();\n      delete this.map;\n    }\n  }\n  render() {\n    const {\n      basemap,\n      layers,\n      feature,\n      coordinatePopup: coordinates,\n      closeCoordinatePopup,\n      openContextMenu,\n      setAggregations,\n      setFeatureProfile\n    } = this.props;\n    const {\n      map\n    } = this.state;\n    const overlays = layers.filter(layer => layer.isLoaded);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: node => this.node = node,\n      className: styles.map\n    }, map && /*#__PURE__*/React.createElement(Fragment, null, overlays.map((config, index) => {\n      const Overlay = layerType[config.layer] || Layer;\n      const highlight = feature && feature.layerId === config.id ? feature : null;\n      return /*#__PURE__*/React.createElement(Overlay, _extends({\n        key: config.id,\n        index: overlays.length - index,\n        feature: highlight,\n        openContextMenu: openContextMenu,\n        setAggregations: setAggregations,\n        setFeatureProfile: setFeatureProfile\n      }, config));\n    }), /*#__PURE__*/React.createElement(BasemapLayer, basemap), coordinates && /*#__PURE__*/React.createElement(Popup, {\n      coordinates: coordinates,\n      onClose: closeCoordinatePopup\n    }, i18n.t('Longitude'), \":\", ' ', coordinates[0].toFixed(6), /*#__PURE__*/React.createElement(\"br\", null), i18n.t('Latitude'), \":\", ' ', coordinates[1].toFixed(6))));\n  }\n}\n_defineProperty(Map, \"propTypes\", {\n  baseUrl: PropTypes.string.isRequired,\n  openContextMenu: PropTypes.func.isRequired,\n  basemap: PropTypes.object,\n  bounds: PropTypes.array,\n  closeCoordinatePopup: PropTypes.func,\n  controls: PropTypes.array,\n  coordinatePopup: PropTypes.array,\n  feature: PropTypes.object,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  latitude: PropTypes.number,\n  layers: PropTypes.array,\n  longitude: PropTypes.number,\n  resizeCount: PropTypes.number,\n  setAggregations: PropTypes.func,\n  setFeatureProfile: PropTypes.func,\n  setMapObject: PropTypes.func,\n  zoom: PropTypes.number\n});\n_defineProperty(Map, \"defaultProps\", {\n  isPlugin: false\n});\n_defineProperty(Map, \"childContextTypes\", {\n  map: PropTypes.object.isRequired,\n  isPlugin: PropTypes.bool.isRequired\n});\nexport default Map;","import Layer from './Layer.js';\nexport default class ExternalLayer extends Layer {\n  createLayer() {\n    const {\n      id,\n      index,\n      opacity,\n      isVisible,\n      config\n    } = this.props;\n    const {\n      map\n    } = this.context;\n    this.layer = map.createLayer({\n      id,\n      index,\n      opacity,\n      isVisible,\n      ...config\n    });\n    map.addLayer(this.layer);\n  }\n}","// extracted by mini-css-extract-plugin\nexport default {\"mapItem\":\"MapItem_mapItem__b6yfQ\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { onFullscreenChange } from '../../util/map.js';\nimport mapApi from './MapApi.js';\nimport styles from './styles/MapItem.module.css';\nclass MapItem extends PureComponent {\n  constructor(props, context) {\n    super(props, context);\n    _defineProperty(this, \"state\", {});\n    _defineProperty(this, \"onMapReady\", map => this.setState({\n      map\n    }));\n    const {\n      isPlugin,\n      baseUrl\n    } = props;\n    this.map = mapApi({\n      attributionControl: false,\n      scrollZoom: !isPlugin,\n      baseUrl\n    });\n    if (isPlugin) {\n      this.map.toggleMultiTouch(true);\n    }\n    this.map.on('ready', this.onMapReady);\n  }\n  getChildContext() {\n    return {\n      map: this.map,\n      isPlugin: this.props.isPlugin\n    };\n  }\n  componentDidMount() {\n    const {\n      layerId,\n      index,\n      setMapControls\n    } = this.props;\n    const {\n      map\n    } = this;\n    this.node.appendChild(map.getContainer());\n    this.fitLayerBounds();\n    map.sync(layerId);\n\n    // Add map controls if first map\n    if (index == 0) {\n      setMapControls(map);\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {\n      count,\n      isFullscreen,\n      isPlugin\n    } = this.props;\n    if (count !== prevProps.count) {\n      this.fitLayerBounds();\n    }\n    if (isPlugin && isFullscreen !== prevProps.isFullscreen) {\n      onFullscreenChange(this.map, isFullscreen);\n    }\n    this.map.resize();\n  }\n  componentWillUnmount() {\n    this.map.off('ready', this.onMapReady);\n    this.map.unsync(this.props.layerId);\n    this.map.remove();\n    delete this.map;\n  }\n  render() {\n    const {\n      count,\n      children\n    } = this.props;\n    const {\n      map\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: node => this.node = node,\n      className: styles.mapItem,\n      style: {\n        width: count === 4 ? '50%' : '33.3333%'\n      }\n    }, map && children);\n  }\n\n  // Zoom to layers bounds on mount\n  fitLayerBounds() {\n    this.map.resize();\n    const bounds = this.map.getLayersBounds();\n    if (bounds) {\n      this.map.fitBounds(bounds);\n    } else {\n      this.map.fitWorld();\n    }\n  }\n}\n_defineProperty(MapItem, \"childContextTypes\", {\n  map: PropTypes.object.isRequired,\n  isPlugin: PropTypes.bool.isRequired\n});\n_defineProperty(MapItem, \"propTypes\", {\n  baseUrl: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n  count: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n  layerId: PropTypes.string.isRequired,\n  setMapControls: PropTypes.func.isRequired,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool\n});\n_defineProperty(MapItem, \"defaultProps\", {\n  isPlugin: false\n});\nexport default MapItem;","// extracted by mini-css-extract-plugin\nexport default {\"splitView\":\"SplitView_splitView__BQU6v\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useConfig } from '@dhis2/app-runtime';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport BasemapLayer from './layers/BasemapLayer.js';\nimport ThematicLayer from './layers/ThematicLayer.js';\nimport MapItem from './MapItem.js';\nimport PeriodName from './PeriodName.js';\nimport styles from './styles/SplitView.module.css';\nconst SplitView = _ref => {\n  let {\n    isPlugin,\n    basemap,\n    layer,\n    feature,\n    controls,\n    openContextMenu,\n    isFullscreen,\n    interpretationModalOpen,\n    setMapObject\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [showFullscreen, setShowFullscreen] = useState();\n  const [map, setMap] = useState(); // Called from map child\n  const containerRef = useRef();\n\n  // From built-in fullscreen control\n  const onFullscreenChange = useCallback(_ref2 => {\n    let {\n      isFullscreen\n    } = _ref2;\n    return setShowFullscreen(isFullscreen);\n  }, []);\n  useEffect(() => {\n    if (map && controls && containerRef.current) {\n      controls.forEach(control => {\n        map.addControl(control);\n        containerRef.current.append(map.getControlContainer(control.type));\n      });\n      if (setMapObject) {\n        setMapObject(map);\n      }\n    }\n  }, [map, controls, containerRef, setMapObject]);\n  useEffect(() => {\n    if (map && isPlugin) {\n      map.on('fullscreenchange', onFullscreenChange);\n    }\n    return () => {\n      if (map && isPlugin) {\n        map.off('fullscreenchange', onFullscreenChange);\n      }\n    };\n  }, [map, isPlugin, onFullscreenChange]);\n  useEffect(() => {\n    // From map plugin resize method\n    setShowFullscreen(isFullscreen);\n  }, [isFullscreen]);\n  const {\n    id,\n    periods = []\n  } = layer;\n  return !interpretationModalOpen ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: containerRef,\n    className: cx('dhis2-map-split-view', styles.splitView)\n  }, periods.map((period, index) => /*#__PURE__*/React.createElement(MapItem, {\n    key: period.id,\n    index: index,\n    count: periods.length,\n    layerId: id,\n    setMapControls: setMap,\n    isPlugin: isPlugin,\n    isFullscreen: showFullscreen,\n    baseUrl: baseUrl\n  }, /*#__PURE__*/React.createElement(BasemapLayer, basemap), /*#__PURE__*/React.createElement(ThematicLayer, _extends({\n    index: 1\n  }, layer, {\n    // needs to be before period\n    period: period,\n    feature: feature,\n    openContextMenu: openContextMenu\n  })), /*#__PURE__*/React.createElement(PeriodName, {\n    period: period.name\n  })))) : null;\n};\nSplitView.propTypes = {\n  layer: PropTypes.object.isRequired,\n  openContextMenu: PropTypes.func.isRequired,\n  basemap: PropTypes.object,\n  controls: PropTypes.array,\n  feature: PropTypes.object,\n  interpretationModalOpen: PropTypes.bool,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  setMapObject: PropTypes.func\n};\nSplitView.defaultProps = {\n  openContextMenu: () => {}\n};\nexport default SplitView;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useConfig } from '@dhis2/app-runtime';\nimport { ComponentCover, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { getSplitViewLayer } from '../../util/helpers.js';\nimport { getMapControls } from '../../util/mapControls.js';\nimport Map from './Map.js';\nimport SplitView from './SplitView.js';\n\n// Shared component between app and plugin\nconst MapView = props => {\n  const {\n    isPlugin,\n    isFullscreen,\n    basemap,\n    layers,\n    controls,\n    feature,\n    bounds,\n    coordinatePopup,\n    interpretationModalOpen,\n    openContextMenu,\n    setMapObject,\n    resizeCount,\n    ...layerDispatchActions\n  } = props;\n  const {\n    baseUrl\n  } = useConfig();\n  const splitViewLayer = getSplitViewLayer(layers);\n  const isSplitView = !!splitViewLayer;\n  const mapControls = useMemo(() => getMapControls(isPlugin, isSplitView, controls), [isPlugin, isSplitView, controls]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, basemap.id === undefined ? /*#__PURE__*/React.createElement(ComponentCover, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null))) : /*#__PURE__*/React.createElement(React.Fragment, null, isSplitView ? /*#__PURE__*/React.createElement(SplitView, {\n    isPlugin: isPlugin,\n    isFullscreen: isFullscreen,\n    basemap: basemap,\n    layer: splitViewLayer,\n    controls: mapControls,\n    feature: feature,\n    interpretationModalOpen: interpretationModalOpen,\n    openContextMenu: openContextMenu,\n    resizeCount: resizeCount,\n    setMapObject: setMapObject\n  }) : /*#__PURE__*/React.createElement(Map, _extends({\n    isPlugin: isPlugin,\n    isFullscreen: isFullscreen,\n    basemap: basemap,\n    layers: [...layers].reverse(),\n    bounds: bounds,\n    controls: mapControls,\n    feature: feature,\n    coordinatePopup: coordinatePopup,\n    openContextMenu: openContextMenu,\n    resizeCount: resizeCount,\n    setMapObject: setMapObject,\n    baseUrl: baseUrl\n  }, layerDispatchActions))));\n};\nMapView.propTypes = {\n  basemap: PropTypes.object,\n  bounds: PropTypes.array,\n  controls: PropTypes.array,\n  coordinatePopup: PropTypes.array,\n  feature: PropTypes.object,\n  interpretationModalOpen: PropTypes.bool,\n  isFullscreen: PropTypes.bool,\n  isPlugin: PropTypes.bool,\n  layers: PropTypes.array,\n  openContextMenu: PropTypes.func,\n  resizeCount: PropTypes.number,\n  setMapObject: PropTypes.func\n};\nexport default MapView;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAggregations } from '../../actions/aggregations.js';\nimport { setFeatureProfile } from '../../actions/feature.js';\nimport { openContextMenu, closeCoordinatePopup } from '../../actions/map.js';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport MapLoadingMask from './MapLoadingMask.js';\nimport MapName from './MapName.js';\nimport MapView from './MapView.js';\nconst MapContainer = _ref => {\n  let {\n    resizeCount,\n    setMap\n  } = _ref;\n  const {\n    basemap,\n    coordinatePopup,\n    mapViews,\n    bounds\n  } = useSelector(state => state.map);\n  const interpretationModalOpen = useSelector(state => !!state.interpretation.id);\n  const feature = useSelector(state => state.feature);\n  const basemapConfig = useBasemapConfig(basemap);\n  const dispatch = useDispatch();\n  const loadedMapViews = mapViews.filter(layer => layer.isLoaded);\n  const isLoading = loadedMapViews.length !== mapViews.length;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MapName, null), /*#__PURE__*/React.createElement(MapView, {\n    isPlugin: false,\n    basemap: basemapConfig,\n    layers: loadedMapViews,\n    bounds: bounds,\n    feature: feature,\n    openContextMenu: config => dispatch(openContextMenu(config)),\n    coordinatePopup: coordinatePopup,\n    interpretationModalOpen: interpretationModalOpen,\n    closeCoordinatePopup: () => dispatch(closeCoordinatePopup()),\n    setAggregations: data => dispatch(setAggregations(data)),\n    setFeatureProfile: val => dispatch(setFeatureProfile(val)),\n    resizeCount: resizeCount,\n    setMapObject: setMap\n  }), isLoading && /*#__PURE__*/React.createElement(MapLoadingMask, null));\n};\nMapContainer.propTypes = {\n  resizeCount: PropTypes.number.isRequired,\n  setMap: PropTypes.func.isRequired\n};\nexport default MapContainer;","import * as types from '../constants/actionTypes.js';\nexport const setAggregations = payload => ({\n  type: types.AGGREGATIONS_SET,\n  payload\n});","// extracted by mini-css-extract-plugin\nexport default {\"mapPosition\":\"MapPosition_mapPosition__Yx9lo\",\"mapContainer\":\"MapPosition_mapContainer__zTCuq\",\"download\":\"MapPosition_download__Dkt62\",\"mapContainerDownload\":\"MapPosition_mapContainerDownload__qsoiu\",\"downloadMapInfoOpen\":\"MapPosition_downloadMapInfoOpen__Uze65\",\"mapDownload\":\"MapPosition_mapDownload__LA7+9\"};","import cx from 'classnames';\nimport React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { APP_MENU_HEIGHT, HEADER_HEIGHT } from '../../constants/layout.js';\nimport { getSplitViewLayer } from '../../util/helpers.js';\nimport DownloadMapInfo from '../download/DownloadMapInfo.js';\nimport NorthArrow from '../download/NorthArrow.js';\nimport MapContainer from '../map/MapContainer.js';\nimport styles from './styles/MapPosition.module.css';\nconst MapPosition = () => {\n  const [map, setMap] = useState();\n  const [resizeCount, setResizeCount] = useState(0);\n  const {\n    showName,\n    showDescription,\n    showLegend,\n    showInLegend,\n    showOverviewMap,\n    showNorthArrow\n  } = useSelector(state => state.download);\n  const {\n    id: mapId,\n    mapViews: layers\n  } = useSelector(state => state.map);\n  const {\n    downloadMode,\n    layersPanelOpen,\n    rightPanelOpen,\n    dataTableHeight\n  } = useSelector(state => state.ui);\n  const dataTableOpen = useSelector(state => !!state.dataTable);\n  let mapHeight = `calc(100vh - ${HEADER_HEIGHT}px)`;\n  if (!downloadMode) {\n    if (dataTableOpen) {\n      mapHeight = `calc(100vh - ${HEADER_HEIGHT}px - ${APP_MENU_HEIGHT}px - ${dataTableHeight}px)`;\n    } else {\n      mapHeight = `calc(100vh - ${HEADER_HEIGHT}px - ${APP_MENU_HEIGHT}px)`;\n    }\n  }\n  const downloadMapInfoOpen = downloadMode && (showName || showDescription || showLegend && !!showInLegend.length || showOverviewMap);\n  const isSplitView = !!getSplitViewLayer(layers);\n\n  // Trigger map resize when panels are expanded, collapsed or dragged\n  useEffect(() => {\n    setResizeCount(count => count + 1);\n  }, [dataTableOpen, dataTableHeight, downloadMapInfoOpen, layersPanelOpen, rightPanelOpen]);\n\n  // Reset bearing and pitch when new map (mapId changed)\n  useEffect(() => {\n    if (map) {\n      const mapgl = map.getMapGL();\n      if (mapgl) {\n        mapgl.setBearing(0);\n        mapgl.setPitch(0);\n      }\n    }\n  }, [map, mapId]);\n\n  // Fit layer bounds when app mode is toggled\n  useEffect(() => {\n    if (map) {\n      const mapgl = map.getMapGL();\n      mapgl.once('resize', () => {\n        map.fitBounds(map.getLayersBounds(), {\n          padding: 40,\n          bearing: mapgl.getBearing()\n        });\n      });\n      setTimeout(() => {\n        if (map.getMapGL()) {\n          map.resize();\n        }\n      }, 500);\n    }\n  }, [map, downloadMode]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.mapPosition,\n    style: {\n      height: mapHeight\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx({\n      [styles.mapDownload]: downloadMode,\n      [styles.downloadMapInfoOpen]: downloadMapInfoOpen\n    })\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"dhis2-map-container\",\n    className: cx(styles.mapContainer, {\n      [styles.download]: downloadMode,\n      'dhis2-map-download': downloadMode,\n      'dhis2-map-new': !mapId\n    })\n  }, /*#__PURE__*/React.createElement(MapContainer, {\n    resizeCount: resizeCount,\n    setMap: setMap\n  }), downloadMode && map && /*#__PURE__*/React.createElement(React.Fragment, null, downloadMapInfoOpen && /*#__PURE__*/React.createElement(DownloadMapInfo, {\n    map: map.getMapGL(),\n    isSplitView: isSplitView\n  }), showNorthArrow && !isSplitView && /*#__PURE__*/React.createElement(NorthArrow, {\n    map: map.getMapGL(),\n    downloadMapInfoOpen: downloadMapInfoOpen\n  })))));\n};\nexport default MapPosition;","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"DownloadButton_button__y1y17\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport React from 'react';\nimport { openDownloadMode } from '../../util/history.js';\nimport styles from './styles/DownloadButton.module.css';\nconst DownloadButton = () => {\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: cx(styles.button, 'push-analytics-download-dropdown-menu-button'),\n    onClick: openDownloadMode\n  }, i18n.t('Download'));\n};\nexport default DownloadButton;","import { InterpretationsAndDetailsToggler as AnalyticsInterpretationsAndDetailsToggler } from '@dhis2/analytics';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { openInterpretationsPanel, closeInterpretationsPanel } from '../../actions/ui.js';\nconst InterpretationsToggle = () => {\n  const interpretationsEnabled = useSelector(state => Boolean(state.map.id));\n  const interpretationsOpen = useSelector(state => state.ui.rightPanelOpen && !state.orgUnitProfile);\n  const dispatch = useDispatch();\n  const onClick = useCallback(() => {\n    if (interpretationsOpen) {\n      dispatch(closeInterpretationsPanel());\n    } else {\n      dispatch(openInterpretationsPanel());\n    }\n  }, [dispatch, interpretationsOpen]);\n  return /*#__PURE__*/React.createElement(AnalyticsInterpretationsAndDetailsToggler, {\n    disabled: !interpretationsEnabled,\n    onClick: onClick,\n    isShowing: interpretationsOpen\n  });\n};\nexport default InterpretationsToggle;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Layer_container__trKbO\",\"image\":\"Layer_image__BhkIA\",\"noImage\":\"Layer_noImage__oZTQr\",\"name\":\"Layer_name__mVlxY\",\"tooltip\":\"Layer_tooltip__neBzd\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/Layer.module.css';\nconst Layer = _ref => {\n  let {\n    layer,\n    onClick\n  } = _ref;\n  const {\n    img,\n    type,\n    name\n  } = layer;\n  const label = name || i18n.t(type);\n  const dataTest = `addlayeritem-${label.toLowerCase().replace(/\\s/g, '_')}`;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    onClick: () => onClick(layer),\n    \"data-test\": dataTest\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    placement: \"bottom\",\n    content: label,\n    openDelay: 300,\n    closeDelay: 100,\n    className: styles.tooltip\n  }, /*#__PURE__*/React.createElement(\"div\", null, img ? /*#__PURE__*/React.createElement(\"img\", {\n    src: img,\n    className: styles.image\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noImage\n  }, i18n.t('External layer')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.name\n  }, label))));\n};\nLayer.propTypes = {\n  layer: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired\n};\nexport default Layer;","// extracted by mini-css-extract-plugin\nexport default {\"layerList\":\"LayerList_layerList__5z1Zw\",\"list\":\"LayerList_list__QSLzN\",\"split\":\"LayerList_split__QTdIt\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Layer from './Layer.js';\nimport styles from './styles/LayerList.module.css';\nconst LayerList = _ref => {\n  let {\n    layers,\n    isSplitView,\n    onLayerSelect\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.layerList\n  }, isSplitView ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.split\n  }, i18n.t('Split view can not be combined with other layer types.')) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list,\n    \"data-test\": \"addlayerlist\"\n  }, layers.map((layer, index) => /*#__PURE__*/React.createElement(Layer, {\n    key: `layer-${index}`,\n    onClick: onLayerSelect,\n    layer: layer\n  }))));\n};\nLayerList.propTypes = {\n  layers: PropTypes.array.isRequired,\n  onLayerSelect: PropTypes.func.isRequired,\n  isSplitView: PropTypes.bool\n};\nexport default LayerList;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { Popover } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { addLayer, editLayer } from '../../../actions/layers.js';\nimport { EXTERNAL_LAYER } from '../../../constants/layers.js';\nimport { isSplitViewMap } from '../../../util/helpers.js';\nimport LayerList from './LayerList.js';\nconst AddLayerPopover = _ref => {\n  let {\n    anchorEl,\n    isSplitView,\n    addLayer,\n    editLayer,\n    onClose\n  } = _ref;\n  const {\n    layerTypes\n  } = useCachedDataQuery();\n  const onLayerSelect = layer => {\n    const config = {\n      ...layer\n    };\n    layer.layer === EXTERNAL_LAYER ? addLayer(config) : editLayer(config);\n    onClose();\n  };\n  return /*#__PURE__*/React.createElement(Popover, {\n    arrow: false,\n    reference: anchorEl,\n    placement: \"bottom-start\",\n    maxWidth: 700,\n    onClickOutside: onClose,\n    dataTest: \"addlayerpopover\"\n  }, /*#__PURE__*/React.createElement(LayerList, {\n    layers: layerTypes,\n    isSplitView: isSplitView,\n    onLayerSelect: onLayerSelect\n  }));\n};\nAddLayerPopover.propTypes = {\n  addLayer: PropTypes.func.isRequired,\n  editLayer: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  anchorEl: PropTypes.object,\n  isSplitView: PropTypes.bool\n};\nexport default connect(_ref2 => {\n  let {\n    map\n  } = _ref2;\n  return {\n    isSplitView: isSplitViewMap(map.mapViews)\n  };\n}, {\n  addLayer,\n  editLayer\n})(AddLayerPopover);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"AddLayerButton_container__mZz+Q\",\"button\":\"AddLayerButton_button__1KcH9\",\"content\":\"AddLayerButton_content__52Hkk\"};","import i18n from '@dhis2/d2-i18n';\nimport { IconAddCircle24 } from '@dhis2/ui';\nimport React, { useState, useRef } from 'react';\nimport AddLayerPopover from './AddLayerPopover.js';\nimport styles from './styles/AddLayerButton.module.css';\nconst AddLayerButton = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const buttonRef = useRef();\n  const toggleDialog = () => setIsOpen(!isOpen);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container,\n    ref: buttonRef\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.button,\n    onClick: toggleDialog,\n    \"data-test\": \"add-layer-button\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(IconAddCircle24, null), /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Add layer'))))), isOpen && /*#__PURE__*/React.createElement(AddLayerPopover, {\n    anchorEl: buttonRef,\n    onClose: toggleDialog\n  }));\n};\nexport default AddLayerButton;","import { Toolbar, HoverMenuBar } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport DownloadButton from '../download/DownloadButton.js';\nimport InterpretationsToggle from '../interpretations/InterpretationsToggle.js';\nimport AddLayerButton from '../layers/overlays/AddLayerButton.js';\nimport FileMenu from './FileMenu.js';\nconst AppMenu = _ref => {\n  let {\n    onFileMenuAction\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Toolbar, null, /*#__PURE__*/React.createElement(AddLayerButton, null), /*#__PURE__*/React.createElement(HoverMenuBar, null, /*#__PURE__*/React.createElement(FileMenu, {\n    onFileMenuAction: onFileMenuAction\n  }), /*#__PURE__*/React.createElement(DownloadButton, null)), /*#__PURE__*/React.createElement(InterpretationsToggle, null));\n};\nAppMenu.propTypes = {\n  onFileMenuAction: PropTypes.func.isRequired\n};\nexport default AppMenu;","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"FeatureProfile_drawer__6C7zS\",\"header\":\"FeatureProfile_header__2oNEE\",\"close\":\"FeatureProfile_close__G7Ga2\",\"content\":\"FeatureProfile_content__ot5Tg\",\"dataTable\":\"FeatureProfile_dataTable__37Zz0\",\"noData\":\"FeatureProfile_noData__7T1iN\"};","import i18n from '@dhis2/d2-i18n';\nimport { IconCross24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeFeatureProfile } from '../../actions/feature.js';\nimport Drawer from '../core/Drawer.js';\nimport styles from './styles/FeatureProfile.module.css';\nconst DrawerContent = _ref => {\n  let {\n    data\n  } = _ref;\n  if (Object.keys(data).length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.noData\n    }, i18n.t('No data to show for this feature.'));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.featureData\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dataTable\n  }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, Object.keys(data).map(key => /*#__PURE__*/React.createElement(\"tr\", {\n    key: key\n  }, /*#__PURE__*/React.createElement(\"th\", null, key), /*#__PURE__*/React.createElement(\"td\", null, data[key])))))));\n};\nDrawerContent.propTypes = {\n  data: PropTypes.object.isRequired\n};\nconst FeatureProfile = () => {\n  const featureProfile = useSelector(state => state.featureProfile);\n  const dispatch = useDispatch();\n  const {\n    name,\n    data\n  } = featureProfile;\n  return /*#__PURE__*/React.createElement(Drawer, {\n    className: styles.drawer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"feature-profile-header\",\n    className: styles.header\n  }, name || i18n.t('Feature profile'), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.close,\n    onClick: () => dispatch(closeFeatureProfile())\n  }, /*#__PURE__*/React.createElement(IconCross24, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(DrawerContent, {\n    data: data\n  })));\n};\nexport default FeatureProfile;","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"ContextMenu_anchor__QxrcP\",\"menu\":\"ContextMenu_menu__lWeSg\"};","import { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, Tooltip, IconArrowUp16, IconArrowDown16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { ConditionalWrapper } from '../core/index.js';\nimport styles from './styles/ContextMenu.module.css';\nconst ContextMenu = props => {\n  const {\n    position,\n    offset,\n    feature,\n    container,\n    isSplitView,\n    onDrill,\n    onClose\n  } = props;\n  const {\n    isDisconnected: isOffline\n  } = useDhis2ConnectionStatus();\n  const anchorRef = useRef();\n  const [anchorPosition, setAnchorPosition] = useState();\n  useEffect(() => {\n    if (position) {\n      const [x, y] = position;\n      if (!isSplitView) {\n        setAnchorPosition({\n          left: x,\n          top: y\n        });\n      } else {\n        const [mapLeft, mapTop] = offset;\n        const {\n          left,\n          top\n        } = container.getBoundingClientRect();\n        setAnchorPosition({\n          left: mapLeft - left + x,\n          top: mapTop - top + y\n        });\n      }\n    }\n  }, [position, offset, container, isSplitView]);\n  const {\n    hasCoordinatesUp,\n    hasCoordinatesDown\n  } = feature.properties;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.anchor,\n    style: anchorPosition\n  }), /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: onClose\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(ConditionalWrapper, {\n    condition: isOffline,\n    wrapper: children => /*#__PURE__*/React.createElement(Tooltip, {\n      content: i18n.t('Not available offline')\n    }, children)\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill up one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowUp16, null),\n    disabled: !hasCoordinatesUp || isOffline,\n    onClick: () => onDrill('up')\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    label: i18n.t('Drill down one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowDown16, null),\n    disabled: !hasCoordinatesDown || isOffline,\n    onClick: () => onDrill('down')\n  }))))));\n};\nContextMenu.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onDrill: PropTypes.func.isRequired,\n  container: PropTypes.instanceOf(Element),\n  feature: PropTypes.object,\n  isSplitView: PropTypes.bool,\n  offset: PropTypes.array,\n  position: PropTypes.array\n};\nexport default ContextMenu;","import PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport LayerLegend from '../legend/Legend.js';\n\n// Renders a legend with alerts for one map layer\nconst LegendLayer = _ref => {\n  let {\n    id,\n    legend,\n    alerts = []\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    key: id\n  }, legend && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"dhis2-map-legend-title\"\n  }, legend.title, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"dhis2-map-legend-period\"\n  }, legend.period)), /*#__PURE__*/React.createElement(LayerLegend, legend)), alerts.map((alert, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"dhis2-map-legend-alert\"\n  }, alert.message)));\n};\nLegendLayer.propTypes = {\n  id: PropTypes.string.isRequired,\n  alerts: PropTypes.array,\n  data: PropTypes.array,\n  layer: PropTypes.string,\n  legend: PropTypes.object,\n  serverCluster: PropTypes.bool\n};\nexport default LegendLayer;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport LegendLayer from './LegendLayer.js';\nimport './styles/Legend.css';\n\n// Renders a legend for all map layers\nconst Legend = _ref => {\n  let {\n    layers\n  } = _ref;\n  const [isOpen, toggleOpen] = useState(false);\n  const legendLayers = layers.filter(layer => layer.legend || layer.alerts).reverse(); // Show top layer first\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend\"\n  }, isOpen ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend-content\",\n    onMouseLeave: () => toggleOpen(false)\n  }, legendLayers.map(layer => /*#__PURE__*/React.createElement(LegendLayer, _extends({\n    key: layer.id\n  }, layer)))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dhis2-map-legend-button\",\n    title: i18n.t('Legend'),\n    onMouseEnter: () => toggleOpen(true)\n  }));\n};\nLegend.propTypes = {\n  layers: PropTypes.array.isRequired\n};\nexport default Legend;","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"Map_map__+vlFw\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { CssReset, CssVariables, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { forwardRef, useState, useCallback, useEffect, useRef } from 'react';\nimport { drillUpDown } from '../../util/map.js';\nimport LayerLoader from '../loaders/LayerLoader.js';\nimport MapView from '../map/MapView.js';\nimport ContextMenu from './ContextMenu.js';\nimport Legend from './Legend.js';\nimport styles from './styles/Map.module.css';\nconst defaultBounds = [[-18.7, -34.9], [50.2, 35.9]];\nconst Map = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    basemap,\n    mapViews,\n    controls,\n    getResizeFunction\n  } = props;\n  const layers = useRef(mapViews.map(config => ({\n    ...config,\n    isLoaded: false\n  })));\n  const [mapIsLoaded, setMapIsLoaded] = useState(false);\n  const [contextMenu, setContextMenu] = useState();\n  const [resizeCount, setResizeCount] = useState(0);\n  const onResize = () => setResizeCount(state => state + 1);\n  const onLayerLoad = useCallback(layer => {\n    layers.current = layers.current.map(l => layer.id === l.id ? layer : l);\n    if (layers.current.every(l => l.isLoaded)) {\n      setMapIsLoaded(true);\n    }\n  }, []);\n\n  // TODO: Remove when map.js is refactored\n  useEffect(() => {\n    if (getResizeFunction) {\n      getResizeFunction(onResize);\n    }\n  }, [getResizeFunction]);\n  const onDrill = async direction => {\n    const {\n      layerId,\n      feature\n    } = contextMenu;\n    let newConfig;\n    if (layerId && feature) {\n      const {\n        level,\n        id,\n        parentGraph,\n        grandParentId,\n        grandParentParentGraph\n      } = feature.properties;\n      const layerConfig = layers.current.find(layer => layer.id === layerId);\n      if (direction === 'up') {\n        newConfig = drillUpDown(layerConfig, grandParentId, grandParentParentGraph, parseInt(level) - 1);\n      } else {\n        newConfig = drillUpDown(layerConfig, id, parentGraph, parseInt(level) + 1);\n      }\n      layers.current = layers.current.map(layer => layer.id === layerId ? {\n        ...newConfig,\n        isLoaded: false\n      } : layer);\n      setMapIsLoaded(false);\n      setContextMenu();\n    }\n  };\n  if (!mapIsLoaded) {\n    const layersToLoad = layers.current.filter(config => !config.isLoaded);\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null), layersToLoad.map(config => /*#__PURE__*/React.createElement(LayerLoader, {\n      key: config.id,\n      config: config,\n      onLoad: onLayerLoad\n    })));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: `dhis2-map-plugin ${styles.map}`\n  }, /*#__PURE__*/React.createElement(CssReset, null), /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    theme: true\n  }), /*#__PURE__*/React.createElement(MapView, {\n    isPlugin: true,\n    isFullscreen: false,\n    basemap: basemap,\n    layers: layers.current,\n    controls: controls,\n    bounds: defaultBounds,\n    openContextMenu: setContextMenu,\n    resizeCount: resizeCount\n  }), /*#__PURE__*/React.createElement(Legend, {\n    layers: layers.current\n  }), contextMenu && /*#__PURE__*/React.createElement(ContextMenu, _extends({}, contextMenu, {\n    onDrill: onDrill,\n    onClose: () => setContextMenu()\n  })));\n});\nMap.displayName = 'PluginMap';\nMap.propTypes = {\n  basemap: PropTypes.object,\n  controls: PropTypes.array,\n  getResizeFunction: PropTypes.func,\n  mapViews: PropTypes.array,\n  name: PropTypes.string\n};\nexport default Map;","// extracted by mini-css-extract-plugin\nexport default {\"map\":\"InterpretationMap_map__pDQzD\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport useBasemapConfig from '../../hooks/useBasemapConfig.js';\nimport { getPeriodFromFilters } from '../../util/analytics.js';\nimport { getRelativePeriods } from '../../util/periods.js';\nimport Map from '../plugin/Map.js';\nimport styles from './styles/InterpretationMap.module.css';\nconst InterpretationMap = _ref => {\n  let {\n    visualization,\n    filters,\n    onResponsesReceived\n  } = _ref;\n  const [mapViews, setMapViews] = useState();\n  const basemapConfig = useBasemapConfig(visualization.basemap);\n  useEffect(() => {\n    // Find layers with relative periods\n    const relativePeriodLayers = visualization.mapViews.filter(config => {\n      const period = getPeriodFromFilters(config.filters);\n      return period && getRelativePeriods().find(p => p.id === period.id);\n    }).map(layer => ({\n      ...layer,\n      ...filters,\n      // includes relativePeriodDate\n      isLoaded: false\n    }));\n    if (relativePeriodLayers.length) {\n      // Replace relative period layers and update state\n      setMapViews(visualization.mapViews.map(layer => relativePeriodLayers.find(relativeLayer => relativeLayer.id === layer.id) || layer));\n    } else {\n      setMapViews(visualization.mapViews);\n    }\n  }, [visualization, filters]);\n  useEffect(() => {\n    if (mapViews) {\n      onResponsesReceived();\n    }\n  }, [mapViews, onResponsesReceived]);\n  return mapViews ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.map\n  }, /*#__PURE__*/React.createElement(Map, _extends({}, visualization, {\n    basemap: basemapConfig,\n    mapViews: mapViews\n  }))) : null;\n};\nInterpretationMap.propTypes = {\n  visualization: PropTypes.object.isRequired,\n  onResponsesReceived: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  filters: PropTypes.shape({\n    relativePeriodDate: PropTypes.string.isRequired\n  })\n};\nexport default InterpretationMap;","import { AboutAOUnit, InterpretationsUnit, InterpretationModal, useCachedDataQuery } from '@dhis2/analytics';\nimport PropTypes from 'prop-types';\nimport queryString from 'query-string';\nimport React, { useRef, useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport history, { getHashUrlParams } from '../../util/history.js';\nimport Drawer from '../core/Drawer.js';\nimport InterpretationMap from './InterpretationMap.js';\nconst openInterpretationModal = (interpretationId, initialFocus) => {\n  history.push(`${history.location.pathname}?${queryString.stringify({\n    interpretationId,\n    initialFocus\n  })}`);\n};\nconst closeInterpretationModal = () => {\n  history.push(history.location.pathname);\n};\nconst InterpretationsPanel = _ref => {\n  let {\n    renderCount\n  } = _ref;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const interpretationsUnitRef = useRef();\n  const map = useSelector(state => state.map);\n  const interpretationId = useSelector(state => {\n    var _state$interpretation;\n    return (_state$interpretation = state.interpretation) === null || _state$interpretation === void 0 ? void 0 : _state$interpretation.id;\n  });\n  const onReplyIconClick = useCallback(interpretationId => {\n    openInterpretationModal(interpretationId, true);\n  }, []);\n  const {\n    initialFocus\n  } = getHashUrlParams(history.location);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Drawer, null, /*#__PURE__*/React.createElement(AboutAOUnit, {\n    type: \"map\",\n    id: map.id,\n    renderId: renderCount\n  }), /*#__PURE__*/React.createElement(InterpretationsUnit, {\n    ref: interpretationsUnitRef,\n    type: \"map\",\n    id: map.id,\n    currentUser: currentUser,\n    onInterpretationClick: openInterpretationModal,\n    onReplyIconClick: onReplyIconClick\n  })), interpretationId && /*#__PURE__*/React.createElement(InterpretationModal, {\n    currentUser: currentUser,\n    onInterpretationUpdate: () => interpretationsUnitRef.current.refresh(),\n    initialFocus: initialFocus,\n    interpretationId: interpretationId,\n    isVisualizationLoading: false,\n    onClose: closeInterpretationModal,\n    onResponsesReceived: Function.prototype // Required prop\n    ,\n    visualization: map,\n    pluginComponent: InterpretationMap\n  }));\n};\nInterpretationsPanel.propTypes = {\n  renderCount: PropTypes.number.isRequired\n};\nexport default InterpretationsPanel;","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { openInterpretationsPanel } from '../../actions/ui.js';\nimport InterpretationsPanel from './InterpretationsPanel.js';\nconst Interpretations = _ref => {\n  let {\n    renderCount\n  } = _ref;\n  const isMapLoaded = useSelector(state => state.map.id && !state.map.mapViews.find(layer => !layer.isLoaded));\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (isMapLoaded) {\n      dispatch(openInterpretationsPanel());\n    }\n  }, [isMapLoaded, dispatch]);\n  return isMapLoaded ? /*#__PURE__*/React.createElement(InterpretationsPanel, {\n    renderCount: renderCount\n  }) : null;\n};\nInterpretations.propTypes = {\n  renderCount: PropTypes.number.isRequired\n};\nexport default Interpretations;","// extracted by mini-css-extract-plugin\nexport default {\"periodSelect\":\"PeriodSelect_periodSelect__+hPnO\",\"select\":\"PeriodSelect_select__vspYN\",\"stepper\":\"PeriodSelect_stepper__Lpne3\"};","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Tooltip, IconChevronLeft24, IconChevronRight24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { getFixedPeriodsByType, filterFuturePeriods } from '../../util/periods.js';\nimport { getYear } from '../../util/time.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/PeriodSelect.module.css';\nclass PeriodSelect extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      year: null,\n      periods: null\n    });\n    _defineProperty(this, \"nextYear\", () => {\n      this.changeYear(1);\n    });\n    _defineProperty(this, \"previousYear\", () => {\n      this.changeYear(-1);\n    });\n    _defineProperty(this, \"changeYear\", change => {\n      const {\n        periodType\n      } = this.props;\n      const year = this.state.year + change;\n      this.setState({\n        year,\n        periods: getFixedPeriodsByType(periodType, year)\n      });\n    });\n  }\n  componentDidMount() {\n    this.setPeriods();\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      periodType,\n      period,\n      onChange\n    } = this.props;\n    const {\n      year,\n      periods\n    } = this.state;\n    if (periodType !== prevProps.periodType) {\n      this.setPeriods();\n    } else if (periods && !period) {\n      onChange(filterFuturePeriods(periods)[0] || periods[0]); // Autoselect most recent period\n    }\n\n    // Change period if year is changed (but keep period index)\n    if (period && prevState.periods && year !== prevState.year) {\n      const periodIndex = prevState.periods.findIndex(item => item.id === period.id);\n      onChange(periods[periodIndex]);\n    }\n  }\n  render() {\n    const {\n      periodType,\n      period,\n      onChange,\n      className,\n      errorText\n    } = this.props;\n    const {\n      periods\n    } = this.state;\n    if (!periods) {\n      return null;\n    }\n    const value = period && periods.some(p => p.id === period.id) ? period.id : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.periodSelect, className)\n    }, /*#__PURE__*/React.createElement(SelectField, {\n      label: i18n.t('Period'),\n      items: periods,\n      value: value,\n      onChange: onChange,\n      errorText: !value && errorText ? errorText : null,\n      className: styles.select,\n      dataTest: \"year-select\"\n    }), periodType && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.stepper\n    }, /*#__PURE__*/React.createElement(Tooltip, {\n      content: i18n.t('Previous year')\n    }, /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      icon: /*#__PURE__*/React.createElement(IconChevronLeft24, null),\n      onClick: this.previousYear,\n      dataTest: \"button-previous-year\"\n    })), /*#__PURE__*/React.createElement(Tooltip, {\n      content: i18n.t('Next year')\n    }, /*#__PURE__*/React.createElement(Button, {\n      secondary: true,\n      icon: /*#__PURE__*/React.createElement(IconChevronRight24, null),\n      onClick: this.nextYear,\n      dataTest: \"button-next-year\"\n    }))));\n  }\n  setPeriods() {\n    const {\n      periodType,\n      period\n    } = this.props;\n    const year = this.state.year || getYear(period && period.startDate);\n    let periods;\n    if (periodType) {\n      periods = getFixedPeriodsByType(periodType, year);\n    } else if (period) {\n      periods = [period]; // If period is loaded in favorite\n    }\n\n    this.setState({\n      periods,\n      year\n    });\n  }\n}\n_defineProperty(PeriodSelect, \"propTypes\", {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  period: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    startDate: PropTypes.string\n  }),\n  periodType: PropTypes.string\n});\nexport default PeriodSelect;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitData\":\"OrgUnitData_orgUnitData__ITQsf\",\"periodSelect\":\"OrgUnitData_periodSelect__dViFh\",\"dataTable\":\"OrgUnitData_dataTable__SLpmV\",\"loadingMask\":\"OrgUnitData_loadingMask__86WXT\",\"noData\":\"OrgUnitData_noData__uy7mH\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { getFixedPeriodsByType, filterFuturePeriods } from '../../util/periods.js';\nimport PeriodSelect from '../periods/PeriodSelect.js';\nimport styles from './styles/OrgUnitData.module.css';\nconst ORGUNIT_PROFILE_QUERY = {\n  profile: {\n    resource: 'organisationUnitProfile',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/data`;\n    },\n    params: _ref2 => {\n      let {\n        period\n      } = _ref2;\n      return {\n        period\n      };\n    }\n  }\n};\n\n// Only YEARLY period type is supported in first version\nconst periodType = 'YEARLY';\nconst currentYear = String(new Date().getFullYear());\nconst periods = getFixedPeriodsByType(periodType, currentYear);\nconst defaultPeriod = filterFuturePeriods(periods)[0] || periods[0];\n\n/*\n *  Displays a period selector and org unit data items\n * (data elements, indicators, reporting rates, program indicators)\n */\nconst OrgUnitData = _ref3 => {\n  let {\n    id\n  } = _ref3;\n  const [period, setPeriod] = useState(defaultPeriod);\n  const {\n    loading,\n    data,\n    refetch\n  } = useDataQuery(ORGUNIT_PROFILE_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (id && period) {\n      refetch({\n        id,\n        period: period.id\n      });\n    }\n  }, [id, period, refetch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitData,\n    \"data-test\": \"org-unit-data\"\n  }, /*#__PURE__*/React.createElement(PeriodSelect, {\n    label: null,\n    periodType: periodType,\n    period: period,\n    onChange: setPeriod,\n    className: styles.periodSelect\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dataTable\n  }, loading && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loadingMask\n  }, /*#__PURE__*/React.createElement(CircularLoader, null)), Array.isArray(data === null || data === void 0 ? void 0 : data.profile.dataItems) && data.profile.dataItems.length ? /*#__PURE__*/React.createElement(\"table\", {\n    \"data-test\": \"org-unit-data-table\"\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, data.profile.dataItems.map(_ref4 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref4;\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: id\n    }, /*#__PURE__*/React.createElement(\"th\", null, label), /*#__PURE__*/React.createElement(\"td\", null, value));\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.noData\n  }, i18n.t('No data found for this period.'))));\n};\nOrgUnitData.propTypes = {\n  id: PropTypes.string.isRequired\n};\nexport default OrgUnitData;","// extracted by mini-css-extract-plugin\nexport default {\"listItem\":\"ListItem_listItem__joSOw\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/ListItem.module.css';\n\n// Left aligned label (no wrap) and right align value of variable width\nconst ListItem = _ref => {\n  let {\n    label,\n    formatter,\n    children\n  } = _ref;\n  return children !== null && children !== undefined && children !== '' ? /*#__PURE__*/React.createElement(\"table\", {\n    className: styles.listItem\n  }, /*#__PURE__*/React.createElement(\"tbody\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, label), /*#__PURE__*/React.createElement(\"td\", null, formatter ? formatter(children) : children)))) : null;\n};\nListItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n  formatter: PropTypes.func\n};\nexport default ListItem;","// extracted by mini-css-extract-plugin\nexport default {\"info\":\"OrgUnitInfo_info__VLP7i\",\"level\":\"OrgUnitInfo_level__0H9j0\",\"desc\":\"OrgUnitInfo_desc__8tqdc\",\"list\":\"OrgUnitInfo_list__tFY1r\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconDimensionOrgUnit16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getRoundToPrecisionFn } from '../../util/numbers.js';\nimport { formatDate } from '../../util/time.js';\nimport ListItem from '../core/ListItem.js';\nimport styles from './styles/OrgUnitInfo.module.css';\nexport const coordFormat = getRoundToPrecisionFn(6); // Meter precision for longitude an latitude\n\n/*\n * Displays the fixed information for an org unit together with org unit groups (above) and metadata attributes (below)\n *\n * Available org unit info fields:\n * https://github.com/dhis2/dhis2-core/blob/master/dhis-2/dhis-services/dhis-service-reporting/src/main/java/org/hisp/dhis/orgunitprofile/OrgUnitInfo.java\n */\nconst OrgUnitInfo = _ref => {\n  let {\n    address,\n    attributes,\n    closedDate,\n    code,\n    comment,\n    contactPerson,\n    description,\n    email,\n    featureType,\n    groupSets,\n    id,\n    imageId,\n    latitude,\n    level,\n    levelName,\n    longitude,\n    name,\n    openingDate,\n    parentName,\n    phoneNumber,\n    shortName,\n    url\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.info,\n    \"data-test\": \"org-unit-info\"\n  }, imageId && /*#__PURE__*/React.createElement(\"img\", {\n    src: `${baseUrl}/api/fileResources/${imageId}/data`,\n    alt: i18n.t('Image of the organisation unit')\n  }), name && /*#__PURE__*/React.createElement(\"h3\", null, name), (level || levelName) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.level\n  }, /*#__PURE__*/React.createElement(IconDimensionOrgUnit16, null), i18n.t('Level'), \":\", ' ', levelName ? `${levelName}${level ? ` (${level})` : ''}` : level), parentName && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.level\n  }, /*#__PURE__*/React.createElement(IconDimensionOrgUnit16, null), i18n.t('Parent'), \": \", parentName), description && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.desc\n  }, description), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list\n  }, groupSets.map(_ref2 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: id,\n      label: label\n    }, value);\n  }), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Code')\n  }, code), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Short name')\n  }, shortName), featureType === 'POINT' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Opening date'),\n    formatter: formatDate\n  }, openingDate), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Closed date'),\n    formatter: formatDate\n  }, closedDate)), url && /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('URL')\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: url,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, i18n.t('Link'))), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Contact')\n  }, contactPerson), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Email')\n  }, email), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Address')\n  }, address), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Phone')\n  }, phoneNumber), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Longitude'),\n    formatter: coordFormat\n  }, longitude), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Latitude'),\n    formatter: coordFormat\n  }, latitude), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('ID')\n  }, id), /*#__PURE__*/React.createElement(ListItem, {\n    label: i18n.t('Comment')\n  }, comment), attributes.map(_ref3 => {\n    let {\n      id,\n      label,\n      value\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: id,\n      label: label\n    }, value);\n  })));\n};\nOrgUnitInfo.propTypes = {\n  attributes: PropTypes.array.isRequired,\n  groupSets: PropTypes.array.isRequired,\n  id: PropTypes.string.isRequired,\n  address: PropTypes.string,\n  closedDate: PropTypes.string,\n  code: PropTypes.string,\n  comment: PropTypes.string,\n  contactPerson: PropTypes.string,\n  description: PropTypes.string,\n  email: PropTypes.string,\n  featureType: PropTypes.string,\n  imageId: PropTypes.string,\n  latitude: PropTypes.number,\n  level: PropTypes.number,\n  levelName: PropTypes.string,\n  longitude: PropTypes.number,\n  name: PropTypes.string,\n  openingDate: PropTypes.string,\n  parentName: PropTypes.string,\n  phoneNumber: PropTypes.string,\n  shortName: PropTypes.string,\n  url: PropTypes.string\n};\nexport default OrgUnitInfo;","// extracted by mini-css-extract-plugin\nexport default {\"drawer\":\"OrgUnitProfile_drawer__9OzQ+\",\"header\":\"OrgUnitProfile_header__Iohmm\",\"close\":\"OrgUnitProfile_close__zrxvA\",\"content\":\"OrgUnitProfile_content__vagrs\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, IconCross24 } from '@dhis2/ui';\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { closeOrgUnitProfile } from '../../actions/orgUnits.js';\nimport Drawer from '../core/Drawer.js';\nimport OrgUnitData from './OrgUnitData.js';\nimport OrgUnitInfo from './OrgUnitInfo.js';\nimport styles from './styles/OrgUnitProfile.module.css';\nconst ORGUNIT_PROFILE_QUERY = {\n  profile: {\n    resource: 'organisationUnitProfile',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/data`;\n    }\n  }\n};\n\n/*\n *  Loads an org unit profile and displays it in a right drawer component\n */\nconst OrgUnitProfile = () => {\n  const id = useSelector(state => state.orgUnitProfile);\n  const dispatch = useDispatch();\n  const {\n    loading,\n    data,\n    refetch\n  } = useDataQuery(ORGUNIT_PROFILE_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (id) {\n      refetch({\n        id\n      });\n    }\n  }, [id, refetch]);\n  if (!id) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Drawer, {\n    className: styles.drawer,\n    dataTest: \"org-unit-profile\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.header\n  }, i18n.t('Organisation unit profile'), /*#__PURE__*/React.createElement(\"span\", {\n    role: \"button\",\n    \"aria-label\": i18n.t('Close'),\n    className: styles.close,\n    onClick: () => dispatch(closeOrgUnitProfile())\n  }, /*#__PURE__*/React.createElement(IconCross24, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, loading && /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)), !loading && (data === null || data === void 0 ? void 0 : data.profile) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(OrgUnitInfo, _extends({}, data.profile.info, {\n    groupSets: data.profile.groupSets,\n    attributes: data.profile.attributes\n  })), /*#__PURE__*/React.createElement(OrgUnitData, {\n    id: id\n  }))));\n};\nexport default OrgUnitProfile;","// extracted by mini-css-extract-plugin\nexport default {\"detailsPanel\":\"DetailsPanel_detailsPanel__xkQzH\",\"collapsed\":\"DetailsPanel_collapsed__WdZAy\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport FeatureProfile from '../feature/FeatureProfile.js';\nimport Interpretations from '../interpretations/Interpretations.js';\nimport OrgUnitProfile from '../orgunits/OrgUnitProfile.js';\nimport styles from './styles/DetailsPanel.module.css';\nconst DetailsPanel = _ref => {\n  let {\n    interpretationsRenderCount\n  } = _ref;\n  const detailsPanelOpen = useSelector(state => state.ui.rightPanelOpen);\n  const viewOrgUnitProfile = useSelector(state => state.orgUnitProfile);\n  const viewFeatureProfile = useSelector(state => !!state.featureProfile);\n  const interpretationId = useSelector(state => {\n    var _state$interpretation;\n    return (_state$interpretation = state.interpretation) === null || _state$interpretation === void 0 ? void 0 : _state$interpretation.id;\n  });\n  const getContent = () => {\n    if (interpretationId || detailsPanelOpen && !viewOrgUnitProfile && !viewFeatureProfile) {\n      return /*#__PURE__*/React.createElement(Interpretations, {\n        renderCount: interpretationsRenderCount\n      });\n    }\n    if (detailsPanelOpen) {\n      if (viewOrgUnitProfile) {\n        return /*#__PURE__*/React.createElement(OrgUnitProfile, null);\n      }\n      if (viewFeatureProfile) {\n        return /*#__PURE__*/React.createElement(FeatureProfile, null);\n      }\n    }\n    return null;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"details-panel\",\n    className: cx(styles.detailsPanel, {\n      [styles.collapsed]: !detailsPanelOpen\n    })\n  }, getContent());\n};\nDetailsPanel.propTypes = {\n  interpretationsRenderCount: PropTypes.number.isRequired\n};\nexport default DetailsPanel;","import { useAlerts } from '@dhis2/app-service-alerts';\nimport { AlertStack as UiAlertStack, AlertBar } from '@dhis2/ui';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clearAlerts } from '../../actions/map.js';\nimport { getMapAlerts } from '../../util/alerts.js';\nconst DEFAULT_DURATION = 6000;\nconst AlertStack = () => {\n  const alerts = useAlerts();\n  const mapAlerts = useSelector(state => getMapAlerts(state.map));\n  const dispatch = useDispatch();\n  const clearMapAlerts = useCallback(() => {\n    dispatch(clearAlerts());\n  }, [dispatch]);\n  return alerts.length || mapAlerts.length ? /*#__PURE__*/React.createElement(UiAlertStack, null, alerts.map((_ref, index) => {\n    let {\n      message,\n      options,\n      remove\n    } = _ref;\n    return /*#__PURE__*/React.createElement(AlertBar, {\n      key: `appalert-${index}`,\n      success: options.success,\n      warning: options.warning,\n      critical: options.critical,\n      duration: options.duration || DEFAULT_DURATION,\n      onHidden: remove\n    }, message);\n  }).concat(mapAlerts.map((_ref2, index) => {\n    let {\n      message,\n      success,\n      warning,\n      critical,\n      duration\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(AlertBar, {\n      key: `mapalert-${index}`,\n      success: success,\n      warning: warning,\n      critical: critical,\n      duration: duration || DEFAULT_DURATION,\n      onHidden: clearMapAlerts\n    }, message);\n  }))) : null;\n};\nexport default AlertStack;","// Returns array of all alerts from map config and layers (mapViews)\nexport const getMapAlerts = mapConfig => [].concat(...(mapConfig && mapConfig.alerts ? mapConfig.alerts : [])).concat(...(mapConfig && mapConfig.mapViews && mapConfig.mapViews.filter(layer => layer.alerts).map(layer => layer.alerts)));","import { useDataEngine } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useState, useEffect, createContext } from 'react';\n\n// Fetches the root org units associated with the current user with fallback to data capture org units\nconst ORG_UNITS_QUERY = {\n  roots: {\n    resource: 'organisationUnits',\n    params: () => ({\n      fields: ['id', 'displayName~rename(name)', 'path'],\n      userDataViewFallback: true\n    })\n  },\n  levels: {\n    resource: 'organisationUnitLevels',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'level'],\n      order: 'level:asc',\n      paging: false\n    }\n  }\n};\nexport const OrgUnitsCtx = /*#__PURE__*/createContext({});\nconst OrgUnitsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [orgUnits, setOrgUnits] = useState();\n  const [error, setError] = useState();\n  const engine = useDataEngine();\n  useEffect(() => {\n    engine.query(ORG_UNITS_QUERY, {\n      onComplete: _ref2 => {\n        let {\n          levels,\n          roots\n        } = _ref2;\n        return setOrgUnits({\n          levels: levels.organisationUnitLevels,\n          roots: roots.organisationUnits\n        });\n      },\n      onError: setError\n    });\n  }, [engine]);\n  return /*#__PURE__*/React.createElement(OrgUnitsCtx.Provider, {\n    value: {\n      ...orgUnits,\n      loading: !orgUnits && !error,\n      error\n    }\n  }, children);\n};\nOrgUnitsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default OrgUnitsProvider;\nexport const useOrgUnits = () => useContext(OrgUnitsCtx);","import * as types from '../constants/actionTypes.js';\n\n// Add dimension filter\nexport const addDimensionFilter = filter => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_ADD,\n  filter\n});\n\n// Remove dimension filter\nexport const removeDimensionFilter = index => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_REMOVE,\n  index\n});\n\n// Chenge a dimension filter in an array\nexport const changeDimensionFilter = (index, filter) => ({\n  type: types.LAYER_EDIT_DIMENSION_FILTER_CHANGE,\n  index,\n  filter\n});\n\n// Add event filter\nexport const addFilter = filter => ({\n  type: types.LAYER_EDIT_FILTER_ADD,\n  filter\n});\n\n// Remove event filter\nexport const removeFilter = index => ({\n  type: types.LAYER_EDIT_FILTER_REMOVE,\n  index\n});\n\n// Change event filter\nexport const changeFilter = (index, filter) => ({\n  type: types.LAYER_EDIT_FILTER_CHANGE,\n  index,\n  filter\n});\n\n// Set program used (event and thematic)\nexport const setProgram = program => ({\n  type: types.LAYER_EDIT_PROGRAM_SET,\n  program\n});\n\n// Set program stage used (event)\nexport const setProgramStage = programStage => ({\n  type: types.LAYER_EDIT_PROGRAM_STAGE_SET,\n  programStage\n});\n\n// Set data item (thematic)\nexport const setDataItem = (dataItem, dimension) => ({\n  type: types.LAYER_EDIT_DATA_ITEM_SET,\n  dataItem,\n  dimension\n});\n\n// Set program indicator used (thematic)\nexport const setDataElementGroup = dataElementGroup => ({\n  type: types.LAYER_EDIT_DATA_ELEMENT_GROUP_SET,\n  dataElementGroup\n});\n\n// Set data element operand (operand = true = details, operand = false = totals)\nexport const setOperand = operand => ({\n  type: types.LAYER_EDIT_OPERAND_SET,\n  operand\n});\n\n// Set data element used for styling (event)\nexport const setStyleDataItem = dataItem => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_SET,\n  dataItem\n});\n\n// Set options for style data element with option set (options are loaded separately) (event layer)\nexport const setOptionStyle = options => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET,\n  options\n});\nexport const setBooleanStyle = (value, color) => ({\n  type: types.LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET,\n  value,\n  color\n});\n\n// Set thematic map type (choropleth, bubble map)\nexport const setThematicMapType = type => ({\n  type: types.LAYER_EDIT_THEMATIC_MAP_TYPE_SET,\n  payload: type\n});\n\n// Set classification style (method, classes, colorScale)\nexport const setClassification = method => ({\n  type: types.LAYER_EDIT_CLASSIFICATION_SET,\n  method\n});\nexport const setColorScale = colorScale => ({\n  type: types.LAYER_EDIT_COLOR_SCALE_SET,\n  colorScale\n});\n\n// Set event status\nexport const setEventStatus = status => ({\n  type: types.LAYER_EDIT_EVENT_STATUS_SET,\n  status\n});\n\n// Set coordinate field\nexport const setEventCoordinateField = fieldId => ({\n  type: types.LAYER_EDIT_EVENT_COORDINATE_FIELD_SET,\n  fieldId\n});\n\n// Set fallback coordinate field\nexport const setFallbackCoordinateField = fieldId => ({\n  type: types.LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET,\n  fieldId\n});\n\n// Set if event clustering should be used (event)\nexport const setEventClustering = checked => ({\n  type: types.LAYER_EDIT_EVENT_CLUSTERING_SET,\n  checked\n});\n\n// Set event point radius (event layer)\nexport const setEventPointRadius = radius => ({\n  type: types.LAYER_EDIT_EVENT_POINT_RADIUS_SET,\n  radius\n});\n\n// Set event point color (event layer)\nexport const setEventPointColor = color => ({\n  type: types.LAYER_EDIT_EVENT_POINT_COLOR_SET,\n  color\n});\nexport const setRelatedPointColor = color => ({\n  type: types.LAYER_EDIT_RELATED_POINT_COLOR_SET,\n  color\n});\nexport const setRelatedPointRadius = radius => ({\n  type: types.LAYER_EDIT_RELATED_POINT_RADIUS_SET,\n  radius\n});\nexport const setRelationshipLineColor = color => ({\n  type: types.LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET,\n  color\n});\n\n// Set organisation unit group set (facility and org unit layer)\nexport const setOrganisationUnitGroupSet = organisationUnitGroupSet => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET,\n  organisationUnitGroupSet\n});\n\n// Set organisation unit color (org unit and facility layer)\nexport const setOrganisationUnitColor = color => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET,\n  color\n});\nexport const setOrganisationUnitField = payload => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET,\n  payload\n});\n\n// Set period label (earth engine)\nexport const setPeriodName = periodName => ({\n  type: types.LAYER_EDIT_PERIOD_NAME_SET,\n  periodName\n});\n\n// Set period type (thematic)\nexport const setPeriodType = function (periodType) {\n  let clearPeriod = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return {\n    type: types.LAYER_EDIT_PERIOD_TYPE_SET,\n    periodType,\n    clearPeriod\n  };\n};\n\n// Set period (event & thematic)\nexport const setPeriod = period => ({\n  type: types.LAYER_EDIT_PERIOD_SET,\n  period\n});\n\n// Set start date (event)\nexport const setStartDate = startDate => ({\n  type: types.LAYER_EDIT_START_DATE_SET,\n  startDate\n});\n\n// Set end date (event)\nexport const setEndDate = endDate => ({\n  type: types.LAYER_EDIT_END_DATE_SET,\n  endDate\n});\n\n// Set value type (thematic)\nexport const setValueType = (valueType, keepColumns) => ({\n  type: types.LAYER_EDIT_VALUE_TYPE_SET,\n  valueType,\n  keepColumns // Kept if favorite is loaded\n});\n\n// Set indicator group (thematic)\nexport const setIndicatorGroup = indicatorGroup => ({\n  type: types.LAYER_EDIT_INDICATOR_GROUP_SET,\n  indicatorGroup\n});\n\n// Set aggregation type (thematic/earth engine)\nexport const setAggregationType = aggregationType => ({\n  type: types.LAYER_EDIT_AGGREGATION_TYPE_SET,\n  aggregationType\n});\n\n// Set organisation units\nexport const setOrgUnits = payload => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNITS_SET,\n  payload\n});\n\n// Set org. unit mode\nexport const setOrgUnitMode = mode => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_MODE_SET,\n  payload: mode\n});\n\n// Set layer params (EE)\nexport const setParams = params => ({\n  type: types.LAYER_EDIT_PARAMS_SET,\n  payload: params\n});\n\n// Set collection filter (EE)\nexport const setFilter = filter => ({\n  type: types.LAYER_EDIT_FILTER_SET,\n  filter\n});\n\n// Set band (EE)\nexport const setBand = band => ({\n  type: types.LAYER_EDIT_BAND_SET,\n  payload: band\n});\n\n// Set label visibility\nexport const setLabels = isChecked => ({\n  type: types.LAYER_EDIT_LABELS_SET,\n  isChecked\n});\nexport const setLabelTemplate = template => ({\n  type: types.LAYER_EDIT_LABEL_TEMPLATE,\n  template\n});\n\n// Set label font style (italic)\nexport const setLabelFontSize = size => ({\n  type: types.LAYER_EDIT_LABEL_FONT_SIZE_SET,\n  size\n});\n\n// Set label font weight (bold)\nexport const setLabelFontWeight = weight => ({\n  type: types.LAYER_EDIT_LABEL_FONT_WEIGHT_SET,\n  weight\n});\n\n// Set label font style\nexport const setLabelFontStyle = style => ({\n  type: types.LAYER_EDIT_LABEL_FONT_STYLE_SET,\n  style\n});\n\n// Set label font color\nexport const setLabelFontColor = color => ({\n  type: types.LAYER_EDIT_LABEL_FONT_COLOR_SET,\n  color\n});\n\n// Set area radius (facility)\nexport const setBufferRadius = radius => ({\n  type: types.LAYER_EDIT_BUFFER_RADIUS_SET,\n  radius\n});\n\n// Set point radius low (thematic, org unit)\nexport const setRadiusLow = radius => ({\n  type: types.LAYER_EDIT_RADIUS_LOW_SET,\n  radius\n});\n\n// Set point radius high (thematic)\nexport const setRadiusHigh = radius => ({\n  type: types.LAYER_EDIT_RADIUS_HIGH_SET,\n  radius\n});\n\n// Set legend set (event, thematic)\nexport const setLegendSet = legendSet => ({\n  type: types.LAYER_EDIT_LEGEND_SET_SET,\n  legendSet\n});\n\n// Load organisation unit tree path (temporary solution, as favorites don't include paths)\nexport const setOrgUnitPath = (id, path) => ({\n  type: types.LAYER_EDIT_ORGANISATION_UNIT_PATH_SET,\n  id,\n  path\n});\n\n// Set the tracked entity type\nexport const setTrackedEntityType = trackedEntityType => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_TYPE_SET,\n  trackedEntityType\n});\n\n// Set the type of tracked entity relationship to render\nexport const setTrackedEntityRelationshipType = relationshipType => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET,\n  relationshipType\n});\nexport const setTrackedEntityRelationshipOutsideProgram = checked => ({\n  type: types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET,\n  payload: checked\n});\n\n// Set program status for a TEI\nexport const setProgramStatus = status => ({\n  type: types.LAYER_EDIT_PROGRAM_STATUS_SET,\n  payload: status\n});\n\n// Set follow up status of a TEI for a given program\nexport const setFollowUpStatus = checked => ({\n  type: types.LAYER_EDIT_FOLLOW_UP_SET,\n  payload: checked\n});\n\n// Set display mode for periods\nexport const setRenderingStrategy = display => ({\n  type: types.LAYER_EDIT_RENDERING_STRATEGY_SET,\n  payload: display\n});\n\n// Set no data color\nexport const setNoDataColor = color => ({\n  type: types.LAYER_EDIT_NO_DATA_COLOR_SET,\n  payload: color\n});\n\n// Set feature style\nexport const setFeatureStyle = payload => ({\n  type: types.LAYER_EDIT_FEATURE_STYLE_SET,\n  payload\n});","// extracted by mini-css-extract-plugin\nexport default {\"geometryField\":\"AssociatedGeometrySelect_geometryField__v81Df\",\"geometryDescription\":\"AssociatedGeometrySelect_geometryDescription__cOr4n\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrganisationUnitField } from '../../actions/layerEdit.js';\nimport { NONE } from '../../constants/layers.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/AssociatedGeometrySelect.module.css';\nconst AssociatedGeometrySelect = () => {\n  const geometryField = useSelector(state => state.layerEdit.orgUnitField);\n  const [attributes, setAttributes] = useState([]);\n  const dispatch = useDispatch();\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        fetchedAttributes\n      } = await engine.query({\n        fetchedAttributes: {\n          resource: '/attributes.json?fields=id,name,description&filter=valueType:eq:GEOJSON&filter=organisationUnitAttribute:eq:true'\n        }\n      });\n      setAttributes(fetchedAttributes.attributes);\n    }\n    fetchData();\n  }, [engine]);\n  if (!attributes.length) {\n    return null;\n  }\n  const attribute = attributes.find(a => a.id === geometryField);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.geometryField\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    prefix: i18n.t('Use associated geometry'),\n    items: [{\n      id: NONE,\n      name: i18n.t('None (default)')\n    }, ...attributes],\n    value: geometryField || NONE,\n    onChange: val => dispatch(setOrganisationUnitField(val)),\n    \"data-test\": \"orgunitfieldselect\"\n  }), (attribute === null || attribute === void 0 ? void 0 : attribute.description) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.geometryDescription\n  }, attribute.description));\n};\nexport default AssociatedGeometrySelect;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitSelectMode\":\"OrgUnitSelectMode_orgUnitSelectMode__T7yqh\",\"selectField\":\"OrgUnitSelectMode_selectField__StkPV\"};","import i18n from '@dhis2/d2-i18n';\nimport React, { useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrgUnitMode } from '../../actions/layerEdit.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/OrgUnitSelectMode.module.css';\nconst OrgUnitSelectMode = () => {\n  const organisationUnitSelectionMode = useSelector(state => state.layerEdit.organisationUnitSelectionMode);\n  const dispatch = useDispatch();\n  const items = useMemo(() => [{\n    id: 'SELECTED',\n    name: i18n.t('Selected only')\n  }, {\n    id: 'CHILDREN',\n    name: i18n.t('Selected and below')\n  }, {\n    id: 'DESCENDANTS',\n    name: i18n.t('Selected and all below')\n  }], []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitSelectMode\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    prefix: i18n.t('Selection mode'),\n    items: items,\n    value: organisationUnitSelectionMode || 'SELECTED',\n    onChange: mode => dispatch(setOrgUnitMode(mode.id)),\n    className: styles.selectField\n  }));\n};\nOrgUnitSelectMode.propTypes = {};\nexport default OrgUnitSelectMode;","// extracted by mini-css-extract-plugin\nexport default {\"orgUnitSelect\":\"OrgUnitSelect_orgUnitSelect__TMlTS\",\"two\":\"OrgUnitSelect_two__sXMjW\",\"one\":\"OrgUnitSelect_one__Q4dms\",\"none\":\"OrgUnitSelect_none__eXtbq\",\"loader\":\"OrgUnitSelect_loader__xfr0j\"};","import { OrgUnitDimension } from '@dhis2/analytics';\nimport { CenteredContent, CircularLoader, Help } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setOrgUnits } from '../../actions/layerEdit.js';\nimport { translateOrgUnitLevels } from '../../util/orgUnits.js';\nimport { useOrgUnits } from '../OrgUnitsProvider.js';\nimport AssociatedGeometrySelect from './AssociatedGeometrySelect.js';\nimport OrgUnitSelectMode from './OrgUnitSelectMode.js';\nimport styles from './styles/OrgUnitSelect.module.css';\nconst TWO_OTHER_SELECTS = 'two';\nconst ONE_OTHER_SELECT = 'one';\nconst NO_OTHER_SELECTS = 'none';\nconst OrgUnitSelect = _ref => {\n  let {\n    hideUserOrgUnits = false,\n    hideAssociatedGeometry = false,\n    hideSelectMode = true,\n    hideLevelSelect = false,\n    hideGroupSelect = false,\n    warning\n  } = _ref;\n  const {\n    roots,\n    levels,\n    loading,\n    error\n  } = useOrgUnits();\n  const rows = useSelector(state => state.layerEdit.rows);\n  const dispatch = useDispatch();\n  const setOrgUnitItems = useCallback(_ref2 => {\n    let {\n      items\n    } = _ref2;\n    return dispatch(setOrgUnits({\n      dimension: 'ou',\n      items\n    }));\n  }, [dispatch]);\n  const orgUnits = translateOrgUnitLevels(rows === null || rows === void 0 ? void 0 : rows.find(r => r.dimension === 'ou'), levels);\n  const hasOrgUnits = !!orgUnits.length;\n  if (error !== null && error !== void 0 && error.message) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.orgUnitSelect\n    }, /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, error.message));\n  } else if (loading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.loader\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  const numOtherSelects = !hideAssociatedGeometry && !hideSelectMode ? TWO_OTHER_SELECTS : !hideAssociatedGeometry || !hideSelectMode ? ONE_OTHER_SELECT : NO_OTHER_SELECTS;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.orgUnitSelect,\n    \"data-test\": \"org-unit-select\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx({\n      [styles.two]: numOtherSelects === TWO_OTHER_SELECTS,\n      [styles.one]: numOtherSelects === ONE_OTHER_SELECT,\n      [styles.none]: numOtherSelects === NO_OTHER_SELECTS\n    })\n  }, /*#__PURE__*/React.createElement(OrgUnitDimension, {\n    roots: roots === null || roots === void 0 ? void 0 : roots.map(r => r.id),\n    selected: orgUnits,\n    onSelect: setOrgUnitItems,\n    hideUserOrgUnits: hideUserOrgUnits,\n    hideLevelSelect: hideLevelSelect,\n    hideGroupSelect: hideGroupSelect,\n    warning: !hasOrgUnits ? warning : null\n  })), !hideAssociatedGeometry && /*#__PURE__*/React.createElement(AssociatedGeometrySelect, null), !hideSelectMode && /*#__PURE__*/React.createElement(OrgUnitSelectMode, null));\n};\nOrgUnitSelect.propTypes = {\n  hideAssociatedGeometry: PropTypes.bool,\n  hideGroupSelect: PropTypes.bool,\n  hideLevelSelect: PropTypes.bool,\n  hideSelectMode: PropTypes.bool,\n  hideUserOrgUnits: PropTypes.bool,\n  warning: PropTypes.string\n};\nexport default OrgUnitSelect;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"LayerDialog_content__yOwhz\",\"select\":\"LayerDialog_select__H+aQO\",\"periodSelect\":\"LayerDialog_periodSelect__Lu3bu\",\"tabContent\":\"LayerDialog_tabContent__YB2EL\",\"flexColumnFlow\":\"LayerDialog_flexColumnFlow__MxiUL\",\"flexRowFlow\":\"LayerDialog_flexRowFlow__rzZm6\",\"flexColumn\":\"LayerDialog_flexColumn__U-zxX\",\"flexInnerColumnFlow\":\"LayerDialog_flexInnerColumnFlow__NlPmr\",\"flexInnerColumn\":\"LayerDialog_flexInnerColumn__rp2dZ\",\"singleColumn\":\"LayerDialog_singleColumn__9aH-s\",\"header\":\"LayerDialog_header__wWtIV LayerDialog_flexInnerColumnFlow__NlPmr\",\"paragraph\":\"LayerDialog_paragraph__5ylxD\",\"notice\":\"LayerDialog_notice__NqDBr\",\"error\":\"LayerDialog_error__X8IM+\",\"indent\":\"LayerDialog_indent__SOwnw\",\"orgUnitTree\":\"LayerDialog_orgUnitTree__mz+A8 LayerDialog_flexColumn__U-zxX\",\"checkboxInline\":\"LayerDialog_checkboxInline__+o-r3\",\"fontInline\":\"LayerDialog_fontInline__pjIQS\",\"numberField\":\"LayerDialog_numberField__xao0N LayerDialog_flexInnerColumn__rp2dZ\",\"checkbox\":\"LayerDialog_checkbox__Q+Bjn\",\"teiCheckbox\":\"LayerDialog_teiCheckbox__gydpM\",\"marginBottom\":\"LayerDialog_marginBottom__eDy3G\",\"narrowField\":\"LayerDialog_narrowField__8zheb\",\"narrowFieldIcon\":\"LayerDialog_narrowFieldIcon__tnbg+\",\"eeFlexFull\":\"LayerDialog_eeFlexFull__RVO9s\",\"legend\":\"LayerDialog_legend__2dtDS Legend_legend__b62xP\",\"legendTitle\":\"LayerDialog_legendTitle__QpOGC\",\"scale\":\"LayerDialog_scale__XqTMm\",\"eeError\":\"LayerDialog_eeError__cyeZB\",\"eeNotice\":\"LayerDialog_eeNotice__8G1Xx\",\"labelDisplayOptions\":\"LayerDialog_labelDisplayOptions__F3Rt9\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setAggregationType } from '../../../actions/layerEdit.js';\nimport { getEarthEngineAggregationTypes, getEarthEngineStatisticTypes } from '../../../constants/aggregationTypes.js';\nimport { hasClasses } from '../../../util/earthEngine.js';\nimport { SelectField } from '../../core/index.js';\nconst AggregationSelect = _ref => {\n  let {\n    aggregations,\n    defaultAggregations,\n    aggregationType,\n    setAggregationType\n  } = _ref;\n  const classes = hasClasses(defaultAggregations);\n  const types = classes ? getEarthEngineStatisticTypes() : getEarthEngineAggregationTypes(aggregations);\n  useEffect(() => {\n    if (!aggregationType && defaultAggregations) {\n      setAggregationType(defaultAggregations);\n    }\n  }, [aggregationType, defaultAggregations, setAggregationType]);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Aggregation method'),\n    items: types,\n    multiple: !classes,\n    value: aggregationType,\n    onChange: type => setAggregationType(classes ? type.id : type)\n  });\n};\nAggregationSelect.propTypes = {\n  setAggregationType: PropTypes.func.isRequired,\n  aggregationType: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  aggregations: PropTypes.array,\n  defaultAggregations: PropTypes.oneOfType([PropTypes.string, PropTypes.array])\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    aggregations: layerEdit.aggregations,\n    defaultAggregations: layerEdit.defaultAggregations,\n    aggregationType: layerEdit.aggregationType\n  };\n}, {\n  setAggregationType\n})(AggregationSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setBand } from '../../../actions/layerEdit.js';\nimport { SelectField } from '../../core/index.js';\nconst BandSelect = _ref => {\n  let {\n    band = [],\n    bands,\n    setBand,\n    errorText\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Groups'),\n    items: bands,\n    multiple: true,\n    value: band,\n    onChange: setBand,\n    errorText: errorText\n  });\n};\nBandSelect.propTypes = {\n  bands: PropTypes.array.isRequired,\n  setBand: PropTypes.func.isRequired,\n  band: PropTypes.array,\n  errorText: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    band: layerEdit.band,\n    bands: layerEdit.bands\n  };\n}, {\n  setBand\n})(BandSelect);","// extracted by mini-css-extract-plugin\nexport default {\"periodSelect\":\"PeriodSelect_periodSelect__3wn47\",\"year\":\"PeriodSelect_year__Mw4c0\",\"period\":\"PeriodSelect_period__EU6E+\",\"loading\":\"PeriodSelect_loading__5jmo+\"};","import i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { SelectField } from '../../core/index.js';\nimport styles from './styles/PeriodSelect.module.css';\n\n// http://localhost:8080/api/periodTypes.json\nconst EarthEnginePeriodSelect = _ref => {\n  let {\n    periodType,\n    period,\n    periods,\n    onChange,\n    errorText,\n    className\n  } = _ref;\n  const [year, setYear] = useState();\n  const byYear = periodType === 'Custom';\n  const years = useMemo(() => byYear && periods ? [...new Set(periods.map(p => p.year))].map(year => ({\n    id: year,\n    name: String(year)\n  })) : null, [byYear, periods]);\n  const byYearPeriods = useMemo(() => byYear && year && periods ? periods.filter(p => p.year === year) : null, [byYear, year, periods]);\n  const onYearChange = useCallback(_ref2 => {\n    let {\n      id\n    } = _ref2;\n    onChange(null);\n    setYear(id);\n  }, [onChange]);\n  useEffect(() => {\n    if (byYear && period) {\n      setYear(period.year);\n    }\n  }, [byYear, period]);\n  const items = byYear ? byYearPeriods : periods;\n  return items ? /*#__PURE__*/React.createElement(\"div\", {\n    className: className\n  }, byYear && /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Year'),\n    items: years,\n    value: year,\n    onChange: onYearChange,\n    className: styles.year\n  }), /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period'),\n    loading: !periods,\n    items: items,\n    value: items && period && period.id,\n    onChange: onChange,\n    helpText: i18n.t('Available periods are set by the source data'),\n    errorText: !period && errorText ? errorText : null,\n    className: styles.period\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.loading\n  }, /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }), i18n.t('Loading periods'));\n};\nEarthEnginePeriodSelect.propTypes = {\n  periodType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  period: PropTypes.object,\n  periods: PropTypes.oneOfType([PropTypes.array, PropTypes.object])\n};\nexport default EarthEnginePeriodSelect;","// extracted by mini-css-extract-plugin\nexport default {\"buffer\":\"BufferRadius_buffer__y-0RL\",\"numberField\":\"BufferRadius_numberField__leghw\",\"info\":\"BufferRadius_info__fNRZ1\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setBufferRadius } from '../../../actions/layerEdit.js';\nimport Checkbox from '../../core/Checkbox.js';\nimport NumberField from '../../core/NumberField.js';\nimport styles from './styles/BufferRadius.module.css';\n\n// Component to set buffer radius (checkbox toggle and number field)\n// radius will be undefined when a layer dialog is opened (can be used to set default value)\n// it will be null when the checkbox is unchecked\n// it will be empty string when the value is deleted\n// it will have a number value when a buffer is typed, or a default set\nconst BufferRadius = _ref => {\n  let {\n    radius,\n    defaultRadius = 1000,\n    hasOrgUnitField,\n    disabled,\n    className,\n    setBufferRadius\n  } = _ref;\n  const showBuffer = radius !== undefined && radius !== null;\n  const isDisabled = disabled || hasOrgUnitField;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.buffer, className)\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Buffer'),\n    checked: showBuffer,\n    disabled: isDisabled,\n    onChange: isChecked => setBufferRadius(isChecked ? radius || defaultRadius : null)\n  }), showBuffer && /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Radius in meters'),\n    value: Number.isInteger(radius) ? radius : '',\n    disabled: isDisabled,\n    onChange: value => setBufferRadius(value !== '' ? parseInt(value, 10) : ''),\n    min: 0,\n    className: styles.numberField\n  }), hasOrgUnitField && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.info\n  }, i18n.t(\"Buffer can't be combined with associated geometry.\")));\n};\nBufferRadius.propTypes = {\n  setBufferRadius: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  defaultRadius: PropTypes.number,\n  disabled: PropTypes.bool,\n  hasOrgUnitField: PropTypes.bool,\n  radius: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    radius: layerEdit.areaRadius\n  };\n}, {\n  setBufferRadius\n})(BufferRadius);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { createLegend } from '../../../loaders/earthEngineLoader.js';\nimport LegendItem from '../../legend/LegendItem.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst paramsAreValid = _ref => {\n  let {\n    min,\n    max\n  } = _ref;\n  return !Number.isNaN(min) && !Number.isNaN(max) && max > min;\n};\nconst LegendPreview = _ref2 => {\n  let {\n    params\n  } = _ref2;\n  const legend = paramsAreValid(params) && createLegend(params);\n  return legend ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legendTitle\n  }, i18n.t('Legend preview')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.legend\n  }, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"tbody\", null, legend.map((item, index) => /*#__PURE__*/React.createElement(LegendItem, _extends({}, item, {\n    key: `item-${index}`\n  }))))))) : null;\n};\nLegendPreview.propTypes = {\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  })\n};\nexport default LegendPreview;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { setParams } from '../../../actions/layerEdit.js';\nimport { getColorScale, getColorPalette } from '../../../util/colors.js';\nimport { NumberField, ColorScaleSelect } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst minSteps = 3;\nconst maxSteps = 9;\nconst StyleSelect = _ref => {\n  let {\n    unit,\n    params,\n    setParams\n  } = _ref;\n  const {\n    min,\n    max,\n    palette\n  } = params;\n  const [steps, setSteps] = useState(palette.split(',').length);\n  const onStepsChange = useCallback(steps => {\n    if (steps >= minSteps && steps <= maxSteps) {\n      const scale = getColorScale(palette);\n      const newPalette = getColorPalette(scale, steps);\n      if (newPalette) {\n        setParams({\n          palette: newPalette\n        });\n      }\n    }\n    setSteps(steps);\n  }, [palette, setParams]);\n  let warningText;\n  if (Number.isNaN(min)) {\n    warningText = i18n.t('Min value is required');\n  } else if (Number.isNaN(max)) {\n    warningText = i18n.t('Max value is required');\n  } else if (max <= min) {\n    warningText = i18n.t('Max should be greater than min');\n  } else if (steps < minSteps || steps > maxSteps) {\n    warningText = i18n.t('Valid steps are {{minSteps}} to {{maxSteps}}', {\n      minSteps,\n      maxSteps\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Unit: {{ unit }}', {\n    unit,\n    nsSeparator: '|' // https://github.com/i18next/i18next/issues/361\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    key: \"minmax\",\n    className: styles.flexInnerColumnFlow\n  }, /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Min'),\n    value: min,\n    onChange: min => setParams({\n      min: parseInt(min)\n    }),\n    className: styles.flexInnerColumn\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Max'),\n    value: max,\n    onChange: max => setParams({\n      max: parseInt(max)\n    }),\n    className: styles.flexInnerColumn\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Steps'),\n    value: steps,\n    min: minSteps,\n    max: maxSteps,\n    onChange: onStepsChange,\n    className: styles.flexInnerColumn\n  }), warningText && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.eeError\n  }, warningText), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.scale\n  }, /*#__PURE__*/React.createElement(ColorScaleSelect, {\n    palette: params.palette,\n    onChange: palette => setParams({\n      palette\n    }),\n    width: 260\n  }))));\n};\nStyleSelect.propTypes = {\n  setParams: PropTypes.func.isRequired,\n  unit: PropTypes.string.isRequired,\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  })\n};\nexport default connect(null, {\n  setParams\n})(StyleSelect);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { EE_BUFFER } from '../../../constants/layers.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport LegendPreview from './LegendPreview.js';\nimport StyleSelect from './StyleSelect.js';\nconst StyleTab = _ref => {\n  let {\n    unit,\n    params,\n    hasOrgUnitField\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, params && /*#__PURE__*/React.createElement(StyleSelect, {\n    unit: unit,\n    params: params\n  }), /*#__PURE__*/React.createElement(BufferRadius, {\n    defaultRadius: EE_BUFFER,\n    hasOrgUnitField: hasOrgUnitField\n  })), params && /*#__PURE__*/React.createElement(LegendPreview, {\n    params: params\n  }));\n};\nStyleTab.propTypes = {\n  hasOrgUnitField: PropTypes.bool.isRequired,\n  unit: PropTypes.string.isRequired,\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  })\n};\nexport default StyleTab;","import i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { setOrgUnits, setFilter, setBufferRadius } from '../../../actions/layerEdit.js';\nimport { getEarthEngineLayer } from '../../../constants/earthEngine.js';\nimport { DEFAULT_ORG_UNIT_LEVEL, EE_BUFFER, NONE } from '../../../constants/layers.js';\nimport { getPeriodFromFilter, getPeriods, defaultFilters } from '../../../util/earthEngine.js';\nimport { Help, Tab, Tabs } from '../../core/index.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport AggregationSelect from './AggregationSelect.js';\nimport BandSelect from './BandSelect.js';\nimport PeriodSelect from './PeriodSelect.js';\nimport StyleTab from './StyleTab.js';\nconst EarthEngineDialog = props => {\n  const [tab, setTab] = useState('data');\n  const [periods, setPeriods] = useState();\n  const [error, setError] = useState();\n  const {\n    layerId,\n    datasetId,\n    band,\n    rows,\n    params,\n    filter,\n    areaRadius,\n    orgUnits,\n    setOrgUnits,\n    orgUnitField,\n    setFilter,\n    setBufferRadius,\n    validateLayer,\n    onLayerValidation\n  } = props;\n  const dataset = getEarthEngineLayer(layerId);\n  const {\n    description,\n    notice,\n    periodType,\n    bands,\n    filters = defaultFilters,\n    unit,\n    source,\n    sourceUrl,\n    aggregations\n  } = dataset;\n  const period = getPeriodFromFilter(filter);\n  const setPeriod = useCallback(period => setFilter(period ? filters(period) : null), [filters, setFilter]);\n  const noBandSelected = Array.isArray(bands) && (!band || !band.length);\n  const hasMultipleAggregations = !aggregations || aggregations.length > 1;\n  const hasOrgUnitField = !!orgUnitField && orgUnitField !== NONE;\n\n  // Load all available periods\n  useEffect(() => {\n    let isCancelled = false;\n    if (periodType) {\n      getPeriods(datasetId, periodType).then(periods => {\n        if (!isCancelled) {\n          setPeriods(periods);\n        }\n      }).catch(error => setError({\n        type: 'engine',\n        message: error.message\n      }));\n    }\n    return () => isCancelled = true;\n  }, [datasetId, periodType]);\n\n  // Set most recent period by default\n  useEffect(() => {\n    if (filter === undefined) {\n      if (Array.isArray(periods) && periods.length) {\n        setPeriod(periods[0]);\n      }\n    }\n  }, [periods, filter, setPeriod]);\n\n  // Set default org unit level\n  useEffect(() => {\n    if (!rows) {\n      var _orgUnits$levels;\n      const defaultLevel = (_orgUnits$levels = orgUnits.levels) === null || _orgUnits$levels === void 0 ? void 0 : _orgUnits$levels[DEFAULT_ORG_UNIT_LEVEL];\n      if (defaultLevel) {\n        const {\n          id,\n          name\n        } = defaultLevel;\n        setOrgUnits({\n          dimension: 'ou',\n          items: [{\n            id: `LEVEL-${id}`,\n            name\n          }]\n        });\n      }\n    }\n  }, [rows, orgUnits, setOrgUnits]);\n  useEffect(() => {\n    if (!hasOrgUnitField && areaRadius === undefined) {\n      setBufferRadius(EE_BUFFER);\n    }\n  }, [hasOrgUnitField, areaRadius, setBufferRadius]);\n  useEffect(() => {\n    if (validateLayer) {\n      const isValid = !noBandSelected && (!periodType || period);\n      if (!isValid) {\n        if (noBandSelected) {\n          setError({\n            type: 'band',\n            message: i18n.t('This field is required')\n          });\n          setTab('data');\n        } else {\n          setError({\n            type: 'period',\n            message: i18n.t('This field is required')\n          });\n          setTab('period');\n        }\n      }\n      onLayerValidation(isValid);\n    }\n  }, [validateLayer, periodType, period, onLayerValidation, noBandSelected]);\n  if (error && error.type === 'engine') {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(NoticeBox, error, error.message));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: \"data\"\n  }, i18n.t('Data')), periodType && /*#__PURE__*/React.createElement(Tab, {\n    value: \"period\"\n  }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"orgunits\"\n  }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexRowFlow\n  }, /*#__PURE__*/React.createElement(Help, null, /*#__PURE__*/React.createElement(\"p\", null, description), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Data will be calculated on Google Earth Engine for the chosen organisation units.')), notice && /*#__PURE__*/React.createElement(\"p\", {\n    className: styles.eeNotice\n  }, notice), /*#__PURE__*/React.createElement(\"p\", null, hasMultipleAggregations && /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Multiple aggregation methods are available.'), \"\\xA0\"), i18n.t('See the aggregation results by clicking map regions or viewing the data table. The results can also be downloaded.'))), bands && /*#__PURE__*/React.createElement(BandSelect, {\n    errorText: error && error.type === 'band' && error.message\n  }), /*#__PURE__*/React.createElement(AggregationSelect, null), unit && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Unit'), \": \", unit), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.paragraph\n  }, i18n.t('Source'), \":\", ' ', /*#__PURE__*/React.createElement(\"a\", {\n    href: sourceUrl,\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, source))), tab === 'period' && /*#__PURE__*/React.createElement(PeriodSelect, {\n    periodType: periodType,\n    period: period,\n    periods: periods,\n    filters: filters,\n    onChange: setPeriod,\n    errorText: error && error.type === 'period' && error.message,\n    className: styles.flexRowFlow\n  }), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, null), tab === 'style' && /*#__PURE__*/React.createElement(StyleTab, {\n    unit: unit,\n    params: params,\n    hasOrgUnitField: hasOrgUnitField\n  })));\n};\nEarthEngineDialog.propTypes = {\n  datasetId: PropTypes.string.isRequired,\n  layerId: PropTypes.string.isRequired,\n  setBufferRadius: PropTypes.func.isRequired,\n  setFilter: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  areaRadius: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  band: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  filter: PropTypes.array,\n  legend: PropTypes.object,\n  orgUnitField: PropTypes.string,\n  orgUnits: PropTypes.object,\n  params: PropTypes.shape({\n    max: PropTypes.number.isRequired,\n    min: PropTypes.number.isRequired,\n    palette: PropTypes.string.isRequired\n  }),\n  rows: PropTypes.array\n};\nexport default connect(null, {\n  setOrgUnits,\n  setFilter,\n  setBufferRadius\n}, null, {\n  forwardRef: true\n})(EarthEngineDialog);","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nimport { getValidDataItems } from '../util/helpers.js';\nconst PROGRAM_STAGE_DATA_ELEMENTS_QUERY = {\n  elements: {\n    resource: 'programStages',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: [`programStageDataElements[dataElement[id,${nameProperty}~rename(name),valueType,optionSet[id,displayName~rename(name)],legendSet]]`],\n        paging: false\n      };\n    }\n  }\n};\nexport const useProgramStageDataElements = _ref3 => {\n  let {\n    programStageId\n  } = _ref3;\n  const [dataElements, setDataElements] = useState(null);\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    refetch,\n    loading\n  } = useDataQuery(PROGRAM_STAGE_DATA_ELEMENTS_QUERY, {\n    lazy: true,\n    variables: {\n      nameProperty\n    },\n    onComplete: data => {\n      const elements = data.elements.programStageDataElements.map(attr => attr.dataElement);\n      setDataElements(getValidDataItems(elements));\n    }\n  });\n  useEffect(() => {\n    setDataElements(null);\n    if (programStageId) {\n      refetch({\n        id: programStageId\n      });\n    }\n  }, [programStageId, refetch]);\n  return {\n    dataElements,\n    loading\n  };\n};","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nimport { getValidDataItems } from '../util/helpers.js';\nconst PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY = {\n  trackedEntityAttributes: {\n    resource: 'programs',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: [`programTrackedEntityAttributes[trackedEntityAttribute[id,${nameProperty}~rename(name),valueType,optionSet[id,displayName~rename(name)],legendSet]]`],\n        paging: false\n      };\n    }\n  }\n};\nexport const useProgramTrackedEntityAttributes = _ref3 => {\n  let {\n    programId\n  } = _ref3;\n  const [programAttributes, setProgramAttributes] = useState(null);\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    refetch,\n    loading\n  } = useDataQuery(PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY, {\n    lazy: true,\n    variables: {\n      nameProperty\n    },\n    onComplete: data => {\n      const attributes = data.trackedEntityAttributes.programTrackedEntityAttributes.map(attr => attr.trackedEntityAttribute);\n      setProgramAttributes(getValidDataItems(attributes));\n    }\n  });\n  useEffect(() => {\n    setProgramAttributes(null);\n    if (programId) {\n      refetch({\n        id: programId\n      });\n    }\n  }, [programId, refetch]);\n  return {\n    programAttributes,\n    loading\n  };\n};","import { useMemo } from 'react';\nimport { combineDataItems } from '../util/analytics.js';\nimport { useProgramStageDataElements } from './useProgramStageDataElements.js';\nimport { useProgramTrackedEntityAttributes } from './useProgramTrackedEntityAttributes.js';\nexport const useEventDataItems = _ref => {\n  let {\n    programId,\n    programStageId,\n    includeTypes,\n    excludeTypes\n  } = _ref;\n  const {\n    dataElements,\n    loading: dataElementsLoading\n  } = useProgramStageDataElements({\n    programStageId\n  });\n  const {\n    programAttributes,\n    loading: attributesLoading\n  } = useProgramTrackedEntityAttributes({\n    programId\n  });\n  const eventDataItems = useMemo(() => {\n    if (dataElements !== null && programAttributes !== null) {\n      return combineDataItems(programAttributes, dataElements, includeTypes || null, excludeTypes || null);\n    }\n    return null;\n  }, [dataElements, programAttributes, includeTypes, excludeTypes]);\n  return {\n    eventDataItems,\n    loading: dataElementsLoading || attributesLoading\n  };\n};","import { useRef, useEffect } from 'react';\nconst usePrevious = value => {\n  const prev = useRef();\n  useEffect(() => {\n    prev.current = value;\n  }, [value]);\n  return prev.current;\n};\nexport default usePrevious;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useEffect } from 'react';\nimport { EVENT_COORDINATE_DEFAULT, EVENT_COORDINATE_ENROLLMENT, EVENT_COORDINATE_TRACKED_ENTITY, EVENT_COORDINATE_ORG_UNIT, EVENT_COORDINATE_CASCADING, NONE } from '../../constants/layers.js';\nimport { useEventDataItems } from '../../hooks/useEventDataItems.js';\nimport usePrevious from '../../hooks/usePrevious.js';\nimport { SelectField } from '../core/index.js';\nconst includeTypes = ['COORDINATE'];\nconst CoordinateField = _ref => {\n  let {\n    value,\n    program,\n    programStage,\n    eventCoordinateField,\n    onChange,\n    className\n  } = _ref;\n  const {\n    eventDataItems,\n    loading\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    includeTypes\n  });\n  const prevProgram = usePrevious(program);\n  const isTrackerProgram = !!(program !== null && program !== void 0 && program.trackedEntityType);\n  const defaultValue = eventCoordinateField ? NONE : EVENT_COORDINATE_DEFAULT;\n  const fields = useMemo(() => {\n    const isFallback = !!eventCoordinateField;\n    const fields = [];\n    if (isFallback) {\n      fields.push({\n        id: NONE,\n        name: i18n.t('None')\n      });\n      fields.push({\n        id: EVENT_COORDINATE_CASCADING,\n        name: i18n.t('Cascading')\n      });\n    }\n    fields.push({\n      id: EVENT_COORDINATE_DEFAULT,\n      name: i18n.t('Event location')\n    });\n    if (isTrackerProgram) {\n      fields.push({\n        id: EVENT_COORDINATE_ENROLLMENT,\n        name: i18n.t('Enrollment location')\n      });\n      fields.push({\n        id: EVENT_COORDINATE_TRACKED_ENTITY,\n        name: i18n.t('Tracked entity location')\n      });\n    }\n    if (eventDataItems) {\n      fields.push(...eventDataItems);\n    }\n    if (isFallback) {\n      fields.push({\n        id: EVENT_COORDINATE_ORG_UNIT,\n        name: i18n.t('Organisation unit location')\n      });\n    }\n    return eventCoordinateField ? fields.filter(f => f.id !== eventCoordinateField) : fields;\n  }, [isTrackerProgram, eventDataItems, eventCoordinateField]);\n\n  // Reset default value when program is changed\n  useEffect(() => {\n    if (program !== prevProgram) {\n      onChange(defaultValue);\n    }\n  }, [program, prevProgram, defaultValue, onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: eventCoordinateField ? i18n.t('Fallback coordinate field') : i18n.t('Coordinate field'),\n    items: fields,\n    value: fields.find(f => f.id === value) ? value : defaultValue,\n    loading: loading,\n    helpText: value === EVENT_COORDINATE_CASCADING ? isTrackerProgram ? i18n.t('Enrollment > event > tracked entity > org unit coordinate') : i18n.t('Event > org unit coordinate') : null,\n    onChange: field => onChange(field.id)\n  }));\n};\nCoordinateField.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  eventCoordinateField: PropTypes.string,\n  program: PropTypes.object,\n  programStage: PropTypes.object,\n  value: PropTypes.string\n};\nexport default CoordinateField;","// extracted by mini-css-extract-plugin\nexport default {\"removeBtnContainer\":\"RemoveFilter_removeBtnContainer__DNHoQ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip, IconDelete24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './styles/RemoveFilter.module.css';\n\n// Remove filter button used for both thematic and event filters\nconst RemoveFilter = _ref => {\n  let {\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.removeBtnContainer,\n    onClick: onClick\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Remove filter')\n  }, /*#__PURE__*/React.createElement(IconDelete24, null)));\n};\nRemoveFilter.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\nexport default RemoveFilter;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useState, useEffect } from 'react';\nconst OPTION_SET_QUERY = {\n  optionSet: {\n    resource: 'optionSets',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'options[id,code,displayName~rename(name),style[color]]'],\n      paging: false\n    }\n  }\n};\nconst useOptionSet = optionSetId => {\n  const [optionSet, setOptionSet] = useState(null);\n  const {\n    refetch,\n    loading\n  } = useDataQuery(OPTION_SET_QUERY, {\n    lazy: true,\n    onComplete: data => {\n      setOptionSet(data.optionSet);\n    }\n  });\n  useEffect(() => {\n    setOptionSet(null);\n    if (optionSetId) {\n      refetch({\n        id: optionSetId\n      });\n    }\n  }, [optionSetId, refetch]);\n  return {\n    optionSet,\n    loading\n  };\n};\nexport default useOptionSet;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\nconst OptionSetSelect = _ref => {\n  let {\n    options,\n    value,\n    onChange,\n    className\n  } = _ref;\n  // TODO: Temporarily fix until we have a searchable SelectField handling hundreds of options\n  if (options.length > 100) {\n    options = options.slice(0, 100);\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Options'),\n    items: options.map(option => ({\n      id: option.code,\n      name: option.name\n    })),\n    value: value,\n    multiple: true,\n    onChange: onChange,\n    className: className\n  });\n};\nOptionSetSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  options: PropTypes.array,\n  value: PropTypes.array\n};\nexport default OptionSetSelect;","// extracted by mini-css-extract-plugin\nexport default {\"operator\":\"FilterSelect_operator__DxRTN\",\"inputField\":\"FilterSelect_inputField__gY635\",\"checkbox\":\"FilterSelect_checkbox__HRwr5\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { numberValueTypes, textValueTypes, booleanValueTypes } from '../../../constants/valueTypes.js';\nimport useOptionSet from '../../../hooks/useOptionSet.js';\nimport { SelectField, NumberField, TextField, Checkbox, DatePicker } from '../../core/index.js';\nimport OptionSetSelect from '../../optionSet/OptionSetSelect.js';\nimport styles from './styles/FilterSelect.module.css';\nconst getOperators = (valueType, optionSetId) => {\n  let operators;\n  if (['NUMBER', 'INTEGER', 'INTEGER_POSITIVE', 'DATE'].includes(valueType)) {\n    operators = [{\n      id: 'EQ',\n      name: '='\n    }, {\n      id: 'GT',\n      name: '>'\n    }, {\n      id: 'GE',\n      name: '>='\n    }, {\n      id: 'LT',\n      name: '<'\n    }, {\n      id: 'LE',\n      name: '<='\n    }, {\n      id: 'NE',\n      name: '!='\n    }];\n  } else if (optionSetId) {\n    operators = [{\n      id: 'IN',\n      name: i18n.t('one of')\n    }];\n  } else if (textValueTypes.includes(valueType)) {\n    operators = [{\n      id: 'LIKE',\n      name: i18n.t('contains')\n    }, {\n      id: 'EQ',\n      name: i18n.t('is')\n    }, {\n      id: 'NE',\n      name: i18n.t('is not')\n    }];\n  }\n  return operators;\n};\nconst FilterSelect = _ref => {\n  let {\n    valueType,\n    filter,\n    optionSetId,\n    onChange\n  } = _ref;\n  const {\n    optionSet\n  } = useOptionSet(optionSetId);\n  const operators = getOperators(valueType, optionSetId);\n  let operator;\n  let value;\n  if (filter) {\n    const splitFilter = filter.split(':');\n    operator = splitFilter[0];\n    value = splitFilter[1];\n  } else if (operators) {\n    operator = operators[0].id;\n  }\n  const options = optionSetId && optionSetId === (optionSet === null || optionSet === void 0 ? void 0 : optionSet.id) ? optionSet.options : null;\n  return /*#__PURE__*/React.createElement(Fragment, null, operators && /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Operator'),\n    items: operators,\n    value: operator,\n    onChange: newOperator => onChange(`${newOperator.id}:${value ? value : ''}`),\n    className: styles.operator\n  }), options && /*#__PURE__*/React.createElement(OptionSetSelect, {\n    options: options,\n    value: value ? value.split(';') : null,\n    onChange: newValue => onChange(`${operator}:${newValue.join(';')}`),\n    className: styles.inputField\n  }), numberValueTypes.includes(valueType) && /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Value'),\n    value: value !== undefined ? Number(value) : value,\n    onChange: newValue => onChange(`${operator}:${newValue}`),\n    className: styles.inputField\n  }), textValueTypes.includes(valueType) && !optionSetId && /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.t('Value'),\n    value: value || '',\n    onChange: newValue => onChange(`${operator}:${newValue}`),\n    className: styles.inputField\n  }), booleanValueTypes.includes(valueType) && /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Yes'),\n    checked: value == 1 ? true : false,\n    onChange: isChecked => onChange(isChecked ? 'IN:1' : 'IN:0'),\n    className: styles.checkbox\n  }), valueType === 'DATE' && /*#__PURE__*/React.createElement(DatePicker, {\n    label: i18n.t('Date'),\n    value: value,\n    onChange: date => onChange(`${operator}:${date}`),\n    className: styles.inputField\n  }));\n};\nFilterSelect.propTypes = {\n  valueType: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  filter: PropTypes.string,\n  optionSetId: PropTypes.string\n};\nexport default FilterSelect;","// extracted by mini-css-extract-plugin\nexport default {\"filterRow\":\"FilterRow_filterRow__Y3lTE\",\"dataItemSelect\":\"FilterRow_dataItemSelect__ajzRb\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../../core/index.js';\nimport RemoveFilter from '../../filter/RemoveFilter.js';\nimport FilterSelect from './FilterSelect.js';\nimport styles from './styles/FilterRow.module.css';\nconst FilterRow = _ref => {\n  let {\n    index,\n    dimension,\n    filter,\n    dataItems,\n    onChange,\n    onRemove\n  } = _ref;\n  if (!(dataItems !== null && dataItems !== void 0 && dataItems.length)) {\n    return null;\n  }\n  const {\n    valueType,\n    optionSet\n  } = dataItems.find(d => d.id === dimension) || {};\n  const onSelect = (_ref2, newFilter) => {\n    let {\n      id\n    } = _ref2;\n    const name = dataItems.filter(d => d.id === id)[0].name;\n    if (id !== dimension) {\n      // New dimension\n      onChange(index, {\n        dimension: id,\n        name,\n        filter: null\n      });\n    } else {\n      onChange(index, {\n        dimension: id,\n        name,\n        filter: newFilter\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterRow\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data item'),\n    items: dataItems,\n    value: dimension || null,\n    onChange: onSelect,\n    className: styles.dataItemSelect\n  }), valueType && /*#__PURE__*/React.createElement(FilterSelect, {\n    valueType: valueType,\n    optionSetId: optionSet === null || optionSet === void 0 ? void 0 : optionSet.id,\n    filter: filter,\n    onChange: newFilter => onSelect({\n      id: dimension\n    }, newFilter)\n  }), /*#__PURE__*/React.createElement(RemoveFilter, {\n    onClick: () => onRemove(index)\n  }));\n};\nFilterRow.propTypes = {\n  dataItems: PropTypes.array.isRequired,\n  index: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  filter: PropTypes.string\n};\nexport default FilterRow;","// extracted by mini-css-extract-plugin\nexport default {\"filterGroup\":\"FilterGroup_filterGroup__E1a0A\",\"addFilter\":\"FilterGroup_addFilter__Shcz8\",\"note\":\"FilterGroup_note__hnJSP\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { addFilter, removeFilter, changeFilter } from '../../../actions/layerEdit.js';\nimport { useEventDataItems } from '../../../hooks/useEventDataItems.js';\nimport FilterRow from './FilterRow.js';\nimport styles from './styles/FilterGroup.module.css';\nconst excludeTypes = ['FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE'];\nconst FilterGroup = _ref => {\n  let {\n    filters = [],\n    program,\n    programStage\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    eventDataItems\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    excludeTypes\n  });\n  if (!programStage) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.note\n    }, i18n.t('Filtering is available after selecting a program stage.'));\n  }\n  if (eventDataItems === null) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterGroup\n  }, filters.map((item, index) => /*#__PURE__*/React.createElement(FilterRow, _extends({\n    key: index,\n    index: index,\n    dataItems: eventDataItems,\n    onChange: (index, item) => dispatch(changeFilter(index, item)),\n    onRemove: val => dispatch(removeFilter(val))\n  }, item))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addFilter\n  }, /*#__PURE__*/React.createElement(Button, {\n    basic: true,\n    onClick: () => dispatch(addFilter())\n  }, i18n.t('Add filter'))));\n};\nFilterGroup.propTypes = {\n  filters: PropTypes.array,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default FilterGroup;","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"Classification_select__g4tq7\",\"classes\":\"Classification_classes__pe3qP\",\"scale\":\"Classification_scale__j1o7v\",\"clear\":\"Classification_clear__wSOTp\"};","import i18n from '@dhis2/d2-i18n';\nimport { range } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setColorScale } from '../../actions/layerEdit.js';\nimport { getClassificationTypes, CLASSIFICATION_EQUAL_INTERVALS } from '../../constants/layers.js';\nimport { defaultColorScaleName, defaultClasses, defaultColorScale, getColorPalette, getColorScale } from '../../util/colors.js';\nimport { SelectField, ColorScaleSelect } from '../core/index.js';\nimport styles from './styles/Classification.module.css';\nconst classRange = range(3, 10).map(num => ({\n  id: num,\n  name: num.toString()\n})); // 3 - 9\n\nconst Classification = _ref => {\n  let {\n    method,\n    classes,\n    colorScale,\n    setClassification,\n    setColorScale\n  } = _ref;\n  const colorScaleName = colorScale ? getColorScale(colorScale) : defaultColorScaleName;\n  return [/*#__PURE__*/React.createElement(SelectField, {\n    key: \"classification\",\n    label: i18n.t('Classification'),\n    value: method || CLASSIFICATION_EQUAL_INTERVALS,\n    items: getClassificationTypes(),\n    onChange: method => setClassification(method.id),\n    className: styles.select\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    key: \"scale\"\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Classes'),\n    value: classes !== undefined ? classes : defaultClasses,\n    items: classRange,\n    onChange: item => setColorScale(getColorPalette(colorScaleName, item.id)),\n    className: styles.classes\n  }), /*#__PURE__*/React.createElement(ColorScaleSelect, {\n    palette: colorScale ? colorScale : defaultColorScale,\n    onChange: setColorScale,\n    width: 190,\n    className: styles.scale\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.clear\n  }))];\n};\nClassification.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  setColorScale: PropTypes.func.isRequired,\n  classes: PropTypes.number,\n  colorScale: PropTypes.string,\n  method: PropTypes.number\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    method: layerEdit.method,\n    classes: layerEdit.classes,\n    colorScale: layerEdit.colorScale\n  };\n}, {\n  setClassification,\n  setColorScale\n})(Classification);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setLegendSet } from '../../actions/layerEdit.js';\nimport { SelectField } from '../core/index.js';\n\n// Load all legend sets\nconst LEGEND_SETS_QUERY = {\n  sets: {\n    resource: 'legendSets',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst style = {\n  width: '100%'\n};\nconst LegendSetSelect = _ref => {\n  let {\n    legendSetError\n  } = _ref;\n  const legendSet = useSelector(state => state.layerEdit.legendSet);\n  const dispatch = useDispatch();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(LEGEND_SETS_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Legend set'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.sets.legendSets,\n    value: legendSet ? legendSet.id : null,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || legendSetError,\n    onChange: legendSet => dispatch(setLegendSet(legendSet)),\n    style: style\n  });\n};\nLegendSetSelect.propTypes = {\n  legendSetError: PropTypes.string\n};\nexport default LegendSetSelect;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification } from '../../actions/layerEdit.js';\nimport { getLegendTypes, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS } from '../../constants/layers.js';\nimport { Radio, RadioGroup } from '../core/index.js';\n\n// Select between user defined (automatic), predefined or single color\nconst LegendTypeSelect = _ref => {\n  let {\n    mapType,\n    method,\n    setClassification\n  } = _ref;\n  return method ? /*#__PURE__*/React.createElement(RadioGroup, {\n    value: method === CLASSIFICATION_EQUAL_COUNTS ? CLASSIFICATION_EQUAL_INTERVALS : method,\n    onChange: method => setClassification(Number(method))\n  }, getLegendTypes(mapType === 'BUBBLE').map(_ref2 => {\n    let {\n      id,\n      name\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(Radio, {\n      key: id,\n      value: id,\n      label: name\n    });\n  })) : null;\n};\nLegendTypeSelect.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  mapType: PropTypes.string,\n  method: PropTypes.number\n};\nexport default connect(null, {\n  setClassification\n})(LegendTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setColorScale } from '../../actions/layerEdit.js';\nimport { THEMATIC_COLOR } from '../../constants/layers.js';\nimport { ColorPicker } from '../core/index.js';\n\n// Displays a color picker for single color layer\nconst SingleColor = _ref => {\n  let {\n    color,\n    setColorScale\n  } = _ref;\n  // Set default color\n  useEffect(() => {\n    if (!color || color.length !== 7) {\n      setColorScale(THEMATIC_COLOR);\n    }\n  }, [color, setColorScale]);\n  return color ? /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Color'),\n    color: color,\n    onChange: setColorScale,\n    width: 100,\n    style: {\n      marginTop: -5\n    }\n  }) : null;\n};\nSingleColor.propTypes = {\n  setColorScale: PropTypes.func.isRequired,\n  color: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    color: layerEdit.colorScale\n  };\n}, {\n  setColorScale\n})(SingleColor);","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setLegendSet } from '../../actions/layerEdit.js';\nimport { CLASSIFICATION_PREDEFINED, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_SINGLE_COLOR } from '../../constants/layers.js';\nimport Classification from './Classification.js';\nimport LegendSetSelect from './LegendSetSelect.js';\nimport LegendTypeSelect from './LegendTypeSelect.js';\nimport SingleColor from './SingleColor.js';\n\n// Wrapper component for selecting legend style used for numeric map styles\nconst NumericLegendStyle = props => {\n  const {\n    mapType,\n    method,\n    dataItem,\n    legendSet,\n    setClassification,\n    setLegendSet,\n    legendSetError,\n    style\n  } = props;\n  const isSingleColor = method === CLASSIFICATION_SINGLE_COLOR;\n  const isPredefined = method === CLASSIFICATION_PREDEFINED;\n  useEffect(() => {\n    // Set default classification method\n    if (!method) {\n      // Use predefined legend if defined for data item\n      setClassification(dataItem && dataItem.legendSet ? CLASSIFICATION_PREDEFINED : CLASSIFICATION_EQUAL_INTERVALS);\n    }\n  }, [method, dataItem, setClassification]);\n  useEffect(() => {\n    // Set legend set defined for data item in use by default\n    if (isPredefined && !legendSet && dataItem !== null && dataItem !== void 0 && dataItem.legendSet) {\n      setLegendSet(dataItem.legendSet);\n    }\n  }, [isPredefined, legendSet, dataItem, setLegendSet]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(LegendTypeSelect, {\n    method: method,\n    mapType: mapType,\n    dataItem: dataItem\n  }), isSingleColor ? /*#__PURE__*/React.createElement(SingleColor, null) : isPredefined ? /*#__PURE__*/React.createElement(LegendSetSelect, {\n    legendSetError: legendSetError\n  }) : /*#__PURE__*/React.createElement(Classification, null));\n};\nNumericLegendStyle.propTypes = {\n  setClassification: PropTypes.func.isRequired,\n  setLegendSet: PropTypes.func.isRequired,\n  dataItem: PropTypes.object,\n  legendSet: PropTypes.object,\n  legendSetError: PropTypes.string,\n  mapType: PropTypes.string,\n  method: PropTypes.number,\n  style: PropTypes.object\n};\nexport default connect(_ref => {\n  let {\n    layerEdit\n  } = _ref;\n  return {\n    method: layerEdit.method,\n    legendSet: layerEdit.legendSet\n  };\n}, {\n  setClassification,\n  setLegendSet\n})(NumericLegendStyle);","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"OptionStyle_item__2QP3n\",\"color\":\"OptionStyle_color__gdTSK\",\"label\":\"OptionStyle_label__A8ydG\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { ColorPicker } from '../core/index.js';\nimport styles from './styles/OptionStyle.module.css';\nconst OptionStyle = _ref => {\n  let {\n    name,\n    color,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.item\n  }, /*#__PURE__*/React.createElement(ColorPicker, {\n    color: color,\n    onChange: onChange,\n    className: styles.color\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, name));\n};\nOptionStyle.propTypes = {\n  color: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default OptionStyle;","// extracted by mini-css-extract-plugin\nexport default {\"optionSetStyle\":\"OptionSetStyle_optionSetStyle__tvnSJ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Help, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setOptionStyle } from '../../actions/layerEdit.js';\nimport { qualitativeColors } from '../../constants/colors.js';\nimport useOptionSet from '../../hooks/useOptionSet.js';\nimport { getUniqueColor } from '../../util/colors.js';\nimport OptionStyle from './OptionStyle.js';\nimport styles from './styles/OptionSetStyle.module.css';\nconst MAX_OPTIONS = 50;\nconst getColor = getUniqueColor(qualitativeColors);\nconst addOptionStyle = (option, index) => ({\n  ...option,\n  style: {\n    color: option.style ? option.style.color : getColor(index)\n  }\n});\nconst OptionSetStyle = _ref => {\n  let {\n    styledOptionSet\n  } = _ref;\n  const {\n    optionSet\n  } = useOptionSet(styledOptionSet.id);\n  const [warning, setWarning] = useState();\n  const dispatch = useDispatch();\n  const options = styledOptionSet.id === (optionSet === null || optionSet === void 0 ? void 0 : optionSet.id) ? optionSet.options : null;\n  const styledOptions = styledOptionSet.options;\n  const onChange = useCallback((id, color) => {\n    dispatch(setOptionStyle(\n    // Update options style\n    styledOptionSet.options.map(option => option.id === id ? {\n      ...option,\n      style: {\n        color\n      }\n    } : option)));\n  }, [styledOptionSet, dispatch]);\n  useEffect(() => {\n    if (!styledOptions && options) {\n      if (options.length <= MAX_OPTIONS) {\n        // Set default options style\n        dispatch(setOptionStyle(options.map(addOptionStyle)));\n      } else {\n        setWarning(i18n.t('This data element has too many options ({{length}}). Max options for styling is {{max}}.', {\n          length: options.length,\n          max: MAX_OPTIONS\n        }));\n      }\n    }\n  }, [styledOptions, options, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.optionSetStyle\n  }, styledOptions ? styledOptions.map(_ref2 => {\n    let {\n      id,\n      name,\n      style\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(OptionStyle, {\n      key: id,\n      name: name,\n      color: style.color,\n      onChange: color => onChange(id, color)\n    });\n  }) : warning ? /*#__PURE__*/React.createElement(Help, {\n    warning: true\n  }, warning) : /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  }));\n};\nOptionSetStyle.propTypes = {\n  styledOptionSet: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    options: PropTypes.array\n  }).isRequired\n};\nexport default OptionSetStyle;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setBooleanStyle } from '../../actions/layerEdit.js';\nimport { qualitativeColors } from '../../constants/colors.js';\nimport OptionStyle from '../optionSet/OptionStyle.js';\nconst style = {\n  marginTop: 20\n};\nconst BooleanStyle = _ref => {\n  let {\n    valueType,\n    values\n  } = _ref;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!values) {\n      dispatch(setBooleanStyle('true', qualitativeColors[0]));\n      if (valueType === 'BOOLEAN') {\n        dispatch(setBooleanStyle('false', qualitativeColors[1]));\n      }\n    }\n  }, [dispatch, valueType, values]);\n  if (!values) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, /*#__PURE__*/React.createElement(OptionStyle, {\n    name: i18n.t('Yes'),\n    color: values.true,\n    onChange: color => dispatch(setBooleanStyle('true', color))\n  }), valueType === 'BOOLEAN' && /*#__PURE__*/React.createElement(OptionStyle, {\n    name: 'No',\n    color: values.false,\n    onChange: color => dispatch(setBooleanStyle('false', color))\n  }));\n};\nBooleanStyle.propTypes = {\n  valueType: PropTypes.string.isRequired,\n  values: PropTypes.shape({\n    true: PropTypes.string.isRequired,\n    false: PropTypes.string\n  })\n};\nexport default BooleanStyle;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { numberValueTypes, booleanValueTypes } from '../../constants/valueTypes.js';\nimport NumericLegendStyle from '../classification/NumericLegendStyle.js';\nimport OptionSetStyle from '../optionSet/OptionSetStyle.js';\nimport BooleanStyle from './BooleanStyle.js';\nconst DataItemStyle = _ref => {\n  let {\n    dataItem,\n    style\n  } = _ref;\n  if (!dataItem) {\n    return null;\n  }\n  const {\n    valueType,\n    optionSet\n  } = dataItem;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: style\n  }, numberValueTypes.includes(valueType) ? /*#__PURE__*/React.createElement(NumericLegendStyle, {\n    dataItem: dataItem,\n    style: {\n      width: '100%'\n    }\n  }) : null, booleanValueTypes.includes(valueType) ? /*#__PURE__*/React.createElement(BooleanStyle, dataItem) : null, optionSet ? /*#__PURE__*/React.createElement(OptionSetStyle, {\n    styledOptionSet: optionSet\n  }) : null);\n};\nDataItemStyle.propTypes = {\n  dataItem: PropTypes.object,\n  style: PropTypes.object\n};\nexport default DataItemStyle;","import i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setStyleDataItem } from '../../actions/layerEdit.js';\nimport { useEventDataItems } from '../../hooks/useEventDataItems.js';\nimport { SelectField } from '../core/index.js';\nimport DataItemStyle from './DataItemStyle.js';\nconst excludeTypes = ['DATE', 'FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE'];\n\n// Style by data item is used by event layer, and can be reused for TEI layer in the future.\n// Displays a select field with data items that support styling.\n// Styling options are shown when a data item is selected.\nconst StyleByDataItem = _ref => {\n  let {\n    program,\n    programStage,\n    error\n  } = _ref;\n  const styleDataItem = useSelector(state => state.layerEdit.styleDataItem);\n  const dispatch = useDispatch();\n  const {\n    eventDataItems\n  } = useEventDataItems({\n    programId: program === null || program === void 0 ? void 0 : program.id,\n    programStageId: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    excludeTypes\n  });\n  const ITEM_NONE = {\n    id: 'none',\n    name: i18n.t('None')\n  };\n  const onChange = item => dispatch(setStyleDataItem(item.id !== ITEM_NONE.id ? item : null));\n  if (eventDataItems === null) {\n    return null;\n  }\n  const dataItems = [ITEM_NONE, ...eventDataItems];\n  if (styleDataItem && !dataItems.find(item => item.id === styleDataItem.id)) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, i18n.t('Selected value not available in in list: {{name}}', {\n      name: styleDataItem.name,\n      nsSeparator: '^^'\n    }));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Style by data element'),\n    value: styleDataItem ? styleDataItem.id : null,\n    items: dataItems,\n    onChange: onChange\n  }), styleDataItem && /*#__PURE__*/React.createElement(DataItemStyle, {\n    key: \"style\",\n    dataItem: styleDataItem\n  }), error && /*#__PURE__*/React.createElement(Help, {\n    error: true\n  }, error));\n};\nStyleByDataItem.propTypes = {\n  error: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default StyleByDataItem;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { START_END_DATES } from '../../constants/periods.js';\nimport { getRelativePeriods } from '../../util/periods.js';\nimport { SelectField } from '../core/index.js';\nconst RelativePeriodSelect = _ref => {\n  let {\n    startEndDates,\n    period,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    systemSettings\n  } = useCachedDataQuery();\n  const hiddenPeriods = systemSettings.hiddenPeriods;\n  const periods = useMemo(() => (startEndDates ? [{\n    id: START_END_DATES,\n    name: i18n.t('Start/end dates')\n  }] : []).concat(getRelativePeriods(hiddenPeriods)), [hiddenPeriods, startEndDates]);\n  const value = period && periods.find(p => p.id === period.id) ? period.id : null;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period'),\n    items: periods,\n    value: value,\n    onChange: onChange,\n    className: className,\n    errorText: !value && errorText ? errorText : null,\n    dataTest: \"relative-period-select\"\n  });\n};\nRelativePeriodSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  period: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string\n  }),\n  startEndDates: PropTypes.bool\n};\nexport default RelativePeriodSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setStartDate, setEndDate } from '../../actions/layerEdit.js';\nimport { DEFAULT_START_DATE, DEFAULT_END_DATE } from '../../constants/layers.js';\nimport { DatePicker } from '../core/index.js';\nimport styles from '../edit/styles/LayerDialog.module.css';\nconst StartEndDates = props => {\n  const {\n    startDate,\n    endDate,\n    setStartDate,\n    setEndDate,\n    errorText,\n    className\n  } = props;\n  const hasDate = startDate !== undefined && endDate !== undefined;\n  useEffect(() => {\n    if (!hasDate) {\n      setStartDate(DEFAULT_START_DATE);\n      setEndDate(DEFAULT_END_DATE);\n    }\n  }, [hasDate, setStartDate, setEndDate]);\n  return hasDate ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(DatePicker, {\n    label: i18n.t('Start date'),\n    defaultVal: startDate,\n    onBlur: setStartDate,\n    className: className || styles.select\n  }), /*#__PURE__*/React.createElement(DatePicker, {\n    label: i18n.t('End date'),\n    defaultVal: endDate,\n    onBlur: setEndDate,\n    className: className || styles.select\n  }), errorText && /*#__PURE__*/React.createElement(\"div\", {\n    key: \"error\",\n    className: styles.error\n  }, errorText)) : null;\n};\nStartEndDates.propTypes = {\n  setEndDate: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  endDate: PropTypes.string,\n  errorText: PropTypes.string,\n  startDate: PropTypes.string\n};\nexport default connect(null, {\n  setStartDate,\n  setEndDate\n})(StartEndDates);","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\nconst allProgramsItem = {\n  id: 'noPrograms',\n  name: i18n.t('No program')\n};\n\n// Load all programs\nconst PROGRAMS_QUERY = {\n  programs: {\n    resource: 'programs',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`, 'trackedEntityType[id,displayName~rename(name)]'],\n        paging: false\n      };\n    }\n  }\n};\nconst ProgramSelect = _ref2 => {\n  let {\n    program,\n    trackedEntityType,\n    className,\n    errorText,\n    onChange\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(PROGRAMS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const programs = data === null || data === void 0 ? void 0 : data.programs.programs;\n  let trackedEntityPrograms;\n  let value = program === null || program === void 0 ? void 0 : program.id;\n  if (programs && trackedEntityType) {\n    trackedEntityPrograms = [allProgramsItem, ...programs.filter(program => program.trackedEntityType && program.trackedEntityType.id === trackedEntityType.id)];\n    if (!value) {\n      value = 'noPrograms';\n    }\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program'),\n    loading: loading,\n    items: trackedEntityPrograms || programs,\n    value: value,\n    onChange: program => onChange(program.id !== 'noPrograms' ? program : null),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!program && errorText ? errorText : null),\n    dataTest: \"programselect\"\n  });\n};\nProgramSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  program: PropTypes.object,\n  trackedEntityType: PropTypes.object\n};\nexport default ProgramSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all stages for one program\nconst PROGRAM_STAGES_QUERY = {\n  stages: {\n    resource: 'programs',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: 'programStages[id,displayName~rename(name)]',\n      paging: false\n    }\n  }\n};\nconst ProgramStageSelect = _ref2 => {\n  let {\n    program,\n    programStage,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const onProgramStagesLoad = useCallback(data => {\n    const stages = data.stages.programStages;\n\n    // Select first program stage if only one\n    if (!programStage && (stages === null || stages === void 0 ? void 0 : stages.length) === 1) {\n      onChange(stages[0]);\n    }\n  }, [programStage, onChange]);\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(PROGRAM_STAGES_QUERY, {\n    onComplete: onProgramStagesLoad,\n    lazy: true\n  });\n\n  // Fetch program stages when program is changed\n  useEffect(() => {\n    refetch({\n      id: program.id\n    });\n  }, [program, refetch]);\n  let items = data === null || data === void 0 ? void 0 : data.stages.programStages;\n  if (!items && programStage) {\n    // If favorite is loaded, we only know the used program stage\n    items = [programStage];\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Stage'),\n    loading: loading,\n    items: items,\n    value: programStage === null || programStage === void 0 ? void 0 : programStage.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!programStage && errorText ? errorText : null),\n    dataTest: \"programstageselect\"\n  });\n};\nProgramStageSelect.propTypes = {\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }).isRequired,\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  programStage: PropTypes.object\n};\nexport default ProgramStageSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getEventStatuses, EVENT_STATUS_ALL } from '../../../constants/eventStatuses.js';\nimport { SelectField } from '../../core/index.js';\nconst EventStatusSelect = _ref => {\n  let {\n    value = EVENT_STATUS_ALL,\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Event status'),\n    items: getEventStatuses(),\n    value: value,\n    onChange: valueType => onChange(valueType.id),\n    className: className\n  });\n};\nEventStatusSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default EventStatusSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setProgram, setProgramStage, setEventStatus, setEventCoordinateField, setEventClustering, setEventPointColor, setEventPointRadius,\n// setFallbackCoordinateField,\nsetPeriod, setStartDate, setEndDate, setOrgUnits } from '../../../actions/layerEdit.js';\nimport { DEFAULT_START_DATE, DEFAULT_END_DATE, EVENT_COLOR, EVENT_RADIUS, EVENT_BUFFER, CLASSIFICATION_PREDEFINED, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { START_END_DATES } from '../../../constants/periods.js';\nimport { getPeriodFromFilters, getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { cssColor } from '../../../util/colors.js';\nimport { isPeriodAvailable } from '../../../util/periods.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport { Tab, Tabs, NumberField, ImageSelect, ColorPicker } from '../../core/index.js';\nimport CoordinateField from '../../dataItem/CoordinateField.js';\nimport FilterGroup from '../../dataItem/filter/FilterGroup.js';\nimport StyleByDataItem from '../../dataItem/StyleByDataItem.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport RelativePeriodSelect from '../../periods/RelativePeriodSelect.js';\nimport StartEndDates from '../../periods/StartEndDates.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport ProgramStageSelect from '../../program/ProgramStageSelect.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport EventStatusSelect from './EventStatusSelect.js';\nclass EventDialog extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      tab: 'data'\n    };\n  }\n  componentDidMount() {\n    const {\n      rows,\n      filters,\n      systemSettings,\n      startDate,\n      endDate,\n      orgUnits,\n      setPeriod,\n      setStartDate,\n      setEndDate,\n      setOrgUnits\n    } = this.props;\n    const period = getPeriodFromFilters(filters);\n    const {\n      keyAnalysisRelativePeriod: defaultPeriod,\n      hiddenPeriods\n    } = systemSettings;\n\n    // Set default period from system settings\n    if (!period && !startDate && !endDate && defaultPeriod && isPeriodAvailable(defaultPeriod, hiddenPeriods)) {\n      setPeriod({\n        id: defaultPeriod\n      });\n    } else if (!startDate && !endDate) {\n      setStartDate(DEFAULT_START_DATE);\n      setEndDate(DEFAULT_END_DATE);\n    }\n\n    // Set org unit tree roots as default\n    if (!rows && orgUnits.roots) {\n      setOrgUnits({\n        dimension: 'ou',\n        items: orgUnits.roots\n      });\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      // layer options\n      columns = [],\n      endDate,\n      eventClustering,\n      eventStatus,\n      eventCoordinateField,\n      eventPointColor,\n      eventPointRadius,\n      // fallbackCoordinateField,\n      filters = [],\n      program,\n      programStage,\n      startDate,\n      legendSet\n    } = this.props;\n    const {\n      // handlers\n      setProgram,\n      setProgramStage,\n      setEventStatus,\n      setEventCoordinateField,\n      setEventClustering,\n      setEventPointColor,\n      setEventPointRadius,\n      // setFallbackCoordinateField,\n      setPeriod\n    } = this.props;\n    const {\n      tab,\n      programError,\n      programStageError,\n      periodError,\n      orgUnitsError,\n      legendSetError\n    } = this.state;\n    const period = getPeriodFromFilters(filters) || {\n      id: START_END_DATES\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"eventdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"filter\"\n    }, i18n.t('Filter')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent,\n      \"data-test\": \"eventdialog-content\"\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-datatab\"\n    }, /*#__PURE__*/React.createElement(ProgramSelect, {\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError,\n      \"data-test\": \"eventdialog-programselect\"\n    }), program && /*#__PURE__*/React.createElement(ProgramStageSelect, {\n      program: program,\n      programStage: programStage,\n      onChange: setProgramStage,\n      className: styles.select,\n      errorText: programStageError\n    }), /*#__PURE__*/React.createElement(CoordinateField, {\n      program: program,\n      programStage: programStage,\n      value: eventCoordinateField,\n      onChange: setEventCoordinateField,\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(EventStatusSelect, {\n      value: eventStatus,\n      onChange: setEventStatus,\n      className: styles.select\n    })), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-periodtab\"\n    }, /*#__PURE__*/React.createElement(RelativePeriodSelect, {\n      period: period,\n      startEndDates: true,\n      onChange: setPeriod,\n      className: styles.select\n    }), period && period.id === START_END_DATES && /*#__PURE__*/React.createElement(StartEndDates, {\n      startDate: startDate,\n      endDate: endDate,\n      errorText: periodError\n    })), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      hideAssociatedGeometry: true,\n      hideLevelSelect: true,\n      hideGroupSelect: true,\n      warning: orgUnitsError\n    }), tab === 'filter' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"eventdialog-filtertab\"\n    }, /*#__PURE__*/React.createElement(FilterGroup, {\n      program: program,\n      programStage: programStage,\n      filters: columns.filter(c => c.filter !== undefined)\n    })), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"eventdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ImageSelect, {\n      id: \"cluster\",\n      img: \"images/cluster.png\",\n      title: i18n.t('Group events'),\n      onClick: () => setEventClustering(true),\n      isSelected: eventClustering,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(ImageSelect, {\n      id: \"nocluster\",\n      img: \"images/nocluster.png\",\n      title: i18n.t('View all events'),\n      onClick: () => setEventClustering(false),\n      isSelected: !eventClustering,\n      className: styles.flexInnerColumn\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: cssColor(eventPointColor) || EVENT_COLOR,\n      onChange: setEventPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Radius'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: eventPointRadius || EVENT_RADIUS,\n      onChange: setEventPointRadius\n    })), /*#__PURE__*/React.createElement(BufferRadius, {\n      disabled: eventClustering,\n      defaultRadius: EVENT_BUFFER\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, program ? /*#__PURE__*/React.createElement(StyleByDataItem, {\n      program: program,\n      programStage: programStage,\n      error: !legendSet && legendSetError\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.notice\n    }, /*#__PURE__*/React.createElement(NoticeBox, null, i18n.t('You can style events by data element after selecting a program.')))))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      program,\n      programStage,\n      rows,\n      filters,\n      startDate,\n      endDate,\n      method,\n      legendSet,\n      styleDataItem\n    } = this.props;\n    const period = getPeriodFromFilters(filters) || {\n      id: START_END_DATES\n    };\n    if (!program) {\n      return this.setErrorState('programError', i18n.t('Program is required'), 'data');\n    }\n    if (!programStage) {\n      return this.setErrorState('programStageError', i18n.t('Program stage is required'), 'data');\n    }\n    if (period.id === START_END_DATES) {\n      const error = getStartEndDateError(startDate, endDate);\n      if (error) {\n        return this.setErrorState('periodError', error, 'period');\n      }\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected.'), 'orgunits');\n    }\n    if (method === CLASSIFICATION_PREDEFINED && !legendSet) {\n      return this.setErrorState('legendSetError', i18n.t('No legend set is selected'), 'style');\n    }\n    if (styleDataItem && styleDataItem.optionSet && !styleDataItem.optionSet.options) {\n      // Occurs when there are too many options\n      return this.setErrorState('styleDataItemError', '', 'style');\n    }\n    return true;\n  }\n}\n_defineProperty(EventDialog, \"propTypes\", {\n  setEndDate: PropTypes.func.isRequired,\n  setEventClustering: PropTypes.func.isRequired,\n  setEventCoordinateField: PropTypes.func.isRequired,\n  setEventPointColor: PropTypes.func.isRequired,\n  setEventPointRadius: PropTypes.func.isRequired,\n  setEventStatus: PropTypes.func.isRequired,\n  // setFallbackCoordinateField: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  setPeriod: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setProgramStage: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  columns: PropTypes.array,\n  endDate: PropTypes.string,\n  eventClustering: PropTypes.bool,\n  eventCoordinateField: PropTypes.string,\n  eventPointColor: PropTypes.string,\n  eventPointRadius: PropTypes.number,\n  eventStatus: PropTypes.string,\n  // fallbackCoordinateField: PropTypes.string,\n  filters: PropTypes.array,\n  legendSet: PropTypes.object,\n  method: PropTypes.number,\n  orgUnits: PropTypes.object,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    trackedEntityType: PropTypes.object\n  }),\n  programStage: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  styleDataItem: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    optionSet: PropTypes.shape({\n      options: PropTypes.array\n    })\n  }),\n  systemSettings: PropTypes.object\n});\nexport default connect(null, {\n  setProgram,\n  setProgramStage,\n  setEventStatus,\n  setEventCoordinateField,\n  setEventClustering,\n  setEventPointColor,\n  setEventPointRadius,\n  // setFallbackCoordinateField,\n  setPeriod,\n  setStartDate,\n  setEndDate,\n  setOrgUnits\n}, null, {\n  forwardRef: true\n})(EventDialog);","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useCallback } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load org unit group sets\nconst ORG_UNIT_GROUP_SETS_QUERY = {\n  sets: {\n    resource: 'organisationUnitGroupSets',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst GroupSetSelect = _ref2 => {\n  let {\n    label = i18n.t('Group set'),\n    value,\n    allowNone,\n    onChange,\n    errorText,\n    className\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(ORG_UNIT_GROUP_SETS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const groupSets = useMemo(() => [...(allowNone ? [{\n    id: 'none',\n    name: i18n.t('None')\n  }] : []), ...((data === null || data === void 0 ? void 0 : data.sets.organisationUnitGroupSets) || [])], [data, allowNone]);\n  const onGroupSetChange = useCallback(item => onChange(item.id !== 'none' ? item : undefined), [onChange]);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: label,\n    loading: loading,\n    items: groupSets,\n    value: value ? value.id : null,\n    onChange: onGroupSetChange,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!value && errorText ? errorText : null),\n    className: className,\n    \"data-test\": \"orgunitgroupsetselect\"\n  });\n};\nGroupSetSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  allowNone: PropTypes.bool,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  label: PropTypes.string,\n  value: PropTypes.object\n};\nexport default GroupSetSelect;","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"GroupStyle_item__6Iy9l\",\"color\":\"GroupStyle_color__F3Dhm\",\"symbol\":\"GroupStyle_symbol__JCmId\",\"label\":\"GroupStyle_label__1DbEY\"};","import { getInstance as getD2 } from 'd2';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport styles from './styles/GroupStyle.module.css';\nconst GroupStyle = _ref => {\n  let {\n    name,\n    color,\n    symbol,\n    styleType\n  } = _ref;\n  const [imagePath, setImagePath] = useState();\n  const useColor = styleType !== 'SYMBOL';\n  useEffect(() => {\n    getD2().then(d2 => setImagePath(`${d2.system.systemInfo.contextPath}/images/orgunitgroup/`));\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.item\n  }, useColor ? /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.color,\n    style: {\n      backgroundColor: color\n    }\n  }) : /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.symbol,\n    style: {\n      backgroundImage: imagePath && symbol ? `url(${imagePath}${symbol})` : 'none'\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.label\n  }, name));\n};\nGroupStyle.propTypes = {\n  color: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  styleType: PropTypes.string.isRequired,\n  symbol: PropTypes.string\n};\nexport default GroupStyle;","// extracted by mini-css-extract-plugin\nexport default {\"groupSetStyle\":\"GroupSetStyle_groupSetStyle__fiBJG\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { STYLE_TYPE_COLOR } from '../../constants/layers.js';\nimport { parseGroupSet } from '../../util/orgUnits.js';\nimport GroupStyle from './GroupStyle.js';\nimport styles from './styles/GroupSetStyle.module.css';\nconst GROUP_SETS_QUERY = {\n  groupSets: {\n    resource: 'organisationUnitGroupSets',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: ['organisationUnitGroups[id,name,color,symbol]']\n    }\n  }\n};\nconst GroupSetStyle = _ref2 => {\n  let {\n    defaultStyleType = STYLE_TYPE_COLOR,\n    groupSet\n  } = _ref2;\n  const [groups, setGroups] = useState([]);\n  const {\n    error: err,\n    refetch\n  } = useDataQuery(GROUP_SETS_QUERY, {\n    lazy: true,\n    onComplete: _ref3 => {\n      let {\n        groupSets\n      } = _ref3;\n      const groupsWithColors = parseGroupSet({\n        organisationUnitGroups: groupSets.organisationUnitGroups\n      });\n      setGroups(groupsWithColors);\n    }\n  });\n  useEffect(() => {\n    if (groupSet) {\n      refetch({\n        id: groupSet.id\n      });\n    }\n  }, [groupSet, refetch]);\n  if (err) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, i18n.t('Failed to load organisation unit groups.'));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.groupSetStyle\n  }, groups === null || groups === void 0 ? void 0 : groups.map(group => /*#__PURE__*/React.createElement(GroupStyle, _extends({\n    key: group.id,\n    styleType: defaultStyleType\n  }, group))));\n};\nGroupSetStyle.propTypes = {\n  defaultStyleType: PropTypes.string,\n  groupSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default GroupSetStyle;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setOrganisationUnitGroupSet } from '../../actions/layerEdit.js';\nimport styles from '../edit/styles/LayerDialog.module.css';\nimport GroupSetSelect from './GroupSetSelect.js';\nimport GroupSetStyle from './GroupSetStyle.js';\nconst StyleByGroupSet = _ref => {\n  let {\n    defaultStyleType,\n    groupSet,\n    setOrganisationUnitGroupSet\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(GroupSetSelect, {\n    label: i18n.t('Style by group set'),\n    value: groupSet,\n    allowNone: true,\n    onChange: setOrganisationUnitGroupSet,\n    className: styles.select\n  }), groupSet && /*#__PURE__*/React.createElement(GroupSetStyle, {\n    defaultStyleType: defaultStyleType,\n    groupSet: groupSet\n  }));\n};\nStyleByGroupSet.propTypes = {\n  setOrganisationUnitGroupSet: PropTypes.func.isRequired,\n  defaultStyleType: PropTypes.string,\n  groupSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    groupSet: layerEdit.organisationUnitGroupSet\n  };\n}, {\n  setOrganisationUnitGroupSet\n})(StyleByGroupSet);","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setLabels, setLabelFontColor, setLabelFontSize, setLabelFontWeight, setLabelFontStyle, setLabelTemplate } from '../../../actions/layerEdit.js';\nimport { LABEL_TEMPLATE_NAME_ONLY } from '../../../constants/layers.js';\nimport { Checkbox, FontStyle, LabelDisplayOptions } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst Labels = _ref => {\n  let {\n    includeDisplayOption,\n    labels,\n    labelTemplate,\n    labelFontColor,\n    labelFontSize,\n    labelFontStyle,\n    labelFontWeight,\n    setLabels,\n    setLabelTemplate,\n    setLabelFontColor,\n    setLabelFontSize,\n    setLabelFontWeight,\n    setLabelFontStyle\n  } = _ref;\n  useEffect(() => {\n    if (labels && includeDisplayOption && !labelTemplate) {\n      setLabelTemplate(LABEL_TEMPLATE_NAME_ONLY);\n    }\n  }, [labels, includeDisplayOption, labelTemplate, setLabelTemplate]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.flexInnerColumnFlow)\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Labels'),\n    checked: labels,\n    onChange: setLabels\n  }), labels && /*#__PURE__*/React.createElement(React.Fragment, null, includeDisplayOption && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.labelDisplayOptions\n  }, /*#__PURE__*/React.createElement(LabelDisplayOptions, {\n    option: labelTemplate,\n    onDisplayOptionChange: setLabelTemplate\n  })), /*#__PURE__*/React.createElement(FontStyle, {\n    color: labelFontColor,\n    size: labelFontSize,\n    weight: labelFontWeight,\n    fontStyle: labelFontStyle,\n    onColorChange: setLabelFontColor,\n    onSizeChange: setLabelFontSize,\n    onWeightChange: setLabelFontWeight,\n    onStyleChange: setLabelFontStyle\n  }))));\n};\nLabels.propTypes = {\n  setLabelFontColor: PropTypes.func.isRequired,\n  setLabelFontSize: PropTypes.func.isRequired,\n  setLabelFontStyle: PropTypes.func.isRequired,\n  setLabelFontWeight: PropTypes.func.isRequired,\n  setLabelTemplate: PropTypes.func.isRequired,\n  setLabels: PropTypes.func.isRequired,\n  includeDisplayOption: PropTypes.bool,\n  labelFontColor: PropTypes.string,\n  labelFontSize: PropTypes.string,\n  labelFontStyle: PropTypes.string,\n  labelFontWeight: PropTypes.string,\n  labelTemplate: PropTypes.string,\n  labels: PropTypes.bool\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    labels: layerEdit.labels,\n    labelTemplate: layerEdit.labelTemplate,\n    labelFontColor: layerEdit.labelFontColor,\n    labelFontSize: layerEdit.labelFontSize,\n    labelFontStyle: layerEdit.labelFontStyle,\n    labelFontWeight: layerEdit.labelFontWeight\n  };\n}, {\n  setLabels,\n  setLabelTemplate,\n  setLabelFontColor,\n  setLabelFontSize,\n  setLabelFontWeight,\n  setLabelFontStyle\n})(Labels);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setOrgUnits, setRadiusLow, setOrganisationUnitGroupSet, setOrganisationUnitColor } from '../../actions/layerEdit.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, FACILITY_BUFFER, STYLE_TYPE_SYMBOL, MIN_RADIUS, MAX_RADIUS, NONE } from '../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../util/analytics.js';\nimport { Tab, Tabs, NumberField, ColorPicker } from '../core/index.js';\nimport StyleByGroupSet from '../groupSet/StyleByGroupSet.js';\nimport OrgUnitSelect from '../orgunits/OrgUnitSelect.js';\nimport BufferRadius from './shared/BufferRadius.js';\nimport Labels from './shared/Labels.js';\nimport styles from './styles/LayerDialog.module.css';\nconst QUERY = {\n  configuration: {\n    resource: 'configuration'\n  }\n};\nconst ORGUNITS_TAB = 'orgunits';\nconst FacilityDialog = _ref => {\n  let {\n    rows = [],\n    radiusLow,\n    organisationUnitColor,\n    organisationUnitGroupSet,\n    orgUnitField,\n    id,\n    validateLayer,\n    onLayerValidation\n  } = _ref;\n  const [tab, setTab] = useState(ORGUNITS_TAB);\n  const [orgUnitsError, setOrgUnitsError] = useState();\n  const {\n    data\n  } = useDataQuery(QUERY);\n  const dispatch = useDispatch();\n  const facilityOrgUnitLevel = data === null || data === void 0 ? void 0 : data.configuration.facilityOrgUnitLevel;\n  const facilityOrgUnitGroupSet = data === null || data === void 0 ? void 0 : data.configuration.facilityOrgUnitGroupSet;\n  const orgUnits = getOrgUnitsFromRows(rows);\n  const hasOrgUnits = useCallback(() => {\n    if (!orgUnits.length) {\n      setTab(ORGUNITS_TAB);\n      setOrgUnitsError(i18n.t('No organisation units are selected'));\n      return false;\n    }\n    return true;\n  }, [orgUnits]);\n  useEffect(() => {\n    if (validateLayer) {\n      onLayerValidation(hasOrgUnits());\n    }\n  }, [validateLayer, onLayerValidation, hasOrgUnits]);\n  useEffect(() => {\n    if (!id) {\n      // Set default org unit level\n      if (facilityOrgUnitLevel) {\n        const {\n          id,\n          name\n        } = facilityOrgUnitLevel;\n        dispatch(setOrgUnits({\n          dimension: 'ou',\n          items: [{\n            id: `LEVEL-${id}`,\n            name\n          }]\n        }));\n      }\n\n      // Set default org unit group set\n      if (facilityOrgUnitGroupSet) {\n        dispatch(setOrganisationUnitGroupSet(facilityOrgUnitGroupSet));\n      }\n    }\n  }, [id, facilityOrgUnitLevel, facilityOrgUnitGroupSet, dispatch]);\n  const hasOrgUnitField = !!orgUnitField && orgUnitField !== NONE;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content,\n    \"data-test\": \"facilitydialog\"\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: ORGUNITS_TAB\n  }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, tab === ORGUNITS_TAB && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n    warning: orgUnitsError\n  }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow,\n    \"data-test\": \"facilitydialog-styletab\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(Labels, null), /*#__PURE__*/React.createElement(BufferRadius, {\n    defaultRadius: FACILITY_BUFFER,\n    hasOrgUnitField: hasOrgUnitField\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(StyleByGroupSet, {\n    defaultStyleType: STYLE_TYPE_SYMBOL\n  }), !organisationUnitGroupSet && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Point color'),\n    color: organisationUnitColor || ORG_UNIT_COLOR,\n    onChange: val => dispatch(setOrganisationUnitColor(val)),\n    className: styles.narrowField\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Point radius'),\n    value: radiusLow !== undefined ? radiusLow : ORG_UNIT_RADIUS,\n    min: MIN_RADIUS,\n    max: MAX_RADIUS,\n    onChange: val => dispatch(setRadiusLow(val)),\n    disabled: !!organisationUnitGroupSet,\n    className: styles.narrowFieldIcon\n  }))))));\n};\nFacilityDialog.propTypes = {\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  id: PropTypes.string,\n  orgUnitField: PropTypes.string,\n  organisationUnitColor: PropTypes.string,\n  organisationUnitGroupSet: PropTypes.object,\n  radiusLow: PropTypes.number,\n  rows: PropTypes.array\n};\nexport default FacilityDialog;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useEffect } from 'react';\nimport { Checkbox, ColorPicker, NumberField } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst FILL = 'color';\nconst STROKE_COLOR = 'strokeColor';\nconst STROKE_WIDTH = 'weight';\nconst POINT_SIZE = 'pointSize';\nconst FILL_TRANSPARENT = 'transparent';\nconst FIELD_TYPE_COLOR = 'color';\nconst FIELD_TYPE_NUMBER = 'number';\nconst defaultNoTransparentFillColor = '#EEEEEE';\n\n// Wrapped in a function to make sure i18n is applied\nconst getFields = () => [{\n  id: FILL,\n  label: i18n.t('Fill color'),\n  type: FIELD_TYPE_COLOR,\n  defaultValue: 'transparent',\n  allowTransparent: true\n}, {\n  id: STROKE_COLOR,\n  label: i18n.t('Line/stroke color'),\n  type: FIELD_TYPE_COLOR,\n  defaultValue: '#333333'\n}, {\n  id: STROKE_WIDTH,\n  label: i18n.t('Line/stroke width'),\n  type: FIELD_TYPE_NUMBER,\n  defaultValue: 1,\n  min: 0,\n  max: 10,\n  helpText: i18n.t('Line/stroke width must be between 0-10.')\n}, {\n  id: POINT_SIZE,\n  label: i18n.t('Point radius'),\n  type: FIELD_TYPE_NUMBER,\n  defaultValue: 5,\n  min: 1\n}];\nconst FeatureStyle = _ref => {\n  let {\n    style,\n    onChange\n  } = _ref;\n  const fields = useMemo(() => getFields(), []);\n  useEffect(() => {\n    if (!style) {\n      onChange({\n        [FILL]: FILL_TRANSPARENT,\n        [STROKE_COLOR]: '#333333',\n        [STROKE_WIDTH]: 1,\n        [POINT_SIZE]: 5\n      });\n    }\n  }, [style, onChange]);\n  if (!style) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, fields.map(_ref2 => {\n    let {\n      id,\n      label,\n      type,\n      allowTransparent,\n      min,\n      max,\n      defaultValue,\n      helpText\n    } = _ref2;\n    return type === FIELD_TYPE_COLOR ? /*#__PURE__*/React.createElement(\"div\", {\n      key: id\n    }, allowTransparent && /*#__PURE__*/React.createElement(Checkbox, {\n      label: label,\n      checked: style[id] !== FILL_TRANSPARENT,\n      onChange: isChecked => onChange({\n        [id]: isChecked ? defaultNoTransparentFillColor : FILL_TRANSPARENT\n      })\n    }), style[id] !== FILL_TRANSPARENT && /*#__PURE__*/React.createElement(ColorPicker, {\n      label: allowTransparent ? '' : label,\n      color: style[id],\n      onChange: color => onChange({\n        [id]: color\n      }),\n      className: styles.narrowField\n    })) : /*#__PURE__*/React.createElement(NumberField, {\n      key: id,\n      label: label,\n      value: style[id],\n      onChange: value => {\n        let val = parseInt(value);\n        if (min || max) {\n          if (val < min || Number.isNaN(val)) {\n            val = min;\n          }\n          if (val > max) {\n            val = max;\n          }\n        }\n        if (Number.isNaN(val)) {\n          val = defaultValue;\n        }\n        onChange({\n          [id]: parseInt(val)\n        });\n      },\n      inputWidth: '120px',\n      min: min,\n      max: max,\n      helpText: helpText\n    });\n  }));\n};\nFeatureStyle.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  style: PropTypes.object\n};\nexport default FeatureStyle;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setFeatureStyle } from '../../../actions/layerEdit.js';\nimport { Tab, Tabs } from '../../core/index.js';\nimport FeatureStyle from '../shared/FeatureStyle.js';\nimport styles from '../styles/LayerDialog.module.css';\nconst GeoJsonDialog = _ref => {\n  let {\n    featureStyle,\n    validateLayer,\n    onLayerValidation\n  } = _ref;\n  const [tab, setTab] = useState('style');\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (validateLayer) {\n      onLayerValidation(true);\n    }\n  }, [validateLayer, onLayerValidation]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(Tabs, {\n    value: tab,\n    onChange: setTab\n  }, /*#__PURE__*/React.createElement(Tab, {\n    value: \"style\"\n  }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tabContent\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumnFlow\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexColumn\n  }, /*#__PURE__*/React.createElement(FeatureStyle, {\n    style: featureStyle,\n    onChange: val => dispatch(setFeatureStyle(val))\n  })))));\n};\nGeoJsonDialog.propTypes = {\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  featureStyle: PropTypes.object\n};\nexport default GeoJsonDialog;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setRadiusLow, setOrganisationUnitColor } from '../../../actions/layerEdit.js';\nimport { ORG_UNIT_COLOR, ORG_UNIT_RADIUS, STYLE_TYPE_COLOR, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { Tab, Tabs, NumberField, ColorPicker } from '../../core/index.js';\nimport StyleByGroupSet from '../../groupSet/StyleByGroupSet.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport Labels from '../shared/Labels.js';\nimport styles from '../styles/LayerDialog.module.css';\nclass OrgUnitDialog extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      tab: 'orgunits'\n    });\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      radiusLow,\n      organisationUnitColor,\n      setOrganisationUnitColor,\n      setRadiusLow\n    } = this.props;\n    const {\n      tab,\n      orgUnitsError\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"orgunitdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Organisation Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      warning: orgUnitsError\n    }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"orgunitdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(Labels, null), /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Boundary color'),\n      color: organisationUnitColor || ORG_UNIT_COLOR,\n      onChange: setOrganisationUnitColor,\n      className: styles.narrowField\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point radius'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: radiusLow !== undefined ? radiusLow : ORG_UNIT_RADIUS,\n      onChange: setRadiusLow,\n      className: styles.narrowFieldIcon\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(StyleByGroupSet, {\n      defaultStyleType: STYLE_TYPE_COLOR\n    })))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      rows\n    } = this.props;\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected'), 'orgunits');\n    }\n    return true;\n  }\n}\n_defineProperty(OrgUnitDialog, \"propTypes\", {\n  setOrganisationUnitColor: PropTypes.func.isRequired,\n  setRadiusLow: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  organisationUnitColor: PropTypes.string,\n  radiusLow: PropTypes.number,\n  rows: PropTypes.array\n});\nexport default connect(null, {\n  setRadiusLow,\n  setOrganisationUnitColor\n}, null, {\n  forwardRef: true\n})(OrgUnitDialog);","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"LayerEdit_content__A1H9D\"};","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all data element groups\nconst DATA_ELEMENT_GROUPS_QUERY = {\n  groups: {\n    resource: 'dataElementGroups',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementGroupSelect = _ref2 => {\n  let {\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(DATA_ELEMENT_GROUPS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element group'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.groups.dataElementGroups,\n    value: dataElementGroup === null || dataElementGroup === void 0 ? void 0 : dataElementGroup.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElementGroup && errorText ? errorText : null),\n    dataTest: \"dataelementgroupselect\"\n  });\n};\nDataElementGroupSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementGroupSelect;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all data elements within a group\nconst DATA_ELEMENT_OPERAND_QUERY = {\n  operands: {\n    resource: 'dataElementOperands',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `dataElement.dataElementGroups.id:eq:${groupId}`,\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementOperandSelect = _ref2 => {\n  let {\n    dataElement,\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DATA_ELEMENT_OPERAND_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dataElementGroup) {\n      refetch({\n        groupId: dataElementGroup.id,\n        nameProperty\n      });\n    }\n  }, [dataElementGroup, nameProperty, refetch]);\n  if (!dataElementGroup && !dataElement) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.operands.dataElementOperands;\n  if (!items && dataElement) {\n    items = [dataElement]; // If favorite is loaded, we only know the used data element\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element operand'),\n    loading: loading,\n    items: items,\n    value: dataElement === null || dataElement === void 0 ? void 0 : dataElement.id,\n    onChange: dataElement => onChange(dataElement, 'operand'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElement && errorText ? errorText : null),\n    dataTest: \"dataelementoperandselect\"\n  });\n};\nDataElementOperandSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElement: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementOperandSelect;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all data elements within a group\nconst DATA_ELEMENTS_QUERY = {\n  dataElements: {\n    resource: 'dataElements',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `dataElementGroups.id:eq:${groupId}`,\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`],\n        domainType: 'aggregate',\n        paging: false\n      };\n    }\n  }\n};\nconst DataElementSelect = _ref2 => {\n  let {\n    dataElement,\n    dataElementGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DATA_ELEMENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dataElementGroup) {\n      refetch({\n        groupId: dataElementGroup.id,\n        nameProperty\n      });\n    }\n  }, [dataElementGroup, nameProperty, refetch]);\n  if (!dataElementGroup && !dataElement) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.dataElements.dataElements;\n  if (!items && dataElement) {\n    items = [dataElement]; // If favorite is loaded, we only know the used data element\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data element'),\n    loading: loading,\n    items: items,\n    value: dataElement === null || dataElement === void 0 ? void 0 : dataElement.id,\n    onChange: dataElement => onChange(dataElement, 'dataElement'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataElement && errorText ? errorText : null),\n    dataTest: \"dataelementselect\"\n  });\n};\nDataElementSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataElement: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  dataElementGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataElementSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Radio, RadioGroup } from '../core/index.js';\nconst TotalsDetailsSelect = _ref => {\n  let {\n    operand,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(RadioGroup, {\n    name: \"operand\",\n    value: operand === true ? 'details' : 'totals',\n    onChange: value => onChange(value === 'details'),\n    display: \"row\"\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: \"totals\",\n    label: i18n.t('Totals')\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"details\",\n    label: i18n.t('Details')\n  }));\n};\nTotalsDetailsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  operand: PropTypes.bool // true = 'details'\n};\n\nexport default TotalsDetailsSelect;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useProgramTrackedEntityAttributes } from '../../hooks/useProgramTrackedEntityAttributes.js';\nimport { combineDataItems } from '../../util/analytics.js';\nimport { SelectField } from '../core/index.js';\nconst excludeValueTypes = ['FILE_RESOURCE', 'ORGANISATION_UNIT', 'COORDINATE', 'DATE', 'TEXT', 'BOOLEAN', 'LONG_TEXT'];\nconst PROGRAM_DATA_ELEMENTS_QUERY = {\n  programDataElements: {\n    resource: 'programDataElements',\n    params: _ref => {\n      let {\n        id,\n        nameProperty\n      } = _ref;\n      return {\n        program: id,\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`, 'valueType'],\n        paging: false\n      };\n    }\n  }\n};\nconst EventDataItemSelect = _ref2 => {\n  let {\n    dataItem,\n    program,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    programAttributes\n  } = useProgramTrackedEntityAttributes({\n    programId: program === null || program === void 0 ? void 0 : program.id\n  });\n  const {\n    data,\n    refetch: refetchProgramDataElements\n  } = useDataQuery(PROGRAM_DATA_ELEMENTS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (program) {\n      refetchProgramDataElements({\n        id: program.id,\n        nameProperty\n      });\n    }\n  }, [program, refetchProgramDataElements, nameProperty]);\n  const dataItems = combineDataItems(programAttributes || [], (data === null || data === void 0 ? void 0 : data.programDataElements.programDataElements) || [], null, excludeValueTypes).map(item => ({\n    ...item,\n    id: !item.id.includes('.') ? `${program.id}.${item.id}` : item.id // Add program id to tracked entity attributes\n  }));\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Event data item'),\n    items: dataItems,\n    value: dataItem ? dataItem.id : null,\n    onChange: dataItem => onChange(dataItem, 'eventDataItem'),\n    className: className,\n    errorText: !dataItem && errorText ? errorText : null\n  });\n};\nEventDataItemSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataItem: PropTypes.object,\n  errorText: PropTypes.string,\n  program: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default EventDataItemSelect;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all data sets (reporting rates)\nconst DATA_SETS_QUERY = {\n  sets: {\n    resource: 'dataSets',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['dimensionItem~rename(id)', `${nameProperty}~rename(name)`, 'legendSet[id]'],\n        paging: false\n      };\n    }\n  }\n};\nconst DataSetsSelect = _ref2 => {\n  let {\n    dataSet,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(DATA_SETS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const dataSetId = dataSet ? dataSet.id.split('.')[0] : null; // Remove \".REPORTING_RATE\"\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data set'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.sets.dataSets,\n    value: dataSetId,\n    onChange: dataSet => onChange(dataSet, 'reportingRate') // Reporting rates\n    ,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!dataSet && errorText ? errorText : null)\n  });\n};\nDataSetsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dataSet: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  errorText: PropTypes.string\n};\nexport default DataSetsSelect;","// extracted by mini-css-extract-plugin\nexport default {\"select\":\"DimensionItemsSelect_select__ma-J4\"};","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/DimensionItemsSelect.module.css';\n\n// Load dimension items\nconst DIMENSION_ITEMS_QUERY = {\n  items: {\n    resource: 'dimensions',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return `${id}/items`;\n    },\n    params: _ref2 => {\n      let {\n        nameProperty\n      } = _ref2;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`],\n        order: `${nameProperty}:asc`,\n        paging: false\n      };\n    }\n  }\n};\nconst DimensionItemsSelect = _ref3 => {\n  let {\n    dimension,\n    value,\n    onChange\n  } = _ref3;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(DIMENSION_ITEMS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (dimension) {\n      refetch({\n        id: dimension,\n        nameProperty\n      });\n    }\n  }, [dimension, nameProperty, refetch]);\n  const onDimensionItemClick = ids => onChange(ids.map(id => data.items.items.find(item => item.id === id)));\n  const items = data === null || data === void 0 ? void 0 : data.items.items;\n  const foundValues = value && items ? value.filter(id => items.find(f => f.id === id)) : undefined;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Items'),\n    loading: loading,\n    items: items,\n    value: foundValues,\n    multiple: true,\n    onChange: onDimensionItemClick,\n    errorText: error === null || error === void 0 ? void 0 : error.message,\n    className: styles.select\n  });\n};\nDimensionItemsSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  value: PropTypes.array\n};\nexport default DimensionItemsSelect;","// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"DimensionSelect_dropdown__Y5vgH\",\"dimensions\":\"DimensionSelect_dimensions__BdCyG\"};","import { DimensionsPanel, useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Popover, IconChevronDown24, Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState } from 'react';\nimport styles from './styles/DimensionSelect.module.css';\n\n// Include the following dimension types\nconst dimensionTypes = ['CATEGORY', 'CATEGORY_OPTION_GROUP_SET', 'ORGANISATION_UNIT_GROUP_SET'];\n\n// Load above dimension types\nconst DIMENSIONS_QUERY = {\n  dimensions: {\n    resource: 'dimensions',\n    params: _ref => {\n      let {\n        nameProperty\n      } = _ref;\n      return {\n        fields: ['id', `${nameProperty}~rename(name)`, 'dimensionType'],\n        filter: `dimensionType:in:[${dimensionTypes.join(',')}]`,\n        order: `${nameProperty}:asc`,\n        paging: false\n      };\n    }\n  }\n};\nconst DimensionSelect = _ref2 => {\n  let {\n    dimension,\n    onChange\n  } = _ref2;\n  const [isOpen, setIsOpen] = useState(false);\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    error,\n    data\n  } = useDataQuery(DIMENSIONS_QUERY, {\n    variables: {\n      nameProperty\n    }\n  });\n  const dropdownRef = useRef();\n  const findDimension = id => data && data.dimensions.dimensions.find(d => d.id === id);\n  const selected = findDimension(dimension);\n  const onDimensionClick = dim => {\n    if (dim !== dimension) {\n      onChange(findDimension(dim));\n    }\n    setIsOpen(false);\n  };\n  if (error) {\n    return /*#__PURE__*/React.createElement(Help, {\n      error: true\n    }, error.message);\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => setIsOpen(true),\n    className: styles.dropdown\n  }, /*#__PURE__*/React.createElement(\"label\", null, i18n.t('Dimension')), /*#__PURE__*/React.createElement(\"div\", {\n    ref: dropdownRef\n  }, /*#__PURE__*/React.createElement(\"span\", null, selected ? selected.name : ''), /*#__PURE__*/React.createElement(IconChevronDown24, null))), isOpen && /*#__PURE__*/React.createElement(Popover, {\n    reference: dropdownRef,\n    placement: \"bottom-start\",\n    onClickOutside: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dimensions\n  }, /*#__PURE__*/React.createElement(DimensionsPanel, {\n    dimensions: data.dimensions.dimensions,\n    onDimensionClick: onDimensionClick,\n    selectedIds: [dimension]\n  }))));\n};\nDimensionSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  dimension: PropTypes.string\n};\nexport default DimensionSelect;","// extracted by mini-css-extract-plugin\nexport default {\"filterRow\":\"DimensionFilterRow_filterRow__v1Kno\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport RemoveFilter from '../filter/RemoveFilter.js';\nimport DimensionItemsSelect from './DimensionItemsSelect.js';\nimport DimensionSelect from './DimensionSelect.js';\nimport styles from './styles/DimensionFilterRow.module.css';\nconst DimensionFilterRow = _ref => {\n  let {\n    dimension,\n    items,\n    index,\n    onChange,\n    onRemove\n  } = _ref;\n  const onSelect = (dimension, items) => onChange(index, {\n    dimension,\n    items\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterRow\n  }, /*#__PURE__*/React.createElement(DimensionSelect, {\n    dimension: dimension,\n    onChange: selectedDimension => onSelect(selectedDimension.id)\n  }), /*#__PURE__*/React.createElement(DimensionItemsSelect, {\n    dimension: dimension,\n    value: items ? items.map(item => item.id) : null,\n    onChange: items => onSelect(dimension, items)\n  }), /*#__PURE__*/React.createElement(RemoveFilter, {\n    onClick: () => onRemove(index)\n  }));\n};\nDimensionFilterRow.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired,\n  dimension: PropTypes.string,\n  index: PropTypes.number,\n  items: PropTypes.array\n};\nexport default DimensionFilterRow;","// extracted by mini-css-extract-plugin\nexport default {\"dimensionFilter\":\"DimensionFilter_dimensionFilter__4oaV1\",\"addFilter\":\"DimensionFilter_addFilter__bjOP-\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport i18n from '@dhis2/d2-i18n';\nimport { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { addDimensionFilter, removeDimensionFilter, changeDimensionFilter } from '../../actions/layerEdit.js';\nimport DimensionFilterRow from './DimensionFilterRow.js';\nimport styles from './styles/DimensionFilter.module.css';\nconst DimensionFilter = _ref => {\n  let {\n    dimensions = [],\n    addDimensionFilter,\n    changeDimensionFilter,\n    removeDimensionFilter\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.dimensionFilter\n  }, dimensions.map((item, index) => /*#__PURE__*/React.createElement(DimensionFilterRow, _extends({\n    key: index,\n    index: index,\n    onChange: changeDimensionFilter,\n    onRemove: removeDimensionFilter\n  }, item))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.addFilter\n  }, /*#__PURE__*/React.createElement(Button, {\n    basic: true,\n    onClick: () => addDimensionFilter()\n  }, i18n.t('Add filter'))));\n};\nDimensionFilter.propTypes = {\n  addDimensionFilter: PropTypes.func.isRequired,\n  changeDimensionFilter: PropTypes.func.isRequired,\n  removeDimensionFilter: PropTypes.func.isRequired,\n  dimensions: PropTypes.array\n};\nexport default connect(null, {\n  addDimensionFilter,\n  removeDimensionFilter,\n  changeDimensionFilter\n})(DimensionFilter);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all indicator groups\nconst INDICATOR_GROUPS_QUERY = {\n  groups: {\n    resource: 'indicatorGroups',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst IndicatorGroupSelect = _ref => {\n  let {\n    indicatorGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(INDICATOR_GROUPS_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Indicator group'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.groups.indicatorGroups,\n    value: indicatorGroup === null || indicatorGroup === void 0 ? void 0 : indicatorGroup.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!indicatorGroup && errorText ? errorText : null),\n    dataTest: \"indicatorgroupselect\"\n  });\n};\nIndicatorGroupSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  indicatorGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default IndicatorGroupSelect;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all indicators within a group\nconst INDICATORS_QUERY = {\n  indicators: {\n    resource: 'indicators',\n    params: _ref => {\n      let {\n        groupId,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `indicatorGroups.id:eq:${groupId}`,\n        fields: ['id', `${nameProperty}~rename(name)`, 'legendSet[id]'],\n        paging: false\n      };\n    }\n  }\n};\nconst IndicatorSelect = _ref2 => {\n  let {\n    indicator,\n    indicatorGroup,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(INDICATORS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (indicatorGroup) {\n      refetch({\n        groupId: indicatorGroup.id,\n        nameProperty\n      });\n    }\n  }, [indicatorGroup, nameProperty, refetch]);\n  if (!indicatorGroup && !indicator) {\n    return null;\n  }\n  let items = data === null || data === void 0 ? void 0 : data.indicators.indicators;\n  if (!items && indicator) {\n    items = [indicator]; // If favorite is loaded, we only know the used indicator\n  }\n\n  return /*#__PURE__*/React.createElement(SelectField, {\n    key: \"indicators\",\n    loading: loading,\n    label: i18n.t('Indicator'),\n    items: items,\n    value: indicator === null || indicator === void 0 ? void 0 : indicator.id,\n    onChange: dataItem => onChange(dataItem, 'indicator'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!indicator && errorText ? errorText : null),\n    dataTest: \"indicatorselect\"\n  });\n};\nIndicatorSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  indicator: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  }),\n  indicatorGroup: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default IndicatorSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { RELATIVE_PERIODS } from '../../constants/periods.js';\nimport { getPeriodTypes, getRelativePeriods } from '../../util/periods.js';\nimport { SelectField } from '../core/index.js';\nconst PeriodTypeSelect = _ref => {\n  let {\n    onChange,\n    className,\n    errorText,\n    hiddenPeriods,\n    period,\n    value\n  } = _ref;\n  useEffect(() => {\n    const relativePeriodType = {\n      id: RELATIVE_PERIODS,\n      name: i18n.t('Relative')\n    };\n    if (!value && period) {\n      if (getRelativePeriods().find(p => p.id === period.id)) {\n        // false will not clear the period dropdown\n        onChange(relativePeriodType, false);\n      }\n    } else if (!value) {\n      // set relativePeriods as default\n      onChange(relativePeriodType);\n    }\n  }, [value, period, onChange]);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Period type'),\n    items: getPeriodTypes(hiddenPeriods),\n    value: value,\n    onChange: onChange,\n    className: className,\n    errorText: !value && errorText ? errorText : null,\n    dataTest: \"periodtypeselect\"\n  });\n};\nPeriodTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  hiddenPeriods: PropTypes.array,\n  period: PropTypes.object,\n  value: PropTypes.string\n};\nexport default PeriodTypeSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RENDERING_STRATEGY_SINGLE, RENDERING_STRATEGY_TIMELINE, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../../constants/layers.js';\nimport { singleMapPeriods, invalidSplitViewPeriods } from '../../constants/periods.js';\nimport usePrevious from '../../hooks/usePrevious.js';\nimport { Radio, RadioGroup } from '../core/index.js';\nconst RenderingStrategy = _ref => {\n  let {\n    layerId,\n    value = RENDERING_STRATEGY_SINGLE,\n    period = {},\n    onChange\n  } = _ref;\n  const hasOtherLayers = useSelector(_ref2 => {\n    let {\n      map\n    } = _ref2;\n    return !!map.mapViews.filter(_ref3 => {\n      let {\n        id\n      } = _ref3;\n      return id !== layerId;\n    }).length;\n  });\n  const hasOtherTimelineLayers = useSelector(_ref4 => {\n    let {\n      map\n    } = _ref4;\n    return !!map.mapViews.find(layer => layer.renderingStrategy === RENDERING_STRATEGY_TIMELINE && layer.id !== layerId);\n  });\n  const prevPeriod = usePrevious(period);\n  useEffect(() => {\n    if (period !== prevPeriod) {\n      if (singleMapPeriods.includes(period.id) && value !== RENDERING_STRATEGY_SINGLE) {\n        onChange(RENDERING_STRATEGY_SINGLE);\n      } else if (invalidSplitViewPeriods.includes(period.id) && value === RENDERING_STRATEGY_SPLIT_BY_PERIOD) {\n        // TODO: Switch to 'timeline' when we support it\n        onChange(RENDERING_STRATEGY_SINGLE);\n      }\n    }\n  }, [value, period, prevPeriod, onChange]);\n  if (singleMapPeriods.includes(period.id)) {\n    return null;\n  }\n  let helpText;\n  if (hasOtherTimelineLayers) {\n    helpText = i18n.t('Only one timeline is allowed.');\n  } else if (hasOtherLayers) {\n    helpText = i18n.t('Remove other layers to enable split map views.');\n  }\n  return /*#__PURE__*/React.createElement(RadioGroup, {\n    label: i18n.t('Display periods'),\n    value: value,\n    onChange: onChange,\n    helpText: helpText\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: \"SINGLE\",\n    label: i18n.t('Single (aggregate)')\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"TIMELINE\",\n    label: i18n.t('Timeline'),\n    disabled: hasOtherTimelineLayers\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"SPLIT_BY_PERIOD\",\n    label: i18n.t('Split map views'),\n    disabled: hasOtherLayers || invalidSplitViewPeriods.includes(period.id)\n  }));\n};\nRenderingStrategy.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  layerId: PropTypes.string,\n  period: PropTypes.object,\n  value: PropTypes.string\n};\nexport default RenderingStrategy;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { sortBy } from 'lodash/fp';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load program indicators for one program\nconst PROGRAM_INDICATORS_QUERY = {\n  indicators: {\n    resource: 'programIndicators',\n    params: _ref => {\n      let {\n        id,\n        nameProperty\n      } = _ref;\n      return {\n        filter: `program.id:eq:${id}`,\n        fields: ['id', `${nameProperty}~rename(name)`],\n        paging: false\n      };\n    }\n  }\n};\nconst ProgramIndicatorSelect = _ref2 => {\n  let {\n    program,\n    programIndicator,\n    onChange,\n    className,\n    errorText\n  } = _ref2;\n  const {\n    nameProperty\n  } = useCachedDataQuery();\n  const {\n    data,\n    loading,\n    error,\n    refetch\n  } = useDataQuery(PROGRAM_INDICATORS_QUERY, {\n    lazy: true\n  });\n  useEffect(() => {\n    if (program) {\n      refetch({\n        id: program.id,\n        nameProperty\n      });\n    }\n  }, [program, nameProperty, refetch]);\n  const indicators = sortBy('name', data === null || data === void 0 ? void 0 : data.indicators.programIndicators);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program indicator'),\n    loading: loading,\n    items: indicators,\n    value: programIndicator === null || programIndicator === void 0 ? void 0 : programIndicator.id,\n    onChange: programIndicator => onChange(programIndicator, 'programIndicator'),\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!programIndicator && errorText ? errorText : null)\n  });\n};\nProgramIndicatorSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  program: PropTypes.object,\n  programIndicator: PropTypes.object\n};\nexport default ProgramIndicatorSelect;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setAggregationType } from '../../../actions/layerEdit.js';\nimport { getThematicAggregationTypes } from '../../../constants/aggregationTypes.js';\nimport { SelectField } from '../../core/index.js';\nconst AggregationTypeSelect = _ref => {\n  let {\n    aggregationType,\n    setAggregationType,\n    className\n  } = _ref;\n  const types = getThematicAggregationTypes();\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Aggregation type'),\n    items: getThematicAggregationTypes(),\n    value: aggregationType || types[0].id,\n    onChange: type => setAggregationType(type.id),\n    className: className\n  });\n};\nAggregationTypeSelect.propTypes = {\n  setAggregationType: PropTypes.func.isRequired,\n  aggregationType: PropTypes.string,\n  className: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    aggregationType: layerEdit.aggregationType\n  };\n}, {\n  setAggregationType\n})(AggregationTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { setEventStatus } from '../../../actions/layerEdit.js';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { EVENT_STATUS_ALL, EVENT_STATUS_COMPLETED } from '../../../constants/eventStatuses.js';\nimport { Checkbox } from '../../core/index.js';\nconst eventDataTypes = [dimConf.indicator.objectName, dimConf.programIndicator.objectName, dimConf.eventDataItem.objectName];\nconst CompletedOnlyCheckbox = _ref => {\n  let {\n    valueType,\n    completedOnly,\n    setEventStatus\n  } = _ref;\n  const hasEventData = eventDataTypes.includes(valueType);\n  useEffect(() => {\n    if (completedOnly && !hasEventData) {\n      setEventStatus(EVENT_STATUS_ALL);\n    }\n  }, [completedOnly, hasEventData, setEventStatus]);\n  return hasEventData ? /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Only show completed events'),\n    checked: completedOnly,\n    onChange: isChecked => setEventStatus(isChecked ? EVENT_STATUS_COMPLETED : EVENT_STATUS_ALL)\n  }) : null;\n};\nCompletedOnlyCheckbox.propTypes = {\n  setEventStatus: PropTypes.func.isRequired,\n  completedOnly: PropTypes.bool,\n  valueType: PropTypes.string\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    completedOnly: layerEdit.eventStatus === EVENT_STATUS_COMPLETED\n  };\n}, {\n  setEventStatus\n})(CompletedOnlyCheckbox);","// extracted by mini-css-extract-plugin\nexport default {\"colorPicker\":\"NoDataColor_colorPicker__MkBea\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { NO_DATA_COLOR } from '../../../constants/layers.js';\nimport { Checkbox, ColorPicker } from '../../core/index.js';\nimport styles from './styles/NoDataColor.module.css';\nconst NoDataColor = _ref => {\n  let {\n    value,\n    onChange\n  } = _ref;\n  const onCheck = useCallback(val => onChange(val ? NO_DATA_COLOR : undefined), [onChange]);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Checkbox, {\n    label: i18n.t('Show no data'),\n    checked: !!value,\n    onChange: onCheck\n  }), value && /*#__PURE__*/React.createElement(ColorPicker, {\n    label: i18n.t('Color'),\n    color: value,\n    onChange: onChange,\n    width: 50,\n    className: styles.colorPicker\n  }));\n};\nNoDataColor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.string\n};\nexport default NoDataColor;","// extracted by mini-css-extract-plugin\nexport default {\"error\":\"RadiusSelect_error__YIA-1\"};","import i18n from '@dhis2/d2-i18n';\nimport { Help } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { setRadiusLow, setRadiusHigh } from '../../../actions/layerEdit.js';\nimport { THEMATIC_RADIUS_LOW, THEMATIC_RADIUS_HIGH, THEMATIC_RADIUS_MIN, THEMATIC_RADIUS_MAX } from '../../../constants/layers.js';\nimport { NumberField } from '../../core/index.js';\nimport styles from './styles/RadiusSelect.module.css';\nexport const isValidRadius = function () {\n  let radiusLow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : THEMATIC_RADIUS_LOW;\n  let radiusHigh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : THEMATIC_RADIUS_HIGH;\n  return !isNaN(radiusLow) && !isNaN(radiusHigh) && radiusLow <= radiusHigh && radiusLow >= THEMATIC_RADIUS_MIN && radiusHigh <= THEMATIC_RADIUS_MAX;\n};\nconst RadiusSelect = _ref => {\n  let {\n    radiusLow = THEMATIC_RADIUS_LOW,\n    radiusHigh = THEMATIC_RADIUS_HIGH,\n    setRadiusLow,\n    setRadiusHigh,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('Low radius'),\n    value: isNaN(radiusLow) ? '' : radiusLow,\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX,\n    onChange: setRadiusLow,\n    className: className\n  }), /*#__PURE__*/React.createElement(NumberField, {\n    label: i18n.t('High radius'),\n    value: isNaN(radiusHigh) ? '' : radiusHigh,\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX,\n    onChange: setRadiusHigh,\n    className: className\n  }), !isValidRadius(radiusLow, radiusHigh) && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.error\n  }, /*#__PURE__*/React.createElement(Help, {\n    warning: true\n  }, radiusHigh < radiusLow ? i18n.t('High radius should be greater than low radius') : i18n.t('Radius should be between {{min}} and {{max}}', {\n    min: THEMATIC_RADIUS_MIN,\n    max: THEMATIC_RADIUS_MAX\n  }))));\n};\nRadiusSelect.propTypes = {\n  setRadiusHigh: PropTypes.func.isRequired,\n  setRadiusLow: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  radiusHigh: PropTypes.number,\n  radiusLow: PropTypes.number\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    radiusLow: layerEdit.radiusLow,\n    radiusHigh: layerEdit.radiusHigh\n  };\n}, {\n  setRadiusLow,\n  setRadiusHigh\n})(RadiusSelect);","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setThematicMapType } from '../../../actions/layerEdit.js';\nimport { THEMATIC_CHOROPLETH, getThematicMapTypes } from '../../../constants/layers.js';\nimport { ImageSelect } from '../../core/index.js';\nimport styles from '../styles/LayerDialog.module.css';\n\n// Select between choropleth and bubble map for thematic layers\nconst ThematicMapTypeSelect = _ref => {\n  let {\n    type = THEMATIC_CHOROPLETH,\n    setThematicMapType\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flexInnerColumnFlow\n  }, getThematicMapTypes().map(_ref2 => {\n    let {\n      id,\n      name,\n      image\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(ImageSelect, {\n      key: id,\n      id: id,\n      img: image,\n      title: name,\n      onClick: setThematicMapType,\n      isSelected: type === id,\n      className: styles.flexInnerColumn\n    });\n  }));\n};\nThematicMapTypeSelect.propTypes = {\n  setThematicMapType: PropTypes.func.isRequired,\n  type: PropTypes.string\n};\nexport default connect(null, {\n  setThematicMapType\n})(ThematicMapTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { SelectField } from '../../core/index.js';\nconst ValueTypeSelect = props => {\n  const {\n    value,\n    onChange,\n    className\n  } = props;\n\n  // If value type is data element operand, make it data element\n  const type = value === dimConf.operand.objectName ? dimConf.dataElement.objectName : value;\n\n  // TODO: Avoid creating on each render (needs to be created after i18next contains translations\n  const items = [{\n    id: dimConf.indicator.objectName,\n    name: i18n.t('Indicator')\n  }, {\n    id: dimConf.dataElement.objectName,\n    name: i18n.t('Data element')\n  }, {\n    id: dimConf.dataSet.objectName,\n    name: i18n.t('Reporting rates')\n  }, {\n    id: dimConf.eventDataItem.objectName,\n    name: i18n.t('Event data items')\n  }, {\n    id: dimConf.programIndicator.objectName,\n    name: i18n.t('Program indicators')\n  }];\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Item type'),\n    items: items,\n    value: type,\n    onChange: valueType => onChange(valueType.id),\n    className: className,\n    dataTest: \"itemtypeselect\"\n  });\n};\nValueTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default ValueTypeSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setClassification, setDataItem, setDataElementGroup, setIndicatorGroup, setLegendSet, setNoDataColor, setOperand, setOrgUnits, setPeriod, setPeriodType, setRenderingStrategy, setProgram, setValueType } from '../../../actions/layerEdit.js';\nimport { dimConf } from '../../../constants/dimension.js';\nimport { DEFAULT_ORG_UNIT_LEVEL, CLASSIFICATION_PREDEFINED, CLASSIFICATION_EQUAL_INTERVALS, RENDERING_STRATEGY_SINGLE } from '../../../constants/layers.js';\nimport { RELATIVE_PERIODS, START_END_DATES } from '../../../constants/periods.js';\nimport { getDataItemFromColumns, getOrgUnitsFromRows, getPeriodFromFilters, getDimensionsFromFilters } from '../../../util/analytics.js';\nimport { isPeriodAvailable } from '../../../util/periods.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport NumericLegendStyle from '../../classification/NumericLegendStyle.js';\nimport { Tab, Tabs } from '../../core/index.js';\nimport DataElementGroupSelect from '../../dataElement/DataElementGroupSelect.js';\nimport DataElementOperandSelect from '../../dataElement/DataElementOperandSelect.js';\nimport DataElementSelect from '../../dataElement/DataElementSelect.js';\nimport TotalsDetailsSelect from '../../dataElement/TotalsDetailsSelect.js';\nimport EventDataItemSelect from '../../dataItem/EventDataItemSelect.js';\nimport DataSetsSelect from '../../dataSets/DataSetsSelect.js'; // Reporting rate\nimport DimensionFilter from '../../dimensions/DimensionFilter.js';\nimport IndicatorGroupSelect from '../../indicator/IndicatorGroupSelect.js';\nimport IndicatorSelect from '../../indicator/IndicatorSelect.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport PeriodSelect from '../../periods/PeriodSelect.js';\nimport PeriodTypeSelect from '../../periods/PeriodTypeSelect.js';\nimport RelativePeriodSelect from '../../periods/RelativePeriodSelect.js';\nimport RenderingStrategy from '../../periods/RenderingStrategy.js';\nimport StartEndDates from '../../periods/StartEndDates.js';\nimport ProgramIndicatorSelect from '../../program/ProgramIndicatorSelect.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport Labels from '../shared/Labels.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport AggregationTypeSelect from './AggregationTypeSelect.js';\nimport CompletedOnlyCheckbox from './CompletedOnlyCheckbox.js';\nimport NoDataColor from './NoDataColor.js';\nimport RadiusSelect, { isValidRadius } from './RadiusSelect.js';\nimport ThematicMapTypeSelect from './ThematicMapTypeSelect.js';\nimport ValueTypeSelect from './ValueTypeSelect.js';\nclass ThematicDialog extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      tab: 'data'\n    });\n  }\n  componentDidMount() {\n    const {\n      valueType,\n      columns,\n      rows,\n      filters,\n      orgUnits,\n      setValueType,\n      startDate,\n      systemSettings,\n      endDate,\n      setPeriod,\n      setOrgUnits\n    } = this.props;\n    const dataItem = getDataItemFromColumns(columns);\n    const period = getPeriodFromFilters(filters);\n    const {\n      keyAnalysisRelativePeriod: defaultPeriod,\n      hiddenPeriods\n    } = systemSettings;\n\n    // Set value type if favorite is loaded\n    if (!valueType) {\n      if (dataItem && dataItem.dimensionItemType) {\n        const dimension = Object.keys(dimConf).find(dim => dimConf[dim].itemType === dataItem.dimensionItemType);\n        if (dimension) {\n          setValueType(dimConf[dimension].objectName, true);\n        }\n      } else {\n        setValueType(dimConf.indicator.objectName);\n      }\n    }\n\n    // Set default period from system settings\n    if (!period && !startDate && !endDate && defaultPeriod && isPeriodAvailable(defaultPeriod, hiddenPeriods)) {\n      setPeriod({\n        id: defaultPeriod\n      });\n    }\n\n    // Set default org unit level\n    if (!rows) {\n      var _orgUnits$levels;\n      const defaultLevel = (_orgUnits$levels = orgUnits.levels) === null || _orgUnits$levels === void 0 ? void 0 : _orgUnits$levels[DEFAULT_ORG_UNIT_LEVEL];\n      if (defaultLevel) {\n        const {\n          id,\n          name\n        } = defaultLevel;\n        setOrgUnits({\n          dimension: 'ou',\n          items: [{\n            id: `LEVEL-${id}`,\n            name\n          }]\n        });\n      }\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      columns,\n      periodType,\n      renderingStrategy,\n      setClassification,\n      setLegendSet,\n      setRenderingStrategy,\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n\n    // Set rendering strategy to single if not relative period\n    if (periodType !== RELATIVE_PERIODS && renderingStrategy !== RENDERING_STRATEGY_SINGLE) {\n      setRenderingStrategy(RENDERING_STRATEGY_SINGLE);\n    }\n\n    // Set the default classification/legend for selected data item without visiting the style tab\n    if (columns !== prev.columns) {\n      const dataItem = getDataItemFromColumns(columns);\n      if (dataItem) {\n        if (dataItem.legendSet) {\n          setClassification(CLASSIFICATION_PREDEFINED);\n          setLegendSet(dataItem.legendSet);\n        } else {\n          setClassification(CLASSIFICATION_EQUAL_INTERVALS);\n          setLegendSet();\n        }\n      }\n    }\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      // layer options\n      columns,\n      dataElementGroup,\n      filters,\n      id,\n      indicatorGroup,\n      noDataColor,\n      operand,\n      periodType,\n      renderingStrategy,\n      startDate,\n      endDate,\n      program,\n      valueType,\n      thematicMapType,\n      systemSettings\n    } = this.props;\n    const {\n      // Handlers\n      setDataItem,\n      setDataElementGroup,\n      setIndicatorGroup,\n      setNoDataColor,\n      setOperand,\n      setPeriod,\n      setPeriodType,\n      setRenderingStrategy,\n      setProgram,\n      setValueType\n    } = this.props;\n    const {\n      tab,\n      indicatorGroupError,\n      indicatorError,\n      dataElementGroupError,\n      dataElementError,\n      dataSetError,\n      programError,\n      eventDataItemError,\n      programIndicatorError,\n      periodTypeError,\n      periodError,\n      orgUnitsError,\n      legendSetError\n    } = this.state;\n    const period = getPeriodFromFilters(filters);\n    const dataItem = getDataItemFromColumns(columns);\n    const dimensions = getDimensionsFromFilters(filters);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content,\n      \"data-test\": \"thematicdialog\"\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\",\n      dataTest: \"thematicdialog-tabs-data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\",\n      dataTest: \"thematicdialog-tabs-period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\",\n      dataTest: \"thematicdialog-tabs-orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"filter\",\n      dataTest: \"thematicdialog-tabs-filter\"\n    }, i18n.t('Filter')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\",\n      dataTest: \"thematicdialog-tabs-style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-datatab\"\n    }, /*#__PURE__*/React.createElement(ValueTypeSelect, {\n      value: valueType,\n      className: styles.select,\n      onChange: setValueType\n    }), (!valueType || valueType === dimConf.indicator.objectName) && [\n    /*#__PURE__*/\n    // Indicator (default)\n    React.createElement(IndicatorGroupSelect, {\n      key: \"group\",\n      indicatorGroup: indicatorGroup,\n      onChange: setIndicatorGroup,\n      className: styles.select,\n      errorText: indicatorGroupError\n    }), /*#__PURE__*/React.createElement(IndicatorSelect, {\n      key: \"indicator\",\n      indicatorGroup: indicatorGroup,\n      indicator: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: indicatorError\n    })], (valueType === dimConf.dataElement.objectName || valueType === dimConf.operand.objectName) && [\n    /*#__PURE__*/\n    // Data element\n    React.createElement(DataElementGroupSelect, {\n      key: \"group\",\n      dataElementGroup: dataElementGroup,\n      onChange: setDataElementGroup,\n      className: styles.select,\n      errorText: dataElementGroupError\n    }), dataElementGroup && /*#__PURE__*/React.createElement(TotalsDetailsSelect, {\n      key: \"totals\",\n      operand: operand,\n      onChange: setOperand,\n      className: styles.select\n    }), operand === true || valueType === dimConf.operand.objectName ? /*#__PURE__*/React.createElement(DataElementOperandSelect, {\n      key: \"element\",\n      dataElementGroup: dataElementGroup,\n      dataElement: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataElementError\n    }) : /*#__PURE__*/React.createElement(DataElementSelect, {\n      key: \"element\",\n      dataElementGroup: dataElementGroup,\n      dataElement: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataElementError\n    })], valueType === dimConf.dataSet.objectName &&\n    /*#__PURE__*/\n    // Reporting rates\n    React.createElement(DataSetsSelect, {\n      key: \"item\",\n      dataSet: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: dataSetError\n    }), valueType === dimConf.eventDataItem.objectName && [\n    /*#__PURE__*/\n    // Event data items\n    React.createElement(ProgramSelect, {\n      key: \"program\",\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError\n    }), program && /*#__PURE__*/React.createElement(EventDataItemSelect, {\n      key: \"item\",\n      program: program,\n      dataItem: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: eventDataItemError\n    })], valueType === dimConf.programIndicator.objectName && [\n    /*#__PURE__*/\n    // Program indicator\n    React.createElement(ProgramSelect, {\n      key: \"program\",\n      program: program,\n      onChange: setProgram,\n      className: styles.select,\n      errorText: programError\n    }), program && /*#__PURE__*/React.createElement(ProgramIndicatorSelect, {\n      key: \"indicator\",\n      program: program,\n      programIndicator: dataItem,\n      onChange: setDataItem,\n      className: styles.select,\n      errorText: programIndicatorError\n    })], /*#__PURE__*/React.createElement(AggregationTypeSelect, {\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(CompletedOnlyCheckbox, {\n      valueType: valueType\n    })), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-periodtab\"\n    }, /*#__PURE__*/React.createElement(PeriodTypeSelect, {\n      value: periodType,\n      period: period,\n      hiddenPeriods: systemSettings.hiddenPeriods,\n      onChange: setPeriodType,\n      className: styles.periodSelect,\n      errorText: periodTypeError\n    }), periodType === RELATIVE_PERIODS && /*#__PURE__*/React.createElement(RelativePeriodSelect, {\n      period: period,\n      onChange: setPeriod,\n      className: styles.periodSelect,\n      errorText: periodError\n    }), (periodType && periodType !== RELATIVE_PERIODS && periodType !== START_END_DATES || !periodType && id) && /*#__PURE__*/React.createElement(PeriodSelect, {\n      periodType: periodType,\n      period: period,\n      onChange: setPeriod,\n      className: styles.periodSelect,\n      errorText: periodError\n    }), periodType === START_END_DATES && /*#__PURE__*/React.createElement(StartEndDates, {\n      startDate: startDate,\n      endDate: endDate,\n      className: styles.periodSelect,\n      errorText: periodError\n    }), periodType === RELATIVE_PERIODS && /*#__PURE__*/React.createElement(RenderingStrategy, {\n      value: renderingStrategy,\n      period: period,\n      layerId: id,\n      onChange: setRenderingStrategy\n    })), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      warning: orgUnitsError\n    }), tab === 'filter' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow,\n      \"data-test\": \"thematicdialog-filtertab\"\n    }, /*#__PURE__*/React.createElement(DimensionFilter, {\n      dimensions: dimensions\n    })), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow,\n      \"data-test\": \"thematicdialog-styletab\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(ThematicMapTypeSelect, {\n      type: thematicMapType\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(RadiusSelect, {\n      className: styles.numberField\n    })), /*#__PURE__*/React.createElement(Labels, {\n      includeDisplayOption: true\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(NumericLegendStyle, {\n      mapType: thematicMapType,\n      dataItem: dataItem,\n      legendSetError: legendSetError,\n      className: styles.select\n    }), /*#__PURE__*/React.createElement(NoDataColor, {\n      value: noDataColor,\n      onChange: setNoDataColor\n    })))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      valueType,\n      indicatorGroup,\n      dataElementGroup,\n      program,\n      periodType,\n      columns,\n      rows,\n      filters,\n      startDate,\n      endDate,\n      radiusLow,\n      radiusHigh,\n      method,\n      legendSet\n    } = this.props;\n    const dataItem = getDataItemFromColumns(columns);\n    const period = getPeriodFromFilters(filters);\n\n    // Indicators\n    if (valueType === dimConf.indicator.objectName) {\n      if (!indicatorGroup && !dataItem) {\n        return this.setErrorState('indicatorGroupError', i18n.t('Indicator group is required'), 'data');\n      } else if (!dataItem) {\n        return this.setErrorState('indicatorError', i18n.t('Indicator is required'), 'data');\n      }\n    }\n\n    // Data elements\n    if (valueType === dimConf.dataElement.objectName || valueType === dimConf.operand.objectName) {\n      if (!dataElementGroup && !dataItem) {\n        return this.setErrorState('dataElementGroupError', i18n.t('Data element group is required'), 'data');\n      } else if (!dataItem) {\n        return this.setErrorState('dataElementError', i18n.t('Data element is required'), 'data');\n      }\n    }\n\n    // Reporting rates\n    if (valueType === dimConf.dataSet.objectName && !dataItem) {\n      return this.setErrorState('dataSetError', i18n.t('Data set is required'), 'data');\n    }\n\n    // Event data items / Program indicators\n    if (valueType === dimConf.eventDataItem.objectName || valueType === dimConf.programIndicator.objectName) {\n      if (!program && !dataItem) {\n        return this.setErrorState('programError', i18n.t('Program is required'), 'data');\n      } else if (!dataItem) {\n        return valueType === dimConf.eventDataItem.objectName ? this.setErrorState('eventDataItemError', i18n.t('Event data item is required'), 'data') : this.setErrorState('programIndicatorError', i18n.t('Program indicator is required'), 'data');\n      }\n    }\n    if (!period && periodType !== START_END_DATES) {\n      return this.setErrorState('periodError', i18n.t('Period is required'), 'period');\n    } else if (periodType === START_END_DATES) {\n      const error = getStartEndDateError(startDate, endDate);\n      if (error) {\n        return this.setErrorState('periodError', error, 'period');\n      }\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected'), 'orgunits');\n    }\n    if (method === CLASSIFICATION_PREDEFINED && !legendSet) {\n      return this.setErrorState('legendSetError', i18n.t('No legend set is selected'), 'style');\n    }\n    if (!isValidRadius(radiusLow, radiusHigh)) {\n      this.setState({\n        tab: 'style'\n      });\n      return false;\n    }\n    return true;\n  }\n}\n_defineProperty(ThematicDialog, \"propTypes\", {\n  setClassification: PropTypes.func.isRequired,\n  setDataElementGroup: PropTypes.func.isRequired,\n  setDataItem: PropTypes.func.isRequired,\n  setIndicatorGroup: PropTypes.func.isRequired,\n  setLegendSet: PropTypes.func.isRequired,\n  setNoDataColor: PropTypes.func.isRequired,\n  setOperand: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  setPeriod: PropTypes.func.isRequired,\n  setPeriodType: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setRenderingStrategy: PropTypes.func.isRequired,\n  setValueType: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  columns: PropTypes.array,\n  dataElementGroup: PropTypes.object,\n  endDate: PropTypes.string,\n  filters: PropTypes.array,\n  id: PropTypes.string,\n  indicatorGroup: PropTypes.object,\n  legendSet: PropTypes.object,\n  method: PropTypes.number,\n  noDataColor: PropTypes.string,\n  operand: PropTypes.bool,\n  orgUnits: PropTypes.object,\n  periodType: PropTypes.string,\n  program: PropTypes.object,\n  radiusHigh: PropTypes.number,\n  radiusLow: PropTypes.number,\n  renderingStrategy: PropTypes.string,\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  systemSettings: PropTypes.object,\n  thematicMapType: PropTypes.string,\n  valueType: PropTypes.string\n});\nexport default connect(null, {\n  setClassification,\n  setDataItem,\n  setDataElementGroup,\n  setIndicatorGroup,\n  setLegendSet,\n  setNoDataColor,\n  setOperand,\n  setOrgUnits,\n  setPeriod,\n  setPeriodType,\n  setRenderingStrategy,\n  setProgram,\n  setValueType\n}, null, {\n  forwardRef: true\n})(ThematicDialog);","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SelectField } from '../core/index.js';\n\n// Load all tracked entity types\nconst TRACKED_ENTITY_TYPES_QUERY = {\n  types: {\n    resource: 'trackedEntityTypes',\n    params: {\n      fields: ['id', 'displayName~rename(name)'],\n      paging: false\n    }\n  }\n};\nconst TrackedEntityTypeSelect = _ref => {\n  let {\n    trackedEntityType,\n    onChange,\n    className,\n    errorText\n  } = _ref;\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(TRACKED_ENTITY_TYPES_QUERY);\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Tracked Entity Type'),\n    loading: loading,\n    items: data === null || data === void 0 ? void 0 : data.types.trackedEntityTypes,\n    value: trackedEntityType === null || trackedEntityType === void 0 ? void 0 : trackedEntityType.id,\n    onChange: onChange,\n    className: className,\n    errorText: (error === null || error === void 0 ? void 0 : error.message) || (!trackedEntityType && errorText ? errorText : null),\n    dataTest: \"tetypeselect\"\n  });\n};\nTrackedEntityTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  errorText: PropTypes.string,\n  trackedEntityType: PropTypes.shape({\n    id: PropTypes.string.isRequired\n  })\n};\nexport default TrackedEntityTypeSelect;","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"PeriodTypeSelect_label__CEOt1\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setPeriodType } from '../../../actions/layerEdit.js';\nimport { Radio, RadioGroup } from '../../core/index.js';\nimport styles from './styles/PeriodTypeSelect.module.css';\nconst PeriodTypeSelect = _ref => {\n  let {\n    program,\n    periodType = 'lastUpdated',\n    setPeriodType\n  } = _ref;\n  const label = i18n.t('Select period when tracked entities were last updated');\n  return program ? /*#__PURE__*/React.createElement(RadioGroup, {\n    name: \"type\",\n    value: periodType,\n    onChange: type => setPeriodType({\n      id: type\n    })\n  }, /*#__PURE__*/React.createElement(Radio, {\n    value: \"lastUpdated\",\n    label: label\n  }), /*#__PURE__*/React.createElement(Radio, {\n    value: \"program\",\n    label: `${i18n.t('Program/Enrollment date')}: ${i18n.t('the date a tracked entity was registered or enrolled in a program')}`\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, label, \":\");\n};\nPeriodTypeSelect.propTypes = {\n  setPeriodType: PropTypes.func.isRequired,\n  periodType: PropTypes.string,\n  program: PropTypes.object\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    program: layerEdit.program,\n    periodType: layerEdit.periodType\n  };\n}, {\n  setPeriodType\n})(PeriodTypeSelect);","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { getProgramStatuses } from '../../../constants/programStatuses.js';\nimport { SelectField } from '../../core/index.js';\nconst ProgramStatusSelect = _ref => {\n  let {\n    value = 'ALL',\n    onChange,\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Program status'),\n    items: getProgramStatuses(),\n    value: value,\n    onChange: valueType => onChange(valueType.id),\n    className: className\n  });\n};\nProgramStatusSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  value: PropTypes.string\n};\nexport default ProgramStatusSelect;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { SelectField } from '../../core/index.js';\nconst RELATIONSHIP_TYPES_QUERY = {\n  relationshipTypes: {\n    resource: 'relationshipTypes',\n    params: {\n      fields: ['id', 'displayName~rename(name)', 'fromConstraint']\n    }\n  }\n};\nconst TrackedEntityRelationshipTypeSelect = _ref => {\n  let {\n    trackedEntityType,\n    value,\n    onChange,\n    className\n  } = _ref;\n  const {\n    loading,\n    data,\n    error\n  } = useDataQuery(RELATIONSHIP_TYPES_QUERY);\n  const types = useMemo(() => (data === null || data === void 0 ? void 0 : data.relationshipTypes.relationshipTypes.filter(type => type.fromConstraint.relationshipEntity === 'TRACKED_ENTITY_INSTANCE' && type.fromConstraint.trackedEntityType.id === trackedEntityType.id)) || [], [data, trackedEntityType.id]);\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    });\n  } else if (error) {\n    return /*#__PURE__*/React.createElement(\"span\", null, error.message);\n  }\n  if (!types.length) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 14,\n        marginLeft: 12\n      }\n    }, i18n.t('No relationship types were found for tracked entity type {{type}}', {\n      type: trackedEntityType.name\n    }));\n  }\n  return /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Relationship type'),\n    items: types,\n    value: value,\n    onChange: type => onChange(type.id),\n    className: className\n  });\n};\nTrackedEntityRelationshipTypeSelect.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  trackedEntityType: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  }),\n  value: PropTypes.string\n};\nexport default TrackedEntityRelationshipTypeSelect;","function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { setTrackedEntityType, setProgram, setProgramStatus, setFollowUpStatus, setTrackedEntityRelationshipType, setTrackedEntityRelationshipOutsideProgram, setStartDate, setEndDate, setOrgUnits, setEventPointColor, setEventPointRadius, setRelatedPointColor, setRelatedPointRadius, setRelationshipLineColor, setStyleDataItem } from '../../../actions/layerEdit.js';\nimport { DEFAULT_START_DATE, DEFAULT_END_DATE, TEI_COLOR, TEI_RADIUS, TEI_BUFFER, TEI_RELATED_COLOR, TEI_RELATIONSHIP_LINE_COLOR, TEI_RELATED_RADIUS, MIN_RADIUS, MAX_RADIUS } from '../../../constants/layers.js';\nimport { getOrgUnitsFromRows } from '../../../util/analytics.js';\nimport { getStartEndDateError } from '../../../util/time.js';\nimport { Tab, Tabs, NumberField, Checkbox, ColorPicker } from '../../core/index.js';\nimport OrgUnitSelect from '../../orgunits/OrgUnitSelect.js';\nimport StartEndDates from '../../periods/StartEndDates.js';\nimport ProgramSelect from '../../program/ProgramSelect.js';\nimport TrackedEntityTypeSelect from '../../trackedEntity/TrackedEntityTypeSelect.js';\nimport BufferRadius from '../shared/BufferRadius.js';\nimport styles from '../styles/LayerDialog.module.css';\nimport PeriodTypeSelect from './PeriodTypeSelect.js';\nimport ProgramStatusSelect from './ProgramStatusSelect.js';\nimport TrackedEntityRelationshipTypeSelect from './TrackedEntityRelationshipTypeSelect.js';\nclass TrackedEntityDialog extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      tab: 'data',\n      showRelationshipsChecked: false\n    };\n  }\n  componentDidMount() {\n    const {\n      rows,\n      startDate,\n      endDate,\n      relationshipType,\n      orgUnits,\n      setStartDate,\n      setEndDate,\n      setOrgUnits\n    } = this.props;\n\n    // Set default period (last year)\n    if (!startDate && !endDate) {\n      setStartDate(DEFAULT_START_DATE);\n      setEndDate(DEFAULT_END_DATE);\n    }\n    if (relationshipType) {\n      this.setState({\n        showRelationshipsChecked: true\n      });\n    }\n\n    // Set org unit tree roots as default\n    if (!rows && orgUnits.roots) {\n      setOrgUnits({\n        dimension: 'ou',\n        items: orgUnits.roots\n      });\n    }\n  }\n  componentDidUpdate(prev) {\n    const {\n      validateLayer,\n      onLayerValidation\n    } = this.props;\n    if (validateLayer && validateLayer !== prev.validateLayer) {\n      onLayerValidation(this.validate());\n    }\n  }\n  render() {\n    const {\n      endDate,\n      eventPointColor,\n      eventPointRadius,\n      followUp,\n      program,\n      programStatus,\n      startDate,\n      trackedEntityType,\n      relationshipType,\n      relatedPointColor,\n      relatedPointRadius,\n      relationshipLineColor\n    } = this.props;\n    const {\n      setTrackedEntityType,\n      setProgram,\n      setProgramStatus,\n      setFollowUpStatus,\n      setTrackedEntityRelationshipType,\n      setEventPointColor,\n      setEventPointRadius,\n      setRelatedPointColor,\n      setRelatedPointRadius,\n      setRelationshipLineColor\n    } = this.props;\n    const {\n      tab,\n      trackedEntityTypeError,\n      orgUnitsError,\n      periodError\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      value: tab,\n      onChange: tab => this.setState({\n        tab\n      })\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: \"data\"\n    }, i18n.t('Data')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"relationships\"\n    }, i18n.t('Relationships')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"period\"\n    }, i18n.t('Period')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"orgunits\"\n    }, i18n.t('Org Units')), /*#__PURE__*/React.createElement(Tab, {\n      value: \"style\"\n    }, i18n.t('Style'))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tabContent\n    }, tab === 'data' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(TrackedEntityTypeSelect, {\n      trackedEntityType: trackedEntityType,\n      onChange: setTrackedEntityType,\n      className: styles.select,\n      errorText: trackedEntityTypeError\n    }), trackedEntityType && /*#__PURE__*/React.createElement(ProgramSelect, {\n      allPrograms: true,\n      program: program,\n      trackedEntityType: trackedEntityType,\n      onChange: setProgram,\n      className: styles.select\n    }), program && /*#__PURE__*/React.createElement(ProgramStatusSelect, {\n      value: programStatus,\n      onChange: setProgramStatus,\n      className: styles.select\n    }), program && /*#__PURE__*/React.createElement(Checkbox, {\n      label: i18n.t('Follow up'),\n      checked: followUp,\n      onChange: setFollowUpStatus\n    })), tab === 'relationships' && (!this.props.trackedEntityType ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        fontSize: 14,\n        paddingTop: 16,\n        marginLeft: 16\n      }\n    }, i18n.t('Please select a Tracked Entity Type before selecting a Relationship Type')) : /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.notice\n    }, /*#__PURE__*/React.createElement(NoticeBox, {\n      warning: true,\n      title: \"Warning\"\n    }, i18n.t('Displaying tracked entity relationships in Maps is an experimental feature'))), /*#__PURE__*/React.createElement(Checkbox, {\n      label: i18n.t('Display Tracked Entity relationships'),\n      checked: this.state.showRelationshipsChecked,\n      onChange: checked => {\n        if (!checked) {\n          setTrackedEntityRelationshipType(null);\n        }\n        this.setState({\n          showRelationshipsChecked: checked\n        });\n      },\n      style: {\n        marginBottom: 0\n      }\n    }), this.state.showRelationshipsChecked && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(TrackedEntityRelationshipTypeSelect, {\n      trackedEntityType: this.props.trackedEntityType,\n      value: relationshipType,\n      onChange: setTrackedEntityRelationshipType,\n      className: cx(styles.select, styles.indent)\n    })))), tab === 'period' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexRowFlow\n    }, /*#__PURE__*/React.createElement(PeriodTypeSelect, null), /*#__PURE__*/React.createElement(StartEndDates, {\n      startDate: startDate,\n      endDate: endDate,\n      errorText: periodError\n    })), tab === 'orgunits' && /*#__PURE__*/React.createElement(OrgUnitSelect, {\n      hideUserOrgUnits: true,\n      hideAssociatedGeometry: true,\n      hideSelectMode: false,\n      hideLevelSelect: true,\n      hideGroupSelect: true,\n      warning: orgUnitsError\n    }), tab === 'style' && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumnFlow\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header\n    }, i18n.t('Tracked entity style'), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: eventPointColor || TEI_COLOR,\n      onChange: setEventPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point size'),\n      value: eventPointRadius || TEI_RADIUS,\n      onChange: setEventPointRadius,\n      className: styles.flexInnerColumn\n    })), /*#__PURE__*/React.createElement(BufferRadius, {\n      defaultRadius: TEI_BUFFER\n    }), relationshipType ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.header\n    }, i18n.t('Related entity style'), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexInnerColumnFlow\n    }, /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Color'),\n      color: relatedPointColor || TEI_RELATED_COLOR,\n      onChange: setRelatedPointColor,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(NumberField, {\n      label: i18n.t('Point size'),\n      min: MIN_RADIUS,\n      max: MAX_RADIUS,\n      value: relatedPointRadius || TEI_RELATED_RADIUS,\n      onChange: setRelatedPointRadius,\n      className: styles.flexInnerColumn\n    }), /*#__PURE__*/React.createElement(ColorPicker, {\n      label: i18n.t('Line Color'),\n      color: relationshipLineColor || TEI_RELATIONSHIP_LINE_COLOR,\n      onChange: setRelationshipLineColor,\n      className: styles.flexInnerColumn\n    }))) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.flexColumn\n    }))));\n  }\n\n  // TODO: Add to parent class?\n  setErrorState(key, message, tab) {\n    this.setState({\n      [key]: message,\n      tab\n    });\n    return false;\n  }\n  validate() {\n    const {\n      trackedEntityType,\n      rows,\n      startDate,\n      endDate\n    } = this.props;\n    if (!trackedEntityType) {\n      return this.setErrorState('trackedEntityTypeError', i18n.t('This field is required'), 'data');\n    }\n    const error = getStartEndDateError(startDate, endDate);\n    if (error) {\n      return this.setErrorState('periodError', error, 'period');\n    }\n    if (!getOrgUnitsFromRows(rows).length) {\n      return this.setErrorState('orgUnitsError', i18n.t('No organisation units are selected.'), 'orgunits');\n    }\n    return true;\n  }\n}\n_defineProperty(TrackedEntityDialog, \"propTypes\", {\n  setEndDate: PropTypes.func.isRequired,\n  setEventPointColor: PropTypes.func.isRequired,\n  setEventPointRadius: PropTypes.func.isRequired,\n  setFollowUpStatus: PropTypes.func.isRequired,\n  setOrgUnits: PropTypes.func.isRequired,\n  setProgram: PropTypes.func.isRequired,\n  setProgramStatus: PropTypes.func.isRequired,\n  setRelatedPointColor: PropTypes.func.isRequired,\n  setRelatedPointRadius: PropTypes.func.isRequired,\n  setRelationshipLineColor: PropTypes.func.isRequired,\n  setStartDate: PropTypes.func.isRequired,\n  setTrackedEntityRelationshipType: PropTypes.func.isRequired,\n  setTrackedEntityType: PropTypes.func.isRequired,\n  validateLayer: PropTypes.bool.isRequired,\n  onLayerValidation: PropTypes.func.isRequired,\n  endDate: PropTypes.string,\n  eventPointColor: PropTypes.string,\n  eventPointRadius: PropTypes.number,\n  followUp: PropTypes.bool,\n  orgUnits: PropTypes.object,\n  program: PropTypes.object,\n  programStatus: PropTypes.string,\n  relatedPointColor: PropTypes.string,\n  relatedPointRadius: PropTypes.number,\n  relationshipLineColor: PropTypes.string,\n  relationshipType: PropTypes.string,\n  rows: PropTypes.array,\n  startDate: PropTypes.string,\n  trackedEntityType: PropTypes.object\n});\nexport default connect(null, {\n  setTrackedEntityType,\n  setProgram,\n  setProgramStatus,\n  setFollowUpStatus,\n  setTrackedEntityRelationshipType,\n  setTrackedEntityRelationshipOutsideProgram,\n  setStartDate,\n  setEndDate,\n  setOrgUnits,\n  setEventPointColor,\n  setEventPointRadius,\n  setRelatedPointColor,\n  setRelatedPointRadius,\n  setRelationshipLineColor,\n  setStyleDataItem\n}, null, {\n  forwardRef: true\n})(TrackedEntityDialog);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useCachedDataQuery } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { addLayer, updateLayer, cancelLayer } from '../../actions/layers.js';\nimport { EARTH_ENGINE_LAYER } from '../../constants/layers.js';\nimport { useOrgUnits } from '../OrgUnitsProvider.js';\nimport EarthEngineDialog from './earthEngine/EarthEngineDialog.js';\nimport EventDialog from './event/EventDialog.js';\nimport FacilityDialog from './FacilityDialog.js';\nimport GeoJsonDialog from './geoJson/GeoJsonDialog.js';\nimport OrgUnitDialog from './orgUnit/OrgUnitDialog.js';\nimport styles from './styles/LayerEdit.module.css';\nimport ThematicDialog from './thematic/ThematicDialog.js';\nimport TrackedEntityDialog from './trackedEntity/TrackedEntityDialog.js';\nconst layerDialogs = {\n  event: EventDialog,\n  trackedEntity: TrackedEntityDialog,\n  facility: FacilityDialog,\n  thematic: ThematicDialog,\n  orgUnit: OrgUnitDialog,\n  earthEngine: EarthEngineDialog,\n  geoJsonUrl: GeoJsonDialog\n};\nconst getLayerNames = () => ({\n  event: i18n.t('event'),\n  trackedEntity: i18n.t('tracked entity'),\n  facility: i18n.t('facility'),\n  thematic: i18n.t('thematic'),\n  orgUnit: i18n.t('org unit'),\n  earthEngine: i18n.t('Earth Engine'),\n  geoJsonUrl: i18n.t('feature')\n});\nconst LayerEdit = _ref => {\n  let {\n    layer,\n    addLayer,\n    updateLayer,\n    cancelLayer\n  } = _ref;\n  const [isValidLayer, setIsValidLayer] = useState(false);\n  const {\n    systemSettings\n  } = useCachedDataQuery();\n  const orgUnits = useOrgUnits();\n  const onValidateLayer = () => setIsValidLayer(true);\n  const onLayerValidation = isValid => {\n    setIsValidLayer(false);\n    if (isValid) {\n      const {\n        id,\n        editCounter = 0\n      } = layer;\n      const config = {\n        ...layer,\n        editCounter: editCounter + 1,\n        isLoaded: false,\n        isLoading: false\n      };\n      if (id) {\n        updateLayer(config);\n      } else {\n        addLayer(config);\n      }\n      cancelLayer();\n    }\n  };\n  if (!layer) {\n    return null;\n  }\n  const type = layer.layer;\n  const LayerDialog = layerDialogs[type];\n  if (!LayerDialog) {\n    return null;\n  }\n  let name = getLayerNames()[type];\n  if (type === EARTH_ENGINE_LAYER) {\n    name = layer.name.toLowerCase();\n  }\n  const title = layer.id ? i18n.t('Edit {{name}} layer', {\n    name\n  }) : i18n.t('Add new {{name}} layer', {\n    name\n  });\n  return /*#__PURE__*/React.createElement(Modal, {\n    position: \"middle\",\n    dataTest: \"layeredit\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, title), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(LayerDialog, _extends({}, layer, {\n    systemSettings: systemSettings,\n    orgUnits: orgUnits,\n    validateLayer: isValidLayer,\n    onLayerValidation: onLayerValidation\n  })))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: cancelLayer\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: onValidateLayer,\n    dataTest: \"layeredit-addbtn\"\n  }, i18n.t(layer.id ? i18n.t('Update layer') : i18n.t('Add layer'))))));\n};\nLayerEdit.propTypes = {\n  addLayer: PropTypes.func.isRequired,\n  cancelLayer: PropTypes.func.isRequired,\n  updateLayer: PropTypes.func.isRequired,\n  layer: PropTypes.object\n};\nexport default connect(_ref2 => {\n  let {\n    layerEdit\n  } = _ref2;\n  return {\n    layer: layerEdit\n  };\n}, {\n  addLayer,\n  updateLayer,\n  cancelLayer\n})(LayerEdit);","// extracted by mini-css-extract-plugin\nexport default {\"anchor\":\"ContextMenu_anchor__O9is8\",\"menu\":\"ContextMenu_menu__GYTJZ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Popover, Menu, MenuItem, IconArrowUp16, IconArrowDown16, IconInfo16, IconLocation16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { Fragment, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { updateLayer } from '../../actions/layers.js';\nimport { closeContextMenu, openCoordinatePopup, showEarthEngineValue } from '../../actions/map.js';\nimport { setOrgUnitProfile } from '../../actions/orgUnits.js';\nimport { FACILITY_LAYER, EARTH_ENGINE_LAYER, RENDERING_STRATEGY_SPLIT_BY_PERIOD } from '../../constants/layers.js';\nimport { drillUpDown } from '../../util/map.js';\nimport styles from './styles/ContextMenu.module.css';\nconst ContextMenu = props => {\n  const anchorRef = useRef();\n  const {\n    feature,\n    layerType,\n    layerConfig,\n    coordinates,\n    earthEngineLayers,\n    position,\n    offset,\n    closeContextMenu,\n    openCoordinatePopup,\n    showEarthEngineValue,\n    setOrgUnitProfile,\n    updateLayer\n  } = props;\n  if (!position) {\n    return null;\n  }\n  const isSplitView = (layerConfig === null || layerConfig === void 0 ? void 0 : layerConfig.renderingStrategy) === RENDERING_STRATEGY_SPLIT_BY_PERIOD;\n  const left = offset[0] + position[0];\n  const top = offset[1] + position[1];\n  const attr = (feature === null || feature === void 0 ? void 0 : feature.properties) || {};\n  const onClick = (item, id) => {\n    closeContextMenu();\n    switch (item) {\n      case 'drill_up':\n        updateLayer(drillUpDown(layerConfig, attr.grandParentId, attr.grandParentParentGraph, parseInt(attr.level) - 1));\n        break;\n      case 'drill_down':\n        updateLayer(drillUpDown(layerConfig, attr.id, attr.parentGraph, parseInt(attr.level) + 1));\n        break;\n      case 'show_info':\n        setOrgUnitProfile(attr.id);\n        break;\n      case 'show_coordinate':\n        openCoordinatePopup(coordinates);\n        break;\n      case 'show_ee_value':\n        showEarthEngineValue(id, coordinates);\n        break;\n      default:\n    }\n  };\n  return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.anchor,\n    style: {\n      left,\n      top\n    }\n  }), /*#__PURE__*/React.createElement(Popover, {\n    reference: anchorRef,\n    arrow: false,\n    placement: \"right\",\n    onClickOutside: closeContextMenu\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.menu\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true,\n    dataTest: \"context-menu\"\n  }, layerType !== FACILITY_LAYER && feature && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-drill-up\",\n    label: i18n.t('Drill up one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowUp16, null),\n    disabled: !attr.hasCoordinatesUp,\n    onClick: () => onClick('drill_up')\n  }), layerType !== FACILITY_LAYER && feature && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-drill-down\",\n    label: i18n.t('Drill down one level'),\n    icon: /*#__PURE__*/React.createElement(IconArrowDown16, null),\n    disabled: !attr.hasCoordinatesDown,\n    onClick: () => onClick('drill_down')\n  }), feature && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-view-profile\",\n    label: i18n.t('View profile'),\n    icon: /*#__PURE__*/React.createElement(IconInfo16, null),\n    onClick: () => onClick('show_info')\n  }), coordinates && !isSplitView && /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-show-long-lat\",\n    label: i18n.t('Show longitude/latitude'),\n    icon: /*#__PURE__*/React.createElement(IconLocation16, null),\n    onClick: () => onClick('show_coordinate')\n  }), earthEngineLayers.map(layer => /*#__PURE__*/React.createElement(MenuItem, {\n    dataTest: \"context-menu-show-ee-value\",\n    key: layer.id,\n    label: i18n.t('Show {{name}}', {\n      name: layer.name.toLowerCase()\n    }),\n    icon: /*#__PURE__*/React.createElement(IconLocation16, null),\n    onClick: () => onClick('show_ee_value', layer.id)\n  }))))));\n};\nContextMenu.propTypes = {\n  closeContextMenu: PropTypes.func.isRequired,\n  openCoordinatePopup: PropTypes.func.isRequired,\n  setOrgUnitProfile: PropTypes.func.isRequired,\n  showEarthEngineValue: PropTypes.func.isRequired,\n  updateLayer: PropTypes.func.isRequired,\n  coordinates: PropTypes.array,\n  earthEngineLayers: PropTypes.array,\n  feature: PropTypes.object,\n  layerConfig: PropTypes.object,\n  layerType: PropTypes.string,\n  map: PropTypes.object,\n  offset: PropTypes.array,\n  position: PropTypes.array\n};\nexport default connect(_ref => {\n  let {\n    contextMenu,\n    map\n  } = _ref;\n  return {\n    ...contextMenu,\n    earthEngineLayers: map.mapViews.filter(view => view.layer === EARTH_ENGINE_LAYER)\n  };\n}, {\n  closeContextMenu,\n  openCoordinatePopup,\n  showEarthEngineValue,\n  setOrgUnitProfile,\n  updateLayer\n})(ContextMenu);","import * as types from '../constants/actionTypes.js';\nexport const setAnalyticalObject = ao => ({\n  type: types.ANALYTICAL_OBJECT_SET,\n  payload: ao\n});\nexport const clearAnalyticalObject = () => ({\n  type: types.ANALYTICAL_OBJECT_CLEAR\n});","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"OpenAsMapDialog_content__2GKPD\",\"description\":\"OpenAsMapDialog_description__gcyKV\"};","import { useSetting } from '@dhis2/app-service-datastore';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, Button, ButtonStrip } from '@dhis2/ui';\nimport log from 'loglevel';\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { clearAnalyticalObject } from '../../actions/analyticalObject.js';\nimport { addLayer } from '../../actions/layers.js';\nimport { CURRENT_AO_KEY, getDataDimensionsFromAnalyticalObject, getThematicLayerFromAnalyticalObject } from '../../util/analyticalObject.js';\nimport { SelectField } from '../core/index.js';\nimport styles from './styles/OpenAsMapDialog.module.css';\nconst OpenAsMapDialog = () => {\n  var _allDataDimensions$;\n  const dispatch = useDispatch();\n  const [currentAO] = useSetting(CURRENT_AO_KEY);\n  const allDataDimensions = getDataDimensionsFromAnalyticalObject(currentAO);\n  const firstDimensionId = (_allDataDimensions$ = allDataDimensions[0]) === null || _allDataDimensions$ === void 0 ? void 0 : _allDataDimensions$.id;\n  const [selectedDataDims, setSelectedDataDims] = useState([firstDimensionId]);\n  const addLayersToMap = async () => {\n    const selectedDimensions = [...selectedDataDims].reverse();\n    const lastDataId = allDataDimensions[selectedDimensions.length - 1];\n\n    // Call in sequence\n    for (const dataId of selectedDimensions) {\n      const layer = await getThematicLayerFromAnalyticalObject(currentAO, dataId, dataId === lastDataId);\n      if (layer) {\n        dispatch(addLayer(layer));\n      }\n    }\n    dispatch(clearAnalyticalObject());\n  };\n  if (!allDataDimensions.length) {\n    log.info('No data items found in analytical object');\n    return null; // TODO show error\n  }\n\n  if (allDataDimensions.length === 1) {\n    addLayersToMap();\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(Modal, {\n    small: true,\n    position: \"middle\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Open as map')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, i18n.t('This chart/table contains {{numItems}} data items. Choose which items you want to import from the list below. Each data item will be created as a map layer.', {\n    numItems: allDataDimensions.length\n  })), /*#__PURE__*/React.createElement(SelectField, {\n    label: i18n.t('Data items'),\n    items: allDataDimensions,\n    value: selectedDataDims,\n    multiple: true,\n    onChange: setSelectedDataDims\n  }))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: clearAnalyticalObject\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    disabled: !selectedDataDims.length,\n    primary: true,\n    onClick: addLayersToMap\n  }, i18n.t('Proceed')))));\n};\nexport default OpenAsMapDialog;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport AlertStack from '../alerts/AlertStack.js';\nimport LayerEdit from '../edit/LayerEdit.js';\nimport ContextMenu from '../map/ContextMenu.js';\nimport OpenAsMapDialog from '../openAs/OpenAsMapDialog.js';\nconst ModalContainer = () => {\n  const analyticalObject = useSelector(state => state.analyticalObject);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ContextMenu, null), /*#__PURE__*/React.createElement(LayerEdit, null), /*#__PURE__*/React.createElement(AlertStack, null), analyticalObject && /*#__PURE__*/React.createElement(OpenAsMapDialog, null));\n};\nexport default ModalContainer;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"App_content__zOmw3\",\"downloadContent\":\"App_downloadContent__t8DM0\",\"appMapAndTable\":\"App_appMapAndTable__MVVuG\"};","import * as types from '../constants/actionTypes.js';\nexport const setInterpretation = id => ({\n  type: types.INTERPRETATION_SET,\n  payload: id\n});","export const dataStatisticsMutation = {\n  resource: 'dataStatistics',\n  params: _ref => {\n    let {\n      id\n    } = _ref;\n    return {\n      favorite: id,\n      eventType: 'MAP_VIEW'\n    };\n  },\n  type: 'create'\n};","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport log from 'loglevel';\nimport { useRef, useEffect, useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setAnalyticalObject } from '../../actions/analyticalObject.js';\nimport { setInterpretation } from '../../actions/interpretations.js';\nimport { newMap, setMap } from '../../actions/map.js';\nimport { openDownloadMode, closeDownloadMode } from '../../actions/ui.js';\nimport { getFallbackBasemap } from '../../constants/basemaps.js';\nimport { CURRENT_AO_KEY } from '../../util/analyticalObject.js';\nimport { dataStatisticsMutation } from '../../util/apiDataStatistics.js';\nimport { addOrgUnitPaths } from '../../util/helpers.js';\nimport history, { getHashUrlParams, defaultHashUrlParams } from '../../util/history.js';\nimport { fetchMap } from '../../util/requests.js';\nexport const useLoadMap = () => {\n  const previousParamsRef = useRef(defaultHashUrlParams);\n  const {\n    systemSettings,\n    basemaps\n  } = useCachedDataQuery();\n  const defaultBasemap = systemSettings.keyDefaultBaseMap;\n  const engine = useDataEngine();\n  const dispatch = useDispatch();\n  const loadMap = useCallback(async hashLocation => {\n    const params = getHashUrlParams(hashLocation);\n    if (params.mapId === '') {\n      dispatch(newMap());\n    } else if (params.mapId === CURRENT_AO_KEY) {\n      dispatch(newMap());\n      dispatch(setAnalyticalObject(true));\n    } else {\n      try {\n        const map = await fetchMap(params.mapId, engine, defaultBasemap);\n        engine.mutate(dataStatisticsMutation, {\n          variables: {\n            id: params.mapId\n          },\n          onError: error => log.error('Error: ', error)\n        });\n        const basemapConfig = basemaps.find(_ref => {\n          let {\n            id\n          } = _ref;\n          return id === map.basemap.id;\n        }) || basemaps.find(_ref2 => {\n          let {\n            id\n          } = _ref2;\n          return id === defaultBasemap;\n        }) || getFallbackBasemap();\n        dispatch(setMap({\n          ...map,\n          mapViews: addOrgUnitPaths(map.mapViews),\n          basemap: {\n            ...map.basemap,\n            ...basemapConfig\n          }\n        }));\n      } catch (e) {\n        log.error(e);\n        dispatch(newMap());\n      }\n    }\n    if (params.isDownload) {\n      dispatch(openDownloadMode());\n    } else {\n      dispatch(closeDownloadMode());\n    }\n    dispatch(setInterpretation(params.interpretationId));\n    previousParamsRef.current = params;\n  }, [basemaps, defaultBasemap, dispatch, engine]);\n  useEffect(() => {\n    loadMap(history.location);\n  }, [loadMap]);\n  useEffect(() => {\n    const unlisten = history.listen(_ref3 => {\n      let {\n        action,\n        location\n      } = _ref3;\n      const params = getHashUrlParams(location);\n      if (action === 'REPLACE' || previousParamsRef.current.mapId !== params.mapId) {\n        loadMap(location);\n        return;\n      }\n      if (params.isDownload !== previousParamsRef.current.isDownload) {\n        if (params.isDownload) {\n          dispatch(openDownloadMode());\n        } else {\n          dispatch(closeDownloadMode());\n        }\n      }\n      dispatch(setInterpretation(params.interpretationId));\n      previousParamsRef.current = params;\n    });\n    return () => unlisten && unlisten();\n  }, [loadMap, dispatch]);\n};","import cx from 'classnames';\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport BottomPanel from '../datatable/BottomPanel.js';\nimport DownloadModeMenu from '../download/DownloadMenubar.js';\nimport DownloadSettings from '../download/DownloadSettings.js';\nimport LayersPanel from '../layers/LayersPanel.js';\nimport LayersLoader from '../loaders/LayersLoader.js';\nimport MapPosition from '../map/MapPosition.js';\nimport AppMenu from './AppMenu.js';\nimport DetailsPanel from './DetailsPanel.js';\nimport ModalContainer from './ModalContainer.js';\nimport './App.css';\nimport styles from './styles/App.module.css';\nimport { useLoadMap } from './useLoadMap.js';\nconst App = () => {\n  useLoadMap();\n  const [interpretationsRenderCount, setInterpretationsRenderCount] = useState(1);\n  const dataTableOpen = useSelector(state => !!state.dataTable);\n  const downloadModeOpen = useSelector(state => !!state.ui.downloadMode);\n  const detailsPanelOpen = useSelector(state => state.ui.rightPanelOpen && !state.orgUnitProfile);\n  const onFileMenuAction = () => detailsPanelOpen && setInterpretationsRenderCount(interpretationsRenderCount + 1);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, downloadModeOpen ? /*#__PURE__*/React.createElement(DownloadModeMenu, null) : /*#__PURE__*/React.createElement(AppMenu, {\n    onFileMenuAction: onFileMenuAction\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.content, {\n      [styles.downloadContent]: downloadModeOpen\n    })\n  }, downloadModeOpen ? /*#__PURE__*/React.createElement(DownloadSettings, null) : /*#__PURE__*/React.createElement(LayersPanel, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.appMapAndTable\n  }, /*#__PURE__*/React.createElement(MapPosition, null), dataTableOpen && /*#__PURE__*/React.createElement(BottomPanel, null)), !downloadModeOpen && /*#__PURE__*/React.createElement(DetailsPanel, {\n    interpretationsRenderCount: interpretationsRenderCount\n  })), /*#__PURE__*/React.createElement(LayersLoader, null), /*#__PURE__*/React.createElement(ModalContainer, null));\n};\nexport default App;","import * as types from '../constants/actionTypes.js';\nconst dataTable = function () {\n  var _action$payload;\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let layerId;\n  switch (action.type) {\n    case types.AGGREGATIONS_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return {};\n    case types.LAYER_REMOVE:\n    case types.LAYER_UPDATE:\n      layerId = action.id || ((_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.id);\n      return layerId && state[layerId] ? {\n        ...state,\n        [layerId]: undefined\n      } : state;\n    default:\n      return state;\n  }\n};\nexport default dataTable;","import * as types from '../constants/actionTypes.js';\nconst analyticalObject = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.ANALYTICAL_OBJECT_SET:\n      return action.payload;\n    case types.ANALYTICAL_OBJECT_CLEAR:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default analyticalObject;","import * as types from '../constants/actionTypes.js';\nconst contextMenu = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.MAP_CONTEXT_MENU_OPEN:\n      return action.payload;\n    case types.MAP_CONTEXT_MENU_CLOSE:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default contextMenu;","import * as types from '../constants/actionTypes.js';\nconst dataTable = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.DATA_TABLE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n    case types.DOWNLOAD_MODE_CLOSE:\n    case types.DOWNLOAD_MODE_OPEN:\n      return null;\n    case types.DATA_TABLE_TOGGLE:\n      return state === action.id ? null : action.id;\n    case types.LAYER_REMOVE:\n      return state === action.id ? null : state;\n    default:\n      return state;\n  }\n};\nexport default dataTable;","import * as types from '../constants/actionTypes.js';\nconst defaultState = {\n  showName: true,\n  showDescription: true,\n  showLegend: true,\n  showInLegend: [],\n  showOverviewMap: true,\n  hasOverviewMapSpace: true,\n  showNorthArrow: true,\n  northArrowPosition: 'bottomright',\n  includeMargins: true\n};\nconst download = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.DOWNLOAD_CONFIG_SET:\n      return {\n        ...state,\n        ...action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport default download;","import * as types from '../constants/actionTypes.js';\nconst feature = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.FEATURE_HIGHLIGHT:\n      return action.payload ? {\n        ...action.payload\n      } : null;\n    default:\n      return state;\n  }\n};\nexport default feature;","import * as types from '../constants/actionTypes.js';\nconst featureProfile = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.FEATURE_PROFILE_SET:\n      return action.payload;\n    case types.FEATURE_PROFILE_CLOSE:\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default featureProfile;","import * as types from '../constants/actionTypes.js';\nconst interpretation = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.INTERPRETATION_SET:\n      return {\n        ...state,\n        id: action.payload\n      };\n    default:\n      return state;\n  }\n};\nexport default interpretation;","import * as types from '../constants/actionTypes.js';\nimport { EVENT_STATUS_ALL } from '../constants/eventStatuses.js';\nimport { CLASSIFICATION_SINGLE_COLOR, CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS, CLASSIFICATION_PREDEFINED, THEMATIC_CHOROPLETH, EE_BUFFER, NONE } from '../constants/layers.js';\nimport { START_END_DATES } from '../constants/periods.js';\nimport { setFiltersFromPeriod, setDataItemInColumns, setOrgUnitPathInRows, removePeriodFromFilters, changeDimensionInFilters, removeDimensionFromFilters } from '../util/analytics.js';\nconst layerEdit = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let columns;\n  let newState;\n  let program;\n  switch (action.type) {\n    case types.LAYER_EDIT:\n      delete action.payload.img;\n      return action.payload;\n    case types.LAYER_CANCEL:\n      return null;\n    case types.LAYER_EDIT_PROGRAM_SET:\n      program = action.program;\n      return {\n        ...state,\n        program: program ? {\n          ...program\n        } : null,\n        columns: [],\n        programStage: null,\n        styleDataItem: null\n      };\n    case types.LAYER_EDIT_PROGRAM_STAGE_SET:\n      return {\n        ...state,\n        programStage: {\n          ...action.programStage\n        },\n        columns: [],\n        styleDataItem: null\n      };\n    case types.LAYER_EDIT_VALUE_TYPE_SET:\n      return {\n        ...state,\n        valueType: action.valueType,\n        columns: action.keepColumns ? state.columns : [] // Kept if favorite is loaded\n      };\n\n    case types.LAYER_EDIT_INDICATOR_GROUP_SET:\n      return {\n        ...state,\n        indicatorGroup: {\n          id: action.indicatorGroup.id,\n          name: action.indicatorGroup.name\n        },\n        columns: []\n      };\n    case types.LAYER_EDIT_DATA_ELEMENT_GROUP_SET:\n      return {\n        ...state,\n        dataElementGroup: {\n          id: action.dataElementGroup.id,\n          name: action.dataElementGroup.name\n        },\n        columns: []\n      };\n    case types.LAYER_EDIT_OPERAND_SET:\n      return {\n        ...state,\n        operand: action.operand,\n        columns: []\n      };\n    case types.LAYER_EDIT_DATA_ITEM_SET:\n      return {\n        ...state,\n        columns: setDataItemInColumns(action.dataItem, action.dimension),\n        name: null\n      };\n    case types.LAYER_EDIT_PERIOD_NAME_SET:\n      return {\n        ...state,\n        periodName: action.periodName\n      };\n    case types.LAYER_EDIT_PERIOD_TYPE_SET:\n      return {\n        ...state,\n        periodType: action.periodType.id,\n        filters: action.clearPeriod ? removePeriodFromFilters(state.filters) : state.filters\n      };\n    case types.LAYER_EDIT_PERIOD_SET:\n      return {\n        ...state,\n        filters: action.period.id !== START_END_DATES ? setFiltersFromPeriod(state.filters, action.period) : []\n      };\n    case types.LAYER_EDIT_RENDERING_STRATEGY_SET:\n      return {\n        ...state,\n        renderingStrategy: action.payload\n      };\n    case types.LAYER_EDIT_START_DATE_SET:\n      return {\n        ...state,\n        startDate: action.startDate\n      };\n    case types.LAYER_EDIT_END_DATE_SET:\n      return {\n        ...state,\n        endDate: action.endDate\n      };\n    case types.LAYER_EDIT_AGGREGATION_TYPE_SET:\n      // DEFAULT aggregation type is not stored\n      if (action.aggregationType === 'DEFAULT') {\n        const newState = {\n          ...state\n        };\n        delete newState.aggregationType;\n        return newState;\n      }\n      return {\n        ...state,\n        aggregationType: action.aggregationType\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_ADD:\n      return {\n        ...state,\n        filters: [...(state.filters || []), action.filter || {\n          dimension: null\n        }]\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_REMOVE:\n      return {\n        ...state,\n        filters: removeDimensionFromFilters(state.filters, action.index)\n      };\n    case types.LAYER_EDIT_DIMENSION_FILTER_CHANGE:\n      return {\n        ...state,\n        filters: changeDimensionInFilters(state.filters, action.index, action.filter)\n      };\n    case types.LAYER_EDIT_FILTER_ADD:\n      return {\n        ...state,\n        columns: [...state.columns, action.filter || {\n          dimension: null,\n          name: null,\n          filter: null\n        }]\n      };\n    case types.LAYER_EDIT_FILTER_REMOVE:\n      columns = state.columns.filter(c => c.filter !== undefined); // Also used for style data element without filter\n\n      if (!columns || !columns[action.index]) {\n        return state;\n      }\n      return {\n        ...state,\n        columns: [...state.columns.filter(c => c.filter === undefined), ...columns.filter((c, i) => i !== action.index)]\n      };\n    case types.LAYER_EDIT_FILTER_CHANGE:\n      columns = state.columns.filter(c => c.filter !== undefined); // Also used for style data element without filter\n\n      if (!columns || !columns[action.index]) {\n        return state;\n      }\n      columns[action.index] = action.filter;\n      return {\n        ...state,\n        columns: [...state.columns.filter(c => c.filter === undefined), ...columns]\n      };\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_SET:\n      return {\n        ...state,\n        styleDataItem: action.dataItem\n      };\n\n    // Set options to data element option set\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET:\n      newState = {\n        ...state,\n        styleDataItem: {\n          ...state.styleDataItem,\n          optionSet: {\n            ...state.styleDataItem.optionSet,\n            options: action.options\n          }\n        }\n      };\n      delete newState.method;\n      delete newState.classes;\n      delete newState.colorScale;\n      return newState;\n    case types.LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET:\n      newState = {\n        ...state,\n        styleDataItem: {\n          ...state.styleDataItem,\n          values: {\n            ...state.styleDataItem.values,\n            [action.value]: action.color\n          }\n        }\n      };\n      delete newState.method;\n      delete newState.classes;\n      delete newState.colorScale;\n      return newState;\n    case types.LAYER_EDIT_THEMATIC_MAP_TYPE_SET:\n      newState = {\n        ...state,\n        thematicMapType: action.payload\n      };\n      if (action.payload === THEMATIC_CHOROPLETH && state.method === CLASSIFICATION_SINGLE_COLOR) {\n        delete newState.method;\n        delete newState.colorScale;\n        delete newState.classes;\n      }\n      return newState;\n    case types.LAYER_EDIT_CLASSIFICATION_SET:\n      newState = {\n        ...state,\n        method: action.method\n      };\n      if (state.method === CLASSIFICATION_SINGLE_COLOR || ![CLASSIFICATION_EQUAL_INTERVALS, CLASSIFICATION_EQUAL_COUNTS].includes(action.method)) {\n        delete newState.colorScale;\n        delete newState.classes;\n      }\n      if (action.method !== CLASSIFICATION_PREDEFINED) {\n        delete newState.legendSet;\n      }\n      if (newState.styleDataItem) {\n        delete newState.styleDataItem.optionSet;\n      }\n      return newState;\n    case types.LAYER_EDIT_COLOR_SCALE_SET:\n      newState = {\n        ...state,\n        colorScale: action.colorScale,\n        classes: action.colorScale.split(',').length\n      };\n      if (newState.styleDataItem) {\n        delete newState.styleDataItem.optionSet;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_STATUS_SET:\n      newState = {\n        ...state\n      };\n\n      // Default\n      if (action.status === EVENT_STATUS_ALL) {\n        delete newState.eventStatus;\n      } else {\n        newState.eventStatus = action.status;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_COORDINATE_FIELD_SET:\n      return {\n        ...state,\n        eventCoordinateField: action.fieldId\n      };\n    case types.LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET:\n      newState = {\n        ...state\n      };\n      if (action.fieldId === NONE) {\n        delete newState.fallbackCoordinateField;\n      } else {\n        newState.fallbackCoordinateField = action.fieldId;\n      }\n      return newState;\n    case types.LAYER_EDIT_EVENT_CLUSTERING_SET:\n      return {\n        ...state,\n        eventClustering: action.checked\n      };\n    case types.LAYER_EDIT_EVENT_POINT_RADIUS_SET:\n      return {\n        ...state,\n        eventPointRadius: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_EVENT_POINT_COLOR_SET:\n      return {\n        ...state,\n        eventPointColor: action.color\n      };\n    case types.LAYER_EDIT_RELATED_POINT_COLOR_SET:\n      return {\n        ...state,\n        relatedPointColor: action.color\n      };\n    case types.LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET:\n      return {\n        ...state,\n        relationshipLineColor: action.color\n      };\n    case types.LAYER_EDIT_RELATED_POINT_RADIUS_SET:\n      return {\n        ...state,\n        relatedPointRadius: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET:\n      return {\n        ...state,\n        organisationUnitColor: action.color\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET:\n      return {\n        ...state,\n        organisationUnitGroupSet: action.organisationUnitGroupSet\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNITS_SET:\n      return {\n        ...state,\n        rows: [action.payload]\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET:\n      {\n        const {\n          id,\n          name\n        } = action.payload;\n        return {\n          ...state,\n          orgUnitField: id,\n          orgUnitFieldDisplayName: id !== NONE ? name : null,\n          areaRadius: id === NONE ? EE_BUFFER : null\n        };\n      }\n\n    // Set organisation unit tree path (temporary solution, as favorites don't include paths)\n    case types.LAYER_EDIT_ORGANISATION_UNIT_PATH_SET:\n      return {\n        ...state,\n        rows: setOrgUnitPathInRows(state.rows, action.id, action.path)\n      };\n    case types.LAYER_EDIT_ORGANISATION_UNIT_MODE_SET:\n      return {\n        ...state,\n        organisationUnitSelectionMode: action.payload\n      };\n    case types.LAYER_EDIT_BAND_SET:\n      return {\n        ...state,\n        band: action.payload\n      };\n    case types.LAYER_EDIT_PARAMS_SET:\n      return {\n        ...state,\n        params: {\n          ...state.params,\n          ...action.payload\n        }\n      };\n    case types.LAYER_EDIT_FILTER_SET:\n      return {\n        ...state,\n        filter: action.filter\n      };\n    case types.LAYER_EDIT_LABELS_SET:\n      return {\n        ...state,\n        labels: action.isChecked\n      };\n    case types.LAYER_EDIT_LABEL_TEMPLATE:\n      return {\n        ...state,\n        labelTemplate: action.template\n      };\n    case types.LAYER_EDIT_LABEL_FONT_COLOR_SET:\n      return {\n        ...state,\n        labelFontColor: action.color\n      };\n    case types.LAYER_EDIT_LABEL_FONT_SIZE_SET:\n      return {\n        ...state,\n        labelFontSize: action.size\n      };\n    case types.LAYER_EDIT_LABEL_FONT_WEIGHT_SET:\n      return {\n        ...state,\n        labelFontWeight: action.weight\n      };\n    case types.LAYER_EDIT_LABEL_FONT_STYLE_SET:\n      return {\n        ...state,\n        labelFontStyle: action.style\n      };\n    case types.LAYER_EDIT_BUFFER_RADIUS_SET:\n      return {\n        ...state,\n        areaRadius: action.radius\n      };\n    case types.LAYER_EDIT_RADIUS_LOW_SET:\n      return {\n        ...state,\n        radiusLow: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_RADIUS_HIGH_SET:\n      return {\n        ...state,\n        radiusHigh: parseInt(action.radius, 10)\n      };\n    case types.LAYER_EDIT_LEGEND_SET_SET:\n      return {\n        ...state,\n        legendSet: action.legendSet\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_TYPE_SET:\n      return {\n        ...state,\n        trackedEntityType: {\n          ...action.trackedEntityType\n        },\n        program: null,\n        programStage: null,\n        relationshipType: null,\n        relationshipOutsideProgram: null\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET:\n      return {\n        ...state,\n        relationshipType: action.relationshipType\n      };\n    case types.LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET:\n      return {\n        ...state,\n        relationshipOutsideProgram: action.payload\n      };\n    case types.LAYER_EDIT_PROGRAM_STATUS_SET:\n      newState = {\n        ...state\n      };\n\n      // Default\n      if (action.payload === 'ALL') {\n        delete newState.programStatus;\n      } else {\n        newState.programStatus = action.payload;\n      }\n      return newState;\n    case types.LAYER_EDIT_FOLLOW_UP_SET:\n      return {\n        ...state,\n        followUp: action.payload\n      };\n    case types.LAYER_EDIT_NO_DATA_COLOR_SET:\n      newState = {\n        ...state\n      };\n\n      // Default is to show no feature\n      if (!action.payload) {\n        delete newState.noDataColor;\n      } else {\n        newState.noDataColor = action.payload;\n      }\n      return newState;\n    case types.LAYER_EDIT_FEATURE_STYLE_SET:\n      return {\n        ...state,\n        featureStyle: {\n          ...state.featureStyle,\n          ...action.payload\n        }\n      };\n    default:\n      return state;\n  }\n};\nexport default layerEdit;","import * as types from '../constants/actionTypes.js';\nconst orgUnitProfile = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n      return action.payload;\n    case types.ORGANISATION_UNIT_PROFILE_CLOSE:\n    case types.FEATURE_PROFILE_SET:\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.DOWNLOAD_MODE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return null;\n    default:\n      return state;\n  }\n};\nexport default orgUnitProfile;","import * as types from '../constants/actionTypes.js';\nconst defaultState = {\n  width: typeof window === 'object' ? window.innerWidth : null,\n  height: typeof window === 'object' ? window.innerHeight : null,\n  layersPanelOpen: true,\n  rightPanelOpen: false,\n  dataTableHeight: 300,\n  mapContextMenu: true,\n  downloadMode: false\n};\nconst ui = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case types.LAYERS_PANEL_OPEN:\n      return {\n        ...state,\n        layersPanelOpen: true\n      };\n    case types.LAYERS_PANEL_CLOSE:\n      return {\n        ...state,\n        layersPanelOpen: false\n      };\n    case types.INTERPRETATIONS_PANEL_OPEN:\n    case types.ORGANISATION_UNIT_PROFILE_SET:\n    case types.FEATURE_PROFILE_SET:\n      return {\n        ...state,\n        rightPanelOpen: true\n      };\n    case types.INTERPRETATIONS_PANEL_CLOSE:\n    case types.ORGANISATION_UNIT_PROFILE_CLOSE:\n    case types.FEATURE_PROFILE_CLOSE:\n    case types.MAP_NEW:\n    case types.MAP_SET:\n      return {\n        ...state,\n        rightPanelOpen: false\n      };\n    case types.DOWNLOAD_MODE_OPEN:\n      return {\n        ...state,\n        downloadMode: true\n      };\n    case types.DOWNLOAD_MODE_CLOSE:\n      return {\n        ...state,\n        rightPanelOpen: false,\n        downloadMode: false\n      };\n    case types.DATA_TABLE_RESIZE:\n      return {\n        ...state,\n        dataTableHeight: action.height\n      };\n    default:\n      return state;\n  }\n};\nexport default ui;","import { combineReducers } from 'redux';\nimport aggregations from './aggregations.js';\nimport analyticalObject from './analyticalObject.js';\nimport contextMenu from './contextMenu.js';\nimport dataTable from './dataTable.js';\nimport download from './download.js';\nimport feature from './feature.js';\nimport featureProfile from './featureProfile.js';\nimport interpretation from './interpretation.js';\nimport layerEdit from './layerEdit.js';\nimport map from './map.js';\nimport orgUnitProfile from './orgUnitProfile.js';\nimport ui from './ui.js';\nexport default combineReducers({\n  aggregations,\n  analyticalObject,\n  contextMenu,\n  dataTable,\n  download,\n  interpretation,\n  layerEdit,\n  map,\n  orgUnitProfile,\n  ui,\n  feature,\n  featureProfile\n});","import { createStore, compose, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport reducer from '../reducers/index.js';\nconst composeEnhancer = process.env.NODE_ENV === 'development' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducer, composeEnhancer(applyMiddleware(thunk)));\nif (window.Cypress) {\n  window.store = store;\n}\nexport default store;","import { FALLBACK_BASEMAP_ID } from './basemaps.js';\nexport const apiVersion = 40;\nexport const DEFAULT_SYSTEM_SETTINGS = {\n  keyDefaultBaseMap: FALLBACK_BASEMAP_ID\n};\nexport const SYSTEM_SETTINGS = ['keyAnalysisRelativePeriod', 'keyBingMapsApiKey', 'keyHideDailyPeriods', 'keyHideWeeklyPeriods', 'keyHideBiWeeklyPeriods', 'keyHideMonthlyPeriods', 'keyHideBiMonthlyPeriods', 'keyDefaultBaseMap'];","import { layerTypes } from '../components/map/MapApi.js';\nimport { defaultBasemaps } from '../constants/basemaps.js';\nimport { BING_LAYER, MAP_LAYER_POSITION_BASEMAP } from '../constants/layers.js';\nimport { DEFAULT_SYSTEM_SETTINGS, SYSTEM_SETTINGS } from '../constants/settings.js';\nimport { createExternalBasemapLayer, createExternalOverlayLayer, supportedMapServices } from './external.js';\nimport { getDefaultLayerTypes } from './getDefaultLayerTypes.js';\nimport { getHiddenPeriods } from './periods.js';\nimport { fetchExternalLayersQuery } from './requests.js';\nexport const appQueries = {\n  currentUser: {\n    resource: 'me',\n    params: {\n      fields: 'id,username,displayName~rename(name),authorities,settings[keyAnalysisDisplayProperty]'\n    }\n  },\n  systemSettings: {\n    resource: 'systemSettings',\n    params: {\n      key: SYSTEM_SETTINGS\n    }\n  },\n  externalMapLayers: fetchExternalLayersQuery\n};\nconst getBasemapList = (externalMapLayers, systemSettings) => {\n  const externalBasemaps = externalMapLayers.filter(layer => layer.mapLayerPosition === MAP_LAYER_POSITION_BASEMAP).filter(layer => supportedMapServices.includes(layer.mapService)).map(createExternalBasemapLayer).filter(basemap => layerTypes.includes(basemap.config.type));\n  return defaultBasemaps().filter(basemap => layerTypes.includes(basemap.config.type)).filter(basemap => !systemSettings.keyBingMapsApiKey ? basemap.config.type !== BING_LAYER : true).map(basemap => {\n    if (basemap.config.type === BING_LAYER) {\n      basemap.config.apiKey = systemSettings.keyBingMapsApiKey;\n    }\n    return basemap;\n  }).concat(externalBasemaps);\n};\nconst getLayerTypes = externalMapLayers => {\n  const externalLayerTypes = externalMapLayers.filter(layer => layer.mapLayerPosition !== MAP_LAYER_POSITION_BASEMAP).filter(layer => supportedMapServices.includes(layer.mapService)).map(createExternalOverlayLayer).filter(overlay => layerTypes.includes(overlay.config.type));\n  return getDefaultLayerTypes().concat(externalLayerTypes);\n};\nexport const providerDataTransformation = _ref => {\n  let {\n    currentUser,\n    systemSettings,\n    externalMapLayers\n  } = _ref;\n  return {\n    currentUser: {\n      id: currentUser.id,\n      name: currentUser.name,\n      username: currentUser.username,\n      authorities: new Set(currentUser.authorities)\n    },\n    nameProperty: currentUser.settings.keyAnalysisDisplayProperty === 'name' ? 'displayName' : 'displayShortName',\n    systemSettings: Object.assign({}, DEFAULT_SYSTEM_SETTINGS, systemSettings, {\n      hiddenPeriods: getHiddenPeriods(systemSettings)\n    }),\n    basemaps: getBasemapList(externalMapLayers.externalMapLayers, systemSettings),\n    layerTypes: getLayerTypes(externalMapLayers.externalMapLayers)\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport { earthEngineLayers } from '../constants/earthEngine.js';\nimport { THEMATIC_LAYER, EVENT_LAYER, TRACKED_ENTITY_LAYER, FACILITY_LAYER, ORG_UNIT_LAYER } from '../constants/layers.js';\nexport const getDefaultLayerTypes = () => [{\n  layer: THEMATIC_LAYER,\n  type: i18n.t('Thematic'),\n  img: 'images/thematic.png',\n  opacity: 0.9\n}, {\n  layer: EVENT_LAYER,\n  type: i18n.t('Events'),\n  img: 'images/events.png',\n  opacity: 0.8,\n  eventClustering: true\n}, {\n  layer: TRACKED_ENTITY_LAYER,\n  type: i18n.t('Tracked entities'),\n  img: 'images/trackedentities.png',\n  opacity: 0.5\n}, {\n  layer: FACILITY_LAYER,\n  type: i18n.t('Facilities'),\n  img: 'images/facilities.png',\n  opacity: 1\n}, {\n  layer: ORG_UNIT_LAYER,\n  type: i18n.t('Org units'),\n  img: 'images/orgunits.png',\n  opacity: 1\n}, ...earthEngineLayers().filter(l => !l.legacy)];","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { CachedDataQueryProvider } from '@dhis2/analytics';\nimport { D2Shim } from '@dhis2/app-runtime-adapter-d2';\nimport { DataStoreProvider } from '@dhis2/app-service-datastore';\nimport { CssVariables, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport log from 'loglevel';\nimport queryString from 'query-string';\nimport React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport App from './components/app/App.js';\nimport OrgUnitsProvider from './components/OrgUnitsProvider.js';\nimport WindowDimensionsProvider from './components/WindowDimensionsProvider.js';\nimport store from './store/index.js';\nimport { USER_DATASTORE_NAMESPACE } from './util/analyticalObject.js';\nimport { appQueries, providerDataTransformation } from './util/app.js';\nimport './locales/index.js';\nimport history from './util/history.js';\nlog.setLevel(process.env.NODE_ENV === 'production' ? log.levels.INFO : log.levels.TRACE);\nconst d2Config = {\n  schemas: ['dataElement', 'dataElementGroup', 'dataSet', 'externalMapLayer', 'indicator', 'indicatorGroup', 'legendSet', 'map', 'optionSet', 'organisationUnit', 'organisationUnitGroup', 'organisationUnitGroupSet', 'organisationUnitLevel', 'program', 'programStage', 'userGroup']\n};\nconst replaceLegacyUrl = () => {\n  // support legacy urls\n  const queryParams = queryString.parse(window.location.search, {\n    parseBooleans: true\n  });\n  const [base] = window.location.href.split('?');\n  if (queryParams.id) {\n    // /?id=ytkZY3ChM6J\n    // /?id=ZBjCfSaLSqD&interpretationid=yKqhXZdeJ6a\n    // /?id=ZBjCfSaLSqD&interpretationId=yKqhXZdeJ6a\n\n    const interpretationId = queryParams.interpretationId || queryParams.interpretationid;\n    const interpretationQueryParams = interpretationId ? `?interpretationId=${interpretationId}` : '';\n\n    // replace history && hash history\n    window.history.replaceState({}, '', `${base}#/${queryParams.id}${interpretationQueryParams}`);\n    history.replace(`/${queryParams.id}${interpretationQueryParams}`);\n  } else if (queryParams.currentAnalyticalObject === true) {\n    // /?currentAnalyticalObject=true\n\n    // replace history && hash history\n    window.history.replaceState({}, '', `${base}#/currentAnalyticalObject`);\n    history.replace('/currentAnalyticalObject');\n  }\n};\nconst AppWrapper = () => {\n  replaceLegacyUrl();\n  return /*#__PURE__*/React.createElement(ReduxProvider, {\n    store: store\n  }, /*#__PURE__*/React.createElement(DataStoreProvider, {\n    namespace: USER_DATASTORE_NAMESPACE\n  }, /*#__PURE__*/React.createElement(D2Shim, {\n    d2Config: d2Config\n  }, _ref => {\n    let {\n      d2,\n      d2Error\n    } = _ref;\n    if (!d2 && !d2Error) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: 'absolute',\n          width: '100%',\n          height: '100%',\n          top: 0\n        }\n      }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n    }\n    return /*#__PURE__*/React.createElement(CachedDataQueryProvider, {\n      query: appQueries,\n      dataTransformation: providerDataTransformation\n    }, /*#__PURE__*/React.createElement(WindowDimensionsProvider, null, /*#__PURE__*/React.createElement(OrgUnitsProvider, null, /*#__PURE__*/React.createElement(CssVariables, {\n      colors: true,\n      elevations: true,\n      spacers: true,\n      theme: true\n    }), /*#__PURE__*/React.createElement(App, null))));\n  })));\n};\nexport default AppWrapper;"],"names":["MAP_NEW","MAP_SET","MAP_PROPS_SET","MAP_CONTEXT_MENU_OPEN","MAP_CONTEXT_MENU_CLOSE","MAP_COORDINATE_OPEN","MAP_COORDINATE_CLOSE","MAP_EARTH_ENGINE_VALUE_SHOW","MAP_ALERTS_CLEAR","BASEMAP_SELECTED","BASEMAP_TOGGLE_EXPAND","BASEMAP_TOGGLE_VISIBILITY","BASEMAP_CHANGE_OPACITY","LAYER_ADD","LAYER_REMOVE","LAYER_CHANGE_OPACITY","LAYER_EDIT","LAYER_CANCEL","LAYER_LOADING_SET","LAYER_SORT","LAYER_TOGGLE_EXPAND","LAYER_TOGGLE_VISIBILITY","LAYER_UPDATE","DATA_TABLE_CLOSE","DATA_TABLE_TOGGLE","DATA_TABLE_RESIZE","DATA_FILTER_SET","DATA_FILTER_CLEAR","ORGANISATION_UNIT_PROFILE_SET","ORGANISATION_UNIT_PROFILE_CLOSE","LAYERS_PANEL_OPEN","LAYERS_PANEL_CLOSE","INTERPRETATIONS_PANEL_OPEN","INTERPRETATIONS_PANEL_CLOSE","LAYER_EDIT_PROGRAM_SET","LAYER_EDIT_PROGRAM_STAGE_SET","LAYER_EDIT_PERIOD_NAME_SET","LAYER_EDIT_PERIOD_SET","LAYER_EDIT_START_DATE_SET","LAYER_EDIT_END_DATE_SET","LAYER_EDIT_FILTER_ADD","LAYER_EDIT_FILTER_REMOVE","LAYER_EDIT_FILTER_CHANGE","LAYER_EDIT_DIMENSION_FILTER_ADD","LAYER_EDIT_DIMENSION_FILTER_REMOVE","LAYER_EDIT_DIMENSION_FILTER_CHANGE","LAYER_EDIT_STYLE_DATA_ITEM_SET","LAYER_EDIT_STYLE_DATA_ITEM_OPTIONS_SET","LAYER_EDIT_STYLE_DATA_ITEM_BOOLEAN_SET","LAYER_EDIT_THEMATIC_MAP_TYPE_SET","LAYER_EDIT_CLASSIFICATION_SET","LAYER_EDIT_COLOR_SCALE_SET","LAYER_EDIT_DATA_ITEM_SET","LAYER_EDIT_EVENT_STATUS_SET","LAYER_EDIT_EVENT_COORDINATE_FIELD_SET","LAYER_EDIT_EVENT_CLUSTERING_SET","LAYER_EDIT_EVENT_POINT_RADIUS_SET","LAYER_EDIT_EVENT_POINT_COLOR_SET","LAYER_EDIT_RELATED_POINT_COLOR_SET","LAYER_EDIT_RELATED_POINT_RADIUS_SET","LAYER_EDIT_RELATIONSHIP_LINE_COLOR_SET","LAYER_EDIT_ORGANISATION_UNITS_SET","LAYER_EDIT_ORGANISATION_UNIT_GROUP_SET","LAYER_EDIT_ORGANISATION_UNIT_MODE_SET","LAYER_EDIT_ORGANISATION_UNIT_COLOR_SET","LAYER_EDIT_ORGANISATION_UNIT_FIELD_SET","LAYER_EDIT_VALUE_TYPE_SET","LAYER_EDIT_INDICATOR_GROUP_SET","LAYER_EDIT_PERIOD_TYPE_SET","LAYER_EDIT_RENDERING_STRATEGY_SET","LAYER_EDIT_AGGREGATION_TYPE_SET","LAYER_EDIT_DATA_ELEMENT_GROUP_SET","LAYER_EDIT_PARAMS_SET","LAYER_EDIT_FILTER_SET","LAYER_EDIT_LABELS_SET","LAYER_EDIT_LABEL_TEMPLATE","LAYER_EDIT_LABEL_FONT_SIZE_SET","LAYER_EDIT_LABEL_FONT_WEIGHT_SET","LAYER_EDIT_LABEL_FONT_STYLE_SET","LAYER_EDIT_LABEL_FONT_COLOR_SET","LAYER_EDIT_BUFFER_RADIUS_SET","LAYER_EDIT_RADIUS_LOW_SET","LAYER_EDIT_RADIUS_HIGH_SET","LAYER_EDIT_LEGEND_SET_SET","LAYER_EDIT_ORGANISATION_UNIT_PATH_SET","LAYER_EDIT_OPERAND_SET","LAYER_EDIT_TRACKED_ENTITY_TYPE_SET","LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_TYPE_SET","LAYER_EDIT_TRACKED_ENTITY_RELATIONSHIP_OUTSIDE_PROGRAM_SET","LAYER_EDIT_PROGRAM_STATUS_SET","LAYER_EDIT_FOLLOW_UP_SET","LAYER_EDIT_NO_DATA_COLOR_SET","LAYER_EDIT_BAND_SET","LAYER_EDIT_FEATURE_STYLE_SET","LAYER_EDIT_FALLBACK_COORDINATE_FIELD_SET","INTERPRETATION_SET","DOWNLOAD_MODE_OPEN","DOWNLOAD_MODE_CLOSE","DOWNLOAD_CONFIG_SET","ANALYTICAL_OBJECT_SET","ANALYTICAL_OBJECT_CLEAR","FEATURE_HIGHLIGHT","FEATURE_PROFILE_SET","FEATURE_PROFILE_CLOSE","AGGREGATIONS_SET","WindowDimensionsCtx","createContext","windowDims","height","window","innerHeight","width","innerWidth","_ref","children","dimensions","setDimensions","useState","useEffect","handleResize","debounce","addEventListener","removeEventListener","React","Provider","value","useWindowDimensions","useContext","highlightFeature","payload","type","types","setFeatureProfile","setOrgUnitProfile","id","DEFAULT_LOCALE","dateLocale","locale","includes","replace","toDate","date","Array","isArray","Date","shortDateRegexp","isValidDateFormat","dateString","test","substr","formatDate","dateObj","getFullYear","getMonth","slice","getDate","fallbackDateFormat","hasIntlSupport","global","Intl","DateTimeFormat","formatLocaleDate","showYear","arguments","length","undefined","i18n","year","month","day","format","formatStartEndDate","startDate","endDate","loc","getDateArray","parseInt","substring","getStartEndDateError","startDateStr","endDateStr","startDateArr","endDateArr","VECTOR_STYLE","TILE_LAYER","BING_LAYER","EVENT_LAYER","THEMATIC_LAYER","FACILITY_LAYER","ORG_UNIT_LAYER","EXTERNAL_LAYER","EARTH_ENGINE_LAYER","TRACKED_ENTITY_LAYER","GEOJSON_LAYER","GEOJSON_URL_LAYER","DOWNLOADABLE_LAYER_TYPES","DATA_TABLE_LAYER_TYPES","MAP_LAYER_POSITION_BASEMAP","OPEN_AS_LAYER_TYPES","DEFAULT_START_DATE","setFullYear","DEFAULT_END_DATE","RENDERING_STRATEGY_SINGLE","RENDERING_STRATEGY_TIMELINE","RENDERING_STRATEGY_SPLIT_BY_PERIOD","THEMATIC_CHOROPLETH","THEMATIC_BUBBLE","THEMATIC_RADIUS_LOW","THEMATIC_RADIUS_HIGH","THEMATIC_RADIUS_MIN","THEMATIC_RADIUS_MAX","EVENT_CLIENT_PAGE_SIZE","EVENT_COLOR","EVENT_COORDINATE_DEFAULT","EVENT_COORDINATE_CASCADING","TEI_COLOR","TEI_RELATED_COLOR","TEI_RELATIONSHIP_LINE_COLOR","ORG_UNIT_COLOR","ORG_UNIT_RADIUS","ORG_UNIT_RADIUS_SMALL","EE_BUFFER","CLASSIFICATION_PREDEFINED","CLASSIFICATION_EQUAL_INTERVALS","CLASSIFICATION_EQUAL_COUNTS","CLASSIFICATION_SINGLE_COLOR","STYLE_TYPE_COLOR","STYLE_TYPE_SYMBOL","LABEL_TEMPLATE_NAME_ONLY","LABEL_FONT_SIZE","LABEL_FONT_COLOR","NO_DATA_COLOR","MAX_RADIUS","NONE","YlGn","YlGnBu","GnBu","BuGn","PuBuGn","PuBu","BuPu","RdPu","PuRd","OrRd","YlOrRd","YlOrBr","Purples","Blues","Greens","Oranges","Reds","Greys","PuOr","BrBG","PRGn","PiYG","RdBu","RdGy","RdYlBu","Spectral","RdYlGn","Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","YlOrBr_reverse","Reds_reverse","YlGn_reverse","Greens_reverse","Blues_reverse","BuPu_reverse","RdPu_reverse","PuRd_reverse","Greys_reverse","colorScales","getColorPalette","scale","classes","colorbrewer","join","getColorScale","palette","split","find","name","defaultColorScaleName","defaultClasses","defaultColorScale","cssColor","color","isString","getUniqueColor","defaultColors","colors","randomColor","Math","random","toString","push","index","isDarkColor","hcl","l","getContrastColor","dataKey","dispatch","useDispatch","dataTable","useSelector","state","map","overlay","mapViews","filter","layer","layerId","filters","dataFilters","filterValue","Input","dataTest","dense","placeholder","onChange","_ref2","setDataFilter","fieldId","clearDataFilter","numberValueTypes","textValueTypes","booleanValueTypes","getMapLocale","acres","Area","Cancel","Delete","Distance","ha","km","mi","Perimeter","options","glyphs","baseUrl","div","document","createElement","className","style","MapApi","getJsonResponse","async","string","response","text","JSON","parse","apiFetch","url","method","body","d2","getD2","headers","isObject","stringify","Api","getApi","fetch","encodeURI","then","catch","error","console","log","classAggregation","hasClasses","getPeriodFromFilter","args","getAuthToken","Promise","resolve","reject","token","Error","status","token_type","workerPromise","getPeriods","eeId","periodType","eeWorker","EarthEngineWorker","loadEarthEngineWorker","getWorkerInstance","features","properties","String","data","defaultFilters","filterData","filteredData","Object","keys","forEach","field","d","numericFilter","stringFilter","toLowerCase","some","orFilter","every","isTrueFilter","Number","EVENT_ID_FIELD","createEventFeature","names","event","getGeometry","geometry","reduce","props","i","header","option","optionSet","code","buildEventGeometryGetter","geomCol","findIndex","h","createEventFeatures","config","column","columnNames","idColName","idCol","eventCoordinateField","values","metaData","items","rows","row","outputIdScheme","sort","feature","TYPE_NUMBER","TYPE_STRING","DHIS2_PROP","getGeojsonDisplayData","entries","key","startsWith","_ref3","GEO_TYPE_POINT","GEO_TYPE_POLYGON","GEO_TYPE_LINE","GEO_TYPE_FEATURE","GEO_TYPE_FEATURE_COLLECTION","rawGeometryTypes","formatCount","count","num","toFixed","round","getRoundToPrecisionFn","n","m","pow","getPrecision","sortedValues","a","b","minValue","maxValue","minMaxGap","absOfMaxValue","abs","abc","letters","concat","toUpperCase","ALLOWED_CHARS","CODE_PATTERN","isValidUid","INDEX","NAME","ID","VALUE","LEGEND","RANGE","LEVEL","PARENT_NAME","TYPE","COLOR","OUNAME","EVENTDATE","ERROR_SERVER_CLUSTER","ERROR_NO_VALID_DATA","ERROR_NO_HEADERS","ERROR_NON_HOMOGENOUS_FEATURES","getErrorCodeText","defaultFieldsMap","renderer","EMPTY_AGGREGATIONS","EMPTY_LAYER","useTableData","_ref6","sortField","sortDirection","aggregations","errorCode","useRef","layerType","aggregationType","legend","styleDataItem","layerHeaders","serverCluster","dataWithAggregations","useMemo","current","hasAdditionalGeometry","_headers","fields","customFields","valueType","getEventHeaders","_ref4","title","_ref5","roundFn","precision","str","txt","charAt","getEarthEngineHeaders","firstDataItem","localeCompare","item","_ref7","isNaN","align","itemId","isLoading","isExtended","_extends","assign","bind","target","source","prototype","hasOwnProperty","call","apply","this","ASCENDING","TableComponents","Table","context","DataTable","layout","styles","TableBody","DataTableBody","TableHead","DataTableHead","TableRow","DataTableRow","onClick","onMouseEnter","onMouseLeave","EmptyPlaceholder","colSpan","availableHeight","availableWidth","headerRowRef","columnWidths","setColumnWidths","activeLayerId","setSorting","useReducer","sorting","newSorting","sortData","useCallback","showDetailView","acc","_row$find","r","setFeatureHighlight","_row$find2","origin","clearFeatureHighlight","_event$toElement","toElement","relatedTarget","tagName","tableContext","requestAnimationFrame","measuredColumnWidths","cell","cells","rect","getBoundingClientRect","floor","TableVirtuoso","components","fixedHeaderContent","ref","DataTableColumnHeader","onSortIconClick","sortIconTitle","onFilterIconClick","Function","showFilter","FilterInput","itemContent","_","DataTableCell","cx","backgroundColor","ComponentCover","CenteredContent","CircularLoader","ErrorBoundary","Component","constructor","super","errorInfo","componentDidCatch","setState","render","IconDrag","viewBox","xmlns","fill","fillRule","ResizeHandle","onResize","onResizeEnd","minHeight","maxHeight","dragHeight","onDrag","evt","getHeight","pageY","draggable","onDragStart","img","src","dataTransfer","setDragImage","setData","ondragover","onDragEnd","defaultProps","BottomPanel","dataTableHeight","ui","layersPanelOpen","rightPanelOpen","panelRef","tableHeight","tableWidth","resizeDataTable","IconCross16","history","createHashHistory","defaultHashUrlParams","mapId","isDownload","interpretationId","DOWNLOAD","getHashUrlParams","params","queryString","search","parseBooleans","pathParts","pathname","openDownloadMode","location","closeDownloadMode","rootPath","DownloadMenubar","getElementsByTagName","display","Button","IconChevronLeft24","setDownloadConfig","dimConf","param","dimensionName","objectName","category","indicator","itemType","dataElement","operand","dataSet","eventDataItem","programDataElement","programAttribute","programIndicator","period","organisationUnit","reportingRate","periodGroups","DAILY","WEEKLY","BIWEEKLY","MONTHLY","BIMONTHLY","QUARTERLY","SIXMONTHLY","YEARLY","FINANCIAL","RELATIVE_PERIODS","START_END_DATES","periodTypes","group","WEEKLYWED","WEEKLYTHU","WEEKLYSAT","WEEKLYSUN","SIXMONTHLYAPR","FYNOV","FYOCT","FYJUL","FYAPR","singleMapPeriods","invalidSplitViewPeriods","getPeriodTypes","hiddenPeriods","getFixedPeriodsByType","getFixedPeriodsOptionsById","forceDescendingForYearTypes","match","offset","now","getYearOffsetFromNow","periods","reversePeriods","reverse","getRelativePeriods","getRelativePeriodsOptionsById","flat","isPeriodAvailable","p","filterFuturePeriods","periodSetting","getHiddenPeriods","systemSettings","setting","createDimension","dimension","getDimensionItems","arr","dataItems","getDimension","getDataItemFromColumns","setDataItemInColumns","dataItem","dim","dimensionItemType","legendSet","getOrgUnitsFromRows","setOrgUnitPathInRows","path","orgUnits","orgUnit","ou","getPeriodFromFilters","removePeriodFromFilters","f","getPeriodNameFromId","obj","setFiltersFromPeriod","getDimensionsFromFilters","getValidDimensionsFromFilters","removeDimensionFromFilters","changeDimensionInFilters","getFilterOperatorAsText","operator","EQ","GT","GE","LT","LE","NE","IN","LIKE","getFilterValueName","val","combineDataItems","dataItemsA","dataItemsB","includeTypes","excludeTypes","sortBy","isValidDimension","Boolean","METADATA_FORMAT_NAME","getEventColumns","nameProperty","models","programStage","get","paging","programStageDataElements","el","displayInReports","getAnalyticsRequest","program","columns","eventStatus","fallbackCoordinateField","relativePeriodDate","addStyleDataItem","col","analyticsRequest","analytics","request","withProgram","withStage","withCoordinatesOnly","addPeriodFilter","withStartDate","withEndDate","withRelativePeriodDate","addOrgUnitDimension","addDimension","withCoordinateField","withParameters","defaultCoordinateFallback","withEventStatus","loadData","events","getQuery","withPageSize","addPropNames","layerName","standardizeFilename","ext","downloadData","humanReadableKeys","layerData","res","valuesByPeriod","periodId","periodValue","includeValuesByPeriod","FileSaver","geojson","Blob","createGeoJsonBlob","toStringFn","propertyMap","displayName","shortName","displayShortName","getDisplayProperty","displayProperty","keyAnalysisDisplayProperty","currentUser","settings","baseFields","mandatoryDataItemAttributes","getValidDataItems","prop","getSplitViewLayer","layers","renderingStrategy","formatTime","time","getLongestTextLength","array","curr","newMap","ALERT_SUCCESS","success","ALERT_SUCCESS_DELAY","duration","ALERT_CRITICAL","critical","ALERT_MESSAGE_DYNAMIC","msg","ALERT_OPTIONS_DYNAMIC","isError","validMapProperties","validLayerProperties","validModelProperties","cleanMapConfig","defaultBasemapId","omitBy","isNil","pick","basemap","getBasemapString","cleanLayerConfig","isVisible","models2objects","cleanDimension","band","eeConfig","datasetId","periodName","relationships","relationshipType","pointColor","relatedPointColor","pointRadius","relatedPointRadius","lineColor","relationshipLineColor","relationshipOutsideProgram","featureStyle","omit","updateMapMutation","resource","skipTranslation","skipSharing","createMapMutation","getMapName","toLocaleDateString","getSavedMessage","getSaveFailureMessage","message","nsSeparator","onFileMenuAction","useCachedDataQuery","defaultBasemap","keyDefaultBaseMap","saveAlert","useAlert","saveAsAlert","deleteAlert","fileMenuErrorAlert","putMap","useDataMutation","onError","e","show","postMap","onNew","UiFileMenu","fileType","fileObject","onOpen","onSave","onSaveAs","description","uid","onRename","onDelete","onShare","onTranslate","position","label","checked","disabled","tooltip","UiCheckbox","Tooltip","content","IconInfo16","backgroundImage","Fragment","IconChevronDown24","bins","itemWidth","isOpen","setIsOpen","anchorRef","onColorScaleSelect","ColorScale","Popover","reference","arrow","placement","onClickOutside","ConditionalWrapper","condition","wrapper","propTypes","PropTypes","isRequired","defaultVal","onBlur","inputEl","defaultValue","min","max","step","helpText","inputWidth","InputField","size","weight","fontStyle","onColorChange","onSizeChange","onWeightChange","onStyleChange","NumberField","ColorButton","button","icon","IconTextBold24","secondary","toggled","IconTextItalic24","ariaLabel","isSelected","onDisplayOptionChange","SelectField","loading","RadioContext","radio","setRadio","FieldGroup","UiRadio","errorText","warning","prefix","multiple","Select","MultiSelectField","SingleSelectField","Option","MultiSelectOption","SingleSelectOption","selected","v","onSelectChange","validationText","TabContext","tab","setTab","TabBar","UiTab","loadingMaskClass","MapLoadingMask","translucent","Checkbox","showInLegend","northArrowPositions","pos","renderedClass","downloadingClass","DownloadSettings","isPushAnalytics","isRendered","setIsRendered","setError","showName","showDescription","showLegend","showOverviewMap","hasOverviewMapSpace","showNorthArrow","northArrowPosition","includeMargins","download","legendLayers","onDownload","filename","mapEl","getElementById","parentNode","classList","add","downloadMapImage","sourceEl","toBlob","blob","remove","hasLayers","mapElements","getElementsByClassName","observer","MutationObserver","mutations","mutation","attributeName","querySelector","contains","observe","attributes","disconnect","isSupported","createElementNS","isSplitView","Drawer","LegendLayers","NorthArrowPosition","Help","ButtonStrip","end","primary","addLayer","editLayer","updateLayer","FALLBACK_BASEMAP_ID","getFallbackBasemap","defaultBasemaps","attribution","isDark","apiKey","defaultBasemapState","isExpanded","opacity","defaultState","bounds","action","alerts","coordinate","sortedMapViews","coordinatePopup","generateUid","arrayMoveImmutable","oldIndex","newIndex","emptyBasemap","setBasemap","basemaps","selectedId","basemapToUse","basemapConfig","SortableHandle","Handle","IconDragHandle24","connect","_layer$aggregationTyp","dataTableOpen","isEarthEngine","hasOrgUnitData","onEdit","onRemove","toggleDataTable","openAs","hasError","somethingAboveDivider","somethingBelowDivider","showDivider","showDataTableDisabled","IconButton","IconMore24","Menu","MenuItem","IconTable16","IconVisualizationColumn16","IconDownload16","MenuDivider","IconEdit16","IconDelete16","destructive","lowerFill","upperFill","onSliderChange","background","LayerToolbar","hasOpacity","onOpacityChange","toggleLayerVisibility","expansionMenuProps","IconEdit24","visible","notvisible","IconView24","IconViewOff24","OpacitySlider","LayerToolbarMoreMenu","subtitle","isOverlay","toggleExpand","layerToolbarProps","Card","IconChevronUp24","selectedID","selectBasemap","Basemap","changeBasemapOpacity","toggleBasemapExpand","toggleBasemapVisibility","useBasemapConfig","LayerCard","BasemapList","openInterpretationsPanel","LayersToggle","downloadMode","IconChevronRight24","getLegendItemForValue","legendItems","startValue","endValue","isLast","getLegendItems","numClasses","getEqualIntervals","getQuantiles","binSize","precisionRound","valueFormat","binCount","binLastValPos","bin","loadLegendSet","loadDataItemLegendSet","model","getPredefinedLegendItems","pickSome","legends","getAutomaticLegendItems","colorScale","CURRENT_AO_KEY","APP_URLS","CHART","PIVOT","getDimensionsFromAnalyticalObject","ao","getDataDimensionsFromAnalyticalObject","dataDim","getThematicLayerFromAnalyticalObject","dataId","yearlySeries","dataDims","dims","radius","maxRadius","textAlign","stroke","pattern","leftAlign","x","y","x2","guideLength","y2","textX","textPadding","textAnchor","cy","strokeWidth","x1","y1","strokeDasharray","alignmentBaseline","fontSize","paddingTop","radiusLow","radiusHigh","scaleSqrt","range","radiusMid","bubbles","itemScale","domain","c","textLength","ceil","alternateLength","smallestGap","prev","gap","alternateFit","alternate","maxBubble","minBubble","showNumbers","midRadius","midBubble","indexOf","transform","bubble","Bubble","strokeLinecap","strokeLinejoin","image","strokeColor","fillColor","symbol","border","borderRadius","lineWeight","LineSymbol","PolygonSymbol","LegendItemRange","groups","unit","explanation","sourceUrl","Bubbles","LegendItem","expl","href","rel","downloading","onStartClick","onCancelClick","small","onCloseDialog","formatOptions","useD2","selectedFormat","setSelectedFormat","humanReadable","setHumanReadable","isDownloading","setIsDownloading","onClose","Modal","ModalTitle","ModalContent","isChecked","NoticeBox","ModalActions","DataDownloadDialogActions","removeLayer","changeLayerOpacity","toggleLayerExpand","showDataDownloadDialog","setShowDataDownloadDialog","useConfig","set","useSetting","layerRemovedAlert","isLoaded","loadError","canEdit","canToggleDataTable","canDownload","canOpenAs","newOpacity","currentAO","getAnalyticalObjectFromThematicLayer","Legend","DataDownloadDialog","SortableLayer","SortableElement","OverlayCard","SortableLayersList","SortableContainer","LayersPanel","onSortEnd","sortLayers","useDragHandle","BasemapCard","earthEngineLayers","defaultAggregations","mosaic","bands","tileScale","notice","mask","methods","toFloat","multiply","subtract","popup","legacy","getEarthEngineLayer","toGeoJson","organisationUnits","coord","co","gpid","gppg","ty","pg","ids","compact","coordinates","na","hasCoordinatesDown","hcd","hasCoordinatesUp","hcu","level","le","grandParentParentGraph","grandParentId","parentGraph","parentId","pi","parentName","pn","drillUpDown","layerConfig","onFullscreenChange","isFullscreen","resize","getLayersBounds","fitBounds","toggleMultiTouch","toggleScrollZoom","qualitativeColors","parseGroupSet","organisationUnitGroups","getColor","groupsWithoutColors","g","getGroupColor","getSymbol","groupsWithoutSymbols","getGroupSymbol","fetchOrgUnitGroupSet","getPointItems","getPolygonItems","getOrgUnitStyle","groupSet","getOrgUnitGroupLegendItems","useColor","contextPath","getStyledOrgUnits","organisationUnitColor","orgUnitLevels","styleType","isFacilityLayer","levelWeight","levelItems","levels","uniqBy","styledFeatures","isPoint","iconUrl","groupItems","facilityItems","getOrgUnitLevels","organisationUnitLevels","list","toArray","getCoordinateField","orgUnitField","orgUnitFieldDisplayName","addAssociatedGeometries","mainFeatures","associatedGeometries","associated","createLegend","from","to","coordinateField","dataset","orgUnitParams","featuresRequest","geoFeatures","byOrgUnit","getAll","_layerConfig$filter","_filter$arguments","getPeriodNameFromFilter","EarthEngineLoader","onLoad","earthEngineLoader","EVENT_STATUS_ALL","EVENT_STATUS_COMPLETED","getEventStatuses","styleByBoolean","eventPointRadius","true","false","getDataElementName","styleByNumeric","getLegendItem","curry","legendItem","styleByOptionSet","getOptionSet","optionsByName","optSet","opt","accessDeniedAlert","filterErrorAlert","unknownErrorAlert","loadEventLayer","loadExtended","eventClustering","eventPointColor","areaRadius","getFiltersFromColumns","alert","getCount","bbox","extent","getBounds","total","pager","styleByDataItem","pageSize","getFiltersAsText","getFilterOptionNames","numericDataItemHeaders","newD","parseFloat","s","optionSets","all","httpStatusCode","EventLoader","eventLoader","extractBasemap","externalBasemap","view","mapLayerPosition","gisAppLayerOrder","externalLayer","earthEngine","thematic4","thematic3","thematic2","thematic1","boundary","facility","upgradeGisAppLayers","updatedMapViews","mapView","orderedMapView","renameBoundaryLayerToOrgUnitLayer","fetchMapQuery","mapFields","analysisFields","namePropertyUrl","fetchMap","engine","query","variables","getMigratedMapConfig","MAP_SERVICE_GEOJSON_URL","mapServiceToTypeMap","supportedMapServices","createExternalBasemapLayer","createExternalLayerConfig","createExternalOverlayLayer","mapService","imageFormat","legendSetUrl","tms","parseLayerConfig","externalMapLayers","getExternalLayer","ExternalLoader","externalLoader","organisationUnitGroupSet","includeGroupSets","system","systemInfo","requests","facilityLoader","EMPTY_FEATURE_STYLE","instanceBaseUrl","newConfig","geoJson","routesIndex","ok","json","fetchData","featureCollection","finalGeoJson","geometries","nonMultiType","buildGeoJsonFeatures","oneType","pointSize","GeoJsonUrlLoader","loadFailedAlert","useDataEngine","geoJsonUrlLoader","layername","OrgUnitLoader","orgUnitLoader","getPeriodsFromMetaData","pe","newEndDate","setHours","getValuesByPeriod","periodIndex","ouIndex","valueIndex","getValueById","getOrderedValues","userOrgUnit","isOperand","isSingleMap","displayPropertyUpper","geoFeaturesParams","dataDimension","addDataDimension","withDisplayProperty","addPeriodDimension","addFilter","withUserOrgUnit","withAggregationType","completedOnly","aggregate","thematicMapType","noDataColor","err","isBubbleMap","isSingleColor","getApiResponseNames","valueById","valueFeatures","orderedValues","getRadiusForValue","clamp","orgunit","ThematicLoader","thematicLoader","getProgramStatuses","TRACKED_ENTITY_INSTANCE","parseTEInstanceId","instance","trackedEntityInstance","getInstanceRelationships","relationshipsById","targetInstances","isRecursive","localRels","isValidRel","relationship","getDataWithRelationships","sourceInstances","organisationUnitSelectionMode","fromConstraint","toConstraint","relationshipEntity","trackedEntityType","instances","trackedEntityInstances","fetchTEIs","out","filteredSourceInstances","isIndexInstance","hasChildren","geometryTypesMap","POINT","POLYGON","MULTI_POLYGON","geometryTypes","featureType","customConfig","programStatus","followUp","relationshipTypeID","secondaryData","relatedTypeId","relatedEntityType","dataWithRels","TrackedEntityLoader","trackedEntityLoader","external","FacilityLoader","thematic","trackedEntity","geoJsonUrl","LayerLoader","Loader","LayersLoader","layersToLoad","BasemapLayer","isPlugin","basemapNotFoundAlert","basemapInvalidAlert","createLayer","errorMessage","alertError","setOpacity","setVisibility","contextTypes","getMapOutline","upperLeft","pointLocation","Point","OverviewMapOutline","mainMap","overviewMap","outline","setOutline","sourceId","setSourceId","onMainMapMove","on","off","getMapGL","getSource","getId","mapBounds","outlineBounds","POSITIVE_INFINITY","NEGATIVE_INFINITY","padding","resizeCount","setOverviewMap","mapContainer","onOverviewMapReady","mapGl","setCenter","getCenter","setZoom","getZoom","once","mapApi","attributionControl","dragRotate","touchZoomRotate","pitchWithRotate","minZoom","appendChild","getContainer","basemapLayer","mapHeight","clientHeight","hasSpace","setResizeCount","DownloadLegend","OverviewMap","downloadMapInfoOpen","northLetter","rotation","setRotation","getBearing","onMapRotate","dominantBaseline","clipRule","MapName","mapControls","imperial","splitViewControls","pluginControls","getMapControls","controls","ctrls","onHidden","AlertBar","_defineProperty","arg","input","hint","prim","Symbol","toPrimitive","TypeError","_toPrimitive","_toPropertyKey","defineProperty","enumerable","configurable","writable","Layer","PureComponent","setPeriod","componentDidUpdate","prevProps","prevState","editCounter","prevPeriod","isEdited","setLayerOrder","setLayerOpacity","setLayerVisibility","componentWillUnmount","callback","setIndex","bearing","fitBoundsOnce","isZoomed","onFeatureRightClick","highlight","container","left","top","openContextMenu","onErrorHidden","getThematicAggregationTypes","getEarthEngineStatisticTypes","getEarthEngineAggregationTypes","getEarthEngineAggregationType","t","orgUnitProfile","Popup","orgUnitId","openPopup","closePopup","createPortal","OrgUnitButton","isPercentage","table","onlySum","getValueKey","getValueFormat","typeValueFormat","hasValue","EVENTS_QUERY","getDataRows","displayElements","dataValues","dataRows","formattedValue","formatCoordinate","eventCoordinateFieldName","refetch","useDataQuery","lazy","eventDate","orgUnitName","dataElements","countColor","eventRequest","onEventClick","load","withBbox","withClusterSize","clusterSize","withIncludeClusterPoints","includeClusterPoints","clusterData","getCluster","tileId","clusterPane","buffer","bufferStyle","fillOpacity","loadDisplayElements","EventPopup","onPopupClose","clusterId","clusterCount","center","cluster","cluster_id","point_count","point_count_abbreviated","points","loadOptionSet","coordElement","fullOptionSet","byId","getLabelStyle","labelFontSize","labelFontStyle","labelFontWeight","labelFontColor","fontWeight","lineHeight","labels","hoverLabel","onFeatureClick","onRightClick","labelStyle","opacityFactor","onAssociatedGeometryClick","getPopup","isAssociatedGeometry","isPlainObject","Alert","_config$featureStyle","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","week","hour","minute","tickIntervals","second","start","stop","interval","bisector","right","tickStep","millisecond","tickInterval","ticks","playBtn","pauseBtn","doubleTicksPeriods","Timeline","mode","isCurrent","timeScale","onPeriodClick","scaleTime","numPeriods","maxTicks","numTicks","timeAxis","axisBottom","timeTicks","tickValues","select","node","box","play","isLastPeriod","timeout","setTimeout","clearTimeout","componentDidMount","setWidth","setTimeAxis","setTimeScale","onPlayPause","getPeriodRects","isTimeline","bottom","bubbleMap","periodData","poleOfInaccessibility","labelTemplate","initialPeriod","PeriodName","onPeriodChange","BaseUrlShim","apiVersion","fetchTEI","fieldsString","credentials","apiFetchWithBaseUrl","geomToCentroid","coords","totals","accum","point","getCentroid","makeRelationshipGeometry","fromGeom","toGeom","TrackedEntityLayer","onEntityClick","secondaryConfig","relationshipConfig","makeRelationshipLayer","lastUpdated","EventLayer","FacilityLayer","ThematicLayer","filterChange","applyFilter","clearAggregations","showValue","lng","lat","isUpdate","resolution","projection","noValue","preload","hasAggregations","getAggregations","addAggregationValues","setAggregations","EarthEnginePopup","GeoJsonLayer","Map","setMapObject","_map","scrollZoom","onMapReady","getChildContext","latitude","longitude","zoom","control","controlTypes","addControl","layerBounds","setView","fitWorld","closeCoordinatePopup","overlays","Overlay","MapItem","setMapControls","fitLayerBounds","sync","unsync","SplitView","interpretationModalOpen","showFullscreen","setShowFullscreen","setMap","containerRef","append","getControlContainer","layerDispatchActions","splitViewLayer","interpretation","loadedMapViews","MapView","MapPosition","mapgl","setBearing","setPitch","MapContainer","DownloadMapInfo","NorthArrow","DownloadButton","InterpretationsToggle","interpretationsEnabled","interpretationsOpen","AnalyticsInterpretationsAndDetailsToggler","isShowing","openDelay","closeDelay","onLayerSelect","anchorEl","layerTypes","maxWidth","LayerList","AddLayerButton","buttonRef","toggleDialog","IconAddCircle24","AddLayerPopover","Toolbar","HoverMenuBar","FileMenu","DrawerContent","FeatureProfile","featureProfile","IconCross24","onDrill","isDisconnected","isOffline","useDhis2ConnectionStatus","anchorPosition","setAnchorPosition","mapLeft","mapTop","IconArrowUp16","IconArrowDown16","LayerLegend","toggleOpen","LegendLayer","defaultBounds","forwardRef","getResizeFunction","mapIsLoaded","setMapIsLoaded","contextMenu","setContextMenu","onLayerLoad","CssReset","CssVariables","spacers","theme","ContextMenu","direction","visualization","onResponsesReceived","setMapViews","relativePeriodLayers","relativeLayer","openInterpretationModal","initialFocus","closeInterpretationModal","renderCount","interpretationsUnitRef","_state$interpretation","onReplyIconClick","AboutAOUnit","renderId","InterpretationsUnit","onInterpretationClick","InterpretationModal","onInterpretationUpdate","refresh","isVisualizationLoading","pluginComponent","InterpretationMap","isMapLoaded","InterpretationsPanel","PeriodSelect","changeYear","change","setPeriods","previousYear","nextYear","ORGUNIT_PROFILE_QUERY","profile","currentYear","defaultPeriod","formatter","coordFormat","address","closedDate","comment","contactPerson","email","groupSets","imageId","levelName","openingDate","phoneNumber","alt","IconDimensionOrgUnit16","ListItem","OrgUnitProfile","role","OrgUnitInfo","info","OrgUnitData","interpretationsRenderCount","detailsPanelOpen","viewOrgUnitProfile","viewFeatureProfile","getContent","Interpretations","AlertStack","useAlerts","mapAlerts","getMapAlerts","mapConfig","clearMapAlerts","UiAlertStack","ORG_UNITS_QUERY","roots","userDataViewFallback","order","OrgUnitsCtx","setOrgUnits","onComplete","useOrgUnits","setProgram","setStyleDataItem","setOptionStyle","setBooleanStyle","setClassification","setColorScale","setEventStatus","setEventPointRadius","setEventPointColor","setOrganisationUnitGroupSet","setOrganisationUnitColor","setPeriodType","clearPeriod","setStartDate","setEndDate","setAggregationType","setBufferRadius","setRadiusLow","setLegendSet","AssociatedGeometrySelect","geometryField","layerEdit","setAttributes","fetchedAttributes","attribute","OrgUnitSelectMode","setOrgUnitMode","NO_OTHER_SELECTS","hideUserOrgUnits","hideAssociatedGeometry","hideSelectMode","hideLevelSelect","hideGroupSelect","setOrgUnitItems","levelNumber","translateOrgUnitLevels","hasOrgUnits","numOtherSelects","OrgUnitDimension","onSelect","setBand","setYear","byYear","years","Set","byYearPeriods","onYearChange","defaultRadius","hasOrgUnitField","showBuffer","isDisabled","isInteger","paramsAreValid","setParams","steps","setSteps","onStepsChange","newPalette","warningText","minSteps","maxSteps","ColorScaleSelect","StyleSelect","BufferRadius","LegendPreview","setFilter","validateLayer","onLayerValidation","noBandSelected","hasMultipleAggregations","isCancelled","_orgUnits$levels","defaultLevel","isValid","Tabs","Tab","BandSelect","AggregationSelect","OrgUnitSelect","StyleTab","PROGRAM_STAGE_DATA_ELEMENTS_QUERY","elements","PROGRAM_TRACKED_ENTITY_ATTRIBUTES_QUERY","trackedEntityAttributes","useProgramTrackedEntityAttributes","programId","programAttributes","setProgramAttributes","programTrackedEntityAttributes","attr","trackedEntityAttribute","useEventDataItems","programStageId","dataElementsLoading","setDataElements","useProgramStageDataElements","attributesLoading","eventDataItems","prevProgram","usePrevious","isTrackerProgram","isFallback","IconDelete24","OPTION_SET_QUERY","optionSetId","setOptionSet","useOptionSet","operators","getOperators","splitFilter","newOperator","OptionSetSelect","newValue","TextField","DatePicker","newFilter","FilterSelect","RemoveFilter","FilterRow","changeFilter","removeFilter","basic","classRange","colorScaleName","LEGEND_SETS_QUERY","sets","legendSetError","legendSets","mapType","RadioGroup","isBubble","Radio","ColorPicker","marginTop","isPredefined","LegendTypeSelect","SingleColor","LegendSetSelect","Classification","addOptionStyle","styledOptionSet","setWarning","styledOptions","OptionStyle","NumericLegendStyle","BooleanStyle","OptionSetStyle","ITEM_NONE","DataItemStyle","startEndDates","hasDate","allProgramsItem","PROGRAMS_QUERY","programs","trackedEntityPrograms","PROGRAM_STAGES_QUERY","stages","onProgramStagesLoad","programStages","EventDialog","keyAnalysisRelativePeriod","validate","setProgramStage","setEventCoordinateField","setEventClustering","programError","programStageError","periodError","orgUnitsError","ProgramSelect","ProgramStageSelect","CoordinateField","EventStatusSelect","RelativePeriodSelect","StartEndDates","FilterGroup","ImageSelect","StyleByDataItem","setErrorState","ORG_UNIT_GROUP_SETS_QUERY","allowNone","organisationUnitGroupSets","onGroupSetChange","imagePath","setImagePath","GROUP_SETS_QUERY","defaultStyleType","setGroups","groupsWithColors","GroupStyle","GroupSetSelect","GroupSetStyle","setLabels","setLabelTemplate","template","setLabelFontColor","setLabelFontSize","setLabelFontWeight","setLabelFontStyle","includeDisplayOption","LabelDisplayOptions","FontStyle","QUERY","configuration","ORGUNITS_TAB","setOrgUnitsError","facilityOrgUnitLevel","facilityOrgUnitGroupSet","Labels","StyleByGroupSet","FILL","STROKE_COLOR","STROKE_WIDTH","POINT_SIZE","FILL_TRANSPARENT","FIELD_TYPE_COLOR","FIELD_TYPE_NUMBER","allowTransparent","FeatureStyle","OrgUnitDialog","DATA_ELEMENT_GROUPS_QUERY","dataElementGroup","dataElementGroups","DATA_ELEMENT_OPERAND_QUERY","operands","groupId","dataElementOperands","DATA_ELEMENTS_QUERY","domainType","excludeValueTypes","PROGRAM_DATA_ELEMENTS_QUERY","programDataElements","refetchProgramDataElements","DATA_SETS_QUERY","dataSetId","dataSets","DIMENSION_ITEMS_QUERY","foundValues","dimensionTypes","DIMENSIONS_QUERY","dropdownRef","findDimension","DimensionsPanel","onDimensionClick","selectedIds","DimensionSelect","selectedDimension","DimensionItemsSelect","addDimensionFilter","removeDimensionFilter","changeDimensionFilter","DimensionFilterRow","INDICATOR_GROUPS_QUERY","indicatorGroup","indicatorGroups","INDICATORS_QUERY","indicators","relativePeriodType","hasOtherLayers","hasOtherTimelineLayers","PROGRAM_INDICATORS_QUERY","programIndicators","eventDataTypes","hasEventData","onCheck","isValidRadius","setRadiusHigh","setThematicMapType","ThematicDialog","setValueType","setRenderingStrategy","setDataItem","setDataElementGroup","setIndicatorGroup","setNoDataColor","setOperand","indicatorGroupError","indicatorError","dataElementGroupError","dataElementError","dataSetError","eventDataItemError","programIndicatorError","periodTypeError","ValueTypeSelect","IndicatorGroupSelect","IndicatorSelect","DataElementGroupSelect","TotalsDetailsSelect","DataElementOperandSelect","DataElementSelect","DataSetsSelect","EventDataItemSelect","ProgramIndicatorSelect","AggregationTypeSelect","CompletedOnlyCheckbox","PeriodTypeSelect","RenderingStrategy","DimensionFilter","ThematicMapTypeSelect","RadiusSelect","NoDataColor","keepColumns","TRACKED_ENTITY_TYPES_QUERY","trackedEntityTypes","RELATIONSHIP_TYPES_QUERY","relationshipTypes","marginLeft","TrackedEntityDialog","showRelationshipsChecked","setTrackedEntityType","setProgramStatus","setFollowUpStatus","setTrackedEntityRelationshipType","setRelatedPointColor","setRelatedPointRadius","setRelationshipLineColor","trackedEntityTypeError","TrackedEntityTypeSelect","allPrograms","ProgramStatusSelect","marginBottom","TrackedEntityRelationshipTypeSelect","layerDialogs","setTrackedEntityRelationshipOutsideProgram","FacilityDialog","EarthEngineDialog","GeoJsonDialog","cancelLayer","isValidLayer","setIsValidLayer","LayerDialog","onValidateLayer","closeContextMenu","openCoordinatePopup","showEarthEngineValue","IconLocation16","clearAnalyticalObject","OpenAsMapDialog","_allDataDimensions$","allDataDimensions","firstDimensionId","selectedDataDims","setSelectedDataDims","addLayersToMap","selectedDimensions","lastDataId","numItems","ModalContainer","analyticalObject","LayerEdit","setInterpretation","dataStatisticsMutation","favorite","eventType","useLoadMap","previousParamsRef","loadMap","hashLocation","mutate","unlisten","App","setInterpretationsRenderCount","downloadModeOpen","DownloadModeMenu","AppMenu","DetailsPanel","_action$payload","newState","mapContextMenu","combineReducers","composeEnhancer","compose","store","createStore","reducer","applyMiddleware","thunk","Cypress","DEFAULT_SYSTEM_SETTINGS","appQueries","getBasemapList","externalBasemaps","keyBingMapsApiKey","getLayerTypes","externalLayerTypes","providerDataTransformation","username","authorities","namespace","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","d2Config","schemas","AppWrapper","replaceLegacyUrl","queryParams","base","interpretationid","interpretationQueryParams","replaceState","currentAnalyticalObject","ReduxProvider","DataStoreProvider","D2Shim","d2Error","CachedDataQueryProvider","dataTransformation","WindowDimensionsProvider","OrgUnitsProvider","elevations"],"sourceRoot":""}