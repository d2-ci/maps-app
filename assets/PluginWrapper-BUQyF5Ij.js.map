{"version":3,"file":"PluginWrapper-BUQyF5Ij.js","sources":["../../../../node_modules/@dhis2/analytics/build/es/modules/getPWAInstallationStatus.js","../../../../node_modules/@dhis2/analytics/build/es/components/DashboardPluginWrapper/DashboardPluginWrapper.js","../../../../node_modules/lodash/isEmpty.js","../../src/D2App/util/getBasemapConfig.js","../../src/D2App/util/getConfigFromNonMapConfig.js","../../src/D2App/components/plugin/LoadingMask.jsx","../../src/D2App/components/plugin/MapContainer.jsx","../../src/D2App/components/plugin/Plugin.jsx","../../src/D2App/PluginWrapper.jsx"],"sourcesContent":["export const INSTALLATION_STATES = {\n  READY: 'READY',\n  INSTALLING: 'INSTALLING'\n};\nfunction handleInstallingWorker({\n  installingWorker,\n  onStateChange\n}) {\n  installingWorker.onstatechange = () => {\n    if (installingWorker.state === 'activated') {\n      // ... and update state to 'ready'\n      onStateChange(INSTALLATION_STATES.READY);\n    }\n  };\n}\n\n/**\n * Gets the current installation state of the PWA features, which is intended\n * to be reported from this plugin to the parent app to indicate that the\n * static assets are cached and ready to be accessed locally instead of over\n * the network.\n *\n * Returns either READY, INSTALLING, or `null` for not installed/won't install\n */\nexport async function getPWAInstallationStatus({\n  onStateChange\n}) {\n  if (!navigator.serviceWorker) {\n    // Nothing to do here\n    return null;\n  }\n  const registration = await navigator.serviceWorker.getRegistration();\n  if (!registration) {\n    // This shouldn't happen since this is a PWA app, but return null\n    return null;\n  }\n  if (registration.active) {\n    return INSTALLATION_STATES.READY;\n  }\n  // note that 'registration.waiting' is skipped - it implies there's an active one\n  if (registration.installing) {\n    handleInstallingWorker({\n      installingWorker: registration.installing,\n      onStateChange\n    });\n    return INSTALLATION_STATES.INSTALLING;\n  }\n\n  // It shouldn't normally be possible to get here, but just in case,\n  // listen for installations\n  registration.onupdatefound = () => {\n    // update state for this plugin to 'installing'\n    onStateChange(INSTALLATION_STATES.INSTALLING);\n\n    // also listen for the installing worker to become active\n    const installingWorker = registration.installing;\n    if (!installingWorker) {\n      return;\n    }\n    handleInstallingWorker({\n      installingWorker,\n      onStateChange\n    });\n  };\n\n  // and in the mean time, return null to show 'not installed'\n  return null;\n}","import { useCacheableSection, CacheableSection, useConfig } from '@dhis2/app-runtime';\nimport { CenteredContent, CircularLoader, CssVariables, Layer } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { getPWAInstallationStatus } from '../../modules/getPWAInstallationStatus.js';\nconst LoadingMask = () => {\n  return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n};\nconst CacheableSectionWrapper = ({\n  id,\n  children,\n  isParentCached = false\n}) => {\n  const {\n    startRecording,\n    isCached,\n    remove\n  } = useCacheableSection(id);\n  useEffect(() => {\n    const shouldStartRecording = isParentCached && !isCached;\n    const shouldRemove = !isParentCached && isCached;\n    if (shouldStartRecording) {\n      startRecording({\n        onError: console.error\n      });\n    }\n    if (shouldRemove) {\n      // Synchronize cache state on load or prop update\n      // -- a back-up to imperative `removeCachedData`\n      remove();\n    }\n  }, [isCached, isParentCached, remove, startRecording]);\n  return /*#__PURE__*/React.createElement(CacheableSection, {\n    id: id,\n    loadingMask: /*#__PURE__*/React.createElement(LoadingMask, null)\n  }, children);\n};\nCacheableSectionWrapper.propTypes = {\n  children: PropTypes.node,\n  id: PropTypes.string,\n  isParentCached: PropTypes.bool\n};\nexport const DashboardPluginWrapper = ({\n  onInstallationStatusChange = Function.prototype,\n  children,\n  cacheId,\n  isParentCached = false,\n  ...props\n}) => {\n  const {\n    pwaEnabled\n  } = useConfig();\n  useEffect(() => {\n    // Get & send PWA installation status now\n    getPWAInstallationStatus({\n      onStateChange: onInstallationStatusChange\n    }).then(onInstallationStatusChange);\n  }, [onInstallationStatusChange]);\n  return props ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      height: '100%',\n      overflow: 'hidden'\n    }\n  }, pwaEnabled ? /*#__PURE__*/React.createElement(CacheableSectionWrapper, {\n    id: cacheId,\n    isParentCached: isParentCached\n  }, children(props)) : children(props), /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    elevations: true\n  })) : null;\n};\nDashboardPluginWrapper.propTypes = {\n  cacheId: PropTypes.string,\n  children: PropTypes.func,\n  isParentCached: PropTypes.bool,\n  onInstallationStatusChange: PropTypes.func\n};","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","import { getBasemapList, getBasemapOrFallback } from './basemaps.js'\nimport { EXTERNAL_MAP_LAYERS_QUERY } from './requests.js'\nimport { isValidUid } from './uid.js'\n\nconst getExternalMapLayers = async ({\n    engine,\n    basemapId,\n    defaultBasemapId,\n}) => {\n    if (!(isValidUid(basemapId) || isValidUid(defaultBasemapId))) {\n        return []\n    }\n\n    try {\n        const { externalLayers } = await engine.query({\n            externalLayers: EXTERNAL_MAP_LAYERS_QUERY,\n        })\n\n        return externalLayers.externalMapLayers\n    } catch (error) {\n        console.warn('Failed to fetch external basemaps:', error)\n        return []\n    }\n}\n\nconst getBasemapConfig = async ({\n    basemapId,\n    basemapVisible,\n    keyDefaultBaseMap,\n    systemSettings,\n    engine,\n}) => {\n    const externalMapLayers = await getExternalMapLayers({\n        engine,\n        basemapId,\n        defaultBasemapId: keyDefaultBaseMap,\n    })\n    const basemaps = await getBasemapList({ externalMapLayers, systemSettings })\n\n    const basemap = getBasemapOrFallback({\n        basemaps,\n        id: basemapId,\n        defaultId: keyDefaultBaseMap,\n        onMissing: (msg) => console.warn(msg),\n    })\n\n    if (typeof basemapVisible === 'boolean') {\n        basemap.isVisible = basemapVisible\n    }\n\n    return {\n        basemap,\n    }\n}\n\nexport default getBasemapConfig\n","import { getThematicLayerFromAnalyticalObject } from './analyticalObject.js'\nimport { generateUid } from './uid.js'\n\nexport const getConfigFromNonMapConfig = (config, defaultBasemapId, engine) => {\n    const { name } = config\n\n    return getThematicLayerFromAnalyticalObject({ ao: config, engine }).then(\n        (mapView) => ({\n            name,\n            basemap: { id: defaultBasemapId },\n            mapViews: [\n                {\n                    id: generateUid(),\n                    ...mapView,\n                },\n            ],\n        })\n    )\n}\n","import { CenteredContent, CircularLoader } from '@dhis2/ui'\nimport React from 'react'\n\nconst LoadingMask = () => {\n    return (\n        <div\n            style={{\n                position: 'absolute',\n                width: '100%',\n                height: '100%',\n                top: 0,\n            }}\n        >\n            <CenteredContent>\n                <CircularLoader />\n            </CenteredContent>\n        </div>\n    )\n}\n\nexport default LoadingMask\n","import { useDataEngine } from '@dhis2/app-runtime'\nimport isEmpty from 'lodash/isEmpty'\nimport PropTypes from 'prop-types'\nimport React, { useState, useEffect } from 'react'\nimport getBasemapConfig from '../../util/getBasemapConfig.js'\nimport { getConfigFromNonMapConfig } from '../../util/getConfigFromNonMapConfig.js'\nimport { getMigratedMapConfig } from '../../util/getMigratedMapConfig.js'\nimport { fetchMap } from '../../util/requests.js'\nimport { useCachedData } from '../cachedDataProvider/CachedDataProvider.jsx'\nimport LoadingMask from './LoadingMask.jsx'\nimport Map from './Map.jsx'\n\nconst MapContainer = ({ visualization }) => {\n    const engine = useDataEngine()\n    const { systemSettings } = useCachedData()\n    const [config, setConfig] = useState(null)\n\n    useEffect(() => {\n        const {\n            basemap: visBasemap,\n            mapViews,\n            id,\n            ...otherMapProps\n        } = visualization\n\n        const prepareConfig = async () => {\n            const { keyDefaultBaseMap } = systemSettings\n            let initialConfig\n            if (id && !mapViews) {\n                const map = await fetchMap({\n                    id,\n                    engine,\n                    defaultBasemap: keyDefaultBaseMap,\n                })\n                initialConfig = getMigratedMapConfig(map, keyDefaultBaseMap)\n            } else if (!mapViews) {\n                initialConfig = await getConfigFromNonMapConfig(\n                    otherMapProps,\n                    keyDefaultBaseMap,\n                    engine\n                )\n            } else {\n                initialConfig = getMigratedMapConfig(\n                    { basemap: visBasemap, mapViews },\n                    keyDefaultBaseMap\n                )\n            }\n\n            const { basemap } = await getBasemapConfig({\n                basemapId: initialConfig.basemap?.id,\n                basemapVisible: initialConfig.basemap?.isVisible,\n                keyDefaultBaseMap,\n                systemSettings,\n                engine,\n            })\n\n            setConfig({\n                ...initialConfig,\n                basemap,\n            })\n        }\n\n        if (!isEmpty(systemSettings)) {\n            prepareConfig()\n        }\n    }, [visualization, systemSettings, engine])\n\n    // eslint-disable-next-line no-unused-vars\n    const { basemap, mapViews, id, ...rest } = visualization\n\n    return !config ? <LoadingMask /> : <Map {...config} {...rest} />\n}\n\nMapContainer.propTypes = {\n    visualization: PropTypes.object,\n}\n\nexport default MapContainer\n","import PropTypes from 'prop-types'\nimport React from 'react'\nimport {\n    DEFAULT_SYSTEM_SETTINGS,\n    SYSTEM_SETTINGS,\n} from '../../constants/settings.js'\nimport { getHiddenPeriods } from '../../util/periods.js'\nimport { CachedDataProvider } from '../cachedDataProvider/CachedDataProvider.jsx'\nimport MapContainer from './MapContainer.jsx'\n\nconst query = {\n    systemSettings: {\n        resource: 'systemSettings',\n        params: {\n            key: SYSTEM_SETTINGS,\n        },\n    },\n    currentUser: {\n        resource: 'me',\n        params: {\n            fields: 'id,username,displayName~rename(name),authorities,settings[keyAnalysisDisplayProperty]',\n        },\n    },\n}\n\nconst providerDataTransformation = ({ systemSettings, currentUser }) => {\n    return {\n        systemSettings: Object.assign(\n            {},\n            DEFAULT_SYSTEM_SETTINGS,\n            systemSettings,\n            {\n                hiddenPeriods: getHiddenPeriods(systemSettings),\n            }\n        ),\n        currentUser: {\n            id: currentUser.id,\n            name: currentUser.name,\n            username: currentUser.username,\n            authorities: new Set(currentUser.authorities),\n            keyAnalysisDisplayProperty:\n                currentUser.settings.keyAnalysisDisplayProperty,\n        },\n        nameProperty:\n            currentUser.settings.keyAnalysisDisplayProperty === 'name'\n                ? 'displayName'\n                : 'displayShortName',\n    }\n}\n\nexport const Plugin = ({ visualization, displayProperty }) => {\n    return (\n        <CachedDataProvider\n            query={query}\n            dataTransformation={providerDataTransformation}\n            translucent={false}\n        >\n            <MapContainer\n                visualization={visualization}\n                displayProperty={displayProperty}\n            />\n        </CachedDataProvider>\n    )\n}\n\nPlugin.propTypes = {\n    displayProperty: PropTypes.string,\n    visualization: PropTypes.object,\n}\n","import { DashboardPluginWrapper } from '@dhis2/analytics'\nimport { debounce } from 'lodash/fp'\nimport React, { useLayoutEffect, useState } from 'react'\nimport { Plugin } from './components/plugin/Plugin.jsx'\nimport './locales/index.js'\n\nconst PluginWrapper = (props) => {\n    const [renderId, setRenderId] = useState(null)\n\n    useLayoutEffect(() => {\n        const updateRenderId = debounce(300, () =>\n            setRenderId((renderId) =>\n                typeof renderId === 'number' ? renderId + 1 : 1\n            )\n        )\n\n        window.addEventListener('resize', updateRenderId)\n\n        return () => window.removeEventListener('resize', updateRenderId)\n    }, [])\n\n    return (\n        <DashboardPluginWrapper {...props}>\n            {(props) => <Plugin id={renderId} {...props} />}\n        </DashboardPluginWrapper>\n    )\n}\n\nexport default PluginWrapper\n"],"names":["INSTALLATION_STATES","handleInstallingWorker","installingWorker","onStateChange","getPWAInstallationStatus","registration","LoadingMask","React","Layer","CenteredContent","CircularLoader","CacheableSectionWrapper","id","children","isParentCached","startRecording","isCached","remove","useCacheableSection","useEffect","shouldStartRecording","shouldRemove","CacheableSection","PropTypes","DashboardPluginWrapper","onInstallationStatusChange","cacheId","props","pwaEnabled","useConfig","CssVariables","baseKeys","require$$0","getTag","require$$1","isArguments","require$$2","isArray","require$$3","isArrayLike","require$$4","isBuffer","require$$5","isPrototype","require$$6","isTypedArray","require$$7","mapTag","setTag","objectProto","hasOwnProperty","isEmpty","value","tag","key","isEmpty_1","getExternalMapLayers","engine","basemapId","defaultBasemapId","isValidUid","externalLayers","query","EXTERNAL_MAP_LAYERS_QUERY","externalMapLayers","error","console","warn","getBasemapConfig","basemapVisible","keyDefaultBaseMap","systemSettings","basemaps","getBasemapList","basemap","getBasemapOrFallback","defaultId","onMissing","msg","isVisible","getConfigFromNonMapConfig","config","name","getThematicLayerFromAnalyticalObject","ao","then","mapView","mapViews","generateUid","jsx","position","width","height","top","MapContainer","visualization","useDataEngine","useCachedData","setConfig","useState","visBasemap","otherMapProps","prepareConfig","initialConfig","map","fetchMap","defaultBasemap","getMigratedMapConfig","rest","Map","propTypes","object","resource","params","SYSTEM_SETTINGS","currentUser","fields","providerDataTransformation","Object","assign","DEFAULT_SYSTEM_SETTINGS","hiddenPeriods","getHiddenPeriods","username","authorities","Set","keyAnalysisDisplayProperty","settings","nameProperty","Plugin","displayProperty","CachedDataProvider","string","PluginWrapper","renderId","setRenderId","useLayoutEffect","updateRenderId","debounce","addEventListener","window","removeEventListener"],"mappings":"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","x_google_ignoreList":[0,1,2]}